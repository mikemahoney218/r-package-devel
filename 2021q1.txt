From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Sun Jan  3 03:29:16 2021
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Sun, 3 Jan 2021 02:29:16 +0000
Subject: [R-pkg-devel] How to get rid of R CMD check warning/note for new S4
 classes
Message-ID: <MN2PR19MB411083912CB5DB155BBE592192D30@MN2PR19MB4110.namprd19.prod.outlook.com>

Hi 

I am creating a few S4 classes for a package. These classes include slots set to classes obtained using setClassUnion (some common across the new S4 classes). The code is functional but `R CMD check` keeps on reporting notes or warnings whatever I try. I am pulling my hair on this one and would really appreciate some insight on what I am doing wrong. 

Below are some simplified versions of a real function, which each gives different note/warning:

* Option 1 returns a note

createyNewClass <- function(){
? setClassUnion("character or NULL",c("character","NULL"),where = .GlobalEnv)
? setClass('newS4Classe',
? ??? where = .GlobalEnv, 
? ??? slots = c(type = 'character or NULL'),
? ? ? prototype = list(type = NULL)
? )
}

R CMD check
* checking whether the namespace can be loaded with stated dependencies ... NOTE
Warning: class "NULL" is defined (with package slot "methods") but no metadata object found to revise superClass information---not exported?  Making a copy in package ".GlobalEnv"
Warning: class "character" is defined (with package slot "methods") but no metadata object found to revise superClass information---not exported?  Making a copy in package ".GlobalEnv"


* Option 2: returns a WARNING

createyNewClass <- function(){
  setClassUnion("character or NULL",c("character","NULL"))
  setClass('newS4Classe',
?   ? slots = c(type = 'character or NULL'),
  ? ? prototype = list(type = NULL)
  )
}

R CMD check:
...
* checking for missing documentation entries ... WARNING
Undocumented S4 classes:? 
? "character or numeric"
All user-level objects in a package (including S4 classes and methods)
should have documentation entries.
...

Thanks

From o||ver@p@m@d@en @end|ng |rom gm@||@com  Tue Jan  5 22:39:32 2021
From: o||ver@p@m@d@en @end|ng |rom gm@||@com (Oliver Madsen)
Date: Tue, 5 Jan 2021 22:39:32 +0100
Subject: [R-pkg-devel] accessing call constructors in Cpp
Message-ID: <CAFL8AHoy8LO5h1YpchkrQOZj+FzjGsfcQrX_uOGLwvX4wXGx7A@mail.gmail.com>

This is maybe better suited for Rcpp-devel or another mailing list. If so,
I apologize. :-)

In a pet project I've been implementing quite a bit of a package structure
within Cpp, including classes to contain and manipulate structures. As a
final part of the implementation a user provided R function is to be
executed with some of the manipulated data. While my first intuition (and
the smart option) was to implement a method in R for extracting the
parameters and simply executing the call, I got curious as to how one could
do this in Cpp.

After researching I found myriad options, one simple method being
1) Create a list of named and unnamed arguments
2) Extract "do.call" as a Function,
3) Test that the function provided is either a CLOSXP (function) or CHARSXP
(or maybe STRSXP?) and then
4) execute the function call.
but while going further down and checking the source code for do_docall I
was curious about trying to recreate the call "the old fashioned way", but
in Cpp. After looking over how it was done in R-source and a few examples
online I tried implementing a simple call creation and evaluating it with
Rf_eval

```cpp
#include <R.h>
#include <Rinternals.h>
//[[Rcpp::export]]
SEXP add_10_and_5(SEXP rho){ //rho is an environment (new.env() here)
SEXP REALSXP_10 = PROTECT(ScalarReal(10));
SEXP REALSXP_5 = PROTECT(ScalarReal(5));
SEXP out = PROTECT(LCONS(install("+"), LCONS(
  REALSXP_10, LCONS(
      REALSXP_5, R_NilValue
  )
)));
UNPROTECT(3);
return eval(out, rho);
}
```
(For those who read the old version of Advanced R, this is a very similar
to the R's C interface section on "PairLists")

Immediately intellisense warned me that "ScalarReal", "install", "lcons"
and "eval" are all undefined. However, a quick look in
src/include/Rinternals.h shows that they are forward-declared there, and
should (in my understanding) be defined. For good measures I tried
including every header iteratively to no avail.

While it is likely recommended to not do this (and the final product likely
will be implemented in R), I am curious why I seem unable to access these 4
from Cpp. I can't seem to spot the reason in the header file itself.

Best regards
Oliver

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jan  6 00:00:48 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Tue, 5 Jan 2021 15:00:48 -0800
Subject: [R-pkg-devel] accessing call constructors in Cpp
In-Reply-To: <CAFL8AHoy8LO5h1YpchkrQOZj+FzjGsfcQrX_uOGLwvX4wXGx7A@mail.gmail.com>
References: <CAFL8AHoy8LO5h1YpchkrQOZj+FzjGsfcQrX_uOGLwvX4wXGx7A@mail.gmail.com>
Message-ID: <CAHqSRuRSXPKZRWTSYB0rmkQbfuDGVC8UCpYbqtRfuH5_ZzP5HQ@mail.gmail.com>

Try using their official names, Rf_ScalarReal, Rf_eval, Rf_install, etc.
You may have #defined R_NO_REMAP in code that you did not show us.

-Bill

On Tue, Jan 5, 2021 at 1:42 PM Oliver Madsen <oliver.p.madsen at gmail.com>
wrote:

> This is maybe better suited for Rcpp-devel or another mailing list. If so,
> I apologize. :-)
>
> In a pet project I've been implementing quite a bit of a package structure
> within Cpp, including classes to contain and manipulate structures. As a
> final part of the implementation a user provided R function is to be
> executed with some of the manipulated data. While my first intuition (and
> the smart option) was to implement a method in R for extracting the
> parameters and simply executing the call, I got curious as to how one could
> do this in Cpp.
>
> After researching I found myriad options, one simple method being
> 1) Create a list of named and unnamed arguments
> 2) Extract "do.call" as a Function,
> 3) Test that the function provided is either a CLOSXP (function) or CHARSXP
> (or maybe STRSXP?) and then
> 4) execute the function call.
> but while going further down and checking the source code for do_docall I
> was curious about trying to recreate the call "the old fashioned way", but
> in Cpp. After looking over how it was done in R-source and a few examples
> online I tried implementing a simple call creation and evaluating it with
> Rf_eval
>
> ```cpp
> #include <R.h>
> #include <Rinternals.h>
> //[[Rcpp::export]]
> SEXP add_10_and_5(SEXP rho){ //rho is an environment (new.env() here)
> SEXP REALSXP_10 = PROTECT(ScalarReal(10));
> SEXP REALSXP_5 = PROTECT(ScalarReal(5));
> SEXP out = PROTECT(LCONS(install("+"), LCONS(
>   REALSXP_10, LCONS(
>       REALSXP_5, R_NilValue
>   )
> )));
> UNPROTECT(3);
> return eval(out, rho);
> }
> ```
> (For those who read the old version of Advanced R, this is a very similar
> to the R's C interface section on "PairLists")
>
> Immediately intellisense warned me that "ScalarReal", "install", "lcons"
> and "eval" are all undefined. However, a quick look in
> src/include/Rinternals.h shows that they are forward-declared there, and
> should (in my understanding) be defined. For good measures I tried
> including every header iteratively to no avail.
>
> While it is likely recommended to not do this (and the final product likely
> will be implemented in R), I am curious why I seem unable to access these 4
> from Cpp. I can't seem to spot the reason in the header file itself.
>
> Best regards
> Oliver
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From o||ver@p@m@d@en @end|ng |rom gm@||@com  Wed Jan  6 09:51:34 2021
From: o||ver@p@m@d@en @end|ng |rom gm@||@com (Oliver Madsen)
Date: Wed, 6 Jan 2021 09:51:34 +0100
Subject: [R-pkg-devel] accessing call constructors in Cpp
In-Reply-To: <CAHqSRuRSXPKZRWTSYB0rmkQbfuDGVC8UCpYbqtRfuH5_ZzP5HQ@mail.gmail.com>
References: <CAFL8AHoy8LO5h1YpchkrQOZj+FzjGsfcQrX_uOGLwvX4wXGx7A@mail.gmail.com>
 <CAHqSRuRSXPKZRWTSYB0rmkQbfuDGVC8UCpYbqtRfuH5_ZzP5HQ@mail.gmail.com>
Message-ID: <CAFL8AHphW7ZtuYutmdaN96xSkrGHJb3uG9o_0AQ_osDYx0CK4w@mail.gmail.com>

Hi Bill thanks for your answer,

The only part left out (which I only realized as I'm trying out your
suggestion) is an #include Rcpp in order to remove 5 errors thrown when
executing Rcpp::sourceCpp. I am guessing that the suggestion from RAPI to
always work with R_NO_REMAP defined is taken literally and that it is
defined in Rcpp.h or its dependencies.

But it is working, thank you! :-)
(continues to dive further down the rabbit hole)

Best Regards
Oliver

On Wed, Jan 6, 2021 at 12:01 AM Bill Dunlap <williamwdunlap at gmail.com>
wrote:

> Try using their official names, Rf_ScalarReal, Rf_eval, Rf_install, etc.
> You may have #defined R_NO_REMAP in code that you did not show us.
>
> -Bill
>
> On Tue, Jan 5, 2021 at 1:42 PM Oliver Madsen <oliver.p.madsen at gmail.com>
> wrote:
>
>> This is maybe better suited for Rcpp-devel or another mailing list. If so,
>> I apologize. :-)
>>
>> In a pet project I've been implementing quite a bit of a package structure
>> within Cpp, including classes to contain and manipulate structures. As a
>> final part of the implementation a user provided R function is to be
>> executed with some of the manipulated data. While my first intuition (and
>> the smart option) was to implement a method in R for extracting the
>> parameters and simply executing the call, I got curious as to how one
>> could
>> do this in Cpp.
>>
>> After researching I found myriad options, one simple method being
>> 1) Create a list of named and unnamed arguments
>> 2) Extract "do.call" as a Function,
>> 3) Test that the function provided is either a CLOSXP (function) or
>> CHARSXP
>> (or maybe STRSXP?) and then
>> 4) execute the function call.
>> but while going further down and checking the source code for do_docall I
>> was curious about trying to recreate the call "the old fashioned way", but
>> in Cpp. After looking over how it was done in R-source and a few examples
>> online I tried implementing a simple call creation and evaluating it with
>> Rf_eval
>>
>> ```cpp
>> #include <R.h>
>> #include <Rinternals.h>
>> //[[Rcpp::export]]
>> SEXP add_10_and_5(SEXP rho){ //rho is an environment (new.env() here)
>> SEXP REALSXP_10 = PROTECT(ScalarReal(10));
>> SEXP REALSXP_5 = PROTECT(ScalarReal(5));
>> SEXP out = PROTECT(LCONS(install("+"), LCONS(
>>   REALSXP_10, LCONS(
>>       REALSXP_5, R_NilValue
>>   )
>> )));
>> UNPROTECT(3);
>> return eval(out, rho);
>> }
>> ```
>> (For those who read the old version of Advanced R, this is a very similar
>> to the R's C interface section on "PairLists")
>>
>> Immediately intellisense warned me that "ScalarReal", "install", "lcons"
>> and "eval" are all undefined. However, a quick look in
>> src/include/Rinternals.h shows that they are forward-declared there, and
>> should (in my understanding) be defined. For good measures I tried
>> including every header iteratively to no avail.
>>
>> While it is likely recommended to not do this (and the final product
>> likely
>> will be implemented in R), I am curious why I seem unable to access these
>> 4
>> from Cpp. I can't seem to spot the reason in the header file itself.
>>
>> Best regards
>> Oliver
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From j@h@d||e|d @end|ng |rom ed@@c@uk  Wed Jan  6 12:20:36 2021
From: j@h@d||e|d @end|ng |rom ed@@c@uk (Jarrod Hadfield)
Date: Wed, 6 Jan 2021 11:20:36 +0000
Subject: [R-pkg-devel] Sweave vignette and bibtex
Message-ID: <6528eec2-9079-df43-cf44-f3387010d3a7@ed.ac.uk>

Hi,

I have a Sweave vignette in a package I have written. When building, the
citations are not put into the pdf - perhaps because two passes of the
tex file are required but only one is executed. Is there a way to force
two passes of the tex file?

Kind Regards,

Jarrod

The University of Edinburgh is a charitable body, registered in Scotland, with registration number SC005336.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jan  6 12:42:28 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 6 Jan 2021 06:42:28 -0500
Subject: [R-pkg-devel] Sweave vignette and bibtex
In-Reply-To: <6528eec2-9079-df43-cf44-f3387010d3a7@ed.ac.uk>
References: <6528eec2-9079-df43-cf44-f3387010d3a7@ed.ac.uk>
Message-ID: <50f2a018-30f0-b11c-8e61-46896d884437@gmail.com>

On 06/01/2021 6:20 a.m., Jarrod Hadfield wrote:
> Hi,
> 
> I have a Sweave vignette in a package I have written. When building, the
> citations are not put into the pdf - perhaps because two passes of the
> tex file are required but only one is executed. Is there a way to force
> two passes of the tex file?
> 
> Kind Regards,
> 
> Jarrod
> 
> The University of Edinburgh is a charitable body, registered in Scotland, with registration number SC005336.
> 
> _________________________________________


You should give a bit more detail (what exactly do you have in your 
vignettes directory? How are you processing it?), and maybe even a 
reproducible example if you can extract a minimal amount from the 
document and the .bib file.  I haven't used Sweave in a few years (I 
recommend switching to knitr's implementation of .Rnw processing), but I 
didn't have problems like yours in the past.

Duncan Murdoch


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Wed Jan  6 18:06:43 2021
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Wed, 6 Jan 2021 17:06:43 +0000
Subject: [R-pkg-devel] Sweave vignette and bibtex
In-Reply-To: <6528eec2-9079-df43-cf44-f3387010d3a7@ed.ac.uk>
References: <6528eec2-9079-df43-cf44-f3387010d3a7@ed.ac.uk>
Message-ID: <71d81c3f-eee8-f393-1c39-bdf5ff861d5a@dewey.myzen.co.uk>

Dear Jarrod

It works for me with Sweave so perhaps we need some more details.

Michael

On 06/01/2021 11:20, Jarrod Hadfield wrote:
> Hi,
> 
> I have a Sweave vignette in a package I have written. When building, the
> citations are not put into the pdf - perhaps because two passes of the
> tex file are required but only one is executed. Is there a way to force
> two passes of the tex file?
> 
> Kind Regards,
> 
> Jarrod
> 
> The University of Edinburgh is a charitable body, registered in 
> Scotland, with registration number SC005336.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From n@r@@ @end|ng |rom @t@n|ord@edu  Wed Jan  6 18:28:07 2021
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Wed, 6 Jan 2021 09:28:07 -0800
Subject: [R-pkg-devel] Winbuilder seems stuck
Message-ID: <de51b162-4251-fa9c-a19c-0a22a3ef6bb2@stanford.edu>

This is just FYI to CRAN as no results came back from an upload over a 
day and a half ago. A repeat upload gives:

ERROR: Access to the path 'C:\Inetpub\ftproot\R-devel\...' is denied.

-Naras



	[[alternative HTML version deleted]]


From j@h@d||e|d @end|ng |rom ed@@c@uk  Wed Jan  6 18:50:13 2021
From: j@h@d||e|d @end|ng |rom ed@@c@uk (Jarrod Hadfield)
Date: Wed, 6 Jan 2021 17:50:13 +0000
Subject: [R-pkg-devel] Sweave vignette and bibtex
In-Reply-To: <71d81c3f-eee8-f393-1c39-bdf5ff861d5a@dewey.myzen.co.uk>
References: <6528eec2-9079-df43-cf44-f3387010d3a7@ed.ac.uk>
 <71d81c3f-eee8-f393-1c39-bdf5ff861d5a@dewey.myzen.co.uk>
Message-ID: <4d552ed6-da03-7049-266b-31cc9eaedce8@ed.ac.uk>

Dear Duncan and Michael,

Thank you for the quick replies. When trying to generate a reproducible 
example I realised I'd done something embarassingly stupid and the 
problem is now resolved.

Kind Regards,

Jarrod



On 06/01/2021 17:06, Michael Dewey wrote:
> This email was sent to you by someone outside the University.
> You should only click on links or attachments if you are certain that 
> the email is genuine and the content is safe.
>
> Dear Jarrod
>
> It works for me with Sweave so perhaps we need some more details.
>
> Michael
>
> On 06/01/2021 11:20, Jarrod Hadfield wrote:
>> Hi,
>>
>> I have a Sweave vignette in a package I have written. When building, the
>> citations are not put into the pdf - perhaps because two passes of the
>> tex file are required but only one is executed. Is there a way to force
>> two passes of the tex file?
>>
>> Kind Regards,
>>
>> Jarrod
>>
>> The University of Edinburgh is a charitable body, registered in
>> Scotland, with registration number SC005336.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> -- 
> Michael
> http://www.dewey.myzen.co.uk/home.html


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jan  7 03:36:22 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 06 Jan 2021 18:36:22 -0800
Subject: [R-pkg-devel] Sweave vignette and bibtex
In-Reply-To: <4d552ed6-da03-7049-266b-31cc9eaedce8@ed.ac.uk>
References: <6528eec2-9079-df43-cf44-f3387010d3a7@ed.ac.uk>
 <71d81c3f-eee8-f393-1c39-bdf5ff861d5a@dewey.myzen.co.uk>
 <4d552ed6-da03-7049-266b-31cc9eaedce8@ed.ac.uk>
Message-ID: <6C873D64-7568-48B7-81E9-1879A6FF491B@dcn.davis.ca.us>

Sheepish grins may be good for character building, but MREs are good for solving problems. You can choose which you want first!  ;-)

On January 6, 2021 9:50:13 AM PST, Jarrod Hadfield <j.hadfield at ed.ac.uk> wrote:
>Dear Duncan and Michael,
>
>Thank you for the quick replies. When trying to generate a reproducible
>
>example I realised I'd done something embarassingly stupid and the 
>problem is now resolved.
>
>Kind Regards,
>
>Jarrod
>
>
>
>On 06/01/2021 17:06, Michael Dewey wrote:
>> This email was sent to you by someone outside the University.
>> You should only click on links or attachments if you are certain that
>
>> the email is genuine and the content is safe.
>>
>> Dear Jarrod
>>
>> It works for me with Sweave so perhaps we need some more details.
>>
>> Michael
>>
>> On 06/01/2021 11:20, Jarrod Hadfield wrote:
>>> Hi,
>>>
>>> I have a Sweave vignette in a package I have written. When building,
>the
>>> citations are not put into the pdf - perhaps because two passes of
>the
>>> tex file are required but only one is executed. Is there a way to
>force
>>> two passes of the tex file?
>>>
>>> Kind Regards,
>>>
>>> Jarrod
>>>
>>> The University of Edinburgh is a charitable body, registered in
>>> Scotland, with registration number SC005336.
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> -- 
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From gd|erm@|| @end|ng |rom gm@||@com  Fri Jan  8 15:17:58 2021
From: gd|erm@|| @end|ng |rom gm@||@com (Greg Freedman Ellis)
Date: Fri, 8 Jan 2021 09:17:58 -0500
Subject: [R-pkg-devel] Package used unconditionally only in testing
Message-ID: <CAJdmaqSGTWbz0xpiJa0ArAOiUiqG+929Bq+yEfSQoxj4payqPA@mail.gmail.com>

Hi all,

I'm trying to update a package to conform to pass tests given
`_R_CHECK_DEPENDS_ONLY_=TRUE`.

In this package, we only use the package `httptest` during testing, but the
tests are (almost) meaningless if it is not installed, so I would like to
indicate that it is a required package rather than skipping tests if it is
not installed.

If I move `httptest` to Depends, then I get the error CRAN check note:
> Namespace in Imports field not imported from: ?httptest?
>   All declared Imports should be used.

I think this would best be solved by a DESCRIPTION field that indicates a
package is required, but only for tests, but I do not see such a field. The
only solution I can think of is to have a trivial import of `httptest` in
the main package to silence the NOTE. Is there a better solution?

Greg Freedman Ellis

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jan  8 17:13:18 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 08 Jan 2021 08:13:18 -0800
Subject: [R-pkg-devel] Package used unconditionally only in testing
In-Reply-To: <CAJdmaqSGTWbz0xpiJa0ArAOiUiqG+929Bq+yEfSQoxj4payqPA@mail.gmail.com>
References: <CAJdmaqSGTWbz0xpiJa0ArAOiUiqG+929Bq+yEfSQoxj4payqPA@mail.gmail.com>
Message-ID: <A37ED58C-7414-4BE1-8A13-608BAC25B9A3@dcn.davis.ca.us>

This is normally where the Suggests field is used.

On January 8, 2021 6:17:58 AM PST, Greg Freedman Ellis <gdfermail at gmail.com> wrote:
>Hi all,
>
>I'm trying to update a package to conform to pass tests given
>`_R_CHECK_DEPENDS_ONLY_=TRUE`.
>
>In this package, we only use the package `httptest` during testing, but
>the
>tests are (almost) meaningless if it is not installed, so I would like
>to
>indicate that it is a required package rather than skipping tests if it
>is
>not installed.
>
>If I move `httptest` to Depends, then I get the error CRAN check note:
>> Namespace in Imports field not imported from: ?httptest?
>>   All declared Imports should be used.
>
>I think this would best be solved by a DESCRIPTION field that indicates
>a
>package is required, but only for tests, but I do not see such a field.
>The
>only solution I can think of is to have a trivial import of `httptest`
>in
>the main package to silence the NOTE. Is there a better solution?
>
>Greg Freedman Ellis
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jan  8 17:15:20 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 8 Jan 2021 11:15:20 -0500
Subject: [R-pkg-devel] Package used unconditionally only in testing
In-Reply-To: <CAJdmaqSGTWbz0xpiJa0ArAOiUiqG+929Bq+yEfSQoxj4payqPA@mail.gmail.com>
References: <CAJdmaqSGTWbz0xpiJa0ArAOiUiqG+929Bq+yEfSQoxj4payqPA@mail.gmail.com>
Message-ID: <baad805c-5463-38d5-4ad4-4d85bc2c6e41@gmail.com>

On 08/01/2021 9:17 a.m., Greg Freedman Ellis wrote:
> Hi all,
> 
> I'm trying to update a package to conform to pass tests given
> `_R_CHECK_DEPENDS_ONLY_=TRUE`.
> 
> In this package, we only use the package `httptest` during testing, but the
> tests are (almost) meaningless if it is not installed, so I would like to
> indicate that it is a required package rather than skipping tests if it is
> not installed.

This sounds wrong.  I don't know the httptest package, but I assume that 
since you were only using it for testing, I might be interested in using 
your package even if I wasn't interested in installing httptest.  Making 
it a hard requirement would force me to install httptest.

> 
> If I move `httptest` to Depends, then I get the error CRAN check note:
>> Namespace in Imports field not imported from: ?httptest?
>>    All declared Imports should be used.

You *definitely* shouldn't include it in Depends:  that would force it 
onto the search list, and potentially break other things that I'm 
running, e.g. if they have name conflicts with it.

You *probably* shouldn't include it in Imports.  Why force me to load 
another package if I'll never use it?  There's a tiny chance that would 
push my memory use over the edge, and my own code would fail.

It should almost certainly be included in Suggests, and nowhere else.
If that means your tests are skipped, you should feel free to warn the 
user in your test messages:  but it shouldn't cause your tests to fail.

> I think this would best be solved by a DESCRIPTION field that indicates a
> package is required, but only for tests, but I do not see such a field. The
> only solution I can think of is to have a trivial import of `httptest` in
> the main package to silence the NOTE. Is there a better solution?

Most users aren't going to run your tests, so they shouldn't be forced 
to install software that would let them do so.

Duncan Murdoch


From gd|erm@|| @end|ng |rom gm@||@com  Fri Jan  8 20:24:37 2021
From: gd|erm@|| @end|ng |rom gm@||@com (Greg Freedman Ellis)
Date: Fri, 8 Jan 2021 14:24:37 -0500
Subject: [R-pkg-devel] Package used unconditionally only in testing
In-Reply-To: <02CF62C7-088D-466B-871F-2F6A30676654@hxcore.ol>
References: <CAJdmaqSGTWbz0xpiJa0ArAOiUiqG+929Bq+yEfSQoxj4payqPA@mail.gmail.com>
 <baad805c-5463-38d5-4ad4-4d85bc2c6e41@gmail.com>
 <02CF62C7-088D-466B-871F-2F6A30676654@hxcore.ol>
Message-ID: <CAJdmaqRHkcLvQB9981cbYmr_aceAhmuekJEU5BpP5FTqYi93ZQ@mail.gmail.com>

> It should almost certainly be included in Suggests, and nowhere else.
> If that means your tests are skipped, you should feel free to warn the
> user in your test messages:  but it shouldn't cause your tests to fail.

I guess my worry is that my upstream dependencies will break something
without knowing it because the tests won't fail unless httptest is
installed. I really wish there was a way to indicate dependencies for
testing purposes only.

(And, oops, you're right, I meant that I was considering including httptest
in Imports not Depends)

On Fri, Jan 8, 2021 at 12:04 PM David Bosak <dbosak01 at gmail.com> wrote:

> >> Namespace in Imports field not imported from: ?httptest?
>
> >>    All declared Imports should be used.
>
>
>
> I?ve seen that note before when I forgot to remove a @import reference in
> the Roxygen comments.  Or it is still in the NAMESPACE file when I don?t
> want it to be.
>
>
>
> Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
> Windows 10
>
>
>
> *From: *Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent: *Friday, January 8, 2021 11:15 AM
> *To: *Greg Freedman Ellis <gdfermail at gmail.com>;
> r-package-devel at r-project.org
> *Subject: *Re: [R-pkg-devel] Package used unconditionally only in testing
>
>
>
> On 08/01/2021 9:17 a.m., Greg Freedman Ellis wrote:
>
> > Hi all,
>
> >
>
> > I'm trying to update a package to conform to pass tests given
>
> > `_R_CHECK_DEPENDS_ONLY_=TRUE`.
>
> >
>
> > In this package, we only use the package `httptest` during testing, but
> the
>
> > tests are (almost) meaningless if it is not installed, so I would like to
>
> > indicate that it is a required package rather than skipping tests if it
> is
>
> > not installed.
>
>
>
> This sounds wrong.  I don't know the httptest package, but I assume that
>
> since you were only using it for testing, I might be interested in using
>
> your package even if I wasn't interested in installing httptest.  Making
>
> it a hard requirement would force me to install httptest.
>
>
>
> >
>
> > If I move `httptest` to Depends, then I get the error CRAN check note:
>
> >> Namespace in Imports field not imported from: ?httptest?
>
> >>    All declared Imports should be used.
>
>
>
> You *definitely* shouldn't include it in Depends:  that would force it
>
> onto the search list, and potentially break other things that I'm
>
> running, e.g. if they have name conflicts with it.
>
>
>
> You *probably* shouldn't include it in Imports.  Why force me to load
>
> another package if I'll never use it?  There's a tiny chance that would
>
> push my memory use over the edge, and my own code would fail.
>
>
>
> It should almost certainly be included in Suggests, and nowhere else.
>
> If that means your tests are skipped, you should feel free to warn the
>
> user in your test messages:  but it shouldn't cause your tests to fail.
>
>
>
> > I think this would best be solved by a DESCRIPTION field that indicates a
>
> > package is required, but only for tests, but I do not see such a field.
> The
>
> > only solution I can think of is to have a trivial import of `httptest` in
>
> > the main package to silence the NOTE. Is there a better solution?
>
>
>
> Most users aren't going to run your tests, so they shouldn't be forced
>
> to install software that would let them do so.
>
>
>
> Duncan Murdoch
>
>
>
> ______________________________________________
>
> R-package-devel at r-project.org mailing list
>
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Jan  8 20:32:54 2021
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Fri, 8 Jan 2021 11:32:54 -0800
Subject: [R-pkg-devel] Package used unconditionally only in testing
In-Reply-To: <CAJdmaqRHkcLvQB9981cbYmr_aceAhmuekJEU5BpP5FTqYi93ZQ@mail.gmail.com>
References: <CAJdmaqSGTWbz0xpiJa0ArAOiUiqG+929Bq+yEfSQoxj4payqPA@mail.gmail.com>
 <baad805c-5463-38d5-4ad4-4d85bc2c6e41@gmail.com>
 <02CF62C7-088D-466B-871F-2F6A30676654@hxcore.ol>
 <CAJdmaqRHkcLvQB9981cbYmr_aceAhmuekJEU5BpP5FTqYi93ZQ@mail.gmail.com>
Message-ID: <CAFDcVCRtnBXGcES4oezQSxmfedjxEJTz5Sy8VyE+WpiV6hszMQ@mail.gmail.com>

R CMD check --as-cran will give an ERROR if not all Suggest:ed
packages are installed and available when it runs.

/Henrik

On Fri, Jan 8, 2021 at 11:25 AM Greg Freedman Ellis <gdfermail at gmail.com> wrote:
>
> > It should almost certainly be included in Suggests, and nowhere else.
> > If that means your tests are skipped, you should feel free to warn the
> > user in your test messages:  but it shouldn't cause your tests to fail.
>
> I guess my worry is that my upstream dependencies will break something
> without knowing it because the tests won't fail unless httptest is
> installed. I really wish there was a way to indicate dependencies for
> testing purposes only.
>
> (And, oops, you're right, I meant that I was considering including httptest
> in Imports not Depends)
>
> On Fri, Jan 8, 2021 at 12:04 PM David Bosak <dbosak01 at gmail.com> wrote:
>
> > >> Namespace in Imports field not imported from: ?httptest?
> >
> > >>    All declared Imports should be used.
> >
> >
> >
> > I?ve seen that note before when I forgot to remove a @import reference in
> > the Roxygen comments.  Or it is still in the NAMESPACE file when I don?t
> > want it to be.
> >
> >
> >
> > Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
> > Windows 10
> >
> >
> >
> > *From: *Duncan Murdoch <murdoch.duncan at gmail.com>
> > *Sent: *Friday, January 8, 2021 11:15 AM
> > *To: *Greg Freedman Ellis <gdfermail at gmail.com>;
> > r-package-devel at r-project.org
> > *Subject: *Re: [R-pkg-devel] Package used unconditionally only in testing
> >
> >
> >
> > On 08/01/2021 9:17 a.m., Greg Freedman Ellis wrote:
> >
> > > Hi all,
> >
> > >
> >
> > > I'm trying to update a package to conform to pass tests given
> >
> > > `_R_CHECK_DEPENDS_ONLY_=TRUE`.
> >
> > >
> >
> > > In this package, we only use the package `httptest` during testing, but
> > the
> >
> > > tests are (almost) meaningless if it is not installed, so I would like to
> >
> > > indicate that it is a required package rather than skipping tests if it
> > is
> >
> > > not installed.
> >
> >
> >
> > This sounds wrong.  I don't know the httptest package, but I assume that
> >
> > since you were only using it for testing, I might be interested in using
> >
> > your package even if I wasn't interested in installing httptest.  Making
> >
> > it a hard requirement would force me to install httptest.
> >
> >
> >
> > >
> >
> > > If I move `httptest` to Depends, then I get the error CRAN check note:
> >
> > >> Namespace in Imports field not imported from: ?httptest?
> >
> > >>    All declared Imports should be used.
> >
> >
> >
> > You *definitely* shouldn't include it in Depends:  that would force it
> >
> > onto the search list, and potentially break other things that I'm
> >
> > running, e.g. if they have name conflicts with it.
> >
> >
> >
> > You *probably* shouldn't include it in Imports.  Why force me to load
> >
> > another package if I'll never use it?  There's a tiny chance that would
> >
> > push my memory use over the edge, and my own code would fail.
> >
> >
> >
> > It should almost certainly be included in Suggests, and nowhere else.
> >
> > If that means your tests are skipped, you should feel free to warn the
> >
> > user in your test messages:  but it shouldn't cause your tests to fail.
> >
> >
> >
> > > I think this would best be solved by a DESCRIPTION field that indicates a
> >
> > > package is required, but only for tests, but I do not see such a field.
> > The
> >
> > > only solution I can think of is to have a trivial import of `httptest` in
> >
> > > the main package to silence the NOTE. Is there a better solution?
> >
> >
> >
> > Most users aren't going to run your tests, so they shouldn't be forced
> >
> > to install software that would let them do so.
> >
> >
> >
> > Duncan Murdoch
> >
> >
> >
> > ______________________________________________
> >
> > R-package-devel at r-project.org mailing list
> >
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Fri Jan  8 20:52:19 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 8 Jan 2021 13:52:19 -0600
Subject: [R-pkg-devel] Package used unconditionally only in testing
In-Reply-To: <CAFDcVCRtnBXGcES4oezQSxmfedjxEJTz5Sy8VyE+WpiV6hszMQ@mail.gmail.com>
References: <CAJdmaqSGTWbz0xpiJa0ArAOiUiqG+929Bq+yEfSQoxj4payqPA@mail.gmail.com>
 <baad805c-5463-38d5-4ad4-4d85bc2c6e41@gmail.com>
 <02CF62C7-088D-466B-871F-2F6A30676654@hxcore.ol>
 <CAJdmaqRHkcLvQB9981cbYmr_aceAhmuekJEU5BpP5FTqYi93ZQ@mail.gmail.com>
 <CAFDcVCRtnBXGcES4oezQSxmfedjxEJTz5Sy8VyE+WpiV6hszMQ@mail.gmail.com>
Message-ID: <24568.47091.107870.600781@rob.eddelbuettel.com>


On 8 January 2021 at 11:32, Henrik Bengtsson wrote:
| R CMD check --as-cran will give an ERROR if not all Suggest:ed
| packages are installed and available when it runs.

This can be overridden with R_CHECK_FORCE_SUGGESTS_=false which may be
helpful if Suggests: has a long tail of dependencies, or a shorter test run
is desired.

The R Internals manual describes the variable as 

  '_R_CHECK_FORCE_SUGGESTS_'
       If true, give an error if suggested packages are not available.
       Default: true (but false for CRAN submission checks).

which highlights the different behaviour under --as-cran and without.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From pg||bert902 @end|ng |rom gm@||@com  Sat Jan  9 22:43:53 2021
From: pg||bert902 @end|ng |rom gm@||@com (Paul Gilbert)
Date: Sat, 9 Jan 2021 16:43:53 -0500
Subject: [R-pkg-devel] CRAN check texi2dvi failure
Message-ID: <2d46e0d6-cf03-0d87-b183-ac09a311d623@gmail.com>

I am trying to debug a problem that is appearing in the linux and 
Solaris checks, but not Windows or Mac checks, of my package tsfa as 
reported at
https://cran.r-project.org/web/checks/check_results_tsfa.html

The problem is with re-building the vignette
   ...
   this is package 'tsfa' version '2014.10-1'
   ...
  checking re-building of vignette outputs ... [6s/9s] WARNING
  Error(s) in re-building vignettes:
   ...
     Running 'texi2dvi' on 'Guide.tex' failed.
     LaTeX errors:
     ! LaTeX Error: \verb ended by end of line.
   ...

In responding to the threat of removal I have also fixes some long 
standing warnings about adding imports to the NAMESPACE. The new version 
builds with --as-cran giving no errors or warnings with both R-devel on 
win-builder (2021-01-07 r79806) and on my linux machine (R 2021-01-08 
r79812 on Linux Mint 19.3 Tricia). When I submit it to CRAN the Windows 
build is OK but the same error happens at the 'texi2dvi' step in the 
debian vignette re-build.

This seems to happens after an example that correctly has a warning 
message (about Heywood cases). In my linux build the the warning happens 
but the message does not appear in the pdf output, so one possibility is 
that the handling of the warning on the CRAN Unix check machines fails 
to produce clean tex or suppress output. Another possibility is that my 
build using --as-cran is different from the actual CRAN build options. 
For example, my 00check.log shows
...
* checking package vignettes in ?inst/doc? ... OK
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* checking for non-standard things in the check directory ... OK
...

so I am not sure if it uses texi2dvi. (I haven't used dvi myself for a 
long time.)

I'm not sure how to debug this when I can't reproduce the error. 
Suggestions would be appreciated.

Paul Gilbert


From e@ @end|ng |rom enr|co@chum@nn@net  Sat Jan  9 23:52:00 2021
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Sat, 09 Jan 2021 23:52:00 +0100
Subject: [R-pkg-devel] CRAN check texi2dvi failure
In-Reply-To: <2d46e0d6-cf03-0d87-b183-ac09a311d623@gmail.com> (Paul Gilbert's
 message of "Sat, 9 Jan 2021 16:43:53 -0500")
References: <2d46e0d6-cf03-0d87-b183-ac09a311d623@gmail.com>
Message-ID: <87h7np67vz.fsf@enricoschumann.net>

On Sat, 09 Jan 2021, Paul Gilbert writes:

> I am trying to debug a problem that is appearing in the
> linux and Solaris checks, but not Windows or Mac
> checks, of my package tsfa as reported at
> https://cran.r-project.org/web/checks/check_results_tsfa.html
>
> The problem is with re-building the vignette
>   ...
>   this is package 'tsfa' version '2014.10-1'
>   ...
>  checking re-building of vignette outputs ... [6s/9s] WARNING
>  Error(s) in re-building vignettes:
>   ...
>     Running 'texi2dvi' on 'Guide.tex' failed.
>     LaTeX errors:
>     ! LaTeX Error: \verb ended by end of line.
>   ...
>
> In responding to the threat of removal I have also
> fixes some long standing warnings about adding imports
> to the NAMESPACE. The new version builds with --as-cran
> giving no errors or warnings with both R-devel on
> win-builder (2021-01-07 r79806) and on my linux machine
> (R 2021-01-08 r79812 on Linux Mint 19.3 Tricia). When I
> submit it to CRAN the Windows build is OK but the same
> error happens at the 'texi2dvi' step in the debian
> vignette re-build.
>
> This seems to happens after an example that correctly
> has a warning message (about Heywood cases). In my
> linux build the the warning happens but the message
> does not appear in the pdf output, so one possibility
> is that the handling of the warning on the CRAN Unix
> check machines fails to produce clean tex or suppress
> output. Another possibility is that my build using
> --as-cran is different from the actual CRAN build
> options. For example, my 00check.log shows
> ...
> * checking package vignettes in ?inst/doc? ... OK
> * checking re-building of vignette outputs ... OK
> * checking PDF version of manual ... OK
> * checking for non-standard things in the check directory ... OK
> ...
>
> so I am not sure if it uses texi2dvi. (I haven't used
> dvi myself for a long time.)
>
> I'm not sure how to debug this when I can't reproduce
> the error. Suggestions would be appreciated.
>
> Paul Gilbert
>

When I run R CMD check on my Linux machine [*], I also
do not get an error.  But here is a guess: The error
mentions \verb, and the LaTeX manual says that \verb
should be followed by nonspace character.  But in the
vignette it is followed by a space.  Maybe using \url
in the vignette could fix the error?

kind regards
    Enrico



[*] R version 4.0.3 (2020-10-10)
    Platform: x86_64-pc-linux-gnu (64-bit)
    Running under: Ubuntu 20.10


    
-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Sun Jan 10 13:04:29 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Sun, 10 Jan 2021 12:04:29 +0000
Subject: [R-pkg-devel] CRAN check texi2dvi failure
In-Reply-To: <2d46e0d6-cf03-0d87-b183-ac09a311d623@gmail.com>
References: <2d46e0d6-cf03-0d87-b183-ac09a311d623@gmail.com>
Message-ID: <LOYP265MB201528DBCEFD78ED00191ECFAEAC0@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

The problem is not in the Warning from the example but from the \verb commands in the references.
You use space to delimit the argument of \verb and I was surprised that it worked since TeX ignores spaces after commands. 
Apparently, this has been an exception for \verb but now this feature is considered a bug and hs been recently fixed, see the atacjexchange question below and the relevant paragraph from LaTeX News. Probably the linux machines have updated their TeX installations.

In short, changing the space tp  say  +  delimiter for \verb command should fix the issue.

Georgi Boshnakov

 
https://tex.stackexchange.com/questions/566085/how-does-verb-detect-spaces-that-shouldnt-exist 

Avoid problematic spaces after \verb
If a user typed \verb?!~!?foo instead of \verb!~!?foo
by mistake, then surprisingly the result was ?!~!foo?
without any warning or error. What happened was that
the ? became the argument delimiter due to the rather
complex processing done by \verb to render verbatim.
This has been fixed and spaces directly following the
command \verb or \verb* are now ignored as elsewhere.
(github issue 327)


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Paul Gilbert
Sent: 09 January 2021 21:44
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] CRAN check texi2dvi failure

I am trying to debug a problem that is appearing in the linux and Solaris checks, but not Windows or Mac checks, of my package tsfa as reported at https://cran.r-project.org/web/checks/check_results_tsfa.html

The problem is with re-building the vignette
   ...
   this is package 'tsfa' version '2014.10-1'
   ...
  checking re-building of vignette outputs ... [6s/9s] WARNING
  Error(s) in re-building vignettes:
   ...
     Running 'texi2dvi' on 'Guide.tex' failed.
     LaTeX errors:
     ! LaTeX Error: \verb ended by end of line.
   ...

In responding to the threat of removal I have also fixes some long standing warnings about adding imports to the NAMESPACE. The new version builds with --as-cran giving no errors or warnings with both R-devel on win-builder (2021-01-07 r79806) and on my linux machine (R 2021-01-08
r79812 on Linux Mint 19.3 Tricia). When I submit it to CRAN the Windows build is OK but the same error happens at the 'texi2dvi' step in the debian vignette re-build.

This seems to happens after an example that correctly has a warning message (about Heywood cases). In my linux build the the warning happens but the message does not appear in the pdf output, so one possibility is that the handling of the warning on the CRAN Unix check machines fails to produce clean tex or suppress output. Another possibility is that my build using --as-cran is different from the actual CRAN build options. 
For example, my 00check.log shows
...
* checking package vignettes in ?inst/doc? ... OK
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* checking for non-standard things in the check directory ... OK ...

so I am not sure if it uses texi2dvi. (I haven't used dvi myself for a long time.)

I'm not sure how to debug this when I can't reproduce the error. 
Suggestions would be appreciated.

Paul Gilbert

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From pg||bert902 @end|ng |rom gm@||@com  Sun Jan 10 15:12:17 2021
From: pg||bert902 @end|ng |rom gm@||@com (Paul Gilbert)
Date: Sun, 10 Jan 2021 09:12:17 -0500
Subject: [R-pkg-devel] CRAN check texi2dvi failure
In-Reply-To: <87h7np67vz.fsf@enricoschumann.net>
References: <2d46e0d6-cf03-0d87-b183-ac09a311d623@gmail.com>
 <87h7np67vz.fsf@enricoschumann.net>
Message-ID: <57699314-f453-70ce-f2c2-9d57279fe04d@gmail.com>

Thanks Enrico for the great guess, and Georgi for the details.

If I omit the space as seems to be implied in some documentation, changing
   \verb <https://www.bankofcanada.ca/2006/03/working-paper-2006-3> .
to
   \verb<https://www.bankofcanada.ca/2006/03/working-paper-2006-3> .

then the R CMD check error "\verb ended by end of line" happens on my 
linux machine. I did not try replacing the space with another 
deliminator, which I guess would now be the correct way to use \verb. 
The solution of adding
   \usepackage{url}

and changing to
   \url{https://www.bankofcanada.ca/2006/03/working-paper-2006-3}.

does seem to work. (No "on CRAN" confirmation yet but I have not had the 
immediate pre-test rejection that I got previously.)

Paul

On 2021-01-10 8:04 a.m., Georgi Boshnakov wrote:
 > The problem is not in the Warning from the example but from
 > the \verb commands in the references.
 > You use space to delimit the argument of \verb and I was surprised
 > that it worked since TeX ignores spaces after commands.
 > Apparently, this has been an exception for \verb but now this feature
 > is considered a bug and hs been recently fixed, see the atacjexchange
 > question below and the relevant paragraph from LaTeX News. Probably
 > the linux machines have updated their TeX installations.
 >
 > In short, changing the space tp  say  +  delimiter for \verb command 
should fix the issue.
 >
 > Georgi Boshnakov
 >

On 2021-01-09 6:52 p.m., Enrico Schumann wrote:
> When I run R CMD check on my Linux machine [*], I also
> do not get an error.  But here is a guess: The error
> mentions \verb, and the LaTeX manual says that \verb
> should be followed by nonspace character.  But in the
> vignette it is followed by a space.  Maybe using \url
> in the vignette could fix the error?
> 
> kind regards
>      Enrico
> 
> 
> 
> [*] R version 4.0.3 (2020-10-10)
>      Platform: x86_64-pc-linux-gnu (64-bit)
>      Running under: Ubuntu 20.10
> 
> > On Sat, 09 Jan 2021, Paul Gilbert writes:
> 
>> I am trying to debug a problem that is appearing in the
>> linux and Solaris checks, but not Windows or Mac
>> checks, of my package tsfa as reported at
>> https://cran.r-project.org/web/checks/check_results_tsfa.html
>>
>> The problem is with re-building the vignette
>>    ...
>>    this is package 'tsfa' version '2014.10-1'
>>    ...
>>   checking re-building of vignette outputs ... [6s/9s] WARNING
>>   Error(s) in re-building vignettes:
>>    ...
>>      Running 'texi2dvi' on 'Guide.tex' failed.
>>      LaTeX errors:
>>      ! LaTeX Error: \verb ended by end of line.
>>    ...
>>
>> In responding to the threat of removal I have also
>> fixes some long standing warnings about adding imports
>> to the NAMESPACE. The new version builds with --as-cran
>> giving no errors or warnings with both R-devel on
>> win-builder (2021-01-07 r79806) and on my linux machine
>> (R 2021-01-08 r79812 on Linux Mint 19.3 Tricia). When I
>> submit it to CRAN the Windows build is OK but the same
>> error happens at the 'texi2dvi' step in the debian
>> vignette re-build.
>>
>> This seems to happens after an example that correctly
>> has a warning message (about Heywood cases). In my
>> linux build the the warning happens but the message
>> does not appear in the pdf output, so one possibility
>> is that the handling of the warning on the CRAN Unix
>> check machines fails to produce clean tex or suppress
>> output. Another possibility is that my build using
>> --as-cran is different from the actual CRAN build
>> options. For example, my 00check.log shows
>> ...
>> * checking package vignettes in ?inst/doc? ... OK
>> * checking re-building of vignette outputs ... OK
>> * checking PDF version of manual ... OK
>> * checking for non-standard things in the check directory ... OK
>> ...
>>
>> so I am not sure if it uses texi2dvi. (I haven't used
>> dvi myself for a long time.)
>>
>> I'm not sure how to debug this when I can't reproduce
>> the error. Suggestions would be appreciated.
>>
>> Paul Gilbert
>>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 10 17:43:49 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 10 Jan 2021 11:43:49 -0500
Subject: [R-pkg-devel] CRAN check texi2dvi failure
In-Reply-To: <57699314-f453-70ce-f2c2-9d57279fe04d@gmail.com>
References: <2d46e0d6-cf03-0d87-b183-ac09a311d623@gmail.com>
 <87h7np67vz.fsf@enricoschumann.net>
 <57699314-f453-70ce-f2c2-9d57279fe04d@gmail.com>
Message-ID: <9e167f7f-1ed5-d9fd-2f46-5d07c7320f73@gmail.com>

On 10/01/2021 9:12 a.m., Paul Gilbert wrote:
> Thanks Enrico for the great guess, and Georgi for the details.
> 
> If I omit the space as seems to be implied in some documentation, changing
>     \verb <https://www.bankofcanada.ca/2006/03/working-paper-2006-3> .
> to
>     \verb<https://www.bankofcanada.ca/2006/03/working-paper-2006-3> .
> 
> then the R CMD check error "\verb ended by end of line" happens on my
> linux machine. I did not try replacing the space with another
> deliminator, which I guess would now be the correct way to use \verb.

Yes, you would need to do that.

> The solution of adding
>     \usepackage{url}
> 
> and changing to
>     \url{https://www.bankofcanada.ca/2006/03/working-paper-2006-3}.
> 
> does seem to work. (No "on CRAN" confirmation yet but I have not had the
> immediate pre-test rejection that I got previously.)

The risk of this change is that the URL may fail in CRAN tests; see the 
recent "URL checks" thread on R-devel for a discussion of ways in which 
this can happen even when the URL works for you.

Duncan Murdoch

> 
> Paul
> 
> On 2021-01-10 8:04 a.m., Georgi Boshnakov wrote:
>   > The problem is not in the Warning from the example but from
>   > the \verb commands in the references.
>   > You use space to delimit the argument of \verb and I was surprised
>   > that it worked since TeX ignores spaces after commands.
>   > Apparently, this has been an exception for \verb but now this feature
>   > is considered a bug and hs been recently fixed, see the atacjexchange
>   > question below and the relevant paragraph from LaTeX News. Probably
>   > the linux machines have updated their TeX installations.
>   >
>   > In short, changing the space tp  say  +  delimiter for \verb command
> should fix the issue.
>   >
>   > Georgi Boshnakov
>   >
> 
> On 2021-01-09 6:52 p.m., Enrico Schumann wrote:
>> When I run R CMD check on my Linux machine [*], I also
>> do not get an error.  But here is a guess: The error
>> mentions \verb, and the LaTeX manual says that \verb
>> should be followed by nonspace character.  But in the
>> vignette it is followed by a space.  Maybe using \url
>> in the vignette could fix the error?
>>
>> kind regards
>>       Enrico
>>
>>
>>
>> [*] R version 4.0.3 (2020-10-10)
>>       Platform: x86_64-pc-linux-gnu (64-bit)
>>       Running under: Ubuntu 20.10
>>
>>> On Sat, 09 Jan 2021, Paul Gilbert writes:
>>
>>> I am trying to debug a problem that is appearing in the
>>> linux and Solaris checks, but not Windows or Mac
>>> checks, of my package tsfa as reported at
>>> https://cran.r-project.org/web/checks/check_results_tsfa.html
>>>
>>> The problem is with re-building the vignette
>>>     ...
>>>     this is package 'tsfa' version '2014.10-1'
>>>     ...
>>>    checking re-building of vignette outputs ... [6s/9s] WARNING
>>>    Error(s) in re-building vignettes:
>>>     ...
>>>       Running 'texi2dvi' on 'Guide.tex' failed.
>>>       LaTeX errors:
>>>       ! LaTeX Error: \verb ended by end of line.
>>>     ...
>>>
>>> In responding to the threat of removal I have also
>>> fixes some long standing warnings about adding imports
>>> to the NAMESPACE. The new version builds with --as-cran
>>> giving no errors or warnings with both R-devel on
>>> win-builder (2021-01-07 r79806) and on my linux machine
>>> (R 2021-01-08 r79812 on Linux Mint 19.3 Tricia). When I
>>> submit it to CRAN the Windows build is OK but the same
>>> error happens at the 'texi2dvi' step in the debian
>>> vignette re-build.
>>>
>>> This seems to happens after an example that correctly
>>> has a warning message (about Heywood cases). In my
>>> linux build the the warning happens but the message
>>> does not appear in the pdf output, so one possibility
>>> is that the handling of the warning on the CRAN Unix
>>> check machines fails to produce clean tex or suppress
>>> output. Another possibility is that my build using
>>> --as-cran is different from the actual CRAN build
>>> options. For example, my 00check.log shows
>>> ...
>>> * checking package vignettes in ?inst/doc? ... OK
>>> * checking re-building of vignette outputs ... OK
>>> * checking PDF version of manual ... OK
>>> * checking for non-standard things in the check directory ... OK
>>> ...
>>>
>>> so I am not sure if it uses texi2dvi. (I haven't used
>>> dvi myself for a long time.)
>>>
>>> I'm not sure how to debug this when I can't reproduce
>>> the error. Suggestions would be appreciated.
>>>
>>> Paul Gilbert
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From he|mut@@chuetz @end|ng |rom beb@c@@t  Thu Jan 14 12:41:02 2021
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Thu, 14 Jan 2021 12:41:02 +0100
Subject: [R-pkg-devel] Sudden error on r-devel-windows-ix86+x86_64
Message-ID: <36c8885a-41ae-d446-b4dd-9b39a634806d@bebac.at>

Dear all,

our package (https://cran.r-project.org/package=replicateBE) shows an 
error on the windows development version (r79815); no errors on Linux 
(r79812, r79815, r79818).
See 
https://www.r-project.org/nosvn/R.check/r-devel-windows-ix86+x86_64/replicateBE-00check.html
The link at the bottom of the page leads to an empty page and hence, is 
not helpful...

Any ideas what might be the reason?

Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
E helmut.schuetz at bebac.at
W https://bebac.at/


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Jan 14 12:48:13 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 14 Jan 2021 14:48:13 +0300
Subject: [R-pkg-devel] Sudden error on r-devel-windows-ix86+x86_64
In-Reply-To: <36c8885a-41ae-d446-b4dd-9b39a634806d@bebac.at>
References: <36c8885a-41ae-d446-b4dd-9b39a634806d@bebac.at>
Message-ID: <20210114144813.168f19e2@arachnoid>

On Thu, 14 Jan 2021 12:41:02 +0100
Helmut Sch?tz <helmut.schuetz at bebac.at> wrote:

> Any ideas what might be the reason?

This happened yesterday to one of my packages, with a similarly cryptic
error page (just an "r" instead of a log), then got better by itself by
today. Most likely, some problems on the test machine.

-- 
Best regards,
Ivan


From r@mp@|et|enne @end|ng |rom gm@||@com  Thu Jan 14 15:32:41 2021
From: r@mp@|et|enne @end|ng |rom gm@||@com (Rampal Etienne)
Date: Thu, 14 Jan 2021 15:32:41 +0100
Subject: [R-pkg-devel] REAL(16) fails on M1 Macs
Message-ID: <bf614212-4897-3562-4045-dbeba60d3d39@gmail.com>

Hello,

I have a package with FORTRAN code using REAL(16) for accurate 
computations. This package has been on CRAN for several years, but now 
it suddenly fails on M1 Macs, apparently due to the use of REAL(16) - it 
cannot handle higher precision than DOUBLE PRECISION, i.e. REAL(8). How 
do I solve this problem? Is it possible to exclude a certain 
architecture/platform (that of M1 in this case)?

Kind regards,

Rampal Etienne


From edd @end|ng |rom deb|@n@org  Thu Jan 14 15:58:56 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 14 Jan 2021 08:58:56 -0600
Subject: [R-pkg-devel] REAL(16) fails on M1 Macs
In-Reply-To: <bf614212-4897-3562-4045-dbeba60d3d39@gmail.com>
References: <bf614212-4897-3562-4045-dbeba60d3d39@gmail.com>
Message-ID: <24576.23600.564379.406314@rob.eddelbuettel.com>


On 14 January 2021 at 15:32, Rampal Etienne wrote:
| I have a package with FORTRAN code using REAL(16) for accurate 
| computations. This package has been on CRAN for several years, but now 
| it suddenly fails on M1 Macs, apparently due to the use of REAL(16) - it 
| cannot handle higher precision than DOUBLE PRECISION, i.e. REAL(8). How 
| do I solve this problem? Is it possible to exclude a certain 
| architecture/platform (that of M1 in this case)?

The (excellent, and early) post by two R Core members hints at specific
issues with Fortran:

   https://developer.r-project.org/Blog/public/2020/11/02/will-r-work-on-apple-silicon/index.html

It doesn't specifically mention lack of REAL(16) but it hints somewhat
strongly at Fortran still being worked on.

But from what I recall, 'long double' beyond 64 bit is not standard across
the other (formally support) platforms either.  Recall that you have

  > capabilities()[["long.double"]]
  [1] TRUE          
  > 

now in r-release as well. Can you make your code switch between 64 and 128
bit doubles 'as available'? 

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From joe @end|ng |rom po|@@oncon@u|t|ng@c@  Thu Jan 14 16:22:10 2021
From: joe @end|ng |rom po|@@oncon@u|t|ng@c@ (Joseph Thorley)
Date: Thu, 14 Jan 2021 07:22:10 -0800
Subject: [R-pkg-devel] checking for detritus in the temp directory ... NOTE
 'RtmpvRaBK1_copy'
Message-ID: <995E27E8-4E48-4E06-A109-FABB2A51D370@poissonconsulting.ca>

Hi All

I?m getting the following Note for CRAN r-devel-linux-x86_64-debian-gcc
* checking for detritus in the temp directory ... NOTE
Found the following files/directories:
  ?RtmpvRaBK1_copy?
 but not on R-hub or any of of the other versions/operating systems tested:

	? OSX (local) - release
	? OSX (actions) - release
	? Ubuntu (actions) - 3.6, oldrel, release and devel
	? Windows (actions) - release
	? Windows (winbuilder) - devel


The package is https://github.com/poissonconsulting/sims

The file names in other posts discussing similar issues are different in structure suggesting different mechanisms

https://www.mail-archive.com/r-package-devel at r-project.org/msg06089.html

https://stackoverflow.com/questions/62456137/r-cran-check-detritus-in-temp-directory

Any help on how to debug appreciated

Thanks

Joe

Joe Thorley PhD, RPBio
Computational Biologist
Poisson Consulting Ltd.
4216 Shasheen Road
Nelson, BC
V1L 6X1, Canada
Tel: +1 250 551 2194
Email: joe at poissonconsulting.ca
Web: www.poissonconsulting.ca





	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 14 16:28:51 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 14 Jan 2021 10:28:51 -0500
Subject: [R-pkg-devel] 
 checking for detritus in the temp directory ... NOTE
 'RtmpvRaBK1_copy'
In-Reply-To: <995E27E8-4E48-4E06-A109-FABB2A51D370@poissonconsulting.ca>
References: <995E27E8-4E48-4E06-A109-FABB2A51D370@poissonconsulting.ca>
Message-ID: <2a22a6d5-92db-04f2-c9f5-d4076b2e824b@gmail.com>

On 14/01/2021 10:22 a.m., Joseph Thorley wrote:
> Hi All
> 
> I?m getting the following Note for CRAN r-devel-linux-x86_64-debian-gcc
> * checking for detritus in the temp directory ... NOTE
> Found the following files/directories:
>    ?RtmpvRaBK1_copy?
>   but not on R-hub or any of of the other versions/operating systems tested:
> 
> 	? OSX (local) - release
> 	? OSX (actions) - release
> 	? Ubuntu (actions) - 3.6, oldrel, release and devel
> 	? Windows (actions) - release
> 	? Windows (winbuilder) - devel
> 
> 
> The package is https://github.com/poissonconsulting/sims
> 
> The file names in other posts discussing similar issues are different in structure suggesting different mechanisms
> 
> https://www.mail-archive.com/r-package-devel at r-project.org/msg06089.html
> 
> https://stackoverflow.com/questions/62456137/r-cran-check-detritus-in-temp-directory
> 
> Any help on how to debug appreciated

I did a search for "_copy" on your Github source, and I see a dir 
containing that being created in a test (but apparently removed 
afterwards), and also being created in the sims.Rmd vignette without 
being removed (though a file in the directory is removed).

No idea why you see the NOTE only on some platforms.

Duncan Murdoch


> 
> Thanks
> 
> Joe
> 
> Joe Thorley PhD, RPBio
> Computational Biologist
> Poisson Consulting Ltd.
> 4216 Shasheen Road
> Nelson, BC
> V1L 6X1, Canada
> Tel: +1 250 551 2194
> Email: joe at poissonconsulting.ca
> Web: www.poissonconsulting.ca
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From joe @end|ng |rom po|@@oncon@u|t|ng@c@  Thu Jan 14 22:05:32 2021
From: joe @end|ng |rom po|@@oncon@u|t|ng@c@ (Joseph Thorley)
Date: Thu, 14 Jan 2021 13:05:32 -0800
Subject: [R-pkg-devel] 
 checking for detritus in the temp directory ... NOTE
 'RtmpvRaBK1_copy'
In-Reply-To: <2a22a6d5-92db-04f2-c9f5-d4076b2e824b@gmail.com>
References: <995E27E8-4E48-4E06-A109-FABB2A51D370@poissonconsulting.ca>
 <2a22a6d5-92db-04f2-c9f5-d4076b2e824b@gmail.com>
Message-ID: <BF05F5C3-1EA6-4941-80CF-7B5C6B00B2E5@poissonconsulting.ca>

Thanks Duncan

Yes the problem was that a dir was being created in the sims.Rmd vignette that was not being removed.

Thanks for helping identify the issue so quickly

Joe

> On Jan 14, 2021, at 07:28, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 14/01/2021 10:22 a.m., Joseph Thorley wrote:
>> Hi All
>> I?m getting the following Note for CRAN r-devel-linux-x86_64-debian-gcc
>> * checking for detritus in the temp directory ... NOTE
>> Found the following files/directories:
>>   ?RtmpvRaBK1_copy?
>>  but not on R-hub or any of of the other versions/operating systems tested:
>> 	? OSX (local) - release
>> 	? OSX (actions) - release
>> 	? Ubuntu (actions) - 3.6, oldrel, release and devel
>> 	? Windows (actions) - release
>> 	? Windows (winbuilder) - devel
>> The package is https://github.com/poissonconsulting/sims
>> The file names in other posts discussing similar issues are different in structure suggesting different mechanisms
>> https://www.mail-archive.com/r-package-devel at r-project.org/msg06089.html
>> https://stackoverflow.com/questions/62456137/r-cran-check-detritus-in-temp-directory
>> Any help on how to debug appreciated
> 
> I did a search for "_copy" on your Github source, and I see a dir containing that being created in a test (but apparently removed afterwards), and also being created in the sims.Rmd vignette without being removed (though a file in the directory is removed).
> 
> No idea why you see the NOTE only on some platforms.
> 
> Duncan Murdoch
> 
> 
>> Thanks
>> Joe
>> Joe Thorley PhD, RPBio
>> Computational Biologist
>> Poisson Consulting Ltd.
>> 4216 Shasheen Road
>> Nelson, BC
>> V1L 6X1, Canada
>> Tel: +1 250 551 2194
>> Email: joe at poissonconsulting.ca
>> Web: www.poissonconsulting.ca
>> 	[[alternative HTML version deleted]]
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From @@re@@mer|@01 @end|ng |rom gm@||@com  Fri Jan 15 15:50:56 2021
From: @@re@@mer|@01 @end|ng |rom gm@||@com (sare ameri)
Date: Fri, 15 Jan 2021 18:20:56 +0330
Subject: [R-pkg-devel] Package submission error
Message-ID: <CADhgxVXxGJ+aeNydEL196YvBV3REh3nY3VT6KAuqASfZt7fSGQ@mail.gmail.com>

Hi Everyone,

I hope this email finds you well.

I get errors when submitting my package. I didn't get the error when I
submitted the first version of my package.

Here is the error:

Package name: "ftrCOOL".

Error message:

Flavor: r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Sare Amerifar <sare.ameri.01 at gmail.com>'

  New submission

  Package was archived on CRAN

  Possibly mis-spelled words in DESCRIPTION:
    nucleotide (7:224)
    peptide (7:239)

  CRAN repository db overrides:
    X-CRAN-Comment: Archived on 2021-01-13 for policy violation.

    Writes to user library.

Flavor: r-devel-linux-x86_64-debian-gcc
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Sare Amerifar <sare.ameri.01 at gmail.com>'

  New submission

  Package was archived on CRAN

  CRAN repository db overrides:
    X-CRAN-Comment: Archived on 2021-01-13 for policy violation.

    Writes to user library.


Thanks for any suggestion.

Have a nice day and Best,
Sareh Ameri Far

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri Jan 15 16:27:09 2021
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 15 Jan 2021 15:27:09 +0000
Subject: [R-pkg-devel] Package submission error
In-Reply-To: <CADhgxVXxGJ+aeNydEL196YvBV3REh3nY3VT6KAuqASfZt7fSGQ@mail.gmail.com>
References: <CADhgxVXxGJ+aeNydEL196YvBV3REh3nY3VT6KAuqASfZt7fSGQ@mail.gmail.com>
Message-ID: <65065aa2-c2ad-5585-d36d-abb217f38228@dewey.myzen.co.uk>

Coments in-line

On 15/01/2021 14:50, sare ameri wrote:
> Hi Everyone,
> 
> I hope this email finds you well.
> 
> I get errors when submitting my package. I didn't get the error when I
> submitted the first version of my package.
> 
> Here is the error:
> 
> Package name: "ftrCOOL".
> 
> Error message:
> 
> Flavor: r-devel-windows-ix86+x86_64
> Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'Sare Amerifar <sare.ameri.01 at gmail.com>'
> 
>    New submission
> 

That is only a note

>    Package was archived on CRAN
> 
>    Possibly mis-spelled words in DESCRIPTION:
>      nucleotide (7:224)
>      peptide (7:239)

You could mention that in the comments when you re-submit that these are 
correctly spelled.

> 
>    CRAN repository db overrides:
>      X-CRAN-Comment: Archived on 2021-01-13 for policy violation.
> 
>      Writes to user library.

Are you knowingly writing to a user library? If so, do not. If not 
explain to CRAN in your submission why you believe this is a false 
epositive.



> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'Sare Amerifar <sare.ameri.01 at gmail.com>'
> 
>    New submission
> 
>    Package was archived on CRAN
> 
>    CRAN repository db overrides:
>      X-CRAN-Comment: Archived on 2021-01-13 for policy violation.
> 
>      Writes to user library.
> 
> 
> Thanks for any suggestion.
> 
> Have a nice day and Best,
> Sareh Ameri Far
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From xc@o12 @end|ng |rom uth@c@edu  Fri Jan 15 16:27:27 2021
From: xc@o12 @end|ng |rom uth@c@edu (Cao, Xueyuan)
Date: Fri, 15 Jan 2021 15:27:27 +0000
Subject: [R-pkg-devel] [Ext]  Package submission error
In-Reply-To: <CADhgxVXxGJ+aeNydEL196YvBV3REh3nY3VT6KAuqASfZt7fSGQ@mail.gmail.com>
References: <CADhgxVXxGJ+aeNydEL196YvBV3REh3nY3VT6KAuqASfZt7fSGQ@mail.gmail.com>
Message-ID: <DM6PR02MB4860C4BA3D588848C693F816CFA70@DM6PR02MB4860.namprd02.prod.outlook.com>


Hi Sareh:

Package 'ftrCOOL' was removed from the CRAN repository.

Formerly available versions can be obtained from the archive.

Archived on 2021-01-13 for policy violation.

Bests,

Xueyuan

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of sare ameri
Sent: Friday, January 15, 2021 8:51 AM
To: r-package-devel at r-project.org
Subject: [Ext] [R-pkg-devel] Package submission error

Hi Everyone,

I hope this email finds you well.

I get errors when submitting my package. I didn't get the error when I submitted the first version of my package.

Here is the error:

Package name: "ftrCOOL".

Error message:

Flavor: r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Sare Amerifar <sare.ameri.01 at gmail.com>'

  New submission

  Package was archived on CRAN

  Possibly mis-spelled words in DESCRIPTION:
    nucleotide (7:224)
    peptide (7:239)

  CRAN repository db overrides:
    X-CRAN-Comment: Archived on 2021-01-13 for policy violation.

    Writes to user library.

Flavor: r-devel-linux-x86_64-debian-gcc
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Sare Amerifar <sare.ameri.01 at gmail.com>'

  New submission

  Package was archived on CRAN

  CRAN repository db overrides:
    X-CRAN-Comment: Archived on 2021-01-13 for policy violation.

    Writes to user library.


Thanks for any suggestion.

Have a nice day and Best,
Sareh Ameri Far

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From zk@mv@r @end|ng |rom gm@||@com  Fri Jan 15 17:03:10 2021
From: zk@mv@r @end|ng |rom gm@||@com (Zhian N. Kamvar)
Date: Fri, 15 Jan 2021 08:03:10 -0800
Subject: [R-pkg-devel] Package submission error
In-Reply-To: <CADhgxVXxGJ+aeNydEL196YvBV3REh3nY3VT6KAuqASfZt7fSGQ@mail.gmail.com>
References: <CADhgxVXxGJ+aeNydEL196YvBV3REh3nY3VT6KAuqASfZt7fSGQ@mail.gmail.com>
Message-ID: <a78fa110-6355-47d7-1db3-7bd88fa13c85@gmail.com>

There are two problems:

1. CRAN is flagging two words as misspelled (even though they are valid 
words in the OED, which is notoriously perscriptive).
2. "Writes to user library" --- This is the violation; an example in 
your package is trying to write to a folder in the user's library.

If you look at the check page: 
https://cran-archive.r-project.org/web/checks/2021/2021-01-13_check_results_ftrCOOL.html 
(linked on the archived page), you see this:

 ??? > dir = tempdir()
 ??? > PredDisdir<-system.file("testForder",package="ftrCOOL")
 ??? >
 ??? > PredDisdir<-paste0(PredDisdir,"/Disdir/")
 ??? > ad1<-paste0(dir,"/disorderB.txt")
 ??? >
 ??? > 
mat<-DisorderB(PredDisdir,binaryType="strBin",outFormat="txt",outputFileDist=ad1)
 ??? Warning in file(con, "w") :
 ???? cannot open file 
'/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages/ftrCOOL/extdata/tempTable.txt': 
Read-only file system
 ??? Error in file(con, "w") : cannot open the connection
 ??? Calls: DisorderB -> readDisDir -> writeLines -> file
 ??? Execution halted

I think you can fix it by using tempfile() or tempdir() for the ad1 object.

Hope that helps,
Zhian

On 1/15/21 6:50 AM, sare ameri wrote:
> Hi Everyone,
>
> I hope this email finds you well.
>
> I get errors when submitting my package. I didn't get the error when I
> submitted the first version of my package.
>
> Here is the error:
>
> Package name: "ftrCOOL".
>
> Error message:
>
> Flavor: r-devel-windows-ix86+x86_64
> Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'Sare Amerifar <sare.ameri.01 at gmail.com>'
>
>    New submission
>
>    Package was archived on CRAN
>
>    Possibly mis-spelled words in DESCRIPTION:
>      nucleotide (7:224)
>      peptide (7:239)
>
>    CRAN repository db overrides:
>      X-CRAN-Comment: Archived on 2021-01-13 for policy violation.
>
>      Writes to user library.
>
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'Sare Amerifar <sare.ameri.01 at gmail.com>'
>
>    New submission
>
>    Package was archived on CRAN
>
>    CRAN repository db overrides:
>      X-CRAN-Comment: Archived on 2021-01-13 for policy violation.
>
>      Writes to user library.
>
>
> Thanks for any suggestion.
>
> Have a nice day and Best,
> Sareh Ameri Far
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From mbb@d@h@r @end|ng |rom gm@||@com  Sat Jan 16 07:56:50 2021
From: mbb@d@h@r @end|ng |rom gm@||@com (Md Bahadur Badsha)
Date: Fri, 15 Jan 2021 22:56:50 -0800
Subject: [R-pkg-devel] Package submission error
Message-ID: <CAHzAbq9A9ts-6bG9uz9N=DONXR+Z+BmqW2GUB_uQpTD+mn7v3Q@mail.gmail.com>

Hello,
I hope this email finds you well.
A few weeks ago, I got an email that only needs to change my <
doi.org/10.3389/fgene.2019.00460> to preferred
<doi:10.3389/fgene.2019.00460> in the DESCRIPTION file from my previous
version 2.2.1.

Therefore, I changed doi in the DESCRIPTION file and submitted but got the
following:
package MRPC_2.2.2.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows: <
https://win-builder.r-project.org/incoming_pretest/MRPC_2.2.2_20210109_071001/Windows/00check.log
>
Status: OK
Debian: <
https://win-builder.r-project.org/incoming_pretest/MRPC_2.2.2_20210109_071001/Debian/00check.log
>
Status: 1 ERROR

Note, I submitted several versions of this package but never got this error
message on my computer (Mac and Windows). Still, I checked before submit
but no error messages.
Please see the test results of the previous version 2.2.1:
https://cran.r-project.org/web/checks/check_results_MRPC.html

Could you please suggest to me what should I do? What's the problem?

Thank you so much for your kind help!

Badsha

	[[alternative HTML version deleted]]


From R@KINDT @end|ng |rom CGIAR@ORG  Sun Jan 17 07:23:38 2021
From: R@KINDT @end|ng |rom CGIAR@ORG (Kindt, Roeland (ICRAF))
Date: Sun, 17 Jan 2021 06:23:38 +0000
Subject: [R-pkg-devel] how to deal with error warning that 'adegenet' (an
 existing package) does not exist,
 an error that does not occur on the win-builder?
Message-ID: <HE1P195MB01248AC59B5C0A84DF4F6C9FF0A50@HE1P195MB0124.EURP195.PROD.OUTLOOK.COM>

Dear all,


When submitting the new package AlleleShift (ftp://cran.r-project.org/incoming/archive/AlleleShift_0.9.tar.gz), the following error message is returned, stating that the adegenet package does not exist (Debian: <https://win-builder.r-project.org/incoming_pretest/AlleleShift_0.9_20210117_061039/Debian/00check.log>

Status: 1 WARNING, 1 NOTE)

* checking data for non-ASCII characters ... WARNING
  Error loading dataset 'Poptri.genind':
   Error in .requirePackage(package) :
    unable to find required package 'adegenet'

This error message is puzzling to me:


  1.  The Adegenet package does exist: https://cran.r-project.org/web/checks/check_results_adegenet.html (updated on 2021-01-17 06:46:42 CET)


  1.  I do not get any such error warning when checking via the win-builder, checked again this morning



* R version

  3.6.3:

  https://win-builder.r-project.org/zlFmYb8K93eh/00check.log)

*

  R version 4.0.3:

  https://win-builder.r-project.org/xhlrty9E1Mea/00check.log

*

  R Under development (unstable) (2021-01-13 r79826):

  https://win-builder.r-project.org/Zq5VoF8PD3vb/00check.log


Hence I would welcome any suggestion of how the adegenet error message can be avoided.

Best - stay safe,

Roeland


Roeland KINDT, dr. ir.

senior scientist - ecology
Centre for International Forestry Research<https://www.cifor.org/> (CIFOR) and World Agroforestry<http://www.worldagroforestry.org/> (ICRAF), CGIAR<https://www.cgiar.org/research/research-centers/>

http://scholar.google.com/citations?user=A2NaTjoAAAAJ&hl=en  (> 40,000 citations)
https://www.researchgate.net/profile/Roeland_Kindt (> 30,000 citations ; > 130,000 reads)




	[[alternative HTML version deleted]]


From ||oruppr @end|ng |rom gm@||@com  Tue Jan 19 17:45:49 2021
From: ||oruppr @end|ng |rom gm@||@com (Florian Rupprecht)
Date: Tue, 19 Jan 2021 17:45:49 +0100
Subject: [R-pkg-devel] Solaris x68 and C++17
Message-ID: <CAHTZEhCtW8TNvQqGGGRAkqv181V2gKx0-vW-Okm78_ADMFcJ0g@mail.gmail.com>

Hello,

the CRAN checks show an error for my newly released package 'httpgd' with
'r-patched-solaris-x86':

Error: C++17 standard requested but CXX17 is not defined

It seems like 'rcppsimdjson' had the same problem (
https://github.com/eddelbuettel/rcppsimdjson/issues/7) and worked around it
by disabling some functionality with compiler flags.

I don't really know what the error means for the CRAN package. Will it be
removed if it is not fixed? The R extension documentation states that C++17
is supported since R 3.4.0, and I do have R >= 4.0.0 as well as C++17
specified in the DESCRIPTION file.
Or is there some way to indicate that Solaris is not supported? (I doubt I
will ever have users running it.)

Thank you for your help,
Florian

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Jan 19 18:26:51 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 19 Jan 2021 11:26:51 -0600
Subject: [R-pkg-devel] Solaris x68 and C++17
In-Reply-To: <CAHTZEhCtW8TNvQqGGGRAkqv181V2gKx0-vW-Okm78_ADMFcJ0g@mail.gmail.com>
References: <CAHTZEhCtW8TNvQqGGGRAkqv181V2gKx0-vW-Okm78_ADMFcJ0g@mail.gmail.com>
Message-ID: <24583.5723.154237.474107@rob.eddelbuettel.com>


On 19 January 2021 at 17:45, Florian Rupprecht wrote:
| Hello,
| 
| the CRAN checks show an error for my newly released package 'httpgd' with
| 'r-patched-solaris-x86':
| 
| Error: C++17 standard requested but CXX17 is not defined
| 
| It seems like 'rcppsimdjson' had the same problem (
| https://github.com/eddelbuettel/rcppsimdjson/issues/7) and worked around it
| by disabling some functionality with compiler flags.

Clarification: An earlier release required C++17. Later releases relaxed
that. We only need C++11 these days. (And I just noticed that I should
updated Makevars.win accordingly but it really isn't a constraint with
Rtools4).

The test is still in configure though, and it appears that Solaris is still
having the same issue.  Here is what I did (where configure is once again a
shell script):

   CXX17=`${R_HOME}/bin/R CMD config --all | awk '{print $1}' | grep "^CXX17$"`

   [...]


   if test "x${CXX17}" = "x"; then
       echo "** this is not a system on which RcppSimdJson can be built"
       echo "** setting C++11 as a fallback"
       sed -e 's/@CXXSTD@/CXX11/' src/Makevars.in > src/Makevars
   else

| I don't really know what the error means for the CRAN package. Will it be
| removed if it is not fixed? The R extension documentation states that C++17
| is supported since R 3.4.0, and I do have R >= 4.0.0 as well as C++17
| specified in the DESCRIPTION file.
| Or is there some way to indicate that Solaris is not supported? (I doubt I
| will ever have users running it.)

Fair question. I don't know the answer. As package authors we have no
sanctioned way to opt out.  FWIW I think the most 'aggressive' my packages
are in terms of C++ standard is currently C++14 (as e.g. RcppGeiger, which
isn't even on CRAN).

httpgd is a cool package by the way, I gave plotting to the webbrowser a
quick spin this morning.

Dirk


-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||oruppr @end|ng |rom gm@||@com  Tue Jan 19 20:41:55 2021
From: ||oruppr @end|ng |rom gm@||@com (Florian Rupprecht)
Date: Tue, 19 Jan 2021 20:41:55 +0100
Subject: [R-pkg-devel] Solaris x68 and C++17
In-Reply-To: <24583.5723.154237.474107@rob.eddelbuettel.com>
References: <CAHTZEhCtW8TNvQqGGGRAkqv181V2gKx0-vW-Okm78_ADMFcJ0g@mail.gmail.com>
 <24583.5723.154237.474107@rob.eddelbuettel.com>
Message-ID: <CAHTZEhCfx4tAXe3LVr38aS3h64ad6gc5=rui0nT8zfvjU2vEJA@mail.gmail.com>

Thank you for the quick response and the information.

For some reason the Solaris results have now disappeared completely from
the check results page. (Now there are some additional issues I have to
look into.)

I will wait for the rest of the checks to complete and might write a
similar shell script to yours if it's needed. Thanks for the code snippets.

Glad you liked it!

Florian

 Tue, Jan 19, 2021, 18:26 Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 19 January 2021 at 17:45, Florian Rupprecht wrote:
> | Hello,
> |
> | the CRAN checks show an error for my newly released package 'httpgd' with
> | 'r-patched-solaris-x86':
> |
> | Error: C++17 standard requested but CXX17 is not defined
> |
> | It seems like 'rcppsimdjson' had the same problem (
> | https://github.com/eddelbuettel/rcppsimdjson/issues/7) and worked
> around it
> | by disabling some functionality with compiler flags.
>
> Clarification: An earlier release required C++17. Later releases relaxed
> that. We only need C++11 these days. (And I just noticed that I should
> updated Makevars.win accordingly but it really isn't a constraint with
> Rtools4).
>
> The test is still in configure though, and it appears that Solaris is still
> having the same issue.  Here is what I did (where configure is once again a
> shell script):
>
>    CXX17=`${R_HOME}/bin/R CMD config --all | awk '{print $1}' | grep
> "^CXX17$"`
>
>    [...]
>
>
>    if test "x${CXX17}" = "x"; then
>        echo "** this is not a system on which RcppSimdJson can be built"
>        echo "** setting C++11 as a fallback"
>        sed -e 's/@CXXSTD@/CXX11/' src/Makevars.in > src/Makevars
>    else
>
> | I don't really know what the error means for the CRAN package. Will it be
> | removed if it is not fixed? The R extension documentation states that
> C++17
> | is supported since R 3.4.0, and I do have R >= 4.0.0 as well as C++17
> | specified in the DESCRIPTION file.
> | Or is there some way to indicate that Solaris is not supported? (I doubt
> I
> | will ever have users running it.)
>
> Fair question. I don't know the answer. As package authors we have no
> sanctioned way to opt out.  FWIW I think the most 'aggressive' my packages
> are in terms of C++ standard is currently C++14 (as e.g. RcppGeiger, which
> isn't even on CRAN).
>
> httpgd is a cool package by the way, I gave plotting to the webbrowser a
> quick spin this morning.
>
> Dirk
>
>
> --
> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From |@b@rto@96 @end|ng |rom gm@||@com  Tue Jan 19 21:51:09 2021
From: |@b@rto@96 @end|ng |rom gm@||@com (Frantisek Bartos)
Date: Tue, 19 Jan 2021 21:51:09 +0100
Subject: [R-pkg-devel] BH windows compilation issues in R devel
Message-ID: <CAK+wxiOxfUo8Af3R1kj4nEZwWmZVX1w9fDu6KL9ziAzCAGTKAw@mail.gmail.com>

Hi all,

I wanted to submit a new version of my package and I encountered issues
with boost when compiling it on R devel version for windows. (Please excuse
my stupidity, but I'm a complete noob in regards to compilers and C++)

A full error stack is accessible here (the Debian one worked without
issues):
https://win-builder.r-project.org/incoming_pretest/RoBMA_1.2.0_20210119_161819/Windows/00install.out

I checked that removing all C++ code that contains anything boost related
resolves the issue, however, I did not encounter this error before.

An updated version of the code is accessible at GitHub
https://github.com/FBartos/RoBMA

Thanks,
Frantisek

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Jan 19 22:32:15 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 19 Jan 2021 15:32:15 -0600
Subject: [R-pkg-devel] BH windows compilation issues in R devel
In-Reply-To: <CAK+wxiOxfUo8Af3R1kj4nEZwWmZVX1w9fDu6KL9ziAzCAGTKAw@mail.gmail.com>
References: <CAK+wxiOxfUo8Af3R1kj4nEZwWmZVX1w9fDu6KL9ziAzCAGTKAw@mail.gmail.com>
Message-ID: <24583.20447.912468.503949@rob.eddelbuettel.com>


On 19 January 2021 at 21:51, Frantisek Bartos wrote:
| I wanted to submit a new version of my package and I encountered issues
| with boost when compiling it on R devel version for windows. (Please excuse
| my stupidity, but I'm a complete noob in regards to compilers and C++)
| 
| A full error stack is accessible here (the Debian one worked without
| issues):
| https://win-builder.r-project.org/incoming_pretest/RoBMA_1.2.0_20210119_161819/Windows/00install.out

It's actually a _linker_ error, see the 'multiple definitions' hint:

D:/Compiler/rtools40/mingw32/bin/../lib/gcc/i686-w64-mingw32/8.3.0/../../../../i686-w64-mingw32/bin/ld.exe: D:/Compiler/rtools40/mingw32/bin/../lib/gcc/i686-w64-mingw32/8.3.0/libstdc++.a(cow-stdexcept.o):(.text$_ZNSt13runtime_errorC2ERKS_+0x0): multiple definition of `std::runtime_error::runtime_error(std::runtime_error const&)'; distributions/DTboost.o:DTboost.cc:(.text$_ZNSt13runtime_errorC2ERKS_[__ZNSt13runtime_errorC2ERKS_]+0x0): first defined here

I have had similar issues when including something twice or more times that
was meant to be included only once. It could also be a setup issue. Bit hard
to tell but I don't have spare cycles to dig deeper now.

Dirk

| I checked that removing all C++ code that contains anything boost related
| resolves the issue, however, I did not encounter this error before.
| 
| An updated version of the code is accessible at GitHub
| https://github.com/FBartos/RoBMA
| 
| Thanks,
| Frantisek
| 
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |@b@rto@96 @end|ng |rom gm@||@com  Tue Jan 19 23:35:30 2021
From: |@b@rto@96 @end|ng |rom gm@||@com (Frantisek Bartos)
Date: Tue, 19 Jan 2021 23:35:30 +0100
Subject: [R-pkg-devel] BH windows compilation issues in R devel
In-Reply-To: <24583.20447.912468.503949@rob.eddelbuettel.com>
References: <CAK+wxiOxfUo8Af3R1kj4nEZwWmZVX1w9fDu6KL9ziAzCAGTKAw@mail.gmail.com>
 <24583.20447.912468.503949@rob.eddelbuettel.com>
Message-ID: <CAK+wxiN8kpUKJjJkm1K7zaC=XpAESAFbWj6Sp0=U4OTF0tWhQA@mail.gmail.com>

thanks for the quick response Dirk,

I did more digging and found that the error is caused by a single line (in
bold bellow, commenting it out and defining log_lik = 0 does not trigger
the error) but I have absolutely no idea why it is creating the problems

#include "DTboost.h"
#include <util/nainf.h>
#include <cmath>
#include <rng/RNG.h>
#include <boost/math/distributions/non_central_t.hpp>

using std::vector;
using std::log;
using boost::math::non_central_t;
using boost::math::pdf;

namespace jags {
namespace weightedt {

DTboost::DTboost() : VectorDist("dnt_boost", 3) {}

// some additional functions

double DTboost::logDensity(double const *x, unsigned int length, PDFType
type,
 vector<double const *> const &par,
 vector<unsigned int> const &len,
 double const *lower, double const *upper) const
{
  // the sigma parameter is ignored
  double ncp   = *par[0];
  double df    = *par[2];

  // create the boost distribution
  non_central_t t_dist(df, ncp);

  // compute the log likelihood
*  double log_lik = log(pdf(t_dist, *x));*

  return log_lik;
}

// some additional functions

On Tue, 19 Jan 2021 at 22:32, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 19 January 2021 at 21:51, Frantisek Bartos wrote:
> | I wanted to submit a new version of my package and I encountered issues
> | with boost when compiling it on R devel version for windows. (Please
> excuse
> | my stupidity, but I'm a complete noob in regards to compilers and C++)
> |
> | A full error stack is accessible here (the Debian one worked without
> | issues):
> |
> https://win-builder.r-project.org/incoming_pretest/RoBMA_1.2.0_20210119_161819/Windows/00install.out
>
> It's actually a _linker_ error, see the 'multiple definitions' hint:
>
> D:/Compiler/rtools40/mingw32/bin/../lib/gcc/i686-w64-mingw32/8.3.0/../../../../i686-w64-mingw32/bin/ld.exe:
> D:/Compiler/rtools40/mingw32/bin/../lib/gcc/i686-w64-mingw32/8.3.0/libstdc++.a(cow-stdexcept.o):(.text$_ZNSt13runtime_errorC2ERKS_+0x0):
> multiple definition of
> `std::runtime_error::runtime_error(std::runtime_error const&)';
> distributions/DTboost.o:DTboost.cc:(.text$_ZNSt13runtime_errorC2ERKS_[__ZNSt13runtime_errorC2ERKS_]+0x0):
> first defined here
>
> I have had similar issues when including something twice or more times that
> was meant to be included only once. It could also be a setup issue. Bit
> hard
> to tell but I don't have spare cycles to dig deeper now.
>
> Dirk
>
> | I checked that removing all C++ code that contains anything boost related
> | resolves the issue, however, I did not encounter this error before.
> |
> | An updated version of the code is accessible at GitHub
> | https://github.com/FBartos/RoBMA
> |
> | Thanks,
> | Frantisek
> |
> |       [[alternative HTML version deleted]]
> |
> | ______________________________________________
> | R-package-devel at r-project.org mailing list
> | https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From @ndre@@@b|@ette @end|ng |rom un|-due@de  Fri Jan 22 17:38:27 2021
From: @ndre@@@b|@ette @end|ng |rom un|-due@de (=?utf-8?B?QmzDpHR0ZSwgQW5kcmVhcw==?=)
Date: Fri, 22 Jan 2021 16:38:27 +0000
Subject: [R-pkg-devel] GitHub Actions - CI for pkg that depends on
 Java/rJava (Windows issue)
Message-ID: <D3611E1D-4C78-4C6E-AC3A-F75C31EAA039@uni-due.de>

Dear colleagues,

as recommended by rOpenSci (see https://ropensci.org/technotes/2020/11/19/moving-away-travis/) , I am moving to GitHub Actions for the CI for my R packages.

My test case is the ?bignlp? package I currently develop (https://github.com/https://github.com/PolMine/bignlpPolMine/bignlp). It is an interface to use the CoreNLP tools which are written in Java. (To explain: Unlike other existing packages that interface to CoreNLP, my intent is to make full use of Java multithreading.)

Having used `usethis::use_github_action_check_full(),  CI works almost out of the box on the Ubuntu and macOS test environments. But I have a problem to ensure that rJava can find Java. The error I see (Windows, both architectures):

Error: Error: R CMD check found ERRORs
Execution halted
.onLoad failed in loadNamespace() for 'rJava', details:
call: inDL(x, as.logical(local), as.logical(now), ...)
error: unable to load shared object 'D:/a/_temp/Library/rJava/libs/i386/rJava.dll':
LoadLibrary failure: %1 is not a valid Win32 application.

(For the full log, see: https://github.com/PolMine/bignlp/runs/1749892186)

My first take was to add a step that would make sure that Java is present to .github/workflows/R-CMD-check.yaml:

      - name: Install Java
        uses: actions/setup-java at v1
        with:
          java-version: '8'
          java-package: jdk

But that only breaks things CI on Linux without having any change on Windows.

I have consulted the manual ?GitHub Actions with R? (https://ropenscilabs.github.io/actions_sandbox/), but it does not address Java issues. I tried to find some R package on GitHub that would have rJava as a dependency and that uses GitHub Actions for CI ? without success.

This is why I?d like to query your experience: How I can make GitHub Actions work on Windows for the scenario of a package that depends on Java/rJava. Many thanks in advance!

Kind regards
Andreas (Bl?tte)

--
Prof. Dr. Andreas Bl?tte
Professor of Public Policy and Regional Politics
University of Duisburg-Essen


	[[alternative HTML version deleted]]


From retep@me|@@ner @end|ng |rom gm@||@com  Fri Jan 22 17:51:29 2021
From: retep@me|@@ner @end|ng |rom gm@||@com (Peter Meissner)
Date: Fri, 22 Jan 2021 17:51:29 +0100
Subject: [R-pkg-devel] GitHub Actions - CI for pkg that depends on
 Java/rJava (Windows issue)
In-Reply-To: <D3611E1D-4C78-4C6E-AC3A-F75C31EAA039@uni-due.de>
References: <D3611E1D-4C78-4C6E-AC3A-F75C31EAA039@uni-due.de>
Message-ID: <CAB-BFRoTSW-9mN_GgDeDGE_H3a5C_3tQ1stu9UvDpcbcgpkQuQ@mail.gmail.com>

Hey,

Very interesting. I just made rJava work for Linux:

https://github.com/petermeissner/kafkaesque/blob/master/.github/workflows/tests.yml

Best, Peter




Bl?tte, Andreas <andreas.blaette at uni-due.de> schrieb am Fr. 22. Jan. 2021
um 17:38:

> Dear colleagues,
>
> as recommended by rOpenSci (see
> https://ropensci.org/technotes/2020/11/19/moving-away-travis/) , I am
> moving to GitHub Actions for the CI for my R packages.
>
> My test case is the ?bignlp? package I currently develop (
> https://github.com/https://github.com/PolMine/bignlpPolMine/bignlp). It
> is an interface to use the CoreNLP tools which are written in Java. (To
> explain: Unlike other existing packages that interface to CoreNLP, my
> intent is to make full use of Java multithreading.)
>
> Having used `usethis::use_github_action_check_full(),  CI works almost out
> of the box on the Ubuntu and macOS test environments. But I have a problem
> to ensure that rJava can find Java. The error I see (Windows, both
> architectures):
>
> Error: Error: R CMD check found ERRORs
> Execution halted
> .onLoad failed in loadNamespace() for 'rJava', details:
> call: inDL(x, as.logical(local), as.logical(now), ...)
> error: unable to load shared object
> 'D:/a/_temp/Library/rJava/libs/i386/rJava.dll':
> LoadLibrary failure: %1 is not a valid Win32 application.
>
> (For the full log, see: https://github.com/PolMine/bignlp/runs/1749892186)
>
> My first take was to add a step that would make sure that Java is present
> to .github/workflows/R-CMD-check.yaml:
>
>       - name: Install Java
>         uses: actions/setup-java at v1
>         with:
>           java-version: '8'
>           java-package: jdk
>
> But that only breaks things CI on Linux without having any change on
> Windows.
>
> I have consulted the manual ?GitHub Actions with R? (
> https://ropenscilabs.github.io/actions_sandbox/), but it does not address
> Java issues. I tried to find some R package on GitHub that would have rJava
> as a dependency and that uses GitHub Actions for CI ? without success.
>
> This is why I?d like to query your experience: How I can make GitHub
> Actions work on Windows for the scenario of a package that depends on
> Java/rJava. Many thanks in advance!
>
> Kind regards
> Andreas (Bl?tte)
>
> --
> Prof. Dr. Andreas Bl?tte
> Professor of Public Policy and Regional Politics
> University of Duisburg-Essen
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jepu@to @end|ng |rom gm@||@com  Fri Jan 22 21:29:11 2021
From: jepu@to @end|ng |rom gm@||@com (James Pustejovsky)
Date: Fri, 22 Jan 2021 14:29:11 -0600
Subject: [R-pkg-devel] Rdmacros as Suggests rather than Imports
Message-ID: <CAFUVuJwhHXwc-ENHhus2ygRM+nEky1_mfyqYmb72s+8PCGG+8Q@mail.gmail.com>

Greetings,

I'm writing to see if anyone has suggestions for how to handle an issue I'm
facing with the clubSandwich package (
https://CRAN.R-project.org/package=clubSandwich; Github repo:
https://github.com/jepusto/clubSandwich). The package documentation uses
the fairly new package mathjaxr (https://CRAN.R-project.org/package=mathjaxr;
Github repo: https://github.com/wviechtb/mathjaxr) so that the help
packages can include mathjax formulas. Using mathjaxr requires adding it as
a dependency (in Imports) and in the Rdmacros field.

I recently learned that the Debian GNU/Linux team that handles R packaging
has trouble with the mathjaxr package, and consequently with any package
that has mathjaxr as a dependency. Thus, I would like to make
mathjaxr an optional feature, moving it from Imports to Suggests.
However, Writing R Extensions specifies that RdMacros packages must be
listed in Imports or Depends.

Does anyone have suggestions for a potential workaround for this situation
(short of entirely removing the use of mathjaxr)?

Kind Regards,
James

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Jan 22 22:13:03 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 22 Jan 2021 15:13:03 -0600
Subject: [R-pkg-devel] Rdmacros as Suggests rather than Imports
In-Reply-To: <CAFUVuJwhHXwc-ENHhus2ygRM+nEky1_mfyqYmb72s+8PCGG+8Q@mail.gmail.com>
References: <CAFUVuJwhHXwc-ENHhus2ygRM+nEky1_mfyqYmb72s+8PCGG+8Q@mail.gmail.com>
Message-ID: <24587.16351.642339.803597@rob.eddelbuettel.com>


Hi James,

On 22 January 2021 at 14:29, James Pustejovsky wrote:
| I'm writing to see if anyone has suggestions for how to handle an issue I'm
| facing with the clubSandwich package (
| https://CRAN.R-project.org/package=clubSandwich; Github repo:
| https://github.com/jepusto/clubSandwich). The package documentation uses
| the fairly new package mathjaxr (https://CRAN.R-project.org/package=mathjaxr;
| Github repo: https://github.com/wviechtb/mathjaxr) so that the help
| packages can include mathjax formulas. Using mathjaxr requires adding it as
| a dependency (in Imports) and in the Rdmacros field.
| 
| I recently learned that the Debian GNU/Linux team that handles R packaging
| has trouble with the mathjaxr package, and consequently with any package
| that has mathjaxr as a dependency. Thus, I would like to make
| mathjaxr an optional feature, moving it from Imports to Suggests.
| However, Writing R Extensions specifies that RdMacros packages must be
| listed in Imports or Depends.
| 
| Does anyone have suggestions for a potential workaround for this situation
| (short of entirely removing the use of mathjaxr)?

That is what Duncan did with rgl, from where this arose. (It's all very
inside baseball by for embedded 'minified' js files Debian 'ftpmasters'
[essentially our version of the CRAN desk accept/reject] also require full
source of the javascript file, which is not unreasonable -- but a bit of a
pain pain). Wolfgang (for mathjaxr) knows about it, and "time permitting"
packaging of mathjaxr may change. In the meantime the easiest os for you to
not use mathjaxr (I don't think the help page rendering mechanism has
optionality here) or for your corresponding Debian maintainer (CC'ed) to
patch it out (which is what I had done for the first rgl release with it).

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jepu@to @end|ng |rom gm@||@com  Fri Jan 22 22:42:33 2021
From: jepu@to @end|ng |rom gm@||@com (James Pustejovsky)
Date: Fri, 22 Jan 2021 15:42:33 -0600
Subject: [R-pkg-devel] Rdmacros as Suggests rather than Imports
In-Reply-To: <24587.16351.642339.803597@rob.eddelbuettel.com>
References: <CAFUVuJwhHXwc-ENHhus2ygRM+nEky1_mfyqYmb72s+8PCGG+8Q@mail.gmail.com>
 <24587.16351.642339.803597@rob.eddelbuettel.com>
Message-ID: <CAFUVuJzqvW2ynndzZC2UvUEUZ16j3wd9CX4BPNdQ6jfhn7Sgvw@mail.gmail.com>

Dirk,

Thanks very much for your input! By "patch it out" do you mean modify my
package description for the Debian distribution only? Would it work to
create a separate branch of my Github repo with modifications for the
Debian distro, and then submit that directly to Debian maintainers?

I'm sorry for my naivete here--I'm just not quite sure how to proceed.

James

On Fri, Jan 22, 2021 at 3:13 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Hi James,
>
> On 22 January 2021 at 14:29, James Pustejovsky wrote:
> | I'm writing to see if anyone has suggestions for how to handle an issue
> I'm
> | facing with the clubSandwich package (
> | https://CRAN.R-project.org/package=clubSandwich; Github repo:
> | https://github.com/jepusto/clubSandwich). The package documentation uses
> | the fairly new package mathjaxr (
> https://CRAN.R-project.org/package=mathjaxr;
> | Github repo: https://github.com/wviechtb/mathjaxr) so that the help
> | packages can include mathjax formulas. Using mathjaxr requires adding it
> as
> | a dependency (in Imports) and in the Rdmacros field.
> |
> | I recently learned that the Debian GNU/Linux team that handles R
> packaging
> | has trouble with the mathjaxr package, and consequently with any package
> | that has mathjaxr as a dependency. Thus, I would like to make
> | mathjaxr an optional feature, moving it from Imports to Suggests.
> | However, Writing R Extensions specifies that RdMacros packages must be
> | listed in Imports or Depends.
> |
> | Does anyone have suggestions for a potential workaround for this
> situation
> | (short of entirely removing the use of mathjaxr)?
>
> That is what Duncan did with rgl, from where this arose. (It's all very
> inside baseball by for embedded 'minified' js files Debian 'ftpmasters'
> [essentially our version of the CRAN desk accept/reject] also require full
> source of the javascript file, which is not unreasonable -- but a bit of a
> pain pain). Wolfgang (for mathjaxr) knows about it, and "time permitting"
> packaging of mathjaxr may change. In the meantime the easiest os for you to
> not use mathjaxr (I don't think the help page rendering mechanism has
> optionality here) or for your corresponding Debian maintainer (CC'ed) to
> patch it out (which is what I had done for the first rgl release with it).
>
> Dirk
>
> --
> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Jan 22 22:51:57 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 22 Jan 2021 15:51:57 -0600
Subject: [R-pkg-devel] Rdmacros as Suggests rather than Imports
In-Reply-To: <CAFUVuJzqvW2ynndzZC2UvUEUZ16j3wd9CX4BPNdQ6jfhn7Sgvw@mail.gmail.com>
References: <CAFUVuJwhHXwc-ENHhus2ygRM+nEky1_mfyqYmb72s+8PCGG+8Q@mail.gmail.com>
 <24587.16351.642339.803597@rob.eddelbuettel.com>
 <CAFUVuJzqvW2ynndzZC2UvUEUZ16j3wd9CX4BPNdQ6jfhn7Sgvw@mail.gmail.com>
Message-ID: <24587.18685.494988.11951@rob.eddelbuettel.com>


Hi James,

On 22 January 2021 at 15:42, James Pustejovsky wrote:
| Thanks very much for your input! By "patch it out" do you mean modify my
| package description for the Debian distribution only? Would it work to

And code / content! Can't just alter the DESCRIPTION if the Rd still call mathjaxr.

| create a separate branch of my Github repo with modifications for the
| Debian distro, and then submit that directly to Debian maintainers?
| 
| I'm sorry for my naivete here--I'm just not quite sure how to proceed.

I attempted to lay out two alternatives:

 i)  where you remove mathjaxr, the Debian package just follows
 ii) where you do nothing but the Debian package gets altered ("patched")
     and then differs in that only it no longer uses mathjaxr

Hth,  Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jan 23 10:54:51 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 23 Jan 2021 04:54:51 -0500
Subject: [R-pkg-devel] Rdmacros as Suggests rather than Imports
In-Reply-To: <24587.18685.494988.11951@rob.eddelbuettel.com>
References: <CAFUVuJwhHXwc-ENHhus2ygRM+nEky1_mfyqYmb72s+8PCGG+8Q@mail.gmail.com>
 <24587.16351.642339.803597@rob.eddelbuettel.com>
 <CAFUVuJzqvW2ynndzZC2UvUEUZ16j3wd9CX4BPNdQ6jfhn7Sgvw@mail.gmail.com>
 <24587.18685.494988.11951@rob.eddelbuettel.com>
Message-ID: <65706884-891c-05da-04ea-23c10d42b6c9@gmail.com>

On 22/01/2021 4:51 p.m., Dirk Eddelbuettel wrote:
> 
> Hi James,
> 
> On 22 January 2021 at 15:42, James Pustejovsky wrote:
> | Thanks very much for your input! By "patch it out" do you mean modify my
> | package description for the Debian distribution only? Would it work to
> 
> And code / content! Can't just alter the DESCRIPTION if the Rd still call mathjaxr.
> 
> | create a separate branch of my Github repo with modifications for the
> | Debian distro, and then submit that directly to Debian maintainers?
> |
> | I'm sorry for my naivete here--I'm just not quite sure how to proceed.
> 
> I attempted to lay out two alternatives:
> 
>   i)  where you remove mathjaxr, the Debian package just follows
>   ii) where you do nothing but the Debian package gets altered ("patched")
>       and then differs in that only it no longer uses mathjaxr
> 
> Hth,  Dirk
> 

I wonder if there's a way to define stubs for the macros in the package, 
and use mathjaxr versions only conditional on having it available?  I 
suspect that should be possible, but might require changes in R, not 
just in the individual packages.

As to the workaround in rgl:  since the mathjaxr macros are defined to 
be similar to the existing \eqn and \deqn macros in base R, it was easy 
to switch back to those and I (hopefully temporarily) dropped the 
mathjaxr dependency completely.  For a package that made more extensive 
use of math in the help pages it would be more work.

Duncan Murdoch


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Jan 23 12:45:49 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 23 Jan 2021 14:45:49 +0300
Subject: [R-pkg-devel] Rdmacros as Suggests rather than Imports
In-Reply-To: <65706884-891c-05da-04ea-23c10d42b6c9@gmail.com>
References: <CAFUVuJwhHXwc-ENHhus2ygRM+nEky1_mfyqYmb72s+8PCGG+8Q@mail.gmail.com>
 <24587.16351.642339.803597@rob.eddelbuettel.com>
 <CAFUVuJzqvW2ynndzZC2UvUEUZ16j3wd9CX4BPNdQ6jfhn7Sgvw@mail.gmail.com>
 <24587.18685.494988.11951@rob.eddelbuettel.com>
 <65706884-891c-05da-04ea-23c10d42b6c9@gmail.com>
Message-ID: <20210123144549.3ef018c9@Tarkus>

On Sat, 23 Jan 2021 04:54:51 -0500
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> I wonder if there's a way to define stubs for the macros in the
> package, and use mathjaxr versions only conditional on having it
> available?

I had an idea along the lines of

\Sexpr[results=rd]{if (...) '\\newcommand{\\mjeqn}{...}'}

...but \Sexpr seems to be expanded too late in the Rd processing
pipeline for the \newcommand to have any effect. This also seems to
mean that it's impossible to dynamically load macro definitions
belonging to a different package from a \Sexpr:

% doesn't affect the rest of the document
\Sexpr[results=rd]{
 if (nzchar(f <- system.file('help/macros/mathjax.Rd', 'mathjaxr')))
  readLines(f)
}

An "optional mathjaxr" implementation will probably end up with its own
copy of man/macros/mathjax.Rd (but not the rest of MathJax), with \mjeqn
and friends defined to check whether mathjaxr package is available
before outputting MathJax markup or \eqn.

Loading the rest of the .Rd in the same \Sexpr where \newcommand{} is
evaluated (1) doesn't work because only one Rd section per \Sexpr is
supported and (2) would be a truly horrible hack if it worked.

-- 
Best regards,
Ivan


From o||v|er@m@rt|n @end|ng |rom |nr@e@|r  Tue Jan 26 11:05:45 2021
From: o||v|er@m@rt|n @end|ng |rom |nr@e@|r (Olivier Martin (BioSP))
Date: Tue, 26 Jan 2021 10:05:45 +0000
Subject: [R-pkg-devel] problem with donttest example
Message-ID: <1611655545805.80750@inrae.fr>

Hi all,

R CMD check --as-cran now runs \donttest examples .


So what is the right way to avoid it, and what is the right way for submission to CRAN.

Thanks for your help.

Best regards?

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jan 26 12:20:30 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 26 Jan 2021 06:20:30 -0500
Subject: [R-pkg-devel] problem with donttest example
In-Reply-To: <1611655545805.80750@inrae.fr>
References: <1611655545805.80750@inrae.fr>
Message-ID: <28444f49-f4f8-39b8-b512-e5273d34a7a2@gmail.com>

On 26/01/2021 5:05 a.m., Olivier Martin (BioSP) wrote:
> Hi all,
> 
> R CMD check --as-cran now runs \donttest examples .
> 
> 
> So what is the right way to avoid it, and what is the right way for submission to CRAN.

Why are you listing the examples as \donttest?  If it's because they 
will fail on CRAN, wouldn't they fail on a user's system?  Then you 
should fix the examples so they don't fail.

If you marked them that way because they violate some CRAN policy (e.g. 
writing to a user's home directory), then you should fix them.  Those 
policies are there to protect users.

If you marked them that way because they take too long to run, then it 
seems like CRAN shouldn't complain about the run time.  I don't know if 
they do or not.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jan 26 13:53:50 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 26 Jan 2021 13:53:50 +0100
Subject: [R-pkg-devel] problem with donttest example
In-Reply-To: <28444f49-f4f8-39b8-b512-e5273d34a7a2@gmail.com>
References: <1611655545805.80750@inrae.fr>
 <28444f49-f4f8-39b8-b512-e5273d34a7a2@gmail.com>
Message-ID: <ea1d108a-f459-eddb-1ded-52d0c5bf77c5@statistik.tu-dortmund.de>



On 26.01.2021 12:20, Duncan Murdoch wrote:
> On 26/01/2021 5:05 a.m., Olivier Martin (BioSP) wrote:
>> Hi all,
>>
>> R CMD check --as-cran now runs \donttest examples .
>>
>>
>> So what is the right way to avoid it, and what is the right way for 
>> submission to CRAN.
> 
> Why are you listing the examples as \donttest?? If it's because they 
> will fail on CRAN, wouldn't they fail on a user's system?? Then you 
> should fix the examples so they don't fail.
> 
> If you marked them that way because they violate some CRAN policy (e.g. 
> writing to a user's home directory), then you should fix them.? Those 
> policies are there to protect users.
> 
> If you marked them that way because they take too long to run, then it 
> seems like CRAN shouldn't complain about the run time.? I don't know if 
> they do or not.

They do not, CRAN does not run --run-donttest examples regularly, only 
occassionally to see if these work, too. We do not complain about 
--run-donttest runtime unless it takes hours and it is unclear whoi is 
supposed to ever look at the examples then.

Best,
Uwe Ligges





> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From w|||@|@nd@u @end|ng |rom gm@||@com  Wed Jan 27 03:36:26 2021
From: w|||@|@nd@u @end|ng |rom gm@||@com (Will L)
Date: Tue, 26 Jan 2021 21:36:26 -0500
Subject: [R-pkg-devel] Solaris CRAN check error for package {targets}
Message-ID: <CAC-MUvtvZJwxSmxbLv7t4cxBmt+CSxaCpPzHHG_o6W4kFXpA5Q@mail.gmail.com>

All,


The {targets} package shows an error on CRAN when checked with Solaris:
https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/targets-00check.html.
The traceback points to to testthat::skip_if_not_installed("clustermq"). At
first I thought this was a race condition ({clustermq} in the middle of
installing) but then I noticed this same error happened in the same
platform on two different days (2021-01-21 and 2021-01-24). All non-Solaris
CRAN checks pass. I do not have a Solaris machine and cannot reproduce
locally on Mac, Linux, or Windows.
<https://github.com/wlandau>
Will

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Wed Jan 27 11:21:17 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 27 Jan 2021 11:21:17 +0100
Subject: [R-pkg-devel] Solaris CRAN check error for package {targets}
In-Reply-To: <CAC-MUvtvZJwxSmxbLv7t4cxBmt+CSxaCpPzHHG_o6W4kFXpA5Q@mail.gmail.com>
References: <CAC-MUvtvZJwxSmxbLv7t4cxBmt+CSxaCpPzHHG_o6W4kFXpA5Q@mail.gmail.com>
Message-ID: <YBE+nRKZvljzKQXG@posteo.no>

On 2021-01-26 21:36 -0500, Will L wrote:
> All,
> 
> The {targets} package shows an error 
> on CRAN when checked with Solaris: 
> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/targets-00check.html.  

Hi!  Maybe try out things in a virtual 
machine in qemu or something?  

OT: Who uses Solaris anyway, I thought 
it was a long dead project after Oracle 
went in and bought Sun some ten odd 
years ago, contiued in the form of 
Illumos, SmartOS, perhaps now Oxide 
Computing?  Also: i386?? I think no one 
uses this ... this is really old and 
crusty stuff from 2007 [1] ... 

Rasmus

[1] https://gcc.gnu.org/legacy-ml/gcc-help/2007-03/msg00042.html


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Jan 27 12:26:49 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 27 Jan 2021 12:26:49 +0100
Subject: [R-pkg-devel] Solaris CRAN check error for package {targets}
In-Reply-To: <YBE+nRKZvljzKQXG@posteo.no>
References: <CAC-MUvtvZJwxSmxbLv7t4cxBmt+CSxaCpPzHHG_o6W4kFXpA5Q@mail.gmail.com>
 <YBE+nRKZvljzKQXG@posteo.no>
Message-ID: <CABtg=KmmM4NJnWEwcHG4jbqwW_gL9hvtPr_ao+HLAN1Syw2npQ@mail.gmail.com>

Will,

I can help you get a Solaris VM, for VirtualBox or VMware, let me know
in private if you need one.

OTOH that crash is coming from a requireNamespace("clustermq", quietly
= TRUE) call, so it does not seem like it is your fault.

You could also try to reproduce this with `rhub::check()` and one of
the Solaris builders.

Gabor


On Wed, Jan 27, 2021 at 12:18 PM Rasmus Liland <jral at posteo.no> wrote:
>
> On 2021-01-26 21:36 -0500, Will L wrote:
> > All,
> >
> > The {targets} package shows an error
> > on CRAN when checked with Solaris:
> > https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/targets-00check.html.
>
> Hi!  Maybe try out things in a virtual
> machine in qemu or something?
>
> OT: Who uses Solaris anyway, I thought
> it was a long dead project after Oracle
> went in and bought Sun some ten odd
> years ago, contiued in the form of
> Illumos, SmartOS, perhaps now Oxide
> Computing?  Also: i386?? I think no one
> uses this ... this is really old and
> crusty stuff from 2007 [1] ...
>
> Rasmus
>
> [1] https://gcc.gnu.org/legacy-ml/gcc-help/2007-03/msg00042.html
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From D@n@Ke||ey @end|ng |rom D@|@C@  Thu Jan 28 12:45:51 2021
From: D@n@Ke||ey @end|ng |rom D@|@C@ (Daniel Kelley)
Date: Thu, 28 Jan 2021 11:45:51 +0000
Subject: [R-pkg-devel] how to set .Rbuildignore with respect to vignettes?
Message-ID: <AF16D43C-6413-4230-9BCA-3565A5039911@dal.ca>

SUMMARY QUESTION.

Should there be a `^vignettes$` line in `.Rbuildignore` files?


BACKGROUND.

I am trying to trim the size of the 'oce' package.  It has several vignettes, and I would like to learn how to include them optimally in my tarball.

The listing given in DETAILS reveals a duplicated vignette (`.Rmd`) file.  (I see such duplication for all the vignettes.)

The files in `oce/inst/doc` are created by `devtools::document(roclets = c('rd', 'collate', 'vignette')))` and so I am guessing that I should leave them intact.  However, I don't see the sense in the `vignettes` directory being included in the tarball, since it just contains duplicates of `.Rmd` files already included in `inst/doc`.

I wonder ... should add `^vignettes$` to my `.Rbuildignore` file to prevent the duplicates?  I can't find advice online that answers the question.

Thanks.  Dan Kelley, Dept. Oceanography, Dalhousie University, Nova Scotia, Canada.


DETAILS.

This is what I have at present.

?  oce git:(master) ? tar -vtf ~/git/oce_1.3-0.tar.gz|grep map_proj
-rw-r--r--  0 kelley staff    3602 28 Jan 07:27 oce/inst/doc/map_projections.R
-rw-r--r--  0 kelley staff   12682 28 Jan 06:13 oce/inst/doc/map_projections.Rmd
-rw-r--r--  0 kelley staff  747469 28 Jan 07:27 oce/inst/doc/map_projections.html
-rw-r--r--  0 kelley staff   12682 28 Jan 06:13 oce/vignettes/map_projections.Rmd


From w|||@|@nd@u @end|ng |rom gm@||@com  Thu Jan 28 15:33:19 2021
From: w|||@|@nd@u @end|ng |rom gm@||@com (Will L)
Date: Thu, 28 Jan 2021 09:33:19 -0500
Subject: [R-pkg-devel] Solaris CRAN check error for package {targets}
In-Reply-To: <CABtg=KmmM4NJnWEwcHG4jbqwW_gL9hvtPr_ao+HLAN1Syw2npQ@mail.gmail.com>
References: <CAC-MUvtvZJwxSmxbLv7t4cxBmt+CSxaCpPzHHG_o6W4kFXpA5Q@mail.gmail.com>
 <YBE+nRKZvljzKQXG@posteo.no>
 <CABtg=KmmM4NJnWEwcHG4jbqwW_gL9hvtPr_ao+HLAN1Syw2npQ@mail.gmail.com>
Message-ID: <CAC-MUvtRd6rmttyH_=1HaTMHVUoB0OAuWuNzDN-oCGqVhBqjeg@mail.gmail.com>

Thank you, G?bor. After thinking it over, I have decided to try
skip_on_os("solaris") before any call to
skip_if_not_installed("clustermq"). If the issue persists in the next CRAN
submission, I will reach out again about obtaining a Solaris VM. I tried
rhub::check_on_solaris() but encountered an error compiling clustermq:
https://builder.r-hub.io/status/targets_0.0.1.tar.gz-c790896701344ecc8ed4d98da5102e66
.


On Wed, Jan 27, 2021 at 6:27 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> Will,
>
> I can help you get a Solaris VM, for VirtualBox or VMware, let me know
> in private if you need one.
>
> OTOH that crash is coming from a requireNamespace("clustermq", quietly
> = TRUE) call, so it does not seem like it is your fault.
>
> You could also try to reproduce this with `rhub::check()` and one of
> the Solaris builders.
>
> Gabor
>
>
> On Wed, Jan 27, 2021 at 12:18 PM Rasmus Liland <jral at posteo.no> wrote:
> >
> > On 2021-01-26 21:36 -0500, Will L wrote:
> > > All,
> > >
> > > The {targets} package shows an error
> > > on CRAN when checked with Solaris:
> > >
> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/targets-00check.html
> .
> >
> > Hi!  Maybe try out things in a virtual
> > machine in qemu or something?
> >
> > OT: Who uses Solaris anyway, I thought
> > it was a long dead project after Oracle
> > went in and bought Sun some ten odd
> > years ago, contiued in the form of
> > Illumos, SmartOS, perhaps now Oxide
> > Computing?  Also: i386?? I think no one
> > uses this ... this is really old and
> > crusty stuff from 2007 [1] ...
> >
> > Rasmus
> >
> > [1] https://gcc.gnu.org/legacy-ml/gcc-help/2007-03/msg00042.html
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
wlandau.github.io
linkedin.com/in/wlandau
github.com/wlandau

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 28 16:05:40 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 28 Jan 2021 10:05:40 -0500
Subject: [R-pkg-devel] Testing on old R versions
Message-ID: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>

I just received a bug report about the rgl package:  it claims to depend 
on R >= 3.2.0, but actually uses the hcl.colors() function that was 
introduced in R 3.6.0, so fails to install.  (This dependence was 
introduced while I had the dependence stated as R >= 4.0.0 for a while, 
until I tried to help people stuck on old releases; I fixed some of the 
4.0.0 needs, but missed this one.)

So of course what I should have done was to run the checks on R 3.2.0 
(and maybe intermediate versions) to confirm it works, but I didn't try 
that before releasing to CRAN.

I've just finished installing a copy of R 3.2.0 and testing my fix, so I 
think things are fine now.  This took some work; some of the packages 
used by the current rgl didn't exist when R 3.2.0 was current, so no 
binaries exist for them; installing the tools for binary builds takes 
time, etc.

So finally, my question:  what is the recommended way to handle tests of 
new packages on old R versions?  Do docker or other images exist that 
are already set up and ready to go?

Duncan Murdoch


From ne@|@p@r|ch@rd@on @end|ng |rom gm@||@com  Thu Jan 28 17:22:52 2021
From: ne@|@p@r|ch@rd@on @end|ng |rom gm@||@com (Neal Richardson)
Date: Thu, 28 Jan 2021 08:22:52 -0800
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
Message-ID: <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>

I've used the https://hub.docker.com/r/rstudio/r-base images for this, and
they appear to go back to R 3.1. Likewise
https://hub.docker.com/r/rocker/r-ver. The latter uses MRAN to install
packages from a CRAN snapshot corresponding to the release, so that should
also help with dependencies.

Neal

On Thu, Jan 28, 2021 at 7:06 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> I just received a bug report about the rgl package:  it claims to depend
> on R >= 3.2.0, but actually uses the hcl.colors() function that was
> introduced in R 3.6.0, so fails to install.  (This dependence was
> introduced while I had the dependence stated as R >= 4.0.0 for a while,
> until I tried to help people stuck on old releases; I fixed some of the
> 4.0.0 needs, but missed this one.)
>
> So of course what I should have done was to run the checks on R 3.2.0
> (and maybe intermediate versions) to confirm it works, but I didn't try
> that before releasing to CRAN.
>
> I've just finished installing a copy of R 3.2.0 and testing my fix, so I
> think things are fine now.  This took some work; some of the packages
> used by the current rgl didn't exist when R 3.2.0 was current, so no
> binaries exist for them; installing the tools for binary builds takes
> time, etc.
>
> So finally, my question:  what is the recommended way to handle tests of
> new packages on old R versions?  Do docker or other images exist that
> are already set up and ready to go?
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Jan 28 17:42:47 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 28 Jan 2021 10:42:47 -0600
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
Message-ID: <24594.59783.128493.96987@rob.eddelbuettel.com>


The Rocker Project provides both rocker/r-ver (with package snapshotting) as
well as the (much smaller, just R) rocker/r-base images which are then passed
on to the Docker team to become the official r-base image.

These go back to 3.1.3 with (almost if not all) interim releases, see

   https://hub.docker.com/_/r-base?tab=tags

and just use, say, 'docker pull r-base:3.2.0'

(Because they are available as these 'r-base' I initially didn't initially
tag them at the rocker/r-base side so there tags only started at 3.6.3.)

For the use case of testing rgl you may need to find the appropriate opengl
libraries for the particular release. These r-base images are all Debian
based, and Debian has a handy 'time machine' feature in snapshot.debian.org
which also lets you pick dates to install .deb binaries from. That should
make rgl testing easy in case you need older versions of the build
dependencies.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From N@th@n@W@t@on-h@|gh @end|ng |rom @@hmr|@com  Thu Jan 28 20:45:59 2021
From: N@th@n@W@t@on-h@|gh @end|ng |rom @@hmr|@com (Nathan Watson-Haigh)
Date: Thu, 28 Jan 2021 19:45:59 +0000
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
Message-ID: <SYYP282MB0862FB3B08958B7F86C4EBF3ACBA9@SYYP282MB0862.AUSP282.PROD.OUTLOOK.COM>

I haven't tried it (yet), but perhaps using github actions CI you could specify an older version of R:
https://github.com/r-lib/actions/tree/master/setup-r

Sent from my Samsung Galaxy S10+.
Get Outlook for Android<https://aka.ms/ghei36>

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Friday, January 29, 2021 1:35:40 AM
To: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] Testing on old R versions

I just received a bug report about the rgl package:  it claims to depend
on R >= 3.2.0, but actually uses the hcl.colors() function that was
introduced in R 3.6.0, so fails to install.  (This dependence was
introduced while I had the dependence stated as R >= 4.0.0 for a while,
until I tried to help people stuck on old releases; I fixed some of the
4.0.0 needs, but missed this one.)

So of course what I should have done was to run the checks on R 3.2.0
(and maybe intermediate versions) to confirm it works, but I didn't try
that before releasing to CRAN.

I've just finished installing a copy of R 3.2.0 and testing my fix, so I
think things are fine now.  This took some work; some of the packages
used by the current rgl didn't exist when R 3.2.0 was current, so no
binaries exist for them; installing the tools for binary builds takes
time, etc.

So finally, my question:  what is the recommended way to handle tests of
new packages on old R versions?  Do docker or other images exist that
are already set up and ready to go?

Duncan Murdoch

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 28 22:50:19 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 28 Jan 2021 16:50:19 -0500
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <24594.59783.128493.96987@rob.eddelbuettel.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
Message-ID: <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>

Thanks Dirk, Neal and Nathan.  I ended up going with Dirk's suggestion.

So far I haven't got it to work in 3.2.0; I probably won't put much 
effort into supporting that old version.  But it's fine in 3.4.0 and 
3.5.0, and I'm trying 3.3.0 now.  Rocker rocks!

P.S. rgl now installs in the basic r-base container, without adding 
additional libs.  This is due to some config checks that let it run on a 
barebones machine:  it can still produce WebGL output for a browser, it 
just can't show it on screen.

Duncan Murdoch


On 28/01/2021 11:42 a.m., Dirk Eddelbuettel wrote:
> 
> The Rocker Project provides both rocker/r-ver (with package snapshotting) as
> well as the (much smaller, just R) rocker/r-base images which are then passed
> on to the Docker team to become the official r-base image.
> 
> These go back to 3.1.3 with (almost if not all) interim releases, see
> 
>     https://hub.docker.com/_/r-base?tab=tags
> 
> and just use, say, 'docker pull r-base:3.2.0'
> 
> (Because they are available as these 'r-base' I initially didn't initially
> tag them at the rocker/r-base side so there tags only started at 3.6.3.)
> 
> For the use case of testing rgl you may need to find the appropriate opengl
> libraries for the particular release. These r-base images are all Debian
> based, and Debian has a handy 'time machine' feature in snapshot.debian.org
> which also lets you pick dates to install .deb binaries from. That should
> make rgl testing easy in case you need older versions of the build
> dependencies.
> 
> Dirk
>


From edd @end|ng |rom deb|@n@org  Thu Jan 28 23:29:12 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 28 Jan 2021 16:29:12 -0600
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
Message-ID: <24595.15032.177166.376272@rob.eddelbuettel.com>


On 28 January 2021 at 16:50, Duncan Murdoch wrote:
| Thanks Dirk, Neal and Nathan.  I ended up going with Dirk's suggestion.
| 
| So far I haven't got it to work in 3.2.0; I probably won't put much 
| effort into supporting that old version.  But it's fine in 3.4.0 and 
| 3.5.0, and I'm trying 3.3.0 now.  Rocker rocks!

Thanks, I would have to agree here :)  

| P.S. rgl now installs in the basic r-base container, without adding 
| additional libs.  This is due to some config checks that let it run on a 
| barebones machine:  it can still produce WebGL output for a browser, it 
| just can't show it on screen.

Most excellent, didn't know that part.  Ping we off-list if you're interested
in automating this, I also use these containers (or sometimes extensions with
additional build-dependencies) to test builds in CI settings. Setting that
can be pretty straightforward and self-contained.  It's easiest to instrument
when you don't even need other build dependencies.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Jan 29 01:27:11 2021
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 28 Jan 2021 16:27:11 -0800
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <24595.15032.177166.376272@rob.eddelbuettel.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
Message-ID: <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>

Hi,

you're probably already aware of it, but 'rgl' depends on 'magrittr'
which depends on 'rlang', and the latter requires R (>= 3.3.0).


BTW, I find Singularity (https://github.com/hpcng/singularity/) more
convenient to work with than Docker, e.g. you run as host $USER also
"inside" the container, $PWD and your $HOME folder is automatically
mounted, the built container is a single executable (just like any
other software you run).   Here's how you can use Rocker's r-base with
Singularity on Linux (Ubuntu 18.04):

# Download and build

{host}$ cd /tmp
{host}$ singularity build r-3.3.0.sif docker://r-base:3.3.0

{host}$ ls -l r-3.3.0.sif
-rwxr-xr-x 1 hb hb 385630208 Jan 28 16:05 r-3.3.0.sif


# Run as-is

{host}$ ./r-3.3.0.sif

R version 3.3.0 (2016-05-03) -- "Supposedly Educational"
Copyright (C) 2016 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)
...

> quit("no")

Comment: There's also a 'singularity {run,exec,eval} ...' similar to
'docker' which comes with more features but lots can be done without
it.


# Persistent package installs to host via custom R_LIBS_USER

{host}$ cd /tmp
{host}$ mkdir R-libs-3.3.0
{host}$ R_LIBS_USER=R-libs-3.3.0 ./r-3.3.0.sif

R version 3.3.0 (2016-05-03) -- "Supposedly Educational"
Copyright (C) 2016 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)
...

> .libPaths()[1]
[1] "/tmp/R-libs-test"
> install.packages("rgl")
Installing package into ?/tmp/R-libs-test?
(as ?lib? is unspecified)
also installing the dependencies ?ps?, ?fs?, ?rappdirs?, ?processx?,
?Rcpp?, ?BH?, ?sass?, ?jquerylib?, ?callr?, ?yaml?, ?digest?,
?base64enc?, ?rlang?, ?evaluate?, ?highr?, ?markdown?, ?xfun?,
?httpuv?, ?mime?, ?xtable?, ?R6?, ?sourcetools?, ?later?, ?promises?,
?crayon?, ?fastmap?, ?withr?, ?commonmark?, ?glue?, ?bslib?, ?cachem?,
?ellipsis?, ?lifecycle?, ?lazyeval?, ?miniUI?, ?webshot?,
?htmlwidgets?, ?htmltools?, ?knitr?, ?jsonlite?, ?shiny?, ?crosstalk?,
?manipulateWidget?
...

** preparing package for lazy loading
Error : object ?hcl.colors? is not exported by 'namespace:grDevices'
ERROR: lazy loading failed for package ?rgl?
* removing ?/tmp/R-libs-3.3.0/rgl?

The downloaded source packages are in
?/tmp/hb/RtmpzBZ0FJ/downloaded_packages?
Warning message:
In install.packages("rgl") :
  installation of package ?rgl? had non-zero exit status

> str(rownames(installed.packages()))
 chr [1:77] "base64enc" "BH" "bslib" "cachem" "callr" ...

> quit("no")


# The packages are indeed installed to the host folder and survives restarts

{host}$ R_LIBS_USER=R-libs-3.3.0 ./r-3.3.0.sif
...
> str(rownames(installed.packages()))
 Named chr [1:77] "base64enc" "BH" "bslib" "cachem" "callr" ...
 - attr(*, "names")= chr [1:77] "" "" "" "" ...

So, running R via Singularity is almost the same as running R directly
on the host.

/Henrik


On Thu, Jan 28, 2021 at 2:29 PM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 28 January 2021 at 16:50, Duncan Murdoch wrote:
> | Thanks Dirk, Neal and Nathan.  I ended up going with Dirk's suggestion.
> |
> | So far I haven't got it to work in 3.2.0; I probably won't put much
> | effort into supporting that old version.  But it's fine in 3.4.0 and
> | 3.5.0, and I'm trying 3.3.0 now.  Rocker rocks!
>
> Thanks, I would have to agree here :)
>
> | P.S. rgl now installs in the basic r-base container, without adding
> | additional libs.  This is due to some config checks that let it run on a
> | barebones machine:  it can still produce WebGL output for a browser, it
> | just can't show it on screen.
>
> Most excellent, didn't know that part.  Ping we off-list if you're interested
> in automating this, I also use these containers (or sometimes extensions with
> additional build-dependencies) to test builds in CI settings. Setting that
> can be pretty straightforward and self-contained.  It's easiest to instrument
> when you don't even need other build dependencies.
>
> Dirk
>
> --
> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jan 29 12:35:41 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 29 Jan 2021 06:35:41 -0500
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
 <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
Message-ID: <03cbaa2d-d598-cf07-8bc1-4b6a7ca4f82e@gmail.com>

Thanks, I'll try Singularity out.  (I tried it, but got some weird game 
playing when I tried to do my first build.  Strange.)

By the way, I've been thinking of downgrading the magrittr dependency to 
Suggests.  The only reason it is currently Imports is so that rgl can 
re-export the pipe operator, and users don't need library(magrittr) to 
use it.

rgl itself never uses anything from magrittr, and will work just as well 
with the R-devel proposed pipe:  but if I'm trying to support ancient R 
versions, I won't be able to use it for a few years.

I've just tried this, and rgl still won't install in 3.2.0.  I guess 
this is because some of the other dependencies import magrittr, and/or 
there are other post 3.2.0 needs.  In any case, I'm not too worried 
about that ancient of a version.

Duncan Murdoch

On 28/01/2021 7:27 p.m., Henrik Bengtsson wrote:
> Hi,
> 
> you're probably already aware of it, but 'rgl' depends on 'magrittr'
> which depends on 'rlang', and the latter requires R (>= 3.3.0).
> 
> 
> BTW, I find Singularity (https://github.com/hpcng/singularity/) more
> convenient to work with than Docker, e.g. you run as host $USER also
> "inside" the container, $PWD and your $HOME folder is automatically
> mounted, the built container is a single executable (just like any
> other software you run).   Here's how you can use Rocker's r-base with
> Singularity on Linux (Ubuntu 18.04):
> 
> # Download and build
> 
> {host}$ cd /tmp
> {host}$ singularity build r-3.3.0.sif docker://r-base:3.3.0
> 
> {host}$ ls -l r-3.3.0.sif
> -rwxr-xr-x 1 hb hb 385630208 Jan 28 16:05 r-3.3.0.sif
> 
> 
> # Run as-is
> 
> {host}$ ./r-3.3.0.sif
> 
> R version 3.3.0 (2016-05-03) -- "Supposedly Educational"
> Copyright (C) 2016 The R Foundation for Statistical Computing
> Platform: x86_64-pc-linux-gnu (64-bit)
> ...
> 
>> quit("no")
> 
> Comment: There's also a 'singularity {run,exec,eval} ...' similar to
> 'docker' which comes with more features but lots can be done without
> it.
> 
> 
> # Persistent package installs to host via custom R_LIBS_USER
> 
> {host}$ cd /tmp
> {host}$ mkdir R-libs-3.3.0
> {host}$ R_LIBS_USER=R-libs-3.3.0 ./r-3.3.0.sif
> 
> R version 3.3.0 (2016-05-03) -- "Supposedly Educational"
> Copyright (C) 2016 The R Foundation for Statistical Computing
> Platform: x86_64-pc-linux-gnu (64-bit)
> ...
> 
>> .libPaths()[1]
> [1] "/tmp/R-libs-test"
>> install.packages("rgl")
> Installing package into ?/tmp/R-libs-test?
> (as ?lib? is unspecified)
> also installing the dependencies ?ps?, ?fs?, ?rappdirs?, ?processx?,
> ?Rcpp?, ?BH?, ?sass?, ?jquerylib?, ?callr?, ?yaml?, ?digest?,
> ?base64enc?, ?rlang?, ?evaluate?, ?highr?, ?markdown?, ?xfun?,
> ?httpuv?, ?mime?, ?xtable?, ?R6?, ?sourcetools?, ?later?, ?promises?,
> ?crayon?, ?fastmap?, ?withr?, ?commonmark?, ?glue?, ?bslib?, ?cachem?,
> ?ellipsis?, ?lifecycle?, ?lazyeval?, ?miniUI?, ?webshot?,
> ?htmlwidgets?, ?htmltools?, ?knitr?, ?jsonlite?, ?shiny?, ?crosstalk?,
> ?manipulateWidget?
> ...
> 
> ** preparing package for lazy loading
> Error : object ?hcl.colors? is not exported by 'namespace:grDevices'
> ERROR: lazy loading failed for package ?rgl?
> * removing ?/tmp/R-libs-3.3.0/rgl?
> 
> The downloaded source packages are in
> ?/tmp/hb/RtmpzBZ0FJ/downloaded_packages?
> Warning message:
> In install.packages("rgl") :
>    installation of package ?rgl? had non-zero exit status
> 
>> str(rownames(installed.packages()))
>   chr [1:77] "base64enc" "BH" "bslib" "cachem" "callr" ...
> 
>> quit("no")
> 
> 
> # The packages are indeed installed to the host folder and survives restarts
> 
> {host}$ R_LIBS_USER=R-libs-3.3.0 ./r-3.3.0.sif
> ...
>> str(rownames(installed.packages()))
>   Named chr [1:77] "base64enc" "BH" "bslib" "cachem" "callr" ...
>   - attr(*, "names")= chr [1:77] "" "" "" "" ...
> 
> So, running R via Singularity is almost the same as running R directly
> on the host.
> 
> /Henrik
> 
> 
> On Thu, Jan 28, 2021 at 2:29 PM Dirk Eddelbuettel <edd at debian.org> wrote:
>>
>>
>> On 28 January 2021 at 16:50, Duncan Murdoch wrote:
>> | Thanks Dirk, Neal and Nathan.  I ended up going with Dirk's suggestion.
>> |
>> | So far I haven't got it to work in 3.2.0; I probably won't put much
>> | effort into supporting that old version.  But it's fine in 3.4.0 and
>> | 3.5.0, and I'm trying 3.3.0 now.  Rocker rocks!
>>
>> Thanks, I would have to agree here :)
>>
>> | P.S. rgl now installs in the basic r-base container, without adding
>> | additional libs.  This is due to some config checks that let it run on a
>> | barebones machine:  it can still produce WebGL output for a browser, it
>> | just can't show it on screen.
>>
>> Most excellent, didn't know that part.  Ping we off-list if you're interested
>> in automating this, I also use these containers (or sometimes extensions with
>> additional build-dependencies) to test builds in CI settings. Setting that
>> can be pretty straightforward and self-contained.  It's easiest to instrument
>> when you don't even need other build dependencies.
>>
>> Dirk
>>
>> --
>> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From h@w|ckh@m @end|ng |rom gm@||@com  Fri Jan 29 20:26:28 2021
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Fri, 29 Jan 2021 13:26:28 -0600
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
 <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
Message-ID: <CABdHhvHXfiD_DMcLS-iJhdO+e_1719oQ-JM9yDaYdhX=h7se=A@mail.gmail.com>

On Thu, Jan 28, 2021 at 6:27 PM Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> Hi,
>
> you're probably already aware of it, but 'rgl' depends on 'magrittr'
> which depends on 'rlang', and the latter requires R (>= 3.3.0).

For the reference, we support R-release, R-devel, and the last four
versions of R:
https://www.tidyverse.org/blog/2019/04/r-version-support/.

We automatically run checks on all these R versions using GitHub
actions. You can use the same config as us by running
usethis::use_tidy_github_actions(). If you're already using GitHub,
I'm pretty confident that this is the fastest/easiest way to check
with older versions of R.

Hadley

-- 
http://hadley.nz


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jan 29 23:16:15 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 29 Jan 2021 17:16:15 -0500
Subject: [R-pkg-devel] Using a package only at install time?
Message-ID: <2ff77c47-60d0-bf4e-2556-f5e85362aed8@gmail.com>

I am trying to modify the mathjaxr package so that the tarball includes 
full source code to Mathjax, but only a minified version gets installed. 
  This will save space on the user's system, and should make it run a 
tiny bit faster.

To do this, I am trying using js::uglify_files in a src/install.libs.R 
file, and that's the only place the js package is needed.  I want a way 
to say that js *must* be present to install mathjaxr, but doesn't need 
to be loaded when mathjaxr is loaded.

Adding

   LinkingTo: js

to the DESCRIPTION file seems like it would do this, but checking says:

NOTE
'LinkingTo' for ?js? is unused as it has no 'include' directory

Is that an ignorable NOTE?   If not, is there another strategy for 
minifying Javascript files at install time?

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 31 11:32:17 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 31 Jan 2021 05:32:17 -0500
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <CABdHhvHXfiD_DMcLS-iJhdO+e_1719oQ-JM9yDaYdhX=h7se=A@mail.gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
 <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
 <CABdHhvHXfiD_DMcLS-iJhdO+e_1719oQ-JM9yDaYdhX=h7se=A@mail.gmail.com>
Message-ID: <b8eb73b3-5839-0390-0a8e-de3ef43bb19e@gmail.com>

I am trying out a modified version of the tidyverse actions, and it does 
seem to be going well.  Just one question:

rgl has a soft dependency on alphashape3d, and alphashape3d has a hard 
dependency on rgl.  This means that I need to install in the order

   rgl hard dependencies
   rgl
   rgl soft dependencies

Currently I'm using this code to do that:

   # First install rgl with minimal deps then the rest
   devtools::install()
   remotes::install_deps(dependencies = TRUE)

but devtools seems unnecessarily heavy for this.  Does remotes have a 
way to specify the install in the right order?

Duncan Murdoch


On 29/01/2021 2:26 p.m., Hadley Wickham wrote:
> On Thu, Jan 28, 2021 at 6:27 PM Henrik Bengtsson
> <henrik.bengtsson at gmail.com> wrote:
>>
>> Hi,
>>
>> you're probably already aware of it, but 'rgl' depends on 'magrittr'
>> which depends on 'rlang', and the latter requires R (>= 3.3.0).
> 
> For the reference, we support R-release, R-devel, and the last four
> versions of R:
> https://www.tidyverse.org/blog/2019/04/r-version-support/.
> 
> We automatically run checks on all these R versions using GitHub
> actions. You can use the same config as us by running
> usethis::use_tidy_github_actions(). If you're already using GitHub,
> I'm pretty confident that this is the fastest/easiest way to check
> with older versions of R.
> 
> Hadley
>


From h@w|ckh@m @end|ng |rom gm@||@com  Sun Jan 31 16:57:05 2021
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sun, 31 Jan 2021 09:57:05 -0600
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <b8eb73b3-5839-0390-0a8e-de3ef43bb19e@gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
 <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
 <CABdHhvHXfiD_DMcLS-iJhdO+e_1719oQ-JM9yDaYdhX=h7se=A@mail.gmail.com>
 <b8eb73b3-5839-0390-0a8e-de3ef43bb19e@gmail.com>
Message-ID: <CABdHhvHyNx3dRVsZDb21Gnmuk-J+Luye6gc8p6qS6JezuzCewQ@mail.gmail.com>

On Sun, Jan 31, 2021 at 4:32 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> I am trying out a modified version of the tidyverse actions, and it does
> seem to be going well.  Just one question:
>
> rgl has a soft dependency on alphashape3d, and alphashape3d has a hard
> dependency on rgl.  This means that I need to install in the order
>
>    rgl hard dependencies
>    rgl
>    rgl soft dependencies
>
> Currently I'm using this code to do that:
>
>    # First install rgl with minimal deps then the rest
>    devtools::install()
>    remotes::install_deps(dependencies = TRUE)
>
> but devtools seems unnecessarily heavy for this.  Does remotes have a
> way to specify the install in the right order?

I forget all the details here but instead of `devtools::install()`,
I'm pretty sure you can just use `remotes::install_local()`.

We also have an experimental workflow that uses pak
(https://github.com/r-lib/actions/blob/master/examples/check-pak.yaml);
and pak should know enough about the full dependency graph to install
all dependencies in the correct order without additional work. This
workflow (and pak) itself, is still a bit experimental but we've
started to move the tidyverse workflows to use pak, and haven't had
many problems recently.

Hadley

-- 
http://hadley.nz


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sun Jan 31 16:57:26 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sun, 31 Jan 2021 16:57:26 +0100
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <b8eb73b3-5839-0390-0a8e-de3ef43bb19e@gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
 <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
 <CABdHhvHXfiD_DMcLS-iJhdO+e_1719oQ-JM9yDaYdhX=h7se=A@mail.gmail.com>
 <b8eb73b3-5839-0390-0a8e-de3ef43bb19e@gmail.com>
Message-ID: <CABtg=KmuWuTGMZrQ=NFrVeiX19WgW3X58DaYUH=b4Z+jEAuzCQ@mail.gmail.com>

Do you actually experience any problems, if you don't treat this case specially?

AFAIR, in most cases this is not a problem in practice. remotes might
install the CRAN version of rgl as the dependency of alphashape3d, but
`R CMD check` will install and use the local copy of the rgl package
for the check, anyway, so that does not matter much.

More precisely, it would only matter if alphashape3d had some install
time dependency on rgl, because at install time, it will use the CRAN
rgl version. But this is pretty rare I think.

If you still want to fix this, you can replace
`remotes::install_deps()` with `remotes::install_local()` and then
remotes will install the local package as well, not only its
dependencies.

Gabor

On Sun, Jan 31, 2021 at 11:32 AM Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
>
> I am trying out a modified version of the tidyverse actions, and it does
> seem to be going well.  Just one question:
>
> rgl has a soft dependency on alphashape3d, and alphashape3d has a hard
> dependency on rgl.  This means that I need to install in the order
>
>    rgl hard dependencies
>    rgl
>    rgl soft dependencies
>
> Currently I'm using this code to do that:
>
>    # First install rgl with minimal deps then the rest
>    devtools::install()
>    remotes::install_deps(dependencies = TRUE)
>
> but devtools seems unnecessarily heavy for this.  Does remotes have a
> way to specify the install in the right order?
>
> Duncan Murdoch
>
>
> On 29/01/2021 2:26 p.m., Hadley Wickham wrote:
> > On Thu, Jan 28, 2021 at 6:27 PM Henrik Bengtsson
> > <henrik.bengtsson at gmail.com> wrote:
> >>
> >> Hi,
> >>
> >> you're probably already aware of it, but 'rgl' depends on 'magrittr'
> >> which depends on 'rlang', and the latter requires R (>= 3.3.0).
> >
> > For the reference, we support R-release, R-devel, and the last four
> > versions of R:
> > https://www.tidyverse.org/blog/2019/04/r-version-support/.
> >
> > We automatically run checks on all these R versions using GitHub
> > actions. You can use the same config as us by running
> > usethis::use_tidy_github_actions(). If you're already using GitHub,
> > I'm pretty confident that this is the fastest/easiest way to check
> > with older versions of R.
> >
> > Hadley
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Sun Jan 31 18:08:37 2021
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Sun, 31 Jan 2021 18:08:37 +0100
Subject: [R-pkg-devel] CRAN submissions
Message-ID: <CAN+W6_u76QkAzGvdzUJtcn6KDecm3XbPMY6oR5PN_ySxYoJTFg@mail.gmail.com>

Hi all,

Some time ago, there was a question[1] about "how long is the average
waiting time when submitting a new package ("newbies") until you get a
manual reply or it's on CRAN, submitting an update with all OK before
it hits CRAN".

I have analyzed the data provided by cransays[2] (Many thanks!). You
can find it on this post https://llrs.dev/2021/01/cran-review/
Some key points:
 - Most submission happens in the first days of the week and towards
the middle of the month
 - Most of the submissions disappear from the CRAN queue in less than a day.
 - There's a new package submission to CRAN every hour.
 - It was impossible to know when there was a reply from CRAN, as no
information is openly available.
 - Not possible to know when a package is all OK before it hits CRAN
as some packages remain in the queue even after acceptance (perhaps
with metacran this could be answered).

Hope it's a useful guide. Thanks to the CRAN reviewers for their task,
Best,

Llu?s


[1]: https://stat.ethz.ch/pipermail/r-package-devel/2020q4/006174.html
[2]: https://lockedata.github.io/cransays/articles/dashboard.html


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 31 18:35:18 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 31 Jan 2021 12:35:18 -0500
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <CABtg=KmuWuTGMZrQ=NFrVeiX19WgW3X58DaYUH=b4Z+jEAuzCQ@mail.gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
 <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
 <CABdHhvHXfiD_DMcLS-iJhdO+e_1719oQ-JM9yDaYdhX=h7se=A@mail.gmail.com>
 <b8eb73b3-5839-0390-0a8e-de3ef43bb19e@gmail.com>
 <CABtg=KmuWuTGMZrQ=NFrVeiX19WgW3X58DaYUH=b4Z+jEAuzCQ@mail.gmail.com>
Message-ID: <cd865011-24ae-65c2-a6da-54d4254a35a4@gmail.com>

On 31/01/2021 10:57 a.m., G?bor Cs?rdi wrote:
> Do you actually experience any problems, if you don't treat this case specially?

Yes, what was happening was that remotes::install_deps skipped 
installing rgl from CRAN because the local copy had a later version 
number.  Sorry, I deleted most of the runs that had failures in them, so 
I can't quote the exact message about this.

> 
> AFAIR, in most cases this is not a problem in practice. remotes might
> install the CRAN version of rgl as the dependency of alphashape3d, but
> `R CMD check` will install and use the local copy of the rgl package
> for the check, anyway, so that does not matter much.
> 
> More precisely, it would only matter if alphashape3d had some install
> time dependency on rgl, because at install time, it will use the CRAN
> rgl version. But this is pretty rare I think.
> 
> If you still want to fix this, you can replace
> `remotes::install_deps()` with `remotes::install_local()` and then
> remotes will install the local package as well, not only its
> dependencies.

I'll try that.

Duncan

> 
> Gabor
> 
> On Sun, Jan 31, 2021 at 11:32 AM Duncan Murdoch
> <murdoch.duncan at gmail.com> wrote:
>>
>> I am trying out a modified version of the tidyverse actions, and it does
>> seem to be going well.  Just one question:
>>
>> rgl has a soft dependency on alphashape3d, and alphashape3d has a hard
>> dependency on rgl.  This means that I need to install in the order
>>
>>     rgl hard dependencies
>>     rgl
>>     rgl soft dependencies
>>
>> Currently I'm using this code to do that:
>>
>>     # First install rgl with minimal deps then the rest
>>     devtools::install()
>>     remotes::install_deps(dependencies = TRUE)
>>
>> but devtools seems unnecessarily heavy for this.  Does remotes have a
>> way to specify the install in the right order?
>>
>> Duncan Murdoch
>>
>>
>> On 29/01/2021 2:26 p.m., Hadley Wickham wrote:
>>> On Thu, Jan 28, 2021 at 6:27 PM Henrik Bengtsson
>>> <henrik.bengtsson at gmail.com> wrote:
>>>>
>>>> Hi,
>>>>
>>>> you're probably already aware of it, but 'rgl' depends on 'magrittr'
>>>> which depends on 'rlang', and the latter requires R (>= 3.3.0).
>>>
>>> For the reference, we support R-release, R-devel, and the last four
>>> versions of R:
>>> https://www.tidyverse.org/blog/2019/04/r-version-support/.
>>>
>>> We automatically run checks on all these R versions using GitHub
>>> actions. You can use the same config as us by running
>>> usethis::use_tidy_github_actions(). If you're already using GitHub,
>>> I'm pretty confident that this is the fastest/easiest way to check
>>> with older versions of R.
>>>
>>> Hadley
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 31 18:52:34 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 31 Jan 2021 12:52:34 -0500
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <cd865011-24ae-65c2-a6da-54d4254a35a4@gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
 <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
 <CABdHhvHXfiD_DMcLS-iJhdO+e_1719oQ-JM9yDaYdhX=h7se=A@mail.gmail.com>
 <b8eb73b3-5839-0390-0a8e-de3ef43bb19e@gmail.com>
 <CABtg=KmuWuTGMZrQ=NFrVeiX19WgW3X58DaYUH=b4Z+jEAuzCQ@mail.gmail.com>
 <cd865011-24ae-65c2-a6da-54d4254a35a4@gmail.com>
Message-ID: <a03dfc1d-7b75-cdae-9851-15672149c15b@gmail.com>

On 31/01/2021 12:35 p.m., Duncan Murdoch wrote:
> On 31/01/2021 10:57 a.m., G?bor Cs?rdi wrote:
>> Do you actually experience any problems, if you don't treat this case specially?
> 
> Yes, what was happening was that remotes::install_deps skipped
> installing rgl from CRAN because the local copy had a later version
> number.  Sorry, I deleted most of the runs that had failures in them, so
> I can't quote the exact message about this.

I just re-ran a version of the old one.  I'm caching package builds, so 
now I get alphashape3d anyway, but in case you're interested, the 
message was:

  Skipping 1 packages ahead of CRAN: rgl

Duncan Murdoch

> 
>>
>> AFAIR, in most cases this is not a problem in practice. remotes might
>> install the CRAN version of rgl as the dependency of alphashape3d, but
>> `R CMD check` will install and use the local copy of the rgl package
>> for the check, anyway, so that does not matter much.
>>
>> More precisely, it would only matter if alphashape3d had some install
>> time dependency on rgl, because at install time, it will use the CRAN
>> rgl version. But this is pretty rare I think.
>>
>> If you still want to fix this, you can replace
>> `remotes::install_deps()` with `remotes::install_local()` and then
>> remotes will install the local package as well, not only its
>> dependencies.
> 
> I'll try that.
> 
> Duncan
> 
>>
>> Gabor
>>
>> On Sun, Jan 31, 2021 at 11:32 AM Duncan Murdoch
>> <murdoch.duncan at gmail.com> wrote:
>>>
>>> I am trying out a modified version of the tidyverse actions, and it does
>>> seem to be going well.  Just one question:
>>>
>>> rgl has a soft dependency on alphashape3d, and alphashape3d has a hard
>>> dependency on rgl.  This means that I need to install in the order
>>>
>>>      rgl hard dependencies
>>>      rgl
>>>      rgl soft dependencies
>>>
>>> Currently I'm using this code to do that:
>>>
>>>      # First install rgl with minimal deps then the rest
>>>      devtools::install()
>>>      remotes::install_deps(dependencies = TRUE)
>>>
>>> but devtools seems unnecessarily heavy for this.  Does remotes have a
>>> way to specify the install in the right order?
>>>
>>> Duncan Murdoch
>>>
>>>
>>> On 29/01/2021 2:26 p.m., Hadley Wickham wrote:
>>>> On Thu, Jan 28, 2021 at 6:27 PM Henrik Bengtsson
>>>> <henrik.bengtsson at gmail.com> wrote:
>>>>>
>>>>> Hi,
>>>>>
>>>>> you're probably already aware of it, but 'rgl' depends on 'magrittr'
>>>>> which depends on 'rlang', and the latter requires R (>= 3.3.0).
>>>>
>>>> For the reference, we support R-release, R-devel, and the last four
>>>> versions of R:
>>>> https://www.tidyverse.org/blog/2019/04/r-version-support/.
>>>>
>>>> We automatically run checks on all these R versions using GitHub
>>>> actions. You can use the same config as us by running
>>>> usethis::use_tidy_github_actions(). If you're already using GitHub,
>>>> I'm pretty confident that this is the fastest/easiest way to check
>>>> with older versions of R.
>>>>
>>>> Hadley
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 31 19:10:20 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 31 Jan 2021 13:10:20 -0500
Subject: [R-pkg-devel] Advice on R-forge to Github migration
Message-ID: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>

rgl has been on R-forge for a long time, but I am now planning on 
migrating it to Github.  I really dislike git, but Github offers enough 
benefits, and nowadays I'm familiar enough with them, that I think I'd 
be better off there.

The easiest way to do this would be to do almost nothing:  just declare 
the the dmurdoch/rgl fork of r-forge/rgl is now where all new changes 
will be committed.

Can anyone else who has done this migration tell me if there there any 
disadvantages to this that I don't know about?  What I know:

  - I'll lose the bug reports and forum discussions that were sent to 
R-forge.
  - I'll need to do a bit of work to change dmurdoch/rgl to a more 
standard R package layout, but this should be quite easy:  basically 
just moving the files in pkg/rgl to the top level.  I assume "git mv" 
will keep their history if I do this.

Duncan Murdoch


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Sun Jan 31 19:21:09 2021
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Sun, 31 Jan 2021 12:21:09 -0600
Subject: [R-pkg-devel] Advice on R-forge to Github migration
In-Reply-To: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
References: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
Message-ID: <CAPPM_gRO2NP=cw4WDrQ5dwBRbc1vLpjrUEcqtRBkaYgUKcTyMA@mail.gmail.com>

On Sun, Jan 31, 2021 at 12:10 PM Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
>
> rgl has been on R-forge for a long time, but I am now planning on
> migrating it to Github.  I really dislike git, but Github offers enough
> benefits, and nowadays I'm familiar enough with them, that I think I'd
> be better off there.
>
> The easiest way to do this would be to do almost nothing:  just declare
> the the dmurdoch/rgl fork of r-forge/rgl is now where all new changes
> will be committed.
>
> Can anyone else who has done this migration tell me if there there any
> disadvantages to this that I don't know about?  What I know:
>
>   - I'll lose the bug reports and forum discussions that were sent to
> R-forge.
>   - I'll need to do a bit of work to change dmurdoch/rgl to a more
> standard R package layout, but this should be quite easy:  basically
> just moving the files in pkg/rgl to the top level.  I assume "git mv"
> will keep their history if I do this.
>
I've moved history and issues from R-Forge to GitHub for half a dozen
R packages. I might be able to do this rgl. At minimum, I could help
you do it.

Yes, git mv will retain the file history.

> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From bbo|ker @end|ng |rom gm@||@com  Sun Jan 31 19:23:40 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 31 Jan 2021 13:23:40 -0500
Subject: [R-pkg-devel] Advice on R-forge to Github migration
In-Reply-To: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
References: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
Message-ID: <ac20edf6-d6cb-2728-6a20-38d80e39c53d@gmail.com>

   I think it should be fine to have your package in a subdirectory: 
this works as expected.

remotes::install_github("dmurdoch/rgl/pkg/rgl")

   The only disadvantages to this structure are (1) it's a little bit 
surprising to users (who might try install_github("r-forge/rgl" and 
wonder why it didn't work and (2) setting up Travis machinery takes a 
little more effort to get all processes to work in the proper 
subdirectories (see the glmmTMB package for examples).

  I'm not very good at Git, but always get a bit confused when I try to 
track changes in a file that has moved ...




On 1/31/21 1:10 PM, Duncan Murdoch wrote:
> rgl has been on R-forge for a long time, but I am now planning on 
> migrating it to Github.? I really dislike git, but Github offers enough 
> benefits, and nowadays I'm familiar enough with them, that I think I'd 
> be better off there.
> 
> The easiest way to do this would be to do almost nothing:? just declare 
> the the dmurdoch/rgl fork of r-forge/rgl is now where all new changes 
> will be committed.
> 
> Can anyone else who has done this migration tell me if there there any 
> disadvantages to this that I don't know about?? What I know:
> 
>  ?- I'll lose the bug reports and forum discussions that were sent to 
> R-forge.
>  ?- I'll need to do a bit of work to change dmurdoch/rgl to a more 
> standard R package layout, but this should be quite easy:? basically 
> just moving the files in pkg/rgl to the top level.? I assume "git mv" 
> will keep their history if I do this.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Sun Jan 31 19:23:45 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 31 Jan 2021 13:23:45 -0500
Subject: [R-pkg-devel] Advice on R-forge to Github migration
In-Reply-To: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
References: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
Message-ID: <b8b71374-3565-e7e4-2fd6-4cf73bb227c0@gmail.com>

   I think it should be fine to have your package in a subdirectory: 
this works as expected.

remotes::install_github("dmurdoch/rgl/pkg/rgl")

   The only disadvantages to this structure are (1) it's a little bit 
surprising to users (who might try install_github("r-forge/rgl" and 
wonder why it didn't work and (2) setting up Travis machinery takes a 
little more effort to get all processes to work in the proper 
subdirectories (see the glmmTMB package for examples).

  I'm not very good at Git, but always get a bit confused when I try to 
track changes in a file that has moved ...




On 1/31/21 1:10 PM, Duncan Murdoch wrote:
> rgl has been on R-forge for a long time, but I am now planning on 
> migrating it to Github.? I really dislike git, but Github offers enough 
> benefits, and nowadays I'm familiar enough with them, that I think I'd 
> be better off there.
> 
> The easiest way to do this would be to do almost nothing:? just declare 
> the the dmurdoch/rgl fork of r-forge/rgl is now where all new changes 
> will be committed.
> 
> Can anyone else who has done this migration tell me if there there any 
> disadvantages to this that I don't know about?? What I know:
> 
>  ?- I'll lose the bug reports and forum discussions that were sent to 
> R-forge.
>  ?- I'll need to do a bit of work to change dmurdoch/rgl to a more 
> standard R package layout, but this should be quite easy:? basically 
> just moving the files in pkg/rgl to the top level.? I assume "git mv" 
> will keep their history if I do this.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jan 31 19:35:56 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 31 Jan 2021 10:35:56 -0800
Subject: [R-pkg-devel] Advice on R-forge to Github migration
In-Reply-To: <CAPPM_gRO2NP=cw4WDrQ5dwBRbc1vLpjrUEcqtRBkaYgUKcTyMA@mail.gmail.com>
References: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
 <CAPPM_gRO2NP=cw4WDrQ5dwBRbc1vLpjrUEcqtRBkaYgUKcTyMA@mail.gmail.com>
Message-ID: <8223EB66-0229-419F-801E-B75182D08D30@dcn.davis.ca.us>

Technically, git does not record file history... it records commit history, and reconstructs file history as needed. The contents of a file identify it uniquely among all commits ever made regardless of which directory it was ever in. IMO this is the main reason why git is superior and I put up wth the inconsistent command line interface because of it.

git mv is very simple [1].

[1] https://stackoverflow.com/questions/1094269/whats-the-purpose-of-git-mv

On January 31, 2021 10:21:09 AM PST, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
>On Sun, Jan 31, 2021 at 12:10 PM Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>>
>> rgl has been on R-forge for a long time, but I am now planning on
>> migrating it to Github.  I really dislike git, but Github offers
>enough
>> benefits, and nowadays I'm familiar enough with them, that I think
>I'd
>> be better off there.
>>
>> The easiest way to do this would be to do almost nothing:  just
>declare
>> the the dmurdoch/rgl fork of r-forge/rgl is now where all new changes
>> will be committed.
>>
>> Can anyone else who has done this migration tell me if there there
>any
>> disadvantages to this that I don't know about?  What I know:
>>
>>   - I'll lose the bug reports and forum discussions that were sent to
>> R-forge.
>>   - I'll need to do a bit of work to change dmurdoch/rgl to a more
>> standard R package layout, but this should be quite easy:  basically
>> just moving the files in pkg/rgl to the top level.  I assume "git mv"
>> will keep their history if I do this.
>>
>I've moved history and issues from R-Forge to GitHub for half a dozen
>R packages. I might be able to do this rgl. At minimum, I could help
>you do it.
>
>Yes, git mv will retain the file history.
>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 31 21:16:39 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 31 Jan 2021 15:16:39 -0500
Subject: [R-pkg-devel] Advice on R-forge to Github migration
In-Reply-To: <b8b71374-3565-e7e4-2fd6-4cf73bb227c0@gmail.com>
References: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
 <b8b71374-3565-e7e4-2fd6-4cf73bb227c0@gmail.com>
Message-ID: <7bcd28bf-bffd-89ff-1b7b-1aa3e48d772e@gmail.com>

Thanks to everyone who commented.  A few replies inline:

On 31/01/2021 1:23 p.m., Ben Bolker wrote:
>     I think it should be fine to have your package in a subdirectory:
> this works as expected.
> 
> remotes::install_github("dmurdoch/rgl/pkg/rgl")
> 
>     The only disadvantages to this structure are (1) it's a little bit
> surprising to users (who might try install_github("r-forge/rgl" and
> wonder why it didn't work and (2) setting up Travis machinery takes a
> little more effort to get all processes to work in the proper
> subdirectories (see the glmmTMB package for examples).

I'm setting up Github actions instead of Travis; about a third of my 22 
failed attempts were caused by not dealing with the non-standard 
structure properly :-).

It's true that remotes::install_github("dmurdoch/rgl/pkg/rgl") works, 
but the RStudio "New Project | Version Control | Git" menu isn't so 
forgiving, presumably because git isn't.

On 31/01/2021 1:35 p.m., Jeff Newmiller wrote:
 > Technically, git does not record file history... it records commit
 > history, and reconstructs file history as needed. The contents of a
 > file identify it uniquely among all commits ever made regardless of
 > which directory it was ever in. IMO this is the main reason why git 
is > superior and I put up wth the inconsistent command line interface
 > because of it.
 >
 > git mv is very simple [1].

Given how long I've been using svn it may take me a while to recognize 
the benefits of this mindset, but I'll give it a try.

On 31/01/2021 1:21 p.m., Joshua Ulrich wrote:
 > I've moved history and issues from R-Forge to GitHub for half a dozen
 > R packages. I might be able to do this rgl. At minimum, I could help
 > you do it.

Thanks for the offer (and the more detailed one offline, where you 
recommend cloning the repository rather than forking it).  Just for 
future reference, could you tell me the benefits of cloning over forking?

Duncan Murdoch


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Sun Jan 31 21:20:52 2021
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Sun, 31 Jan 2021 14:20:52 -0600
Subject: [R-pkg-devel] Advice on R-forge to Github migration
In-Reply-To: <7bcd28bf-bffd-89ff-1b7b-1aa3e48d772e@gmail.com>
References: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
 <b8b71374-3565-e7e4-2fd6-4cf73bb227c0@gmail.com>
 <7bcd28bf-bffd-89ff-1b7b-1aa3e48d772e@gmail.com>
Message-ID: <CAPPM_gS7gaM5Nt3wKdN_wFJsWjfBsvQs5L8j+MbF7_jynKxecw@mail.gmail.com>

On Sun, Jan 31, 2021 at 2:17 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> Thanks to everyone who commented.  A few replies inline:
>
<snip>
> On 31/01/2021 1:21 p.m., Joshua Ulrich wrote:
>  > I've moved history and issues from R-Forge to GitHub for half a dozen
>  > R packages. I might be able to do this rgl. At minimum, I could help
>  > you do it.
>
> Thanks for the offer (and the more detailed one offline, where you
> recommend cloning the repository rather than forking it).  Just for
> future reference, could you tell me the benefits of cloning over forking?
>
We can discuss more offline, but at a high level:
  - if you fork my repo, mine is the head of the network graph
  - if you clone it and then push it to a repo in your account, yours
is the head of the network graph

Basically, I don't want your repo to be a fork of mine. That would
confuse users about where issues/PRs should be.  I plan to delete my
repo once you've loaded the copy to your account.

> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 31 21:36:10 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 31 Jan 2021 15:36:10 -0500
Subject: [R-pkg-devel] Advice on R-forge to Github migration
In-Reply-To: <CAPPM_gS7gaM5Nt3wKdN_wFJsWjfBsvQs5L8j+MbF7_jynKxecw@mail.gmail.com>
References: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
 <b8b71374-3565-e7e4-2fd6-4cf73bb227c0@gmail.com>
 <7bcd28bf-bffd-89ff-1b7b-1aa3e48d772e@gmail.com>
 <CAPPM_gS7gaM5Nt3wKdN_wFJsWjfBsvQs5L8j+MbF7_jynKxecw@mail.gmail.com>
Message-ID: <ee17bb2c-c296-f924-0415-efcc8d1b07e9@gmail.com>

On 31/01/2021 3:20 p.m., Joshua Ulrich wrote:
> On Sun, Jan 31, 2021 at 2:17 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> Thanks to everyone who commented.  A few replies inline:
>>
> <snip>
>> On 31/01/2021 1:21 p.m., Joshua Ulrich wrote:
>>   > I've moved history and issues from R-Forge to GitHub for half a dozen
>>   > R packages. I might be able to do this rgl. At minimum, I could help
>>   > you do it.
>>
>> Thanks for the offer (and the more detailed one offline, where you
>> recommend cloning the repository rather than forking it).  Just for
>> future reference, could you tell me the benefits of cloning over forking?
>>
> We can discuss more offline, but at a high level:
>    - if you fork my repo, mine is the head of the network graph
>    - if you clone it and then push it to a repo in your account, yours
> is the head of the network graph
> 
> Basically, I don't want your repo to be a fork of mine. That would
> confuse users about where issues/PRs should be.  I plan to delete my
> repo once you've loaded the copy to your account.

Got it, thanks.

Duncan


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Feb  1 09:21:32 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 1 Feb 2021 09:21:32 +0100
Subject: [R-pkg-devel] Testing on old R versions
In-Reply-To: <a03dfc1d-7b75-cdae-9851-15672149c15b@gmail.com>
References: <ded3841e-686a-ad53-585f-6e3c26c11acf@gmail.com>
 <CAOCv4hj5pSbF-++a5b+nOkrMTmoA-GSsVygn6=yhvq5MvjKQ5g@mail.gmail.com>
 <24594.59783.128493.96987@rob.eddelbuettel.com>
 <b73b5e11-597e-051c-73e6-ee042e2e41fa@gmail.com>
 <24595.15032.177166.376272@rob.eddelbuettel.com>
 <CAFDcVCQDdpYHzOtETuK_mQJFKhsVFuxtRto_jsaEbyz1YYVVzg@mail.gmail.com>
 <CABdHhvHXfiD_DMcLS-iJhdO+e_1719oQ-JM9yDaYdhX=h7se=A@mail.gmail.com>
 <b8eb73b3-5839-0390-0a8e-de3ef43bb19e@gmail.com>
 <CABtg=KmuWuTGMZrQ=NFrVeiX19WgW3X58DaYUH=b4Z+jEAuzCQ@mail.gmail.com>
 <cd865011-24ae-65c2-a6da-54d4254a35a4@gmail.com>
 <a03dfc1d-7b75-cdae-9851-15672149c15b@gmail.com>
Message-ID: <CABtg=K=wWx3A0Vp4QA50kmogUEXp4_gpJdy8xVw-B6u5UmH5YA@mail.gmail.com>

On Sun, Jan 31, 2021 at 6:52 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 31/01/2021 12:35 p.m., Duncan Murdoch wrote:
> > On 31/01/2021 10:57 a.m., G?bor Cs?rdi wrote:
> >> Do you actually experience any problems, if you don't treat this case specially?
> >
> > Yes, what was happening was that remotes::install_deps skipped
> > installing rgl from CRAN because the local copy had a later version
> > number.  Sorry, I deleted most of the runs that had failures in them, so
> > I can't quote the exact message about this.
>
> I just re-ran a version of the old one.  I'm caching package builds, so
> now I get alphashape3d anyway, but in case you're interested, the
> message was:
>
>   Skipping 1 packages ahead of CRAN: rgl

Right. This is probably because in some iteration you installed the
local (dev) rgl into the library that is cached.
It should still be harmless, because `R CMD check` uses the (new)
local package for the check. The old cached version is only used for
installing alphashape3d and other suggested packages that import or
depend on rgl.

In any case, `remotes::install_local()` seems to be the safest way to
go about this currently.

Gabor


> Duncan Murdoch
>
> >
> >>
> >> AFAIR, in most cases this is not a problem in practice. remotes might
> >> install the CRAN version of rgl as the dependency of alphashape3d, but
> >> `R CMD check` will install and use the local copy of the rgl package
> >> for the check, anyway, so that does not matter much.
> >>
> >> More precisely, it would only matter if alphashape3d had some install
> >> time dependency on rgl, because at install time, it will use the CRAN
> >> rgl version. But this is pretty rare I think.
> >>
> >> If you still want to fix this, you can replace
> >> `remotes::install_deps()` with `remotes::install_local()` and then
> >> remotes will install the local package as well, not only its
> >> dependencies.
> >
> > I'll try that.
> >
> > Duncan
> >
> >>
> >> Gabor
> >>
> >> On Sun, Jan 31, 2021 at 11:32 AM Duncan Murdoch
> >> <murdoch.duncan at gmail.com> wrote:
> >>>
> >>> I am trying out a modified version of the tidyverse actions, and it does
> >>> seem to be going well.  Just one question:
> >>>
> >>> rgl has a soft dependency on alphashape3d, and alphashape3d has a hard
> >>> dependency on rgl.  This means that I need to install in the order
> >>>
> >>>      rgl hard dependencies
> >>>      rgl
> >>>      rgl soft dependencies
> >>>
> >>> Currently I'm using this code to do that:
> >>>
> >>>      # First install rgl with minimal deps then the rest
> >>>      devtools::install()
> >>>      remotes::install_deps(dependencies = TRUE)
> >>>
> >>> but devtools seems unnecessarily heavy for this.  Does remotes have a
> >>> way to specify the install in the right order?
> >>>
> >>> Duncan Murdoch
> >>>
> >>>
> >>> On 29/01/2021 2:26 p.m., Hadley Wickham wrote:
> >>>> On Thu, Jan 28, 2021 at 6:27 PM Henrik Bengtsson
> >>>> <henrik.bengtsson at gmail.com> wrote:
> >>>>>
> >>>>> Hi,
> >>>>>
> >>>>> you're probably already aware of it, but 'rgl' depends on 'magrittr'
> >>>>> which depends on 'rlang', and the latter requires R (>= 3.3.0).
> >>>>
> >>>> For the reference, we support R-release, R-devel, and the last four
> >>>> versions of R:
> >>>> https://www.tidyverse.org/blog/2019/04/r-version-support/.
> >>>>
> >>>> We automatically run checks on all these R versions using GitHub
> >>>> actions. You can use the same config as us by running
> >>>> usethis::use_tidy_github_actions(). If you're already using GitHub,
> >>>> I'm pretty confident that this is the fastest/easiest way to check
> >>>> with older versions of R.
> >>>>
> >>>> Hadley
> >>>>
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Mon Feb  1 11:09:47 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Mon, 1 Feb 2021 11:09:47 +0100
Subject: [R-pkg-devel] Cache in vignette not working when checking a package
Message-ID: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>

Dear all,

I have an issue when checking a package that includes a vignette using
cache = TRUE in some chunks. The vignette is generated with knit from an
Rnw document. The issue is that cache works when building the vignette
locally but it seems not working when checking the package.

I have proceeded as follows:

1) R CMD build collin --resave-data
      * creating vignettes...  --->  4 minutes
2) R CMD check --as-cran collin_0.0.1.tar.gz
      * checking re-building of vignette outputs ...  --->  4 minutes
3) I install "collin_0.0.1.tar.gz" in my laptop
4) In an R session, I build the vignette "collin/vignettes/collin.Rnw". It
takes 4.7 minutes and the "cache" folder is created in "collin/vignettes/"
5) I remove all aux files in "collin/vignettes/" (now, the only extra item
is the "cache" folder)
6) I re-build the vignette in the R session and now it takes only 8
seconds, so the cache is working
7) Repeat 5)
8) Repeat 1) and 2) but it still takes 4 minutes so it seems like R CMD
build and R CMD check are ignoring the "cache" folder in
"collin/vignettes/".

I would be very grateful if you could provide some advice on how to fix the
problem.

Best,

Jose Barrera
Statistician, Associate Lecturer

ISGlobal
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
www.isglobal.org

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Mon Feb  1 13:02:23 2021
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Mon, 1 Feb 2021 13:02:23 +0100
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
Message-ID: <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>

Dear Jose,

I store the results of CPU intensive chunks in the package. Have a look at
https://github.com/ropensci/git2rdata/blob/master/vignettes/efficiency.Rmd.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op ma 1 feb. 2021 om 12:49 schreef Jose Barrera <jose.barrera at isglobal.org>:

> Dear all,
>
> I have an issue when checking a package that includes a vignette using
> cache = TRUE in some chunks. The vignette is generated with knit from an
> Rnw document. The issue is that cache works when building the vignette
> locally but it seems not working when checking the package.
>
> I have proceeded as follows:
>
> 1) R CMD build collin --resave-data
>       * creating vignettes...  --->  4 minutes
> 2) R CMD check --as-cran collin_0.0.1.tar.gz
>       * checking re-building of vignette outputs ...  --->  4 minutes
> 3) I install "collin_0.0.1.tar.gz" in my laptop
> 4) In an R session, I build the vignette "collin/vignettes/collin.Rnw". It
> takes 4.7 minutes and the "cache" folder is created in "collin/vignettes/"
> 5) I remove all aux files in "collin/vignettes/" (now, the only extra item
> is the "cache" folder)
> 6) I re-build the vignette in the R session and now it takes only 8
> seconds, so the cache is working
> 7) Repeat 5)
> 8) Repeat 1) and 2) but it still takes 4 minutes so it seems like R CMD
> build and R CMD check are ignoring the "cache" folder in
> "collin/vignettes/".
>
> I would be very grateful if you could provide some advice on how to fix the
> problem.
>
> Best,
>
> Jose Barrera
> Statistician, Associate Lecturer
>
> ISGlobal
> Barcelona Institute for Global Health - Campus MAR
> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>
> Doctor Aiguader, 88
> 08003 Barcelona, Spain
> Tel. +34 93 2147383
> jose.barrera at isglobal.org
> www.isglobal.org
>
> --
>
>
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional privilege.
> If
> you are not the intended recipient you are hereby notified that any
> dissemination, copy or disclosure of this communication is strictly
> prohibited
> by law. If this message has been received in error, please
> immediately notify
> us via e-mail and delete it.
>
>
>
> DATA PROTECTION. We
> inform you that your personal data, including your
> e-mail address and data
> included in your email correspondence, are included in
> the ISGlobal
> Foundation files. Your personal data will be used for the purpose
> of
> contacting you and sending information on the activities of the above
> foundations. You can exercise your rights of access, rectification,
> cancellation and opposition by contacting the following address:
> lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
> Privacy Policy at
> www.isglobal.org <http://www.isglobal.org/>.
>
>
>
>
> -----------------------------------------------------------------------------------------------------------------------------
>
> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
> su
> destinatario y puede contener informaci?n confidencial, por lo que la
> utilizaci?n,
> divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> legislaci?n
> vigente. Si ha recibido este mensaje por error, le rogamos lo
> comunique
> inmediatamente por esta misma v?a y proceda a su destrucci?n.
>
>
>
>
>
>
>
>
>
> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> titularidad
> de la Fundaci?n ISGlobal  para cualquier
> finalidades de
> contacto, relaci?n institucional y/o env?o de informaci?n sobre
> sus
> actividades. Los datos que usted nos pueda facilitar contestando este
> correo quedar?n incorporados en los correspondientes ficheros, autorizando
> el
> uso de su direcci?n de e-mail para las finalidades citadas. Puede
> ejercer los
> derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
> dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica
> de
> privacidad
> en www.isglobal.org <http://www.isglobal.org/>.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Mon Feb  1 19:01:33 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Mon, 1 Feb 2021 19:01:33 +0100
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
 <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
Message-ID: <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>

Dear Thierry,

Thanks for your advice. However, I would like to understand why when I
build the vignette to get the pdf from the Rnw, it takes just 8 seconds
once the "cache" folder has been created instead of the initial 4 minutes,
but this time reduction does not happen when checking the package.

Best,

Jose Barrera
Statistician, Associate Lecturer

*IS**Global*
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
<https://www.linkedin.com/in/josebarrera>
Personal website: sites.google.com/view/josebarrera
www.isglobal.org

This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly
prohibited by law. If this message has been received in error, please
immediately notify us via e-mail and delete it.

DATA PROTECTION. We inform you that your personal data, including your
e-mail address and data included in your email correspondence, are included
in the ISGlobal Foundation filing system. Your personal data will be used
for the purpose of contacting you and sending information on the activities
of the above foundations. You can exercise your rights to  access to
personal data, rectification, erasure, restriction of processing, data
portability and object by contacting the following address: *lopd at isglobal.org
<lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
<http://www.isglobal.org/>*.


-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.

PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando
el uso de su direcci?n de e-mail para las finalidades citadas. Puede
ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
<lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
<http://www.isglobal.org/>*.


El lun, 1 feb 2021 a las 13:02, Thierry Onkelinx (<thierry.onkelinx at inbo.be>)
escribi?:

> Dear Jose,
>
> I store the results of CPU intensive chunks in the package. Have a look at
> https://github.com/ropensci/git2rdata/blob/master/vignettes/efficiency.Rmd
> .
>
> Best regards,
>
> ir. Thierry Onkelinx
> Statisticus / Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
>
>
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
>
> ///////////////////////////////////////////////////////////////////////////////////////////
>
> <https://www.inbo.be>
>
>
> Op ma 1 feb. 2021 om 12:49 schreef Jose Barrera <jose.barrera at isglobal.org
> >:
>
>> Dear all,
>>
>> I have an issue when checking a package that includes a vignette using
>> cache = TRUE in some chunks. The vignette is generated with knit from an
>> Rnw document. The issue is that cache works when building the vignette
>> locally but it seems not working when checking the package.
>>
>> I have proceeded as follows:
>>
>> 1) R CMD build collin --resave-data
>>       * creating vignettes...  --->  4 minutes
>> 2) R CMD check --as-cran collin_0.0.1.tar.gz
>>       * checking re-building of vignette outputs ...  --->  4 minutes
>> 3) I install "collin_0.0.1.tar.gz" in my laptop
>> 4) In an R session, I build the vignette "collin/vignettes/collin.Rnw". It
>> takes 4.7 minutes and the "cache" folder is created in "collin/vignettes/"
>> 5) I remove all aux files in "collin/vignettes/" (now, the only extra item
>> is the "cache" folder)
>> 6) I re-build the vignette in the R session and now it takes only 8
>> seconds, so the cache is working
>> 7) Repeat 5)
>> 8) Repeat 1) and 2) but it still takes 4 minutes so it seems like R CMD
>> build and R CMD check are ignoring the "cache" folder in
>> "collin/vignettes/".
>>
>> I would be very grateful if you could provide some advice on how to fix
>> the
>> problem.
>>
>> Best,
>>
>> Jose Barrera
>> Statistician, Associate Lecturer
>>
>> ISGlobal
>> Barcelona Institute for Global Health - Campus MAR
>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>
>> Doctor Aiguader, 88
>> 08003 Barcelona, Spain
>> Tel. +34 93 2147383
>> jose.barrera at isglobal.org
>> www.isglobal.org
>>
>> --
>>
>>
>> This message is intended exclusively for its addressee and may contain
>> information that is CONFIDENTIAL and protected by professional privilege.
>> If
>> you are not the intended recipient you are hereby notified that any
>> dissemination, copy or disclosure of this communication is strictly
>> prohibited
>> by law. If this message has been received in error, please
>> immediately notify
>> us via e-mail and delete it.
>>
>>
>>
>> DATA PROTECTION. We
>> inform you that your personal data, including your
>> e-mail address and data
>> included in your email correspondence, are included in
>> the ISGlobal
>> Foundation files. Your personal data will be used for the purpose
>> of
>> contacting you and sending information on the activities of the above
>> foundations. You can exercise your rights of access, rectification,
>> cancellation and opposition by contacting the following address:
>> lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
>> Privacy Policy at
>> www.isglobal.org <http://www.isglobal.org/>.
>>
>>
>>
>>
>> -----------------------------------------------------------------------------------------------------------------------------
>>
>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>> su
>> destinatario y puede contener informaci?n confidencial, por lo que la
>> utilizaci?n,
>> divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>> legislaci?n
>> vigente. Si ha recibido este mensaje por error, le rogamos lo
>> comunique
>> inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>> titularidad
>> de la Fundaci?n ISGlobal  para cualquier
>> finalidades de
>> contacto, relaci?n institucional y/o env?o de informaci?n sobre
>> sus
>> actividades. Los datos que usted nos pueda facilitar contestando este
>> correo quedar?n incorporados en los correspondientes ficheros,
>> autorizando
>> el
>> uso de su direcci?n de e-mail para las finalidades citadas. Puede
>> ejercer los
>> derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>> dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica
>> de
>> privacidad
>> en www.isglobal.org <http://www.isglobal.org/>.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Mon Feb  1 19:41:57 2021
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Mon, 1 Feb 2021 19:41:57 +0100
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
 <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
 <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>
Message-ID: <CAJuCY5zOQAEODK30ms+P6me8fNT6YO7ffJdb5kCJuCPrAWU-0g@mail.gmail.com>

Probably because the cache is not installed into the package. I'd check the
tar.gz file to see if the cache is present.

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op ma 1 feb. 2021 om 19:01 schreef Jose Barrera <jose.barrera at isglobal.org>:

> Dear Thierry,
>
> Thanks for your advice. However, I would like to understand why when I
> build the vignette to get the pdf from the Rnw, it takes just 8 seconds
> once the "cache" folder has been created instead of the initial 4 minutes,
> but this time reduction does not happen when checking the package.
>
> Best,
>
> Jose Barrera
> Statistician, Associate Lecturer
>
> *IS**Global*
> Barcelona Institute for Global Health - Campus MAR
> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>
> Doctor Aiguader, 88
> 08003 Barcelona, Spain
> Tel. +34 93 2147383
> jose.barrera at isglobal.org
> <https://www.linkedin.com/in/josebarrera>
> Personal website: sites.google.com/view/josebarrera
> www.isglobal.org
>
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional privilege.
> If you are not the intended recipient you are hereby notified that any
> dissemination, copy or disclosure of this communication is strictly
> prohibited by law. If this message has been received in error, please
> immediately notify us via e-mail and delete it.
>
> DATA PROTECTION. We inform you that your personal data, including your
> e-mail address and data included in your email correspondence, are included
> in the ISGlobal Foundation filing system. Your personal data will be used
> for the purpose of contacting you and sending information on the activities
> of the above foundations. You can exercise your rights to  access to
> personal data, rectification, erasure, restriction of processing, data
> portability and object by contacting the following address: *lopd at isglobal.org
> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> <http://www.isglobal.org/>*.
>
>
> -----------------------------------------------------------------------------------------------------------------------------
>
> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
> destinatario y puede contener informaci?n confidencial, por lo que la
> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>
> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> actividades. Los datos que usted nos pueda facilitar contestando este
> correo quedar?n incorporados en los correspondientes ficheros, autorizando
> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> <http://www.isglobal.org/>*.
>
>
> El lun, 1 feb 2021 a las 13:02, Thierry Onkelinx (<
> thierry.onkelinx at inbo.be>) escribi?:
>
>> Dear Jose,
>>
>> I store the results of CPU intensive chunks in the package. Have a look
>> at
>> https://github.com/ropensci/git2rdata/blob/master/vignettes/efficiency.Rmd
>> .
>>
>> Best regards,
>>
>> ir. Thierry Onkelinx
>> Statisticus / Statistician
>>
>> Vlaamse Overheid / Government of Flanders
>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>> AND FOREST
>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>> thierry.onkelinx at inbo.be
>> Havenlaan 88 bus 73, 1000 Brussel
>> www.inbo.be
>>
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>> To call in the statistician after the experiment is done may be no more
>> than asking him to perform a post-mortem examination: he may be able to say
>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>> The plural of anecdote is not data. ~ Roger Brinner
>> The combination of some data and an aching desire for an answer does not
>> ensure that a reasonable answer can be extracted from a given body of data.
>> ~ John Tukey
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>>
>> <https://www.inbo.be>
>>
>>
>> Op ma 1 feb. 2021 om 12:49 schreef Jose Barrera <
>> jose.barrera at isglobal.org>:
>>
>>> Dear all,
>>>
>>> I have an issue when checking a package that includes a vignette using
>>> cache = TRUE in some chunks. The vignette is generated with knit from an
>>> Rnw document. The issue is that cache works when building the vignette
>>> locally but it seems not working when checking the package.
>>>
>>> I have proceeded as follows:
>>>
>>> 1) R CMD build collin --resave-data
>>>       * creating vignettes...  --->  4 minutes
>>> 2) R CMD check --as-cran collin_0.0.1.tar.gz
>>>       * checking re-building of vignette outputs ...  --->  4 minutes
>>> 3) I install "collin_0.0.1.tar.gz" in my laptop
>>> 4) In an R session, I build the vignette "collin/vignettes/collin.Rnw".
>>> It
>>> takes 4.7 minutes and the "cache" folder is created in
>>> "collin/vignettes/"
>>> 5) I remove all aux files in "collin/vignettes/" (now, the only extra
>>> item
>>> is the "cache" folder)
>>> 6) I re-build the vignette in the R session and now it takes only 8
>>> seconds, so the cache is working
>>> 7) Repeat 5)
>>> 8) Repeat 1) and 2) but it still takes 4 minutes so it seems like R CMD
>>> build and R CMD check are ignoring the "cache" folder in
>>> "collin/vignettes/".
>>>
>>> I would be very grateful if you could provide some advice on how to fix
>>> the
>>> problem.
>>>
>>> Best,
>>>
>>> Jose Barrera
>>> Statistician, Associate Lecturer
>>>
>>> ISGlobal
>>> Barcelona Institute for Global Health - Campus MAR
>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>
>>> Doctor Aiguader, 88
>>> 08003 Barcelona, Spain
>>> Tel. +34 93 2147383
>>> jose.barrera at isglobal.org
>>> www.isglobal.org
>>>
>>> --
>>>
>>>
>>> This message is intended exclusively for its addressee and may contain
>>> information that is CONFIDENTIAL and protected by professional
>>> privilege.
>>> If
>>> you are not the intended recipient you are hereby notified that any
>>> dissemination, copy or disclosure of this communication is strictly
>>> prohibited
>>> by law. If this message has been received in error, please
>>> immediately notify
>>> us via e-mail and delete it.
>>>
>>>
>>>
>>> DATA PROTECTION. We
>>> inform you that your personal data, including your
>>> e-mail address and data
>>> included in your email correspondence, are included in
>>> the ISGlobal
>>> Foundation files. Your personal data will be used for the purpose
>>> of
>>> contacting you and sending information on the activities of the above
>>> foundations. You can exercise your rights of access, rectification,
>>> cancellation and opposition by contacting the following address:
>>> lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
>>> Privacy Policy at
>>> www.isglobal.org <http://www.isglobal.org/>.
>>>
>>>
>>>
>>>
>>> -----------------------------------------------------------------------------------------------------------------------------
>>>
>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>> su
>>> destinatario y puede contener informaci?n confidencial, por lo que la
>>> utilizaci?n,
>>> divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>> legislaci?n
>>> vigente. Si ha recibido este mensaje por error, le rogamos lo
>>> comunique
>>> inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>> titularidad
>>> de la Fundaci?n ISGlobal  para cualquier
>>> finalidades de
>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre
>>> sus
>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>> correo quedar?n incorporados en los correspondientes ficheros,
>>> autorizando
>>> el
>>> uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>> ejercer los
>>> derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>>> dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *.
>>> Pol?tica de
>>> privacidad
>>> en www.isglobal.org <http://www.isglobal.org/>.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional privilege.
> If you are not the intended recipient you are hereby notified that any
> dissemination, copy or disclosure of this communication is strictly
> prohibited by law. If this message has been received in error, please
> immediately notify us via e-mail and delete it.
>
> DATA PROTECTION. We inform you that your personal data, including your
> e-mail address and data included in your email correspondence, are included
> in the ISGlobal Foundation files. Your personal data will be used for the
> purpose of contacting you and sending information on the activities of the
> above foundations. You can exercise your rights of access, rectification,
> cancellation and opposition by contacting the following address:
> lopd at isglobal.org. ISGlobal Privacy Policy at www.isglobal.org.
>
>
> -----------------------------------------------------------------------------------------------------------------------------
>
> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
> destinatario y puede contener informaci?n confidencial, por lo que la
> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>
> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> actividades. Los datos que usted nos pueda facilitar contestando este
> correo quedar?n incorporados en los correspondientes ficheros, autorizando
> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> ejercer los derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
> dirigi?ndose a lopd at isglobal.org . Pol?tica de privacidad en
> www.isglobal.org.
>

	[[alternative HTML version deleted]]


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Mon Feb  1 19:51:47 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Mon, 1 Feb 2021 19:51:47 +0100
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <CAJuCY5zOQAEODK30ms+P6me8fNT6YO7ffJdb5kCJuCPrAWU-0g@mail.gmail.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
 <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
 <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>
 <CAJuCY5zOQAEODK30ms+P6me8fNT6YO7ffJdb5kCJuCPrAWU-0g@mail.gmail.com>
Message-ID: <CACr7k5KLMFjbYmj+KrnyYVXKFjOV11GkdYepzTq53NoDCfe69g@mail.gmail.com>

Indeed, the "cache" folder is not present in the tar.gz file. Could you
please help me on how to fix "the cache is not installed into the package"?

Thanks,

Jose Barrera
Statistician, Associate Lecturer

*IS**Global*
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
<https://www.linkedin.com/in/josebarrera>
Personal website: sites.google.com/view/josebarrera
www.isglobal.org

This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly
prohibited by law. If this message has been received in error, please
immediately notify us via e-mail and delete it.

DATA PROTECTION. We inform you that your personal data, including your
e-mail address and data included in your email correspondence, are included
in the ISGlobal Foundation filing system. Your personal data will be used
for the purpose of contacting you and sending information on the activities
of the above foundations. You can exercise your rights to  access to
personal data, rectification, erasure, restriction of processing, data
portability and object by contacting the following address: *lopd at isglobal.org
<lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
<http://www.isglobal.org/>*.


-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.

PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando
el uso de su direcci?n de e-mail para las finalidades citadas. Puede
ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
<lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
<http://www.isglobal.org/>*.


El lun, 1 feb 2021 a las 19:42, Thierry Onkelinx (<thierry.onkelinx at inbo.be>)
escribi?:

> Probably because the cache is not installed into the package. I'd check
> the tar.gz file to see if the cache is present.
>
> ir. Thierry Onkelinx
> Statisticus / Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
>
>
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
>
> ///////////////////////////////////////////////////////////////////////////////////////////
>
> <https://www.inbo.be>
>
>
> Op ma 1 feb. 2021 om 19:01 schreef Jose Barrera <jose.barrera at isglobal.org
> >:
>
>> Dear Thierry,
>>
>> Thanks for your advice. However, I would like to understand why when I
>> build the vignette to get the pdf from the Rnw, it takes just 8 seconds
>> once the "cache" folder has been created instead of the initial 4 minutes,
>> but this time reduction does not happen when checking the package.
>>
>> Best,
>>
>> Jose Barrera
>> Statistician, Associate Lecturer
>>
>> *IS**Global*
>> Barcelona Institute for Global Health - Campus MAR
>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>
>> Doctor Aiguader, 88
>> 08003 Barcelona, Spain
>> Tel. +34 93 2147383
>> jose.barrera at isglobal.org
>> <https://www.linkedin.com/in/josebarrera>
>> Personal website: sites.google.com/view/josebarrera
>> www.isglobal.org
>>
>> This message is intended exclusively for its addressee and may contain
>> information that is CONFIDENTIAL and protected by professional privilege.
>> If you are not the intended recipient you are hereby notified that any
>> dissemination, copy or disclosure of this communication is strictly
>> prohibited by law. If this message has been received in error, please
>> immediately notify us via e-mail and delete it.
>>
>> DATA PROTECTION. We inform you that your personal data, including your
>> e-mail address and data included in your email correspondence, are included
>> in the ISGlobal Foundation filing system. Your personal data will be
>> used for the purpose of contacting you and sending information on the
>> activities of the above foundations. You can exercise your rights to
>> access to personal data, rectification, erasure, restriction of processing,
>> data portability and object by contacting the following address: *lopd at isglobal.org
>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
>> <http://www.isglobal.org/>*.
>>
>>
>> -----------------------------------------------------------------------------------------------------------------------------
>>
>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>> su destinatario y puede contener informaci?n confidencial, por lo que la
>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>
>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>> actividades. Los datos que usted nos pueda facilitar contestando este
>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
>> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
>> <http://www.isglobal.org/>*.
>>
>>
>> El lun, 1 feb 2021 a las 13:02, Thierry Onkelinx (<
>> thierry.onkelinx at inbo.be>) escribi?:
>>
>>> Dear Jose,
>>>
>>> I store the results of CPU intensive chunks in the package. Have a look
>>> at
>>> https://github.com/ropensci/git2rdata/blob/master/vignettes/efficiency.Rmd
>>> .
>>>
>>> Best regards,
>>>
>>> ir. Thierry Onkelinx
>>> Statisticus / Statistician
>>>
>>> Vlaamse Overheid / Government of Flanders
>>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>>> AND FOREST
>>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>>> thierry.onkelinx at inbo.be
>>> Havenlaan 88 bus 73, 1000 Brussel
>>> www.inbo.be
>>>
>>>
>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>> To call in the statistician after the experiment is done may be no more
>>> than asking him to perform a post-mortem examination: he may be able to say
>>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>>> The plural of anecdote is not data. ~ Roger Brinner
>>> The combination of some data and an aching desire for an answer does not
>>> ensure that a reasonable answer can be extracted from a given body of data.
>>> ~ John Tukey
>>>
>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>>
>>> <https://www.inbo.be>
>>>
>>>
>>> Op ma 1 feb. 2021 om 12:49 schreef Jose Barrera <
>>> jose.barrera at isglobal.org>:
>>>
>>>> Dear all,
>>>>
>>>> I have an issue when checking a package that includes a vignette using
>>>> cache = TRUE in some chunks. The vignette is generated with knit from an
>>>> Rnw document. The issue is that cache works when building the vignette
>>>> locally but it seems not working when checking the package.
>>>>
>>>> I have proceeded as follows:
>>>>
>>>> 1) R CMD build collin --resave-data
>>>>       * creating vignettes...  --->  4 minutes
>>>> 2) R CMD check --as-cran collin_0.0.1.tar.gz
>>>>       * checking re-building of vignette outputs ...  --->  4 minutes
>>>> 3) I install "collin_0.0.1.tar.gz" in my laptop
>>>> 4) In an R session, I build the vignette "collin/vignettes/collin.Rnw".
>>>> It
>>>> takes 4.7 minutes and the "cache" folder is created in
>>>> "collin/vignettes/"
>>>> 5) I remove all aux files in "collin/vignettes/" (now, the only extra
>>>> item
>>>> is the "cache" folder)
>>>> 6) I re-build the vignette in the R session and now it takes only 8
>>>> seconds, so the cache is working
>>>> 7) Repeat 5)
>>>> 8) Repeat 1) and 2) but it still takes 4 minutes so it seems like R CMD
>>>> build and R CMD check are ignoring the "cache" folder in
>>>> "collin/vignettes/".
>>>>
>>>> I would be very grateful if you could provide some advice on how to fix
>>>> the
>>>> problem.
>>>>
>>>> Best,
>>>>
>>>> Jose Barrera
>>>> Statistician, Associate Lecturer
>>>>
>>>> ISGlobal
>>>> Barcelona Institute for Global Health - Campus MAR
>>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>>
>>>> Doctor Aiguader, 88
>>>> 08003 Barcelona, Spain
>>>> Tel. +34 93 2147383
>>>> jose.barrera at isglobal.org
>>>> www.isglobal.org
>>>>
>>>> --
>>>>
>>>>
>>>> This message is intended exclusively for its addressee and may contain
>>>> information that is CONFIDENTIAL and protected by professional
>>>> privilege.
>>>> If
>>>> you are not the intended recipient you are hereby notified that any
>>>> dissemination, copy or disclosure of this communication is strictly
>>>> prohibited
>>>> by law. If this message has been received in error, please
>>>> immediately notify
>>>> us via e-mail and delete it.
>>>>
>>>>
>>>>
>>>> DATA PROTECTION. We
>>>> inform you that your personal data, including your
>>>> e-mail address and data
>>>> included in your email correspondence, are included in
>>>> the ISGlobal
>>>> Foundation files. Your personal data will be used for the purpose
>>>> of
>>>> contacting you and sending information on the activities of the above
>>>> foundations. You can exercise your rights of access, rectification,
>>>> cancellation and opposition by contacting the following address:
>>>> lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
>>>> Privacy Policy at
>>>> www.isglobal.org <http://www.isglobal.org/>.
>>>>
>>>>
>>>>
>>>>
>>>> -----------------------------------------------------------------------------------------------------------------------------
>>>>
>>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>>> su
>>>> destinatario y puede contener informaci?n confidencial, por lo que la
>>>> utilizaci?n,
>>>> divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>>> legislaci?n
>>>> vigente. Si ha recibido este mensaje por error, le rogamos lo
>>>> comunique
>>>> inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>>> titularidad
>>>> de la Fundaci?n ISGlobal  para cualquier
>>>> finalidades de
>>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre
>>>> sus
>>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>>> correo quedar?n incorporados en los correspondientes ficheros,
>>>> autorizando
>>>> el
>>>> uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>>> ejercer los
>>>> derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>>>> dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *.
>>>> Pol?tica de
>>>> privacidad
>>>> en www.isglobal.org <http://www.isglobal.org/>.
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>> This message is intended exclusively for its addressee and may contain
>> information that is CONFIDENTIAL and protected by professional privilege.
>> If you are not the intended recipient you are hereby notified that any
>> dissemination, copy or disclosure of this communication is strictly
>> prohibited by law. If this message has been received in error, please
>> immediately notify us via e-mail and delete it.
>>
>> DATA PROTECTION. We inform you that your personal data, including your
>> e-mail address and data included in your email correspondence, are included
>> in the ISGlobal Foundation files. Your personal data will be used for the
>> purpose of contacting you and sending information on the activities of the
>> above foundations. You can exercise your rights of access, rectification,
>> cancellation and opposition by contacting the following address:
>> lopd at isglobal.org. ISGlobal Privacy Policy at www.isglobal.org.
>>
>>
>> -----------------------------------------------------------------------------------------------------------------------------
>>
>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>> su destinatario y puede contener informaci?n confidencial, por lo que la
>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>
>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>> actividades. Los datos que usted nos pueda facilitar contestando este
>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>> ejercer los derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>> dirigi?ndose a lopd at isglobal.org . Pol?tica de privacidad en
>> www.isglobal.org.
>>
>

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Mon Feb  1 20:09:31 2021
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Mon, 1 Feb 2021 20:09:31 +0100
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <CACr7k5KLMFjbYmj+KrnyYVXKFjOV11GkdYepzTq53NoDCfe69g@mail.gmail.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
 <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
 <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>
 <CAJuCY5zOQAEODK30ms+P6me8fNT6YO7ffJdb5kCJuCPrAWU-0g@mail.gmail.com>
 <CACr7k5KLMFjbYmj+KrnyYVXKFjOV11GkdYepzTq53NoDCfe69g@mail.gmail.com>
Message-ID: <CAJuCY5xnfiKCDMLujwq=TwvLY=XGEHCEYBSJZ7h93XKO1zcBoA@mail.gmail.com>

That will be hard to do without your package. Note that I've suggested a
work around in my first reply.

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op ma 1 feb. 2021 om 19:51 schreef Jose Barrera <jose.barrera at isglobal.org>:

> Indeed, the "cache" folder is not present in the tar.gz file. Could you
> please help me on how to fix "the cache is not installed into the package
> "?
>
> Thanks,
>
> Jose Barrera
> Statistician, Associate Lecturer
>
> *IS**Global*
> Barcelona Institute for Global Health - Campus MAR
> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>
> Doctor Aiguader, 88
> 08003 Barcelona, Spain
> Tel. +34 93 2147383
> jose.barrera at isglobal.org
> <https://www.linkedin.com/in/josebarrera>
> Personal website: sites.google.com/view/josebarrera
> www.isglobal.org
>
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional privilege.
> If you are not the intended recipient you are hereby notified that any
> dissemination, copy or disclosure of this communication is strictly
> prohibited by law. If this message has been received in error, please
> immediately notify us via e-mail and delete it.
>
> DATA PROTECTION. We inform you that your personal data, including your
> e-mail address and data included in your email correspondence, are included
> in the ISGlobal Foundation filing system. Your personal data will be used
> for the purpose of contacting you and sending information on the activities
> of the above foundations. You can exercise your rights to  access to
> personal data, rectification, erasure, restriction of processing, data
> portability and object by contacting the following address: *lopd at isglobal.org
> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> <http://www.isglobal.org/>*.
>
>
> -----------------------------------------------------------------------------------------------------------------------------
>
> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
> destinatario y puede contener informaci?n confidencial, por lo que la
> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>
> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> actividades. Los datos que usted nos pueda facilitar contestando este
> correo quedar?n incorporados en los correspondientes ficheros, autorizando
> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> <http://www.isglobal.org/>*.
>
>
> El lun, 1 feb 2021 a las 19:42, Thierry Onkelinx (<
> thierry.onkelinx at inbo.be>) escribi?:
>
>> Probably because the cache is not installed into the package. I'd check
>> the tar.gz file to see if the cache is present.
>>
>> ir. Thierry Onkelinx
>> Statisticus / Statistician
>>
>> Vlaamse Overheid / Government of Flanders
>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>> AND FOREST
>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>> thierry.onkelinx at inbo.be
>> Havenlaan 88 bus 73, 1000 Brussel
>> www.inbo.be
>>
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>> To call in the statistician after the experiment is done may be no more
>> than asking him to perform a post-mortem examination: he may be able to say
>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>> The plural of anecdote is not data. ~ Roger Brinner
>> The combination of some data and an aching desire for an answer does not
>> ensure that a reasonable answer can be extracted from a given body of data.
>> ~ John Tukey
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>>
>> <https://www.inbo.be>
>>
>>
>> Op ma 1 feb. 2021 om 19:01 schreef Jose Barrera <
>> jose.barrera at isglobal.org>:
>>
>>> Dear Thierry,
>>>
>>> Thanks for your advice. However, I would like to understand why when I
>>> build the vignette to get the pdf from the Rnw, it takes just 8 seconds
>>> once the "cache" folder has been created instead of the initial 4 minutes,
>>> but this time reduction does not happen when checking the package.
>>>
>>> Best,
>>>
>>> Jose Barrera
>>> Statistician, Associate Lecturer
>>>
>>> *IS**Global*
>>> Barcelona Institute for Global Health - Campus MAR
>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>
>>> Doctor Aiguader, 88
>>> 08003 Barcelona, Spain
>>> Tel. +34 93 2147383
>>> jose.barrera at isglobal.org
>>> <https://www.linkedin.com/in/josebarrera>
>>> Personal website: sites.google.com/view/josebarrera
>>> www.isglobal.org
>>>
>>> This message is intended exclusively for its addressee and may contain
>>> information that is CONFIDENTIAL and protected by professional privilege.
>>> If you are not the intended recipient you are hereby notified that any
>>> dissemination, copy or disclosure of this communication is strictly
>>> prohibited by law. If this message has been received in error, please
>>> immediately notify us via e-mail and delete it.
>>>
>>> DATA PROTECTION. We inform you that your personal data, including your
>>> e-mail address and data included in your email correspondence, are included
>>> in the ISGlobal Foundation filing system. Your personal data will be
>>> used for the purpose of contacting you and sending information on the
>>> activities of the above foundations. You can exercise your rights to
>>> access to personal data, rectification, erasure, restriction of processing,
>>> data portability and object by contacting the following address: *lopd at isglobal.org
>>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
>>> <http://www.isglobal.org/>*.
>>>
>>>
>>> -----------------------------------------------------------------------------------------------------------------------------
>>>
>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>> su destinatario y puede contener informaci?n confidencial, por lo que la
>>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>
>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
>>> del tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
>>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
>>> <http://www.isglobal.org/>*.
>>>
>>>
>>> El lun, 1 feb 2021 a las 13:02, Thierry Onkelinx (<
>>> thierry.onkelinx at inbo.be>) escribi?:
>>>
>>>> Dear Jose,
>>>>
>>>> I store the results of CPU intensive chunks in the package. Have a look
>>>> at
>>>> https://github.com/ropensci/git2rdata/blob/master/vignettes/efficiency.Rmd
>>>> .
>>>>
>>>> Best regards,
>>>>
>>>> ir. Thierry Onkelinx
>>>> Statisticus / Statistician
>>>>
>>>> Vlaamse Overheid / Government of Flanders
>>>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>>>> AND FOREST
>>>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>>>> thierry.onkelinx at inbo.be
>>>> Havenlaan 88 bus 73, 1000 Brussel
>>>> www.inbo.be
>>>>
>>>>
>>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>>> To call in the statistician after the experiment is done may be no more
>>>> than asking him to perform a post-mortem examination: he may be able to say
>>>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>>>> The plural of anecdote is not data. ~ Roger Brinner
>>>> The combination of some data and an aching desire for an answer does
>>>> not ensure that a reasonable answer can be extracted from a given body of
>>>> data. ~ John Tukey
>>>>
>>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>>>
>>>> <https://www.inbo.be>
>>>>
>>>>
>>>> Op ma 1 feb. 2021 om 12:49 schreef Jose Barrera <
>>>> jose.barrera at isglobal.org>:
>>>>
>>>>> Dear all,
>>>>>
>>>>> I have an issue when checking a package that includes a vignette using
>>>>> cache = TRUE in some chunks. The vignette is generated with knit from
>>>>> an
>>>>> Rnw document. The issue is that cache works when building the vignette
>>>>> locally but it seems not working when checking the package.
>>>>>
>>>>> I have proceeded as follows:
>>>>>
>>>>> 1) R CMD build collin --resave-data
>>>>>       * creating vignettes...  --->  4 minutes
>>>>> 2) R CMD check --as-cran collin_0.0.1.tar.gz
>>>>>       * checking re-building of vignette outputs ...  --->  4 minutes
>>>>> 3) I install "collin_0.0.1.tar.gz" in my laptop
>>>>> 4) In an R session, I build the vignette
>>>>> "collin/vignettes/collin.Rnw". It
>>>>> takes 4.7 minutes and the "cache" folder is created in
>>>>> "collin/vignettes/"
>>>>> 5) I remove all aux files in "collin/vignettes/" (now, the only extra
>>>>> item
>>>>> is the "cache" folder)
>>>>> 6) I re-build the vignette in the R session and now it takes only 8
>>>>> seconds, so the cache is working
>>>>> 7) Repeat 5)
>>>>> 8) Repeat 1) and 2) but it still takes 4 minutes so it seems like R CMD
>>>>> build and R CMD check are ignoring the "cache" folder in
>>>>> "collin/vignettes/".
>>>>>
>>>>> I would be very grateful if you could provide some advice on how to
>>>>> fix the
>>>>> problem.
>>>>>
>>>>> Best,
>>>>>
>>>>> Jose Barrera
>>>>> Statistician, Associate Lecturer
>>>>>
>>>>> ISGlobal
>>>>> Barcelona Institute for Global Health - Campus MAR
>>>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>>>
>>>>> Doctor Aiguader, 88
>>>>> 08003 Barcelona, Spain
>>>>> Tel. +34 93 2147383
>>>>> jose.barrera at isglobal.org
>>>>> www.isglobal.org
>>>>>
>>>>> --
>>>>>
>>>>>
>>>>> This message is intended exclusively for its addressee and may contain
>>>>> information that is CONFIDENTIAL and protected by professional
>>>>> privilege.
>>>>> If
>>>>> you are not the intended recipient you are hereby notified that any
>>>>> dissemination, copy or disclosure of this communication is strictly
>>>>> prohibited
>>>>> by law. If this message has been received in error, please
>>>>> immediately notify
>>>>> us via e-mail and delete it.
>>>>>
>>>>>
>>>>>
>>>>> DATA PROTECTION. We
>>>>> inform you that your personal data, including your
>>>>> e-mail address and data
>>>>> included in your email correspondence, are included in
>>>>> the ISGlobal
>>>>> Foundation files. Your personal data will be used for the purpose
>>>>> of
>>>>> contacting you and sending information on the activities of the above
>>>>> foundations. You can exercise your rights of access, rectification,
>>>>> cancellation and opposition by contacting the following address:
>>>>> lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
>>>>> Privacy Policy at
>>>>> www.isglobal.org <http://www.isglobal.org/>.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> -----------------------------------------------------------------------------------------------------------------------------
>>>>>
>>>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>>>> su
>>>>> destinatario y puede contener informaci?n confidencial, por lo que la
>>>>> utilizaci?n,
>>>>> divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>>>> legislaci?n
>>>>> vigente. Si ha recibido este mensaje por error, le rogamos lo
>>>>> comunique
>>>>> inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>>>> titularidad
>>>>> de la Fundaci?n ISGlobal  para cualquier
>>>>> finalidades de
>>>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre
>>>>> sus
>>>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>>>> correo quedar?n incorporados en los correspondientes ficheros,
>>>>> autorizando
>>>>> el
>>>>> uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>>>> ejercer los
>>>>> derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>>>>> dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *.
>>>>> Pol?tica de
>>>>> privacidad
>>>>> en www.isglobal.org <http://www.isglobal.org/>.
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>> This message is intended exclusively for its addressee and may contain
>>> information that is CONFIDENTIAL and protected by professional privilege.
>>> If you are not the intended recipient you are hereby notified that any
>>> dissemination, copy or disclosure of this communication is strictly
>>> prohibited by law. If this message has been received in error, please
>>> immediately notify us via e-mail and delete it.
>>>
>>> DATA PROTECTION. We inform you that your personal data, including your
>>> e-mail address and data included in your email correspondence, are included
>>> in the ISGlobal Foundation files. Your personal data will be used for the
>>> purpose of contacting you and sending information on the activities of the
>>> above foundations. You can exercise your rights of access, rectification,
>>> cancellation and opposition by contacting the following address:
>>> lopd at isglobal.org. ISGlobal Privacy Policy at www.isglobal.org.
>>>
>>>
>>> -----------------------------------------------------------------------------------------------------------------------------
>>>
>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>> su destinatario y puede contener informaci?n confidencial, por lo que la
>>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>
>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>> ejercer los derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>>> dirigi?ndose a lopd at isglobal.org . Pol?tica de privacidad en
>>> www.isglobal.org.
>>>
>>
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional privilege.
> If you are not the intended recipient you are hereby notified that any
> dissemination, copy or disclosure of this communication is strictly
> prohibited by law. If this message has been received in error, please
> immediately notify us via e-mail and delete it.
>
> DATA PROTECTION. We inform you that your personal data, including your
> e-mail address and data included in your email correspondence, are included
> in the ISGlobal Foundation files. Your personal data will be used for the
> purpose of contacting you and sending information on the activities of the
> above foundations. You can exercise your rights of access, rectification,
> cancellation and opposition by contacting the following address:
> lopd at isglobal.org. ISGlobal Privacy Policy at www.isglobal.org.
>
>
> -----------------------------------------------------------------------------------------------------------------------------
>
> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
> destinatario y puede contener informaci?n confidencial, por lo que la
> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>
> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> actividades. Los datos que usted nos pueda facilitar contestando este
> correo quedar?n incorporados en los correspondientes ficheros, autorizando
> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> ejercer los derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
> dirigi?ndose a lopd at isglobal.org . Pol?tica de privacidad en
> www.isglobal.org.
>

	[[alternative HTML version deleted]]


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Mon Feb  1 20:21:23 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Mon, 1 Feb 2021 20:21:23 +0100
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <CAJuCY5xnfiKCDMLujwq=TwvLY=XGEHCEYBSJZ7h93XKO1zcBoA@mail.gmail.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
 <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
 <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>
 <CAJuCY5zOQAEODK30ms+P6me8fNT6YO7ffJdb5kCJuCPrAWU-0g@mail.gmail.com>
 <CACr7k5KLMFjbYmj+KrnyYVXKFjOV11GkdYepzTq53NoDCfe69g@mail.gmail.com>
 <CAJuCY5xnfiKCDMLujwq=TwvLY=XGEHCEYBSJZ7h93XKO1zcBoA@mail.gmail.com>
Message-ID: <CACr7k5+WebmGcp+6EjnCTS1uAPXicQVdM7SYCAm24pyZM6pvYA@mail.gmail.com>

Many thanks for your help Thierry but unfortunately I can't  see the link
between your first reply and my issue (of course, that's my fault).

Jose Barrera
Statistician, Associate Lecturer

*IS**Global*
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
<https://www.linkedin.com/in/josebarrera>
Personal website: sites.google.com/view/josebarrera
www.isglobal.org

This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly
prohibited by law. If this message has been received in error, please
immediately notify us via e-mail and delete it.

DATA PROTECTION. We inform you that your personal data, including your
e-mail address and data included in your email correspondence, are included
in the ISGlobal Foundation filing system. Your personal data will be used
for the purpose of contacting you and sending information on the activities
of the above foundations. You can exercise your rights to  access to
personal data, rectification, erasure, restriction of processing, data
portability and object by contacting the following address: *lopd at isglobal.org
<lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
<http://www.isglobal.org/>*.


-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.

PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando
el uso de su direcci?n de e-mail para las finalidades citadas. Puede
ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
<lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
<http://www.isglobal.org/>*.


El lun, 1 feb 2021 a las 20:09, Thierry Onkelinx (<thierry.onkelinx at inbo.be>)
escribi?:

> That will be hard to do without your package. Note that I've suggested a
> work around in my first reply.
>
> ir. Thierry Onkelinx
> Statisticus / Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
>
>
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
>
> ///////////////////////////////////////////////////////////////////////////////////////////
>
> <https://www.inbo.be>
>
>
> Op ma 1 feb. 2021 om 19:51 schreef Jose Barrera <jose.barrera at isglobal.org
> >:
>
>> Indeed, the "cache" folder is not present in the tar.gz file. Could you
>> please help me on how to fix "the cache is not installed into the package
>> "?
>>
>> Thanks,
>>
>> Jose Barrera
>> Statistician, Associate Lecturer
>>
>> *IS**Global*
>> Barcelona Institute for Global Health - Campus MAR
>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>
>> Doctor Aiguader, 88
>> 08003 Barcelona, Spain
>> Tel. +34 93 2147383
>> jose.barrera at isglobal.org
>> <https://www.linkedin.com/in/josebarrera>
>> Personal website: sites.google.com/view/josebarrera
>> www.isglobal.org
>>
>> This message is intended exclusively for its addressee and may contain
>> information that is CONFIDENTIAL and protected by professional privilege.
>> If you are not the intended recipient you are hereby notified that any
>> dissemination, copy or disclosure of this communication is strictly
>> prohibited by law. If this message has been received in error, please
>> immediately notify us via e-mail and delete it.
>>
>> DATA PROTECTION. We inform you that your personal data, including your
>> e-mail address and data included in your email correspondence, are included
>> in the ISGlobal Foundation filing system. Your personal data will be
>> used for the purpose of contacting you and sending information on the
>> activities of the above foundations. You can exercise your rights to
>> access to personal data, rectification, erasure, restriction of processing,
>> data portability and object by contacting the following address: *lopd at isglobal.org
>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
>> <http://www.isglobal.org/>*.
>>
>>
>> -----------------------------------------------------------------------------------------------------------------------------
>>
>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>> su destinatario y puede contener informaci?n confidencial, por lo que la
>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>
>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>> actividades. Los datos que usted nos pueda facilitar contestando este
>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
>> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
>> <http://www.isglobal.org/>*.
>>
>>
>> El lun, 1 feb 2021 a las 19:42, Thierry Onkelinx (<
>> thierry.onkelinx at inbo.be>) escribi?:
>>
>>> Probably because the cache is not installed into the package. I'd check
>>> the tar.gz file to see if the cache is present.
>>>
>>> ir. Thierry Onkelinx
>>> Statisticus / Statistician
>>>
>>> Vlaamse Overheid / Government of Flanders
>>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>>> AND FOREST
>>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>>> thierry.onkelinx at inbo.be
>>> Havenlaan 88 bus 73, 1000 Brussel
>>> www.inbo.be
>>>
>>>
>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>> To call in the statistician after the experiment is done may be no more
>>> than asking him to perform a post-mortem examination: he may be able to say
>>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>>> The plural of anecdote is not data. ~ Roger Brinner
>>> The combination of some data and an aching desire for an answer does not
>>> ensure that a reasonable answer can be extracted from a given body of data.
>>> ~ John Tukey
>>>
>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>>
>>> <https://www.inbo.be>
>>>
>>>
>>> Op ma 1 feb. 2021 om 19:01 schreef Jose Barrera <
>>> jose.barrera at isglobal.org>:
>>>
>>>> Dear Thierry,
>>>>
>>>> Thanks for your advice. However, I would like to understand why when I
>>>> build the vignette to get the pdf from the Rnw, it takes just 8 seconds
>>>> once the "cache" folder has been created instead of the initial 4 minutes,
>>>> but this time reduction does not happen when checking the package.
>>>>
>>>> Best,
>>>>
>>>> Jose Barrera
>>>> Statistician, Associate Lecturer
>>>>
>>>> *IS**Global*
>>>> Barcelona Institute for Global Health - Campus MAR
>>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>>
>>>> Doctor Aiguader, 88
>>>> 08003 Barcelona, Spain
>>>> Tel. +34 93 2147383
>>>> jose.barrera at isglobal.org
>>>> <https://www.linkedin.com/in/josebarrera>
>>>> Personal website: sites.google.com/view/josebarrera
>>>> www.isglobal.org
>>>>
>>>> This message is intended exclusively for its addressee and may contain
>>>> information that is CONFIDENTIAL and protected by professional privilege.
>>>> If you are not the intended recipient you are hereby notified that any
>>>> dissemination, copy or disclosure of this communication is strictly
>>>> prohibited by law. If this message has been received in error, please
>>>> immediately notify us via e-mail and delete it.
>>>>
>>>> DATA PROTECTION. We inform you that your personal data, including your
>>>> e-mail address and data included in your email correspondence, are included
>>>> in the ISGlobal Foundation filing system. Your personal data will be
>>>> used for the purpose of contacting you and sending information on the
>>>> activities of the above foundations. You can exercise your rights to
>>>> access to personal data, rectification, erasure, restriction of processing,
>>>> data portability and object by contacting the following address: *lopd at isglobal.org
>>>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
>>>> <http://www.isglobal.org/>*.
>>>>
>>>>
>>>> -----------------------------------------------------------------------------------------------------------------------------
>>>>
>>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>>> su destinatario y puede contener informaci?n confidencial, por lo que la
>>>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>>>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>>
>>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>>>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
>>>> del tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
>>>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
>>>> <http://www.isglobal.org/>*.
>>>>
>>>>
>>>> El lun, 1 feb 2021 a las 13:02, Thierry Onkelinx (<
>>>> thierry.onkelinx at inbo.be>) escribi?:
>>>>
>>>>> Dear Jose,
>>>>>
>>>>> I store the results of CPU intensive chunks in the package. Have a
>>>>> look at
>>>>> https://github.com/ropensci/git2rdata/blob/master/vignettes/efficiency.Rmd
>>>>> .
>>>>>
>>>>> Best regards,
>>>>>
>>>>> ir. Thierry Onkelinx
>>>>> Statisticus / Statistician
>>>>>
>>>>> Vlaamse Overheid / Government of Flanders
>>>>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>>>>> AND FOREST
>>>>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>>>>> thierry.onkelinx at inbo.be
>>>>> Havenlaan 88 bus 73, 1000 Brussel
>>>>> www.inbo.be
>>>>>
>>>>>
>>>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>>>> To call in the statistician after the experiment is done may be no
>>>>> more than asking him to perform a post-mortem examination: he may be able
>>>>> to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
>>>>> The plural of anecdote is not data. ~ Roger Brinner
>>>>> The combination of some data and an aching desire for an answer does
>>>>> not ensure that a reasonable answer can be extracted from a given body of
>>>>> data. ~ John Tukey
>>>>>
>>>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>>>>
>>>>> <https://www.inbo.be>
>>>>>
>>>>>
>>>>> Op ma 1 feb. 2021 om 12:49 schreef Jose Barrera <
>>>>> jose.barrera at isglobal.org>:
>>>>>
>>>>>> Dear all,
>>>>>>
>>>>>> I have an issue when checking a package that includes a vignette using
>>>>>> cache = TRUE in some chunks. The vignette is generated with knit from
>>>>>> an
>>>>>> Rnw document. The issue is that cache works when building the vignette
>>>>>> locally but it seems not working when checking the package.
>>>>>>
>>>>>> I have proceeded as follows:
>>>>>>
>>>>>> 1) R CMD build collin --resave-data
>>>>>>       * creating vignettes...  --->  4 minutes
>>>>>> 2) R CMD check --as-cran collin_0.0.1.tar.gz
>>>>>>       * checking re-building of vignette outputs ...  --->  4 minutes
>>>>>> 3) I install "collin_0.0.1.tar.gz" in my laptop
>>>>>> 4) In an R session, I build the vignette
>>>>>> "collin/vignettes/collin.Rnw". It
>>>>>> takes 4.7 minutes and the "cache" folder is created in
>>>>>> "collin/vignettes/"
>>>>>> 5) I remove all aux files in "collin/vignettes/" (now, the only extra
>>>>>> item
>>>>>> is the "cache" folder)
>>>>>> 6) I re-build the vignette in the R session and now it takes only 8
>>>>>> seconds, so the cache is working
>>>>>> 7) Repeat 5)
>>>>>> 8) Repeat 1) and 2) but it still takes 4 minutes so it seems like R
>>>>>> CMD
>>>>>> build and R CMD check are ignoring the "cache" folder in
>>>>>> "collin/vignettes/".
>>>>>>
>>>>>> I would be very grateful if you could provide some advice on how to
>>>>>> fix the
>>>>>> problem.
>>>>>>
>>>>>> Best,
>>>>>>
>>>>>> Jose Barrera
>>>>>> Statistician, Associate Lecturer
>>>>>>
>>>>>> ISGlobal
>>>>>> Barcelona Institute for Global Health - Campus MAR
>>>>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>>>>
>>>>>> Doctor Aiguader, 88
>>>>>> 08003 Barcelona, Spain
>>>>>> Tel. +34 93 2147383
>>>>>> jose.barrera at isglobal.org
>>>>>> www.isglobal.org
>>>>>>
>>>>>> --
>>>>>>
>>>>>>
>>>>>> This message is intended exclusively for its addressee and may contain
>>>>>> information that is CONFIDENTIAL and protected by professional
>>>>>> privilege.
>>>>>> If
>>>>>> you are not the intended recipient you are hereby notified that any
>>>>>> dissemination, copy or disclosure of this communication is strictly
>>>>>> prohibited
>>>>>> by law. If this message has been received in error, please
>>>>>> immediately notify
>>>>>> us via e-mail and delete it.
>>>>>>
>>>>>>
>>>>>>
>>>>>> DATA PROTECTION. We
>>>>>> inform you that your personal data, including your
>>>>>> e-mail address and data
>>>>>> included in your email correspondence, are included in
>>>>>> the ISGlobal
>>>>>> Foundation files. Your personal data will be used for the purpose
>>>>>> of
>>>>>> contacting you and sending information on the activities of the above
>>>>>> foundations. You can exercise your rights of access, rectification,
>>>>>> cancellation and opposition by contacting the following address:
>>>>>> lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
>>>>>> Privacy Policy at
>>>>>> www.isglobal.org <http://www.isglobal.org/>.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> -----------------------------------------------------------------------------------------------------------------------------
>>>>>>
>>>>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente
>>>>>> a
>>>>>> su
>>>>>> destinatario y puede contener informaci?n confidencial, por lo que la
>>>>>> utilizaci?n,
>>>>>> divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>>>>> legislaci?n
>>>>>> vigente. Si ha recibido este mensaje por error, le rogamos lo
>>>>>> comunique
>>>>>> inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>>>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>>>>> titularidad
>>>>>> de la Fundaci?n ISGlobal  para cualquier
>>>>>> finalidades de
>>>>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre
>>>>>> sus
>>>>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>>>>> correo quedar?n incorporados en los correspondientes ficheros,
>>>>>> autorizando
>>>>>> el
>>>>>> uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>>>>> ejercer los
>>>>>> derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>>>>>> dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *.
>>>>>> Pol?tica de
>>>>>> privacidad
>>>>>> en www.isglobal.org <http://www.isglobal.org/>.
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>> This message is intended exclusively for its addressee and may contain
>>>> information that is CONFIDENTIAL and protected by professional privilege.
>>>> If you are not the intended recipient you are hereby notified that any
>>>> dissemination, copy or disclosure of this communication is strictly
>>>> prohibited by law. If this message has been received in error, please
>>>> immediately notify us via e-mail and delete it.
>>>>
>>>> DATA PROTECTION. We inform you that your personal data, including your
>>>> e-mail address and data included in your email correspondence, are included
>>>> in the ISGlobal Foundation files. Your personal data will be used for the
>>>> purpose of contacting you and sending information on the activities of the
>>>> above foundations. You can exercise your rights of access, rectification,
>>>> cancellation and opposition by contacting the following address:
>>>> lopd at isglobal.org. ISGlobal Privacy Policy at www.isglobal.org.
>>>>
>>>>
>>>> -----------------------------------------------------------------------------------------------------------------------------
>>>>
>>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>>> su destinatario y puede contener informaci?n confidencial, por lo que la
>>>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>>>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>>
>>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>>>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>>> ejercer los derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>>>> dirigi?ndose a lopd at isglobal.org . Pol?tica de privacidad en
>>>> www.isglobal.org.
>>>>
>>>
>> This message is intended exclusively for its addressee and may contain
>> information that is CONFIDENTIAL and protected by professional privilege.
>> If you are not the intended recipient you are hereby notified that any
>> dissemination, copy or disclosure of this communication is strictly
>> prohibited by law. If this message has been received in error, please
>> immediately notify us via e-mail and delete it.
>>
>> DATA PROTECTION. We inform you that your personal data, including your
>> e-mail address and data included in your email correspondence, are included
>> in the ISGlobal Foundation files. Your personal data will be used for the
>> purpose of contacting you and sending information on the activities of the
>> above foundations. You can exercise your rights of access, rectification,
>> cancellation and opposition by contacting the following address:
>> lopd at isglobal.org. ISGlobal Privacy Policy at www.isglobal.org.
>>
>>
>> -----------------------------------------------------------------------------------------------------------------------------
>>
>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>> su destinatario y puede contener informaci?n confidencial, por lo que la
>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>
>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>> actividades. Los datos que usted nos pueda facilitar contestando este
>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>> ejercer los derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>> dirigi?ndose a lopd at isglobal.org . Pol?tica de privacidad en
>> www.isglobal.org.
>>
>

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From groemp|ng @end|ng |rom beuth-hoch@chu|e@de  Mon Feb  1 23:03:28 2021
From: groemp|ng @end|ng |rom beuth-hoch@chu|e@de (=?UTF-8?Q?Ulrike_Gr=c3=b6mping?=)
Date: Mon, 1 Feb 2021 23:03:28 +0100
Subject: [R-pkg-devel] Undeclared packages ... in Rd xrefs
Message-ID: <b5605fd1-b8fe-6c3e-0824-7b1468c42d1b@beuth-hochschule.de>

Dear package developeRs,

under the Fedora clang checks, I find the note

"Undeclared packages ?FrF2?, ?DoE.wrapper?, ?sfsmisc?, ?DoE.MIParray?, 
?planor? in Rd xrefs"

for my package DoE.base. I understand that package planor has been 
archived from CRAN; I don't understand what is wrong with the other 
xrefs; only the R-Devel Fedora clang flavor seems to complain, and I did 
not find an explanation in the section on cross references in Writing R 
Extensions. Can someone explain the meaning of this note?

Thanks and regards,
Ulrike

-- 
##############################################
## Prof. Ulrike Groemping
## FB II
## Beuth University of Applied Sciences Berlin
##############################################
## prof.beuth-hochschule.de/groemping
## Phone: +49(0)30 4504 5127
## Fax:   +49(0)30 4504 66 5127
## Home office: +49(0)30 394 04 863
##############################################


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  2 02:38:38 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 1 Feb 2021 20:38:38 -0500
Subject: [R-pkg-devel] Undeclared packages ... in Rd xrefs
In-Reply-To: <b5605fd1-b8fe-6c3e-0824-7b1468c42d1b@beuth-hochschule.de>
References: <b5605fd1-b8fe-6c3e-0824-7b1468c42d1b@beuth-hochschule.de>
Message-ID: <975c63af-0da6-7d21-05e4-23246d0bae1c@gmail.com>

On 01/02/2021 5:03 p.m., Ulrike Gr?mping wrote:
> Dear package developeRs,
> 
> under the Fedora clang checks, I find the note
> 
> "Undeclared packages ?FrF2?, ?DoE.wrapper?, ?sfsmisc?, ?DoE.MIParray?,
> ?planor? in Rd xrefs"
> 
> for my package DoE.base. I understand that package planor has been
> archived from CRAN; I don't understand what is wrong with the other
> xrefs; only the R-Devel Fedora clang flavor seems to complain, and I did
> not find an explanation in the section on cross references in Writing R
> Extensions. Can someone explain the meaning of this note?

There's a line in the Writing R Extensions manual section 2.5 
Cross-refernces for R-devel that says:

"Packages referred to by these ?other forms? should be declared in the 
DESCRIPTION file, in the ?Depends?, ?Imports?, ?Suggests? or ?Enhances? 
fields."

The other forms are the forms of links to other packages.  So presumably 
you don't mention those packages in your DESCRIPTION file.  Generally 
that means they should be listed in Suggests, which doesn't force them 
to be installed, but they will be installed during tests.  You might 
also argue they should be in Enhances, though that seems a worse fit.

Duncan Murdoch


From edd @end|ng |rom deb|@n@org  Tue Feb  2 03:38:48 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 1 Feb 2021 20:38:48 -0600
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <CACr7k5+WebmGcp+6EjnCTS1uAPXicQVdM7SYCAm24pyZM6pvYA@mail.gmail.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
 <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
 <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>
 <CAJuCY5zOQAEODK30ms+P6me8fNT6YO7ffJdb5kCJuCPrAWU-0g@mail.gmail.com>
 <CACr7k5KLMFjbYmj+KrnyYVXKFjOV11GkdYepzTq53NoDCfe69g@mail.gmail.com>
 <CAJuCY5xnfiKCDMLujwq=TwvLY=XGEHCEYBSJZ7h93XKO1zcBoA@mail.gmail.com>
 <CACr7k5+WebmGcp+6EjnCTS1uAPXicQVdM7SYCAm24pyZM6pvYA@mail.gmail.com>
Message-ID: <24600.47928.179050.446247@rob.eddelbuettel.com>


On 1 February 2021 at 20:21, Jose Barrera wrote:
| Many thanks for your help Thierry but unfortunately I can't  see the link
| between your first reply and my issue (of course, that's my fault).

Thierry very gently (yet correctly) suggested to have the "cached" results as
"precomputed" artifacts in the package to not require any compution at all.
So write, for example, a data.frame df as
     saveRDS(df, "inst/cachedData/data.rds")
and then in your vignette retrieve it as
     df <- readRDS(system.file("cachedData", "data.rds", package="mypkg"))
replacing "mypkg" with your package name.

Cheers, Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Tue Feb  2 11:22:36 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Tue, 2 Feb 2021 11:22:36 +0100
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <24600.47928.179050.446247@rob.eddelbuettel.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
 <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
 <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>
 <CAJuCY5zOQAEODK30ms+P6me8fNT6YO7ffJdb5kCJuCPrAWU-0g@mail.gmail.com>
 <CACr7k5KLMFjbYmj+KrnyYVXKFjOV11GkdYepzTq53NoDCfe69g@mail.gmail.com>
 <CAJuCY5xnfiKCDMLujwq=TwvLY=XGEHCEYBSJZ7h93XKO1zcBoA@mail.gmail.com>
 <CACr7k5+WebmGcp+6EjnCTS1uAPXicQVdM7SYCAm24pyZM6pvYA@mail.gmail.com>
 <24600.47928.179050.446247@rob.eddelbuettel.com>
Message-ID: <CACr7k5L-q7okCkhbM3JC0pJM5H8d+2J_v-+PpcBnEKma7+9MUg@mail.gmail.com>

Dear Dirk,

Thanks for clarifying, now I can see Thierry's point. But the issue is that
doing that my vignette would lose the "reproducible research" property
because the Rnw would need all those artefacts to reproduce the pdf. I know
I could combine Thierry's suggestion with playing with echo = TRUE/FALSE,
eval = TRUE/FALSE and purl = TRUE/FALSE in the chunks so that the pdf (and
the purled R file) looks like I don't save/retrieve partial results but I
would like to find a more elegant solution in which the Rnw reproduces the
pdf from scratch while taking advantage of "cache = TRUE" present in some
chunks, as we can do locally.

Best,


Jose Barrera
Statistician, Associate Lecturer

*IS**Global*
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
<https://www.linkedin.com/in/josebarrera>
Personal website: sites.google.com/view/josebarrera
www.isglobal.org

This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly
prohibited by law. If this message has been received in error, please
immediately notify us via e-mail and delete it.

DATA PROTECTION. We inform you that your personal data, including your
e-mail address and data included in your email correspondence, are included
in the ISGlobal Foundation filing system. Your personal data will be used
for the purpose of contacting you and sending information on the activities
of the above foundations. You can exercise your rights to  access to
personal data, rectification, erasure, restriction of processing, data
portability and object by contacting the following address: *lopd at isglobal.org
<lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
<http://www.isglobal.org/>*.


-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.

PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando
el uso de su direcci?n de e-mail para las finalidades citadas. Puede
ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
<lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
<http://www.isglobal.org/>*.


El mar, 2 feb 2021 a las 3:38, Dirk Eddelbuettel (<edd at debian.org>)
escribi?:

>
> On 1 February 2021 at 20:21, Jose Barrera wrote:
> | Many thanks for your help Thierry but unfortunately I can't  see the link
> | between your first reply and my issue (of course, that's my fault).
>
> Thierry very gently (yet correctly) suggested to have the "cached" results
> as
> "precomputed" artifacts in the package to not require any compution at all.
> So write, for example, a data.frame df as
>      saveRDS(df, "inst/cachedData/data.rds")
> and then in your vignette retrieve it as
>      df <- readRDS(system.file("cachedData", "data.rds", package="mypkg"))
> replacing "mypkg" with your package name.
>
> Cheers, Dirk
>
> --
> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  2 12:00:10 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 2 Feb 2021 06:00:10 -0500
Subject: [R-pkg-devel] 
 Cache in vignette not working when checking a package
In-Reply-To: <CACr7k5KLMFjbYmj+KrnyYVXKFjOV11GkdYepzTq53NoDCfe69g@mail.gmail.com>
References: <CACr7k5+QMqEM9=1J7tzUVfYd8uJWFzo5uQkN7-__aHDnZYYpwQ@mail.gmail.com>
 <CAJuCY5w8TcCGMx15KXstzuDSrta1xS=ukggEH4rUh8V1b0powQ@mail.gmail.com>
 <CACr7k5LdPqakJp6Ob2LH6E+eqh-b+Qf3jYbs4_px49Z-tePjhw@mail.gmail.com>
 <CAJuCY5zOQAEODK30ms+P6me8fNT6YO7ffJdb5kCJuCPrAWU-0g@mail.gmail.com>
 <CACr7k5KLMFjbYmj+KrnyYVXKFjOV11GkdYepzTq53NoDCfe69g@mail.gmail.com>
Message-ID: <cb537115-f570-3af0-e76d-b2cb2026aa63@gmail.com>

On 01/02/2021 1:51 p.m., Jose Barrera wrote:
> Indeed, the "cache" folder is not present in the tar.gz file. Could you
> please help me on how to fix "the cache is not installed into the package"?

Where is the cache on your local system?  I think if it is in the 
vignettes/<vignettename>_cache directory, it would be installed (unless 
your .Rbuildignore file says to ignore it).

If you extract the tar.gz file into a new directory, does the cache end 
up in the same directory as the main vignette file?

Duncan Murdoch

> 
> Thanks,
> 
> Jose Barrera
> Statistician, Associate Lecturer
> 
> *IS**Global*
> Barcelona Institute for Global Health - Campus MAR
> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> 
> Doctor Aiguader, 88
> 08003 Barcelona, Spain
> Tel. +34 93 2147383
> jose.barrera at isglobal.org
> <https://www.linkedin.com/in/josebarrera>
> Personal website: sites.google.com/view/josebarrera
> www.isglobal.org
> 
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional privilege.
> If you are not the intended recipient you are hereby notified that any
> dissemination, copy or disclosure of this communication is strictly
> prohibited by law. If this message has been received in error, please
> immediately notify us via e-mail and delete it.
> 
> DATA PROTECTION. We inform you that your personal data, including your
> e-mail address and data included in your email correspondence, are included
> in the ISGlobal Foundation filing system. Your personal data will be used
> for the purpose of contacting you and sending information on the activities
> of the above foundations. You can exercise your rights to  access to
> personal data, rectification, erasure, restriction of processing, data
> portability and object by contacting the following address: *lopd at isglobal.org
> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> <http://www.isglobal.org/>*.
> 
> 
> -----------------------------------------------------------------------------------------------------------------------------
> 
> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
> destinatario y puede contener informaci?n confidencial, por lo que la
> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> 
> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> actividades. Los datos que usted nos pueda facilitar contestando este
> correo quedar?n incorporados en los correspondientes ficheros, autorizando
> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> <http://www.isglobal.org/>*.
> 
> 
> El lun, 1 feb 2021 a las 19:42, Thierry Onkelinx (<thierry.onkelinx at inbo.be>)
> escribi?:
> 
>> Probably because the cache is not installed into the package. I'd check
>> the tar.gz file to see if the cache is present.
>>
>> ir. Thierry Onkelinx
>> Statisticus / Statistician
>>
>> Vlaamse Overheid / Government of Flanders
>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
>> FOREST
>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>> thierry.onkelinx at inbo.be
>> Havenlaan 88 bus 73, 1000 Brussel
>> www.inbo.be
>>
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>> To call in the statistician after the experiment is done may be no more
>> than asking him to perform a post-mortem examination: he may be able to say
>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>> The plural of anecdote is not data. ~ Roger Brinner
>> The combination of some data and an aching desire for an answer does not
>> ensure that a reasonable answer can be extracted from a given body of data.
>> ~ John Tukey
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>>
>> <https://www.inbo.be>
>>
>>
>> Op ma 1 feb. 2021 om 19:01 schreef Jose Barrera <jose.barrera at isglobal.org
>>> :
>>
>>> Dear Thierry,
>>>
>>> Thanks for your advice. However, I would like to understand why when I
>>> build the vignette to get the pdf from the Rnw, it takes just 8 seconds
>>> once the "cache" folder has been created instead of the initial 4 minutes,
>>> but this time reduction does not happen when checking the package.
>>>
>>> Best,
>>>
>>> Jose Barrera
>>> Statistician, Associate Lecturer
>>>
>>> *IS**Global*
>>> Barcelona Institute for Global Health - Campus MAR
>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>
>>> Doctor Aiguader, 88
>>> 08003 Barcelona, Spain
>>> Tel. +34 93 2147383
>>> jose.barrera at isglobal.org
>>> <https://www.linkedin.com/in/josebarrera>
>>> Personal website: sites.google.com/view/josebarrera
>>> www.isglobal.org
>>>
>>> This message is intended exclusively for its addressee and may contain
>>> information that is CONFIDENTIAL and protected by professional privilege.
>>> If you are not the intended recipient you are hereby notified that any
>>> dissemination, copy or disclosure of this communication is strictly
>>> prohibited by law. If this message has been received in error, please
>>> immediately notify us via e-mail and delete it.
>>>
>>> DATA PROTECTION. We inform you that your personal data, including your
>>> e-mail address and data included in your email correspondence, are included
>>> in the ISGlobal Foundation filing system. Your personal data will be
>>> used for the purpose of contacting you and sending information on the
>>> activities of the above foundations. You can exercise your rights to
>>> access to personal data, rectification, erasure, restriction of processing,
>>> data portability and object by contacting the following address: *lopd at isglobal.org
>>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
>>> <http://www.isglobal.org/>*.
>>>
>>>
>>> -----------------------------------------------------------------------------------------------------------------------------
>>>
>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>> su destinatario y puede contener informaci?n confidencial, por lo que la
>>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>
>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
>>> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
>>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
>>> <http://www.isglobal.org/>*.
>>>
>>>
>>> El lun, 1 feb 2021 a las 13:02, Thierry Onkelinx (<
>>> thierry.onkelinx at inbo.be>) escribi?:
>>>
>>>> Dear Jose,
>>>>
>>>> I store the results of CPU intensive chunks in the package. Have a look
>>>> at
>>>> https://github.com/ropensci/git2rdata/blob/master/vignettes/efficiency.Rmd
>>>> .
>>>>
>>>> Best regards,
>>>>
>>>> ir. Thierry Onkelinx
>>>> Statisticus / Statistician
>>>>
>>>> Vlaamse Overheid / Government of Flanders
>>>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>>>> AND FOREST
>>>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>>>> thierry.onkelinx at inbo.be
>>>> Havenlaan 88 bus 73, 1000 Brussel
>>>> www.inbo.be
>>>>
>>>>
>>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>>> To call in the statistician after the experiment is done may be no more
>>>> than asking him to perform a post-mortem examination: he may be able to say
>>>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>>>> The plural of anecdote is not data. ~ Roger Brinner
>>>> The combination of some data and an aching desire for an answer does not
>>>> ensure that a reasonable answer can be extracted from a given body of data.
>>>> ~ John Tukey
>>>>
>>>> ///////////////////////////////////////////////////////////////////////////////////////////
>>>>
>>>> <https://www.inbo.be>
>>>>
>>>>
>>>> Op ma 1 feb. 2021 om 12:49 schreef Jose Barrera <
>>>> jose.barrera at isglobal.org>:
>>>>
>>>>> Dear all,
>>>>>
>>>>> I have an issue when checking a package that includes a vignette using
>>>>> cache = TRUE in some chunks. The vignette is generated with knit from an
>>>>> Rnw document. The issue is that cache works when building the vignette
>>>>> locally but it seems not working when checking the package.
>>>>>
>>>>> I have proceeded as follows:
>>>>>
>>>>> 1) R CMD build collin --resave-data
>>>>>        * creating vignettes...  --->  4 minutes
>>>>> 2) R CMD check --as-cran collin_0.0.1.tar.gz
>>>>>        * checking re-building of vignette outputs ...  --->  4 minutes
>>>>> 3) I install "collin_0.0.1.tar.gz" in my laptop
>>>>> 4) In an R session, I build the vignette "collin/vignettes/collin.Rnw".
>>>>> It
>>>>> takes 4.7 minutes and the "cache" folder is created in
>>>>> "collin/vignettes/"
>>>>> 5) I remove all aux files in "collin/vignettes/" (now, the only extra
>>>>> item
>>>>> is the "cache" folder)
>>>>> 6) I re-build the vignette in the R session and now it takes only 8
>>>>> seconds, so the cache is working
>>>>> 7) Repeat 5)
>>>>> 8) Repeat 1) and 2) but it still takes 4 minutes so it seems like R CMD
>>>>> build and R CMD check are ignoring the "cache" folder in
>>>>> "collin/vignettes/".
>>>>>
>>>>> I would be very grateful if you could provide some advice on how to fix
>>>>> the
>>>>> problem.
>>>>>
>>>>> Best,
>>>>>
>>>>> Jose Barrera
>>>>> Statistician, Associate Lecturer
>>>>>
>>>>> ISGlobal
>>>>> Barcelona Institute for Global Health - Campus MAR
>>>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>>>
>>>>> Doctor Aiguader, 88
>>>>> 08003 Barcelona, Spain
>>>>> Tel. +34 93 2147383
>>>>> jose.barrera at isglobal.org
>>>>> www.isglobal.org
>>>>>
>>>>> --
>>>>>
>>>>>
>>>>> This message is intended exclusively for its addressee and may contain
>>>>> information that is CONFIDENTIAL and protected by professional
>>>>> privilege.
>>>>> If
>>>>> you are not the intended recipient you are hereby notified that any
>>>>> dissemination, copy or disclosure of this communication is strictly
>>>>> prohibited
>>>>> by law. If this message has been received in error, please
>>>>> immediately notify
>>>>> us via e-mail and delete it.
>>>>>
>>>>>
>>>>>
>>>>> DATA PROTECTION. We
>>>>> inform you that your personal data, including your
>>>>> e-mail address and data
>>>>> included in your email correspondence, are included in
>>>>> the ISGlobal
>>>>> Foundation files. Your personal data will be used for the purpose
>>>>> of
>>>>> contacting you and sending information on the activities of the above
>>>>> foundations. You can exercise your rights of access, rectification,
>>>>> cancellation and opposition by contacting the following address:
>>>>> lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
>>>>> Privacy Policy at
>>>>> www.isglobal.org <http://www.isglobal.org/>.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> -----------------------------------------------------------------------------------------------------------------------------
>>>>>
>>>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>>>> su
>>>>> destinatario y puede contener informaci?n confidencial, por lo que la
>>>>> utilizaci?n,
>>>>> divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>>>> legislaci?n
>>>>> vigente. Si ha recibido este mensaje por error, le rogamos lo
>>>>> comunique
>>>>> inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>>>> titularidad
>>>>> de la Fundaci?n ISGlobal  para cualquier
>>>>> finalidades de
>>>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre
>>>>> sus
>>>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>>>> correo quedar?n incorporados en los correspondientes ficheros,
>>>>> autorizando
>>>>> el
>>>>> uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>>>> ejercer los
>>>>> derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>>>>> dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *.
>>>>> Pol?tica de
>>>>> privacidad
>>>>> en www.isglobal.org <http://www.isglobal.org/>.
>>>>>
>>>>>          [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>> This message is intended exclusively for its addressee and may contain
>>> information that is CONFIDENTIAL and protected by professional privilege.
>>> If you are not the intended recipient you are hereby notified that any
>>> dissemination, copy or disclosure of this communication is strictly
>>> prohibited by law. If this message has been received in error, please
>>> immediately notify us via e-mail and delete it.
>>>
>>> DATA PROTECTION. We inform you that your personal data, including your
>>> e-mail address and data included in your email correspondence, are included
>>> in the ISGlobal Foundation files. Your personal data will be used for the
>>> purpose of contacting you and sending information on the activities of the
>>> above foundations. You can exercise your rights of access, rectification,
>>> cancellation and opposition by contacting the following address:
>>> lopd at isglobal.org. ISGlobal Privacy Policy at www.isglobal.org.
>>>
>>>
>>> -----------------------------------------------------------------------------------------------------------------------------
>>>
>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>> su destinatario y puede contener informaci?n confidencial, por lo que la
>>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
>>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
>>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>
>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>> correo quedar?n incorporados en los correspondientes ficheros, autorizando
>>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>> ejercer los derechos de acceso, rectificaci?n, cancelaci?n y oposici?n
>>> dirigi?ndose a lopd at isglobal.org . Pol?tica de privacidad en
>>> www.isglobal.org.
>>>
>>
>


From nur|@@perez @end|ng |rom b@c@e@  Tue Feb  2 14:52:55 2021
From: nur|@@perez @end|ng |rom b@c@e@ (Nuria Perez-Zanon)
Date: Tue, 2 Feb 2021 14:52:55 +0100
Subject: [R-pkg-devel] DOIs problem 'libcurl error code 35'
Message-ID: <5338c8b3-57e4-6f93-02d8-1b0d544aefb6@bsc.es>

Dear,

I am testing my package on win-builder before submitting it to CRAN.

There is only one error message due to DOIs access (see below). There 
are several DOIs but only 3 are failing that belongs to the American 
Meteorological Society (AMS).

I have tested them on my browser and I can access to the correspondig 
website.

I have looked for info and I found I need to use " the --resolve option 
of curl for this".

Does somebody knows how to do it? I wonder if I can set that option 
somewhere in the package.

Thanks in advance,

Kind regards,

N?ria


Found the following (possibly) invalid DOIs:
   DOI: 10.1175/JAMC-D-16-0204.1
     From: DESCRIPTION
     Status: libcurl error code 35:
     	schannel: next InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE (0x80090326) - This error usually occurs when a fatal SSL/TLS alert is received (e.g. handshake failed).
     Message: Error
   DOI: 10.1175/JCLI4070.1
     From: DESCRIPTION
     Status: libcurl error code 35:
     	schannel: next InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE (0x80090326) - This error usually occurs when a fatal SSL/TLS alert is received (e.g. handshake failed).
     Message: Error
   DOI: 10.1175/JHM-D-13-096.1
     From: DESCRIPTION
     Status: libcurl error code 35:
     	schannel: next InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE (0x80090326) - This error usually occurs when a fatal SSL/TLS alert is received (e.g. handshake failed).
     Message: Error



http://bsc.es/disclaimer
	[[alternative HTML version deleted]]


From groemp|ng @end|ng |rom beuth-hoch@chu|e@de  Tue Feb  2 15:13:08 2021
From: groemp|ng @end|ng |rom beuth-hoch@chu|e@de (=?UTF-8?Q?Ulrike_Gr=c3=b6mping?=)
Date: Tue, 2 Feb 2021 15:13:08 +0100
Subject: [R-pkg-devel] Undeclared packages ... in Rd xrefs
In-Reply-To: <975c63af-0da6-7d21-05e4-23246d0bae1c@gmail.com>
References: <b5605fd1-b8fe-6c3e-0824-7b1468c42d1b@beuth-hochschule.de>
 <975c63af-0da6-7d21-05e4-23246d0bae1c@gmail.com>
Message-ID: <205cea6a-d9c8-15eb-e38a-80826c32ce80@beuth-hochschule.de>

Am 02.02.2021 um 02:38 schrieb Duncan Murdoch:
> On 01/02/2021 5:03 p.m., Ulrike Gr?mping wrote:
>> Dear package developeRs,
>>
>> under the Fedora clang checks, I find the note
>>
>> "Undeclared packages ?FrF2?, ?DoE.wrapper?, ?sfsmisc?, ?DoE.MIParray?,
>> ?planor? in Rd xrefs"
>>
>> for my package DoE.base. I understand that package planor has been
>> archived from CRAN; I don't understand what is wrong with the other
>> xrefs; only the R-Devel Fedora clang flavor seems to complain, and I did
>> not find an explanation in the section on cross references in Writing R
>> Extensions. Can someone explain the meaning of this note?
>
> There's a line in the Writing R Extensions manual section 2.5 
> Cross-refernces for R-devel that says:
>
> "Packages referred to by these ?other forms? should be declared in the 
> DESCRIPTION file, in the ?Depends?, ?Imports?, ?Suggests? or 
> ?Enhances? fields."
>
> The other forms are the forms of links to other packages.? So 
> presumably you don't mention those packages in your DESCRIPTION file.? 
> Generally that means they should be listed in Suggests, which doesn't 
> force them to be installed, but they will be installed during tests.? 
> You might also argue they should be in Enhances, though that seems a 
> worse fit.
>
> Duncan Murdoch


Thank you for the explanation! I will remove the xref to sfsmisc 
(because it does not make sense to suggest that package). The three 
other still available packages all depend on or import DoE.base. Thus, 
if I incorporate them in Suggests, I will create a circular dependence 
structure. Doesn't that create problems?

Ulrike Gr?mping


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  2 22:37:23 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 2 Feb 2021 16:37:23 -0500
Subject: [R-pkg-devel] Undeclared packages ... in Rd xrefs
In-Reply-To: <205cea6a-d9c8-15eb-e38a-80826c32ce80@beuth-hochschule.de>
References: <b5605fd1-b8fe-6c3e-0824-7b1468c42d1b@beuth-hochschule.de>
 <975c63af-0da6-7d21-05e4-23246d0bae1c@gmail.com>
 <205cea6a-d9c8-15eb-e38a-80826c32ce80@beuth-hochschule.de>
Message-ID: <834406cc-a7a2-2cf7-86de-3dbfdd4a3ba4@gmail.com>

On 02/02/2021 9:13 a.m., Ulrike Gr?mping wrote:
> Am 02.02.2021 um 02:38 schrieb Duncan Murdoch:
>> On 01/02/2021 5:03 p.m., Ulrike Gr?mping wrote:
>>> Dear package developeRs,
>>>
>>> under the Fedora clang checks, I find the note
>>>
>>> "Undeclared packages ?FrF2?, ?DoE.wrapper?, ?sfsmisc?, ?DoE.MIParray?,
>>> ?planor? in Rd xrefs"
>>>
>>> for my package DoE.base. I understand that package planor has been
>>> archived from CRAN; I don't understand what is wrong with the other
>>> xrefs; only the R-Devel Fedora clang flavor seems to complain, and I did
>>> not find an explanation in the section on cross references in Writing R
>>> Extensions. Can someone explain the meaning of this note?
>>
>> There's a line in the Writing R Extensions manual section 2.5
>> Cross-refernces for R-devel that says:
>>
>> "Packages referred to by these ?other forms? should be declared in the
>> DESCRIPTION file, in the ?Depends?, ?Imports?, ?Suggests? or
>> ?Enhances? fields."
>>
>> The other forms are the forms of links to other packages.? So
>> presumably you don't mention those packages in your DESCRIPTION file.
>> Generally that means they should be listed in Suggests, which doesn't
>> force them to be installed, but they will be installed during tests.
>> You might also argue they should be in Enhances, though that seems a
>> worse fit.
>>
>> Duncan Murdoch
> 
> 
> Thank you for the explanation! I will remove the xref to sfsmisc
> (because it does not make sense to suggest that package). The three
> other still available packages all depend on or import DoE.base. Thus,
> if I incorporate them in Suggests, I will create a circular dependence
> structure. Doesn't that create problems?

It creates small problems, not serious ones. You just need to make sure 
that a version of your package is available when those packages are 
installed for testing.  So things need to happen in something like this 
order on a totally new machine:

  - install the "hard" dependencies for your package.
  - install your package
  - install the "soft" dependencies for your package.

I just discovered that the remotes::install_deps(dependencies = TRUE) 
function can't currently do things in the right order, but 
remotes::install_local(dependencies = TRUE) is fine.  I didn't check the 
base function install.packages(dependencies = TRUE).

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  2 22:58:33 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 2 Feb 2021 16:58:33 -0500
Subject: [R-pkg-devel] Advice on R-forge to Github migration
In-Reply-To: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
References: <becd3ae6-d4fe-c9c8-be5b-25ca89a6d6c5@gmail.com>
Message-ID: <0908c6e1-a6d7-d037-6fda-27a344c34565@gmail.com>

Thanks again to all who wrote on this thread:  rgl now lives in git, 
with the main website now https://github.com/dmurdoch/rgl.  Thanks 
especially to Joshua, who did most of the heavy lifting of actually 
importing the R-forge material.

Duncan Murdoch


From groemp|ng @end|ng |rom beuth-hoch@chu|e@de  Thu Feb  4 18:37:24 2021
From: groemp|ng @end|ng |rom beuth-hoch@chu|e@de (=?UTF-8?Q?Ulrike_Gr=c3=b6mping?=)
Date: Thu, 4 Feb 2021 18:37:24 +0100
Subject: [R-pkg-devel] Undeclared packages ... in Rd xrefs
In-Reply-To: <834406cc-a7a2-2cf7-86de-3dbfdd4a3ba4@gmail.com>
References: <b5605fd1-b8fe-6c3e-0824-7b1468c42d1b@beuth-hochschule.de>
 <975c63af-0da6-7d21-05e4-23246d0bae1c@gmail.com>
 <205cea6a-d9c8-15eb-e38a-80826c32ce80@beuth-hochschule.de>
 <834406cc-a7a2-2cf7-86de-3dbfdd4a3ba4@gmail.com>
Message-ID: <206bb6e3-c2b5-e2c2-4196-cb103143fa1c@beuth-hochschule.de>

Am 02.02.2021 um 22:37 schrieb Duncan Murdoch:
> On 02/02/2021 9:13 a.m., Ulrike Gr?mping wrote:
>> Am 02.02.2021 um 02:38 schrieb Duncan Murdoch:
>>> On 01/02/2021 5:03 p.m., Ulrike Gr?mping wrote:
>>>> Dear package developeRs,
>>>>
>>>> under the Fedora clang checks, I find the note
>>>>
>>>> "Undeclared packages ?FrF2?, ?DoE.wrapper?, ?sfsmisc?, ?DoE.MIParray?,
>>>> ?planor? in Rd xrefs"
>>>>
>>>> for my package DoE.base. I understand that package planor has been
>>>> archived from CRAN; I don't understand what is wrong with the other
>>>> xrefs; only the R-Devel Fedora clang flavor seems to complain, and 
>>>> I did
>>>> not find an explanation in the section on cross references in 
>>>> Writing R
>>>> Extensions. Can someone explain the meaning of this note?
>>>
>>> There's a line in the Writing R Extensions manual section 2.5
>>> Cross-refernces for R-devel that says:
>>>
>>> "Packages referred to by these ?other forms? should be declared in the
>>> DESCRIPTION file, in the ?Depends?, ?Imports?, ?Suggests? or
>>> ?Enhances? fields."
>>>
>>> The other forms are the forms of links to other packages.? So
>>> presumably you don't mention those packages in your DESCRIPTION file.
>>> Generally that means they should be listed in Suggests, which doesn't
>>> force them to be installed, but they will be installed during tests.
>>> You might also argue they should be in Enhances, though that seems a
>>> worse fit.
>>>
>>> Duncan Murdoch
>>
>>
>> Thank you for the explanation! I will remove the xref to sfsmisc
>> (because it does not make sense to suggest that package). The three
>> other still available packages all depend on or import DoE.base. Thus,
>> if I incorporate them in Suggests, I will create a circular dependence
>> structure. Doesn't that create problems?
>
> It creates small problems, not serious ones. You just need to make 
> sure that a version of your package is available when those packages 
> are installed for testing.? So things need to happen in something like 
> this order on a totally new machine:
>
> ?- install the "hard" dependencies for your package.
> ?- install your package
> ?- install the "soft" dependencies for your package.
>
> I just discovered that the remotes::install_deps(dependencies = TRUE) 
> function can't currently do things in the right order, but 
> remotes::install_local(dependencies = TRUE) is fine.? I didn't check 
> the base function install.packages(dependencies = TRUE).
>
> Duncan Murdoch

Thank you! I don't like that very much, because exactly those users who 
are totally new to using R are extremely put off by this type of 
difficulty. I think that I will try to solve this differently, e.g. by 
showing the code for calling these help files from R without linking to 
them from within the Rd file. I am not sure what the benefits are of 
this demand - but I do see the drawbacks here.

Best,
Ulrike Gr?mping

-- 
##############################################
## Prof. Ulrike Groemping
## FB II
## Beuth University of Applied Sciences Berlin
##############################################
## prof.beuth-hochschule.de/groemping
## Phone: +49(0)30 4504 5127
## Fax:   +49(0)30 4504 66 5127
## Home office: +49(0)30 394 04 863
##############################################


From @r@v|ndj86 @end|ng |rom y@hoo@com  Sat Feb  6 19:08:33 2021
From: @r@v|ndj86 @end|ng |rom y@hoo@com (J. Aravind)
Date: Sat, 6 Feb 2021 18:08:33 +0000 (UTC)
Subject: [R-pkg-devel] cannot xtfrm data frames WARNING with R-devel
References: <285422272.170634.1612634913365.ref@mail.yahoo.com>
Message-ID: <285422272.170634.1612634913365@mail.yahoo.com>

Dear R developers,
I am facing an issue while submitting update to my package PGRdup (https://github.com/aravind-j/PGRdup).
With R-devel Debian (2021-02-05 r7994) on submission a WARNING was reported as follows. .
.
.
.Quitting from lines 536-542 (Introduction.Rmd) 
Error: processing vignette ?Introduction.Rmd? failed with diagnostics:
cannot xtfrm data frames
--- failed re-building ?Introduction.Rmd?
.
.
.
.

I am unable to replicate the same locally with the same version (2021-02-05 r79941) in Ubuntu 18.
Is this a false positive ? How to resolve this issue for successful submission.


Best Regards
J. Aravind




	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Sat Feb  6 22:05:26 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Sat, 6 Feb 2021 22:05:26 +0100
Subject: [R-pkg-devel] cannot xtfrm data frames WARNING with R-devel
In-Reply-To: <285422272.170634.1612634913365@mail.yahoo.com>
References: <285422272.170634.1612634913365.ref@mail.yahoo.com>
 <285422272.170634.1612634913365@mail.yahoo.com>
Message-ID: <0e2251ae-e672-09fc-b4b9-331615f7ea7d@fau.de>

You should be able to reproduce and trace back the error by setting the
environment variable

_R_STOP_ON_XTFRM_DATA_FRAME_=TRUE

while running your vignette code.

This is not a false positive. You are probably trying to
order(data.frame) somewhere. I think this will be disallowed in future
versions of R, following an R-devel thread from last year:

https://stat.ethz.ch/pipermail/r-devel/2020-May/079500.html

Best regards,

	Sebastian Meyer


Am 06.02.21 um 19:08 schrieb J. Aravind via R-package-devel:
> Dear R developers,
> I am facing an issue while submitting update to my package PGRdup (https://github.com/aravind-j/PGRdup).
> With R-devel Debian (2021-02-05 r7994) on submission a WARNING was reported as follows. .
> .
> .
> .Quitting from lines 536-542 (Introduction.Rmd) 
> Error: processing vignette ?Introduction.Rmd? failed with diagnostics:
> cannot xtfrm data frames
> --- failed re-building ?Introduction.Rmd?
> .
> .
> .
> .
> 
> I am unable to replicate the same locally with the same version (2021-02-05 r79941) in Ubuntu 18.
> Is this a false positive ? How to resolve this issue for successful submission.
> 
> 
> Best Regards
> J. Aravind
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb  8 14:27:28 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 8 Feb 2021 08:27:28 -0500
Subject: [R-pkg-devel] Two versions of package DLL?
Message-ID: <9bfdb9c5-9e9c-9db6-bfd5-4f52bf3533bc@gmail.com>

I'd like to install two versions of the rgl package DLL, with the 
.onLoad hook choosing which one to load.  Can anyone tell me of another 
package that does this successfully?

Here's the background:

Some MacOS users of rgl can't load it.  I think this is because of 
problems with XQuartz on their machines.  (See 
https://github.com/dmurdoch/rgl/issues/11 for a couple of reports.)  I 
don't know if these users are using the new cpus or what else might be 
causing their problems.

I've set it up to allow users to skip everything related to X11 by 
specifying --disable-opengl when installing, and have attempted to make 
it do this automatically when configuring:  so I think the problem is 
solved for users who can install rgl from source.

I'd like to try to make a solution for users who can't build it, by 
installing two copies of the DLL: the regular one linked to the X11 
libraries, and one built with the --disable-opengl option.

This is somewhat similar to how things were handled on MacOS up to 2015, 
when a second DLL was built to use Apple's AGL, while the default used 
GLX.  I resurrected that old code and modified it for the current use, 
and it works, but generates two check issues:

1. The Makevars file had various GNU-isms.  I'd really like to see a 
successful package that does this without them, but I guess I can 
declare that it uses GNU make if I have to.

2. Routine registration seems to think the second DLL (called "nullrgl") 
is in a different package, so I get warnings like:

? checking foreign function calls ... WARNING
   Foreign function calls to a different package:
     .C(rgl_abclines, ...)
     .C(rgl_addtosubscene, ...)

     ...

     .Call(rgl_setWheelCallback, ...)
   Undeclared package in foreign function calls:
      ?nullrgl?

I am pretty sure this is a false positive in the checks, e.g. printing 
rgl_abclines shows this:


 > rgl:::rgl_abclines
$name
[1] "rgl_abclines"

$address
<pointer: 0x7f994a00f330>
attr(,"class")
[1] "RegisteredNativeSymbol"

$dll
DLL name: nullrgl
Filename:
 
/Library/Frameworks/R.framework/Versions/4.0/Resources/library/rgl/libs/nullrgl.so
Dynamic lookup: FALSE

$numParameters
[1] 4

attr(,"class")
[1] "CRoutine"         "NativeSymbolInfo"

The code in QC.R (here: 
https://github.com/wch/r-source/blob/8cf68878a1361d00ff2125db2e1ac7dc8f6c8009/src/library/tools/R/QC.R#L2118) 
looks at the "DLL name", and ignores the fact that the path to the DLL 
is in the rgl libs directory.  I'll try to put together a patch for R 
that fixes this.

Duncan Murdoch


From @erg|o@|b@rr@ @end|ng |rom u@p@br  Mon Feb  8 15:54:02 2021
From: @erg|o@|b@rr@ @end|ng |rom u@p@br (Sergio Ibarra-Espinosa)
Date: Mon, 8 Feb 2021 11:54:02 -0300
Subject: [R-pkg-devel] undefined reference to `R_registerRoutines' on
 Windows-devel
Message-ID: <CACB4+8po8xbujQwZUu5dZzFcgNvvyPx6+-Jc20iH8Q_5-M3zqA@mail.gmail.com>

Greetings,

I have been trying to pass an R package (https://github.com/atmoschem/vein)
to CRAN but I`m finding this error on Windows-devel:

C:/rtools40/mingw32/bin/../lib/gcc/i686-w64-mingw32/8.3.0/../../../../i686-w64-mingw32/bin/ld.exe:
init.o:init.c:(.text+0x2c): undefined reference to
`R_registerRoutines'
C:/rtools40/mingw32/bin/../lib/gcc/i686-w64-mingw32/8.3.0/../../../../i686-w64-mingw32/bin/ld.exe:
init.o:init.c:(.text+0x3c): undefined reference to
`R_useDynamicSymbols'
collect2.exe: error: ld returned 1 exit status
no DLL was created


I have used .Fortran without problems, but after a discussion in this
forum, I have started using dotCall64::.C64 with OMP

I created the init.c
with tools::package_native_routine_registration_skeleton(".") with the
correct number of arguments.

Thank you very much for your help

Sergio

*Sergio Ibarra Espinosa*
Postdoc in Atmospheric Sciences, Universidade de S?o Paulo

+  <++8617643016295>55 11 934 909 778  | +55 11 974 253 791
<+55+11+974+253+791> | sergio.ibarra at usp.br

www.sergioibarra.blogspot.com | *Skype*:
https://join.skype.com/invite/zO54pw651trE
<https://mail.google.com/mail/u/0/#SignatureSanitizer_SafeHtmlFilter_>
Rua do Mat?o, 1226 - Cidade Universit?ria S?o Paulo-SP - Brasil - 05508-090
<http://github.com/ibarraespinosa>
<https://zoom.us/j/6527509021?pwd=VmlXQWliR1JSZGtpS0tJR1A2dUZpZz09>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  9 17:01:37 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Feb 2021 11:01:37 -0500
Subject: [R-pkg-devel] Subarchitectures
Message-ID: <8b793d35-a92e-e215-e70a-a3b95a695fab@gmail.com>

I think the WRE manual says that an R_ARCH environment variable will be 
set when subarchitectures are involved, but environment variables aren't 
accessible in Makevars.

Is there a standard way to get a value in Makevars which will match 
.Platform$r_arch once R is running?

Duncan Murdoch


From @ergue|@@oko| @end|ng |rom gm@||@com  Tue Feb  9 17:30:47 2021
From: @ergue|@@oko| @end|ng |rom gm@||@com (Sokol Serguei)
Date: Tue, 9 Feb 2021 17:30:47 +0100
Subject: [R-pkg-devel] Fwd:  Subarchitectures
In-Reply-To: <818474db-bac5-288e-7950-c937bc79b245@insa-toulouse.fr>
References: <818474db-bac5-288e-7950-c937bc79b245@insa-toulouse.fr>
Message-ID: <7f7831c5-f08e-afe1-a537-126d00eecbbc@gmail.com>

Le 09/02/2021 ? 17:01, Duncan Murdoch a ?crit?:
> I think the WRE manual says that an R_ARCH environment variable will 
> be set when subarchitectures are involved, but environment variables 
> aren't accessible in Makevars.
>
> Is there a standard way to get a value in Makevars which will match 
> .Platform$r_arch once R is running?

If sub-shell is possible, will it be convenient?

 ? myvar=`R --slave --vanilla -e 'cat(.Platform$r_arch)'`

Best,
Serguei.

>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  9 18:11:09 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Feb 2021 12:11:09 -0500
Subject: [R-pkg-devel] Fwd: Subarchitectures
In-Reply-To: <7f7831c5-f08e-afe1-a537-126d00eecbbc@gmail.com>
References: <818474db-bac5-288e-7950-c937bc79b245@insa-toulouse.fr>
 <7f7831c5-f08e-afe1-a537-126d00eecbbc@gmail.com>
Message-ID: <420af8e7-03ec-cf5d-79a0-2271cdeb4884@gmail.com>

On 09/02/2021 11:30 a.m., Sokol Serguei wrote:
> Le 09/02/2021 ? 17:01, Duncan Murdoch a ?crit?:
>> I think the WRE manual says that an R_ARCH environment variable will
>> be set when subarchitectures are involved, but environment variables
>> aren't accessible in Makevars.
>>
>> Is there a standard way to get a value in Makevars which will match
>> .Platform$r_arch once R is running?
> 
> If sub-shell is possible, will it be convenient?
> 
>   ? myvar=`R --slave --vanilla -e 'cat(.Platform$r_arch)'`

Something like that should work, but I'd have to make sure the R that it 
runs is the same one where the package is being installed.  And if I can 
do that, then I probably know the answer, don't I?

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  9 18:45:03 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 9 Feb 2021 12:45:03 -0500
Subject: [R-pkg-devel] Subarchitectures
In-Reply-To: <8b793d35-a92e-e215-e70a-a3b95a695fab@gmail.com>
References: <8b793d35-a92e-e215-e70a-a3b95a695fab@gmail.com>
Message-ID: <a31e4609-3266-1c12-b17e-74347c6be002@gmail.com>

On 09/02/2021 11:01 a.m., Duncan Murdoch wrote:
> I think the WRE manual says that an R_ARCH environment variable will be
> set when subarchitectures are involved, but environment variables aren't
> accessible in Makevars.

Actually, I probably misread the section about environment variables.

Duncan


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Wed Feb 10 00:53:43 2021
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 9 Feb 2021 23:53:43 +0000
Subject: [R-pkg-devel] How to get rid of R CMD check warning/note for new S4
 classes
Message-ID: <MN2PR19MB4110E0F6516AEDF69B4E76C1928E9@MN2PR19MB4110.namprd19.prod.outlook.com>

Hi 

I posted the following message on Jan 2nd and got no response... Assuming that my timing was off (everybody was probably still on vacation or recovering from New Year's celebration), I am taking the liberty to post it again, hoping that I'll reach a larger audience today.

------

I am creating a few S4 classes for a package. These classes include slots set to classes obtained using setClassUnion (some common across the new S4 classes). The code is functional but `R CMD check` keeps on reporting notes or warnings whatever I try. I am pulling my hair on this one and would really appreciate some insight on what I am doing wrong. 


Below are some simplified versions of a real function, which each gives different note/warning:

* Option 1 returns a note

createyNewClass <- function(){
  setClassUnion("character or NULL",c("character","NULL"),where = .GlobalEnv)
  setClass('newS4Classe',
    where = .GlobalEnv, 
    slots = c(type = 'character or NULL'),
    prototype = list(type = NULL)
  )
}

R CMD check
...
* checking whether the namespace can be loaded with stated dependencies ... NOTE
Warning: class "NULL" is defined (with package slot "methods") but no metadata object found to revise superClass information---not exported?  Making a copy in package ".GlobalEnv"
Warning: class "character" is defined (with package slot "methods") but no metadata object found to revise superClass information---not exported?  Making a copy in package ".GlobalEnv"
...

* Option 2: returns a WARNING

createyNewClass <- function(){
  setClassUnion("character or NULL",c("character","NULL"))
  setClass('newS4Classe',
    slots = c(type = 'character or NULL'),
    prototype = list(type = NULL)
  )
}

R CMD check:
...
* checking for missing documentation entries ... WARNING 
Undocumented S4 classes: 
   "character or numeric"
All user-level objects in a package (including S4 classes and methods) 
should have documentation entries.
...

Bit of information: I am running the R CMD check with R 3.6.1 (sorry, I cannot update on my corporate machine :( )

Thanks in advance for your help

From d@v|d@kepp||nger @end|ng |rom gm@||@com  Wed Feb 10 01:11:41 2021
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Tue, 9 Feb 2021 19:11:41 -0500
Subject: [R-pkg-devel] 
 How to get rid of R CMD check warning/note for new S4 classes
In-Reply-To: <MN2PR19MB4110E0F6516AEDF69B4E76C1928E9@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110E0F6516AEDF69B4E76C1928E9@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <CAGmyFCHZ7wqATDGsyRO=98L+X1PURSevgyGqHTCStGXH_HzUvw@mail.gmail.com>

Dear Sabastien,

Your second approach is correct, but as the warning suggests, you have to
document the S4 class "character or NULL". The documentation at
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-S4-classes-and-methods
should get you started.

Best,
David

On Tue, Feb 9, 2021 at 6:54 PM Sebastien Bihorel <
Sebastien.Bihorel at cognigencorp.com> wrote:

> Hi
>
> I posted the following message on Jan 2nd and got no response... Assuming
> that my timing was off (everybody was probably still on vacation or
> recovering from New Year's celebration), I am taking the liberty to post it
> again, hoping that I'll reach a larger audience today.
>
> ------
>
> I am creating a few S4 classes for a package. These classes include slots
> set to classes obtained using setClassUnion (some common across the new S4
> classes). The code is functional but `R CMD check` keeps on reporting notes
> or warnings whatever I try. I am pulling my hair on this one and would
> really appreciate some insight on what I am doing wrong.
>
>
> Below are some simplified versions of a real function, which each gives
> different note/warning:
>
> * Option 1 returns a note
>
> createyNewClass <- function(){
>   setClassUnion("character or NULL",c("character","NULL"),where =
> .GlobalEnv)
>   setClass('newS4Classe',
>     where = .GlobalEnv,
>     slots = c(type = 'character or NULL'),
>     prototype = list(type = NULL)
>   )
> }
>
> R CMD check
> ...
> * checking whether the namespace can be loaded with stated dependencies
> ... NOTE
> Warning: class "NULL" is defined (with package slot "methods") but no
> metadata object found to revise superClass information---not exported?
> Making a copy in package ".GlobalEnv"
> Warning: class "character" is defined (with package slot "methods") but no
> metadata object found to revise superClass information---not exported?
> Making a copy in package ".GlobalEnv"
> ...
>
> * Option 2: returns a WARNING
>
> createyNewClass <- function(){
>   setClassUnion("character or NULL",c("character","NULL"))
>   setClass('newS4Classe',
>     slots = c(type = 'character or NULL'),
>     prototype = list(type = NULL)
>   )
> }
>
> R CMD check:
> ...
> * checking for missing documentation entries ... WARNING
> Undocumented S4 classes:
>    "character or numeric"
> All user-level objects in a package (including S4 classes and methods)
> should have documentation entries.
> ...
>
> Bit of information: I am running the R CMD check with R 3.6.1 (sorry, I
> cannot update on my corporate machine :( )
>
> Thanks in advance for your help
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
David Kepplinger, PhD
https://www.dkepplinger.org

	[[alternative HTML version deleted]]


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Wed Feb 10 01:52:59 2021
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Wed, 10 Feb 2021 00:52:59 +0000
Subject: [R-pkg-devel] 
 How to get rid of R CMD check warning/note for new S4 classes
In-Reply-To: <CAGmyFCHZ7wqATDGsyRO=98L+X1PURSevgyGqHTCStGXH_HzUvw@mail.gmail.com>
References: <MN2PR19MB4110E0F6516AEDF69B4E76C1928E9@MN2PR19MB4110.namprd19.prod.outlook.com>,
 <CAGmyFCHZ7wqATDGsyRO=98L+X1PURSevgyGqHTCStGXH_HzUvw@mail.gmail.com>
Message-ID: <MN2PR19MB4110865B68A979CD3DD49BB9928D9@MN2PR19MB4110.namprd19.prod.outlook.com>

Thanks David

I will work in this direction.

From: David Kepplinger <david.kepplinger at gmail.com>
Sent: Tuesday, February 9, 2021 19:11
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>
Cc: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] How to get rid of R CMD check warning/note for new S4 classes 
?
Dear Sabastien,

Your second approach is correct, but as the warning suggests, you have to document the S4 class "character or NULL". The documentation at https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-S4-classes-and-methods should get you started.

Best,
David

On Tue, Feb 9, 2021 at 6:54 PM Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com> wrote:
Hi 

I posted the following message on Jan 2nd and got no response... Assuming that my timing was off (everybody was probably still on vacation or recovering from New Year's celebration), I am taking the liberty to post it again, hoping that I'll reach a larger audience today.

------

I am creating a few S4 classes for a package. These classes include slots set to classes obtained using setClassUnion (some common across the new S4 classes). The code is functional but `R CMD check` keeps on reporting notes or warnings whatever I try. I am pulling my hair on this one and would really appreciate some insight on what I am doing wrong. 


Below are some simplified versions of a real function, which each gives different note/warning:

* Option 1 returns a note

createyNewClass <- function(){
? setClassUnion("character or NULL",c("character","NULL"),where = .GlobalEnv)
? setClass('newS4Classe',
? ? where = .GlobalEnv, 
? ? slots = c(type = 'character or NULL'),
? ? prototype = list(type = NULL)
? )
}

R CMD check
...
* checking whether the namespace can be loaded with stated dependencies ... NOTE
Warning: class "NULL" is defined (with package slot "methods") but no metadata object found to revise superClass information---not exported?? Making a copy in package ".GlobalEnv"
Warning: class "character" is defined (with package slot "methods") but no metadata object found to revise superClass information---not exported?? Making a copy in package ".GlobalEnv"
...

* Option 2: returns a WARNING

createyNewClass <- function(){
? setClassUnion("character or NULL",c("character","NULL"))
? setClass('newS4Classe',
? ? slots = c(type = 'character or NULL'),
? ? prototype = list(type = NULL)
? )
}

R CMD check:
...
* checking for missing documentation entries ... WARNING 
Undocumented S4 classes: 
? ?"character or numeric"
All user-level objects in a package (including S4 classes and methods) 
should have documentation entries.
...

Bit of information: I am running the R CMD check with R 3.6.1 (sorry, I cannot update on my corporate machine :( )

Thanks in advance for your help
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


-- 
David Kepplinger, PhD
https://www.dkepplinger.org

From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Wed Feb 10 04:18:22 2021
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Wed, 10 Feb 2021 03:18:22 +0000
Subject: [R-pkg-devel] 
 How to get rid of R CMD check warning/note for new S4 classes
In-Reply-To: <CAGmyFCHZ7wqATDGsyRO=98L+X1PURSevgyGqHTCStGXH_HzUvw@mail.gmail.com>
References: <MN2PR19MB4110E0F6516AEDF69B4E76C1928E9@MN2PR19MB4110.namprd19.prod.outlook.com>,
 <CAGmyFCHZ7wqATDGsyRO=98L+X1PURSevgyGqHTCStGXH_HzUvw@mail.gmail.com>
Message-ID: <MN2PR19MB4110CA9086B3B381AFB01D8B928D9@MN2PR19MB4110.namprd19.prod.outlook.com>

Dear David,

A follow-up if you don't mind: one slot of my actual S4 object contains either NULL or a grid::frameGrob object. As you may know, frameGrob objects inherit from multiple S3 classes: "frame" "gTree" "grob" ?"gDesc".

Based upon my understanding of the documentation, I need to define my S4 class as follows using a setOldClass call for the S3 classes that are used in the setClassUnion call.

----
? setOldClass(c('frame','gTree','grob','gDesc'))
? setClassUnion('myFrame', c('frame','gTree','grob','gDesc','NULL'))
? 
? 
? setClass('myClass',
? ? where = .GlobalEnv, 
? ? slots = c(
????? grid.frame = 'myFrame',
? ? ),
? ? prototype = list(
? ? ? grid.frame = NULL,
? ? )
? )
----

This causes `R CMD check` to complain about "frame" "gTree" "grob"  "gDesc"
* checking for missing documentation entries ... WARNING
Undocumented S4 classes:
  "frame" "gTree" "grob"  "gDesc"
All user-level objects in a package (including S4 classes and methods)
should have documentation entries.

Including \alias{frame-class}, \alias{grob-class}, \alias{gTree-class}, \alias{gDesc-class} in my S4 class .Rd files prevents the WARNING to be reported, but this does not feel right, since these are classes from the grid package. Any suggestions?

Sebastien


-----------------------

From: David Kepplinger <david.kepplinger at gmail.com>
Sent: Tuesday, February 9, 2021 19:11
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>
Cc: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] How to get rid of R CMD check warning/note for new S4 classes 
?
Dear Sabastien,

Your second approach is correct, but as the warning suggests, you have to document the S4 class "character or NULL". The documentation at https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-S4-classes-and-methods should get you started.

Best,
David

On Tue, Feb 9, 2021 at 6:54 PM Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com> wrote:
Hi 

I posted the following message on Jan 2nd and got no response... Assuming that my timing was off (everybody was probably still on vacation or recovering from New Year's celebration), I am taking the liberty to post it again, hoping that I'll reach a larger audience today.

------

I am creating a few S4 classes for a package. These classes include slots set to classes obtained using setClassUnion (some common across the new S4 classes). The code is functional but `R CMD check` keeps on reporting notes or warnings whatever I try. I am pulling my hair on this one and would really appreciate some insight on what I am doing wrong. 


Below are some simplified versions of a real function, which each gives different note/warning:

* Option 1 returns a note

createyNewClass <- function(){
? setClassUnion("character or NULL",c("character","NULL"),where = .GlobalEnv)
? setClass('newS4Classe',
? ? where = .GlobalEnv, 
? ? slots = c(type = 'character or NULL'),
? ? prototype = list(type = NULL)
? )
}

R CMD check
...
* checking whether the namespace can be loaded with stated dependencies ... NOTE
Warning: class "NULL" is defined (with package slot "methods") but no metadata object found to revise superClass information---not exported?? Making a copy in package ".GlobalEnv"
Warning: class "character" is defined (with package slot "methods") but no metadata object found to revise superClass information---not exported?? Making a copy in package ".GlobalEnv"
...

* Option 2: returns a WARNING

createyNewClass <- function(){
? setClassUnion("character or NULL",c("character","NULL"))
? setClass('newS4Classe',
? ? slots = c(type = 'character or NULL'),
? ? prototype = list(type = NULL)
? )
}

R CMD check:
...
* checking for missing documentation entries ... WARNING 
Undocumented S4 classes: 
? ?"character or numeric"
All user-level objects in a package (including S4 classes and methods) 
should have documentation entries.
...

Bit of information: I am running the R CMD check with R 3.6.1 (sorry, I cannot update on my corporate machine :( )

Thanks in advance for your help
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


-- 
David Kepplinger, PhD
https://www.dkepplinger.org

From @|k@ben@wr@ @end|ng |rom roger@@com  Wed Feb 10 22:30:44 2021
From: @|k@ben@wr@ @end|ng |rom roger@@com (Alka Benawra)
Date: Wed, 10 Feb 2021 21:30:44 +0000 (UTC)
Subject: [R-pkg-devel] shinyjs functions not working in Packaged Shiny App
References: <304179041.315030.1612992644039.ref@mail.yahoo.com>
Message-ID: <304179041.315030.1612992644039@mail.yahoo.com>

Hi All,?
I am building a package for CRAN that uses some functions from the package shinyjs.
When I built my shiny app, I used the functions?useShinyjs and reset from the shinyjs package, and they worked perfectly.
I have transformed my app into a package for CRAN and now the functions from shinyjs no longer work.
I have researched the problem and asked on forums, but I have not been able to solve this problem.
I was wondering if anyone has encountered this issue before when packaging a Shiny app for CRAN, and if you might know what the problem/solution is.
If anyone has faced a similar issue and found a solution this would be greatly helpful to hear about.
Here is a link to my app wiki with the current code:?AlkaBenawra/MDMAPR

| 
| 
| 
|  |  |

 |

 |
| 
|  | 
AlkaBenawra/MDMAPR

Molecular Detection Mapping and Analysis Platform. Contribute to AlkaBenawra/MDMAPR development by creating an a...
 |

 |

 |




Thank you in advance for your help.
Regards,?
Alka
alkabenawra at rogers.com

	[[alternative HTML version deleted]]


From ev@n@b|eder@tedt @end|ng |rom gm@||@com  Thu Feb 11 08:28:52 2021
From: ev@n@b|eder@tedt @end|ng |rom gm@||@com (Evan Biederstedt)
Date: Thu, 11 Feb 2021 02:28:52 -0500
Subject: [R-pkg-devel] =?utf-8?q?R_package_check_stuck_on_=E2=80=9Cchecki?=
	=?utf-8?q?ng_use_of_S3_registration_=E2=80=A6=E2=80=9D?=
Message-ID: <CABFhwYMoSJ+NJRbcL0rjTgu4PKYL7Ng__rn9+X17dt1DtqPv6w@mail.gmail.com>

Hi there

Creating an R package here which I plan to upload to CRAN. Upon checking
the tarball created with `R CMD BUILD`, I try to use `R CMD CHECK` as
follows:

```
R CMD CHECK my_package.tar.gz --as-cran
```

This normally works smoothly. However, in this case, it is stuck on
`checking use of S3 registration` and has been there for several hours.
I've never experienced this before; here's the partial output I see:


```
...
 * checking package subdirectories ... OK
 * checking R files for non-ASCII characters ... OK
 * checking R files for syntax errors ... OK
 * checking whether the package can be loaded ... OK
 * checking whether the package can be loaded with stated dependencies ...
OK
 * checking whether the package can be unloaded cleanly ... OK
 * checking whether the namespace can be loaded with stated dependencies
... OK
 * checking whether the namespace can be unloaded cleanly ... OK
 * checking use of S3 registration ...
 ```

(1) What does `checking use of S3 registration` really mean?

(2) More importantly, why could it be stuck here? How could I fix this
issue?

Any insight or help greatly appreciated. Thanks!

	[[alternative HTML version deleted]]


From n@r@@ @end|ng |rom @t@n|ord@edu  Thu Feb 11 20:30:56 2021
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Thu, 11 Feb 2021 11:30:56 -0800
Subject: [R-pkg-devel] Subarchitectures
In-Reply-To: <a31e4609-3266-1c12-b17e-74347c6be002@gmail.com>
References: <8b793d35-a92e-e215-e70a-a3b95a695fab@gmail.com>
 <a31e4609-3266-1c12-b17e-74347c6be002@gmail.com>
Message-ID: <8c1cd737-2450-67ca-5dd9-a57533871865@stanford.edu>

If GNU make is acceptable as a system requirement, you can get any R 
configuration/runtime variable in Makevars, e.g.

R_ARCH=$(shell $(R_HOME)/bin/Rscript -e 'cat(.Platform$r_arch)')

-Naras

On 2/9/21 9:45 AM, Duncan Murdoch wrote:
> On 09/02/2021 11:01 a.m., Duncan Murdoch wrote:
>> I think the WRE manual says that an R_ARCH environment variable will be
>> set when subarchitectures are involved, but environment variables aren't
>> accessible in Makevars.
>
> Actually, I probably misread the section about environment variables.
>
> Duncan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb 11 21:27:19 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 11 Feb 2021 15:27:19 -0500
Subject: [R-pkg-devel] Subarchitectures
In-Reply-To: <8c1cd737-2450-67ca-5dd9-a57533871865@stanford.edu>
References: <8b793d35-a92e-e215-e70a-a3b95a695fab@gmail.com>
 <a31e4609-3266-1c12-b17e-74347c6be002@gmail.com>
 <8c1cd737-2450-67ca-5dd9-a57533871865@stanford.edu>
Message-ID: <a9021ad4-b300-74f4-0819-eb203c41f7ff@gmail.com>

On 11/02/2021 2:30 p.m., Balasubramanian Narasimhan wrote:
> If GNU make is acceptable as a system requirement, you can get any R
> configuration/runtime variable in Makevars, e.g.
> 
> R_ARCH=$(shell $(R_HOME)/bin/Rscript -e 'cat(.Platform$r_arch)')


I wanted to avoid it, since WRE discourages it so strongly.  What I 
ended up doing is putting the following into src/Makevars.in:

all: $(SHLIB) @HIDE_IF_NO_OPENGL@ ../inst/useNULL$(R_ARCH)/$(SHLIB)

../inst/useNULL$(R_ARCH)/$(SHLIB): $(SHLIB)
	cp -R *.cpp *.c *.h OpenGL useNULL
	cd useNULL;$(R_HOME)/bin/R CMD SHLIB -o $(SHLIB);rm *.cpp *.c *.h 
OpenGL/*; cd ..
	mkdir -p ../inst/useNULL$(R_ARCH)
	mv useNULL/$(SHLIB) ../inst/useNULL$(R_ARCH)/


The $(SHLIB) target should already have the subarchitecture in it. 
@HIDE_IF_NO_OPENGL@ is set by configure to "#" if OpenGL is not 
available for the build, so the second make target would be commented 
out.  If it's not commented out, then I copy all the source files into 
src/useNULL, and in that directory, I make $(SHLIB) again.  (There's 
another Makevars.in in that directory that has different compiler and 
linker options than the main one.)  Then I move the result to 
inst/useNULL$(R_ARCH)/, which will be inst/useNULL in most cases, but 
will have a subarchitecture directory added on if necessary.

This is complicated, partly because  R CMD check  has a bug 
(https://bugs.r-project.org/bugzilla/show_bug.cgi?id=18054) which means 
you will get check warnings if you try to register entry points in a DLL 
with any name except the same as the name of the package.  So to get a 
modified version of the main DLL, it has to have the same name but be 
stored somewhere else.

The version above passes checks, but it's pretty unusual, so I'm not 
certain it doesn't violate the intention of some rule or other.

Duncan Murdoch


From @r|e|92@nd @end|ng |rom gm@||@com  Fri Feb 12 08:45:02 2021
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Fri, 12 Feb 2021 02:45:02 -0500
Subject: [R-pkg-devel] Error occurring only when I submit to CRAN
Message-ID: <CALcKxsqAH_P=ou8=6mkJvDr-V5+2HXte5D65U8y_kh-N4gjWKg@mail.gmail.com>

Greetings,

I submitted my package CDatanet <https://github.com/ahoundetoungan/CDatanet>.
Before that I checked (as CRAN) locally on Linux and Windows and I did not
get any error. I only get a note about my address mail (which is normal).
However, when I submitted the package to CRAN, I got a warning and an error
with the Window server:  <http://goog_371023383/>
https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210208_174258/Windows/00check.log


* checking PDF version of manual ... WARNING

LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! Package inputenc Error: Unicode char ? (U+2010)
(inputenc)                not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
* checking PDF version of manual without hyperrefs or index ... ERROR
* checking for detritus in the temp directory ... OK
* DONE

Status: 1 ERROR, 1 WARNING, 1 NOTE


while the Debian server is ok:  <http://goog_371023385/>
https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210208_174258/Debian/00check.log

How can I fix this given that I am not able to reproduce the error locally?

Thank you very much for your help.

*-------------------------------------*

*Aristide Elys?e HOUNDETOUNGAN*
*Ph.D. Candidate in Economics at Universit? Laval*
*Personal website : *www.ahoundetoungan.com

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Feb 12 09:46:57 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 12 Feb 2021 11:46:57 +0300
Subject: [R-pkg-devel] Error occurring only when I submit to CRAN
In-Reply-To: <CALcKxsqAH_P=ou8=6mkJvDr-V5+2HXte5D65U8y_kh-N4gjWKg@mail.gmail.com>
References: <CALcKxsqAH_P=ou8=6mkJvDr-V5+2HXte5D65U8y_kh-N4gjWKg@mail.gmail.com>
Message-ID: <20210212114657.19a96b13@Tarkus>

On Fri, 12 Feb 2021 02:45:02 -0500
Elys?e Aristide <ariel92and at gmail.com> wrote:

> How can I fix this given that I am not able to reproduce the error
> locally?

Your LaTeX setup seems to have better Unicode support than the one
installed on CRAN machines. Try using tools::showNonASCIIfile on all
your *.Rd files to find the one containing a Unicode hyphen, then
replacing it with ASCII hyphen-minus.

I'm afraid that I'm finding your use of License: field a bit confusing.
"GPL-3 + file LICENSE" typically means that the package license
restricts a base license, the restrictions being provided in the
LICENSE file. In your case, LICENSE seems to contain the text
of Apache-2.0 license. Does it mean that some parts of the package are
GPL-3, while others are covered by the Apache license? If you want to
indicate that either license applies to the whole package, I think that
"GPL-3 | file LICENSE" would be a better fit. Apologies if you have
already clarified this particular usage with someone more knowledgeable
than me.

-- 
Best regards,
Ivan


From @ergue|@@oko| @end|ng |rom gm@||@com  Fri Feb 12 09:53:22 2021
From: @ergue|@@oko| @end|ng |rom gm@||@com (Sokol Serguei)
Date: Fri, 12 Feb 2021 09:53:22 +0100
Subject: [R-pkg-devel] Error occurring only when I submit to CRAN
In-Reply-To: <CALcKxsqAH_P=ou8=6mkJvDr-V5+2HXte5D65U8y_kh-N4gjWKg@mail.gmail.com>
References: <CALcKxsqAH_P=ou8=6mkJvDr-V5+2HXte5D65U8y_kh-N4gjWKg@mail.gmail.com>
Message-ID: <f5f87910-5720-5ecb-f28b-b241597526f0@gmail.com>

Le 12/02/2021 ? 08:45, Elys?e Aristide a ?crit?:
> Greetings,
>
> I submitted my package CDatanet <https://github.com/ahoundetoungan/CDatanet>.
> Before that I checked (as CRAN) locally on Linux and Windows and I did not
> get any error. I only get a note about my address mail (which is normal).
> However, when I submitted the package to CRAN, I got a warning and an error
> with the Window server:  <http://goog_371023383/>
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210208_174258/Windows/00check.log
>
>
> * checking PDF version of manual ... WARNING
>
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! Package inputenc Error: Unicode char ? (U+2010)

This is a frequent source of errors. Somewhere in your manual there is a 
unicode 2010 hyphen "?" ( https://www.compart.com/fr/unicode/U+2010 ) 
instead of plain ASCII hyphen "-". They look pretty similar, don't they? 
May be you did some copy/paste from e.g. a pdf file and thus got this 
character in your texts.

Supposing that it is not so critical for your documentation to have 
U+2010 char, you can replace it by a hyphen from your keyboard. To spot 
its exact place you can try |tools::showNonASCIIfile().|

|Best,
Serguei.|

|
|

> (inputenc)                not set up for use with LaTeX.
>
> See the inputenc package documentation for explanation.
> Type  H <return>  for immediate help.
> * checking PDF version of manual without hyperrefs or index ... ERROR
> * checking for detritus in the temp directory ... OK
> * DONE
>
> Status: 1 ERROR, 1 WARNING, 1 NOTE
>
>
> while the Debian server is ok:  <http://goog_371023385/>
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210208_174258/Debian/00check.log
>
> How can I fix this given that I am not able to reproduce the error locally?
>
> Thank you very much for your help.
>
> *-------------------------------------*
>
> *Aristide Elys?e HOUNDETOUNGAN*
> *Ph.D. Candidate in Economics at Universit? Laval*
> *Personal website : *www.ahoundetoungan.com
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Feb 12 10:39:55 2021
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 12 Feb 2021 10:39:55 +0100
Subject: [R-pkg-devel] 
 =?utf-8?q?R_package_check_stuck_on_=E2=80=9Cchecki?=
 =?utf-8?q?ng_use_of_S3_registration_=E2=80=A6=E2=80=9D?=
In-Reply-To: <CABFhwYMoSJ+NJRbcL0rjTgu4PKYL7Ng__rn9+X17dt1DtqPv6w@mail.gmail.com>
References: <CABFhwYMoSJ+NJRbcL0rjTgu4PKYL7Ng__rn9+X17dt1DtqPv6w@mail.gmail.com>
Message-ID: <e6d3ad1a-c743-2697-69b0-58dab1f96fbb@gmail.com>

On 2/11/21 8:28 AM, Evan Biederstedt wrote:
> Hi there
>
> Creating an R package here which I plan to upload to CRAN. Upon checking
> the tarball created with `R CMD BUILD`, I try to use `R CMD CHECK` as
> follows:
>
> ```
> R CMD CHECK my_package.tar.gz --as-cran
> ```
>
> This normally works smoothly. However, in this case, it is stuck on
> `checking use of S3 registration` and has been there for several hours.
> I've never experienced this before; here's the partial output I see:
>
>
> ```
> ...
>   * checking package subdirectories ... OK
>   * checking R files for non-ASCII characters ... OK
>   * checking R files for syntax errors ... OK
>   * checking whether the package can be loaded ... OK
>   * checking whether the package can be loaded with stated dependencies ...
> OK
>   * checking whether the package can be unloaded cleanly ... OK
>   * checking whether the namespace can be loaded with stated dependencies
> ... OK
>   * checking whether the namespace can be unloaded cleanly ... OK
>   * checking use of S3 registration ...
>   ```
>
> (1) What does `checking use of S3 registration` really mean?
Reporting when S3 methods in base/recommended packages are overwritten 
by the checked package. These things are documented in R Internals 
manual, search for _R_CHECK_OVERWRITE_REGISTERED_S3_METHODS_. In the 
source code 
(https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) look for 
the same variable or "use of S3 registration".
> (2) More importantly, why could it be stuck here? How could I fix this
> issue?

In principle, you could check if your package is doing something special 
re S3 methods registration and experiment with that to see when the 
problem disappears. Or you could debug on the R end (build R with debug 
symbols, run the example, connect to R via gdb, print the stacktrace, 
etc, etc.). Or create a minimal reproducible example so that someone 
else could do that, instead. In either case, it would be interesting to 
know the cause to see if the checking could be made more robust.

Best
Tomas

> Any insight or help greatly appreciated. Thanks!
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From chr|@ho|d @end|ng |rom p@yctc@org  Fri Feb 12 12:28:23 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Fri, 12 Feb 2021 11:28:23 +0000 (GMT)
Subject: [R-pkg-devel] How to build *-package description from *-package.R
 files ... and a luser/newbie question about pkgdown
Message-ID: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>

This feels embarrassingly trivial compared with most of the posts I try to understand here: apologies.

I am taking my first clumsy steps to build my own library of source code functions I have created and use a lot and want to share with a few collaborators.  I tried once before, a few years ago and failed to show the perseverance to succeed.  With help from so many wonderful tools so many people have created, and working in Rstudio, I do now have a package with some functions that work and a bit of function documentation.  It's at https://github.com/cpsyctc/CECPfuns if that helps anyone help me with my questions below ... if you do look you'll see it's just a baby steps as yet and there's a huge amount still to do.

Q1: I don't envisage it ever going beyond github but I would still like to document it well.  I am starting to understand documenting functions using the Code, Document in Rstudio and seem to have found good examples and documentation for that.  However, I am failing to find similar information about creating the CECPfuns-package documentation I would like to build.  I have a CECPfuns-package.R that I think I created with a packaged function that generates that skeleton (embarrassingly, I have forgotten now what that was).   I think that created my CECPfuns-package.Rd so I do have a vestigial answer to CECPfuns-package.  I also have a CECPfuns-package.Rd file generated with utils::promptPackage but I have left this in my package root directory (against the warning note) as it looks as if people recommend creating package documentation from *-package.R files in the R directory and I guess I'd prefer not to have to learn .Rd syntax if I can stick with working from R (or Rmd?).  I did create a minimal one but CECPfuns.R (in the R directory) but I'm not sure what syntax I should be using to build on that.  So ...  I would really like to find advice on how to build CECPfuns-package docucmentation from that file or I'd love it if someone has created package documentation from a *-package.R file they'd be willing to share with me.

Q2: I think I have realised that the html structure for packages that I'm so used to on CRAN isn't built by default when you build a package and I think the process may be automated by the pkgDown package and I've tried that putting the output (again, against the warning note) into tempDir below my package root.  Again, though the documentation for pkgDown seem clear on the functions it seems (to me) thin on exactly what is being done and how, assuming it's possible, to elaborate on the html that generates, I am failing to find more on those topics.  
Q2a: is there any danger of overwriting anything important in my minimal github repository were I to use pkgDown::build_site() to write directly to that repository?
Q2b: is there more documentation on enhancing the site build_site() creates that I can read?

TIA and very best to all,

Chris

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Feb 12 14:50:01 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 12 Feb 2021 08:50:01 -0500
Subject: [R-pkg-devel] 
 How to build *-package description from *-package.R
 files ... and a luser/newbie question about pkgdown
In-Reply-To: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>
References: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>
Message-ID: <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>

On 12/02/2021 6:28 a.m., Chris Evans wrote:
> This feels embarrassingly trivial compared with most of the posts I try to understand here: apologies.
> 
> I am taking my first clumsy steps to build my own library of source code functions I have created and use a lot and want to share with a few collaborators.  I tried once before, a few years ago and failed to show the perseverance to succeed.  With help from so many wonderful tools so many people have created, and working in Rstudio, I do now have a package with some functions that work and a bit of function documentation.  It's at https://github.com/cpsyctc/CECPfuns if that helps anyone help me with my questions below ... if you do look you'll see it's just a baby steps as yet and there's a huge amount still to do.
> 
> Q1: I don't envisage it ever going beyond github but I would still like to document it well.  I am starting to understand documenting functions using the Code, Document in Rstudio and seem to have found good examples and documentation for that.  However, I am failing to find similar information about creating the CECPfuns-package documentation I would like to build.  I have a CECPfuns-package.R that I think I created with a packaged function that generates that skeleton (embarrassingly, I have forgotten now what that was).   I think that created my CECPfuns-package.Rd so I do have a vestigial answer to CECPfuns-package.  I also have a CECPfuns-package.Rd file generated with utils::promptPackage but I have left this in my package root directory (against the warning note) as it looks as if people recommend creating package documentation from *-package.R files in the R directory and I guess I'd prefer not to have to learn .Rd syntax if I can stick with working from R (or Rmd?).  I did c
>   reate a minimal one but CECPfuns.R (in the R directory) but I'm not sure what syntax I should be using to build on that.  So ...  I would really like to find advice on how to build CECPfuns-package docucmentation from that file or I'd love it if someone has created package documentation from a *-package.R file they'd be willing to share with me.

There are two general approaches for writing help pages in R.

The older approach (that I use) is to use functions like prompt() and 
promptPackage() to create skeletons of documentation in the man 
directory, then edit them by hand.  The main disadvantage of this 
approach is that the Rd format is pretty ugly:  it's kind of like LaTeX, 
but different enough that even if you know LaTeX, you'll have to spend 
some time learning it.  It's also a bit of a pain to keep your 
documentation in sync with your source code:  when you change the 
arguments to a function, you don't get automatic changes to the help page.

RStudio has pretty good support for this approach, in that you can 
preview the pages as you work on them, it knows a bit about their syntax 
so things are highlighted nicely, and there are easy methods to jump 
from a function to the corresponding .Rd file.

To set this up you uncheck the "Generate documentation with ROxygen" 
option in the project build tools options.  That's it!

The approach that a lot of newer packages use is to generate the .Rd 
files from comments in the .R files using Roxygen2.  In recent versions 
of Roxygen2, what you type can be entered in Markdown instead of Rd 
format.  Some parts of the Rd file will be generated automatically, so 
you don't need to type them at all:  that's another advantage.

What I don't like about this approach is:

  - Mixing source code and documentation makes your source files bigger 
which discourages careful documentation and makes it harder to read the 
code.  Source and docs are different things, so in my opinion, they 
shouldn't be mixed in the same file.

  - I don't think RStudio supports a "Preview" for the help page for a 
function (but I might be wrong about this, since I don't use it much).

On the other hand, it's definitely quicker to learn and to get minimal 
documentation out of the Roxygen approach.

In my opinion, what would be ideal is to have separate files for source 
and docs, with a less ugly format for the docs, and some kind of 
automatic link between source and doc files so updates to one are 
reflected in the other (or at least differences are signalled).


> Q2: I think I have realised that the html structure for packages that I'm so used to on CRAN isn't built by default when you build a package and I think the process may be automated by the pkgDown package and I've tried that putting the output (again, against the warning note) into tempDir below my package root.  Again, though the documentation for pkgDown seem clear on the functions it seems (to me) thin on exactly what is being done and how, assuming it's possible, to elaborate on the html that generates, I am failing to find more on those topics.
> Q2a: is there any danger of overwriting anything important in my minimal github repository were I to use pkgDown::build_site() to write directly to that repository?
> Q2b: is there more documentation on enhancing the site build_site() creates that I can read?
> 

I don't use pkgDown, so can't comment on these questions.

Duncan Murdoch

From chr|@ho|d @end|ng |rom p@yctc@org  Fri Feb 12 15:59:00 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Fri, 12 Feb 2021 14:59:00 +0000 (GMT)
Subject: [R-pkg-devel] 
 How to build *-package description from *-package.R
 files ... and a luser/newbie question about pkgdown
In-Reply-To: <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>
References: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>
 <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>
Message-ID: <1770625490.3791415.1613141940946.JavaMail.zimbra@psyctc.org>

Thanks Duncan,

Some comments and hopes for others to follow that lead inline below but great to take from this an overarching 
idea that I am not just being dumb.  More below ...

----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Chris Evans" <chrishold at psyctc.org>, "r-package-devel" <r-package-devel at r-project.org>
> Sent: Friday, 12 February, 2021 13:50:01
> Subject: Re: [R-pkg-devel] How to build *-package description from *-package.R files ... and a luser/newbie question
> about pkgdown

> On 12/02/2021 6:28 a.m., Chris Evans wrote:
>> This feels embarrassingly trivial compared with most of the posts I try to
>> understand here: apologies.
>> 
>> I am taking my first clumsy steps to build my own library of source code
>> functions I have created and use a lot and want to share with a few
>> collaborators.  I tried once before, a few years ago and failed to show the
>> perseverance to succeed.  With help from so many wonderful tools so many people
>> have created, and working in Rstudio, I do now have a package with some
>> functions that work and a bit of function documentation.  It's at
>> https://github.com/cpsyctc/CECPfuns if that helps anyone help me with my
>> questions below ... if you do look you'll see it's just a baby steps as yet and
>> there's a huge amount still to do.
>> 
>> Q1: I don't envisage it ever going beyond github but I would still like to
>> document it well.  I am starting to understand documenting functions using the
>> Code, Document in Rstudio and seem to have found good examples and
>> documentation for that.  However, I am failing to find similar information
>> about creating the CECPfuns-package documentation I would like to build.  I
>> have a CECPfuns-package.R that I think I created with a packaged function that
>> generates that skeleton (embarrassingly, I have forgotten now what that was).
>> I think that created my CECPfuns-package.Rd so I do have a vestigial answer
>> to CECPfuns-package.  I also have a CECPfuns-package.Rd file generated with
>> utils::promptPackage but I have left this in my package root directory (against
>> the warning note) as it looks as if people recommend creating package
>> documentation from *-package.R files in the R directory and I guess I'd prefer
>> not to have to learn .Rd syntax if I can stick with working from R (or Rmd?).
>> I did c
>>   reate a minimal one but CECPfuns.R (in the R directory) but I'm not sure what
>>   syntax I should be using to build on that.  So ...  I would really like to find
>>   advice on how to build CECPfuns-package docucmentation from that file or I'd
>>   love it if someone has created package documentation from a *-package.R file
>>   they'd be willing to share with me.
> 
> There are two general approaches for writing help pages in R.
> 
> The older approach (that I use) is to use functions like prompt() and
> promptPackage() to create skeletons of documentation in the man
> directory, then edit them by hand.  The main disadvantage of this
> approach is that the Rd format is pretty ugly:  it's kind of like LaTeX,
> but different enough that even if you know LaTeX, you'll have to spend
> some time learning it.  It's also a bit of a pain to keep your
> documentation in sync with your source code:  when you change the
> arguments to a function, you don't get automatic changes to the help page.
> 
> RStudio has pretty good support for this approach, in that you can
> preview the pages as you work on them, it knows a bit about their syntax
> so things are highlighted nicely, and there are easy methods to jump
> from a function to the corresponding .Rd file.

Yes. I can see the arguments you make below about mixing source and 
documentation but I have found the Rstudio help with documenting 
functions at least a very good starting point.  It, i.e. Rstudio,
just doesn't seem to have created something for documentation of a
package.
 
> To set this up you uncheck the "Generate documentation with ROxygen"
> option in the project build tools options.  That's it!

Yup.  I like it!
 
> The approach that a lot of newer packages use is to generate the .Rd
> files from comments in the .R files using Roxygen2.  In recent versions
> of Roxygen2, what you type can be entered in Markdown instead of Rd
> format.  Some parts of the Rd file will be generated automatically, so
> you don't need to type them at all:  that's another advantage.

Again, yes, I have been following the "Rstudio wrapped" version of this
so far and again, can see your points but it feels a bit the mixing of
code and commentary feels familiar to me from mixing code blocks and 
text blocks in Rmarkdown (I can see it's not quite the same but I think
some years now using Rmarkdown made this easier to accept and start 
using).
> 
> What I don't like about this approach is:
> 
>  - Mixing source code and documentation makes your source files bigger
> which discourages careful documentation and makes it harder to read the
> code.  Source and docs are different things, so in my opinion, they
> shouldn't be mixed in the same file.
> 
>  - I don't think RStudio supports a "Preview" for the help page for a
> function (but I might be wrong about this, since I don't use it much).

I haven't found it if it is there.  I'm guessing you use ESS?

> On the other hand, it's definitely quicker to learn and to get minimal
> documentation out of the Roxygen approach.
> 
> In my opinion, what would be ideal is to have separate files for source
> and docs, with a less ugly format for the docs, and some kind of
> automatic link between source and doc files so updates to one are
> reflected in the other (or at least differences are signalled).

Understood and all helpful and reassuring me that I may not have missed something
very obvious.  In some ways the funny thing about creating a xxxx-package.R file
to create the package document is a sort of edge case of what you're saying: it's 
creating a file that says it's a source code file when it won't actually contain
any source code at all!  However, I think that's what I see pointers suggesting
it's what I should do ... but not much on how.
> 
> 
>> Q2: I think I have realised that the html structure for packages that I'm so
>> used to on CRAN isn't built by default when you build a package and I think the
>> process may be automated by the pkgDown package and I've tried that putting the
>> output (again, against the warning note) into tempDir below my package root.
>> Again, though the documentation for pkgDown seem clear on the functions it
>> seems (to me) thin on exactly what is being done and how, assuming it's
>> possible, to elaborate on the html that generates, I am failing to find more on
>> those topics.
>> Q2a: is there any danger of overwriting anything important in my minimal github
>> repository were I to use pkgDown::build_site() to write directly to that
>> repository?
>> Q2b: is there more documentation on enhancing the site build_site() creates that
>> I can read?
>> 
> 
> I don't use pkgDown, so can't comment on these questions.

Thanks though!!

Very best all,

Chris
> 
> Duncan Murdoch

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Feb 12 16:40:25 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 12 Feb 2021 10:40:25 -0500
Subject: [R-pkg-devel] 
 How to build *-package description from *-package.R
 files ... and a luser/newbie question about pkgdown
In-Reply-To: <1770625490.3791415.1613141940946.JavaMail.zimbra@psyctc.org>
References: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>
 <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>
 <1770625490.3791415.1613141940946.JavaMail.zimbra@psyctc.org>
Message-ID: <1c5aaa3f-8154-b920-7c02-da994df9bc55@gmail.com>

Just one clarification:

On 12/02/2021 9:59 a.m., Chris Evans wrote:
[ lots deleted ]

>>   - I don't think RStudio supports a "Preview" for the help page for a
>> function (but I might be wrong about this, since I don't use it much).
> 
> I haven't found it if it is there.  I'm guessing you use ESS?

No, I use RStudio.  When I said "I don't use it much", I meant Roxygen2.

Duncan Murdoch


From chr|@ho|d @end|ng |rom p@yctc@org  Fri Feb 12 16:52:13 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Fri, 12 Feb 2021 15:52:13 +0000 (GMT)
Subject: [R-pkg-devel] 
 How to build *-package description from *-package.R
 files ... and a luser/newbie question about pkgdown
In-Reply-To: <1c5aaa3f-8154-b920-7c02-da994df9bc55@gmail.com>
References: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>
 <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>
 <1770625490.3791415.1613141940946.JavaMail.zimbra@psyctc.org>
 <1c5aaa3f-8154-b920-7c02-da994df9bc55@gmail.com>
Message-ID: <838107979.4017992.1613145133158.JavaMail.zimbra@psyctc.org>

Apologies, I think that was clear.   

Do you or anyone else have an example of a ****-package.R that Rstudio's check has built into a package documentation file that was well populated and useful?

I think that's the key exemplar I am seeking and I'm finding it hard to craft any web search that finds me such a thing.

Any offer?!  TIA,

Chris

----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Chris Evans" <chrishold at psyctc.org>
> Cc: "r-package-devel" <r-package-devel at r-project.org>
> Sent: Friday, 12 February, 2021 15:40:25
> Subject: Re: [R-pkg-devel] How to build *-package description from *-package.R files ... and a luser/newbie question
> about pkgdown

> Just one clarification:
> 
> On 12/02/2021 9:59 a.m., Chris Evans wrote:
> [ lots deleted ]
> 
>>>   - I don't think RStudio supports a "Preview" for the help page for a
>>> function (but I might be wrong about this, since I don't use it much).
>> 
>> I haven't found it if it is there.  I'm guessing you use ESS?
> 
> No, I use RStudio.  When I said "I don't use it much", I meant Roxygen2.
> 
> Duncan Murdoch

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Feb 12 17:08:12 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 12 Feb 2021 19:08:12 +0300
Subject: [R-pkg-devel] Error occurring only when I submit to CRAN
In-Reply-To: <A12D9C80-4211-4F79-AC16-F61C01DB9999@getmailspring.com>
References: <20210212114657.19a96b13@Tarkus>
 <A12D9C80-4211-4F79-AC16-F61C01DB9999@getmailspring.com>
Message-ID: <20210212190812.640b2619@Tarkus>

On Fri, 12 Feb 2021 09:47:37 -0500
Elys?e Aristide <ariel92and at gmail.com> wrote:

> I did not want to put restrictions.

Apologies, I could have phrased this better.

If you want the whole of your package to be distributed under the terms
of Apache-2.0 or GPL-3 license (at the user's choosing), the following
DESCRIPTION fragment seems to be the way to express that intent:

License: GPL-3 | file LICENSE

> What is the better thing to put if I do not want to put
> restrictions? The easiest one which allows sharing, copying ...?

Personally, I would keep things simple by choosing only one license.
Exactly which one to choose is a question of personal preference, as
such known to result in flame wars, so I must try to stay neutral.

For R packages, the line between Apache-style "please retain the
copyright notice if you redistribute" licenses and GPL-style "please
share your improvements as source code if you redistribute" is somewhat
blurry, since people typically share source .tar.gz packages anyway,
thus fulfilling the terms of both licenses. The differences only come
into play only when other people distribute the _binary_ packages built
from your source code they _modified_.

Perhaps re-reading WRE 1.1.2
<https://cran.r-project.org/doc/manuals/R-exts.html#Licensing> or
consulting websites like <https://beza1e1.tuxen.de/licences/> or
<https://choosealicense.com/> would help?

-- 
Best regards,
Ivan

[If you don't mind, let's keep this correspondence on the list by
replying-to-all and Cc:-ing <r-package-devel at r-project.org>]


From c|yde @end|ng |rom duke@edu  Fri Feb 12 17:34:21 2021
From: c|yde @end|ng |rom duke@edu (Merlise Clyde, Ph.D.)
Date: Fri, 12 Feb 2021 16:34:21 +0000
Subject: [R-pkg-devel] 
 How to build *-package description from *-package.R
 files ... and a luser/newbie question about pkgdown
In-Reply-To: <838107979.4017992.1613145133158.JavaMail.zimbra@psyctc.org>
References: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>
 <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>
 <1770625490.3791415.1613141940946.JavaMail.zimbra@psyctc.org>
 <1c5aaa3f-8154-b920-7c02-da994df9bc55@gmail.com>
 <838107979.4017992.1613145133158.JavaMail.zimbra@psyctc.org>
Message-ID: <3F104082-1311-4BF8-B5FB-12D3129C8368@duke.edu>

Chris,

I have migrated from Travis CI to using GitHub actions with pkgdown to build websites for packages - see https://ropenscilabs.github.io/actions_sandbox/websites-using-pkgdown-bookdown-and-blogdown.html   to set up.  The GitHub action doesn?t use Rstudio?s check but does automatically update the documentation when the master branch is pushed to GitHub.

An example is at https://merliseclyde.github.io/BAS/index.html. (package is at  https://github.com/merliseclyde/BAS  ).  One that is a work in progress is https://merliseclyde.github.io/bark - which was built from the start using the approach documented above  - there is less customization there.

I do use pkgdown::build_site() in RStudio to preview the package documentation locally as well.

For documentation I did migrate to using roxygen2 several years ago from writing my own Rd files.   I like the checks that it keeps the documentation in sync with changes in the function.   The R Packages book by Hadley Wickham and Jennifer Bryan has a nice chapter on this https://r-pkgs.org/man.html

HTH,
Merlise


On Feb 12, 2021, at 10:52 AM, Chris Evans <chrishold at psyctc.org<mailto:chrishold at psyctc.org>> wrote:

Apologies, I think that was clear.

Do you or anyone else have an example of a ****-package.R that Rstudio's check has built into a package documentation file that was well populated and useful?

I think that's the key exemplar I am seeking and I'm finding it hard to craft any web search that finds me such a thing.

Any offer?!  TIA,

Chris

----- Original Message -----
From: "Duncan Murdoch" <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>>
To: "Chris Evans" <chrishold at psyctc.org<mailto:chrishold at psyctc.org>>
Cc: "r-package-devel" <r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
Sent: Friday, 12 February, 2021 15:40:25
Subject: Re: [R-pkg-devel] How to build *-package description from *-package.R files ... and a luser/newbie question
about pkgdown

Just one clarification:

On 12/02/2021 9:59 a.m., Chris Evans wrote:
[ lots deleted ]

 - I don't think RStudio supports a "Preview" for the help page for a
function (but I might be wrong about this, since I don't use it much).

I haven't found it if it is there.  I'm guessing you use ESS?

No, I use RStudio.  When I said "I don't use it much", I meant Roxygen2.

Duncan Murdoch

--
Small contribution in our coronavirus rigours:
https://urldefense.com/v3/__https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/__;!!OToaGQ!45073YCQi3iDpv-jsIpt6ldCqHiDJ82m8qfIDzmDQCY8ylUAdVGI2QynmVkB-Q$

Chris Evans <chris at psyctc.org<mailto:chris at psyctc.org>> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk<mailto:chris.evans at sheffield.ac.uk>>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk<mailto:chris.evans at roehampton.ac.uk>> and other places
but <chris at psyctc.org<mailto:chris at psyctc.org>> remains my main Email address.  I have a work web site at:
  https://urldefense.com/v3/__https://www.psyctc.org/psyctc/__;!!OToaGQ!45073YCQi3iDpv-jsIpt6ldCqHiDJ82m8qfIDzmDQCY8ylUAdVGI2QwOCEPWRQ$
and a site I manage for CORE and CORE system trust at:
  https://urldefense.com/v3/__http://www.coresystemtrust.org.uk/__;!!OToaGQ!45073YCQi3iDpv-jsIpt6ldCqHiDJ82m8qfIDzmDQCY8ylUAdVGI2Qyu3htuDg$
I have "semigrated" to France, see:
  https://urldefense.com/v3/__https://www.psyctc.org/pelerinage2016/semigrating-to-france/__;!!OToaGQ!45073YCQi3iDpv-jsIpt6ldCqHiDJ82m8qfIDzmDQCY8ylUAdVGI2QyONvQeUQ$
  https://urldefense.com/v3/__https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/__;!!OToaGQ!45073YCQi3iDpv-jsIpt6ldCqHiDJ82m8qfIDzmDQCY8ylUAdVGI2QwVWvJAKw$

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
  https://urldefense.com/v3/__https://www.psyctc.org/pelerinage2016/ceworkdiary/__;!!OToaGQ!45073YCQi3iDpv-jsIpt6ldCqHiDJ82m8qfIDzmDQCY8ylUAdVGI2QxG-x5SrA$
Beware: French time, generally an hour ahead of UK.

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-package-devel__;!!OToaGQ!45073YCQi3iDpv-jsIpt6ldCqHiDJ82m8qfIDzmDQCY8ylUAdVGI2QzeeqHk1w$


	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Fri Feb 12 17:37:50 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 12 Feb 2021 16:37:50 +0000
Subject: [R-pkg-devel] 
 How to build *-package description from *-package.R
 files ... and a luser/newbie question about pkgdown
In-Reply-To: <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>
References: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>
 <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>
Message-ID: <LOYP265MB20156AFC58E525217668D516AE8B9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

Regarding 'pkgdown', can't you just use the default directory , docs/, that pkgdown populates? When you push to your repository, github will automatically regenerate the pkgdown website (for this to work, you need to go to the settings on your github repo and activate building the website). 

As to documentation, go to the github site of pkgdown and start from there. To customise the site, you can add an yaml file, as documented in pkgdown. 

I am not sure why you wish to use DIY directory for the site generated by pkgdown. When you run build_site(), pkgdown builds it and opens it in a browser by default. Also, it only rebuilds the pages that have changed since the previous built. So, it is useful also during development. I don't remember at the moment if you could even set it up to watch for changes in the package and rebuild the site behind the scene. 


Georgi Boshnakov


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Duncan Murdoch
Sent: 12 February 2021 13:50
To: Chris Evans <chrishold at psyctc.org>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] How to build *-package description from *-package.R files ... and a luser/newbie question about pkgdown

On 12/02/2021 6:28 a.m., Chris Evans wrote:
> This feels embarrassingly trivial compared with most of the posts I try to understand here: apologies.
> 
> I am taking my first clumsy steps to build my own library of source code functions I have created and use a lot and want to share with a few collaborators.  I tried once before, a few years ago and failed to show the perseverance to succeed.  With help from so many wonderful tools so many people have created, and working in Rstudio, I do now have a package with some functions that work and a bit of function documentation.  It's at https://github.com/cpsyctc/CECPfuns if that helps anyone help me with my questions below ... if you do look you'll see it's just a baby steps as yet and there's a huge amount still to do.
> 
> Q1: I don't envisage it ever going beyond github but I would still like to document it well.  I am starting to understand documenting functions using the Code, Document in Rstudio and seem to have found good examples and documentation for that.  However, I am failing to find similar information about creating the CECPfuns-package documentation I would like to build.  I have a CECPfuns-package.R that I think I created with a packaged function that generates that skeleton (embarrassingly, I have forgotten now what that was).   I think that created my CECPfuns-package.Rd so I do have a vestigial answer to CECPfuns-package.  I also have a CECPfuns-package.Rd file generated with utils::promptPackage but I have left this in my package root directory (against the warning note) as it looks as if people recommend creating package documentation from *-package.R files in the R directory and I guess I'd prefer not to have to learn .Rd syntax if I can stick with working from R (or Rmd?).  I did
  c
>   reate a minimal one but CECPfuns.R (in the R directory) but I'm not sure what syntax I should be using to build on that.  So ...  I would really like to find advice on how to build CECPfuns-package docucmentation from that file or I'd love it if someone has created package documentation from a *-package.R file they'd be willing to share with me.

There are two general approaches for writing help pages in R.

The older approach (that I use) is to use functions like prompt() and
promptPackage() to create skeletons of documentation in the man directory, then edit them by hand.  The main disadvantage of this approach is that the Rd format is pretty ugly:  it's kind of like LaTeX, but different enough that even if you know LaTeX, you'll have to spend some time learning it.  It's also a bit of a pain to keep your documentation in sync with your source code:  when you change the arguments to a function, you don't get automatic changes to the help page.

RStudio has pretty good support for this approach, in that you can preview the pages as you work on them, it knows a bit about their syntax so things are highlighted nicely, and there are easy methods to jump from a function to the corresponding .Rd file.

To set this up you uncheck the "Generate documentation with ROxygen" 
option in the project build tools options.  That's it!

The approach that a lot of newer packages use is to generate the .Rd files from comments in the .R files using Roxygen2.  In recent versions of Roxygen2, what you type can be entered in Markdown instead of Rd format.  Some parts of the Rd file will be generated automatically, so you don't need to type them at all:  that's another advantage.

What I don't like about this approach is:

  - Mixing source code and documentation makes your source files bigger which discourages careful documentation and makes it harder to read the code.  Source and docs are different things, so in my opinion, they shouldn't be mixed in the same file.

  - I don't think RStudio supports a "Preview" for the help page for a function (but I might be wrong about this, since I don't use it much).

On the other hand, it's definitely quicker to learn and to get minimal documentation out of the Roxygen approach.

In my opinion, what would be ideal is to have separate files for source and docs, with a less ugly format for the docs, and some kind of automatic link between source and doc files so updates to one are reflected in the other (or at least differences are signalled).


> Q2: I think I have realised that the html structure for packages that I'm so used to on CRAN isn't built by default when you build a package and I think the process may be automated by the pkgDown package and I've tried that putting the output (again, against the warning note) into tempDir below my package root.  Again, though the documentation for pkgDown seem clear on the functions it seems (to me) thin on exactly what is being done and how, assuming it's possible, to elaborate on the html that generates, I am failing to find more on those topics.
> Q2a: is there any danger of overwriting anything important in my minimal github repository were I to use pkgDown::build_site() to write directly to that repository?
> Q2b: is there more documentation on enhancing the site build_site() creates that I can read?
> 

I don't use pkgDown, so can't comment on these questions.

Duncan Murdoch
______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Fri Feb 12 17:47:14 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 12 Feb 2021 16:47:14 +0000
Subject: [R-pkg-devel] 
 How to build *-package description from *-package.R
 files ... and a luser/newbie question about pkgdown
In-Reply-To: <838107979.4017992.1613145133158.JavaMail.zimbra@psyctc.org>
References: <1192151299.3435429.1613129303982.JavaMail.zimbra@psyctc.org>
 <db5d270e-4cf8-4b5d-7fdc-11138799caea@gmail.com>
 <1770625490.3791415.1613141940946.JavaMail.zimbra@psyctc.org>
 <1c5aaa3f-8154-b920-7c02-da994df9bc55@gmail.com>
 <838107979.4017992.1613145133158.JavaMail.zimbra@psyctc.org>
Message-ID: <LOYP265MB2015A783D4F682A95F9D9616AE8B9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

Please note that most rooygen2 users don't call the overview file 'pkgname-package' but just 'pkgname'. 
Also, these days people mostly use README.md for approximately that purpose and put a very minimal statement in pkgname-package or equivalent.

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Chris Evans
Sent: 12 February 2021 15:52
To: Duncan Murdoch <murdoch.duncan at gmail.com>
Cc: r-package-devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] How to build *-package description from *-package.R files ... and a luser/newbie question about pkgdown

Apologies, I think that was clear.   

Do you or anyone else have an example of a ****-package.R that Rstudio's check has built into a package documentation file that was well populated and useful?

I think that's the key exemplar I am seeking and I'm finding it hard to craft any web search that finds me such a thing.

Any offer?!  TIA,

Chris

----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Chris Evans" <chrishold at psyctc.org>
> Cc: "r-package-devel" <r-package-devel at r-project.org>
> Sent: Friday, 12 February, 2021 15:40:25
> Subject: Re: [R-pkg-devel] How to build *-package description from 
> *-package.R files ... and a luser/newbie question about pkgdown

> Just one clarification:
> 
> On 12/02/2021 9:59 a.m., Chris Evans wrote:
> [ lots deleted ]
> 
>>>   - I don't think RStudio supports a "Preview" for the help page for 
>>> a function (but I might be wrong about this, since I don't use it much).
>> 
>> I haven't found it if it is there.  I'm guessing you use ESS?
> 
> No, I use RStudio.  When I said "I don't use it much", I meant Roxygen2.
> 
> Duncan Murdoch

--
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk> I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Fri Feb 12 21:51:43 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 12 Feb 2021 14:51:43 -0600
Subject: [R-pkg-devel] Subarchitectures
In-Reply-To: <8c1cd737-2450-67ca-5dd9-a57533871865@stanford.edu>
References: <8b793d35-a92e-e215-e70a-a3b95a695fab@gmail.com>
 <a31e4609-3266-1c12-b17e-74347c6be002@gmail.com>
 <8c1cd737-2450-67ca-5dd9-a57533871865@stanford.edu>
Message-ID: <24614.59999.899685.800630@rob.eddelbuettel.com>


On 11 February 2021 at 11:30, Balasubramanian Narasimhan wrote:
| If GNU make is acceptable as a system requirement, you can get any R 
| configuration/runtime variable in Makevars, e.g.
| 
| R_ARCH=$(shell $(R_HOME)/bin/Rscript -e 'cat(.Platform$r_arch)')

You can switch to backticks to not depend on bash so this

   R_ARCH=`"${R_HOME}/bin/Rscript" -e 'cat(.Platform$r_arch)'`

should work too.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Feb 13 10:58:28 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Feb 2021 04:58:28 -0500
Subject: [R-pkg-devel] Subarchitectures
In-Reply-To: <24614.59999.899685.800630@rob.eddelbuettel.com>
References: <8b793d35-a92e-e215-e70a-a3b95a695fab@gmail.com>
 <a31e4609-3266-1c12-b17e-74347c6be002@gmail.com>
 <8c1cd737-2450-67ca-5dd9-a57533871865@stanford.edu>
 <24614.59999.899685.800630@rob.eddelbuettel.com>
Message-ID: <2be729ed-2eb3-0138-ed08-4f39781cda14@gmail.com>

On 12/02/2021 3:51 p.m., Dirk Eddelbuettel wrote:
> 
> On 11 February 2021 at 11:30, Balasubramanian Narasimhan wrote:
> | If GNU make is acceptable as a system requirement, you can get any R
> | configuration/runtime variable in Makevars, e.g.
> |
> | R_ARCH=$(shell $(R_HOME)/bin/Rscript -e 'cat(.Platform$r_arch)')
> 
> You can switch to backticks to not depend on bash so this
> 
>     R_ARCH=`"${R_HOME}/bin/Rscript" -e 'cat(.Platform$r_arch)'`
> 
> should work too.

It didn't work for me, but I gave up on that approach pretty quickly so 
I might have made some other error that caused the failure.

Duncan Murdoch


From @r|e|92@nd @end|ng |rom gm@||@com  Sun Feb 14 00:06:20 2021
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Sat, 13 Feb 2021 18:06:20 -0500
Subject: [R-pkg-devel] Note: checking CRAN incoming feasibility but the
 package did not pass
Message-ID: <CALcKxsroAy3+2Vg6nnwr=93jWJBWjQKivGezDhVt2XWw+w=2gg@mail.gmail.com>

Greetings,

I submitted my package CDatanet.
There was no error from Windows and Debian but just this note : "checking
CRAN incoming feasibility"
However, the package did not pass the incoming checks. My understanding was
that this note is normal and does not matter.
Here is the message I got from CRAN.

package CDatanet_0.0.1.tar.gz does not pass the incoming checks
automatically, please see the following pre-tests:
Windows: <
https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Windows/00check.log
>
Status: 1 NOTE
Debian: <
https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Debian/00check.log
>
Status: 1 NOTE



Please fix all problems and resubmit a fixed version via the webform.


Please, could you help me to solve this issue?


Best,

*-------------------------------------*

*Aristide Elys?e HOUNDETOUNGAN*
*Ph.D. Candidate in Economics at Universit? Laval*
*Personal website : *www.ahoundetoungan.com

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Sun Feb 14 00:13:11 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sat, 13 Feb 2021 18:13:11 -0500
Subject: [R-pkg-devel] Note: checking CRAN incoming feasibility but the
 package did not pass
In-Reply-To: <CALcKxsroAy3+2Vg6nnwr=93jWJBWjQKivGezDhVt2XWw+w=2gg@mail.gmail.com>
References: <CALcKxsroAy3+2Vg6nnwr=93jWJBWjQKivGezDhVt2XWw+w=2gg@mail.gmail.com>
Message-ID: <13e6c214-bf8d-87e9-72fd-d940dd1e08f3@gmail.com>

   That's weird, I agree that there don't seem to be any issues here for 
you to deal with.  I would write back to CRAN (at whatever e-mail 
address is suggested for correspondence, cran at r-project.org if you can't 
figure it out) and ask for clarification  (presumably the e-mail didn't 
list any other issues they wanted you to fix? Sometimes there are issues 
that are on CRAN's checklist that are *not* tested automatically ...)

On 2/13/21 6:06 PM, Elys?e Aristide wrote:
> Greetings,
> 
> I submitted my package CDatanet.
> There was no error from Windows and Debian but just this note : "checking
> CRAN incoming feasibility"
> However, the package did not pass the incoming checks. My understanding was
> that this note is normal and does not matter.
> Here is the message I got from CRAN.
> 
> package CDatanet_0.0.1.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> Windows: <
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Windows/00check.log
>>
> Status: 1 NOTE
> Debian: <
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Debian/00check.log
>>
> Status: 1 NOTE
> 
> 
> 
> Please fix all problems and resubmit a fixed version via the webform.
> 
> 
> Please, could you help me to solve this issue?
> 
> 
> Best,
> 
> *-------------------------------------*
> 
> *Aristide Elys?e HOUNDETOUNGAN*
> *Ph.D. Candidate in Economics at Universit? Laval*
> *Personal website : *www.ahoundetoungan.com
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @r|e|92@nd @end|ng |rom gm@||@com  Sun Feb 14 00:13:48 2021
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Sat, 13 Feb 2021 18:13:48 -0500
Subject: [R-pkg-devel] Error occurring only when I submit to CRAN
In-Reply-To: <20210212190812.640b2619@Tarkus>
References: <20210212114657.19a96b13@Tarkus>
 <A12D9C80-4211-4F79-AC16-F61C01DB9999@getmailspring.com>
 <20210212190812.640b2619@Tarkus>
Message-ID: <CALcKxspu_bx4=6OQ4JCHa99NyLN2ZZv-h7YndKMKJ_3MQbPRnQ@mail.gmail.com>

Thank you for your explanation.

*-------------------------------------*

*Aristide Elys?e HOUNDETOUNGAN*
*Ph.D. Candidate in Economics at Universit? Laval*
*Personal website : *www.ahoundetoungan.com




On Fri, 12 Feb 2021 at 11:08, Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Fri, 12 Feb 2021 09:47:37 -0500
> Elys?e Aristide <ariel92and at gmail.com> wrote:
>
> > I did not want to put restrictions.
>
> Apologies, I could have phrased this better.
>
> If you want the whole of your package to be distributed under the terms
> of Apache-2.0 or GPL-3 license (at the user's choosing), the following
> DESCRIPTION fragment seems to be the way to express that intent:
>
> License: GPL-3 | file LICENSE
>
> > What is the better thing to put if I do not want to put
> > restrictions? The easiest one which allows sharing, copying ...?
>
> Personally, I would keep things simple by choosing only one license.
> Exactly which one to choose is a question of personal preference, as
> such known to result in flame wars, so I must try to stay neutral.
>
> For R packages, the line between Apache-style "please retain the
> copyright notice if you redistribute" licenses and GPL-style "please
> share your improvements as source code if you redistribute" is somewhat
> blurry, since people typically share source .tar.gz packages anyway,
> thus fulfilling the terms of both licenses. The differences only come
> into play only when other people distribute the _binary_ packages built
> from your source code they _modified_.
>
> Perhaps re-reading WRE 1.1.2
> <https://cran.r-project.org/doc/manuals/R-exts.html#Licensing> or
> consulting websites like <https://beza1e1.tuxen.de/licences/> or
> <https://choosealicense.com/> would help?
>
> --
> Best regards,
> Ivan
>
> [If you don't mind, let's keep this correspondence on the list by
> replying-to-all and Cc:-ing <r-package-devel at r-project.org>]
>

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sun Feb 14 00:44:53 2021
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 13 Feb 2021 15:44:53 -0800
Subject: [R-pkg-devel] Note: checking CRAN incoming feasibility but the
 package did not pass
In-Reply-To: <CALcKxsroAy3+2Vg6nnwr=93jWJBWjQKivGezDhVt2XWw+w=2gg@mail.gmail.com>
References: <CALcKxsroAy3+2Vg6nnwr=93jWJBWjQKivGezDhVt2XWw+w=2gg@mail.gmail.com>
Message-ID: <58DD070E-1F54-496D-815E-D0C16D1073C4@noaa.gov>

To the best of my knowledge,  new submissions always get that note,  and new submissions are handled differently, as they are given closer inspection by a human, and since this is all-volunteer the amount of time that can take for the code review can vary greatly.  If you are greatly concerned there is something more than that.  you can respond to the email querying if the only problem is the new submission and you should just sit tight,  or if there is something else.  Again,  since it is a few individuals it may take a couple of days to receive a response.  You can also check the status of your submission both at:

https://itsalocke.com/cransays/articles/dashboard

and

 ftp://cran.r-project.org/incoming/.

If all is going correctly your package should be in the "inspect" folding pending review.

HTH,

-Roy


> On Feb 13, 2021, at 3:06 PM, Elys?e Aristide <ariel92and at gmail.com> wrote:
> 
> Greetings,
> 
> I submitted my package CDatanet.
> There was no error from Windows and Debian but just this note : "checking
> CRAN incoming feasibility"
> However, the package did not pass the incoming checks. My understanding was
> that this note is normal and does not matter.
> Here is the message I got from CRAN.
> 
> package CDatanet_0.0.1.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> Windows: <
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Windows/00check.log
>> 
> Status: 1 NOTE
> Debian: <
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Debian/00check.log
>> 
> Status: 1 NOTE
> 
> 
> 
> Please fix all problems and resubmit a fixed version via the webform.
> 
> 
> Please, could you help me to solve this issue?
> 
> 
> Best,
> 
> *-------------------------------------*
> 
> *Aristide Elys?e HOUNDETOUNGAN*
> *Ph.D. Candidate in Economics at Universit? Laval*
> *Personal website : *www.ahoundetoungan.com
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Feb 14 01:33:34 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 14 Feb 2021 01:33:34 +0100
Subject: [R-pkg-devel] Note: checking CRAN incoming feasibility but the
 package did not pass
In-Reply-To: <CALcKxsroAy3+2Vg6nnwr=93jWJBWjQKivGezDhVt2XWw+w=2gg@mail.gmail.com>
References: <CALcKxsroAy3+2Vg6nnwr=93jWJBWjQKivGezDhVt2XWw+w=2gg@mail.gmail.com>
Message-ID: <2e55c576-a337-0a02-8c4f-0d7f3cd1f21b@statistik.tu-dortmund.de>

You should be reporting everything, the key issue here was

Check: Overall checktime, Result: NOTE
   Overall checktime 23 min > 10 min


which is mainly from the vignette.
Please reduce its check time by using
- few iterations
- toy data
- and if that is not quick enough, try to provide precomputed results.

CAN can also disable vignette checks for regular checks of a package, 
but that should always be the last option.

Best,
Uwe Ligges

On 14.02.2021 00:06, Elys?e Aristide wrote:
> Greetings,
> 
> I submitted my package CDatanet.
> There was no error from Windows and Debian but just this note : "checking
> CRAN incoming feasibility"
> However, the package did not pass the incoming checks. My understanding was
> that this note is normal and does not matter.
> Here is the message I got from CRAN.
> 
> package CDatanet_0.0.1.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> Windows: <
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Windows/00check.log
>>
> Status: 1 NOTE
> Debian: <
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Debian/00check.log
>>
> Status: 1 NOTE
> 
> 
> 
> Please fix all problems and resubmit a fixed version via the webform.
> 
> 
> Please, could you help me to solve this issue?
> 
> 
> Best,
> 
> *-------------------------------------*
> 
> *Aristide Elys?e HOUNDETOUNGAN*
> *Ph.D. Candidate in Economics at Universit? Laval*
> *Personal website : *www.ahoundetoungan.com
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @r|e|92@nd @end|ng |rom gm@||@com  Mon Feb 15 06:59:32 2021
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Mon, 15 Feb 2021 00:59:32 -0500
Subject: [R-pkg-devel] Note: checking CRAN incoming feasibility but the
 package did not pass
In-Reply-To: <2e55c576-a337-0a02-8c4f-0d7f3cd1f21b@statistik.tu-dortmund.de>
References: <CALcKxsroAy3+2Vg6nnwr=93jWJBWjQKivGezDhVt2XWw+w=2gg@mail.gmail.com>
 <2e55c576-a337-0a02-8c4f-0d7f3cd1f21b@statistik.tu-dortmund.de>
Message-ID: <CALcKxspviUxmeO5EkR0n0UhvsWXVdHwe_mXH=T=+4FNR8tEhag@mail.gmail.com>

Thank you very much.

I solved the issue with precomputed results.

Best,

*-------------------------------------*

*Aristide Elys?e HOUNDETOUNGAN*
*Ph.D. Candidate in Economics at Universit? Laval*
*Personal website : *www.ahoundetoungan.com




On Sat, 13 Feb 2021 at 19:33, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> You should be reporting everything, the key issue here was
>
> Check: Overall checktime, Result: NOTE
>    Overall checktime 23 min > 10 min
>
>
> which is mainly from the vignette.
> Please reduce its check time by using
> - few iterations
> - toy data
> - and if that is not quick enough, try to provide precomputed results.
>
> CAN can also disable vignette checks for regular checks of a package,
> but that should always be the last option.
>
> Best,
> Uwe Ligges
>
> On 14.02.2021 00:06, Elys?e Aristide wrote:
> > Greetings,
> >
> > I submitted my package CDatanet.
> > There was no error from Windows and Debian but just this note : "checking
> > CRAN incoming feasibility"
> > However, the package did not pass the incoming checks. My understanding
> was
> > that this note is normal and does not matter.
> > Here is the message I got from CRAN.
> >
> > package CDatanet_0.0.1.tar.gz does not pass the incoming checks
> > automatically, please see the following pre-tests:
> > Windows: <
> >
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Windows/00check.log
> >>
> > Status: 1 NOTE
> > Debian: <
> >
> https://win-builder.r-project.org/incoming_pretest/CDatanet_0.0.1_20210212_184621/Debian/00check.log
> >>
> > Status: 1 NOTE
> >
> >
> >
> > Please fix all problems and resubmit a fixed version via the webform.
> >
> >
> > Please, could you help me to solve this issue?
> >
> >
> > Best,
> >
> > *-------------------------------------*
> >
> > *Aristide Elys?e HOUNDETOUNGAN*
> > *Ph.D. Candidate in Economics at Universit? Laval*
> > *Personal website : *www.ahoundetoungan.com
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From w@ngz1 @end|ng |rom uth@c@@@edu  Mon Feb 15 21:38:52 2021
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Mon, 15 Feb 2021 20:38:52 +0000
Subject: [R-pkg-devel] How to fix a check error for a package in CRAN
Message-ID: <SN6PR10MB2432D2E4A8EE6B7C17D2726F9F889@SN6PR10MB2432.namprd10.prod.outlook.com>

Hello,

There is an error for R package mpath:

https://cran.r-project.org/web/checks/check_results_mpath.html

However, the information related to the error is not very helpful for me to fix the error:

https://www.r-project.org/nosvn/R.check/r-devel-windows-ix86+x86_64/mpath-00check.html


On the other hand, The same package seems to be ok on R Under development (unstable). I guess this is different from the platform where the error occurred in CRAN.

https://win-builder.r-project.org/Y272HSJc0X4T/00check.log

Any idea how to fix the error?

Many thanks,

Zhu

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb 15 21:44:47 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 15 Feb 2021 15:44:47 -0500
Subject: [R-pkg-devel] How to fix a check error for a package in CRAN
In-Reply-To: <SN6PR10MB2432D2E4A8EE6B7C17D2726F9F889@SN6PR10MB2432.namprd10.prod.outlook.com>
References: <SN6PR10MB2432D2E4A8EE6B7C17D2726F9F889@SN6PR10MB2432.namprd10.prod.outlook.com>
Message-ID: <a3702999-071e-5aa5-93ef-c065b2f620e6@gmail.com>

On 15/02/2021 3:38 p.m., Wang, Zhu wrote:
> Hello,
> 
> There is an error for R package mpath:
> 
> https://cran.r-project.org/web/checks/check_results_mpath.html
> 
> However, the information related to the error is not very helpful for me to fix the error:
> 
> https://www.r-project.org/nosvn/R.check/r-devel-windows-ix86+x86_64/mpath-00check.html
> 
> 
> On the other hand, The same package seems to be ok on R Under development (unstable). I guess this is different from the platform where the error occurred in CRAN.
> 
> https://win-builder.r-project.org/Y272HSJc0X4T/00check.log
> 
> Any idea how to fix the error?

It looks like some sort of transient problem on the test machine.  I'd 
ignore it unless you're submitting an update.  In that case, I'd comment 
on it in your submission comment, saying you haven't fixed one problem 
because it was not reproducible.

Duncan Murdoch


From w@ngz1 @end|ng |rom uth@c@@@edu  Mon Feb 15 21:47:52 2021
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Mon, 15 Feb 2021 20:47:52 +0000
Subject: [R-pkg-devel] How to fix a check error for a package in CRAN
In-Reply-To: <a3702999-071e-5aa5-93ef-c065b2f620e6@gmail.com>
References: <SN6PR10MB2432D2E4A8EE6B7C17D2726F9F889@SN6PR10MB2432.namprd10.prod.outlook.com>
 <a3702999-071e-5aa5-93ef-c065b2f620e6@gmail.com>
Message-ID: <SN6PR10MB243245F1BC682A39C715CDE79F889@SN6PR10MB2432.namprd10.prod.outlook.com>

Thanks Duncan - I am planning to submit an update, so I have to deal with the error message.

Best,
Zhu

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Monday, February 15, 2021 2:45 PM
To: Wang, Zhu <wangz1 at uthscsa.edu>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] How to fix a check error for a package in CRAN

On 15/02/2021 3:38 p.m., Wang, Zhu wrote:
> Hello,
> 
> There is an error for R package mpath:
> 
> https://cran.r-project.org/web/checks/check_results_mpath.html
> 
> However, the information related to the error is not very helpful for me to fix the error:
> 
> https://www.r-project.org/nosvn/R.check/r-devel-windows-ix86+x86_64/mp
> ath-00check.html
> 
> 
> On the other hand, The same package seems to be ok on R Under development (unstable). I guess this is different from the platform where the error occurred in CRAN.
> 
> https://win-builder.r-project.org/Y272HSJc0X4T/00check.log
> 
> Any idea how to fix the error?

It looks like some sort of transient problem on the test machine.  I'd ignore it unless you're submitting an update.  In that case, I'd comment on it in your submission comment, saying you haven't fixed one problem because it was not reproducible.

Duncan Murdoch

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Feb 16 17:35:48 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 16 Feb 2021 17:35:48 +0100
Subject: [R-pkg-devel] How to fix a check error for a package in CRAN
In-Reply-To: <SN6PR10MB243245F1BC682A39C715CDE79F889@SN6PR10MB2432.namprd10.prod.outlook.com>
References: <SN6PR10MB2432D2E4A8EE6B7C17D2726F9F889@SN6PR10MB2432.namprd10.prod.outlook.com>
 <a3702999-071e-5aa5-93ef-c065b2f620e6@gmail.com>
 <SN6PR10MB243245F1BC682A39C715CDE79F889@SN6PR10MB2432.namprd10.prod.outlook.com>
Message-ID: <2df9682e-a25a-3b04-14b9-9f901d7322b0@statistik.tu-dortmund.de>


On 15.02.2021 21:47, Wang, Zhu wrote:
> Thanks Duncan - I am planning to submit an update, so I have to deal with the error message.
> 
> Best,
> Zhu
> 
> -----Original Message-----
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Monday, February 15, 2021 2:45 PM
> To: Wang, Zhu <wangz1 at uthscsa.edu>; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] How to fix a check error for a package in CRAN
> 
> On 15/02/2021 3:38 p.m., Wang, Zhu wrote:
>> Hello,
>>
>> There is an error for R package mpath:
>>
>> https://cran.r-project.org/web/checks/check_results_mpath.html
>>
>> However, the information related to the error is not very helpful for me to fix the error:
>>
>> https://www.r-project.org/nosvn/R.check/r-devel-windows-ix86+x86_64/mp
>> ath-00check.html
>>
>>
>> On the other hand, The same package seems to be ok on R Under development (unstable). I guess this is different from the platform where the error occurred in CRAN.
>>
>> https://win-builder.r-project.org/Y272HSJc0X4T/00check.log
>>
>> Any idea how to fix the error?
> 
> It looks like some sort of transient problem on the test machine.  I'd ignore it unless you're submitting an update.  In that case, I'd comment on it in your submission comment, saying you haven't fixed one problem because it was not reproducible.

Indeed, you can ignore it. It will very likely go sway in the next 
regualar check run.


Best,
Uwe Ligges


> 
> Duncan Murdoch
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From bkum@r @end|ng |rom rocket@o|tw@re@com  Wed Feb 17 16:12:53 2021
From: bkum@r @end|ng |rom rocket@o|tw@re@com (Binit Kumar)
Date: Wed, 17 Feb 2021 15:12:53 +0000
Subject: [R-pkg-devel] FW: [CRAN-pretest-archived] CRAN submission RIBMDB
 1.0.0
In-Reply-To: <01d7053d$Blat.v3.2.16$63831698$166482a13@mail.statistik.tu-dortmund.de>
References: <20210217144816.886E6162EA5@xmpalantir.wu.ac.at>
 <01d7053d$Blat.v3.2.16$63831698$166482a13@mail.statistik.tu-dortmund.de>
Message-ID: <BN8PR07MB589252412E24621CFA1516B6BC869@BN8PR07MB5892.namprd07.prod.outlook.com>

Hi Team,
I uploaded a package in CRAN and it failed with the attached error.
My question:

  1.  Windows:

Error: Ld:/Compiler/gcc-4.9.3/local330/lib -LD:/RCompile/recent/R/bin/i386 -lR
clidriver/bin/db2app64.dll: file not recognized: file format not recognized

Why is db2app64.dll a non recognized file? What is the problem exactly if  someone can explain please.



  1.  Debian:

Error: ** testing if installed package can be loaded from temporary location

Error: package or namespace load failed for 'RIBMDB' in dyn.load(file, DLLpath = DLLpath, ...):

 unable to load shared object '/srv/hornik/tmp/CRAN/RIBMDB.Rcheck/00LOCK-RIBMDB/00new/RIBMDB/libs/RIBMDB.so':

  libdb2.so.1: cannot open shared object file: No such file or directory

Error: loading failed

Execution halted

ERROR: loading failed



Not sure why this error comes even though the file libdb2.so.1 is present in "clidriver" folder. Can someone please let me know how to fix this?


Thanks & Regards,
Binit Kumar
From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
Sent: 17 February 2021 20:29
To: Binit Kumar <bkumar at rocketsoftware.com>
Cc: CRAN-submissions at R-project.org
Subject: [CRAN-pretest-archived] CRAN submission RIBMDB 1.0.0

EXTERNAL EMAIL



Dear maintainer,

package RIBMDB_1.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0.0_20210217_154816/Windows/00check.log<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0.0_20210217_154816/Windows/00check.log>>
Status: 1 ERROR, 1 NOTE
Debian: <https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0.0_20210217_154816/Debian/00check.log<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0.0_20210217_154816/Debian/00check.log>>
Status: 1 ERROR, 1 NOTE



Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0.0_20210217_154816/<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0.0_20210217_154816>>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service

================================
Rocket Software, Inc. and subsidiaries ? 77 Fourth Avenue, Waltham MA 02451 ? Main Office Toll Free Number: +1 855.577.4323
Contact Customer Support: https://my.rocketsoftware.com/RocketCommunity/RCEmailSupport
Unsubscribe from Marketing Messages/Manage Your Subscription Preferences - http://www.rocketsoftware.com/manage-your-email-preferences
Privacy Policy - http://www.rocketsoftware.com/company/legal/privacy-policy
================================

This communication and any attachments may contain confidential information of Rocket Software, Inc. All unauthorized use, disclosure or distribution is prohibited. If you are not the intended recipient, please notify Rocket Software immediately and destroy all copies of this communication. Thank you.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 00details.log
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20210217/72ce575d/attachment.log>

From v|ncentv@nhee@ @end|ng |rom gm@||@com  Wed Feb 17 16:32:33 2021
From: v|ncentv@nhee@ @end|ng |rom gm@||@com (Vincent van Hees)
Date: Wed, 17 Feb 2021 16:32:33 +0100
Subject: [R-pkg-devel] URL in RMarkdown file (libcurl error code 35)
Message-ID: <CALnEB15wn=0r5ZcndnTo56hWxYM-LtZQVyKTnY1b+tDs-Bw_Zg@mail.gmail.com>

Hello,
My R package submission got rejected today because of the URL libcurl error
code 35 issue below (see heading Attempt 1). It seems I have a subscription
to these errors, because I have been getting them a lot through the years.
Next, I edited the URL and submitted the package to R-devel on
win-builder.r-project.org, but there it got flagged again. I am struggling
to resolve this. Please find below an overview of all my attempts so far..
Could anyone tell me what I am doing wrong?
Thanks, Vincent

Attempt 1: Warning after CRAN submission

Flavor: r-devel-windows-ix86+x86_64 Check: CRAN incoming feasibility,
Result: NOTE Maintainer: 'Vincent T van Hees <v.vanhees at accelting.com>'
Found the following (possibly) invalid URLs: URL:
https://journals.humankinetics.com/view/journals/jmpb/2/3/article-p188.xml
From: inst/doc/GGIR.html Status: Error Message: libcurl error code 35:
schannel: next InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE
(0x80090326) - This error usually occurs when a fatal SSL/TLS alert is
received (e.g. handshake failed).

Attemp 2: This is what I submitted to win-builder R-devel. In comparison to
the CRAN submission this has the doi URL instead of the full journal URL.:

Found the following (possibly) invalid URLs: URL:
https://doi.org/10.1123/jmpb.2018-0063 From: inst/doc/GGIR.html Status:
Error Message: libcurl error code 35: schannel: next
InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE (0x80090326) - This
error usually occurs when a fatal SSL/TLS alert is received (e.g. handshake
failed).

Attempt 3:
Putting a URLencode() statement around the URL was suggested somewhere, e.g.
[link](URLencode("https://doi.org/10.1123/jmpb.2018-0063")),  but this
breaks the URL on my local machine.

Attempt 4: Curl test (in Ubuntu with curl version 7.68) for the journal url
to see whether this provides any insight:

vincent at vincent:~$ curl -Is
https://journals.humankinetics.com/view/journals/jmpb/2/3/article-p188.xml
HTTP/1.1 200 OK
server: Apache-Coyote/1.1
set-cookie: JSESSIONID=AF4859DD2D01CF4E1C16EE530712A13F; Path=/; Secure;
HttpOnly
content-type: text/html;charset=UTF-8
transfer-encoding: chunked
date: Wed, 17 Feb 2021 15:14:04 GMT
content-security-policy: frame-ancestors 'self'
set-cookie: ServerID=hk-web-live-bot24; path=/

	[[alternative HTML version deleted]]


From j@me@@|@he@ter @end|ng |rom gm@||@com  Wed Feb 17 16:44:14 2021
From: j@me@@|@he@ter @end|ng |rom gm@||@com (Jim Hester)
Date: Wed, 17 Feb 2021 10:44:14 -0500
Subject: [R-pkg-devel] CRAN pre-test Windows machine seems to be in a bad
 state
Message-ID: <CAD6tx96J8vwapstbyYqtSYMq8iszLBPQ5iSAdmDGTKgVaE4u8w@mail.gmail.com>

In particular the magrittr package seems to be broken on the pre-test
machine.

I submitted a new version of the pkgload package on Friday, again on
Tuesday and today (Wednesday). All passed fine on the Debian machine, but
failed during installation on the Windows builder.

The failure is due to a soft load time dependency on testthat, which itself
has a hard dependency on magrittr. Because the magrittr installation is
broken my package (pkgload) fails to install. e.g.

* installing *source* package 'pkgload' ...
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
*** arch - i386
Error: package or namespace load failed for 'pkgload':
 .onLoad failed in loadNamespace() for 'pkgload', details:
  call: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()),
versionCheck = vI[[j]])
  error: there is no package called 'magrittr'
Error: loading failed
Execution halted
*** arch - x64
Error: package or namespace load failed for 'pkgload':
 .onLoad failed in loadNamespace() for 'pkgload', details:
  call: loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()),
versionCheck = vI[[j]])
  error: there is no package called 'magrittr'
Error: loading failed
Execution halted
ERROR: loading failed for 'i386', 'x64'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/pkgload'


I am pretty confident there is nothing wrong in the pkgload package that is
causing this. The checks pass fine on a local windows machine. Hopefully
this will be cleared up by the CRAN maintainers soon.

Jim

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Feb 17 17:34:22 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 17 Feb 2021 17:34:22 +0100
Subject: [R-pkg-devel] URL in RMarkdown file (libcurl error code 35)
In-Reply-To: <CALnEB15wn=0r5ZcndnTo56hWxYM-LtZQVyKTnY1b+tDs-Bw_Zg@mail.gmail.com>
References: <CALnEB15wn=0r5ZcndnTo56hWxYM-LtZQVyKTnY1b+tDs-Bw_Zg@mail.gmail.com>
Message-ID: <CABtg=Kk-T51O4zP4DKtnGevvZNRP0A3dZ04-cpfiXC3H98+NSQ@mail.gmail.com>

I suspect that this is an issue with the CRAN Windows machine, not
with your package.

If you want to work around it in the incoming checks, you can remove
the URL. Maybe it is enough to remove the `https://` from the
beginning, but I am not sure.

Gabor

On Wed, Feb 17, 2021 at 4:33 PM Vincent van Hees
<vincentvanhees at gmail.com> wrote:
>
> Hello,
> My R package submission got rejected today because of the URL libcurl error
> code 35 issue below (see heading Attempt 1). It seems I have a subscription
> to these errors, because I have been getting them a lot through the years.
> Next, I edited the URL and submitted the package to R-devel on
> win-builder.r-project.org, but there it got flagged again. I am struggling
> to resolve this. Please find below an overview of all my attempts so far..
> Could anyone tell me what I am doing wrong?
> Thanks, Vincent
>
> Attempt 1: Warning after CRAN submission
>
> Flavor: r-devel-windows-ix86+x86_64 Check: CRAN incoming feasibility,
> Result: NOTE Maintainer: 'Vincent T van Hees <v.vanhees at accelting.com>'
> Found the following (possibly) invalid URLs: URL:
> https://journals.humankinetics.com/view/journals/jmpb/2/3/article-p188.xml
> From: inst/doc/GGIR.html Status: Error Message: libcurl error code 35:
> schannel: next InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE
> (0x80090326) - This error usually occurs when a fatal SSL/TLS alert is
> received (e.g. handshake failed).
>
> Attemp 2: This is what I submitted to win-builder R-devel. In comparison to
> the CRAN submission this has the doi URL instead of the full journal URL.:
>
> Found the following (possibly) invalid URLs: URL:
> https://doi.org/10.1123/jmpb.2018-0063 From: inst/doc/GGIR.html Status:
> Error Message: libcurl error code 35: schannel: next
> InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE (0x80090326) - This
> error usually occurs when a fatal SSL/TLS alert is received (e.g. handshake
> failed).
>
> Attempt 3:
> Putting a URLencode() statement around the URL was suggested somewhere, e.g.
> [link](URLencode("https://doi.org/10.1123/jmpb.2018-0063")),  but this
> breaks the URL on my local machine.
>
> Attempt 4: Curl test (in Ubuntu with curl version 7.68) for the journal url
> to see whether this provides any insight:
>
> vincent at vincent:~$ curl -Is
> https://journals.humankinetics.com/view/journals/jmpb/2/3/article-p188.xml
> HTTP/1.1 200 OK
> server: Apache-Coyote/1.1
> set-cookie: JSESSIONID=AF4859DD2D01CF4E1C16EE530712A13F; Path=/; Secure;
> HttpOnly
> content-type: text/html;charset=UTF-8
> transfer-encoding: chunked
> date: Wed, 17 Feb 2021 15:14:04 GMT
> content-security-policy: frame-ancestors 'self'
> set-cookie: ServerID=hk-web-live-bot24; path=/
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |t@mur|@ @end|ng |rom gm@||@com  Wed Feb 17 18:13:56 2021
From: |t@mur|@ @end|ng |rom gm@||@com (Ibon Tamayo)
Date: Wed, 17 Feb 2021 18:13:56 +0100
Subject: [R-pkg-devel] Unicode errors when building a package
Message-ID: <CACQV-ot_bDJ4=g3ftMF2zigDGQ4xLCOEYf3VUPfnRtwMVdNVWQ@mail.gmail.com>

Dear all,

I am trying to fix all the error of my package. Most of them I know how to
solve them. But there are some errors related with unicode that I don't
know how to fix.

Flavor: r-devel-windows-ix86+x86_64
Check: PDF version of manual, Result: WARNING
  LaTeX errors when creating PDF version.
  This typically indicates Rd problems.
  LaTeX errors found:
  ! Package inputenc Error: Unicode char ?? (U+302)
  (inputenc)                not set up for use with LaTeX.

  See the inputenc package documentation for explanation.
  Type  H <return>  for immediate help.
  ! Package inputenc Error: Unicode char ?? (U+3C4)
  (inputenc)                not set up for use with LaTeX.

  See the inputenc package documentation for explanation.
  Type  H <return>  for immediate help.
  ! Package inputenc Error: Unicode char ?? (U+3C4)
  (inputenc)                not set up for use with LaTeX.


Any help will be appreciated,
All the best,
Ibon

	[[alternative HTML version deleted]]


From v|ncentv@nhee@ @end|ng |rom gm@||@com  Wed Feb 17 18:57:55 2021
From: v|ncentv@nhee@ @end|ng |rom gm@||@com (Vincent van Hees)
Date: Wed, 17 Feb 2021 18:57:55 +0100
Subject: [R-pkg-devel] URL in RMarkdown file (libcurl error code 35)
In-Reply-To: <CALnEB15wn=0r5ZcndnTo56hWxYM-LtZQVyKTnY1b+tDs-Bw_Zg@mail.gmail.com>
References: <CALnEB15wn=0r5ZcndnTo56hWxYM-LtZQVyKTnY1b+tDs-Bw_Zg@mail.gmail.com>
Message-ID: <CALnEB141g0mF3VUTXxKMhF4nCHz5JhyjxbBPu_pjDGe-pcAaPQ@mail.gmail.com>

Sorry, you can ignore my question:
Uwe Liges clarified to me that the other error in my CRAN submission check
is definitely a problem I need to address.
And from this post by Hadley on Twitter I conclude that the URL warning can
be ignored: https://twitter.com/hadleywickham/status/1358170607314235392
Best,
Vincent




On Wed, 17 Feb 2021 at 16:32, Vincent van Hees <vincentvanhees at gmail.com>
wrote:

> Hello,
> My R package submission got rejected today because of the URL libcurl
> error code 35 issue below (see heading Attempt 1). It seems I have a
> subscription to these errors, because I have been getting them a lot
> through the years. Next, I edited the URL and submitted the package to
> R-devel on win-builder.r-project.org, but there it got flagged again. I
> am struggling to resolve this. Please find below an overview of all my
> attempts so far..
> Could anyone tell me what I am doing wrong?
> Thanks, Vincent
>
> Attempt 1: Warning after CRAN submission
>
> Flavor: r-devel-windows-ix86+x86_64 Check: CRAN incoming feasibility,
> Result: NOTE Maintainer: 'Vincent T van Hees <v.vanhees at accelting.com>'
> Found the following (possibly) invalid URLs: URL:
> https://journals.humankinetics.com/view/journals/jmpb/2/3/article-p188.xml
> From: inst/doc/GGIR.html Status: Error Message: libcurl error code 35:
> schannel: next InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE
> (0x80090326) - This error usually occurs when a fatal SSL/TLS alert is
> received (e.g. handshake failed).
>
> Attemp 2: This is what I submitted to win-builder R-devel. In comparison
> to the CRAN submission this has the doi URL instead of the full journal
> URL.:
>
> Found the following (possibly) invalid URLs: URL:
> https://doi.org/10.1123/jmpb.2018-0063 From: inst/doc/GGIR.html Status:
> Error Message: libcurl error code 35: schannel: next
> InitializeSecurityContext failed: SEC_E_ILLEGAL_MESSAGE (0x80090326) - This
> error usually occurs when a fatal SSL/TLS alert is received (e.g. handshake
> failed).
>
> Attempt 3:
> Putting a URLencode() statement around the URL was suggested somewhere,
> e.g.
> [link](URLencode("https://doi.org/10.1123/jmpb.2018-0063")),  but this
> breaks the URL on my local machine.
>
> Attempt 4: Curl test (in Ubuntu with curl version 7.68) for the journal
> url to see whether this provides any insight:
>
> vincent at vincent:~$ curl -Is
> https://journals.humankinetics.com/view/journals/jmpb/2/3/article-p188.xml
> HTTP/1.1 200 OK
> server: Apache-Coyote/1.1
> set-cookie: JSESSIONID=AF4859DD2D01CF4E1C16EE530712A13F; Path=/; Secure;
> HttpOnly
> content-type: text/html;charset=UTF-8
> transfer-encoding: chunked
> date: Wed, 17 Feb 2021 15:14:04 GMT
> content-security-policy: frame-ancestors 'self'
> set-cookie: ServerID=hk-web-live-bot24; path=/
>

	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Wed Feb 17 20:14:31 2021
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Wed, 17 Feb 2021 19:14:31 +0000
Subject: [R-pkg-devel] Unicode errors when building a package
In-Reply-To: <CACQV-ot_bDJ4=g3ftMF2zigDGQ4xLCOEYf3VUPfnRtwMVdNVWQ@mail.gmail.com>
References: <CACQV-ot_bDJ4=g3ftMF2zigDGQ4xLCOEYf3VUPfnRtwMVdNVWQ@mail.gmail.com>
Message-ID: <YTXPR0101MB0782B0F1295BF9B2202AD3749A869@YTXPR0101MB0782.CANPRD01.PROD.OUTLOOK.COM>

Hi Ibon,

It looks like you have a couple non-ASCII characters in your documentation files. You can find which ones by running the command showNonASCIIfile in the tools package.

To address these warnings, you have two options:

  1.  Replace these non-ASCII characters with similar/equivalent ASCII ones.
  2.  Specify the encoding for the doc files; see this section of WRE: https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Encoding

Best,

Max Turgeon
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Ibon Tamayo <itamuria at gmail.com>
Sent: Wednesday, February 17, 2021 11:13 AM
To: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] Unicode errors when building a package

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Dear all,

I am trying to fix all the error of my package. Most of them I know how to
solve them. But there are some errors related with unicode that I don't
know how to fix.

Flavor: r-devel-windows-ix86+x86_64
Check: PDF version of manual, Result: WARNING
  LaTeX errors when creating PDF version.
  This typically indicates Rd problems.
  LaTeX errors found:
  ! Package inputenc Error: Unicode char ? (U+302)
  (inputenc)                not set up for use with LaTeX.

  See the inputenc package documentation for explanation.
  Type  H <return>  for immediate help.
  ! Package inputenc Error: Unicode char ? (U+3C4)
  (inputenc)                not set up for use with LaTeX.

  See the inputenc package documentation for explanation.
  Type  H <return>  for immediate help.
  ! Package inputenc Error: Unicode char ? (U+3C4)
  (inputenc)                not set up for use with LaTeX.


Any help will be appreciated,
All the best,
Ibon

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From p@u|@@chm|dt-w@|ter @end|ng |rom po@teo@de  Wed Feb 17 20:04:34 2021
From: p@u|@@chm|dt-w@|ter @end|ng |rom po@teo@de (Paul Schmidt-Walter)
Date: Wed, 17 Feb 2021 20:04:34 +0100
Subject: [R-pkg-devel] How to R CMD build / check using LTO
Message-ID: <b748aee9-aa3f-31ff-7d20-ef34ba6bb8c1@posteo.de>

Dear Team,

My package 'LWFBrook90R' (https://github.com/pschmidtwalter/LWFBrook90R) 
was recently released on CRAN, but there are additional LTO Issues 
(https://www.stats.ox.ac.uk/pub/bdr/LTO/LWFBrook90R.out) with the 
compiled code, that need to be fixed soon.

I would like to reproduce the LTO warnings locally to see if possible 
solutions fix them, but dont know how to build and check with LTO. I am 
a newbie on Ubuntu 18.04 and hope to get help in this case.

There is information provided on how to configure R to reproduce the 
test (https://www.stats.ox.ac.uk/pub/bdr/LTO/README.txt), but I simply 
don't know how to "build with configure --enable-lto" and I also can't 
find the "config.site" file on my system to enable the respective 
compiler flags (see below).

Any help is appreciated!

Paul

---

LTO-Readme.txt:

Compilation logs for CRAN packages using x86_64 Fedora 32 Linux
(currently using GCC 10.1)built with configure --enable-lto and 
config.site:

CFLAGS="-g -O2 -Wall -pedantic -mtune=native"
FFLAGS="-g -O2 -mtune=native -Wall -pedantic"
CXXFLAGS="-g -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes 
-Wno-deprecated-declarations -Wno-parentheses"
AR=gcc-ar
RANLIB=gcc-ranlib

Look for [-Wlto-type-mismatch] warnings.? In some cases these involve
Fortran CHARACTER arguments where the length is passed as a 'hidden'
argument at the end, giving mismatches such as

sblas.f:3951:14: note: type ?long int? should match type ?void?

To work around these, define USE_FC_LEN_T and include Rconfig.h
(perhaps via R.h) before including BLAS.h or Lapack.h or your own
C proptypes for Fortran functions.? Then amend the actual calls to include
character length arguments: see the example of 
src/library/stats/src/rWishart.c

in the R sources.

---


From |t@mur|@ @end|ng |rom gm@||@com  Wed Feb 17 21:09:32 2021
From: |t@mur|@ @end|ng |rom gm@||@com (Ibon Tamayo)
Date: Wed, 17 Feb 2021 21:09:32 +0100
Subject: [R-pkg-devel] Unicode errors when building a package
In-Reply-To: <YTXPR0101MB0782B0F1295BF9B2202AD3749A869@YTXPR0101MB0782.CANPRD01.PROD.OUTLOOK.COM>
References: <CACQV-ot_bDJ4=g3ftMF2zigDGQ4xLCOEYf3VUPfnRtwMVdNVWQ@mail.gmail.com>
 <YTXPR0101MB0782B0F1295BF9B2202AD3749A869@YTXPR0101MB0782.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CACQV-ovZ9E+9YR9mNcnBFtn=UvXisRd35ex44OhqNz+L1iySOQ@mail.gmail.com>

Thanks Max and Fernando,

The Max's solution was the one worked for me.
Thanks,
All the best,
Ibon

El mi?, 17 feb 2021 a las 20:14, Max Turgeon (<Max.Turgeon at umanitoba.ca>)
escribi?:

> Hi Ibon,
>
> It looks like you have a couple non-ASCII characters in your documentation
> files. You can find which ones by running the command showNonASCIIfile in
> the tools package.
>
> To address these warnings, you have two options:
>
>    1. Replace these non-ASCII characters with similar/equivalent ASCII
>    ones.
>    2. Specify the encoding for the doc files; see this section of WRE:
>    https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Encoding
>
> Best,
>
> Max Turgeon
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Ibon Tamayo <itamuria at gmail.com>
> *Sent:* Wednesday, February 17, 2021 11:13 AM
> *To:* r-package-devel at r-project.org <r-package-devel at r-project.org>
> *Subject:* [R-pkg-devel] Unicode errors when building a package
>
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> Dear all,
>
> I am trying to fix all the error of my package. Most of them I know how to
> solve them. But there are some errors related with unicode that I don't
> know how to fix.
>
> Flavor: r-devel-windows-ix86+x86_64
> Check: PDF version of manual, Result: WARNING
>   LaTeX errors when creating PDF version.
>   This typically indicates Rd problems.
>   LaTeX errors found:
>   ! Package inputenc Error: Unicode char ?? (U+302)
>   (inputenc)                not set up for use with LaTeX.
>
>   See the inputenc package documentation for explanation.
>   Type  H <return>  for immediate help.
>   ! Package inputenc Error: Unicode char ?? (U+3C4)
>   (inputenc)                not set up for use with LaTeX.
>
>   See the inputenc package documentation for explanation.
>   Type  H <return>  for immediate help.
>   ! Package inputenc Error: Unicode char ?? (U+3C4)
>   (inputenc)                not set up for use with LaTeX.
>
>
> Any help will be appreciated,
> All the best,
> Ibon
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Feb 17 21:23:26 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 17 Feb 2021 23:23:26 +0300
Subject: [R-pkg-devel] 
 FW: [CRAN-pretest-archived] CRAN submission RIBMDB 1.0.0
In-Reply-To: <BN8PR07MB589252412E24621CFA1516B6BC869@BN8PR07MB5892.namprd07.prod.outlook.com>
References: <20210217144816.886E6162EA5@xmpalantir.wu.ac.at>
 <01d7053d$Blat.v3.2.16$63831698$166482a13@mail.statistik.tu-dortmund.de>
 <BN8PR07MB589252412E24621CFA1516B6BC869@BN8PR07MB5892.namprd07.prod.outlook.com>
Message-ID: <20210217232326.1e101c3a@Tarkus>

Hello Binit Kumar,

On Wed, 17 Feb 2021 15:12:53 +0000
Binit Kumar <bkumar at rocketsoftware.com> wrote:

> Error: Ld:/Compiler/gcc-4.9.3/local330/lib
> -LD:/RCompile/recent/R/bin/i386 -lR clidriver/bin/db2app64.dll: file
> not recognized: file format not recognized
> 
> Why is db2app64.dll a non recognized file?

The package is being built for i386 (32-bit) subarchitecture, but the
64-bit dll is being linked to it. I think that the correct way to
identify the target sub-architecture is to inspect the R_ARCH
environment variable from configure.win (in R code, use getenv()).

This is described in WRE 1.2:
<https://cran.r-project.org/doc/manuals/R-exts.html#Configure-and-cleanup>.

> Error: ** testing if installed package can be loaded from temporary
> location
> 
> Error: package or namespace load failed for 'RIBMDB' in
> dyn.load(file, DLLpath = DLLpath, ...):
> 
>  unable to load shared object
> '/srv/hornik/tmp/CRAN/RIBMDB.Rcheck/00LOCK-RIBMDB/00new/RIBMDB/libs/RIBMDB.so':
> 
>   libdb2.so.1: cannot open shared object file: No such file or
> directory

The bigger problem is trying to manually write under R.home() during
installation. This is not allowed by the CRAN policy and may lead to
problems. (Imagine what would happen if two different packages tried to
write to file.path(R.home(), 'clidriver') and for some reason succeeded
despite it's usually not writable for the end-user on Unix-alikes...)

Instead, you could try to (1) use ./configure to extract the
library to src/ and link to it from there and (2) provide a
src/install.libs.R file to copy libdb2.so from src/ to the same
directory where the package shared object is installed. This still may
be insufficient as you might have to instruct the dynamic linker to look
for libdb2.so in the same directory when the package shared object is
loaded by R; on some compilers this may be done by passing the
-rpath='$ORIGIN' argument to the linker, but this is very
platform-dependent (no idea whether it's going to work on Solaris, for
example).

See WRE 1.1.5 for more info on install.libs.R:
https://cran.r-project.org/doc/manuals/R-exts.html#Package-subdirectories

In short, linking an R package to a binary dependency not provided by a
system package is painful, but not explicitly prohibited by CRAN policy
("Source packages may not contain any form of binary executable code",
and yours downloads binaries when it's built, but doesn't contain any;
"Downloads of additional software <...> as part of package installation
<...> should only use secure download mechanisms", which yours does).

-- 
Best regards,
Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Feb 17 21:32:13 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 17 Feb 2021 23:32:13 +0300
Subject: [R-pkg-devel] How to R CMD build / check using LTO
In-Reply-To: <b748aee9-aa3f-31ff-7d20-ef34ba6bb8c1@posteo.de>
References: <b748aee9-aa3f-31ff-7d20-ef34ba6bb8c1@posteo.de>
Message-ID: <20210217233213.346db560@Tarkus>

On Wed, 17 Feb 2021 20:04:34 +0100
Paul Schmidt-Walter <paul.schmidt-walter at posteo.de> wrote:

> I simply don't know how to "build with configure --enable-lto"

"R Installation and Administration"
<https://cran.r-project.org/doc/manuals/r-release/R-admin.html>
contains a detailed set of instructions on how to compile R, including
section 2.7.4 about the use of LTO. Start with Appendix A, which lists
the packages you would need to install on your Ubuntu (basically,
build-essential, gfortran and the libraries mentioned there). Good luck!

-- 
Best regards,
Ivan


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Feb 17 21:44:27 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 17 Feb 2021 21:44:27 +0100
Subject: [R-pkg-devel] How to R CMD build / check using LTO
In-Reply-To: <20210217233213.346db560@Tarkus>
References: <b748aee9-aa3f-31ff-7d20-ef34ba6bb8c1@posteo.de>
 <20210217233213.346db560@Tarkus>
Message-ID: <CABtg=Kkc6dA6bcvcUfp3mL65DOTqux+GjH3-N-uGvB999WraVg@mail.gmail.com>

You can use this Docker container:
https://hub.docker.com/repository/docker/rhub/debian-gcc-devel-lto

It is somewhat old, but chances are that it will reproduce the LTO
issues. I'll update it in a minute, anyway.

Gabor

On Wed, Feb 17, 2021 at 9:33 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Wed, 17 Feb 2021 20:04:34 +0100
> Paul Schmidt-Walter <paul.schmidt-walter at posteo.de> wrote:
>
> > I simply don't know how to "build with configure --enable-lto"
>
> "R Installation and Administration"
> <https://cran.r-project.org/doc/manuals/r-release/R-admin.html>
> contains a detailed set of instructions on how to compile R, including
> section 2.7.4 about the use of LTO. Start with Appendix A, which lists
> the packages you would need to install on your Ubuntu (basically,
> build-essential, gfortran and the libraries mentioned there). Good luck!
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Feb 17 21:48:01 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 17 Feb 2021 12:48:01 -0800
Subject: [R-pkg-devel] How to R CMD build / check using LTO
In-Reply-To: <b748aee9-aa3f-31ff-7d20-ef34ba6bb8c1@posteo.de>
References: <b748aee9-aa3f-31ff-7d20-ef34ba6bb8c1@posteo.de>
Message-ID: <CAHqSRuSoFehW3sdrGdmmLtrDCxEBMY0nj-21zT9cQmJNvntCAQ@mail.gmail.com>

I suspect your problem is that, at least with the recent gnu
compilers, the Fortran 'c_logical' maps to the C _Bool, not the C int.

-Bill

On Wed, Feb 17, 2021 at 11:38 AM Paul Schmidt-Walter
<paul.schmidt-walter at posteo.de> wrote:
>
> Dear Team,
>
> My package 'LWFBrook90R' (https://github.com/pschmidtwalter/LWFBrook90R)
> was recently released on CRAN, but there are additional LTO Issues
> (https://www.stats.ox.ac.uk/pub/bdr/LTO/LWFBrook90R.out) with the
> compiled code, that need to be fixed soon.
>
> I would like to reproduce the LTO warnings locally to see if possible
> solutions fix them, but dont know how to build and check with LTO. I am
> a newbie on Ubuntu 18.04 and hope to get help in this case.
>
> There is information provided on how to configure R to reproduce the
> test (https://www.stats.ox.ac.uk/pub/bdr/LTO/README.txt), but I simply
> don't know how to "build with configure --enable-lto" and I also can't
> find the "config.site" file on my system to enable the respective
> compiler flags (see below).
>
> Any help is appreciated!
>
> Paul
>
> ---
>
> LTO-Readme.txt:
>
> Compilation logs for CRAN packages using x86_64 Fedora 32 Linux
> (currently using GCC 10.1)built with configure --enable-lto and
> config.site:
>
> CFLAGS="-g -O2 -Wall -pedantic -mtune=native"
> FFLAGS="-g -O2 -mtune=native -Wall -pedantic"
> CXXFLAGS="-g -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes
> -Wno-deprecated-declarations -Wno-parentheses"
> AR=gcc-ar
> RANLIB=gcc-ranlib
>
> Look for [-Wlto-type-mismatch] warnings.  In some cases these involve
> Fortran CHARACTER arguments where the length is passed as a 'hidden'
> argument at the end, giving mismatches such as
>
> sblas.f:3951:14: note: type ?long int? should match type ?void?
>
> To work around these, define USE_FC_LEN_T and include Rconfig.h
> (perhaps via R.h) before including BLAS.h or Lapack.h or your own
> C proptypes for Fortran functions.  Then amend the actual calls to include
> character length arguments: see the example of
> src/library/stats/src/rWishart.c
>
> in the R sources.
>
> ---
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@eyoung@||m @end|ng |rom uconn@edu  Wed Feb 17 23:44:16 2021
From: d@eyoung@||m @end|ng |rom uconn@edu (Daeyoung Lim)
Date: Wed, 17 Feb 2021 17:44:16 -0500
Subject: [R-pkg-devel] Cannot reproduce CRAN error (Solaris i386)
Message-ID: <CAAd_GN7z3Mt-Dhm7XA5TouU5YGuCej=dZvYKX6UfAxQFcxmNuQ@mail.gmail.com>

Hello,

I have a package on CRAN called 'metapack' and received a message from
Professor Ripley that the error must be resolved for the package to be
safely retained in CRAN. I've encountered this error on R-CMD-check on
GitHub but cannot replicate it on any of my local machines to save my life.
The reproducible code snippet is as follows (I use Rcpp/RcppArmadillo):

library(metapack)
data("cholesterol")
Outcome <- model.matrix(~ pldlc + phdlc + ptg, data = cholesterol)
SD <- model.matrix(~ sdldl + sdhdl + sdtg, data = cholesterol)
Trial <- cholesterol$Trial
Treat <- cholesterol$trt
Npt <- cholesterol$Npt
XCovariate <- model.matrix(~ 0 + bldlc + bhdlc + btg + age + durat +
white + male + dm, data = cholesterol)
WCovariate <- model.matrix(~ trt, data = cholesterol)

fmodel <- 1
set.seed(2797542)
fit <- bayes.parobs(Outcome, SD, XCovariate, WCovariate, Treat, Trial,
  Npt, fmodel, mcmc = list(ndiscard = 1, nskip = 1, nkeep = 1),
  scale_x = TRUE, group = cholesterol$onstat, verbose = FALSE)

which gives me the following error:

warning: chol(): given matrix is not symmetric  error: chol():
decomposition failed

This can't be true because (1) it runs without problem on other machines,
(2) every matrix that is Cholesky-decomposed is ensured to be symmetric
through Sig = 0.5 * (Sig + Sig.t());. Even with Sig = arma::symmatu(Sig)
doesn't seem to guarantee symmetry.

Has anyone encountered something similar to this?
Thank you for your time.

*Daeyoung Lim, MS*

Ph.D. Student

Department of Statistics

University of Connecticut

Philip E. Austin, <https://goo.gl/maps/HsS7bzAMgCw>215 Glenbrook Road
<https://goo.gl/maps/HsS7bzAMgCw>

Storrs Mansfield, CT 06269-4120 <https://goo.gl/maps/HsS7bzAMgCw>

	[[alternative HTML version deleted]]


From bkum@r @end|ng |rom rocket@o|tw@re@com  Thu Feb 18 03:37:22 2021
From: bkum@r @end|ng |rom rocket@o|tw@re@com (Binit Kumar)
Date: Thu, 18 Feb 2021 02:37:22 +0000
Subject: [R-pkg-devel] 
 FW: [CRAN-pretest-archived] CRAN submission RIBMDB 1.0.0
In-Reply-To: <20210217232326.1e101c3a@Tarkus>
References: <20210217144816.886E6162EA5@xmpalantir.wu.ac.at>
 <01d7053d$Blat.v3.2.16$63831698$166482a13@mail.statistik.tu-dortmund.de>
 <BN8PR07MB589252412E24621CFA1516B6BC869@BN8PR07MB5892.namprd07.prod.outlook.com>
 <20210217232326.1e101c3a@Tarkus>
Message-ID: <BN8PR07MB589207600046FC9E120A38E7BC859@BN8PR07MB5892.namprd07.prod.outlook.com>

Hi Ivan,
Thanks for the response. Appreciate.
But,

  1.  Windows: As I can see in the logs of the machine:

platform =  windows , arch =  x64 , R_Version =  R Under development (unstable) (2021-02-16 r80015)



So that means the architecture on CRAN machine is 64 bit and not 32 bit.

This is extracted by my code using:

platform = .Platform$OS.type

arch = .Platform$r_arch



The dll is selected based on the architecture, it is not hardcoded.

Please let me know if my understanding is wrong.

2)      Linux: I have already used "configure" and that copies the requisite file using "CLIDriver_installer.R" but problem is that R does everything in tmp file and then copy to the library folder of R. As you mentioned, "This still may
be insufficient as you might have to instruct the dynamic linker to look
for libdb2.so in the same directory when the package shared object is
loaded by R; on some compilers this may be done by passing the
-rpath='$ORIGIN' argument to the linker, but this is very
platform-dependent (no idea whether it's going to work on Solaris, for
example)."  So the part that is failing is loading. I want to exclude test loading using "-c -no-test-load". I tested in my local system and it works fine.

Can you suggest how to move ahead?



Also the CRAN upload has a limitation of 100MB. I have some executables for multiple platforms and they together constitute more than 100MB. How to resolve this? Can you please help?




Thanks & Regards,
Binit Kumar
From: Ivan Krylov <krylov.r00t at gmail.com>
Sent: 18 February 2021 01:53
To: Binit Kumar <bkumar at rocketsoftware.com>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] FW: [CRAN-pretest-archived] CRAN submission RIBMDB 1.0.0

EXTERNAL EMAIL



Hello Binit Kumar,

On Wed, 17 Feb 2021 15:12:53 +0000
Binit Kumar <bkumar at rocketsoftware.com<mailto:bkumar at rocketsoftware.com>> wrote:

> Error: Ld:/Compiler/gcc-4.9.3/local330/lib
> -LD:/RCompile/recent/R/bin/i386 -lR clidriver/bin/db2app64.dll: file
> not recognized: file format not recognized
>
> Why is db2app64.dll a non recognized file?

The package is being built for i386 (32-bit) subarchitecture, but the
64-bit dll is being linked to it. I think that the correct way to
identify the target sub-architecture is to inspect the R_ARCH
environment variable from configure.win (in R code, use getenv()).

This is described in WRE 1.2:
<https://cran.r-project.org/doc/manuals/R-exts.html#Configure-and-cleanup<https://cran.r-project.org/doc/manuals/R-exts.html#Configure-and-cleanup>>.

> Error: ** testing if installed package can be loaded from temporary
> location
>
> Error: package or namespace load failed for 'RIBMDB' in
> dyn.load(file, DLLpath = DLLpath, ...):
>
> unable to load shared object
> '/srv/hornik/tmp/CRAN/RIBMDB.Rcheck/00LOCK-RIBMDB/00new/RIBMDB/libs/RIBMDB.so':
>
> libdb2.so.1: cannot open shared object file: No such file or
> directory

The bigger problem is trying to manually write under R.home() during
installation. This is not allowed by the CRAN policy and may lead to
problems. (Imagine what would happen if two different packages tried to
write to file.path(R.home(), 'clidriver') and for some reason succeeded
despite it's usually not writable for the end-user on Unix-alikes...)

Instead, you could try to (1) use ./configure to extract the
library to src/ and link to it from there and (2) provide a
src/install.libs.R file to copy libdb2.so from src/ to the same
directory where the package shared object is installed. This still may
be insufficient as you might have to instruct the dynamic linker to look
for libdb2.so in the same directory when the package shared object is
loaded by R; on some compilers this may be done by passing the
-rpath='$ORIGIN' argument to the linker, but this is very
platform-dependent (no idea whether it's going to work on Solaris, for
example).

See WRE 1.1.5 for more info on install.libs.R:
https://cran.r-project.org/doc/manuals/R-exts.html#Package-subdirectories<https://cran.r-project.org/doc/manuals/R-exts.html#Package-subdirectories>

In short, linking an R package to a binary dependency not provided by a
system package is painful, but not explicitly prohibited by CRAN policy
("Source packages may not contain any form of binary executable code",
and yours downloads binaries when it's built, but doesn't contain any;
"Downloads of additional software <...> as part of package installation
<...> should only use secure download mechanisms", which yours does).

--
Best regards,
Ivan

================================
Rocket Software, Inc. and subsidiaries ? 77 Fourth Avenue, Waltham MA 02451 ? Main Office Toll Free Number: +1 855.577.4323
Contact Customer Support: https://my.rocketsoftware.com/RocketCommunity/RCEmailSupport
Unsubscribe from Marketing Messages/Manage Your Subscription Preferences - http://www.rocketsoftware.com/manage-your-email-preferences
Privacy Policy - http://www.rocketsoftware.com/company/legal/privacy-policy
================================

This communication and any attachments may contain confidential information of Rocket Software, Inc. All unauthorized use, disclosure or distribution is prohibited. If you are not the intended recipient, please notify Rocket Software immediately and destroy all copies of this communication. Thank you.

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Feb 18 10:54:03 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 18 Feb 2021 10:54:03 +0100
Subject: [R-pkg-devel] Cannot reproduce CRAN error (Solaris i386)
In-Reply-To: <CAAd_GN7z3Mt-Dhm7XA5TouU5YGuCej=dZvYKX6UfAxQFcxmNuQ@mail.gmail.com>
References: <CAAd_GN7z3Mt-Dhm7XA5TouU5YGuCej=dZvYKX6UfAxQFcxmNuQ@mail.gmail.com>
Message-ID: <CABtg=KkW_xip-f=bJ3rvsAmr3Vbnk3pnm-52uwEsq07UnX-rDQ@mail.gmail.com>

FWIW this code does not give me any warnings or errors on Solaris and
R 4.0.4 and the current CRAN version of metapack.

Gabor

On Thu, Feb 18, 2021 at 1:54 AM Daeyoung Lim <daeyoung.lim at uconn.edu> wrote:
>
> Hello,
>
> I have a package on CRAN called 'metapack' and received a message from
> Professor Ripley that the error must be resolved for the package to be
> safely retained in CRAN. I've encountered this error on R-CMD-check on
> GitHub but cannot replicate it on any of my local machines to save my life.
> The reproducible code snippet is as follows (I use Rcpp/RcppArmadillo):
>
> library(metapack)
> data("cholesterol")
> Outcome <- model.matrix(~ pldlc + phdlc + ptg, data = cholesterol)
> SD <- model.matrix(~ sdldl + sdhdl + sdtg, data = cholesterol)
> Trial <- cholesterol$Trial
> Treat <- cholesterol$trt
> Npt <- cholesterol$Npt
> XCovariate <- model.matrix(~ 0 + bldlc + bhdlc + btg + age + durat +
> white + male + dm, data = cholesterol)
> WCovariate <- model.matrix(~ trt, data = cholesterol)
>
> fmodel <- 1
> set.seed(2797542)
> fit <- bayes.parobs(Outcome, SD, XCovariate, WCovariate, Treat, Trial,
>   Npt, fmodel, mcmc = list(ndiscard = 1, nskip = 1, nkeep = 1),
>   scale_x = TRUE, group = cholesterol$onstat, verbose = FALSE)
>
> which gives me the following error:
>
> warning: chol(): given matrix is not symmetric  error: chol():
> decomposition failed
>
> This can't be true because (1) it runs without problem on other machines,
> (2) every matrix that is Cholesky-decomposed is ensured to be symmetric
> through Sig = 0.5 * (Sig + Sig.t());. Even with Sig = arma::symmatu(Sig)
> doesn't seem to guarantee symmetry.
>
> Has anyone encountered something similar to this?
> Thank you for your time.
>
> *Daeyoung Lim, MS*
>
> Ph.D. Student
>
> Department of Statistics
>
> University of Connecticut
>
> Philip E. Austin, <https://goo.gl/maps/HsS7bzAMgCw>215 Glenbrook Road
> <https://goo.gl/maps/HsS7bzAMgCw>
>
> Storrs Mansfield, CT 06269-4120 <https://goo.gl/maps/HsS7bzAMgCw>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Feb 18 10:59:42 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 18 Feb 2021 10:59:42 +0100
Subject: [R-pkg-devel] Cannot reproduce CRAN error (Solaris i386)
In-Reply-To: <CABtg=KkW_xip-f=bJ3rvsAmr3Vbnk3pnm-52uwEsq07UnX-rDQ@mail.gmail.com>
References: <CAAd_GN7z3Mt-Dhm7XA5TouU5YGuCej=dZvYKX6UfAxQFcxmNuQ@mail.gmail.com>
 <CABtg=KkW_xip-f=bJ3rvsAmr3Vbnk3pnm-52uwEsq07UnX-rDQ@mail.gmail.com>
Message-ID: <CABtg=Kke+w0irFyuq9=Qok26JLmfp4btJ=4F36f3zCRoUbAAOQ@mail.gmail.com>

Actually, I can reproduce it if I use the Oracle Studio compilers. You
can also reproduce it on R-hub like this:

rhub::check("metapack_0.1.0.tar.gz", platform = "solaris-x86-patched-ods")

I suggest you fix the valgrind issues first, because they might be
causing this crash as well.

You can also get a Solaris VM, to make it easier to debug the issue on
Solaris: https://github.com/r-hub/solarischeck/tree/master/packer Let
me know if you don't want to build the VM yourself, and I can give you
access to one.

Gabor

On Thu, Feb 18, 2021 at 10:54 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> FWIW this code does not give me any warnings or errors on Solaris and
> R 4.0.4 and the current CRAN version of metapack.
>
> Gabor
>
> On Thu, Feb 18, 2021 at 1:54 AM Daeyoung Lim <daeyoung.lim at uconn.edu> wrote:
> >
> > Hello,
> >
> > I have a package on CRAN called 'metapack' and received a message from
> > Professor Ripley that the error must be resolved for the package to be
> > safely retained in CRAN. I've encountered this error on R-CMD-check on
> > GitHub but cannot replicate it on any of my local machines to save my life.
> > The reproducible code snippet is as follows (I use Rcpp/RcppArmadillo):
> >
> > library(metapack)
> > data("cholesterol")
> > Outcome <- model.matrix(~ pldlc + phdlc + ptg, data = cholesterol)
> > SD <- model.matrix(~ sdldl + sdhdl + sdtg, data = cholesterol)
> > Trial <- cholesterol$Trial
> > Treat <- cholesterol$trt
> > Npt <- cholesterol$Npt
> > XCovariate <- model.matrix(~ 0 + bldlc + bhdlc + btg + age + durat +
> > white + male + dm, data = cholesterol)
> > WCovariate <- model.matrix(~ trt, data = cholesterol)
> >
> > fmodel <- 1
> > set.seed(2797542)
> > fit <- bayes.parobs(Outcome, SD, XCovariate, WCovariate, Treat, Trial,
> >   Npt, fmodel, mcmc = list(ndiscard = 1, nskip = 1, nkeep = 1),
> >   scale_x = TRUE, group = cholesterol$onstat, verbose = FALSE)
> >
> > which gives me the following error:
> >
> > warning: chol(): given matrix is not symmetric  error: chol():
> > decomposition failed
> >
> > This can't be true because (1) it runs without problem on other machines,
> > (2) every matrix that is Cholesky-decomposed is ensured to be symmetric
> > through Sig = 0.5 * (Sig + Sig.t());. Even with Sig = arma::symmatu(Sig)
> > doesn't seem to guarantee symmetry.
> >
> > Has anyone encountered something similar to this?
> > Thank you for your time.
> >
> > *Daeyoung Lim, MS*
> >
> > Ph.D. Student
> >
> > Department of Statistics
> >
> > University of Connecticut
> >
> > Philip E. Austin, <https://goo.gl/maps/HsS7bzAMgCw>215 Glenbrook Road
> > <https://goo.gl/maps/HsS7bzAMgCw>
> >
> > Storrs Mansfield, CT 06269-4120 <https://goo.gl/maps/HsS7bzAMgCw>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Feb 18 12:26:11 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 18 Feb 2021 14:26:11 +0300
Subject: [R-pkg-devel] 
 FW: [CRAN-pretest-archived] CRAN submission RIBMDB 1.0.0
In-Reply-To: <BN8PR07MB589207600046FC9E120A38E7BC859@BN8PR07MB5892.namprd07.prod.outlook.com>
References: <20210217144816.886E6162EA5@xmpalantir.wu.ac.at>
 <01d7053d$Blat.v3.2.16$63831698$166482a13@mail.statistik.tu-dortmund.de>
 <BN8PR07MB589252412E24621CFA1516B6BC869@BN8PR07MB5892.namprd07.prod.outlook.com>
 <20210217232326.1e101c3a@Tarkus>
 <BN8PR07MB589207600046FC9E120A38E7BC859@BN8PR07MB5892.namprd07.prod.outlook.com>
Message-ID: <20210218142611.689a1f5c@Tarkus>

On Thu, 18 Feb 2021 02:37:22 +0000
Binit Kumar <bkumar at rocketsoftware.com> wrote:

>   1.  Windows: As I can see in the logs of the machine:
> 
> platform =  windows , arch =  x64 , R_Version =  R Under development
> (unstable) (2021-02-16 r80015)

We might need the help of someone else more knowledgeable of Windows
package build process, but here is what I noticed: configure.win calls
Rscript without any environment variables. WRE 1.2 says:

>> Using ?${R_HOME}/bin/R? rather than just ?R? is necessary in order
>> to use the correct version of R when running the script as part of R
>> CMD INSTALL, and the quotes since ?${R_HOME}? might contain spaces.

It might be the case that configure.win ends up calling the wrong
Rscript and causing the problem. It might also be the case that
configure.win should handle both sub-architectures in one run. I'm not
sure. But the error definitely happens while building the package for
the 32-bit sub-architecture, because it says "*** arch - i386" earlier,
and the rest of the messages are consistent with this.

> 2)      Linux: I have already used "configure" and that copies the
> requisite file using "CLIDriver_installer.R" but problem is that R
> does everything in tmp file and then copy to the library folder of R.

I think that the correct solution (as long as it's possible) would be
to specify a relative dependency load path when building the package
shared object to avoid hard-coding anything.

> Can you suggest how to move ahead?

1. Make ./configure put the dependency into src/
2. Add PKG_LIBS=-Wl,-rpath,'$$ORIGIN' (plus other flags) to
   src/Makevars.in
3. Use install.libs.R to make sure that both package shared object and
   its dependency are installed in the same directory supplied by R
   (that is, file.path(R_PACKAGE_DIR, paste0('libs', R_ARCH)))

This should cover GNU/Linux, Solaris and some BSDs. On macOS,
@loader_path seems to be the magic incantation to be used instead of
$ORIGIN. No idea about linkers on AIX and other platforms you might
prefer to support.

> Also the CRAN upload has a limitation of 100MB. I have some
> executables for multiple platforms and they together constitute more
> than 100MB. How to resolve this? Can you please help?

CRAN source packages aren't allowed to contain executable binaries
anyway, so your solution of downloading the dependencies at build time
from a secure location is as close to following the CRAN policy as it
gets.

-- 
Best regards,
Ivan


From rhe|p @end|ng |rom krueger-|@m||y@de  Thu Feb 18 16:36:08 2021
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Thu, 18 Feb 2021 16:36:08 +0100
Subject: [R-pkg-devel] How to manage using different packages if available
 (suggests - imports)
Message-ID: <526f1815-fda7-4435-1e53-18a102f49f6f@krueger-family.de>

The following problem:

there are three packages foo1, foo2 and foo3 to use with the update of a 
package. The availability depends on the configuration of the host 
system. f.e java version

If I write in the Description

...
Suggests: foo1, foo2, foo3
....

inside of functions if have:

functionfoo <- function(data,usingpackage {
.....
foo1, foo2 and foo3
  if (usingpackage == "foo1") {
  do_something
}

.....

if (usingpackage == "foo2") {
  do_something
}
....
if (usingpackage == "foo3") {
  do_something
}

....
}

But of course it is not possible to get a positive check result.
It starts either with the missing package at suggest statement
or if I remove the suggest statement there is an error
   '::' or ':::' imports not declared from:
      ?foo1? ?foo2? ?foo3?
    'loadNamespace' or 'requireNamespace' calls not declared from:
      ?foo1? ?foo2? ?foo3?

Any hints to solve this issue?


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb 18 16:52:55 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 18 Feb 2021 10:52:55 -0500
Subject: [R-pkg-devel] 
 How to manage using different packages if available
 (suggests - imports)
In-Reply-To: <526f1815-fda7-4435-1e53-18a102f49f6f@krueger-family.de>
References: <526f1815-fda7-4435-1e53-18a102f49f6f@krueger-family.de>
Message-ID: <0d29f9e8-f586-036e-bdf8-436135508218@gmail.com>

I don't see your tests for the presence of the package you're using, but 
if you have those set up properly, the messages you get about some of 
your suggested packages not being available aren't going to matter, and 
you can suppress them using by having environment variable 
_R_CHECK_FORCE_SUGGESTS_ set to "FALSE".  If you are worried about a 
CRAN submission, explain to them in your submission message why they 
can't have all your suggested packages.

Duncan Murdoch

On 18/02/2021 10:36 a.m., Knut Krueger wrote:
> The following problem:
> 
> there are three packages foo1, foo2 and foo3 to use with the update of a
> package. The availability depends on the configuration of the host
> system. f.e java version
> 
> If I write in the Description
> 
> ...
> Suggests: foo1, foo2, foo3
> ....
> 
> inside of functions if have:
> 
> functionfoo <- function(data,usingpackage {
> .....
> foo1, foo2 and foo3
>    if (usingpackage == "foo1") {
>    do_something
> }
> 
> .....
> 
> if (usingpackage == "foo2") {
>    do_something
> }
> ....
> if (usingpackage == "foo3") {
>    do_something
> }
> 
> ....
> }
> 
> But of course it is not possible to get a positive check result.
> It starts either with the missing package at suggest statement
> or if I remove the suggest statement there is an error
>     '::' or ':::' imports not declared from:
>        ?foo1? ?foo2? ?foo3?
>      'loadNamespace' or 'requireNamespace' calls not declared from:
>        ?foo1? ?foo2? ?foo3?
> 
> Any hints to solve this issue?
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From rhe|p @end|ng |rom krueger-|@m||y@de  Thu Feb 18 18:48:25 2021
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Thu, 18 Feb 2021 18:48:25 +0100
Subject: [R-pkg-devel] 
 How to manage using different packages if available
 (suggests - imports)
In-Reply-To: <0d29f9e8-f586-036e-bdf8-436135508218@gmail.com>
References: <526f1815-fda7-4435-1e53-18a102f49f6f@krueger-family.de>
 <0d29f9e8-f586-036e-bdf8-436135508218@gmail.com>
Message-ID: <aab1b303-cbea-ad8b-6b98-e712bd47be00@krueger-family.de>

Am 18.02.21 um 16:52 schrieb Duncan Murdoch:

> you can suppress them using by having environment variable 
> _R_CHECK_FORCE_SUGGESTS_ set to "FALSE".? If you are worried about a 
> CRAN submission, explain to them in your submission message why they 
> can't have all your suggested packages.

Yes this is my major problem.
Thank you for your help

Knut
> 
> Duncan Murdoch
> 
> On 18/02/2021 10:36 a.m., Knut Krueger wrote:
>> The following problem:
>>
>> there are three packages foo1, foo2 and foo3 to use with the update of a
>> package. The availability depends on the configuration of the host
>> system. f.e java version
>>
>> If I write in the Description
>>
>> ...
>> Suggests: foo1, foo2, foo3
>> ....
>>
>> inside of functions if have:
>>
>> functionfoo <- function(data,usingpackage {
>> .....
>> foo1, foo2 and foo3
>> ?? if (usingpackage == "foo1") {
>> ?? do_something
>> }
>>
>> .....
>>
>> if (usingpackage == "foo2") {
>> ?? do_something
>> }
>> ....
>> if (usingpackage == "foo3") {
>> ?? do_something
>> }
>>
>> ....
>> }
>>
>> But of course it is not possible to get a positive check result.
>> It starts either with the missing package at suggest statement
>> or if I remove the suggest statement there is an error
>> ??? '::' or ':::' imports not declared from:
>> ?????? ?foo1? ?foo2? ?foo3?
>> ???? 'loadNamespace' or 'requireNamespace' calls not declared from:
>> ?????? ?foo1? ?foo2? ?foo3?
>>
>> Any hints to solve this issue?
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Feb 18 19:43:18 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 18 Feb 2021 10:43:18 -0800
Subject: [R-pkg-devel] How to R CMD build / check using LTO
In-Reply-To: <a2b93ab9-d495-2d81-7465-4d71d4ed6217@posteo.de>
References: <b748aee9-aa3f-31ff-7d20-ef34ba6bb8c1@posteo.de>
 <CAHqSRuSoFehW3sdrGdmmLtrDCxEBMY0nj-21zT9cQmJNvntCAQ@mail.gmail.com>
 <a2b93ab9-d495-2d81-7465-4d71d4ed6217@posteo.de>
Message-ID: <CAHqSRuQj8mdMWfuTO4FFxga9BuRxzxQ7OG_Jj_kcc6D5C0hd9Q@mail.gmail.com>

Hi Paul,

I think that changing the Fortran logicals to integers is the easiest
way to fix this up.

In the old days (1990's and maybe later), there were Fortran compilers
that did not map .TRUE. to 1 and .FALSE. to 0, but I suspect that R's
.Fortran does not cater to them.  I avoid Fortran logicals out of
habit.

-Bill

On Thu, Feb 18, 2021 at 1:59 AM Paul Schmidt-Walter
<paul.schmidt-walter at posteo.de> wrote:
>
> Hi Bill,
>
> thanks a lot for your suggestion!
>
> I managed to use Gabors Docker image to reproduce the warning... I
> already found a solution, by turning LOGICAL to INTEGER in the F77_CALL
> and declare the subroutines' respective variables as
> integer(kind=c_int)... Was that your suggestion? Or is there an easier way?
>
> Thanks
>
> Paul
>
> On 2/17/21 9:48 PM, Bill Dunlap wrote:
> > I suspect your problem is that, at least with the recent gnu
> > compilers, the Fortran 'c_logical' maps to the C _Bool, not the C int.
> >
> > -Bill
> >
> > On Wed, Feb 17, 2021 at 11:38 AM Paul Schmidt-Walter
> > <paul.schmidt-walter at posteo.de> wrote:
> >> Dear Team,
> >>
> >> My package 'LWFBrook90R' (https://github.com/pschmidtwalter/LWFBrook90R)
> >> was recently released on CRAN, but there are additional LTO Issues
> >> (https://www.stats.ox.ac.uk/pub/bdr/LTO/LWFBrook90R.out) with the
> >> compiled code, that need to be fixed soon.
> >>
> >> I would like to reproduce the LTO warnings locally to see if possible
> >> solutions fix them, but dont know how to build and check with LTO. I am
> >> a newbie on Ubuntu 18.04 and hope to get help in this case.
> >>
> >> There is information provided on how to configure R to reproduce the
> >> test (https://www.stats.ox.ac.uk/pub/bdr/LTO/README.txt), but I simply
> >> don't know how to "build with configure --enable-lto" and I also can't
> >> find the "config.site" file on my system to enable the respective
> >> compiler flags (see below).
> >>
> >> Any help is appreciated!
> >>
> >> Paul
> >>
> >> ---
> >>
> >> LTO-Readme.txt:
> >>
> >> Compilation logs for CRAN packages using x86_64 Fedora 32 Linux
> >> (currently using GCC 10.1)built with configure --enable-lto and
> >> config.site:
> >>
> >> CFLAGS="-g -O2 -Wall -pedantic -mtune=native"
> >> FFLAGS="-g -O2 -mtune=native -Wall -pedantic"
> >> CXXFLAGS="-g -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes
> >> -Wno-deprecated-declarations -Wno-parentheses"
> >> AR=gcc-ar
> >> RANLIB=gcc-ranlib
> >>
> >> Look for [-Wlto-type-mismatch] warnings.  In some cases these involve
> >> Fortran CHARACTER arguments where the length is passed as a 'hidden'
> >> argument at the end, giving mismatches such as
> >>
> >> sblas.f:3951:14: note: type ?long int? should match type ?void?
> >>
> >> To work around these, define USE_FC_LEN_T and include Rconfig.h
> >> (perhaps via R.h) before including BLAS.h or Lapack.h or your own
> >> C proptypes for Fortran functions.  Then amend the actual calls to include
> >> character length arguments: see the example of
> >> src/library/stats/src/rWishart.c
> >>
> >> in the R sources.
> >>
> >> ---
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Paul Schmidt-Walter
> Eckernf?rder Str. 66
> 24116 Kiel
>


From d@eyoung@||m @end|ng |rom uconn@edu  Thu Feb 18 22:16:02 2021
From: d@eyoung@||m @end|ng |rom uconn@edu (Daeyoung Lim)
Date: Thu, 18 Feb 2021 16:16:02 -0500
Subject: [R-pkg-devel] DLL vctrs not found in winbuilder test
Message-ID: <CAAd_GN60R8RA2KBv0pmiAz2SboOdWm_y4rfaXHgyQfUg0PJM+w@mail.gmail.com>

Hello,

I'm testing my package on winbuilder (devel) but somehow it's firing
this error message even though my package doesn't use vctrs package.
I see that vctrs is suggested by rmarkdown which is included as
suggested in my package (metapack) for vignette. I didn't have this
issue until yesterday but somehow it's giving me this weird error.

Is it possible that winbuilder has a broken vctrs package?

Thank you for your time.


Error in library.dynam(lib, package, package.lib) :
  DLL 'vctrs' not found: maybe not installed for this architecture?
Calls: <Anonymous> ... namespaceImportFrom -> asNamespace ->
loadNamespace -> library.dynam
Execution halted
ERROR: lazy loading failed for package 'metapack'
* removing 'd:/RCompile/CRANguest/R-devel/lib/metapack'
* restoring previous 'd:/RCompile/CRANguest/R-devel/lib/metapack'

*Daeyoung Lim, MS*

Ph.D. Student

Department of Statistics

University of Connecticut

Philip E. Austin, <https://goo.gl/maps/HsS7bzAMgCw>215 Glenbrook Road
<https://goo.gl/maps/HsS7bzAMgCw>

Storrs Mansfield, CT 06269-4120 <https://goo.gl/maps/HsS7bzAMgCw>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Feb 18 23:46:39 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 18 Feb 2021 23:46:39 +0100
Subject: [R-pkg-devel] DLL vctrs not found in winbuilder test
In-Reply-To: <CAAd_GN60R8RA2KBv0pmiAz2SboOdWm_y4rfaXHgyQfUg0PJM+w@mail.gmail.com>
References: <CAAd_GN60R8RA2KBv0pmiAz2SboOdWm_y4rfaXHgyQfUg0PJM+w@mail.gmail.com>
Message-ID: <e5436f30-ad1c-2d55-7388-e67c407fa966@statistik.tu-dortmund.de>



On 18.02.2021 22:16, Daeyoung Lim wrote:
> Hello,
> 
> I'm testing my package on winbuilder (devel) but somehow it's firing
> this error message even though my package doesn't use vctrs package.
> I see that vctrs is suggested by rmarkdown which is included as
> suggested in my package (metapack) for vignette. I didn't have this
> issue until yesterday but somehow it's giving me this weird error.
> 
> Is it possible that winbuilder has a broken vctrs package?

Yes, fixed now.

Best,
Uwe Ligges

> Thank you for your time.
> 
> 
> Error in library.dynam(lib, package, package.lib) :
>    DLL 'vctrs' not found: maybe not installed for this architecture?
> Calls: <Anonymous> ... namespaceImportFrom -> asNamespace ->
> loadNamespace -> library.dynam
> Execution halted
> ERROR: lazy loading failed for package 'metapack'
> * removing 'd:/RCompile/CRANguest/R-devel/lib/metapack'
> * restoring previous 'd:/RCompile/CRANguest/R-devel/lib/metapack'
> 
> *Daeyoung Lim, MS*
> 
> Ph.D. Student
> 
> Department of Statistics
> 
> University of Connecticut
> 
> Philip E. Austin, <https://goo.gl/maps/HsS7bzAMgCw>215 Glenbrook Road
> <https://goo.gl/maps/HsS7bzAMgCw>
> 
> Storrs Mansfield, CT 06269-4120 <https://goo.gl/maps/HsS7bzAMgCw>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |uc@r @end|ng |rom |edor@project@org  Sun Feb 21 15:47:13 2021
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 21 Feb 2021 15:47:13 +0100
Subject: [R-pkg-devel] Support for several versions of another package
Message-ID: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>

Hi,

Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB
removes function1 and exports function2 for the same functionality. So
pkgA does something along these lines:

if (utils::packageVersion("pkgB") < 2) {
  pkgB::function1()
} else {
  pkgB::function2()
}

I'd say that there's nothing wrong with this code, and yet checks will
complain about "missing o unexported object" in pkgB, for either
function1 or function2 depending on the version of pkgB that is
available.

Isn't this a false positive? Or is there a better way of doing this?

Regards,
--
I?aki ?car


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Feb 21 18:05:42 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 21 Feb 2021 12:05:42 -0500
Subject: [R-pkg-devel] Support for several versions of another package
In-Reply-To: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
References: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
Message-ID: <4f2fc3c3-eb48-59b4-782d-1a1ca45851fd@gmail.com>

On 21/02/2021 9:47 a.m., I?aki Ucar wrote:
> Hi,
> 
> Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB
> removes function1 and exports function2 for the same functionality. So
> pkgA does something along these lines:
> 
> if (utils::packageVersion("pkgB") < 2) {
>    pkgB::function1()
> } else {
>    pkgB::function2()
> }
> 
> I'd say that there's nothing wrong with this code, and yet checks will
> complain about "missing o unexported object" in pkgB, for either
> function1 or function2 depending on the version of pkgB that is
> available.
> 
> Isn't this a false positive? Or is there a better way of doing this?

I'd agree it's a false positive, but I wouldn't expect the check code to 
be able to interpret the logic.

A better way could be to handle it in your NAMESPACE file.  For example, 
this is legal (if nonsense):

if (utils::packageVersion("rgl") < "0.99.0") {
	importFrom(rgl, bar = somethingNonexistent)
} else
	importFrom(rgl, bar = persp3d)


Now in the package you can refer to bar, and it'll be persp3d for a new 
version of rgl, somethingNonexistent for an old one.  You won't get a 
warning that somethingNonexistent doesn't exist as long as you're not on 
the old version of rgl.

Duncan Murdoch


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sun Feb 21 18:17:13 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sun, 21 Feb 2021 18:17:13 +0100
Subject: [R-pkg-devel] Support for several versions of another package
In-Reply-To: <4f2fc3c3-eb48-59b4-782d-1a1ca45851fd@gmail.com>
References: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
 <4f2fc3c3-eb48-59b4-782d-1a1ca45851fd@gmail.com>
Message-ID: <CABtg=K=F9_B25Lwy_gtJNPCrk7kFrb8LkN+acEX1hpxvUhT_gg@mail.gmail.com>

On Sun, Feb 21, 2021 at 6:05 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 21/02/2021 9:47 a.m., I?aki Ucar wrote:
> > Hi,
> >
> > Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB
> > removes function1 and exports function2 for the same functionality. So
> > pkgA does something along these lines:
> >
> > if (utils::packageVersion("pkgB") < 2) {
> >    pkgB::function1()
> > } else {
> >    pkgB::function2()
> > }
> >
> > I'd say that there's nothing wrong with this code, and yet checks will
> > complain about "missing o unexported object" in pkgB, for either
> > function1 or function2 depending on the version of pkgB that is
> > available.
> >
> > Isn't this a false positive? Or is there a better way of doing this?
>
> I'd agree it's a false positive, but I wouldn't expect the check code to
> be able to interpret the logic.
>
> A better way could be to handle it in your NAMESPACE file.  For example,
> this is legal (if nonsense):
>
> if (utils::packageVersion("rgl") < "0.99.0") {
>         importFrom(rgl, bar = somethingNonexistent)
> } else
>         importFrom(rgl, bar = persp3d)

Isn't this evaluated at install time? I think it is, and then you
would need to potentially reinstall the package when you update rgl,
which is not quite ideal, because it is easy to miss it, and then
you'll get runtime errors.

Gabor

> Now in the package you can refer to bar, and it'll be persp3d for a new
> version of rgl, somethingNonexistent for an old one.  You won't get a
> warning that somethingNonexistent doesn't exist as long as you're not on
> the old version of rgl.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Feb 21 20:42:36 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 21 Feb 2021 14:42:36 -0500
Subject: [R-pkg-devel] Support for several versions of another package
In-Reply-To: <CABtg=K=F9_B25Lwy_gtJNPCrk7kFrb8LkN+acEX1hpxvUhT_gg@mail.gmail.com>
References: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
 <4f2fc3c3-eb48-59b4-782d-1a1ca45851fd@gmail.com>
 <CABtg=K=F9_B25Lwy_gtJNPCrk7kFrb8LkN+acEX1hpxvUhT_gg@mail.gmail.com>
Message-ID: <ab46484d-8f8e-02b3-14e9-d176a2e7e700@gmail.com>

On 21/02/2021 12:17 p.m., G?bor Cs?rdi wrote:
> On Sun, Feb 21, 2021 at 6:05 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 21/02/2021 9:47 a.m., I?aki Ucar wrote:
>>> Hi,
>>>
>>> Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB
>>> removes function1 and exports function2 for the same functionality. So
>>> pkgA does something along these lines:
>>>
>>> if (utils::packageVersion("pkgB") < 2) {
>>>     pkgB::function1()
>>> } else {
>>>     pkgB::function2()
>>> }
>>>
>>> I'd say that there's nothing wrong with this code, and yet checks will
>>> complain about "missing o unexported object" in pkgB, for either
>>> function1 or function2 depending on the version of pkgB that is
>>> available.
>>>
>>> Isn't this a false positive? Or is there a better way of doing this?
>>
>> I'd agree it's a false positive, but I wouldn't expect the check code to
>> be able to interpret the logic.
>>
>> A better way could be to handle it in your NAMESPACE file.  For example,
>> this is legal (if nonsense):
>>
>> if (utils::packageVersion("rgl") < "0.99.0") {
>>          importFrom(rgl, bar = somethingNonexistent)
>> } else
>>          importFrom(rgl, bar = persp3d)
> 
> Isn't this evaluated at install time? I think it is, and then you
> would need to potentially reinstall the package when you update rgl,
> which is not quite ideal, because it is easy to miss it, and then
> you'll get runtime errors.

Yes, you're right, I didn't know that.  That's not as useful.

Duncan Murdoch


From k@r|m@r@h|m @end|ng |rom gm@||@com  Mon Feb 22 01:52:43 2021
From: k@r|m@r@h|m @end|ng |rom gm@||@com (Karim Rahim)
Date: Sun, 21 Feb 2021 19:52:43 -0500
Subject: [R-pkg-devel] Two compile questions
Message-ID: <CAAZer4=n5_tPFqWRRsE2uMTJFnaSmqAK=piQ4Y7jBY+tOda3LQ@mail.gmail.com>

Hi,

I'm in the process of incorporating some improvements that I pulled from
github.
I am getting a warning and a note. These occur when I run

R CMD check --as-cran fftwtools_0.9-10.tar.gz

1.
* checking whether package ?fftwtools? can be installed ... WARNING
Found the following significant warnings:
  'config' variable 'CPP' is deprecated
See ?/home/karim/PWLisp/fftwtools.Rcheck/00install.out? for details.

In the .out file I have the following:

* installing *source* package ?fftwtools? ...
** using staged installation
'config' variable 'CPP' is deprecated
checking for gcc... gcc -std=gnu99


2.
Package has both ?src/Makevars.in? and ?src/Makevars?.
Installation with --no-configure' is unlikely to work.  If you intended
?src/Makevars? to be used on Windows, rename it to ?src/Makevars.win?
otherwise remove it.  If ?configure? created ?src/Makevars?, you need a
?cleanup? script.

I cannot find a Makevars file. I do have a Makevars.win file.

I would appreciate any help.

R version 4.0.4 (2021-02-15) -- "Lost Library Book"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)


Thanks,
Karim

	[[alternative HTML version deleted]]


From rhe|p @end|ng |rom krueger-|@m||y@de  Mon Feb 22 11:06:24 2021
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Mon, 22 Feb 2021 11:06:24 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
Message-ID: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>

I was suggested: "A citation in the Description file is typically a good 
idea because people can think  whether your package is appropriate 
before reading all docs and installing the package, just from reading 
the CRAN overview page."

but I do not find hints how to implement the doi and the references in 
the DESCRIPTION file

Thank's in advance Knut


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Mon Feb 22 11:45:23 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 22 Feb 2021 10:45:23 +0000
Subject: [R-pkg-devel] Support for several versions of another package
In-Reply-To: <ab46484d-8f8e-02b3-14e9-d176a2e7e700@gmail.com>
References: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
 <4f2fc3c3-eb48-59b4-782d-1a1ca45851fd@gmail.com>
 <CABtg=K=F9_B25Lwy_gtJNPCrk7kFrb8LkN+acEX1hpxvUhT_gg@mail.gmail.com>
 <ab46484d-8f8e-02b3-14e9-d176a2e7e700@gmail.com>
Message-ID: <LOYP265MB2015ABC1FAC2D61DAD787815AE819@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

One way to avoid burying the conditional deep into the code is to put it in .onLoad(). When the author of a dependency informed me that from v.2.0.0  "as.polylist would be renamed I put the following in .onLoad():

.onLoad <- function(libname, pkgname){
    if (utils::packageVersion("PolynomF") >= "2.0.0") {
        assign("as.polylist", PolynomF::as_polylist, envir = topenv())
    }
    ## add other renamed functions here

    NULL
}

This still raises a NOTE but is a change in a single place.


Georgi Boshnakov


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Duncan Murdoch
Sent: 21 February 2021 19:43
To: G?bor Cs?rdi <csardi.gabor at gmail.com>
Cc: R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Support for several versions of another package

On 21/02/2021 12:17 p.m., G?bor Cs?rdi wrote:
> On Sun, Feb 21, 2021 at 6:05 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 21/02/2021 9:47 a.m., I?aki Ucar wrote:
>>> Hi,
>>>
>>> Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB 
>>> removes function1 and exports function2 for the same functionality. 
>>> So pkgA does something along these lines:
>>>
>>> if (utils::packageVersion("pkgB") < 2) {
>>>     pkgB::function1()
>>> } else {
>>>     pkgB::function2()
>>> }
>>>
>>> I'd say that there's nothing wrong with this code, and yet checks 
>>> will complain about "missing o unexported object" in pkgB, for 
>>> either
>>> function1 or function2 depending on the version of pkgB that is 
>>> available.
>>>
>>> Isn't this a false positive? Or is there a better way of doing this?
>>
>> I'd agree it's a false positive, but I wouldn't expect the check code 
>> to be able to interpret the logic.
>>
>> A better way could be to handle it in your NAMESPACE file.  For 
>> example, this is legal (if nonsense):
>>
>> if (utils::packageVersion("rgl") < "0.99.0") {
>>          importFrom(rgl, bar = somethingNonexistent) } else
>>          importFrom(rgl, bar = persp3d)
> 
> Isn't this evaluated at install time? I think it is, and then you 
> would need to potentially reinstall the package when you update rgl, 
> which is not quite ideal, because it is easy to miss it, and then 
> you'll get runtime errors.

Yes, you're right, I didn't know that.  That's not as useful.

Duncan Murdoch

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From |uc@r @end|ng |rom |edor@project@org  Mon Feb 22 11:51:02 2021
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 22 Feb 2021 11:51:02 +0100
Subject: [R-pkg-devel] Support for several versions of another package
In-Reply-To: <LOYP265MB2015ABC1FAC2D61DAD787815AE819@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
References: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
 <4f2fc3c3-eb48-59b4-782d-1a1ca45851fd@gmail.com>
 <CABtg=K=F9_B25Lwy_gtJNPCrk7kFrb8LkN+acEX1hpxvUhT_gg@mail.gmail.com>
 <ab46484d-8f8e-02b3-14e9-d176a2e7e700@gmail.com>
 <LOYP265MB2015ABC1FAC2D61DAD787815AE819@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CALEXWq3KPQ9-UmbARLtLGDo8Pqvhhz6S8ptJqUZcVKwdqOyKAg@mail.gmail.com>

On Mon, 22 Feb 2021 at 11:46, Georgi Boshnakov
<georgi.boshnakov at manchester.ac.uk> wrote:
>
> One way to avoid burying the conditional deep into the code is to put it in .onLoad(). When the author of a dependency informed me that from v.2.0.0  "as.polylist would be renamed I put the following in .onLoad():
>
> .onLoad <- function(libname, pkgname){
>     if (utils::packageVersion("PolynomF") >= "2.0.0") {
>         assign("as.polylist", PolynomF::as_polylist, envir = topenv())
>     }
>     ## add other renamed functions here
>
>     NULL
> }
>
> This still raises a NOTE but is a change in a single place.

This works for a renamed function. But if the function also changes
arguments, it doesn't work anymore. The only alternative I can think
of is to getFromNamespace() to bypass the check. But it's hackish.

I?aki

> Georgi Boshnakov
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Duncan Murdoch
> Sent: 21 February 2021 19:43
> To: G?bor Cs?rdi <csardi.gabor at gmail.com>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Support for several versions of another package
>
> On 21/02/2021 12:17 p.m., G?bor Cs?rdi wrote:
> > On Sun, Feb 21, 2021 at 6:05 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >>
> >> On 21/02/2021 9:47 a.m., I?aki Ucar wrote:
> >>> Hi,
> >>>
> >>> Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB
> >>> removes function1 and exports function2 for the same functionality.
> >>> So pkgA does something along these lines:
> >>>
> >>> if (utils::packageVersion("pkgB") < 2) {
> >>>     pkgB::function1()
> >>> } else {
> >>>     pkgB::function2()
> >>> }
> >>>
> >>> I'd say that there's nothing wrong with this code, and yet checks
> >>> will complain about "missing o unexported object" in pkgB, for
> >>> either
> >>> function1 or function2 depending on the version of pkgB that is
> >>> available.
> >>>
> >>> Isn't this a false positive? Or is there a better way of doing this?
> >>
> >> I'd agree it's a false positive, but I wouldn't expect the check code
> >> to be able to interpret the logic.
> >>
> >> A better way could be to handle it in your NAMESPACE file.  For
> >> example, this is legal (if nonsense):
> >>
> >> if (utils::packageVersion("rgl") < "0.99.0") {
> >>          importFrom(rgl, bar = somethingNonexistent) } else
> >>          importFrom(rgl, bar = persp3d)
> >
> > Isn't this evaluated at install time? I think it is, and then you
> > would need to potentially reinstall the package when you update rgl,
> > which is not quite ideal, because it is easy to miss it, and then
> > you'll get runtime errors.
>
> Yes, you're right, I didn't know that.  That's not as useful.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Feb 22 11:55:13 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 22 Feb 2021 11:55:13 +0100
Subject: [R-pkg-devel] Support for several versions of another package
In-Reply-To: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
References: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
Message-ID: <CABtg=K=pDDW=gO760uG2cC34FSZOqY82C0sT33cPedwUXqJCNw@mail.gmail.com>

On Sun, Feb 21, 2021 at 3:47 PM I?aki Ucar <iucar at fedoraproject.org> wrote:
>
> Hi,
>
> Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB
> removes function1 and exports function2 for the same functionality. So
> pkgA does something along these lines:
>
> if (utils::packageVersion("pkgB") < 2) {
>   pkgB::function1()
> } else {
>   pkgB::function2()
> }
>
> I'd say that there's nothing wrong with this code, and yet checks will
> complain about "missing o unexported object" in pkgB, for either
> function1 or function2 depending on the version of pkgB that is
> available.
>
> Isn't this a false positive? Or is there a better way of doing this?

I would just do this:

if (utils::packageVersion("pkgB") < 2) {
  getExportedValue("pkgB", "function1")()
} else {
  getExportedValue("pkgB", "function2")()
}

I would think that the check is fine with this, although I haven't tried.

Gabor

> Regards,
> --
> I?aki ?car
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Mon Feb 22 11:59:35 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 22 Feb 2021 10:59:35 +0000
Subject: [R-pkg-devel] Support for several versions of another package
In-Reply-To: <CALEXWq3KPQ9-UmbARLtLGDo8Pqvhhz6S8ptJqUZcVKwdqOyKAg@mail.gmail.com>
References: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
 <4f2fc3c3-eb48-59b4-782d-1a1ca45851fd@gmail.com>
 <CABtg=K=F9_B25Lwy_gtJNPCrk7kFrb8LkN+acEX1hpxvUhT_gg@mail.gmail.com>
 <ab46484d-8f8e-02b3-14e9-d176a2e7e700@gmail.com>
 <LOYP265MB2015ABC1FAC2D61DAD787815AE819@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
 <CALEXWq3KPQ9-UmbARLtLGDo8Pqvhhz6S8ptJqUZcVKwdqOyKAg@mail.gmail.com>
Message-ID: <LOYP265MB20150BD7A1A0624F9F8809EFAE819@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

> This works for a renamed function. But if the function also changes arguments, it doesn't work anymore.

Indeed, didn't think about that. I forgot to mention also that the NOTE appears only with the old version of the dependency, so it disappears after a couple of years. 

FWIW, CRAN accepts a package with that note.

Georgi

-----Original Message-----
From: I?aki Ucar <iucar at fedoraproject.org> 
Sent: 22 February 2021 10:51
To: Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>
Cc: Duncan Murdoch <murdoch.duncan at gmail.com>; G?bor Cs?rdi <csardi.gabor at gmail.com>; R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Support for several versions of another package

On Mon, 22 Feb 2021 at 11:46, Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk> wrote:
>
> One way to avoid burying the conditional deep into the code is to put it in .onLoad(). When the author of a dependency informed me that from v.2.0.0  "as.polylist would be renamed I put the following in .onLoad():
>
> .onLoad <- function(libname, pkgname){
>     if (utils::packageVersion("PolynomF") >= "2.0.0") {
>         assign("as.polylist", PolynomF::as_polylist, envir = topenv())
>     }
>     ## add other renamed functions here
>
>     NULL
> }
>
> This still raises a NOTE but is a change in a single place.

This works for a renamed function. But if the function also changes arguments, it doesn't work anymore. The only alternative I can think of is to getFromNamespace() to bypass the check. But it's hackish.

I?aki

> Georgi Boshnakov
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On 
> Behalf Of Duncan Murdoch
> Sent: 21 February 2021 19:43
> To: G?bor Cs?rdi <csardi.gabor at gmail.com>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Support for several versions of another 
> package
>
> On 21/02/2021 12:17 p.m., G?bor Cs?rdi wrote:
> > On Sun, Feb 21, 2021 at 6:05 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >>
> >> On 21/02/2021 9:47 a.m., I?aki Ucar wrote:
> >>> Hi,
> >>>
> >>> Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB 
> >>> removes function1 and exports function2 for the same functionality.
> >>> So pkgA does something along these lines:
> >>>
> >>> if (utils::packageVersion("pkgB") < 2) {
> >>>     pkgB::function1()
> >>> } else {
> >>>     pkgB::function2()
> >>> }
> >>>
> >>> I'd say that there's nothing wrong with this code, and yet checks 
> >>> will complain about "missing o unexported object" in pkgB, for 
> >>> either
> >>> function1 or function2 depending on the version of pkgB that is 
> >>> available.
> >>>
> >>> Isn't this a false positive? Or is there a better way of doing this?
> >>
> >> I'd agree it's a false positive, but I wouldn't expect the check 
> >> code to be able to interpret the logic.
> >>
> >> A better way could be to handle it in your NAMESPACE file.  For 
> >> example, this is legal (if nonsense):
> >>
> >> if (utils::packageVersion("rgl") < "0.99.0") {
> >>          importFrom(rgl, bar = somethingNonexistent) } else
> >>          importFrom(rgl, bar = persp3d)
> >
> > Isn't this evaluated at install time? I think it is, and then you 
> > would need to potentially reinstall the package when you update rgl, 
> > which is not quite ideal, because it is easy to miss it, and then 
> > you'll get runtime errors.
>
> Yes, you're right, I didn't know that.  That's not as useful.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



--
I?aki ?car

From @eb@meyer @end|ng |rom |@u@de  Mon Feb 22 12:07:01 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Mon, 22 Feb 2021 12:07:01 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
In-Reply-To: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
References: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
Message-ID: <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>

Am 22.02.21 um 11:06 schrieb Knut Krueger:
> I was suggested: "A citation in the Description file is typically a good
> idea because people can think? whether your package is appropriate
> before reading all docs and installing the package, just from reading
> the CRAN overview page."
> 
> but I do not find hints how to implement the doi and the references in
> the DESCRIPTION file
> 
> Thank's in advance Knut


If you are submitting to CRAN, the relevant guidelines can be found in
the repository policies at
https://CRAN.R-project.org/web/packages/policies.html:

> Citations in the ?Description? field of the DESCRIPTION file should be in author-year style, followed by a DOI or ISBN for published materials, or a URL otherwise. Preferably, the year and identifier would be enclosed, respectively, in parentheses and angle brackets. 


Example: Einstein et al. (1935) <doi:10.1103/PhysRev.47.777>.


Best regards,

	Sebastian Meyer


From |uc@r @end|ng |rom |edor@project@org  Mon Feb 22 14:15:56 2021
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 22 Feb 2021 14:15:56 +0100
Subject: [R-pkg-devel] Support for several versions of another package
In-Reply-To: <CABtg=K=pDDW=gO760uG2cC34FSZOqY82C0sT33cPedwUXqJCNw@mail.gmail.com>
References: <CALEXWq21jNRmvLvtVTz9EsQ0pddyYb+No+ugne1S+ak6V+1khg@mail.gmail.com>
 <CABtg=K=pDDW=gO760uG2cC34FSZOqY82C0sT33cPedwUXqJCNw@mail.gmail.com>
Message-ID: <CALEXWq2AfH+NEdO_UYQOktqO3XG0iw9JJzfTr1=5ZwA90T1qFw@mail.gmail.com>

On Mon, 22 Feb 2021 at 11:55, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> On Sun, Feb 21, 2021 at 3:47 PM I?aki Ucar <iucar at fedoraproject.org> wrote:
> >
> > Hi,
> >
> > Let's say that pkgA uses pkgB::function1. Then, version 2 of pkgB
> > removes function1 and exports function2 for the same functionality. So
> > pkgA does something along these lines:
> >
> > if (utils::packageVersion("pkgB") < 2) {
> >   pkgB::function1()
> > } else {
> >   pkgB::function2()
> > }
> >
> > I'd say that there's nothing wrong with this code, and yet checks will
> > complain about "missing o unexported object" in pkgB, for either
> > function1 or function2 depending on the version of pkgB that is
> > available.
> >
> > Isn't this a false positive? Or is there a better way of doing this?
>
> I would just do this:
>
> if (utils::packageVersion("pkgB") < 2) {
>   getExportedValue("pkgB", "function1")()
> } else {
>   getExportedValue("pkgB", "function2")()
> }
>
> I would think that the check is fine with this, although I haven't tried.

This works without warnings or notes. Thanks!

-- 
I?aki ?car


From rhe|p @end|ng |rom krueger-|@m||y@de  Mon Feb 22 14:46:11 2021
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Mon, 22 Feb 2021 14:46:11 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
In-Reply-To: <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>
References: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
 <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>
Message-ID: <95bdd384-6485-47dd-08f4-d1d4e4991acb@krueger-family.de>

Am 22.02.21 um 12:07 schrieb Sebastian Meyer:

> Example: Einstein et al. (1935) <doi:10.1103/PhysRev.47.777>.

What is the syntax if  I have multiple references f.e

For function foo1:
  Autor1 (2000) >doi:23837454235r2354.45764>
  Autor2 (2003) >doi:d73234k458f83.38358235>
For function foo2:
  Autor3 (2013) <doi:395?4872345m.dff73q4523>

Regards Knut
> 
> 
> Best regards,
> 
> 	Sebastian Meyer
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Feb 22 14:58:17 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 22 Feb 2021 14:58:17 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
In-Reply-To: <95bdd384-6485-47dd-08f4-d1d4e4991acb@krueger-family.de>
References: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
 <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>
 <95bdd384-6485-47dd-08f4-d1d4e4991acb@krueger-family.de>
Message-ID: <21976b0b-6379-20db-8840-88616459d51e@statistik.tu-dortmund.de>



On 22.02.2021 14:46, Knut Krueger wrote:
> Am 22.02.21 um 12:07 schrieb Sebastian Meyer:
> 
>> Example: Einstein et al. (1935) <doi:10.1103/PhysRev.47.777>.
> 
> What is the syntax if? I have multiple references f.e
> 
> For function foo1:
>  ?Autor1 (2000) >doi:23837454235r2354.45764>
>  ?Autor2 (2003) >doi:d73234k458f83.38358235>
> For function foo2:
>  ?Autor3 (2013) <doi:395?4872345m.dff73q4523>


Write it inline as in:

See Author 1 (2021) <doi:10....> and Author 2 (2004) <doi:10......>.

Best,
Uwe Ligges

> Regards Knut
>>
>>
>> Best regards,
>>
>> ????Sebastian Meyer
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rhe|p @end|ng |rom krueger-|@m||y@de  Mon Feb 22 16:44:31 2021
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Mon, 22 Feb 2021 16:44:31 +0100
Subject: [R-pkg-devel] Unfixed error on cran submission:
 r-oldrel-macos-x86_64 ERROR
Message-ID: <58cf6a49-040e-fe45-d02e-0cde2f2bc85a@krueger-family.de>


I clicked yes that I have fixed all errors, because I have no idea to 
fix Mac errors:

   No protocol specified
     No protocol specified
     Warning in fun(libname, pkgname) : couldn't connect to display ":0"
     Error in structure(.External(.C_dotTclObjv, objv), class = "tclObj") :
      [tcl] invalid command name "font".
     Calls: foo ... .tkplot.convert.font -> <Anonymous> -> tcl -> 
.Tcl.objv -> structure
     Execution halted
Flavor: r-oldrel-macos-x86_64


What can I do with errors at unknown operating systems ...
I can fix windows and linux but not mac


Regards Knut


From edd @end|ng |rom deb|@n@org  Mon Feb 22 17:52:59 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 22 Feb 2021 10:52:59 -0600
Subject: [R-pkg-devel] Two compile questions
In-Reply-To: <CAAZer4=n5_tPFqWRRsE2uMTJFnaSmqAK=piQ4Y7jBY+tOda3LQ@mail.gmail.com>
References: <CAAZer4=n5_tPFqWRRsE2uMTJFnaSmqAK=piQ4Y7jBY+tOda3LQ@mail.gmail.com>
Message-ID: <24627.57707.219096.811245@rob.eddelbuettel.com>


On 21 February 2021 at 19:52, Karim Rahim wrote:
| I'm in the process of incorporating some improvements that I pulled from
| github.
| I am getting a warning and a note. These occur when I run
| 
| R CMD check --as-cran fftwtools_0.9-10.tar.gz
| 
| 1.
| * checking whether package ?fftwtools? can be installed ... WARNING
| Found the following significant warnings:
|   'config' variable 'CPP' is deprecated
| See ?/home/karim/PWLisp/fftwtools.Rcheck/00install.out? for details.
| 
| In the .out file I have the following:
| 
| * installing *source* package ?fftwtools? ...
| ** using staged installation
| 'config' variable 'CPP' is deprecated
| checking for gcc... gcc -std=gnu99

What R version and/or OS version?  I do not see this with R 4.0.4 on Ubuntu.
But that may be related to 2. below. Read on...

| 2.
| Package has both ?src/Makevars.in? and ?src/Makevars?.
| Installation with --no-configure' is unlikely to work.  If you intended
| ?src/Makevars? to be used on Windows, rename it to ?src/Makevars.win?
| otherwise remove it.  If ?configure? created ?src/Makevars?, you need a
| ?cleanup? script.
| 
| I cannot find a Makevars file. I do have a Makevars.win file.

You could be using a standard tool called 'autoconf'. There are some nice
tutorials out there. In essence it is used by calling 'autoconf' to turn a
'configure.ac' into a 'configure'.  The script 'configure' is then included
in package, executed by 'R CMD INSTALL ...' and friends and used to turn
'src/Makevars.in' into 'src/Makevars'.

| I would appreciate any help.

However, when I run 'autoconf' I

a) get the CPP warning (and we can likely remove the line from configure.ac)

b) worse, the resulting configure no longer works as the PKG_CHECK_MODULE
   use appears broken.

yet you do not need or use these as you have a _fixed_ src/Makevars. So no
need for configure.

I use these tools in my packages too. I can look into this later (maybe this
evening) and send you a pull request. Long story short you probably do not
even need autoconf, we can probably just use a shell script or Makefile
snippet to use

   edd at rob:~/git/fftwtools(master)$ pkg-config --cflags fftw3

   edd at rob:~/git/fftwtools(master)$ pkg-config --libs fftw3
   -lfftw3
   edd at rob:~/git/fftwtools(master)$ 

where on my Ubuntu system no -I is needed and no -L is needed either as
headers and shared library are in a common spot.  The difficulty generally is
dealing with non-standard situations. Outsourcing that to 'pkg-config' is one
option. You can also look at other packages using fftw3, for example CRAN
package 'fftw' that you depend upon too.  It _has_ what appears to be a
working configure.ac so you could read and study that and carry it over.
Note that it is a little longer than what you in your repo.

Hope this helps, Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From bkum@r @end|ng |rom rocket@o|tw@re@com  Tue Feb 23 03:03:34 2021
From: bkum@r @end|ng |rom rocket@o|tw@re@com (Binit Kumar)
Date: Tue, 23 Feb 2021 02:03:34 +0000
Subject: [R-pkg-devel] FW: CRAN submission RIBMDB 1.0-21
In-Reply-To: <20210222152235.97649162EA6@xmpalantir.wu.ac.at>
References: <20210222152235.97649162EA6@xmpalantir.wu.ac.at>
Message-ID: <BN8PR07MB58923374CFB2844F55F72763BC809@BN8PR07MB5892.namprd07.prod.outlook.com>

Hi Team,
I uploaded a package to CRAN but didn?t get any response on success or failure.
How to know the status of the same?


Thanks & Regards,
Binit Kumar

From: CRAN submission <cran-sysadmin at xmpalantir.wu.ac.at>
Sent: 22 February 2021 20:53
To: CRAN <cran-submissions at r-project.org>
Subject: CRAN submission RIBMDB 1.0-21

EXTERNAL EMAIL



[This was generated from CRAN.R-project.org/submit.html<http://CRAN.R-project.org/submit.html>]

The following package was uploaded to CRAN:
===========================================

Package Information:
Package: RIBMDB
Version: 1.0-21
Title: DB2 Database Access
Author(s): ROCKET SOFTWARE [aut, cre]
Maintainer: ROCKET SOFTWARE <bkumar at rocketsoftware.com<mailto:bkumar at rocketsoftware.com>>
Depends: R (>= 3.0.0),httr
Description: An ODBC database interface for DB2.
License: GPL-2 | GPL-3
Imports: methods, DBI, stats


The maintainer confirms that he or she
has read and agrees to the CRAN policies.

=================================================

Original content of DESCRIPTION file:

Package: RIBMDB
Version: 1.0-21
Revision: $Rev: 3500 $
Date: 2021-02-21
Authors at R: c(person("ROCKET", "SOFTWARE", role = c("aut", "cre"),
email = "bkumar at rocketsoftware.com<mailto:bkumar at rocketsoftware.com>"))
Title: DB2 Database Access
Description: An ODBC database interface for DB2.
SystemRequirements: An ODBC3 driver manager and drivers.
Depends: R (>= 3.0.0),httr
Imports: methods, DBI, stats
Collate: 'RODBCDBI.R' 'RODBC.R' 'ODBCConnection.R' 'ODBCDriver.R'
'ODBCResult.R' 'TypeInfo.R' 'sql.R' 'win.R'
'CLIDriver_installer.R'
LazyLoad: yes
Biarch: yes
License: GPL-2 | GPL-3
NeedsCompilation: yes
Packaged: 2021-02-22 15:16:58 UTC; bkumar
Author: ROCKET SOFTWARE [aut, cre]
Maintainer: ROCKET SOFTWARE <bkumar at rocketsoftware.com<mailto:bkumar at rocketsoftware.com>>
Repository: CRAN
Date/Publication: 2020-01-23 05:28:45 UTC

================================
Rocket Software, Inc. and subsidiaries ? 77 Fourth Avenue, Waltham MA 02451 ? Main Office Toll Free Number: +1 855.577.4323
Contact Customer Support: https://my.rocketsoftware.com/RocketCommunity/RCEmailSupport
Unsubscribe from Marketing Messages/Manage Your Subscription Preferences - http://www.rocketsoftware.com/manage-your-email-preferences
Privacy Policy - http://www.rocketsoftware.com/company/legal/privacy-policy
================================

This communication and any attachments may contain confidential information of Rocket Software, Inc. All unauthorized use, disclosure or distribution is prohibited. If you are not the intended recipient, please notify Rocket Software immediately and destroy all copies of this communication. Thank you.

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Feb 23 08:22:16 2021
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 23 Feb 2021 10:22:16 +0300
Subject: [R-pkg-devel] FW: CRAN submission RIBMDB 1.0-21
In-Reply-To: <BN8PR07MB58923374CFB2844F55F72763BC809@BN8PR07MB5892.namprd07.prod.outlook.com>
References: <20210222152235.97649162EA6@xmpalantir.wu.ac.at>
 <BN8PR07MB58923374CFB2844F55F72763BC809@BN8PR07MB5892.namprd07.prod.outlook.com>
Message-ID: <20210223102216.04ee0a93@Tarkus>

On Tue, 23 Feb 2021 02:03:34 +0000
Binit Kumar <bkumar at rocketsoftware.com> wrote:

> I uploaded a package to CRAN but didn?t get any response on success
> or failure. How to know the status of the same?

Glad to know you were able to solve the check problems!

Your package is currently waiting in the queue to be automatically
checked: you can see it in ftp://cran.r-project.org/incoming/pretest/

See https://lockedata.github.io/cransays/articles/dashboard.html for
more information on how CRAN seems to be working.

-- 
Best regards,
Ivan


From rhe|p @end|ng |rom krueger-|@m||y@de  Wed Feb 24 09:25:18 2021
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Wed, 24 Feb 2021 09:25:18 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
In-Reply-To: <21976b0b-6379-20db-8840-88616459d51e@statistik.tu-dortmund.de>
References: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
 <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>
 <95bdd384-6485-47dd-08f4-d1d4e4991acb@krueger-family.de>
 <21976b0b-6379-20db-8840-88616459d51e@statistik.tu-dortmund.de>
Message-ID: <9e0d0bc5-215b-cdd1-d19c-c65a7a7abeba@krueger-family.de>

Am 22.02.21 um 14:58 schrieb Uwe Ligges:

> Write it inline as in:
> 
> See Author 1 (2021) <doi:10....> and Author 2 (2004) <doi:10......>.

I see at the downloaded package that the urls are not usable by clicking.
means the doi  <doi:xyz/1234567> has not been converted to 
https://doi.org/xyz/1234567
Any chance to fix this in the description file?


Regards Knut


From @eb@meyer @end|ng |rom |@u@de  Wed Feb 24 10:05:54 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Wed, 24 Feb 2021 10:05:54 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
In-Reply-To: <9e0d0bc5-215b-cdd1-d19c-c65a7a7abeba@krueger-family.de>
References: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
 <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>
 <95bdd384-6485-47dd-08f4-d1d4e4991acb@krueger-family.de>
 <21976b0b-6379-20db-8840-88616459d51e@statistik.tu-dortmund.de>
 <9e0d0bc5-215b-cdd1-d19c-c65a7a7abeba@krueger-family.de>
Message-ID: <f94cbb73-5ccc-2745-adac-f9781490e9f3@fau.de>

I think you need to be more specific. Which "downloaded package"? Which
viewer? As the list info says: "We can't help if we don't know what the
problem is."

FWIW, this format is used by many packages that I have installed on my
machine and is rendered as a link on the CRAN package website, see
https://CRAN.R-project.org/package=colorspace, for example.

I can confirm that this format is not recognized in all HTML versions of
package descriptions out there, maybe most prominently at
https://rdrr.io/cran/colorspace/ and
https://www.r-pkg.org/pkg/colorspace . The former does not even convert
full URLs in the description text (such as the R-Forge URL).

However, the lack of clickable DOIs seems to be a limitation of these
websites not of your package description or the CRAN policy. The
required <doi:10..../....> format is officially documented at
https://www.doi.org/doi_handbook/2_Numbering.html#2.6.1

Finally, again citing the list info: "Please note that while
R-package-devel contributors will do their best to provide you accurate
and authoritative information, the final arbiters of CRAN submission is
the CRAN team." ;)

Best regards,

	Sebastian Meyer


Am 24.02.21 um 09:25 schrieb Knut Krueger:
> Am 22.02.21 um 14:58 schrieb Uwe Ligges:
> 
>> Write it inline as in:
>>
>> See Author 1 (2021) <doi:10....> and Author 2 (2004) <doi:10......>.
> 
> I see at the downloaded package that the urls are not usable by clicking.
> means the doi? <doi:xyz/1234567> has not been converted to
> https://doi.org/xyz/1234567
> Any chance to fix this in the description file?
> 
> 
> Regards Knut
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rhe|p @end|ng |rom krueger-|@m||y@de  Wed Feb 24 10:30:23 2021
From: rhe|p @end|ng |rom krueger-|@m||y@de (Knut Krueger)
Date: Wed, 24 Feb 2021 10:30:23 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
In-Reply-To: <f94cbb73-5ccc-2745-adac-f9781490e9f3@fau.de>
References: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
 <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>
 <95bdd384-6485-47dd-08f4-d1d4e4991acb@krueger-family.de>
 <21976b0b-6379-20db-8840-88616459d51e@statistik.tu-dortmund.de>
 <9e0d0bc5-215b-cdd1-d19c-c65a7a7abeba@krueger-family.de>
 <f94cbb73-5ccc-2745-adac-f9781490e9f3@fau.de>
Message-ID: <3cd0bfff-da35-6a86-a11c-07cce58b04a7@krueger-family.de>

Am 24.02.21 um 10:05 schrieb Sebastian Meyer:

Yes I realized  that it is a problem in various packages
The question was, whether there is a mistake or a limitation.
I was wondering because the CRAN PDF also is not formatting the doi in 
HTTP:\\... , but the URL

Regards Knut
> I think you need to be more specific. Which "downloaded package"? Which
> viewer? As the list info says: "We can't help if we don't know what the
> problem is."
> 
> FWIW, this format is used by many packages that I have installed on my
> machine and is rendered as a link on the CRAN package website, see
> https://CRAN.R-project.org/package=colorspace, for example.
> 
> I can confirm that this format is not recognized in all HTML versions of
> package descriptions out there, maybe most prominently at
> https://rdrr.io/cran/colorspace/ and
> https://www.r-pkg.org/pkg/colorspace . The former does not even convert
> full URLs in the description text (such as the R-Forge URL).
> 
> However, the lack of clickable DOIs seems to be a limitation of these
> websites not of your package description or the CRAN policy. The
> required <doi:10..../....> format is officially documented at
> https://www.doi.org/doi_handbook/2_Numbering.html#2.6.1
> 
> Finally, again citing the list info: "Please note that while
> R-package-devel contributors will do their best to provide you accurate
> and authoritative information, the final arbiters of CRAN submission is
> the CRAN team." ;)
> 
> Best regards,
> 
> 	Sebastian Meyer
> 
> 
> Am 24.02.21 um 09:25 schrieb Knut Krueger:
>> Am 22.02.21 um 14:58 schrieb Uwe Ligges:
>>
>>> Write it inline as in:
>>>
>>> See Author 1 (2021) <doi:10....> and Author 2 (2004) <doi:10......>.
>>
>> I see at the downloaded package that the urls are not usable by clicking.
>> means the doi? <doi:xyz/1234567> has not been converted to
>> https://doi.org/xyz/1234567
>> Any chance to fix this in the description file?
>>
>>
>> Regards Knut
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Feb 24 12:22:51 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 24 Feb 2021 12:22:51 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
In-Reply-To: <3cd0bfff-da35-6a86-a11c-07cce58b04a7@krueger-family.de>
References: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
 <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>
 <95bdd384-6485-47dd-08f4-d1d4e4991acb@krueger-family.de>
 <21976b0b-6379-20db-8840-88616459d51e@statistik.tu-dortmund.de>
 <9e0d0bc5-215b-cdd1-d19c-c65a7a7abeba@krueger-family.de>
 <f94cbb73-5ccc-2745-adac-f9781490e9f3@fau.de>
 <3cd0bfff-da35-6a86-a11c-07cce58b04a7@krueger-family.de>
Message-ID: <d03fb991-262b-0959-585e-0e278570024d@statistik.tu-dortmund.de>



On 24.02.2021 10:30, Knut Krueger wrote:
> Am 24.02.21 um 10:05 schrieb Sebastian Meyer:
> 
> Yes I realized? that it is a problem in various packages
> The question was, whether there is a mistake or a limitation.
> I was wondering because the CRAN PDF also is not formatting the doi in 
> HTTP:\\... , but the URL

Limitation:
The intention always was to provide links from the packages' CRAN pages. 
And that works.

We may work on the PDF versions.

Best,
Uwe Ligges



> 
> Regards Knut
>> I think you need to be more specific. Which "downloaded package"? Which
>> viewer? As the list info says: "We can't help if we don't know what the
>> problem is."
>>
>> FWIW, this format is used by many packages that I have installed on my
>> machine and is rendered as a link on the CRAN package website, see
>> https://CRAN.R-project.org/package=colorspace, for example.
>>
>> I can confirm that this format is not recognized in all HTML versions of
>> package descriptions out there, maybe most prominently at
>> https://rdrr.io/cran/colorspace/ and
>> https://www.r-pkg.org/pkg/colorspace . The former does not even convert
>> full URLs in the description text (such as the R-Forge URL).
>>
>> However, the lack of clickable DOIs seems to be a limitation of these
>> websites not of your package description or the CRAN policy. The
>> required <doi:10..../....> format is officially documented at
>> https://www.doi.org/doi_handbook/2_Numbering.html#2.6.1
>>
>> Finally, again citing the list info: "Please note that while
>> R-package-devel contributors will do their best to provide you accurate
>> and authoritative information, the final arbiters of CRAN submission is
>> the CRAN team." ;)
>>
>> Best regards,
>>
>> ????Sebastian Meyer
>>
>>
>> Am 24.02.21 um 09:25 schrieb Knut Krueger:
>>> Am 22.02.21 um 14:58 schrieb Uwe Ligges:
>>>
>>>> Write it inline as in:
>>>>
>>>> See Author 1 (2021) <doi:10....> and Author 2 (2004) <doi:10......>.
>>>
>>> I see at the downloaded package that the urls are not usable by 
>>> clicking.
>>> means the doi? <doi:xyz/1234567> has not been converted to
>>> https://doi.org/xyz/1234567
>>> Any chance to fix this in the description file?
>>>
>>>
>>> Regards Knut
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @eb@meyer @end|ng |rom |@u@de  Wed Feb 24 13:23:39 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Wed, 24 Feb 2021 13:23:39 +0100
Subject: [R-pkg-devel] Citation in DESCRIPTION file
In-Reply-To: <d03fb991-262b-0959-585e-0e278570024d@statistik.tu-dortmund.de>
References: <b8e7e511-3289-27e8-45f3-cd124099a082@krueger-family.de>
 <ff9b8911-44ca-c88e-aed0-9e4215cc96c8@fau.de>
 <95bdd384-6485-47dd-08f4-d1d4e4991acb@krueger-family.de>
 <21976b0b-6379-20db-8840-88616459d51e@statistik.tu-dortmund.de>
 <9e0d0bc5-215b-cdd1-d19c-c65a7a7abeba@krueger-family.de>
 <f94cbb73-5ccc-2745-adac-f9781490e9f3@fau.de>
 <3cd0bfff-da35-6a86-a11c-07cce58b04a7@krueger-family.de>
 <d03fb991-262b-0959-585e-0e278570024d@statistik.tu-dortmund.de>
Message-ID: <e1048268-3005-ca55-9194-bef6a5839ef4@fau.de>

Am 24.02.21 um 12:22 schrieb Uwe Ligges:
> 
> 
> On 24.02.2021 10:30, Knut Krueger wrote:
>> Am 24.02.21 um 10:05 schrieb Sebastian Meyer:
>>
>> Yes I realized? that it is a problem in various packages
>> The question was, whether there is a mistake or a limitation.
>> I was wondering because the CRAN PDF also is not formatting the doi in
>> HTTP:\\... , but the URL
> 
> Limitation:
> The intention always was to provide links from the packages' CRAN pages.
> And that works.
> 
> We may work on the PDF versions.

Good idea. I have submitted a bug report for this at

https://bugs.r-project.org/bugzilla/show_bug.cgi?id=18065

and will work on a patch when time permits and if not taken up by
someone else.

Best regards,

	Sebastian Meyer

> 
> Best,
> Uwe Ligges
> 
> 
> 
>>
>> Regards Knut
>>> I think you need to be more specific. Which "downloaded package"? Which
>>> viewer? As the list info says: "We can't help if we don't know what the
>>> problem is."
>>>
>>> FWIW, this format is used by many packages that I have installed on my
>>> machine and is rendered as a link on the CRAN package website, see
>>> https://CRAN.R-project.org/package=colorspace, for example.
>>>
>>> I can confirm that this format is not recognized in all HTML versions of
>>> package descriptions out there, maybe most prominently at
>>> https://rdrr.io/cran/colorspace/ and
>>> https://www.r-pkg.org/pkg/colorspace . The former does not even convert
>>> full URLs in the description text (such as the R-Forge URL).
>>>
>>> However, the lack of clickable DOIs seems to be a limitation of these
>>> websites not of your package description or the CRAN policy. The
>>> required <doi:10..../....> format is officially documented at
>>> https://www.doi.org/doi_handbook/2_Numbering.html#2.6.1
>>>
>>> Finally, again citing the list info: "Please note that while
>>> R-package-devel contributors will do their best to provide you accurate
>>> and authoritative information, the final arbiters of CRAN submission is
>>> the CRAN team." ;)
>>>
>>> Best regards,
>>>
>>> ????Sebastian Meyer
>>>
>>>
>>> Am 24.02.21 um 09:25 schrieb Knut Krueger:
>>>> Am 22.02.21 um 14:58 schrieb Uwe Ligges:
>>>>
>>>>> Write it inline as in:
>>>>>
>>>>> See Author 1 (2021) <doi:10....> and Author 2 (2004) <doi:10......>.
>>>>
>>>> I see at the downloaded package that the urls are not usable by
>>>> clicking.
>>>> means the doi? <doi:xyz/1234567> has not been converted to
>>>> https://doi.org/xyz/1234567
>>>> Any chance to fix this in the description file?
>>>>
>>>>
>>>> Regards Knut
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@me@@|@he@ter @end|ng |rom gm@||@com  Fri Feb 26 19:55:58 2021
From: j@me@@|@he@ter @end|ng |rom gm@||@com (Jim Hester)
Date: Fri, 26 Feb 2021 13:55:58 -0500
Subject: [R-pkg-devel] 
	=?utf-8?q?R_package_check_stuck_on_=E2=80=9Cchecki?=
	=?utf-8?q?ng_use_of_S3_registration_=E2=80=A6=E2=80=9D?=
In-Reply-To: <CABFhwYMoSJ+NJRbcL0rjTgu4PKYL7Ng__rn9+X17dt1DtqPv6w@mail.gmail.com>
References: <CABFhwYMoSJ+NJRbcL0rjTgu4PKYL7Ng__rn9+X17dt1DtqPv6w@mail.gmail.com>
Message-ID: <CAD6tx97CcrZd1=T02V3UkCyf9RQ9V68+OgEf3iTbPVHwjwFqZQ@mail.gmail.com>

I have recently been having this same issue and traced it to a hang when
loading the tcltk package. The 'checking use of S3 registration' part of
the check loads all the base and recommended packages and for some reason
the tcltk package was hanging during loading on my machine (macOS 11.2.1).

I would try to load tcltk and see if this is the case for you, if so
removing and reinstalling XQuartz may fix the issue.

On Thu, Feb 11, 2021 at 11:20 AM Evan Biederstedt <
evan.biederstedt at gmail.com> wrote:

> Hi there
>
> Creating an R package here which I plan to upload to CRAN. Upon checking
> the tarball created with `R CMD BUILD`, I try to use `R CMD CHECK` as
> follows:
>
> ```
> R CMD CHECK my_package.tar.gz --as-cran
> ```
>
> This normally works smoothly. However, in this case, it is stuck on
> `checking use of S3 registration` and has been there for several hours.
> I've never experienced this before; here's the partial output I see:
>
>
> ```
> ...
>  * checking package subdirectories ... OK
>  * checking R files for non-ASCII characters ... OK
>  * checking R files for syntax errors ... OK
>  * checking whether the package can be loaded ... OK
>  * checking whether the package can be loaded with stated dependencies ...
> OK
>  * checking whether the package can be unloaded cleanly ... OK
>  * checking whether the namespace can be loaded with stated dependencies
> ... OK
>  * checking whether the namespace can be unloaded cleanly ... OK
>  * checking use of S3 registration ...
>  ```
>
> (1) What does `checking use of S3 registration` really mean?
>
> (2) More importantly, why could it be stuck here? How could I fix this
> issue?
>
> Any insight or help greatly appreciated. Thanks!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ev@n@b|eder@tedt @end|ng |rom gm@||@com  Fri Feb 26 19:57:11 2021
From: ev@n@b|eder@tedt @end|ng |rom gm@||@com (Evan Biederstedt)
Date: Fri, 26 Feb 2021 13:57:11 -0500
Subject: [R-pkg-devel] 
	=?utf-8?q?R_package_check_stuck_on_=E2=80=9Cchecki?=
	=?utf-8?q?ng_use_of_S3_registration_=E2=80=A6=E2=80=9D?=
In-Reply-To: <CAD6tx97CcrZd1=T02V3UkCyf9RQ9V68+OgEf3iTbPVHwjwFqZQ@mail.gmail.com>
References: <CABFhwYMoSJ+NJRbcL0rjTgu4PKYL7Ng__rn9+X17dt1DtqPv6w@mail.gmail.com>
 <CAD6tx97CcrZd1=T02V3UkCyf9RQ9V68+OgEf3iTbPVHwjwFqZQ@mail.gmail.com>
Message-ID: <CABFhwYOS6=F9JSx=Tuhm03Bhw6Cbe1Y05Q=bWD5JaMUmLE904w@mail.gmail.com>

Hi Jim



*""">  if so removing and reinstalling XQuartz may fix the issue."""*

You might be onto something here. I did this last week, and haven't had the
issue since.

I never did find out what's going on fwiw.

Best, Evan

On Fri, Feb 26, 2021 at 1:56 PM Jim Hester <james.f.hester at gmail.com> wrote:

> I have recently been having this same issue and traced it to a hang when
> loading the tcltk package. The 'checking use of S3 registration' part of
> the check loads all the base and recommended packages and for some reason
> the tcltk package was hanging during loading on my machine (macOS 11.2.1).
>
> I would try to load tcltk and see if this is the case for you, if so
> removing and reinstalling XQuartz may fix the issue.
>
> On Thu, Feb 11, 2021 at 11:20 AM Evan Biederstedt <
> evan.biederstedt at gmail.com> wrote:
>
>> Hi there
>>
>> Creating an R package here which I plan to upload to CRAN. Upon checking
>> the tarball created with `R CMD BUILD`, I try to use `R CMD CHECK` as
>> follows:
>>
>> ```
>> R CMD CHECK my_package.tar.gz --as-cran
>> ```
>>
>> This normally works smoothly. However, in this case, it is stuck on
>> `checking use of S3 registration` and has been there for several hours.
>> I've never experienced this before; here's the partial output I see:
>>
>>
>> ```
>> ...
>>  * checking package subdirectories ... OK
>>  * checking R files for non-ASCII characters ... OK
>>  * checking R files for syntax errors ... OK
>>  * checking whether the package can be loaded ... OK
>>  * checking whether the package can be loaded with stated dependencies ...
>> OK
>>  * checking whether the package can be unloaded cleanly ... OK
>>  * checking whether the namespace can be loaded with stated dependencies
>> ... OK
>>  * checking whether the namespace can be unloaded cleanly ... OK
>>  * checking use of S3 registration ...
>>  ```
>>
>> (1) What does `checking use of S3 registration` really mean?
>>
>> (2) More importantly, why could it be stuck here? How could I fix this
>> issue?
>>
>> Any insight or help greatly appreciated. Thanks!
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Feb 26 21:31:02 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 26 Feb 2021 15:31:02 -0500
Subject: [R-pkg-devel] 
 =?utf-8?q?R_package_check_stuck_on_=E2=80=9Cchecki?=
 =?utf-8?q?ng_use_of_S3_registration_=E2=80=A6=E2=80=9D?=
In-Reply-To: <CAD6tx97CcrZd1=T02V3UkCyf9RQ9V68+OgEf3iTbPVHwjwFqZQ@mail.gmail.com>
References: <CABFhwYMoSJ+NJRbcL0rjTgu4PKYL7Ng__rn9+X17dt1DtqPv6w@mail.gmail.com>
 <CAD6tx97CcrZd1=T02V3UkCyf9RQ9V68+OgEf3iTbPVHwjwFqZQ@mail.gmail.com>
Message-ID: <440062b6-33e3-43e0-bbbb-11264896fd11@gmail.com>

XQuartz has offered users an upgrade from version 2.7.11 to 2.8.0.  The 
betas of the upgrade were causing anything X11 related to hang (rgl 
users reported it to me), and backing out to 2.7.11 didn't necessarily 
fix it.  I haven't tried the recently offered release candidate, but I 
would suspect it will cause trouble with any package compiled against 
2.7.11, as the macOS binaries on CRAN likely are.

If reinstalling 2.7.11 doesn't fix it, you may need to remove some 2.8.0 
leftovers, as described here:


https://stat.ethz.ch/pipermail/r-sig-mac/2021-February/013952.html


Duncan Murdoch




On 26/02/2021 1:55 p.m., Jim Hester wrote:
> I have recently been having this same issue and traced it to a hang when
> loading the tcltk package. The 'checking use of S3 registration' part of
> the check loads all the base and recommended packages and for some reason
> the tcltk package was hanging during loading on my machine (macOS 11.2.1).
> 
> I would try to load tcltk and see if this is the case for you, if so
> removing and reinstalling XQuartz may fix the issue.
> 
> On Thu, Feb 11, 2021 at 11:20 AM Evan Biederstedt <
> evan.biederstedt at gmail.com> wrote:
> 
>> Hi there
>>
>> Creating an R package here which I plan to upload to CRAN. Upon checking
>> the tarball created with `R CMD BUILD`, I try to use `R CMD CHECK` as
>> follows:
>>
>> ```
>> R CMD CHECK my_package.tar.gz --as-cran
>> ```
>>
>> This normally works smoothly. However, in this case, it is stuck on
>> `checking use of S3 registration` and has been there for several hours.
>> I've never experienced this before; here's the partial output I see:
>>
>>
>> ```
>> ...
>>   * checking package subdirectories ... OK
>>   * checking R files for non-ASCII characters ... OK
>>   * checking R files for syntax errors ... OK
>>   * checking whether the package can be loaded ... OK
>>   * checking whether the package can be loaded with stated dependencies ...
>> OK
>>   * checking whether the package can be unloaded cleanly ... OK
>>   * checking whether the namespace can be loaded with stated dependencies
>> ... OK
>>   * checking whether the namespace can be unloaded cleanly ... OK
>>   * checking use of S3 registration ...
>>   ```
>>
>> (1) What does `checking use of S3 registration` really mean?
>>
>> (2) More importantly, why could it be stuck here? How could I fix this
>> issue?
>>
>> Any insight or help greatly appreciated. Thanks!
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @kw@|mmo @end|ng |rom gm@||@com  Sat Feb 27 03:32:19 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Fri, 26 Feb 2021 21:32:19 -0500
Subject: [R-pkg-devel] Complex Math Functions in C
Message-ID: <CAPcHnpQyFkRV0a5wmP+8YdernjRcUoeOXDA8gTbBFCFh-L5FVQ@mail.gmail.com>

Hello,


I've been trying to translate some of my slow R code into C code, and I
need the complex math functions to be able to do this. I assumed I could
access them with

#include <R_ext/Complex.h>

but it seems as though that file only contains the definition of structure
Rcomplex. Any help accessing these functions would be greatly appreciated!

	[[alternative HTML version deleted]]


From o||ver@p@m@d@en @end|ng |rom gm@||@com  Sat Feb 27 10:03:22 2021
From: o||ver@p@m@d@en @end|ng |rom gm@||@com (Oliver Madsen)
Date: Sat, 27 Feb 2021 10:03:22 +0100
Subject: [R-pkg-devel] Complex Math Functions in C
In-Reply-To: <CAPcHnpQyFkRV0a5wmP+8YdernjRcUoeOXDA8gTbBFCFh-L5FVQ@mail.gmail.com>
References: <CAPcHnpQyFkRV0a5wmP+8YdernjRcUoeOXDA8gTbBFCFh-L5FVQ@mail.gmail.com>
Message-ID: <CAFL8AHqNuiXToCFKA=e-+Uu0QHgNam33hw+8cXZ90WM=YdTw4g@mail.gmail.com>

Complex arithmetic seems to be part of "src/main/complex.c" (all of main is
not exposed to developers).

Rcpp does have quite a bit (if not all?) of the complex math implemented
already though, so if you are not set on using C, you could instead work
with ComplexVectors in Rcpp (see the online documentation:
https://dirk.eddelbuettel.com/code/rcpp/html/namespaceRcpp_1_1internal.html#a7900c9d2c2c77396b9c0ad9340071c29).
If worse comes to worse and something you need isn't implemented, you could
check if it is implemented in std::complex.

Oliver

On Sat, Feb 27, 2021 at 6:04 AM Andrew Simmons <akwsimmo at gmail.com> wrote:

> Hello,
>
>
> I've been trying to translate some of my slow R code into C code, and I
> need the complex math functions to be able to do this. I assumed I could
> access them with
>
> #include <R_ext/Complex.h>
>
> but it seems as though that file only contains the definition of structure
> Rcomplex. Any help accessing these functions would be greatly appreciated!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  4 01:41:33 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 4 Mar 2021 13:41:33 +1300
Subject: [R-pkg-devel] Note: significantly better compression could be
 obtained ...
Message-ID: <20210304134133.14e5c1be@rolf-Latitude-E7470>


... by using R CMD build --resave-data

But I *did* use that flag with my build command!!!  And yet "R CMD
check" seems to think that I didn't!

I have done "R CMD build --resave-data kanova"  (where "kanova" is
the name of the package in question), to make sure that I didn't
fumble-finger somewhere, but there's no change.  I always get that
NOTE.

How on earth can I track down what's going wrong?

There is only one file "stomata.rda" in kanova/data.  The
file was created using:

    save(stomata,file="stomata.rda",version=2)

The file stomata.rda is a *bit* on the large size; 285607 bytes
according to "ls -l", 279Kb according to the NOTE from R CMD check.
But that's not all that big, is it?  And anyway I *did* ask
R CMD build to re-save it!

When I load stomata.rda, object.size() says that stomata uses 1611312 bytes
of memory.

I'm running Ubuntu 20.04.2 and R version 4.0.4.

Has anyone else ever been confronted with this bizarre phenomenon?

Thanks for any tips.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  4 03:51:28 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 4 Mar 2021 15:51:28 +1300
Subject: [R-pkg-devel] Using the amsmath package in a vignette.
Message-ID: <20210304155128.429acbf7@rolf-Latitude-E7470>


I am trying to create a vignette in a package (basically just using
LaTeX code; no R calculations or data are involved).

The LaTeX code involves the use of the align* environment from
the amsmath package.  When I try to run Sweave() on the *.Rnw file
I get a corresponding *.tex file, but then when I run pdflatex on
that file I get an error:

> ! LaTeX Error: Command \iint already defined.
>                Or name \end... illegal, see p.192 of the manual.
> 
> See the LaTeX manual or LaTeX Companion for explanation.
> Type  H <return>  for immediate help.
>  ...                                              
>                                                   
> l.649 ...d{\iint}{\DOTSI\protect\MultiIntegral{2}}

which is completely opaque to me.

If I don't have \usepackage{amsmath} in the *.Rnw file, I get
(unsurprisingly) an error message to the effect that the align*
environment is undefined.

Is there any way to make use of amsmath facilities in a vignette?

Alternatively, is there any way to simply use the pdf output obtained
by processing an ordinary LaTeX file as a vignette?  I have done a
bit of web searching on this, but all of the hits that I get seem to be
substantially out of date.  They refer to putting vignettes in
/inst/doc and I'm pretty sure that this is no longer how it's done.
(But I find all of the vignette business rather bewildering and
confusing.)

Grateful for any advice.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu Mar  4 06:36:23 2021
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Wed, 3 Mar 2021 21:36:23 -0800
Subject: [R-pkg-devel] Using the amsmath package in a vignette.
In-Reply-To: <20210304155128.429acbf7@rolf-Latitude-E7470>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
Message-ID: <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>

The R.rsp has a vignette engine for plain LaTeX sources. See
https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-LaTeX_vignettes.pdf
for how. It's straightforward. Maybe that helps.

Henrik

On Wed, Mar 3, 2021, 18:51 Rolf Turner <r.turner at auckland.ac.nz> wrote:

>
> I am trying to create a vignette in a package (basically just using
> LaTeX code; no R calculations or data are involved).
>
> The LaTeX code involves the use of the align* environment from
> the amsmath package.  When I try to run Sweave() on the *.Rnw file
> I get a corresponding *.tex file, but then when I run pdflatex on
> that file I get an error:
>
> > ! LaTeX Error: Command \iint already defined.
> >                Or name \end... illegal, see p.192 of the manual.
> >
> > See the LaTeX manual or LaTeX Companion for explanation.
> > Type  H <return>  for immediate help.
> >  ...
> >
> > l.649 ...d{\iint}{\DOTSI\protect\MultiIntegral{2}}
>
> which is completely opaque to me.
>
> If I don't have \usepackage{amsmath} in the *.Rnw file, I get
> (unsurprisingly) an error message to the effect that the align*
> environment is undefined.
>
> Is there any way to make use of amsmath facilities in a vignette?
>
> Alternatively, is there any way to simply use the pdf output obtained
> by processing an ordinary LaTeX file as a vignette?  I have done a
> bit of web searching on this, but all of the hits that I get seem to be
> substantially out of date.  They refer to putting vignettes in
> /inst/doc and I'm pretty sure that this is no longer how it's done.
> (But I find all of the vignette business rather bewildering and
> confusing.)
>
> Grateful for any advice.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From otoomet @end|ng |rom gm@||@com  Thu Mar  4 07:25:59 2021
From: otoomet @end|ng |rom gm@||@com (Ott Toomet)
Date: Wed, 3 Mar 2021 22:25:59 -0800
Subject: [R-pkg-devel] Using the amsmath package in a vignette.
In-Reply-To: <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
Message-ID: <CAMMJQ0b1O_cVcGk6kX4xMa0jE-51i2vcQVU1x9pG+2dBkSjVpA@mail.gmail.com>

As I read the docs (a few months ago though), you are supposed to include
the pdf and encouraged to include sources, but the process to get pdf from
source may depend on your private libraries/data/software, and is not
replicated on CRAN checks.  This seemed to work for me as my vignette
includes a less common .bst.  I sort of remember receiving errors about
missing .bst from rhub, but it definitely ran on CRAN with no red flags
raised.

On Wed, Mar 3, 2021 at 9:37 PM Henrik Bengtsson <henrik.bengtsson at gmail.com>
wrote:

> The R.rsp has a vignette engine for plain LaTeX sources. See
>
> https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-LaTeX_vignettes.pdf
> for how. It's straightforward. Maybe that helps.
>
> Henrik
>
> On Wed, Mar 3, 2021, 18:51 Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
> >
> > I am trying to create a vignette in a package (basically just using
> > LaTeX code; no R calculations or data are involved).
> >
> > The LaTeX code involves the use of the align* environment from
> > the amsmath package.  When I try to run Sweave() on the *.Rnw file
> > I get a corresponding *.tex file, but then when I run pdflatex on
> > that file I get an error:
> >
> > > ! LaTeX Error: Command \iint already defined.
> > >                Or name \end... illegal, see p.192 of the manual.
> > >
> > > See the LaTeX manual or LaTeX Companion for explanation.
> > > Type  H <return>  for immediate help.
> > >  ...
> > >
> > > l.649 ...d{\iint}{\DOTSI\protect\MultiIntegral{2}}
> >
> > which is completely opaque to me.
> >
> > If I don't have \usepackage{amsmath} in the *.Rnw file, I get
> > (unsurprisingly) an error message to the effect that the align*
> > environment is undefined.
> >
> > Is there any way to make use of amsmath facilities in a vignette?
> >
> > Alternatively, is there any way to simply use the pdf output obtained
> > by processing an ordinary LaTeX file as a vignette?  I have done a
> > bit of web searching on this, but all of the hits that I get seem to be
> > substantially out of date.  They refer to putting vignettes in
> > /inst/doc and I'm pretty sure that this is no longer how it's done.
> > (But I find all of the vignette business rather bewildering and
> > confusing.)
> >
> > Grateful for any advice.
> >
> > cheers,
> >
> > Rolf Turner
> >
> > --
> > Honorary Research Fellow
> > Department of Statistics
> > University of Auckland
> > Phone: +64-9-373-7599 ext. 88276
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From gor@n@bro@trom @end|ng |rom umu@@e  Thu Mar  4 07:39:31 2021
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Thu, 4 Mar 2021 07:39:31 +0100
Subject: [R-pkg-devel] Using the amsmath package in a vignette.
In-Reply-To: <20210304155128.429acbf7@rolf-Latitude-E7470>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
Message-ID: <a01ff576-d45d-8337-1c91-242000dc932f@umu.se>

Hi Rolf,

On 2021-03-04 03:51, Rolf Turner wrote:
> 
> I am trying to create a vignette in a package (basically just using 
> LaTeX code; no R calculations or data are involved).
> 
> The LaTeX code involves the use of the align* environment from the
> amsmath package.  When I try to run Sweave() on the *.Rnw file I get
> a corresponding *.tex file, but then when I run pdflatex on that file
> I get an error:
> 
>> ! LaTeX Error: Command \iint already defined. Or name \end...
>> illegal, see p.192 of the manual.
>> 
>> See the LaTeX manual or LaTeX Companion for explanation. Type  H
>> <return>  for immediate help. ...
>> 
>> l.649 ...d{\iint}{\DOTSI\protect\MultiIntegral{2}}
> 
> which is completely opaque to me.

Shouldn't be; the amsmath package defines \iint, and the error message 
says that it was already defined, probably in another package you have 
loaded. Easily found by googling. My first hit was

https://tex.stackexchange.com/questions/356599/command-iint-already-defined

> If I don't have \usepackage{amsmath} in the *.Rnw file, I get 
> (unsurprisingly) an error message to the effect that the align* 
> environment is undefined.
> 
> Is there any way to make use of amsmath facilities in a vignette?

Absolutely, I am doing it with no problem. I have in one preamble


\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
% \VignetteIndexEntry{Parametric duration models}
\newcommand{\btheta}{{\ensuremath{\boldsymbol{\theta}}}}
\newcommand{\bbeta}{{\ensuremath{\boldsymbol{\beta}}}}
\newcommand{\bz}{\ensuremath{\mathbf{z}}}
and so forth

> 
> Alternatively, is there any way to simply use the pdf output
> obtained by processing an ordinary LaTeX file as a vignette?  I have
> done a bit of web searching on this, but all of the hits that I get
> seem to be substantially out of date.  They refer to putting
> vignettes in /inst/doc and I'm pretty sure that this is no longer how
> it's done. (But I find all of the vignette business rather
> bewildering and confusing.)
> 
> Grateful for any advice.

Have you read the "Writing R Extensions"? There 'inst/doc' is mentioned 
under 'Non-Sweave vignettes'.

Best, G?ran Brostr?m
> 
> cheers,
> 
> Rolf Turner
>


From @eb@meyer @end|ng |rom |@u@de  Thu Mar  4 08:44:31 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 4 Mar 2021 08:44:31 +0100
Subject: [R-pkg-devel] Note: significantly better compression could be
 obtained ...
In-Reply-To: <20210304134133.14e5c1be@rolf-Latitude-E7470>
References: <20210304134133.14e5c1be@rolf-Latitude-E7470>
Message-ID: <89f61be9-bc9b-f8a7-b7cf-922f764870ae@fau.de>

Am 04.03.21 um 01:41 schrieb Rolf Turner:
> 
> ... by using R CMD build --resave-data
> 
> But I *did* use that flag with my build command!!!  And yet "R CMD
> check" seems to think that I didn't!

Just to be sure: Are you running R CMD check on that freshly built
tarball or is devtools::check() involved?

> 
> I have done "R CMD build --resave-data kanova"  (where "kanova" is
> the name of the package in question), to make sure that I didn't
> fumble-finger somewhere, but there's no change.  I always get that
> NOTE.
> 
> How on earth can I track down what's going wrong?

- Does the R CMD build log actually show "re-saving image files" or
"re-saving sysdata.rda"?

- Have you set the BuildResaveData field in your DESCRIPTION file? This
would take precedence over the --resave-data command line switch.

- Have you tried running tools::resaveRdaFiles() on your source data
directory before building the package? Does that reduce the size of your
data files?

> 
> There is only one file "stomata.rda" in kanova/data.  The
> file was created using:
> 
>     save(stomata,file="stomata.rda",version=2)
> 
> The file stomata.rda is a *bit* on the large size; 285607 bytes
> according to "ls -l", 279Kb according to the NOTE from R CMD check.
> But that's not all that big, is it?  And anyway I *did* ask
> R CMD build to re-save it!

You'll get the NOTE when R CMD check finds that running
tools::resaveRdaFiles() on the data directory would reduce a file's size
by more than 10% with a different type of compression (if the original
size is >10KB).

Hope this helps.
Best regards,

	Sebastian Meyer

> 
> When I load stomata.rda, object.size() says that stomata uses 1611312 bytes
> of memory.
> 
> I'm running Ubuntu 20.04.2 and R version 4.0.4.
> 
> Has anyone else ever been confronted with this bizarre phenomenon?
> 
> Thanks for any tips.
> 
> cheers,
> 
> Rolf Turner
>


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  4 09:19:40 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 4 Mar 2021 21:19:40 +1300
Subject: [R-pkg-devel] Using the amsmath package in a vignette.
In-Reply-To: <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
Message-ID: <20210304211940.32058aa7@rolf-Latitude-E7470>


On Wed, 3 Mar 2021 21:36:23 -0800
Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:

> The R.rsp has a vignette engine for plain LaTeX sources. See
> https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-LaTeX_vignettes.pdf
> for how. It's straightforward. Maybe that helps.

Indeed. It looks admirably comprehensible, even to a Bear of Very Little
Brain, such as my very good self.  Haven't tried it yet, but it looks
like I'll be able to cope.  Thanks very much.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  4 09:34:57 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 4 Mar 2021 21:34:57 +1300
Subject: [R-pkg-devel] Using the amsmath package in a vignette.
In-Reply-To: <a01ff576-d45d-8337-1c91-242000dc932f@umu.se>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <a01ff576-d45d-8337-1c91-242000dc932f@umu.se>
Message-ID: <20210304213457.20ba7dd2@rolf-Latitude-E7470>

On Thu, 4 Mar 2021 07:39:31 +0100
G?ran Brostr?m <goran.brostrom at umu.se> wrote:

> Hi Rolf,
> 
> On 2021-03-04 03:51, Rolf Turner wrote:
> > 
> > I am trying to create a vignette in a package (basically just using 
> > LaTeX code; no R calculations or data are involved).
> > 
> > The LaTeX code involves the use of the align* environment from the
> > amsmath package.  When I try to run Sweave() on the *.Rnw file I get
> > a corresponding *.tex file, but then when I run pdflatex on that
> > file I get an error:
> > 
> >> ! LaTeX Error: Command \iint already defined. Or name \end...
> >> illegal, see p.192 of the manual.
> >> 
> >> See the LaTeX manual or LaTeX Companion for explanation. Type  H
> >> <return>  for immediate help. ...
> >> 
> >> l.649 ...d{\iint}{\DOTSI\protect\MultiIntegral{2}}
> > 
> > which is completely opaque to me.
> 
> Shouldn't be;

Well I guess it's not opaque when you are sufficiently comfortable with
what you are doing.  But when every <expletive deleted> thing is
bewilderingly arcane it is difficult to sift out the few simple things
that actually are comprehensible.

> the amsmath package defines \iint, and the error
> message says that it was already defined, probably in another package
> you have loaded. Easily found by googling. My first hit was
> 
> https://tex.stackexchange.com/questions/356599/command-iint-already-defined

It turned out that I had \usepackage{wasysym} in the preamble.  I guess
it got there because I copied a prototype from somewhere ... long ago,
to use in another package that I maintain.  Then I copied the *.Rmw
file over from that other package and modified it, not changing those
things about which I hadn't a clue --- like wasysym.  I first
tried \usepackage[nointegrals]{wasysym} as suggested at the URL that
you pointed me to, and that worked fine.  Then I tried commenting
it out completely and that worked fine too.  So I never needed wasysym
in the first place.  But there are so *many* bits and pieces that it is
impossible to tell what is needed and what isn't.

<SNIP>

Anyhow, I seem to be good to go now.  Thanks.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  4 09:37:38 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 4 Mar 2021 21:37:38 +1300
Subject: [R-pkg-devel] Using the amsmath package in a vignette.
In-Reply-To: <CAMMJQ0b1O_cVcGk6kX4xMa0jE-51i2vcQVU1x9pG+2dBkSjVpA@mail.gmail.com>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <CAMMJQ0b1O_cVcGk6kX4xMa0jE-51i2vcQVU1x9pG+2dBkSjVpA@mail.gmail.com>
Message-ID: <20210304213738.26f966d2@rolf-Latitude-E7470>


On Wed, 3 Mar 2021 22:25:59 -0800
Ott Toomet <otoomet at gmail.com> wrote:

> As I read the docs (a few months ago though), you are supposed to
> include the pdf and encouraged to include sources, but the process to
> get pdf from source may depend on your private
> libraries/data/software, and is not replicated on CRAN checks.  This
> seemed to work for me as my vignette includes a less common .bst.  I
> sort of remember receiving errors about missing .bst from rhub, but
> it definitely ran on CRAN with no red flags raised.

<SNIP>

Aaarrgghh.  Now you've got me worried again.  I'll give it a try,
though, and see what disasters befall me! :-)

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  4 10:24:34 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 4 Mar 2021 22:24:34 +1300
Subject: [R-pkg-devel] Note: significantly better compression could be
 obtained ...
In-Reply-To: <89f61be9-bc9b-f8a7-b7cf-922f764870ae@fau.de>
References: <20210304134133.14e5c1be@rolf-Latitude-E7470>
 <89f61be9-bc9b-f8a7-b7cf-922f764870ae@fau.de>
Message-ID: <20210304222434.5a5c0ef8@rolf-Latitude-E7470>


On Thu, 4 Mar 2021 08:44:31 +0100
Sebastian Meyer <seb.meyer at fau.de> wrote:

> Am 04.03.21 um 01:41 schrieb Rolf Turner:
> > 
> > ... by using R CMD build --resave-data
> > 
> > But I *did* use that flag with my build command!!!  And yet "R CMD
> > check" seems to think that I didn't!
> 
> Just to be sure: Are you running R CMD check on that freshly built
> tarball or is devtools::check() involved?

The former.  I have never used devtools::check().
> 
> > 
> > I have done "R CMD build --resave-data kanova"  (where "kanova" is
> > the name of the package in question), to make sure that I didn't
> > fumble-finger somewhere, but there's no change.  I always get that
> > NOTE.
> > 
> > How on earth can I track down what's going wrong?
> 
> - Does the R CMD build log actually show "re-saving image files" or
> "re-saving sysdata.rda"?

Dunno what you mean by the "R CMD build log".  I could grepped
"re-saving" on all files and came up empty handed.

> - Have you set the BuildResaveData field in your DESCRIPTION file?

No.

> This would take precedence over the --resave-data command line switch.
> 
> - Have you tried running ) on your source data
> directory before building the package? Does that reduce the size of
> your data files?

Never heard of that.  Tried it just now and it reduced the size from
285607 bytes to 161743 bytes.  That's substantial I guess.

<SNIP>

> You'll get the NOTE when R CMD check finds that running
> tools::resaveRdaFiles() on the data directory would reduce a file's
> size by more than 10% with a different type of compression (if the
> original size is >10KB).

Now that I have applied tools::resaveRdaFiles(), I no longer get
the NOTE from R CMD check.  So I guess my problem is solved.  Thanks.

But this still leaves the question:  Why the <expletive deleted> is
R CMD check telling me to use the flag --resave-data, when I *just did
that*???

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @eb@meyer @end|ng |rom |@u@de  Thu Mar  4 12:09:51 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 4 Mar 2021 12:09:51 +0100
Subject: [R-pkg-devel] Note: significantly better compression could be
 obtained ...
In-Reply-To: <20210304222434.5a5c0ef8@rolf-Latitude-E7470>
References: <20210304134133.14e5c1be@rolf-Latitude-E7470>
 <89f61be9-bc9b-f8a7-b7cf-922f764870ae@fau.de>
 <20210304222434.5a5c0ef8@rolf-Latitude-E7470>
Message-ID: <1575cd6c-be78-63e7-3c54-5004c8c78da1@fau.de>

Am 04.03.21 um 10:24 schrieb Rolf Turner:
> 
> On Thu, 4 Mar 2021 08:44:31 +0100
> Sebastian Meyer <seb.meyer at fau.de> wrote:
> 
>> Am 04.03.21 um 01:41 schrieb Rolf Turner:
>>>
>>> ... by using R CMD build --resave-data
>>>
>>> But I *did* use that flag with my build command!!!  And yet "R CMD
>>> check" seems to think that I didn't!
>>
>> Just to be sure: Are you running R CMD check on that freshly built
>> tarball or is devtools::check() involved?
> 
> The former.  I have never used devtools::check().
>>
>>>
>>> I have done "R CMD build --resave-data kanova"  (where "kanova" is
>>> the name of the package in question), to make sure that I didn't
>>> fumble-finger somewhere, but there's no change.  I always get that
>>> NOTE.
>>>
>>> How on earth can I track down what's going wrong?
>>
>> - Does the R CMD build log actually show "re-saving image files" or
>> "re-saving sysdata.rda"?
> 
> Dunno what you mean by the "R CMD build log".  I could grepped
> "re-saving" on all files and came up empty handed.

I meant the standard output of R CMD build.
With --resave-data, it should show something like

* checking for empty or unneeded directories
* re-saving image files
* building '.....tar.gz'

> 
>> - Have you set the BuildResaveData field in your DESCRIPTION file?
> 
> No.
> 
>> This would take precedence over the --resave-data command line switch.
>>
>> - Have you tried running ) on your source data
>> directory before building the package? Does that reduce the size of
>> your data files?
> 
> Never heard of that.  Tried it just now and it reduced the size from
> 285607 bytes to 161743 bytes.  That's substantial I guess.
> 
> <SNIP>
> 
>> You'll get the NOTE when R CMD check finds that running
>> tools::resaveRdaFiles() on the data directory would reduce a file's
>> size by more than 10% with a different type of compression (if the
>> original size is >10KB).
> 
> Now that I have applied tools::resaveRdaFiles(), I no longer get
> the NOTE from R CMD check.  So I guess my problem is solved.  Thanks.
> 
> But this still leaves the question:  Why the <expletive deleted> is
> R CMD check telling me to use the flag --resave-data, when I *just did
> that*???

Yes, indeed! I've investigated further and found that in R 4.0.0-4.0.4
the --resave-data option of R CMD build was ineffective for packages
using LazyData. This bug has recently been fixed in R-devel (c79573) and
I think the fix should also be ported to R-patched and appear in the NEWS.

Thank you for reporting!

Best regards,

	Sebastian

> 
> cheers,
> 
> Rolf
>


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Thu Mar  4 14:09:07 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Thu, 4 Mar 2021 14:09:07 +0100
Subject: [R-pkg-devel] Why .Rbuildignore doesn't ignore?
Message-ID: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>

Dear all,

devtools::check() gives me the following NOTE:

* Non-standard files/directories found at top level:
     ?README.Rmd? ?miclust.Rproj?

I get the same result with R CMD check --as-cran and R CMD check in a
terminal.

My .Rbuildignore includes both ^.*\.Rproj$ and ^README\.Rmd$.

I haven't had this issue when checking another package I recently and
successfully sent to CRAN, so I have no idea why I get that NOTE now.

I would appreciate any help to know why .Rbuildignore seems not to ignore
those files.

Thanks,

Jose Barrera
Statistician, Associate Lecturer

*IS**Global*
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
<https://www.linkedin.com/in/josebarrera>
Personal website: sites.google.com/view/josebarrera
www.isglobal.org

This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly
prohibited by law. If this message has been received in error, please
immediately notify us via e-mail and delete it.

DATA PROTECTION. We inform you that your personal data, including your
e-mail address and data included in your email correspondence, are included
in the ISGlobal Foundation filing system. Your personal data will be used
for the purpose of contacting you and sending information on the activities
of the above foundations. You can exercise your rights to  access to
personal data, rectification, erasure, restriction of processing, data
portability and object by contacting the following address: *lopd at isglobal.org
<lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
<http://www.isglobal.org/>*.


-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.

PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando
el uso de su direcci?n de e-mail para las finalidades citadas. Puede
ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
<lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
<http://www.isglobal.org/>*.

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From th|erry@denoeux @end|ng |rom utc@|r  Thu Mar  4 14:56:49 2021
From: th|erry@denoeux @end|ng |rom utc@|r (Thierry Denoeux)
Date: Thu, 4 Mar 2021 20:56:49 +0700
Subject: [R-pkg-devel] Warning for failed attempt to rebuild the vignette of
 the previous version of a package
Message-ID: <0624EB1F-687E-4967-8D82-F7DBE8018B13@utc.fr>

Hi,

I am trying to submit a revised version of a package to CRAN and for the second time it does not pass the incoming checks. I can?t figure out why.

The new version is numbered 2.0.0, the previous one was 1.1.0.

- The Windows report gives me one note:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Thierry Denoeux <tdenoeux at utc.fr <mailto:tdenoeux at utc.fr>>'

Possibly mis-spelled words in DESCRIPTION:
  BPEC (15:41)
  Bootclus (14:77)
  CEVCLUS (13:41)
  NN (16:7)
These are just acronyms that can be easily removed. I don?t think it motivated the rejection.

- The Debian report has the same note and the following warning:

Current CRAN status: WARN: 1, OK: 11
See: <https://CRAN.R-project.org/web/checks/check_results_evclust.html <https://cran.r-project.org/web/checks/check_results_evclust.html>>

Version: 1.1.0
Check: re-building of vignette outputs, Result: WARNING
  Error(s) in re-building vignettes:
    ...
  --- re-building ?Introduction.Rmd? using rmarkdown
  Quitting from lines 112-113 (Introduction.Rmd) 
  Error: processing vignette 'Introduction.Rmd' failed with diagnostics:
  argument is of length zero
  --- failed re-building ?Introduction.Rmd?
  
  SUMMARY: processing the following file failed:
    ?Introduction.Rmd?
  
  Error: Vignette re-building failed.
  Execution halted
I don?t understand why the system is trying to rebuild the vignette of the previous version. It was built using Markdown, but in the new version I completely rewrote it using Sweave. The new vignette was rebuilt successfully, and there is no trace of the old vignette (the file ?Introduction.Rmd?) in the new version. 

Thanks for any tips.

Best regards,

Thierry Denoeux

----------
Prof. Thierry Denoeux
Universit? de technologie de Compi?gne
Institut universitaire de France
Rue Roger Couttolenc, CS 60319
60203 Compi?gne cedex, France
https://www.hds.utc.fr/~tdenoeux


	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Thu Mar  4 15:36:03 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 4 Mar 2021 15:36:03 +0100
Subject: [R-pkg-devel] 
 Warning for failed attempt to rebuild the vignette of
 the previous version of a package
In-Reply-To: <0624EB1F-687E-4967-8D82-F7DBE8018B13@utc.fr>
References: <0624EB1F-687E-4967-8D82-F7DBE8018B13@utc.fr>
Message-ID: <67e16d45-c150-bd25-02e0-71396101d13d@fau.de>

The Debian check log appends the check status of the current CRAN
version just for comparison.
[
Indeed, these old problems are sometimes mistaken to cause a rejection
and I think it would help if there were a few more empty lines between
the new and the old check results and if the first two lines said
something like
For comparison, current CRAN status: ....
From: <https://CRAN....>
]

Maybe the problem with your submission simply is that the spell check
results hinder automatic processing of your package and you need to
reply to CRAN-submissions that these words are spelled correctly?

Otherwise I guess you may have overlooked another issue somewhere in the
check log. If you included a link to the pre-test results (or a copy of
the check logs) you will likely receive more sophisticated replies.

Best regards,

	Sebastian Meyer


Am 04.03.21 um 14:56 schrieb Thierry Denoeux:
> Hi,
> 
> I am trying to submit a revised version of a package to CRAN and for the second time it does not pass the incoming checks. I can?t figure out why.
> 
> The new version is numbered 2.0.0, the previous one was 1.1.0.
> 
> - The Windows report gives me one note:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Thierry Denoeux <tdenoeux at utc.fr <mailto:tdenoeux at utc.fr>>'
> 
> Possibly mis-spelled words in DESCRIPTION:
>   BPEC (15:41)
>   Bootclus (14:77)
>   CEVCLUS (13:41)
>   NN (16:7)
> These are just acronyms that can be easily removed. I don?t think it motivated the rejection.
> 
> - The Debian report has the same note and the following warning:
> 
> Current CRAN status: WARN: 1, OK: 11
> See: <https://CRAN.R-project.org/web/checks/check_results_evclust.html <https://cran.r-project.org/web/checks/check_results_evclust.html>>
> 
> Version: 1.1.0
> Check: re-building of vignette outputs, Result: WARNING
>   Error(s) in re-building vignettes:
>     ...
>   --- re-building ?Introduction.Rmd? using rmarkdown
>   Quitting from lines 112-113 (Introduction.Rmd) 
>   Error: processing vignette 'Introduction.Rmd' failed with diagnostics:
>   argument is of length zero
>   --- failed re-building ?Introduction.Rmd?
>   
>   SUMMARY: processing the following file failed:
>     ?Introduction.Rmd?
>   
>   Error: Vignette re-building failed.
>   Execution halted
> I don?t understand why the system is trying to rebuild the vignette of the previous version. It was built using Markdown, but in the new version I completely rewrote it using Sweave. The new vignette was rebuilt successfully, and there is no trace of the old vignette (the file ?Introduction.Rmd?) in the new version. 
> 
> Thanks for any tips.
> 
> Best regards,
> 
> Thierry Denoeux
> 
> ----------
> Prof. Thierry Denoeux
> Universit? de technologie de Compi?gne
> Institut universitaire de France
> Rue Roger Couttolenc, CS 60319
> 60203 Compi?gne cedex, France
> https://www.hds.utc.fr/~tdenoeux
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar  4 17:14:40 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Mar 2021 11:14:40 -0500
Subject: [R-pkg-devel] Why .Rbuildignore doesn't ignore?
In-Reply-To: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
References: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
Message-ID: <1287f4ef-b25e-dfcc-8d3a-c635e5a41dde@gmail.com>

On 04/03/2021 8:09 a.m., Jose Barrera wrote:
> Dear all,
> 
> devtools::check() gives me the following NOTE:
> 
> * Non-standard files/directories found at top level:
>       ?README.Rmd? ?miclust.Rproj?
> 
> I get the same result with R CMD check --as-cran and R CMD check in a
> terminal.
> 
> My .Rbuildignore includes both ^.*\.Rproj$ and ^README\.Rmd$.
> 
> I haven't had this issue when checking another package I recently and
> successfully sent to CRAN, so I have no idea why I get that NOTE now.
> 
> I would appreciate any help to know why .Rbuildignore seems not to ignore
> those files.

Are the files actually being included in the .tar.gz file produced by R 
CMD build?  This could be a bug in devtools::check.  If you're using 
RStudio, you can use the standard build and check functions by 
unchecking the box for "Use devtools package functions if available".

Duncan Murdoch


> 
> Thanks,
> 
> Jose Barrera
> Statistician, Associate Lecturer
> 
> *IS**Global*
> Barcelona Institute for Global Health - Campus MAR
> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> 
> Doctor Aiguader, 88
> 08003 Barcelona, Spain
> Tel. +34 93 2147383
> jose.barrera at isglobal.org
> <https://www.linkedin.com/in/josebarrera>
> Personal website: sites.google.com/view/josebarrera
> www.isglobal.org
> 
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional privilege.
> If you are not the intended recipient you are hereby notified that any
> dissemination, copy or disclosure of this communication is strictly
> prohibited by law. If this message has been received in error, please
> immediately notify us via e-mail and delete it.
> 
> DATA PROTECTION. We inform you that your personal data, including your
> e-mail address and data included in your email correspondence, are included
> in the ISGlobal Foundation filing system. Your personal data will be used
> for the purpose of contacting you and sending information on the activities
> of the above foundations. You can exercise your rights to  access to
> personal data, rectification, erasure, restriction of processing, data
> portability and object by contacting the following address: *lopd at isglobal.org
> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> <http://www.isglobal.org/>*.
> 
> 
> -----------------------------------------------------------------------------------------------------------------------------
> 
> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
> destinatario y puede contener informaci?n confidencial, por lo que la
> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> 
> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> actividades. Los datos que usted nos pueda facilitar contestando este
> correo quedar?n incorporados en los correspondientes ficheros, autorizando
> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> <http://www.isglobal.org/>*.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Mar  4 18:19:09 2021
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 04 Mar 2021 09:19:09 -0800
Subject: [R-pkg-devel] Why .Rbuildignore doesn't ignore?
In-Reply-To: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
References: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
Message-ID: <ABFF7E24-0613-4524-B329-ECEBCD3544CB@dcn.davis.ca.us>

Don't run check against your development directory. Run it against the tar.gz file.

On March 4, 2021 5:09:07 AM PST, Jose Barrera <jose.barrera at isglobal.org> wrote:
>Dear all,
>
>devtools::check() gives me the following NOTE:
>
>* Non-standard files/directories found at top level:
>     ?README.Rmd? ?miclust.Rproj?
>
>I get the same result with R CMD check --as-cran and R CMD check in a
>terminal.
>
>My .Rbuildignore includes both ^.*\.Rproj$ and ^README\.Rmd$.
>
>I haven't had this issue when checking another package I recently and
>successfully sent to CRAN, so I have no idea why I get that NOTE now.
>
>I would appreciate any help to know why .Rbuildignore seems not to
>ignore
>those files.
>
>Thanks,
>
>Jose Barrera
>Statistician, Associate Lecturer
>
>*IS**Global*
>Barcelona Institute for Global Health - Campus MAR
>Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>
>Doctor Aiguader, 88
>08003 Barcelona, Spain
>Tel. +34 93 2147383
>jose.barrera at isglobal.org
><https://www.linkedin.com/in/josebarrera>
>Personal website: sites.google.com/view/josebarrera
>www.isglobal.org
>
>This message is intended exclusively for its addressee and may contain
>information that is CONFIDENTIAL and protected by professional
>privilege.
>If you are not the intended recipient you are hereby notified that any
>dissemination, copy or disclosure of this communication is strictly
>prohibited by law. If this message has been received in error, please
>immediately notify us via e-mail and delete it.
>
>DATA PROTECTION. We inform you that your personal data, including your
>e-mail address and data included in your email correspondence, are
>included
>in the ISGlobal Foundation filing system. Your personal data will be
>used
>for the purpose of contacting you and sending information on the
>activities
>of the above foundations. You can exercise your rights to  access to
>personal data, rectification, erasure, restriction of processing, data
>portability and object by contacting the following address:
>*lopd at isglobal.org
><lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
><http://www.isglobal.org/>*.
>
>
>-----------------------------------------------------------------------------------------------------------------------------
>
>CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>su
>destinatario y puede contener informaci?n confidencial, por lo que la
>utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por
>la
>legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos
>lo
>comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>
>PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>actividades. Los datos que usted nos pueda facilitar contestando este
>correo quedar?n incorporados en los correspondientes ficheros,
>autorizando
>el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
>del
>tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
><lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
><http://www.isglobal.org/>*.

-- 
Sent from my phone. Please excuse my brevity.


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Thu Mar  4 20:06:30 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Thu, 4 Mar 2021 20:06:30 +0100
Subject: [R-pkg-devel] Why .Rbuildignore doesn't ignore?
In-Reply-To: <ABFF7E24-0613-4524-B329-ECEBCD3544CB@dcn.davis.ca.us>
References: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
 <ABFF7E24-0613-4524-B329-ECEBCD3544CB@dcn.davis.ca.us>
Message-ID: <CACr7k5KxhjqNboNVybZfsf-njEYbXyutKe7oyMqEJ+pO3NucdQ@mail.gmail.com>

Dear Duncan and Jeff,

Yes, I see those files when tar xvf miclust_1.2.6.tar.gz.

As usual, I am both building and checking in a terminal (outside RStudio):

$ R CMD build miclust --resave-data
* checking for file ?miclust/DESCRIPTION? ... OK
* preparing ?miclust?:
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* building ?miclust_1.2.6.tar.gz?
Warning: invalid uid value replaced by that for user 'nobody'
Warning: invalid gid value replaced by that for user 'nobody'

Then

$ R CMD check --as-cran miclust_1.2.6.tar.gz

If I move miclust.Rproj and README.Rmd outside the development directory,
then there is no problem, but I find that solution somewhat dirty. Any
ideas?

Thanks,

Jose Barrera
Statistician, Associate Lecturer

*IS**Global*
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
<https://www.linkedin.com/in/josebarrera>
Personal website: sites.google.com/view/josebarrera
www.isglobal.org

This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly
prohibited by law. If this message has been received in error, please
immediately notify us via e-mail and delete it.

DATA PROTECTION. We inform you that your personal data, including your
e-mail address and data included in your email correspondence, are included
in the ISGlobal Foundation filing system. Your personal data will be used
for the purpose of contacting you and sending information on the activities
of the above foundations. You can exercise your rights to  access to
personal data, rectification, erasure, restriction of processing, data
portability and object by contacting the following address: *lopd at isglobal.org
<lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
<http://www.isglobal.org/>*.


-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.

PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando
el uso de su direcci?n de e-mail para las finalidades citadas. Puede
ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
<lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
<http://www.isglobal.org/>*.


El jue, 4 mar 2021 a las 18:19, Jeff Newmiller (<jdnewmil at dcn.davis.ca.us>)
escribi?:

> Don't run check against your development directory. Run it against the
> tar.gz file.
>
> On March 4, 2021 5:09:07 AM PST, Jose Barrera <jose.barrera at isglobal.org>
> wrote:
> >Dear all,
> >
> >devtools::check() gives me the following NOTE:
> >
> >* Non-standard files/directories found at top level:
> >     ?README.Rmd? ?miclust.Rproj?
> >
> >I get the same result with R CMD check --as-cran and R CMD check in a
> >terminal.
> >
> >My .Rbuildignore includes both ^.*\.Rproj$ and ^README\.Rmd$.
> >
> >I haven't had this issue when checking another package I recently and
> >successfully sent to CRAN, so I have no idea why I get that NOTE now.
> >
> >I would appreciate any help to know why .Rbuildignore seems not to
> >ignore
> >those files.
> >
> >Thanks,
> >
> >Jose Barrera
> >Statistician, Associate Lecturer
> >
> >*IS**Global*
> >Barcelona Institute for Global Health - Campus MAR
> >Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> >
> >Doctor Aiguader, 88
> >08003 Barcelona, Spain
> >Tel. +34 93 2147383
> >jose.barrera at isglobal.org
> ><https://www.linkedin.com/in/josebarrera>
> >Personal website: sites.google.com/view/josebarrera
> >www.isglobal.org
> >
> >This message is intended exclusively for its addressee and may contain
> >information that is CONFIDENTIAL and protected by professional
> >privilege.
> >If you are not the intended recipient you are hereby notified that any
> >dissemination, copy or disclosure of this communication is strictly
> >prohibited by law. If this message has been received in error, please
> >immediately notify us via e-mail and delete it.
> >
> >DATA PROTECTION. We inform you that your personal data, including your
> >e-mail address and data included in your email correspondence, are
> >included
> >in the ISGlobal Foundation filing system. Your personal data will be
> >used
> >for the purpose of contacting you and sending information on the
> >activities
> >of the above foundations. You can exercise your rights to  access to
> >personal data, rectification, erasure, restriction of processing, data
> >portability and object by contacting the following address:
> >*lopd at isglobal.org
> ><lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> ><http://www.isglobal.org/>*.
> >
> >
>
> >-----------------------------------------------------------------------------------------------------------------------------
> >
> >CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
> >su
> >destinatario y puede contener informaci?n confidencial, por lo que la
> >utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por
> >la
> >legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos
> >lo
> >comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> >
> >PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> >env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> >titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> >contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> >actividades. Los datos que usted nos pueda facilitar contestando este
> >correo quedar?n incorporados en los correspondientes ficheros,
> >autorizando
> >el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> >ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
> >del
> >tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> ><lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> ><http://www.isglobal.org/>*.
>
> --
> Sent from my phone. Please excuse my brevity.
>

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar  4 20:58:59 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 4 Mar 2021 14:58:59 -0500
Subject: [R-pkg-devel] Why .Rbuildignore doesn't ignore?
In-Reply-To: <CACr7k5KxhjqNboNVybZfsf-njEYbXyutKe7oyMqEJ+pO3NucdQ@mail.gmail.com>
References: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
 <ABFF7E24-0613-4524-B329-ECEBCD3544CB@dcn.davis.ca.us>
 <CACr7k5KxhjqNboNVybZfsf-njEYbXyutKe7oyMqEJ+pO3NucdQ@mail.gmail.com>
Message-ID: <9d223e7a-332d-0ba8-3571-727f6d398bbe@gmail.com>

I don't have any strong suggestions.  Things I'd look for:

- is the .Rbuildignore filename spelled correctly?  It was in your 
message, but maybe there's something different in the actual file on 
disk.  Running file.exists(".Rbuildignore") should return TRUE if your 
working directory is the main package directory.

- is it encoded properly?  I don't know that this would cause trouble, 
but it might.  Run tools::showNonASCIIfile(".Rbuildignore")  to see if 
there are any non-ASCII chars in it.

- are the filename patterns entered correctly?  Spaces or punctuation 
before or after the patterns will be taken to be part of the pattern.
If your working directory is the top level package directory, this 
emulates the test R CMD build uses:

  files <- list.files()
  files[tools:::inRbuildignore(files, ".")]

It should list all the files that you want to ignore.

Duncan Murdoch

On 04/03/2021 2:06 p.m., Jose Barrera wrote:
> Dear Duncan and Jeff,
> 
> Yes, I see those files when tar xvf miclust_1.2.6.tar.gz.
> 
> As usual, I am both building and checking in a terminal (outside RStudio):
> 
> $ R CMD build miclust --resave-data
> * checking for file ?miclust/DESCRIPTION? ... OK
> * preparing ?miclust?:
> * checking DESCRIPTION meta-information ... OK
> * checking for LF line-endings in source and make files and shell scripts
> * checking for empty or unneeded directories
> * building ?miclust_1.2.6.tar.gz?
> Warning: invalid uid value replaced by that for user 'nobody'
> Warning: invalid gid value replaced by that for user 'nobody'
> 
> Then
> 
> $ R CMD check --as-cran miclust_1.2.6.tar.gz
> 
> If I move miclust.Rproj and README.Rmd outside the development directory,
> then there is no problem, but I find that solution somewhat dirty. Any
> ideas?
> 
> Thanks,
> 
> Jose Barrera
> Statistician, Associate Lecturer
> 
> *IS**Global*
> Barcelona Institute for Global Health - Campus MAR
> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> 
> Doctor Aiguader, 88
> 08003 Barcelona, Spain
> Tel. +34 93 2147383
> jose.barrera at isglobal.org
> <https://www.linkedin.com/in/josebarrera>
> Personal website: sites.google.com/view/josebarrera
> www.isglobal.org
> 
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional privilege.
> If you are not the intended recipient you are hereby notified that any
> dissemination, copy or disclosure of this communication is strictly
> prohibited by law. If this message has been received in error, please
> immediately notify us via e-mail and delete it.
> 
> DATA PROTECTION. We inform you that your personal data, including your
> e-mail address and data included in your email correspondence, are included
> in the ISGlobal Foundation filing system. Your personal data will be used
> for the purpose of contacting you and sending information on the activities
> of the above foundations. You can exercise your rights to  access to
> personal data, rectification, erasure, restriction of processing, data
> portability and object by contacting the following address: *lopd at isglobal.org
> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> <http://www.isglobal.org/>*.
> 
> 
> -----------------------------------------------------------------------------------------------------------------------------
> 
> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
> destinatario y puede contener informaci?n confidencial, por lo que la
> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> 
> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> actividades. Los datos que usted nos pueda facilitar contestando este
> correo quedar?n incorporados en los correspondientes ficheros, autorizando
> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> <http://www.isglobal.org/>*.
> 
> 
> El jue, 4 mar 2021 a las 18:19, Jeff Newmiller (<jdnewmil at dcn.davis.ca.us>)
> escribi?:
> 
>> Don't run check against your development directory. Run it against the
>> tar.gz file.
>>
>> On March 4, 2021 5:09:07 AM PST, Jose Barrera <jose.barrera at isglobal.org>
>> wrote:
>>> Dear all,
>>>
>>> devtools::check() gives me the following NOTE:
>>>
>>> * Non-standard files/directories found at top level:
>>>      ?README.Rmd? ?miclust.Rproj?
>>>
>>> I get the same result with R CMD check --as-cran and R CMD check in a
>>> terminal.
>>>
>>> My .Rbuildignore includes both ^.*\.Rproj$ and ^README\.Rmd$.
>>>
>>> I haven't had this issue when checking another package I recently and
>>> successfully sent to CRAN, so I have no idea why I get that NOTE now.
>>>
>>> I would appreciate any help to know why .Rbuildignore seems not to
>>> ignore
>>> those files.
>>>
>>> Thanks,
>>>
>>> Jose Barrera
>>> Statistician, Associate Lecturer
>>>
>>> *IS**Global*
>>> Barcelona Institute for Global Health - Campus MAR
>>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
>>>
>>> Doctor Aiguader, 88
>>> 08003 Barcelona, Spain
>>> Tel. +34 93 2147383
>>> jose.barrera at isglobal.org
>>> <https://www.linkedin.com/in/josebarrera>
>>> Personal website: sites.google.com/view/josebarrera
>>> www.isglobal.org
>>>
>>> This message is intended exclusively for its addressee and may contain
>>> information that is CONFIDENTIAL and protected by professional
>>> privilege.
>>> If you are not the intended recipient you are hereby notified that any
>>> dissemination, copy or disclosure of this communication is strictly
>>> prohibited by law. If this message has been received in error, please
>>> immediately notify us via e-mail and delete it.
>>>
>>> DATA PROTECTION. We inform you that your personal data, including your
>>> e-mail address and data included in your email correspondence, are
>>> included
>>> in the ISGlobal Foundation filing system. Your personal data will be
>>> used
>>> for the purpose of contacting you and sending information on the
>>> activities
>>> of the above foundations. You can exercise your rights to  access to
>>> personal data, rectification, erasure, restriction of processing, data
>>> portability and object by contacting the following address:
>>> *lopd at isglobal.org
>>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
>>> <http://www.isglobal.org/>*.
>>>
>>>
>>
>>> -----------------------------------------------------------------------------------------------------------------------------
>>>
>>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
>>> su
>>> destinatario y puede contener informaci?n confidencial, por lo que la
>>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por
>>> la
>>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos
>>> lo
>>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
>>>
>>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
>>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
>>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
>>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
>>> actividades. Los datos que usted nos pueda facilitar contestando este
>>> correo quedar?n incorporados en los correspondientes ficheros,
>>> autorizando
>>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
>>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
>>> del
>>> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
>>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
>>> <http://www.isglobal.org/>*.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>


From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu Mar  4 21:23:28 2021
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 4 Mar 2021 12:23:28 -0800
Subject: [R-pkg-devel] Why .Rbuildignore doesn't ignore?
In-Reply-To: <9d223e7a-332d-0ba8-3571-727f6d398bbe@gmail.com>
References: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
 <ABFF7E24-0613-4524-B329-ECEBCD3544CB@dcn.davis.ca.us>
 <CACr7k5KxhjqNboNVybZfsf-njEYbXyutKe7oyMqEJ+pO3NucdQ@mail.gmail.com>
 <9d223e7a-332d-0ba8-3571-727f6d398bbe@gmail.com>
Message-ID: <CAFDcVCSfXmRUVG5foQdhdhyehgAVo645SjhBFwWPHbD4h60JGA@mail.gmail.com>

FYI, and in case others wonder or search for this later, the warnings:

Warning: invalid uid value replaced by that for user 'nobody'
Warning: invalid gid value replaced by that for user 'nobody'

are harmless and has nothing to do with your problem reported here.
It happens because on the system you're running your user account has
a user ID (UID) and a group ID (GID) that are > 32767, e.g.

$ id
uid=34002(alice) gid=34001(alicelab)

Since 'R CMD build' aims at building a *.tar.gz file that works also
only older systems with older tar software that only supports UID/GID
<= 32767, it created the *.tar.gz file with mockup UID=32767,
GID=32767 (called 'nobody') instead of your actual UID/GID.

/Henrik

On Thu, Mar 4, 2021 at 11:59 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> I don't have any strong suggestions.  Things I'd look for:
>
> - is the .Rbuildignore filename spelled correctly?  It was in your
> message, but maybe there's something different in the actual file on
> disk.  Running file.exists(".Rbuildignore") should return TRUE if your
> working directory is the main package directory.
>
> - is it encoded properly?  I don't know that this would cause trouble,
> but it might.  Run tools::showNonASCIIfile(".Rbuildignore")  to see if
> there are any non-ASCII chars in it.
>
> - are the filename patterns entered correctly?  Spaces or punctuation
> before or after the patterns will be taken to be part of the pattern.
> If your working directory is the top level package directory, this
> emulates the test R CMD build uses:
>
>   files <- list.files()
>   files[tools:::inRbuildignore(files, ".")]
>
> It should list all the files that you want to ignore.
>
> Duncan Murdoch
>
> On 04/03/2021 2:06 p.m., Jose Barrera wrote:
> > Dear Duncan and Jeff,
> >
> > Yes, I see those files when tar xvf miclust_1.2.6.tar.gz.
> >
> > As usual, I am both building and checking in a terminal (outside RStudio):
> >
> > $ R CMD build miclust --resave-data
> > * checking for file ?miclust/DESCRIPTION? ... OK
> > * preparing ?miclust?:
> > * checking DESCRIPTION meta-information ... OK
> > * checking for LF line-endings in source and make files and shell scripts
> > * checking for empty or unneeded directories
> > * building ?miclust_1.2.6.tar.gz?
> > Warning: invalid uid value replaced by that for user 'nobody'
> > Warning: invalid gid value replaced by that for user 'nobody'
> >
> > Then
> >
> > $ R CMD check --as-cran miclust_1.2.6.tar.gz
> >
> > If I move miclust.Rproj and README.Rmd outside the development directory,
> > then there is no problem, but I find that solution somewhat dirty. Any
> > ideas?
> >
> > Thanks,
> >
> > Jose Barrera
> > Statistician, Associate Lecturer
> >
> > *IS**Global*
> > Barcelona Institute for Global Health - Campus MAR
> > Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> >
> > Doctor Aiguader, 88
> > 08003 Barcelona, Spain
> > Tel. +34 93 2147383
> > jose.barrera at isglobal.org
> > <https://www.linkedin.com/in/josebarrera>
> > Personal website: sites.google.com/view/josebarrera
> > www.isglobal.org
> >
> > This message is intended exclusively for its addressee and may contain
> > information that is CONFIDENTIAL and protected by professional privilege.
> > If you are not the intended recipient you are hereby notified that any
> > dissemination, copy or disclosure of this communication is strictly
> > prohibited by law. If this message has been received in error, please
> > immediately notify us via e-mail and delete it.
> >
> > DATA PROTECTION. We inform you that your personal data, including your
> > e-mail address and data included in your email correspondence, are included
> > in the ISGlobal Foundation filing system. Your personal data will be used
> > for the purpose of contacting you and sending information on the activities
> > of the above foundations. You can exercise your rights to  access to
> > personal data, rectification, erasure, restriction of processing, data
> > portability and object by contacting the following address: *lopd at isglobal.org
> > <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> > <http://www.isglobal.org/>*.
> >
> >
> > -----------------------------------------------------------------------------------------------------------------------------
> >
> > CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
> > destinatario y puede contener informaci?n confidencial, por lo que la
> > utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> > legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> > comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> >
> > PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> > env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> > titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> > contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> > actividades. Los datos que usted nos pueda facilitar contestando este
> > correo quedar?n incorporados en los correspondientes ficheros, autorizando
> > el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> > ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
> > tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> > <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> > <http://www.isglobal.org/>*.
> >
> >
> > El jue, 4 mar 2021 a las 18:19, Jeff Newmiller (<jdnewmil at dcn.davis.ca.us>)
> > escribi?:
> >
> >> Don't run check against your development directory. Run it against the
> >> tar.gz file.
> >>
> >> On March 4, 2021 5:09:07 AM PST, Jose Barrera <jose.barrera at isglobal.org>
> >> wrote:
> >>> Dear all,
> >>>
> >>> devtools::check() gives me the following NOTE:
> >>>
> >>> * Non-standard files/directories found at top level:
> >>>      ?README.Rmd? ?miclust.Rproj?
> >>>
> >>> I get the same result with R CMD check --as-cran and R CMD check in a
> >>> terminal.
> >>>
> >>> My .Rbuildignore includes both ^.*\.Rproj$ and ^README\.Rmd$.
> >>>
> >>> I haven't had this issue when checking another package I recently and
> >>> successfully sent to CRAN, so I have no idea why I get that NOTE now.
> >>>
> >>> I would appreciate any help to know why .Rbuildignore seems not to
> >>> ignore
> >>> those files.
> >>>
> >>> Thanks,
> >>>
> >>> Jose Barrera
> >>> Statistician, Associate Lecturer
> >>>
> >>> *IS**Global*
> >>> Barcelona Institute for Global Health - Campus MAR
> >>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> >>>
> >>> Doctor Aiguader, 88
> >>> 08003 Barcelona, Spain
> >>> Tel. +34 93 2147383
> >>> jose.barrera at isglobal.org
> >>> <https://www.linkedin.com/in/josebarrera>
> >>> Personal website: sites.google.com/view/josebarrera
> >>> www.isglobal.org
> >>>
> >>> This message is intended exclusively for its addressee and may contain
> >>> information that is CONFIDENTIAL and protected by professional
> >>> privilege.
> >>> If you are not the intended recipient you are hereby notified that any
> >>> dissemination, copy or disclosure of this communication is strictly
> >>> prohibited by law. If this message has been received in error, please
> >>> immediately notify us via e-mail and delete it.
> >>>
> >>> DATA PROTECTION. We inform you that your personal data, including your
> >>> e-mail address and data included in your email correspondence, are
> >>> included
> >>> in the ISGlobal Foundation filing system. Your personal data will be
> >>> used
> >>> for the purpose of contacting you and sending information on the
> >>> activities
> >>> of the above foundations. You can exercise your rights to  access to
> >>> personal data, rectification, erasure, restriction of processing, data
> >>> portability and object by contacting the following address:
> >>> *lopd at isglobal.org
> >>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> >>> <http://www.isglobal.org/>*.
> >>>
> >>>
> >>
> >>> -----------------------------------------------------------------------------------------------------------------------------
> >>>
> >>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
> >>> su
> >>> destinatario y puede contener informaci?n confidencial, por lo que la
> >>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por
> >>> la
> >>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos
> >>> lo
> >>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> >>>
> >>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> >>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> >>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> >>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> >>> actividades. Los datos que usted nos pueda facilitar contestando este
> >>> correo quedar?n incorporados en los correspondientes ficheros,
> >>> autorizando
> >>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> >>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
> >>> del
> >>> tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> >>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> >>> <http://www.isglobal.org/>*.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  4 23:01:47 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 5 Mar 2021 11:01:47 +1300
Subject: [R-pkg-devel] Note: significantly better compression could be
 obtained ...
In-Reply-To: <1575cd6c-be78-63e7-3c54-5004c8c78da1@fau.de>
References: <20210304134133.14e5c1be@rolf-Latitude-E7470>
 <89f61be9-bc9b-f8a7-b7cf-922f764870ae@fau.de>
 <20210304222434.5a5c0ef8@rolf-Latitude-E7470>
 <1575cd6c-be78-63e7-3c54-5004c8c78da1@fau.de>
Message-ID: <20210305105955.28925948@rolf-Latitude-E7470>

On Thu, 4 Mar 2021 12:09:51 +0100
Sebastian Meyer <seb.meyer at fau.de> wrote:

<SNIP>

> Am 04.03.21 um 10:24 schrieb Rolf Turner:

<SNIP>

> > But this still leaves the question:  Why the <expletive deleted> is
> > R CMD check telling me to use the flag --resave-data, when I *just
> > did that*???
> 
> Yes, indeed! I've investigated further and found that in R 4.0.0-4.0.4
> the --resave-data option of R CMD build was ineffective for packages
> using LazyData. This bug has recently been fixed in R-devel (c79573)
> and I think the fix should also be ported to R-patched and appear in
> the NEWS.
>
> Thank you for reporting!

Ta-da!!!  So I'm not going mad after all!!! :-)

Thanks very much for invetools::resaveRdaFiles(),stigating and
reassuring me.  Thanks also for pointing out the tools::resaveRdaFiles()
workaround which provided an interim fix for the problem.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Mar  5 04:19:59 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 5 Mar 2021 16:19:59 +1300
Subject: [R-pkg-devel] Vignettes from LaTeX files.
In-Reply-To: <20210304211940.32058aa7@rolf-Latitude-E7470>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <20210304211940.32058aa7@rolf-Latitude-E7470>
Message-ID: <20210305161959.69e28157@rolf-Latitude-E7470>



I have now tried out building vignettes from plain LaTeX source,
following the admirably lucid instructions provided by Henrik Bengtsson
in:

 https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-LaTeX_vignettes.pdf

It all went unbelievably smoothly; no problems whatever.

I am deeply grateful to Henrik.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Fri Mar  5 13:06:49 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Fri, 5 Mar 2021 13:06:49 +0100
Subject: [R-pkg-devel] Why .Rbuildignore doesn't ignore?
In-Reply-To: <9d223e7a-332d-0ba8-3571-727f6d398bbe@gmail.com>
References: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
 <ABFF7E24-0613-4524-B329-ECEBCD3544CB@dcn.davis.ca.us>
 <CACr7k5KxhjqNboNVybZfsf-njEYbXyutKe7oyMqEJ+pO3NucdQ@mail.gmail.com>
 <9d223e7a-332d-0ba8-3571-727f6d398bbe@gmail.com>
Message-ID: <CACr7k5LXngMO0gD2tei1bb-YZFFyhwKBza-p49-J-a5Qq6itTg@mail.gmail.com>

Dear Duncan,

.Rbuildignore is spelled correctly, and no non-ASCII characters in.

All tools:::inRbuildignore(list.files(), ".") were FALSE, so I decided to
rewrite .Rbuildignore from scratch, just in case there was any extra space.
I think that was the problem because now
tools:::inRbuildignore(list.files(), "." points to the files I want to be
ignored.

Many thanks,

Jose Barrera
Statistician, Associate Lecturer

*IS**Global*
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
<https://www.linkedin.com/in/josebarrera>
Personal website: sites.google.com/view/josebarrera
www.isglobal.org

This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly
prohibited by law. If this message has been received in error, please
immediately notify us via e-mail and delete it.

DATA PROTECTION. We inform you that your personal data, including your
e-mail address and data included in your email correspondence, are included
in the ISGlobal Foundation filing system. Your personal data will be used
for the purpose of contacting you and sending information on the activities
of the above foundations. You can exercise your rights to  access to
personal data, rectification, erasure, restriction of processing, data
portability and object by contacting the following address: *lopd at isglobal.org
<lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
<http://www.isglobal.org/>*.


-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.

PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando
el uso de su direcci?n de e-mail para las finalidades citadas. Puede
ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
<lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
<http://www.isglobal.org/>*.


El jue, 4 mar 2021 a las 20:59, Duncan Murdoch (<murdoch.duncan at gmail.com>)
escribi?:

> I don't have any strong suggestions.  Things I'd look for:
>
> - is the .Rbuildignore filename spelled correctly?  It was in your
> message, but maybe there's something different in the actual file on
> disk.  Running file.exists(".Rbuildignore") should return TRUE if your
> working directory is the main package directory.
>
> - is it encoded properly?  I don't know that this would cause trouble,
> but it might.  Run tools::showNonASCIIfile(".Rbuildignore")  to see if
> there are any non-ASCII chars in it.
>
> - are the filename patterns entered correctly?  Spaces or punctuation
> before or after the patterns will be taken to be part of the pattern.
> If your working directory is the top level package directory, this
> emulates the test R CMD build uses:
>
>   files <- list.files()
>   files[tools:::inRbuildignore(files, ".")]
>
> It should list all the files that you want to ignore.
>
> Duncan Murdoch
>
> On 04/03/2021 2:06 p.m., Jose Barrera wrote:
> > Dear Duncan and Jeff,
> >
> > Yes, I see those files when tar xvf miclust_1.2.6.tar.gz.
> >
> > As usual, I am both building and checking in a terminal (outside
> RStudio):
> >
> > $ R CMD build miclust --resave-data
> > * checking for file ?miclust/DESCRIPTION? ... OK
> > * preparing ?miclust?:
> > * checking DESCRIPTION meta-information ... OK
> > * checking for LF line-endings in source and make files and shell scripts
> > * checking for empty or unneeded directories
> > * building ?miclust_1.2.6.tar.gz?
> > Warning: invalid uid value replaced by that for user 'nobody'
> > Warning: invalid gid value replaced by that for user 'nobody'
> >
> > Then
> >
> > $ R CMD check --as-cran miclust_1.2.6.tar.gz
> >
> > If I move miclust.Rproj and README.Rmd outside the development directory,
> > then there is no problem, but I find that solution somewhat dirty. Any
> > ideas?
> >
> > Thanks,
> >
> > Jose Barrera
> > Statistician, Associate Lecturer
> >
> > *IS**Global*
> > Barcelona Institute for Global Health - Campus MAR
> > Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> >
> > Doctor Aiguader, 88
> > 08003 Barcelona, Spain
> > Tel. +34 93 2147383
> > jose.barrera at isglobal.org
> > <https://www.linkedin.com/in/josebarrera>
> > Personal website: sites.google.com/view/josebarrera
> > www.isglobal.org
> >
> > This message is intended exclusively for its addressee and may contain
> > information that is CONFIDENTIAL and protected by professional privilege.
> > If you are not the intended recipient you are hereby notified that any
> > dissemination, copy or disclosure of this communication is strictly
> > prohibited by law. If this message has been received in error, please
> > immediately notify us via e-mail and delete it.
> >
> > DATA PROTECTION. We inform you that your personal data, including your
> > e-mail address and data included in your email correspondence, are
> included
> > in the ISGlobal Foundation filing system. Your personal data will be used
> > for the purpose of contacting you and sending information on the
> activities
> > of the above foundations. You can exercise your rights to  access to
> > personal data, rectification, erasure, restriction of processing, data
> > portability and object by contacting the following address: *
> lopd at isglobal.org
> > <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> > <http://www.isglobal.org/>*.
> >
> >
> >
> -----------------------------------------------------------------------------------------------------------------------------
> >
> > CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
> su
> > destinatario y puede contener informaci?n confidencial, por lo que la
> > utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
> > legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
> > comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> >
> > PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> > env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> > titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> > contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> > actividades. Los datos que usted nos pueda facilitar contestando este
> > correo quedar?n incorporados en los correspondientes ficheros,
> autorizando
> > el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> > ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
> > tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
> > <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> > <http://www.isglobal.org/>*.
> >
> >
> > El jue, 4 mar 2021 a las 18:19, Jeff Newmiller (<
> jdnewmil at dcn.davis.ca.us>)
> > escribi?:
> >
> >> Don't run check against your development directory. Run it against the
> >> tar.gz file.
> >>
> >> On March 4, 2021 5:09:07 AM PST, Jose Barrera <
> jose.barrera at isglobal.org>
> >> wrote:
> >>> Dear all,
> >>>
> >>> devtools::check() gives me the following NOTE:
> >>>
> >>> * Non-standard files/directories found at top level:
> >>>      ?README.Rmd? ?miclust.Rproj?
> >>>
> >>> I get the same result with R CMD check --as-cran and R CMD check in a
> >>> terminal.
> >>>
> >>> My .Rbuildignore includes both ^.*\.Rproj$ and ^README\.Rmd$.
> >>>
> >>> I haven't had this issue when checking another package I recently and
> >>> successfully sent to CRAN, so I have no idea why I get that NOTE now.
> >>>
> >>> I would appreciate any help to know why .Rbuildignore seems not to
> >>> ignore
> >>> those files.
> >>>
> >>> Thanks,
> >>>
> >>> Jose Barrera
> >>> Statistician, Associate Lecturer
> >>>
> >>> *IS**Global*
> >>> Barcelona Institute for Global Health - Campus MAR
> >>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> >>>
> >>> Doctor Aiguader, 88
> >>> 08003 Barcelona, Spain
> >>> Tel. +34 93 2147383
> >>> jose.barrera at isglobal.org
> >>> <https://www.linkedin.com/in/josebarrera>
> >>> Personal website: sites.google.com/view/josebarrera
> >>> www.isglobal.org
> >>>
> >>> This message is intended exclusively for its addressee and may contain
> >>> information that is CONFIDENTIAL and protected by professional
> >>> privilege.
> >>> If you are not the intended recipient you are hereby notified that any
> >>> dissemination, copy or disclosure of this communication is strictly
> >>> prohibited by law. If this message has been received in error, please
> >>> immediately notify us via e-mail and delete it.
> >>>
> >>> DATA PROTECTION. We inform you that your personal data, including your
> >>> e-mail address and data included in your email correspondence, are
> >>> included
> >>> in the ISGlobal Foundation filing system. Your personal data will be
> >>> used
> >>> for the purpose of contacting you and sending information on the
> >>> activities
> >>> of the above foundations. You can exercise your rights to  access to
> >>> personal data, rectification, erasure, restriction of processing, data
> >>> portability and object by contacting the following address:
> >>> *lopd at isglobal.org
> >>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> >>> <http://www.isglobal.org/>*.
> >>>
> >>>
> >>
> >>>
> -----------------------------------------------------------------------------------------------------------------------------
> >>>
> >>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
> >>> su
> >>> destinatario y puede contener informaci?n confidencial, por lo que la
> >>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por
> >>> la
> >>> legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos
> >>> lo
> >>> comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> >>>
> >>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> >>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> >>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> >>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> >>> actividades. Los datos que usted nos pueda facilitar contestando este
> >>> correo quedar?n incorporados en los correspondientes ficheros,
> >>> autorizando
> >>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> >>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
> >>> del
> >>> tratamiento, portabilidad y oposici?n dirigi?ndose a *
> lopd at isglobal.org
> >>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> >>> <http://www.isglobal.org/>*.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >
>
>

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org  Fri Mar  5 13:08:19 2021
From: jo@e@b@rrer@ @end|ng |rom |@g|ob@|@org (Jose Barrera)
Date: Fri, 5 Mar 2021 13:08:19 +0100
Subject: [R-pkg-devel] Why .Rbuildignore doesn't ignore?
In-Reply-To: <CAFDcVCSfXmRUVG5foQdhdhyehgAVo645SjhBFwWPHbD4h60JGA@mail.gmail.com>
References: <CACr7k5KNhm5v6Yrfz3DPTPA2u8vLCAtgToePagwsD-XjYa85tw@mail.gmail.com>
 <ABFF7E24-0613-4524-B329-ECEBCD3544CB@dcn.davis.ca.us>
 <CACr7k5KxhjqNboNVybZfsf-njEYbXyutKe7oyMqEJ+pO3NucdQ@mail.gmail.com>
 <9d223e7a-332d-0ba8-3571-727f6d398bbe@gmail.com>
 <CAFDcVCSfXmRUVG5foQdhdhyehgAVo645SjhBFwWPHbD4h60JGA@mail.gmail.com>
Message-ID: <CACr7k5+fJxHUaXp5wwzTDO9ttRawx9-9CFJGAKKf3zST89cONw@mail.gmail.com>

Dear Jeff,

I am aware I don't need to be worried about those two warnings but many
thanks anyway.

Jose Barrera
Statistician, Associate Lecturer

*IS**Global*
Barcelona Institute for Global Health - Campus MAR
Barcelona Biomedical Research Park (PRBB) (Room Hypatia)

Doctor Aiguader, 88
08003 Barcelona, Spain
Tel. +34 93 2147383
jose.barrera at isglobal.org
<https://www.linkedin.com/in/josebarrera>
Personal website: sites.google.com/view/josebarrera
www.isglobal.org

This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege.
If you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly
prohibited by law. If this message has been received in error, please
immediately notify us via e-mail and delete it.

DATA PROTECTION. We inform you that your personal data, including your
e-mail address and data included in your email correspondence, are included
in the ISGlobal Foundation filing system. Your personal data will be used
for the purpose of contacting you and sending information on the activities
of the above foundations. You can exercise your rights to  access to
personal data, rectification, erasure, restriction of processing, data
portability and object by contacting the following address: *lopd at isglobal.org
<lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
<http://www.isglobal.org/>*.


-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a su
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos lo
comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.

PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando
el uso de su direcci?n de e-mail para las finalidades citadas. Puede
ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n del
tratamiento, portabilidad y oposici?n dirigi?ndose a *lopd at isglobal.org
<lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
<http://www.isglobal.org/>*.


El jue, 4 mar 2021 a las 21:23, Henrik Bengtsson (<
henrik.bengtsson at gmail.com>) escribi?:

> FYI, and in case others wonder or search for this later, the warnings:
>
> Warning: invalid uid value replaced by that for user 'nobody'
> Warning: invalid gid value replaced by that for user 'nobody'
>
> are harmless and has nothing to do with your problem reported here.
> It happens because on the system you're running your user account has
> a user ID (UID) and a group ID (GID) that are > 32767, e.g.
>
> $ id
> uid=34002(alice) gid=34001(alicelab)
>
> Since 'R CMD build' aims at building a *.tar.gz file that works also
> only older systems with older tar software that only supports UID/GID
> <= 32767, it created the *.tar.gz file with mockup UID=32767,
> GID=32767 (called 'nobody') instead of your actual UID/GID.
>
> /Henrik
>
> On Thu, Mar 4, 2021 at 11:59 AM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
> >
> > I don't have any strong suggestions.  Things I'd look for:
> >
> > - is the .Rbuildignore filename spelled correctly?  It was in your
> > message, but maybe there's something different in the actual file on
> > disk.  Running file.exists(".Rbuildignore") should return TRUE if your
> > working directory is the main package directory.
> >
> > - is it encoded properly?  I don't know that this would cause trouble,
> > but it might.  Run tools::showNonASCIIfile(".Rbuildignore")  to see if
> > there are any non-ASCII chars in it.
> >
> > - are the filename patterns entered correctly?  Spaces or punctuation
> > before or after the patterns will be taken to be part of the pattern.
> > If your working directory is the top level package directory, this
> > emulates the test R CMD build uses:
> >
> >   files <- list.files()
> >   files[tools:::inRbuildignore(files, ".")]
> >
> > It should list all the files that you want to ignore.
> >
> > Duncan Murdoch
> >
> > On 04/03/2021 2:06 p.m., Jose Barrera wrote:
> > > Dear Duncan and Jeff,
> > >
> > > Yes, I see those files when tar xvf miclust_1.2.6.tar.gz.
> > >
> > > As usual, I am both building and checking in a terminal (outside
> RStudio):
> > >
> > > $ R CMD build miclust --resave-data
> > > * checking for file ?miclust/DESCRIPTION? ... OK
> > > * preparing ?miclust?:
> > > * checking DESCRIPTION meta-information ... OK
> > > * checking for LF line-endings in source and make files and shell
> scripts
> > > * checking for empty or unneeded directories
> > > * building ?miclust_1.2.6.tar.gz?
> > > Warning: invalid uid value replaced by that for user 'nobody'
> > > Warning: invalid gid value replaced by that for user 'nobody'
> > >
> > > Then
> > >
> > > $ R CMD check --as-cran miclust_1.2.6.tar.gz
> > >
> > > If I move miclust.Rproj and README.Rmd outside the development
> directory,
> > > then there is no problem, but I find that solution somewhat dirty. Any
> > > ideas?
> > >
> > > Thanks,
> > >
> > > Jose Barrera
> > > Statistician, Associate Lecturer
> > >
> > > *IS**Global*
> > > Barcelona Institute for Global Health - Campus MAR
> > > Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> > >
> > > Doctor Aiguader, 88
> > > 08003 Barcelona, Spain
> > > Tel. +34 93 2147383
> > > jose.barrera at isglobal.org
> > > <https://www.linkedin.com/in/josebarrera>
> > > Personal website: sites.google.com/view/josebarrera
> > > www.isglobal.org
> > >
> > > This message is intended exclusively for its addressee and may contain
> > > information that is CONFIDENTIAL and protected by professional
> privilege.
> > > If you are not the intended recipient you are hereby notified that any
> > > dissemination, copy or disclosure of this communication is strictly
> > > prohibited by law. If this message has been received in error, please
> > > immediately notify us via e-mail and delete it.
> > >
> > > DATA PROTECTION. We inform you that your personal data, including your
> > > e-mail address and data included in your email correspondence, are
> included
> > > in the ISGlobal Foundation filing system. Your personal data will be
> used
> > > for the purpose of contacting you and sending information on the
> activities
> > > of the above foundations. You can exercise your rights to  access to
> > > personal data, rectification, erasure, restriction of processing, data
> > > portability and object by contacting the following address: *
> lopd at isglobal.org
> > > <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> > > <http://www.isglobal.org/>*.
> > >
> > >
> > >
> -----------------------------------------------------------------------------------------------------------------------------
> > >
> > > CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente
> a su
> > > destinatario y puede contener informaci?n confidencial, por lo que la
> > > utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida por
> la
> > > legislaci?n vigente. Si ha recibido este mensaje por error, le rogamos
> lo
> > > comunique inmediatamente por esta misma v?a y proceda a su destrucci?n.
> > >
> > > PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
> > > env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> > > titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> > > contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> > > actividades. Los datos que usted nos pueda facilitar contestando este
> > > correo quedar?n incorporados en los correspondientes ficheros,
> autorizando
> > > el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> > > ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
> del
> > > tratamiento, portabilidad y oposici?n dirigi?ndose a *
> lopd at isglobal.org
> > > <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> > > <http://www.isglobal.org/>*.
> > >
> > >
> > > El jue, 4 mar 2021 a las 18:19, Jeff Newmiller (<
> jdnewmil at dcn.davis.ca.us>)
> > > escribi?:
> > >
> > >> Don't run check against your development directory. Run it against the
> > >> tar.gz file.
> > >>
> > >> On March 4, 2021 5:09:07 AM PST, Jose Barrera <
> jose.barrera at isglobal.org>
> > >> wrote:
> > >>> Dear all,
> > >>>
> > >>> devtools::check() gives me the following NOTE:
> > >>>
> > >>> * Non-standard files/directories found at top level:
> > >>>      ?README.Rmd? ?miclust.Rproj?
> > >>>
> > >>> I get the same result with R CMD check --as-cran and R CMD check in a
> > >>> terminal.
> > >>>
> > >>> My .Rbuildignore includes both ^.*\.Rproj$ and ^README\.Rmd$.
> > >>>
> > >>> I haven't had this issue when checking another package I recently and
> > >>> successfully sent to CRAN, so I have no idea why I get that NOTE now.
> > >>>
> > >>> I would appreciate any help to know why .Rbuildignore seems not to
> > >>> ignore
> > >>> those files.
> > >>>
> > >>> Thanks,
> > >>>
> > >>> Jose Barrera
> > >>> Statistician, Associate Lecturer
> > >>>
> > >>> *IS**Global*
> > >>> Barcelona Institute for Global Health - Campus MAR
> > >>> Barcelona Biomedical Research Park (PRBB) (Room Hypatia)
> > >>>
> > >>> Doctor Aiguader, 88
> > >>> 08003 Barcelona, Spain
> > >>> Tel. +34 93 2147383
> > >>> jose.barrera at isglobal.org
> > >>> <https://www.linkedin.com/in/josebarrera>
> > >>> Personal website: sites.google.com/view/josebarrera
> > >>> www.isglobal.org
> > >>>
> > >>> This message is intended exclusively for its addressee and may
> contain
> > >>> information that is CONFIDENTIAL and protected by professional
> > >>> privilege.
> > >>> If you are not the intended recipient you are hereby notified that
> any
> > >>> dissemination, copy or disclosure of this communication is strictly
> > >>> prohibited by law. If this message has been received in error, please
> > >>> immediately notify us via e-mail and delete it.
> > >>>
> > >>> DATA PROTECTION. We inform you that your personal data, including
> your
> > >>> e-mail address and data included in your email correspondence, are
> > >>> included
> > >>> in the ISGlobal Foundation filing system. Your personal data will be
> > >>> used
> > >>> for the purpose of contacting you and sending information on the
> > >>> activities
> > >>> of the above foundations. You can exercise your rights to  access to
> > >>> personal data, rectification, erasure, restriction of processing,
> data
> > >>> portability and object by contacting the following address:
> > >>> *lopd at isglobal.org
> > >>> <lopd at isglobal.org>*. ISGlobal Privacy Policy at *www.isglobal.org
> > >>> <http://www.isglobal.org/>*.
> > >>>
> > >>>
> > >>
> > >>>
> -----------------------------------------------------------------------------------------------------------------------------
> > >>>
> > >>> CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen
> exclusivamente a
> > >>> su
> > >>> destinatario y puede contener informaci?n confidencial, por lo que la
> > >>> utilizaci?n, divulgaci?n y/o copia sin autorizaci?n est? prohibida
> por
> > >>> la
> > >>> legislaci?n vigente. Si ha recibido este mensaje por error, le
> rogamos
> > >>> lo
> > >>> comunique inmediatamente por esta misma v?a y proceda a su
> destrucci?n.
> > >>>
> > >>> PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en
> este
> > >>> env?o, incluida su direcci?n de e-mail, forman parte de ficheros de
> > >>> titularidad de la Fundaci?n ISGlobal  para cualquier finalidades de
> > >>> contacto, relaci?n institucional y/o env?o de informaci?n sobre sus
> > >>> actividades. Los datos que usted nos pueda facilitar contestando este
> > >>> correo quedar?n incorporados en los correspondientes ficheros,
> > >>> autorizando
> > >>> el uso de su direcci?n de e-mail para las finalidades citadas. Puede
> > >>> ejercer los derechos de acceso, rectificaci?n, supresi?n, limitaci?n
> > >>> del
> > >>> tratamiento, portabilidad y oposici?n dirigi?ndose a *
> lopd at isglobal.org
> > >>> <lopd at isglobal.org>* . Pol?tica de privacidad en *www.isglobal.org
> > >>> <http://www.isglobal.org/>*.
> > >>
> > >> --
> > >> Sent from my phone. Please excuse my brevity.
> > >>
> > >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 


This message is intended exclusively for its addressee and may contain
information that is CONFIDENTIAL and protected by professional privilege. 
If
you are not the intended recipient you are hereby notified that any
dissemination, copy or disclosure of this communication is strictly 
prohibited
by law. If this message has been received in error, please 
immediately notify
us via e-mail and delete it.



DATA PROTECTION. We 
inform you that your personal data, including your
e-mail address and data 
included in your email correspondence, are included in
the ISGlobal 
Foundation files. Your personal data will be used for the purpose
of 
contacting you and sending information on the activities of the above
foundations. You can exercise your rights of access, rectification,
cancellation and opposition by contacting the following address: 
lopd at isglobal.org <mailto:lopd at isglobal.org>. ISGlobal
Privacy Policy at 
www.isglobal.org <http://www.isglobal.org/>.



-----------------------------------------------------------------------------------------------------------------------------

CONFIDENCIALIDAD. Este mensaje y sus anexos se dirigen exclusivamente a
su 
destinatario y puede contener informaci?n confidencial, por lo que la
utilizaci?n,
divulgaci?n y/o copia sin autorizaci?n est? prohibida por la
legislaci?n
vigente. Si ha recibido este mensaje por error, le rogamos lo 
comunique
inmediatamente por esta misma v?a y proceda a su destrucci?n.









PROTECCI?N DE DATOS. Sus datos de car?cter personal utilizados en este
env?o, incluida su direcci?n de e-mail, forman parte de ficheros de 
titularidad
de la Fundaci?n ISGlobal? para cualquier
finalidades de 
contacto, relaci?n institucional y/o env?o de informaci?n sobre
sus 
actividades. Los datos que usted nos pueda facilitar contestando este
correo quedar?n incorporados en los correspondientes ficheros, autorizando 
el
uso de su direcci?n de e-mail para las finalidades citadas. Puede 
ejercer los
derechos de acceso, rectificaci?n, cancelaci?n y oposici?n 
dirigi?ndose a lopd at isglobal.org <mailto:lopd at isglobal.org>* *. Pol?tica de 
privacidad
en www.isglobal.org <http://www.isglobal.org/>.

	[[alternative HTML version deleted]]


From tr@xp|@yer @end|ng |rom gm@||@com  Fri Mar  5 14:27:12 2021
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Fri, 5 Mar 2021 14:27:12 +0100
Subject: [R-pkg-devel] Using data.table in a package
Message-ID: <CAGAA5bdMW8BaEHEsdEi-o67wMWZJz=xUnu1Xz4cuOeH-Lz3RcQ@mail.gmail.com>

Hi,

  I am converting a couple of functions into a R-package. Many of the
functions use data.table.
  I have two questions using data.table in my own package.
  Normally I would put each question in separate emails but I think they
might be connected.

First question is short and I think the answer is yes.
1. Do I always need to prefix data.table each time I use something from
that package?
Eg. DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
v=1:9)

Second question is longer.
2.  In this small example code:
hello <- function() {
  DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
v=1:9)
  DT[, .(sum(v))]
}

I get these warnings from R CMD check:
hello: no visible global function definition for ?.?
hello: no visible binding for global variable ?v?
Undefined global functions or variables:
  . v

According to: vignette("datatable-importing", package = "data.table")
The solution is
hello <- function() {
  v <- NULL
  . <- NULL

And it works but looks a bit weird.
Is there a better solution?

Regards
Martin

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar  5 14:49:32 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 5 Mar 2021 08:49:32 -0500
Subject: [R-pkg-devel] Using data.table in a package
In-Reply-To: <CAGAA5bdMW8BaEHEsdEi-o67wMWZJz=xUnu1Xz4cuOeH-Lz3RcQ@mail.gmail.com>
References: <CAGAA5bdMW8BaEHEsdEi-o67wMWZJz=xUnu1Xz4cuOeH-Lz3RcQ@mail.gmail.com>
Message-ID: <0583c8dd-f4da-5ff8-f41b-4167174ce424@gmail.com>

On 05/03/2021 8:27 a.m., Martin M?ller Skarbiniks Pedersen wrote:
> Hi,
> 
>    I am converting a couple of functions into a R-package. Many of the
> functions use data.table.
>    I have two questions using data.table in my own package.
>    Normally I would put each question in separate emails but I think they
> might be connected.
> 
> First question is short and I think the answer is yes.
> 1. Do I always need to prefix data.table each time I use something from
> that package?
> Eg. DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
> v=1:9)

No, you could import that function.  This is done in the NAMESPACE file. 
  If you're using roxygen2, you can put in comments that will write the 
appropriate lines to NAMESPACE.

> 
> Second question is longer.
> 2.  In this small example code:
> hello <- function() {
>    DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
> v=1:9)
>    DT[, .(sum(v))]
> }
> 
> I get these warnings from R CMD check:
> hello: no visible global function definition for ?.?
> hello: no visible binding for global variable ?v?
> Undefined global functions or variables:
>    . v
> 
> According to: vignette("datatable-importing", package = "data.table")
> The solution is
> hello <- function() {
>    v <- NULL
>    . <- NULL
> 
> And it works but looks a bit weird.
> Is there a better solution?

The problem is that data.table is using non-standard evaluation. 
Syntactically it looks like it is referencing global variables, but in 
fact it is not, and you need to tell the testing code that what you are 
doing is okay.

The suggestion of assigning NULL to the variables is one way.  Another 
is to declare . and v as global variables using

  globalVariables(c(".", "v"))

outside of your function, and that will suppress warnings about them.

You could also put the NULL assignments outside the function and it 
would have the same effect.  (You don't want to export those variables, 
so be careful with your NAMESPACE file.)

Duncan Murdoch


From neon|r@ @end|ng |rom gm@||@com  Fri Mar  5 14:54:45 2021
From: neon|r@ @end|ng |rom gm@||@com (neonira Arinoem)
Date: Fri, 5 Mar 2021 14:54:45 +0100
Subject: [R-pkg-devel] Using data.table in a package
In-Reply-To: <CAGAA5bdMW8BaEHEsdEi-o67wMWZJz=xUnu1Xz4cuOeH-Lz3RcQ@mail.gmail.com>
References: <CAGAA5bdMW8BaEHEsdEi-o67wMWZJz=xUnu1Xz4cuOeH-Lz3RcQ@mail.gmail.com>
Message-ID: <CAN--Dz1XepZsW-Kb0=YwTqNZcRj7LxrONUbgHQ0_GcKYz8bVzA@mail.gmail.com>

Question one is a matter of personal preference. I personally stick to
explicitly state a double column depency with data.table.

Question two. Just replacing the dot by list is sufficient AFAIK.

Hope this helps



Le ven. 5 mars 2021 ? 14:28, Martin M?ller Skarbiniks Pedersen <
traxplayer at gmail.com> a ?crit :

> Hi,
>
>   I am converting a couple of functions into a R-package. Many of the
> functions use data.table.
>   I have two questions using data.table in my own package.
>   Normally I would put each question in separate emails but I think they
> might be connected.
>
> First question is short and I think the answer is yes.
> 1. Do I always need to prefix data.table each time I use something from
> that package?
> Eg. DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
> v=1:9)
>
> Second question is longer.
> 2.  In this small example code:
> hello <- function() {
>   DT <- data.table::data.table(x=rep(c("b","a","c"),each=3), y=c(1,3,6),
> v=1:9)
>   DT[, .(sum(v))]
> }
>
> I get these warnings from R CMD check:
> hello: no visible global function definition for ?.?
> hello: no visible binding for global variable ?v?
> Undefined global functions or variables:
>   . v
>
> According to: vignette("datatable-importing", package = "data.table")
> The solution is
> hello <- function() {
>   v <- NULL
>   . <- NULL
>
> And it works but looks a bit weird.
> Is there a better solution?
>
> Regards
> Martin
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Mar  5 15:22:34 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 5 Mar 2021 08:22:34 -0600
Subject: [R-pkg-devel] Using data.table in a package
In-Reply-To: <0583c8dd-f4da-5ff8-f41b-4167174ce424@gmail.com>
References: <CAGAA5bdMW8BaEHEsdEi-o67wMWZJz=xUnu1Xz4cuOeH-Lz3RcQ@mail.gmail.com>
 <0583c8dd-f4da-5ff8-f41b-4167174ce424@gmail.com>
Message-ID: <24642.16042.391678.457598@rob.eddelbuettel.com>


Martin,

Both questions are FAQs. Searches at e.g. StackOverflow might have lead you
to a solution (and you can search there, key is to add the tag i.e. make [r]
or [data.table] part of the search term).

The first one is a generic package programming question. You can use Imports:
in DESCRIPTION along with import() or importFrom() in NAMESPACE. Plenty of
tutorials.

The second one is more data.table specific and, per a quick glance, not
directly covered in the data.table FAQ---but it has a link to
https://stackoverflow.com/questions/10527072/using-data-table-package-inside-my-own-package

It's a "tax" on package writing (that I grudgingly but happily) pay because
it makes the indexing operations _so much easier_ than data.frame use by
having non-standard evaluation just inside the [] operator as Duncan alluded
to. Which is, to me, another one of the quietly cool features in data.table.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Mar  5 20:40:42 2021
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Fri, 5 Mar 2021 11:40:42 -0800
Subject: [R-pkg-devel] Vignettes from LaTeX files.
In-Reply-To: <20210305161959.69e28157@rolf-Latitude-E7470>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <20210304211940.32058aa7@rolf-Latitude-E7470>
 <20210305161959.69e28157@rolf-Latitude-E7470>
Message-ID: <CAFDcVCSwnUvOXVb1vywqyJ+SHKGQQs2_D0oVkfbq2FWcCAbehQ@mail.gmail.com>

Thank you. Glad to hear it's useful.

This plain TeX/LaTeX vignette engine is implemented using base R.  If
someone is willing to drive the efforts, I think it's not too much
work to refactor it and propose it for base R itself, where I think it
belongs, e.g. in the 'utils' package where Sweave lives, or in 'tools'
where tools::texi2dvi() lives.  The vignette engine could be called
'utils::tex', e.g. %\VignetteEngine{utils::tex}.  To me it meets the
standards for reproducible documentation from source, although,
obviously there's no 'tangle':d code output.  If we want the latter,
we're getting into literate programming, and we already have several
vignette engines for that.

Just a thought,

Henrik

On Thu, Mar 4, 2021 at 7:20 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
>
> I have now tried out building vignettes from plain LaTeX source,
> following the admirably lucid instructions provided by Henrik Bengtsson
> in:
>
>  https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-LaTeX_vignettes.pdf
>
> It all went unbelievably smoothly; no problems whatever.
>
> I am deeply grateful to Henrik.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar  5 21:41:30 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 5 Mar 2021 15:41:30 -0500
Subject: [R-pkg-devel] Vignettes from LaTeX files.
In-Reply-To: <CAFDcVCSwnUvOXVb1vywqyJ+SHKGQQs2_D0oVkfbq2FWcCAbehQ@mail.gmail.com>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <20210304211940.32058aa7@rolf-Latitude-E7470>
 <20210305161959.69e28157@rolf-Latitude-E7470>
 <CAFDcVCSwnUvOXVb1vywqyJ+SHKGQQs2_D0oVkfbq2FWcCAbehQ@mail.gmail.com>
Message-ID: <835e848e-d867-93aa-c912-559e307853b8@gmail.com>

On 05/03/2021 2:40 p.m., Henrik Bengtsson wrote:
> Thank you. Glad to hear it's useful.
> 
> This plain TeX/LaTeX vignette engine is implemented using base R.  If
> someone is willing to drive the efforts, I think it's not too much
> work to refactor it and propose it for base R itself, where I think it
> belongs,

What is your reasoning for this?  As a former R Core member, I would say 
the reasons for something to be added to base R are:

  - it's generally useful
  - it doesn't have a lot of dependencies
  - it doesn't work as well in a contributed package

The first two conditions seem to be met, but what's wrong with leaving 
it in R.rsp? Would something in base R be simplified by having this there?

Duncan



  e.g. in the 'utils' package where Sweave lives, or in 'tools'
> where tools::texi2dvi() lives.  The vignette engine could be called
> 'utils::tex', e.g. %\VignetteEngine{utils::tex}.  To me it meets the
> standards for reproducible documentation from source, although,
> obviously there's no 'tangle':d code output.  If we want the latter,
> we're getting into literate programming, and we already have several
> vignette engines for that.
> 
> Just a thought,
> 
> Henrik
> 
> On Thu, Mar 4, 2021 at 7:20 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>
>>
>>
>> I have now tried out building vignettes from plain LaTeX source,
>> following the admirably lucid instructions provided by Henrik Bengtsson
>> in:
>>
>>   https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-LaTeX_vignettes.pdf
>>
>> It all went unbelievably smoothly; no problems whatever.
>>
>> I am deeply grateful to Henrik.
>>
>> cheers,
>>
>> Rolf Turner
>>
>> --
>> Honorary Research Fellow
>> Department of Statistics
>> University of Auckland
>> Phone: +64-9-373-7599 ext. 88276
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From bbo|ker @end|ng |rom gm@||@com  Sat Mar  6 02:55:22 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 5 Mar 2021 20:55:22 -0500
Subject: [R-pkg-devel] testing for NaN in C++ code
Message-ID: <6c3ed6b9-bf33-9653-2544-7a46fa198a06@gmail.com>

I would like to test for NaN inside C++ code that lives inside a CRAN 
package.

Following the StackOverflow question linked below, I was using

#define isNAN(a)  (a!=a)

which I *think* used to work, but at some point along the way it stopped 
working due to compiler/flag changes. I'm thinking of switching to

#define isNAN(a) std::isnan(a)

instead. Does anyone have first-hand knowledge of having tried this and 
know if it works across the range of platforms/standard compilation 
flags that CRAN/R users are likely to experience?  Any other suggestions?

  I know that I should follow the problem upstream and detect it where 
it happens (see the answer titled "nan prevention" on SO), but in the 
meantime it would be nice to be able to do this robustly across all the 
platforms it's likely to see.

   cheers
     Ben Bolker


https://stackoverflow.com/questions/570669/checking-if-a-double-or-float-is-nan-in-c/42138465#42138465


From bbo|ker @end|ng |rom gm@||@com  Sat Mar  6 03:07:18 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 5 Mar 2021 21:07:18 -0500
Subject: [R-pkg-devel] testing for NaN in C++ code
In-Reply-To: <CAPcHnpRkwQHdWmZNvXofMYyvUm9Sz86wVdzvJtgVMJWVKoL30w@mail.gmail.com>
References: <6c3ed6b9-bf33-9653-2544-7a46fa198a06@gmail.com>
 <CAPcHnpRkwQHdWmZNvXofMYyvUm9Sz86wVdzvJtgVMJWVKoL30w@mail.gmail.com>
Message-ID: <b3eebb63-76bf-db4e-61f5-ce218a848c32@gmail.com>

   Thanks!  Now I see this is in Writing R Extensions, should have 
looked more carefully ...


On 3/5/21 9:00 PM, Andrew Simmons wrote:
> Hello,
> 
> 
> You probably want one of the following
> ISNA? ? ? ? ?TRUE for R's NA only
> ISNAN? ? ? TRUE for R's and IEEE's NaN
> R_IsNaN? ?TRUE for IEEE'S NaN only
> 
> On Fri, Mar 5, 2021, 20:55 Ben Bolker <bbolker at gmail.com 
> <mailto:bbolker at gmail.com>> wrote:
> 
>     I would like to test for NaN inside C++ code that lives inside a CRAN
>     package.
> 
>     Following the StackOverflow question linked below, I was using
> 
>     #define isNAN(a)? (a!=a)
> 
>     which I *think* used to work, but at some point along the way it
>     stopped
>     working due to compiler/flag changes. I'm thinking of switching to
> 
>     #define isNAN(a) std::isnan(a)
> 
>     instead. Does anyone have first-hand knowledge of having tried this and
>     know if it works across the range of platforms/standard compilation
>     flags that CRAN/R users are likely to experience?? Any other
>     suggestions?
> 
>      ? I know that I should follow the problem upstream and detect it where
>     it happens (see the answer titled "nan prevention" on SO), but in the
>     meantime it would be nice to be able to do this robustly across all the
>     platforms it's likely to see.
> 
>      ? ?cheers
>      ? ? ?Ben Bolker
> 
> 
>     https://stackoverflow.com/questions/570669/checking-if-a-double-or-float-is-nan-in-c/42138465#42138465
>     <https://stackoverflow.com/questions/570669/checking-if-a-double-or-float-is-nan-in-c/42138465#42138465>
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>


From edd @end|ng |rom deb|@n@org  Sat Mar  6 15:12:40 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 6 Mar 2021 08:12:40 -0600
Subject: [R-pkg-devel] Vignettes from LaTeX files.
In-Reply-To: <835e848e-d867-93aa-c912-559e307853b8@gmail.com>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <20210304211940.32058aa7@rolf-Latitude-E7470>
 <20210305161959.69e28157@rolf-Latitude-E7470>
 <CAFDcVCSwnUvOXVb1vywqyJ+SHKGQQs2_D0oVkfbq2FWcCAbehQ@mail.gmail.com>
 <835e848e-d867-93aa-c912-559e307853b8@gmail.com>
Message-ID: <24643.36312.135248.661701@rob.eddelbuettel.com>


On 5 March 2021 at 15:41, Duncan Murdoch wrote:
| On 05/03/2021 2:40 p.m., Henrik Bengtsson wrote:
| > Thank you. Glad to hear it's useful.
| > 
| > This plain TeX/LaTeX vignette engine is implemented using base R.  If
| > someone is willing to drive the efforts, I think it's not too much
| > work to refactor it and propose it for base R itself, where I think it
| > belongs,
| 
| What is your reasoning for this?  As a former R Core member, I would say 
| the reasons for something to be added to base R are:
| 
|   - it's generally useful
|   - it doesn't have a lot of dependencies
|   - it doesn't work as well in a contributed package
| 
| The first two conditions seem to be met, but what's wrong with leaving 
| it in R.rsp? Would something in base R be simplified by having this there?

It feels like this is about the third time in a decade+ I have seen you two
discuss the same issue.  Henrik advocates a fine technical solution from his
r.rsp package, you point out that there is benefit to keeping base R smaller,
and solutions in add-on packages.

All the while we all carry on and just slap the four or five lines onto the
file make it an Sweave vignette _without any executed code_ which works in
base R today as a proxy for pure LaTeX, just as it has for 25 or so years.

Or do as some of us do and follow Mark's trick [1] of including a pre-made
pdf inside an even more minimal Rnw file for the Sweave driver. Works great
with any pdf: pure LaTeX, LaTeX from (R)Markdown, ...

Dirk

[1] https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Sat Mar  6 15:15:51 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 6 Mar 2021 08:15:51 -0600
Subject: [R-pkg-devel] testing for NaN in C++ code
In-Reply-To: <b3eebb63-76bf-db4e-61f5-ce218a848c32@gmail.com>
References: <6c3ed6b9-bf33-9653-2544-7a46fa198a06@gmail.com>
 <CAPcHnpRkwQHdWmZNvXofMYyvUm9Sz86wVdzvJtgVMJWVKoL30w@mail.gmail.com>
 <b3eebb63-76bf-db4e-61f5-ce218a848c32@gmail.com>
Message-ID: <24643.36503.204869.899237@rob.eddelbuettel.com>


On 5 March 2021 at 21:07, Ben Bolker wrote:
|    Thanks!  Now I see this is in Writing R Extensions, should have 
| looked more carefully ...

There is also a very good (and frequently linked-to) post by Kevin on SO
which lists the different ways in the C API of R, and the Rcpp wrapper which
aims to match from R itself does:

  https://stackoverflow.com/a/26262984/143305

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Mar  7 00:54:19 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 7 Mar 2021 12:54:19 +1300
Subject: [R-pkg-devel] Vignettes from LaTeX files.
In-Reply-To: <24643.36312.135248.661701@rob.eddelbuettel.com>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <20210304211940.32058aa7@rolf-Latitude-E7470>
 <20210305161959.69e28157@rolf-Latitude-E7470>
 <CAFDcVCSwnUvOXVb1vywqyJ+SHKGQQs2_D0oVkfbq2FWcCAbehQ@mail.gmail.com>
 <835e848e-d867-93aa-c912-559e307853b8@gmail.com>
 <24643.36312.135248.661701@rob.eddelbuettel.com>
Message-ID: <20210307125419.1ae80bd9@rolf-Latitude-E7470>


On Sat, 6 Mar 2021 08:12:40 -0600
Dirk Eddelbuettel <edd at debian.org> wrote:

<SNIP>

> All the while we all carry on and just slap the four or five lines
> onto the file make it an Sweave vignette _without any executed code_
> which works in base R today as a proxy for pure LaTeX, just as it has
> for 25 or so years.

By "in base R" do you mean that one can do this *without* invoking
the R.rsp package?

What I understand you to be saying is that you can add four or five
lines to a *.tex file in your vignettes directory (or does the file
need to have a .Rnw extension?) and then the vignette will get built,
when you build the package, without any recourse to the R.rsp package.
(And there is then no need for any reference to R.rsp in your
DESCRIPTION file.)

Is this correct?

Can you be more explicit about the "four or five lines"?

If my understanding is correct, it would be nice to see this all set
out in simple terms in WRE.  Currently what is said in WRE is over my
head, and think would be over the heads of many of us ordinary mortals.

> Or do as some of us do and follow Mark's trick [1] of including a
> pre-made pdf inside an even more minimal Rnw file for the Sweave
> driver. Works great with any pdf: pure LaTeX, LaTeX from (R)Markdown,
> ...
> 
> Dirk
> 
> [1]
> https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/
> 

It would also be nice to see Mark's admirably lucid instructions
included, or at least pointed to, in WRE.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edd @end|ng |rom deb|@n@org  Sun Mar  7 01:18:50 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 6 Mar 2021 18:18:50 -0600
Subject: [R-pkg-devel] Vignettes from LaTeX files.
In-Reply-To: <20210307125419.1ae80bd9@rolf-Latitude-E7470>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <20210304211940.32058aa7@rolf-Latitude-E7470>
 <20210305161959.69e28157@rolf-Latitude-E7470>
 <CAFDcVCSwnUvOXVb1vywqyJ+SHKGQQs2_D0oVkfbq2FWcCAbehQ@mail.gmail.com>
 <835e848e-d867-93aa-c912-559e307853b8@gmail.com>
 <24643.36312.135248.661701@rob.eddelbuettel.com>
 <20210307125419.1ae80bd9@rolf-Latitude-E7470>
Message-ID: <24644.7146.718702.834853@rob.eddelbuettel.com>


On 7 March 2021 at 12:54, Rolf Turner wrote:
| Dirk Eddelbuettel <edd at debian.org> wrote:
| By "in base R" do you mean that one can do this *without* invoking
| the R.rsp package?

Exactly. Zero added dependencies. 

| What I understand you to be saying is that you can add four or five
| lines to a *.tex file in your vignettes directory (or does the file
| need to have a .Rnw extension?) and then the vignette will get built,
| when you build the package, without any recourse to the R.rsp package.
| (And there is then no need for any reference to R.rsp in your
| DESCRIPTION file.)
| 
| Is this correct?
| 
| Can you be more explicit about the "four or five lines"?

See below.
 
| If my understanding is correct, it would be nice to see this all set
| out in simple terms in WRE.  Currently what is said in WRE is over my
| head, and think would be over the heads of many of us ordinary mortals.

Here is concrete example of a minimal latex file (I had in /tmp from showing
a colleague newer to plain latex the effects of setting/not-setting \date{})
  
   \documentclass[12pt]{article}
   \author{Lennon and McCartney}
   \date{The Sixties}
   \title{Lots of stuff}

   \begin{document}
   \maketitle
   \end{document}

As you can see, no bells, no whistles, no limits. You could add whatever you
wanted.  Now as probably documented in several places, used in numerous
examples and many packages, _all it takes_ is adding four lines as a Sweave
vignette only needs the vignette headers:

   \documentclass[12pt]{article}
   \author{Lennon and McCartney}
   \date{The Sixties}
   \title{Lots of stuff}
   %\VignetteIndexEntry{Classics}
   %\VignetteKeywords{lennon, mccartney, harrison, starr}
   %\VignettePackage{musicology}
   %\VignetteEncoding{UTF-8}
   
   \begin{document}
   \maketitle
   \end{document}
   
Just how you can 'pdflatex demo.tex' (if the former is saved as 'demo.tex')
you can 'sweave demo.Rnw' (if the latter is saved as 'demo.tex') where sweave
is the helper script below wrapping what would happen inside a package build.

And that's all there is. Give it a try. Should also work if thrown into a package.

Dirk

PS sweave script below. It's old and local... I should add xdg-open at the end.


#!/bin/bash -e

function errorexit () {
    echo "Error: $1"
    exit 1
}	

function filetest () {
    if [ ! -f $1 ]; then
       errorexit "File $1 not found"
    fi
    return 0
}
		       
	       
if [ "$#" -lt 1 ]; then
    errorexit "Need to specify argument file"
fi
			      
BASENAME=$(basename $1 .Rnw)
			   
RNWFILE=$BASENAME.Rnw
filetest $RNWFILE
echo "library(tools); Sweave(\"$RNWFILE\")" \
      | R --no-save --no-restore --slave
			       
LATEXFILE=$BASENAME.tex
filetest $LATEXFILE && pdflatex $LATEXFILE
			       
PDFFILE=$BASENAME.pdf
#filetest $PDFFILE && acroread $PDFFILE &
#filetest $PDFFILE && xpdf $PDFFILE &
#filetest $PDFFILE && kpdf $PDFFILE &



-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar  7 21:18:39 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Mar 2021 15:18:39 -0500
Subject: [R-pkg-devel] Vignettes from LaTeX files.
In-Reply-To: <24643.36312.135248.661701@rob.eddelbuettel.com>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <20210304211940.32058aa7@rolf-Latitude-E7470>
 <20210305161959.69e28157@rolf-Latitude-E7470>
 <CAFDcVCSwnUvOXVb1vywqyJ+SHKGQQs2_D0oVkfbq2FWcCAbehQ@mail.gmail.com>
 <835e848e-d867-93aa-c912-559e307853b8@gmail.com>
 <24643.36312.135248.661701@rob.eddelbuettel.com>
Message-ID: <c9525ab2-7874-94f1-445c-a70e356e3cb8@gmail.com>

On 06/03/2021 9:12 a.m., Dirk Eddelbuettel wrote:
> 
> On 5 March 2021 at 15:41, Duncan Murdoch wrote:
> | On 05/03/2021 2:40 p.m., Henrik Bengtsson wrote:
> | > Thank you. Glad to hear it's useful.
> | >
> | > This plain TeX/LaTeX vignette engine is implemented using base R.  If
> | > someone is willing to drive the efforts, I think it's not too much
> | > work to refactor it and propose it for base R itself, where I think it
> | > belongs,
> |
> | What is your reasoning for this?  As a former R Core member, I would say
> | the reasons for something to be added to base R are:
> |
> |   - it's generally useful
> |   - it doesn't have a lot of dependencies
> |   - it doesn't work as well in a contributed package
> |
> | The first two conditions seem to be met, but what's wrong with leaving
> | it in R.rsp? Would something in base R be simplified by having this there?
> 
> It feels like this is about the third time in a decade+ I have seen you two
> discuss the same issue.  Henrik advocates a fine technical solution from his
> r.rsp package, you point out that there is benefit to keeping base R smaller,
> and solutions in add-on packages.

I don't really see it as a discussion.  I believe you that it's (at 
least) the third time I've repeated the point that base R inclusions 
need more justification than "I think it belongs there" (not only to 
Henrik), but I don't recall the discussion ever continuing beyond that.

Duncan Murdoch


From r@turner @end|ng |rom @uck|@nd@@c@nz  Mon Mar  8 01:40:57 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Mon, 8 Mar 2021 13:40:57 +1300
Subject: [R-pkg-devel] Vignettes from LaTeX files.
In-Reply-To: <24644.7146.718702.834853@rob.eddelbuettel.com>
References: <20210304155128.429acbf7@rolf-Latitude-E7470>
 <CAFDcVCS0a30e11h=N3OENQs9Bd-O3J+oKeR5ZkmiHnLtSKajzw@mail.gmail.com>
 <20210304211940.32058aa7@rolf-Latitude-E7470>
 <20210305161959.69e28157@rolf-Latitude-E7470>
 <CAFDcVCSwnUvOXVb1vywqyJ+SHKGQQs2_D0oVkfbq2FWcCAbehQ@mail.gmail.com>
 <835e848e-d867-93aa-c912-559e307853b8@gmail.com>
 <24643.36312.135248.661701@rob.eddelbuettel.com>
 <20210307125419.1ae80bd9@rolf-Latitude-E7470>
 <24644.7146.718702.834853@rob.eddelbuettel.com>
Message-ID: <20210308134057.52d17d93@rolf-Latitude-E7470>


Thanks Dirk.  Sorry for being so slow to express my thanks.
I've been, uh, distracted.  Have not yet tried out your demo;
I will shortly.

Thanks again.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From th|erry@onke||nx @end|ng |rom |nbo@be  Mon Mar  8 17:17:51 2021
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Mon, 8 Mar 2021 17:17:51 +0100
Subject: [R-pkg-devel] rcmdcheck reports wrong version of lattice
Message-ID: <CAJuCY5wVwg8Pq4Je3HtmWtbLmEk3rvP1JhkAuH3kFpLEq04N3Q@mail.gmail.com>

Dear all,

rcmdcheck::rcmdcheck() runs fine on my package.  rcmdcheck::rcmdcheck(args
= c("--as-cran")) reports an error: package ?lattice? was installed before
R 4.0.0: please re-install it
The error persists, even when I reinstall lattice.

What am I missing?

Best regards,

Thierry

sessioninfo::session_info("lattice")
? Session info
????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
 setting  value
 version  R version 4.0.4 (2021-02-15)
 os       Ubuntu 18.04.5 LTS
 system   x86_64, linux-gnu
 ui       RStudio
 language nl_BE:nl
 collate  nl_BE.UTF-8
 ctype    nl_BE.UTF-8
 tz       Europe/Brussels
 date     2021-03-08

? Packages
????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
 package * version date       lib source
 lattice   0.20-41 2020-04-02 [1] CRAN (R 4.0.4)


ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar  8 17:22:57 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 8 Mar 2021 17:22:57 +0100
Subject: [R-pkg-devel] rcmdcheck reports wrong version of lattice
In-Reply-To: <CAJuCY5wVwg8Pq4Je3HtmWtbLmEk3rvP1JhkAuH3kFpLEq04N3Q@mail.gmail.com>
References: <CAJuCY5wVwg8Pq4Je3HtmWtbLmEk3rvP1JhkAuH3kFpLEq04N3Q@mail.gmail.com>
Message-ID: <a0d0c8b6-3bfd-1058-a37b-d05df61d3e10@statistik.tu-dortmund.de>



On 08.03.2021 17:17, Thierry Onkelinx wrote:
> Dear all,
> 
> rcmdcheck::rcmdcheck() runs fine on my package.  rcmdcheck::rcmdcheck(args
> = c("--as-cran")) reports an error: package ?lattice? was installed before
> R 4.0.0: please re-install it

I have no idea how that package perfoms the checks, but I guess you have 
an outdated version of lattice (or borken installtion of lattice) in 
another library of packages that is used for these checks?

Best,
Uwe Ligges


> The error persists, even when I reinstall lattice.
> 
> What am I missing?
> 
> Best regards,
> 
> Thierry
> 
> sessioninfo::session_info("lattice")
> ? Session info
> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>   setting  value
>   version  R version 4.0.4 (2021-02-15)
>   os       Ubuntu 18.04.5 LTS
>   system   x86_64, linux-gnu
>   ui       RStudio
>   language nl_BE:nl
>   collate  nl_BE.UTF-8
>   ctype    nl_BE.UTF-8
>   tz       Europe/Brussels
>   date     2021-03-08
> 
> ? Packages
> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>   package * version date       lib source
>   lattice   0.20-41 2020-04-02 [1] CRAN (R 4.0.4)
> 
> 
> ir. Thierry Onkelinx
> Statisticus / Statistician
> 
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
> 
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
> ///////////////////////////////////////////////////////////////////////////////////////////
> 
> <https://www.inbo.be>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Mar  8 17:28:26 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 8 Mar 2021 17:28:26 +0100
Subject: [R-pkg-devel] rcmdcheck reports wrong version of lattice
In-Reply-To: <CAJuCY5wVwg8Pq4Je3HtmWtbLmEk3rvP1JhkAuH3kFpLEq04N3Q@mail.gmail.com>
References: <CAJuCY5wVwg8Pq4Je3HtmWtbLmEk3rvP1JhkAuH3kFpLEq04N3Q@mail.gmail.com>
Message-ID: <CABtg=K=wnWuSQu2jOoxv8A+ZuuiHQGae8V8k482tv=juxrR9WA@mail.gmail.com>

Hi,

If you think this is a bug in rcmdcheck, then please report an issue
here: https://github.com/r-lib/rcmdcheck/issues

My guess is that you have another version of lattice in another
library, and that version is used with `--as-cran`.

Gabor

On Mon, Mar 8, 2021 at 5:18 PM Thierry Onkelinx
<thierry.onkelinx at inbo.be> wrote:
>
> Dear all,
>
> rcmdcheck::rcmdcheck() runs fine on my package.  rcmdcheck::rcmdcheck(args
> = c("--as-cran")) reports an error: package ?lattice? was installed before
> R 4.0.0: please re-install it
> The error persists, even when I reinstall lattice.
>
> What am I missing?
>
> Best regards,
>
> Thierry
>
> sessioninfo::session_info("lattice")
> ? Session info
> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>  setting  value
>  version  R version 4.0.4 (2021-02-15)
>  os       Ubuntu 18.04.5 LTS
>  system   x86_64, linux-gnu
>  ui       RStudio
>  language nl_BE:nl
>  collate  nl_BE.UTF-8
>  ctype    nl_BE.UTF-8
>  tz       Europe/Brussels
>  date     2021-03-08
>
> ? Packages
> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>  package * version date       lib source
>  lattice   0.20-41 2020-04-02 [1] CRAN (R 4.0.4)
>
>
> ir. Thierry Onkelinx
> Statisticus / Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
>
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
> ///////////////////////////////////////////////////////////////////////////////////////////
>
> <https://www.inbo.be>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

From th|erry@onke||nx @end|ng |rom |nbo@be  Mon Mar  8 17:45:29 2021
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Mon, 8 Mar 2021 17:45:29 +0100
Subject: [R-pkg-devel] rcmdcheck reports wrong version of lattice
In-Reply-To: <CABtg=K=wnWuSQu2jOoxv8A+ZuuiHQGae8V8k482tv=juxrR9WA@mail.gmail.com>
References: <CAJuCY5wVwg8Pq4Je3HtmWtbLmEk3rvP1JhkAuH3kFpLEq04N3Q@mail.gmail.com>
 <CABtg=K=wnWuSQu2jOoxv8A+ZuuiHQGae8V8k482tv=juxrR9WA@mail.gmail.com>
Message-ID: <CAJuCY5zmzZq555+HTC6N2p=Yq+TrRuuFN4iHZNhUAAL4YxD5SQ@mail.gmail.com>

Yes, This was the problem. The recent version of lattice was in my home
folder ~/R/x86_64-pc-linux-gnu-library/4.0 (first element of .libPaths()).
An older version of lattice was in /usr/lib/R/library (last element of
.libPaths()).

install.packages("lattice", lib = "/usr/lib/R/library") solved the problem.

So it looks like rcmdcheck ignored the first element of .libPaths(). I'm
not sure if that is a bug of rcmdcheck. Shall I report an issue?

Best regards,

Thierry

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op ma 8 mrt. 2021 om 17:28 schreef G?bor Cs?rdi <csardi.gabor at gmail.com>:

> Hi,
>
> If you think this is a bug in rcmdcheck, then please report an issue
> here: https://github.com/r-lib/rcmdcheck/issues
>
> My guess is that you have another version of lattice in another
> library, and that version is used with `--as-cran`.
>
> Gabor
>
> On Mon, Mar 8, 2021 at 5:18 PM Thierry Onkelinx
> <thierry.onkelinx at inbo.be> wrote:
> >
> > Dear all,
> >
> > rcmdcheck::rcmdcheck() runs fine on my package.
> rcmdcheck::rcmdcheck(args
> > = c("--as-cran")) reports an error: package ?lattice? was installed
> before
> > R 4.0.0: please re-install it
> > The error persists, even when I reinstall lattice.
> >
> > What am I missing?
> >
> > Best regards,
> >
> > Thierry
> >
> > sessioninfo::session_info("lattice")
> > ? Session info
> >
> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> >  setting  value
> >  version  R version 4.0.4 (2021-02-15)
> >  os       Ubuntu 18.04.5 LTS
> >  system   x86_64, linux-gnu
> >  ui       RStudio
> >  language nl_BE:nl
> >  collate  nl_BE.UTF-8
> >  ctype    nl_BE.UTF-8
> >  tz       Europe/Brussels
> >  date     2021-03-08
> >
> > ? Packages
> >
> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> >  package * version date       lib source
> >  lattice   0.20-41 2020-04-02 [1] CRAN (R 4.0.4)
> >
> >
> > ir. Thierry Onkelinx
> > Statisticus / Statistician
> >
> > Vlaamse Overheid / Government of Flanders
> > INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
> AND
> > FOREST
> > Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> > thierry.onkelinx at inbo.be
> > Havenlaan 88 bus 73, 1000 Brussel
> > www.inbo.be
> >
> >
> ///////////////////////////////////////////////////////////////////////////////////////////
> > To call in the statistician after the experiment is done may be no more
> > than asking him to perform a post-mortem examination: he may be able to
> say
> > what the experiment died of. ~ Sir Ronald Aylmer Fisher
> > The plural of anecdote is not data. ~ Roger Brinner
> > The combination of some data and an aching desire for an answer does not
> > ensure that a reasonable answer can be extracted from a given body of
> data.
> > ~ John Tukey
> >
> ///////////////////////////////////////////////////////////////////////////////////////////
> >
> > <https://www.inbo.be>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Mar  8 17:53:54 2021
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 8 Mar 2021 17:53:54 +0100
Subject: [R-pkg-devel] rcmdcheck reports wrong version of lattice
In-Reply-To: <CAJuCY5zmzZq555+HTC6N2p=Yq+TrRuuFN4iHZNhUAAL4YxD5SQ@mail.gmail.com>
References: <CAJuCY5wVwg8Pq4Je3HtmWtbLmEk3rvP1JhkAuH3kFpLEq04N3Q@mail.gmail.com>
 <CABtg=K=wnWuSQu2jOoxv8A+ZuuiHQGae8V8k482tv=juxrR9WA@mail.gmail.com>
 <CAJuCY5zmzZq555+HTC6N2p=Yq+TrRuuFN4iHZNhUAAL4YxD5SQ@mail.gmail.com>
Message-ID: <CABtg=K=gpDQs5rUee8h4aJOb_VxOQpvsq8oSOEpV7Z-bQ6F9kA@mail.gmail.com>

On Mon, Mar 8, 2021 at 5:45 PM Thierry Onkelinx <thierry.onkelinx at inbo.be>
wrote:

> Yes, This was the problem. The recent version of lattice was in my home
> folder ~/R/x86_64-pc-linux-gnu-library/4.0 (first element of .libPaths()).
> An older version of lattice was in /usr/lib/R/library (last element of
> .libPaths()).
>
> install.packages("lattice", lib = "/usr/lib/R/library") solved the problem.
>
> So it looks like rcmdcheck ignored the first element of .libPaths(). I'm
> not sure if that is a bug of rcmdcheck. Shall I report an issue?
>

If you suspect that this behavior is different from running `R CMD check`
directly, then yes, please do.

Thanks,
Gabor

[...]

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Mon Mar  8 18:47:15 2021
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Mon, 8 Mar 2021 09:47:15 -0800
Subject: [R-pkg-devel] rcmdcheck reports wrong version of lattice
In-Reply-To: <CAJuCY5zmzZq555+HTC6N2p=Yq+TrRuuFN4iHZNhUAAL4YxD5SQ@mail.gmail.com>
References: <CAJuCY5wVwg8Pq4Je3HtmWtbLmEk3rvP1JhkAuH3kFpLEq04N3Q@mail.gmail.com>
 <CABtg=K=wnWuSQu2jOoxv8A+ZuuiHQGae8V8k482tv=juxrR9WA@mail.gmail.com>
 <CAJuCY5zmzZq555+HTC6N2p=Yq+TrRuuFN4iHZNhUAAL4YxD5SQ@mail.gmail.com>
Message-ID: <CAHqSRuSY9rS6M43XUCYwPaCSm77YbTgdZzy9BwLOq009KCAqQg@mail.gmail.com>

I haven't followed all the code branches in tools:::.check_packages(),
but some of them use --vanilla when running the R subprocess that does
the checking.  I think that would mean that libraries in ~/R would not
be in the search path.

-BIll

On Mon, Mar 8, 2021 at 8:45 AM Thierry Onkelinx
<thierry.onkelinx at inbo.be> wrote:
>
> Yes, This was the problem. The recent version of lattice was in my home
> folder ~/R/x86_64-pc-linux-gnu-library/4.0 (first element of .libPaths()).
> An older version of lattice was in /usr/lib/R/library (last element of
> .libPaths()).
>
> install.packages("lattice", lib = "/usr/lib/R/library") solved the problem.
>
> So it looks like rcmdcheck ignored the first element of .libPaths(). I'm
> not sure if that is a bug of rcmdcheck. Shall I report an issue?
>
> Best regards,
>
> Thierry
>
> ir. Thierry Onkelinx
> Statisticus / Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
>
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
> ///////////////////////////////////////////////////////////////////////////////////////////
>
> <https://www.inbo.be>
>
>
> Op ma 8 mrt. 2021 om 17:28 schreef G?bor Cs?rdi <csardi.gabor at gmail.com>:
>
> > Hi,
> >
> > If you think this is a bug in rcmdcheck, then please report an issue
> > here: https://github.com/r-lib/rcmdcheck/issues
> >
> > My guess is that you have another version of lattice in another
> > library, and that version is used with `--as-cran`.
> >
> > Gabor
> >
> > On Mon, Mar 8, 2021 at 5:18 PM Thierry Onkelinx
> > <thierry.onkelinx at inbo.be> wrote:
> > >
> > > Dear all,
> > >
> > > rcmdcheck::rcmdcheck() runs fine on my package.
> > rcmdcheck::rcmdcheck(args
> > > = c("--as-cran")) reports an error: package ?lattice? was installed
> > before
> > > R 4.0.0: please re-install it
> > > The error persists, even when I reinstall lattice.
> > >
> > > What am I missing?
> > >
> > > Best regards,
> > >
> > > Thierry
> > >
> > > sessioninfo::session_info("lattice")
> > > ? Session info
> > >
> > ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> > >  setting  value
> > >  version  R version 4.0.4 (2021-02-15)
> > >  os       Ubuntu 18.04.5 LTS
> > >  system   x86_64, linux-gnu
> > >  ui       RStudio
> > >  language nl_BE:nl
> > >  collate  nl_BE.UTF-8
> > >  ctype    nl_BE.UTF-8
> > >  tz       Europe/Brussels
> > >  date     2021-03-08
> > >
> > > ? Packages
> > >
> > ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> > >  package * version date       lib source
> > >  lattice   0.20-41 2020-04-02 [1] CRAN (R 4.0.4)
> > >
> > >
> > > ir. Thierry Onkelinx
> > > Statisticus / Statistician
> > >
> > > Vlaamse Overheid / Government of Flanders
> > > INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
> > AND
> > > FOREST
> > > Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> > > thierry.onkelinx at inbo.be
> > > Havenlaan 88 bus 73, 1000 Brussel
> > > www.inbo.be
> > >
> > >
> > ///////////////////////////////////////////////////////////////////////////////////////////
> > > To call in the statistician after the experiment is done may be no more
> > > than asking him to perform a post-mortem examination: he may be able to
> > say
> > > what the experiment died of. ~ Sir Ronald Aylmer Fisher
> > > The plural of anecdote is not data. ~ Roger Brinner
> > > The combination of some data and an aching desire for an answer does not
> > > ensure that a reasonable answer can be extracted from a given body of
> > data.
> > > ~ John Tukey
> > >
> > ///////////////////////////////////////////////////////////////////////////////////////////
> > >
> > > <https://www.inbo.be>
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

From jernej@jev@en@k @end|ng |rom gm@||@com  Tue Mar  9 15:04:14 2021
From: jernej@jev@en@k @end|ng |rom gm@||@com (=?UTF-8?Q?Jernej_Jev=C5=A1enak?=)
Date: Tue, 9 Mar 2021 15:04:14 +0100
Subject: [R-pkg-devel] Unexpected problem with CRAN submission for
 dendroTools
Message-ID: <CACKka21Uvh1F968ASnTi4JVzjqWM1o0RLJuELTv9aHPSB-CjOA@mail.gmail.com>

Hello Everyone,

Yesterday I successfully updated the dendroTools R package, but afterwards
I received an email from CRAN, regarding their policy:

?Dear maintainer,

Please see the problems shown on
<https://cran.r-project.org/web/checks/check_results_dendroTools.html>.

Please correct before 2021-03-22 to safely retain your package on CRAN.

It seems we need to remind you of the CRAN policy:

'Packages which use Internet resources should fail gracefully with an
informative message if the resource is not available or has changed (and
not give a check warning nor error).'

This needs correction whether or not the resource recovers.

The CRAN Team?



After reading some online discussions, e.g. here (
https://community.rstudio.com/t/internet-resources-should-fail-gracefully/49199),
I informed myself about possible issues when examples rely on data from the
internet. However, all data that I use in my examples/vignettes is built in
the package, so I am confused what I should do?

Any advice is appreciated.

Jernej

	[[alternative HTML version deleted]]


From rub@k @end|ng |rom m@th@@@u@dk  Thu Mar 11 16:18:56 2021
From: rub@k @end|ng |rom m@th@@@u@dk (Ege Rubak)
Date: Thu, 11 Mar 2021 15:18:56 +0000
Subject: [R-pkg-devel] Submitting breaking changes to CRAN
Message-ID: <960a68cfd12df0b7ff8043f0792b8214c625e771.camel@math.aau.dk>

Dear all,

I'm seeking advice on how to submit a new package version with breaking
changes to CRAN. I will try to make this short:

1. spatstat (<= 1.65) had grow to be very large with extensive
examples, tests, and documentation.
2. CRAN asked us to reduce package size and check time.
3. We reorganized the package into a new umbrella package spatstat 2.0
which Depends/Imports several subpackages named spatstat.xxxx.
4. All subpackages are now on CRAN.
5. We submitted spatstat 2.0-1 which breaks 79 reverse dependencies
because they e.g. call functions that have been moved from spatstat to
spatstat.xxxx.
6. All maintainers have been warned over a period of months and offered
detailed help to adjust their package. Many have reported back that
they have a new version ready that will work with spatstat (>=2.0) and
are waiting to submit until it is on CRAN.
7. We received notification on 23 Feburary that "package spatstat_2.0-
1.tar.gz has been auto-processed. The auto-check found problems when
checking the first order strong reverse dependencies.
Please reply-all and explain: Is this expected or do you need to fix
anything in your package? If expected, have all maintainers of affected
packages been informed well in advance? Are there false positives in
our results?"
8. We replied to all on the same day, 23 Feb, that this was expected
and maintainers had been informed. Since then we have no news.

Any advice on how to cross the finish line and get spatstat 2.0-1 on
CRAN without putting too big a burden on the CRAN volunteers?

I can only come up with a long shot:

Ask package maintainers to submit their spatstat 2.0 compatible package
to CRAN with an additional line in DESCRIPTION:

Additional_repositories: https://spatstat.r-universe.dev

Since spatstat 2.0-1 is available from this repository they may pass
the incoming checks on CRAN, but my hopes are not too high.

If this was successful the reverse dependencies would be compatible
with spatstat 2.0 and on CRAN and so spatstat 2.0 would break nothing
and we could resubmit.

Best regards,
Ege


-- 
Ege Rubak, Associate Professor,
Department of Mathematical Sciences, Aalborg University
Skjernvej 4A, 9220 Aalborg East, Denmark
Phone: (+45)99408861
Mobile: (+45)30230252
Email: rubak at math.aau.dk

From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar 11 20:56:49 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 11 Mar 2021 14:56:49 -0500
Subject: [R-pkg-devel] Submitting breaking changes to CRAN
In-Reply-To: <960a68cfd12df0b7ff8043f0792b8214c625e771.camel@math.aau.dk>
References: <960a68cfd12df0b7ff8043f0792b8214c625e771.camel@math.aau.dk>
Message-ID: <f68b25ad-5c4d-ea61-6470-176af7c7b735@gmail.com>

It may be too late to do this now, but you could use the approach that 
devtools used when it was broken up:  The main package imports functions 
from the new spatstat.xxxx packages and exports them.  This way it could 
be done with no breaking changes.  Reverse dependencies could change to 
depend on spatstat.xxxx at their leisure.

Duncan Murdoch

On 11/03/2021 10:18 a.m., Ege Rubak wrote:
> Dear all,
> 
> I'm seeking advice on how to submit a new package version with breaking
> changes to CRAN. I will try to make this short:
> 
> 1. spatstat (<= 1.65) had grow to be very large with extensive
> examples, tests, and documentation.
> 2. CRAN asked us to reduce package size and check time.
> 3. We reorganized the package into a new umbrella package spatstat 2.0
> which Depends/Imports several subpackages named spatstat.xxxx.
> 4. All subpackages are now on CRAN.
> 5. We submitted spatstat 2.0-1 which breaks 79 reverse dependencies
> because they e.g. call functions that have been moved from spatstat to
> spatstat.xxxx.
> 6. All maintainers have been warned over a period of months and offered
> detailed help to adjust their package. Many have reported back that
> they have a new version ready that will work with spatstat (>=2.0) and
> are waiting to submit until it is on CRAN.
> 7. We received notification on 23 Feburary that "package spatstat_2.0-
> 1.tar.gz has been auto-processed. The auto-check found problems when
> checking the first order strong reverse dependencies.
> Please reply-all and explain: Is this expected or do you need to fix
> anything in your package? If expected, have all maintainers of affected
> packages been informed well in advance? Are there false positives in
> our results?"
> 8. We replied to all on the same day, 23 Feb, that this was expected
> and maintainers had been informed. Since then we have no news.
> 
> Any advice on how to cross the finish line and get spatstat 2.0-1 on
> CRAN without putting too big a burden on the CRAN volunteers?
> 
> I can only come up with a long shot:
> 
> Ask package maintainers to submit their spatstat 2.0 compatible package
> to CRAN with an additional line in DESCRIPTION:
> 
> Additional_repositories: https://spatstat.r-universe.dev
> 
> Since spatstat 2.0-1 is available from this repository they may pass
> the incoming checks on CRAN, but my hopes are not too high.
> 
> If this was successful the reverse dependencies would be compatible
> with spatstat 2.0 and on CRAN and so spatstat 2.0 would break nothing
> and we could resubmit.
> 
> Best regards,
> Ege
> 
>


From w||||@m@ndre@h @end|ng |rom hotm@||@com  Thu Mar 11 20:16:38 2021
From: w||||@m@ndre@h @end|ng |rom hotm@||@com (=?iso-8859-1?Q?William_Andr=E9s_Herrera_C=E1ceres?=)
Date: Thu, 11 Mar 2021 19:16:38 +0000
Subject: [R-pkg-devel] Note_to_CRAN_mainteners
Message-ID: <DM6PR03MB5098D993E73678A31EE53D28D3909@DM6PR03MB5098.namprd03.prod.outlook.com>

Hi everyone,

I am a beginner in developing R packages in CRAN. Now I am trying to submit my package to CRAN but I cannot solve this issue:


Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'William Herrera-C?ceres <williamandresh at hotmail.com>'

Could someone give me a hand to rid that NOTE?

Thank you in advance,
William


	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Thu Mar 11 21:22:10 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 11 Mar 2021 15:22:10 -0500
Subject: [R-pkg-devel] Note_to_CRAN_mainteners
In-Reply-To: <DM6PR03MB5098D993E73678A31EE53D28D3909@DM6PR03MB5098.namprd03.prod.outlook.com>
References: <DM6PR03MB5098D993E73678A31EE53D28D3909@DM6PR03MB5098.namprd03.prod.outlook.com>
Message-ID: <6b2cf01b-78ca-e0ff-3480-a145697f131a@gmail.com>

   As far as I know, this is a harmless note and can be disregarded. 
(And, can't be eliminated.) (It would be nice if that were clearer in 
the documentation ... maybe it is and I just haven't checked lately ...)

On 3/11/21 2:16 PM, William Andr?s Herrera C?ceres wrote:
> Hi everyone,
> 
> I am a beginner in developing R packages in CRAN. Now I am trying to submit my package to CRAN but I cannot solve this issue:
> 
> 
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'William Herrera-C?ceres <williamandresh at hotmail.com>'
> 
> Could someone give me a hand to rid that NOTE?
> 
> Thank you in advance,
> William
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jon@th@n @end|ng |rom m@z@m@@c|ence@com  Thu Mar 11 21:57:00 2021
From: jon@th@n @end|ng |rom m@z@m@@c|ence@com (Jonathan Callahan)
Date: Thu, 11 Mar 2021 12:57:00 -0800
Subject: [R-pkg-devel] R CMD build --resave-data not working
Message-ID: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>

I am building a package using R 4.0.4 on OS X 10.15.7.

In a terminal I type:

R CMD build --resave-data AirSensor

Then, I check with:

R CMD check --as-cran AirSensor_1.0.8.tar.gz

Everything is fine until I see:


* checking data for ASCII and uncompressed saves ... WARNING



  Note: significantly better compression could be obtained

        by using R CMD build --resave-data

                            old_size new_size compress

  example_pas.rda              1.6Mb    1.1Mb       xz

  example_pas_raw.rda          114Kb     86Kb       xz

  example_pat.rda              965Kb    444Kb       xz

  example_pat_failure_A.rda    527Kb    259Kb       xz

  example_pat_failure_B.rda    411Kb    198Kb       xz

  example_sensor_scaqmd.rda    108Kb     76Kb       xz

I get the same WARNING if I submit to win-builder.R-project.org.

I've built many packages in the past and am currently stumped as to what
might be happening.

-- 
Jonathan Callahan, PhD
Mazama Science
206-708-5028
mazamascience.com

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Thu Mar 11 22:02:13 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 11 Mar 2021 16:02:13 -0500
Subject: [R-pkg-devel] R CMD build --resave-data not working
In-Reply-To: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>
References: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>
Message-ID: <83814cbd-9af6-9455-01d2-518eb98c87a8@gmail.com>

   maybe R CMD build --resave-data=best   ... ?

On 3/11/21 3:57 PM, Jonathan Callahan wrote:
> I am building a package using R 4.0.4 on OS X 10.15.7.
> 
> In a terminal I type:
> 
> R CMD build --resave-data AirSensor
> 
> Then, I check with:
> 
> R CMD check --as-cran AirSensor_1.0.8.tar.gz
> 
> Everything is fine until I see:
> 
> 
> * checking data for ASCII and uncompressed saves ... WARNING
> 
> 
> 
>    Note: significantly better compression could be obtained
> 
>          by using R CMD build --resave-data
> 
>                              old_size new_size compress
> 
>    example_pas.rda              1.6Mb    1.1Mb       xz
> 
>    example_pas_raw.rda          114Kb     86Kb       xz
> 
>    example_pat.rda              965Kb    444Kb       xz
> 
>    example_pat_failure_A.rda    527Kb    259Kb       xz
> 
>    example_pat_failure_B.rda    411Kb    198Kb       xz
> 
>    example_sensor_scaqmd.rda    108Kb     76Kb       xz
> 
> I get the same WARNING if I submit to win-builder.R-project.org.
> 
> I've built many packages in the past and am currently stumped as to what
> might be happening.
>


From bbo|ker @end|ng |rom gm@||@com  Thu Mar 11 22:04:37 2021
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 11 Mar 2021 16:04:37 -0500
Subject: [R-pkg-devel] R CMD build --resave-data not working
In-Reply-To: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>
References: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>
Message-ID: <7c254a22-8642-5219-4588-1ba3b50d5f8d@gmail.com>

   Hmm, I may have written too quickly.  I find these lines from R CMD 
build --help confusing:


  --resave-data=        re-save data files as compactly as possible:
                         "no", "best", "gzip" (default)
   --resave-data         same as --resave-data=best

The first line suggests that gzip compression is the default.  The 
second suggests that "best" is the default.  And are we supposed to use 
quotation marks or not ... ?

   In any case, --resave-data=best and --resave-data="best" both seem 
worth a try.


On 3/11/21 3:57 PM, Jonathan Callahan wrote:
> I am building a package using R 4.0.4 on OS X 10.15.7.
> 
> In a terminal I type:
> 
> R CMD build --resave-data AirSensor
> 
> Then, I check with:
> 
> R CMD check --as-cran AirSensor_1.0.8.tar.gz
> 
> Everything is fine until I see:
> 
> 
> * checking data for ASCII and uncompressed saves ... WARNING
> 
> 
> 
>    Note: significantly better compression could be obtained
> 
>          by using R CMD build --resave-data
> 
>                              old_size new_size compress
> 
>    example_pas.rda              1.6Mb    1.1Mb       xz
> 
>    example_pas_raw.rda          114Kb     86Kb       xz
> 
>    example_pat.rda              965Kb    444Kb       xz
> 
>    example_pat_failure_A.rda    527Kb    259Kb       xz
> 
>    example_pat_failure_B.rda    411Kb    198Kb       xz
> 
>    example_sensor_scaqmd.rda    108Kb     76Kb       xz
> 
> I get the same WARNING if I submit to win-builder.R-project.org.
> 
> I've built many packages in the past and am currently stumped as to what
> might be happening.
>


From @eb@meyer @end|ng |rom |@u@de  Thu Mar 11 22:16:01 2021
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 11 Mar 2021 22:16:01 +0100
Subject: [R-pkg-devel] R CMD build --resave-data not working
In-Reply-To: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>
References: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>
Message-ID: <5bdb137e-0176-aae0-2f0c-9b8a9690535f@fau.de>

This is a bug in R 4.0.0 - R 4.0.4 affecting packages using LazyData.

Two possible workarounds:

- Manually run tools::resaveRdaFiles() on your data directory before
building the package.

- Use a current development version of R (4.0.4-patched >= r80069 or
R-devel >= r79573)

Best regards,

	Sebastian Meyer


PS: This is a duplicate of a recent discussion on this list, see
https://stat.ethz.ch/pipermail/r-package-devel/2021q1/006643.html



Am 11.03.21 um 21:57 schrieb Jonathan Callahan:
> I am building a package using R 4.0.4 on OS X 10.15.7.
> 
> In a terminal I type:
> 
> R CMD build --resave-data AirSensor
> 
> Then, I check with:
> 
> R CMD check --as-cran AirSensor_1.0.8.tar.gz
> 
> Everything is fine until I see:
> 
> 
> * checking data for ASCII and uncompressed saves ... WARNING
> 
> 
> 
>   Note: significantly better compression could be obtained
> 
>         by using R CMD build --resave-data
> 
>                             old_size new_size compress
> 
>   example_pas.rda              1.6Mb    1.1Mb       xz
> 
>   example_pas_raw.rda          114Kb     86Kb       xz
> 
>   example_pat.rda              965Kb    444Kb       xz
> 
>   example_pat_failure_A.rda    527Kb    259Kb       xz
> 
>   example_pat_failure_B.rda    411Kb    198Kb       xz
> 
>   example_sensor_scaqmd.rda    108Kb     76Kb       xz
> 
> I get the same WARNING if I submit to win-builder.R-project.org.
> 
> I've built many packages in the past and am currently stumped as to what
> might be happening.
>


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar 11 23:00:18 2021
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 12 Mar 2021 11:00:18 +1300
Subject: [R-pkg-devel] R CMD build --resave-data not working
In-Reply-To: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>
References: <CAPjNR=SoHF1nVc+UD8jLOwkoSCiZ0T9xE9by10BrYsL4Fx0Mxg@mail.gmail.com>
Message-ID: <20210312110018.735b2ca8@rolf-Latitude-E7470>


On Thu, 11 Mar 2021 12:57:00 -0800
Jonathan Callahan <jonathan at mazamascience.com> wrote:

> I am building a package using R 4.0.4 on OS X 10.15.7.
> 
> In a terminal I type:
> 
> R CMD build --resave-data AirSensor
> 
> Then, I check with:
> 
> R CMD check --as-cran AirSensor_1.0.8.tar.gz
> 
> Everything is fine until I see:
> 
> 
> * checking data for ASCII and uncompressed saves ... WARNING
> 
> 
> 
>   Note: significantly better compression could be obtained
> 
>         by using R CMD build --resave-data
> 
>                             old_size new_size compress
> 
>   example_pas.rda              1.6Mb    1.1Mb       xz
> 
>   example_pas_raw.rda          114Kb     86Kb       xz
> 
>   example_pat.rda              965Kb    444Kb       xz
> 
>   example_pat_failure_A.rda    527Kb    259Kb       xz
> 
>   example_pat_failure_B.rda    411Kb    198Kb       xz
> 
>   example_sensor_scaqmd.rda    108Kb     76Kb       xz
> 
> I get the same WARNING if I submit to win-builder.R-project.org.
> 
> I've built many packages in the past and am currently stumped as to
> what might be happening.

I had the same problem, and asked about it some time back (c. 4
March) and was informed by Sebastian Meyer that:

> ... in R 4.0.0-4.0.4 the --resave-data option of R CMD build was
> ineffective for packages using LazyData. This bug has recently been
> fixed in R-devel (c79573) and I think the fix should also be ported
> to R-patched and appear in the NEWS.

A temporary workaround (again, thanks to Sebastian Meyer) is to run

    tools::resaveRdaFiles()

on your data directory prior to building.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From rub@k @end|ng |rom m@th@@@u@dk  Fri Mar 12 01:39:56 2021
From: rub@k @end|ng |rom m@th@@@u@dk (Ege Rubak)
Date: Fri, 12 Mar 2021 00:39:56 +0000
Subject: [R-pkg-devel] Submitting breaking changes to CRAN
In-Reply-To: <f68b25ad-5c4d-ea61-6470-176af7c7b735@gmail.com>
References: <960a68cfd12df0b7ff8043f0792b8214c625e771.camel@math.aau.dk>
 <f68b25ad-5c4d-ea61-6470-176af7c7b735@gmail.com>
Message-ID: <a5695e6d9cb190ce77242a4a25e661f09613fec5.camel@math.aau.dk>

Dear Duncan,

Thanks for taking the time to read my message and for the constructive
idea. You are right that it is a bit late for us to do this now. Given
that spatstat (<=1.65) exports >2,500 objects which are now spread
across sub-packages we would obviously have to make a script to help us
reexport the functions and make documentation containing links to the
real man page. This might be doable, but one big downside is that we
then don't use this occasion to move package dependencies from spatstat
to the relevant spatstat.xxxx. If the packages don't fail I'm afraid
that a lot of maintainers wont change anything, and their package will
depend on the entire ensemble of spatstat packages rather than just the
relevant sub-package(s). For our usual end users this would also mean
that when they open the help file of given function after attaching
spatstat it will just contain a huge list of links to the real help
file they are looking for which is a nuisance.

Unless we get other really good suggestions we will wait a bit more on
a reply from CRAN (we sent a gentle reminder a week ago) and hopefully
learn what we should do differently to get the last bit in place.

Best regards,
Ege


On Thu, 2021-03-11 at 14:56 -0500, Duncan Murdoch wrote:
> It may be too late to do this now, but you could use the approach
> that 
> devtools used when it was broken up:  The main package imports
> functions 
> from the new spatstat.xxxx packages and exports them.  This way it
> could 
> be done with no breaking changes.  Reverse dependencies could change
> to 
> depend on spatstat.xxxx at their leisure.
> 
> Duncan Murdoch
> 
> On 11/03/2021 10:18 a.m., Ege Rubak wrote:
> > Dear all,
> > 
> > I'm seeking advice on how to submit a new package version with
> > breaking
> > changes to CRAN. I will try to make this short:
> > 
> > 1. spatstat (<= 1.65) had grow to be very large with extensive
> > examples, tests, and documentation.
> > 2. CRAN asked us to reduce package size and check time.
> > 3. We reorganized the package into a new umbrella package spatstat
> > 2.0
> > which Depends/Imports several subpackages named spatstat.xxxx.
> > 4. All subpackages are now on CRAN.
> > 5. We submitted spatstat 2.0-1 which breaks 79 reverse dependencies
> > because they e.g. call functions that have been moved from spatstat
> > to
> > spatstat.xxxx.
> > 6. All maintainers have been warned over a period of months and
> > offered
> > detailed help to adjust their package. Many have reported back that
> > they have a new version ready that will work with spatstat (>=2.0)
> > and
> > are waiting to submit until it is on CRAN.
> > 7. We received notification on 23 Feburary that "package
> > spatstat_2.0-
> > 1.tar.gz has been auto-processed. The auto-check found problems
> > when
> > checking the first order strong reverse dependencies.
> > Please reply-all and explain: Is this expected or do you need to
> > fix
> > anything in your package? If expected, have all maintainers of
> > affected
> > packages been informed well in advance? Are there false positives
> > in
> > our results?"
> > 8. We replied to all on the same day, 23 Feb, that this was
> > expected
> > and maintainers had been informed. Since then we have no news.
> > 
> > Any advice on how to cross the finish line and get spatstat 2.0-1
> > on
> > CRAN without putting too big a burden on the CRAN volunteers?
> > 
> > I can only come up with a long shot:
> > 
> > Ask package maintainers to submit their spatstat 2.0 compatible
> > package
> > to CRAN with an additional line in DESCRIPTION:
> > 
> > Additional_repositories: https://spatstat.r-universe.dev
> > 
> > Since spatstat 2.0-1 is available from this repository they may
> > pass
> > the incoming checks on CRAN, but my hopes are not too high.
> > 
> > If this was successful the reverse dependencies would be compatible
> > with spatstat 2.0 and on CRAN and so spatstat 2.0 would break
> > nothing
> > and we could resubmit.
> > 
> > Best regards,
> > Ege
> > 
> > 

From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar 12 15:46:20 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 12 Mar 2021 09:46:20 -0500
Subject: [R-pkg-devel] Submitting breaking changes to CRAN
In-Reply-To: <a5695e6d9cb190ce77242a4a25e661f09613fec5.camel@math.aau.dk>
References: <960a68cfd12df0b7ff8043f0792b8214c625e771.camel@math.aau.dk>
 <f68b25ad-5c4d-ea61-6470-176af7c7b735@gmail.com>
 <a5695e6d9cb190ce77242a4a25e661f09613fec5.camel@math.aau.dk>
Message-ID: <0448216e-260f-46df-e44f-c12f757d1c38@gmail.com>

One part of your first message that I don't understand is the reluctance 
of downstream package writers to update to the spatstat.xxxx versions.

You said "Many have reported back that they have a new version ready 
that will work with spatstat (>=2.0) and are waiting to submit until it 
is on CRAN."

Why wouldn't those new versions work already?  I'm guessing there is 
some incompatibility between the new spatstat.xxxx packages and the old 
spatstat 1.65 from before the split.  Can you describe what it is? 
Maybe there's a way to make the new packages compatible with the old 
one, so there would be no excuse for the downstream packages not to 
update right away.

Duncan Murdoch


On 11/03/2021 7:39 p.m., Ege Rubak wrote:
> Dear Duncan,
> 
> Thanks for taking the time to read my message and for the constructive
> idea. You are right that it is a bit late for us to do this now. Given
> that spatstat (<=1.65) exports >2,500 objects which are now spread
> across sub-packages we would obviously have to make a script to help us
> reexport the functions and make documentation containing links to the
> real man page. This might be doable, but one big downside is that we
> then don't use this occasion to move package dependencies from spatstat
> to the relevant spatstat.xxxx. If the packages don't fail I'm afraid
> that a lot of maintainers wont change anything, and their package will
> depend on the entire ensemble of spatstat packages rather than just the
> relevant sub-package(s). For our usual end users this would also mean
> that when they open the help file of given function after attaching
> spatstat it will just contain a huge list of links to the real help
> file they are looking for which is a nuisance.
> 
> Unless we get other really good suggestions we will wait a bit more on
> a reply from CRAN (we sent a gentle reminder a week ago) and hopefully
> learn what we should do differently to get the last bit in place.
> 
> Best regards,
> Ege
> 
> 
> On Thu, 2021-03-11 at 14:56 -0500, Duncan Murdoch wrote:
>> It may be too late to do this now, but you could use the approach
>> that
>> devtools used when it was broken up:  The main package imports
>> functions
>> from the new spatstat.xxxx packages and exports them.  This way it
>> could
>> be done with no breaking changes.  Reverse dependencies could change
>> to
>> depend on spatstat.xxxx at their leisure.
>>
>> Duncan Murdoch
>>
>> On 11/03/2021 10:18 a.m., Ege Rubak wrote:
>>> Dear all,
>>>
>>> I'm seeking advice on how to submit a new package version with
>>> breaking
>>> changes to CRAN. I will try to make this short:
>>>
>>> 1. spatstat (<= 1.65) had grow to be very large with extensive
>>> examples, tests, and documentation.
>>> 2. CRAN asked us to reduce package size and check time.
>>> 3. We reorganized the package into a new umbrella package spatstat
>>> 2.0
>>> which Depends/Imports several subpackages named spatstat.xxxx.
>>> 4. All subpackages are now on CRAN.
>>> 5. We submitted spatstat 2.0-1 which breaks 79 reverse dependencies
>>> because they e.g. call functions that have been moved from spatstat
>>> to
>>> spatstat.xxxx.
>>> 6. All maintainers have been warned over a period of months and
>>> offered
>>> detailed help to adjust their package. Many have reported back that
>>> they have a new version ready that will work with spatstat (>=2.0)
>>> and
>>> are waiting to submit until it is on CRAN.
>>> 7. We received notification on 23 Feburary that "package
>>> spatstat_2.0-
>>> 1.tar.gz has been auto-processed. The auto-check found problems
>>> when
>>> checking the first order strong reverse dependencies.
>>> Please reply-all and explain: Is this expected or do you need to
>>> fix
>>> anything in your package? If expected, have all maintainers of
>>> affected
>>> packages been informed well in advance? Are there false positives
>>> in
>>> our results?"
>>> 8. We replied to all on the same day, 23 Feb, that this was
>>> expected
>>> and maintainers had been informed. Since then we have no news.
>>>
>>> Any advice on how to cross the finish line and get spatstat 2.0-1
>>> on
>>> CRAN without putting too big a burden on the CRAN volunteers?
>>>
>>> I can only come up with a long shot:
>>>
>>> Ask package maintainers to submit their spatstat 2.0 compatible
>>> package
>>> to CRAN with an additional line in DESCRIPTION:
>>>
>>> Additional_repositories: https://spatstat.r-universe.dev
>>>
>>> Since spatstat 2.0-1 is available from this repository they may
>>> pass
>>> the incoming checks on CRAN, but my hopes are not too high.
>>>
>>> If this was successful the reverse dependencies would be compatible
>>> with spatstat 2.0 and on CRAN and so spatstat 2.0 would break
>>> nothing
>>> and we could resubmit.
>>>
>>> Best regards,
>>> Ege
>>>
>>>


From @r|e|92@nd @end|ng |rom gm@||@com  Fri Mar 12 21:11:44 2021
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Fri, 12 Mar 2021 15:11:44 -0500
Subject: [R-pkg-devel] Checking compiled code ... WARNING
Message-ID: <CALcKxsrLp-nXFZ5ZpWrMREWOfCjEPBbgZohRsPW=zJakn2XmRA@mail.gmail.com>

Dear all,

I checked (as cran) my package PartialNetwork
<https://github.com/ahoundetoungan/PartialNetwork> and I got this warning.

* checking compiled code ... WARNING
File ?PartialNetwork/libs/PartialNetwork.so?:
    Found ?__assert_fail?, possibly from ?assert? (C)
Object: ?RcppExports.o?

Compiled code should not call entry points which might terminate R nor
write to stdout/stderr instead of to the console, nor use Fortran I/O
nor system RNGs.

I am wondering if this is because I used Rprintf (line 147 in this file
<https://github.com/ahoundetoungan/PartialNetwork/blob/master/src/mcmcSARpl.cpp>)
and prgcpp.increment() (line 184 in this file
<https://github.com/ahoundetoungan/PartialNetwork/blob/master/src/mcmcSARpl.cpp>
) to show the progression of the program from C++ functions.
If this is the source of this  warning, how can I print from C++ functions
in the console? I thought that Rprintf and prgcpp.increment() are the best
ways to do it. I know that using cout and endl causes this warning but I do
not use them.

Thank you!

*-------------------------------------*

*Aristide Elys?e HOUNDETOUNGAN*
*Ph.D. Candidate in Economics at Universit? Laval*
*Personal website : *www.ahoundetoungan.com

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Fri Mar 12 23:23:05 2021
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 12 Mar 2021 23:23:05 +0100
Subject: [R-pkg-devel] Checking compiled code ... WARNING
In-Reply-To: <CALcKxsrLp-nXFZ5ZpWrMREWOfCjEPBbgZohRsPW=zJakn2XmRA@mail.gmail.com>
References: <CALcKxsrLp-nXFZ5ZpWrMREWOfCjEPBbgZohRsPW=zJakn2XmRA@mail.gmail.com>
Message-ID: <CALEXWq3kJGRGNLwTJ9Zzos+fu=TeJXN3EgH-kPE_BJfavzfDAQ@mail.gmail.com>

Now with the list in CC, apologies.

On Fri, 12 Mar 2021 at 21:12, Elys?e Aristide <ariel92and at gmail.com> wrote:
>
> Dear all,
>
> I checked (as cran) my package PartialNetwork
> <https://github.com/ahoundetoungan/PartialNetwork> and I got this warning.
>
> * checking compiled code ... WARNING
> File ?PartialNetwork/libs/PartialNetwork.so?:
>     Found ?__assert_fail?, possibly from ?assert? (C)
> Object: ?RcppExports.o?

I cannot reproduce this. So this is most probably a local artifact
product of some local flag. E.g., _GLIBCXX_ASSERTIONS, which is set by
default in Fedora, is known to cause this kind of warning. Therefore
it is probably safe to send your package to CRAN.

To be sure, my suggestion is to use the rhub service to check your
package [1]. Settings there will probably be quite similar to CRAN.
And winbuilder, of course [2].

On the other hand, I see that your package takes *forever* to check.
That *is* a problem for a CRAN submission. You should try to
drastically reduce checking time, possibly skipping non-essential
tests and examples on CRAN.

[1] https://cran.r-project.org/web/packages/rhub/index.html
[2] https://win-builder.r-project.org/

-- 
I?aki ?car


From rub@k @end|ng |rom m@th@@@u@dk  Mon Mar 15 15:49:12 2021
From: rub@k @end|ng |rom m@th@@@u@dk (Ege Rubak)
Date: Mon, 15 Mar 2021 14:49:12 +0000
Subject: [R-pkg-devel] Submitting breaking changes to CRAN
In-Reply-To: <0448216e-260f-46df-e44f-c12f757d1c38@gmail.com>
References: <960a68cfd12df0b7ff8043f0792b8214c625e771.camel@math.aau.dk>
 <f68b25ad-5c4d-ea61-6470-176af7c7b735@gmail.com>
 <a5695e6d9cb190ce77242a4a25e661f09613fec5.camel@math.aau.dk>
 <0448216e-260f-46df-e44f-c12f757d1c38@gmail.com>
Message-ID: <2cc23ef0c36797f1ad8c7fb8e47bba1d7d79e077.camel@math.aau.dk>

Dear Duncan,

Thanks for spending time on this. You are right that there were some
incompatibility issues for people with old spatstat installed along
side spatstat.xxxx, and we might have been fix some of that, but it was
not completely clear to us. However, the problem is now solved as
spatstat 2.0-1 is on CRAN thanks to Uwe and the rest of the team. The
waiting time was explained by the fact that CRAN tackles packages with
many broken reverse dependencies separately and they had recently
worked on another case.

Best,
Ege


On Fri, 2021-03-12 at 09:46 -0500, Duncan Murdoch wrote:
> One part of your first message that I don't understand is the
> reluctance 
> of downstream package writers to update to the spatstat.xxxx
> versions.
> 
> You said "Many have reported back that they have a new version ready 
> that will work with spatstat (>=2.0) and are waiting to submit until
> it 
> is on CRAN."
> 
> Why wouldn't those new versions work already?  I'm guessing there is 
> some incompatibility between the new spatstat.xxxx packages and the
> old 
> spatstat 1.65 from before the split.  Can you describe what it is? 
> Maybe there's a way to make the new packages compatible with the old 
> one, so there would be no excuse for the downstream packages not to 
> update right away.
> 
> Duncan Murdoch
> 
> 
> On 11/03/2021 7:39 p.m., Ege Rubak wrote:
> > Dear Duncan,
> > 
> > Thanks for taking the time to read my message and for the
> > constructive
> > idea. You are right that it is a bit late for us to do this now.
> > Given
> > that spatstat (<=1.65) exports >2,500 objects which are now spread
> > across sub-packages we would obviously have to make a script to
> > help us
> > reexport the functions and make documentation containing links to
> > the
> > real man page. This might be doable, but one big downside is that
> > we
> > then don't use this occasion to move package dependencies from
> > spatstat
> > to the relevant spatstat.xxxx. If the packages don't fail I'm
> > afraid
> > that a lot of maintainers wont change anything, and their package
> > will
> > depend on the entire ensemble of spatstat packages rather than just
> > the
> > relevant sub-package(s). For our usual end users this would also
> > mean
> > that when they open the help file of given function after attaching
> > spatstat it will just contain a huge list of links to the real help
> > file they are looking for which is a nuisance.
> > 
> > Unless we get other really good suggestions we will wait a bit more
> > on
> > a reply from CRAN (we sent a gentle reminder a week ago) and
> > hopefully
> > learn what we should do differently to get the last bit in place.
> > 
> > Best regards,
> > Ege
> > 
> > 
> > On Thu, 2021-03-11 at 14:56 -0500, Duncan Murdoch wrote:
> > > It may be too late to do this now, but you could use the approach
> > > that
> > > devtools used when it was broken up:  The main package imports
> > > functions
> > > from the new spatstat.xxxx packages and exports them.  This way
> > > it
> > > could
> > > be done with no breaking changes.  Reverse dependencies could
> > > change
> > > to
> > > depend on spatstat.xxxx at their leisure.
> > > 
> > > Duncan Murdoch
> > > 
> > > On 11/03/2021 10:18 a.m., Ege Rubak wrote:
> > > > Dear all,
> > > > 
> > > > I'm seeking advice on how to submit a new package version with
> > > > breaking
> > > > changes to CRAN. I will try to make this short:
> > > > 
> > > > 1. spatstat (<= 1.65) had grow to be very large with extensive
> > > > examples, tests, and documentation.
> > > > 2. CRAN asked us to reduce package size and check time.
> > > > 3. We reorganized the package into a new umbrella package
> > > > spatstat
> > > > 2.0
> > > > which Depends/Imports several subpackages named spatstat.xxxx.
> > > > 4. All subpackages are now on CRAN.
> > > > 5. We submitted spatstat 2.0-1 which breaks 79 reverse
> > > > dependencies
> > > > because they e.g. call functions that have been moved from
> > > > spatstat
> > > > to
> > > > spatstat.xxxx.
> > > > 6. All maintainers have been warned over a period of months and
> > > > offered
> > > > detailed help to adjust their package. Many have reported back
> > > > that
> > > > they have a new version ready that will work with spatstat
> > > > (>=2.0)
> > > > and
> > > > are waiting to submit until it is on CRAN.
> > > > 7. We received notification on 23 Feburary that "package
> > > > spatstat_2.0-
> > > > 1.tar.gz has been auto-processed. The auto-check found problems
> > > > when
> > > > checking the first order strong reverse dependencies.
> > > > Please reply-all and explain: Is this expected or do you need
> > > > to
> > > > fix
> > > > anything in your package? If expected, have all maintainers of
> > > > affected
> > > > packages been informed well in advance? Are there false
> > > > positives
> > > > in
> > > > our results?"
> > > > 8. We replied to all on the same day, 23 Feb, that this was
> > > > expected
> > > > and maintainers had been informed. Since then we have no news.
> > > > 
> > > > Any advice on how to cross the finish line and get spatstat
> > > > 2.0-1
> > > > on
> > > > CRAN without putting too big a burden on the CRAN volunteers?
> > > > 
> > > > I can only come up with a long shot:
> > > > 
> > > > Ask package maintainers to submit their spatstat 2.0 compatible
> > > > package
> > > > to CRAN with an additional line in DESCRIPTION:
> > > > 
> > > > Additional_repositories: https://spatstat.r-universe.dev
> > > > 
> > > > Since spatstat 2.0-1 is available from this repository they may
> > > > pass
> > > > the incoming checks on CRAN, but my hopes are not too high.
> > > > 
> > > > If this was successful the reverse dependencies would be
> > > > compatible
> > > > with spatstat 2.0 and on CRAN and so spatstat 2.0 would break
> > > > nothing
> > > > and we could resubmit.
> > > > 
> > > > Best regards,
> > > > Ege
> > > > 
> > > > 

From chr|@ho|d @end|ng |rom p@yctc@org  Tue Mar 16 10:58:23 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Tue, 16 Mar 2021 09:58:23 +0000 (GMT)
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
Message-ID: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>

I would be very grateful of help as I seem to be making very heavy weather of all the intricacies of creating a 
robust R package that might be useful (mainly to R newbies/lusers of even lower R/programming skills than mine). 

I am making a lot of progress and am awed by the work so many have put in to make things possible: huge gratitude 
to too many to name. However, I seem to be hitting a wall on adding CI to my package. 

1) I am sure that linting my package will help me but there are some defaults in lintr/superlinter that I am want
to take a personal stand and not use: allowing myself not always to use perfect camelCase because I think it will
confuse my end users and the line length limit which at the default of 80 seems to me, on a modern set up, to make
my code far less readable than if I allow some long lines. My problem is that I am failing to work out how to override
the defaults. I thought that putting in /TEMPLATES/.lintr in my package directory and having it contain:

# linters: with_defaults(object_usage_linter = NULL)
linters: with_defaults(
  line_length_linter(120),
  cyclocomp_linter(25),
  object_name_linter = NULL
  )
would override the defaults (I'm working on the cyclocomp complaint!)  Can anyone, perhaps looking at my 
https://github.com/cpsyctc/CECPfuns/ package, tell me what I'm doing wrong and how to get it right?!

2) I work on a machine running Ubuntu 20.04 in Rstudio and everything checks and tests fine there but I wanted
to use the github actions to check the package out on Windows and Mac and, rather more by luck I think than really
understanding how I got there, I seem to have achieved that.  Rather bizarrely, the code (it's only R source)
passes on Windows and Mac but fails in the Ubuntu test systems with errors like:

?? R CMD build ?????????????????????????????????????????????????????????????????
* checking for file ?.../DESCRIPTION? ... OK
* preparing ?CECPfuns?:
* checking DESCRIPTION meta-information ... OK
* installing the package to process help pages
      -----------------------------------
* installing *source* package ?CECPfuns? ...
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
Error in dyn.load(file, DLLpath = DLLpath, ...) : 
  unable to load shared object '/home/runner/work/_temp/Library/stringi/libs/stringi.so':
  libicui18n.so.55: cannot open shared object file: No such file or directory
Calls: <Anonymous> ... namespaceImport -> loadNamespace -> library.dynam -> dyn.load
Execution halted
ERROR: lazy loading failed for package ?CECPfuns?

I _think_ these are just changes in the stirngi package that seem to failing on the test machine
and OK on my machine. That made me think that I can see a lot of logic in my checking things on
the various default versions of R in Ubuntu 16.04, Windows and MacOS but perhaps it is unnecessary
and wasting resources to check the release version of R on Ubuntu 20.04 as it seems safe enough to
assume that the package built on my local machine in the release version of R and on Ubuntu 20.04
that fails like this will only be transient (or that successes on my machine will only be ... but
at least I'll see them and not waste github resources!)

The catch is that I am baffled by how to configure github actions to change the lint defaults and
to change the selection of releases and platforms.  I think that may because I may have created
a mess in my github actions workflows.

Would anyone be willing to help or even to look at it and point me to the explanations I am failing
to find?! 

TIA,

Chris

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 16 11:48:50 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 16 Mar 2021 06:48:50 -0400
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
In-Reply-To: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
References: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
Message-ID: <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>

On 16/03/2021 5:58 a.m., Chris Evans wrote:
> I would be very grateful of help as I seem to be making very heavy weather of all the intricacies of creating a
> robust R package that might be useful (mainly to R newbies/lusers of even lower R/programming skills than mine).
> 
> I am making a lot of progress and am awed by the work so many have put in to make things possible: huge gratitude
> to too many to name. However, I seem to be hitting a wall on adding CI to my package.
> 
> 1) I am sure that linting my package will help me but there are some defaults in lintr/superlinter that I am want
> to take a personal stand and not use: allowing myself not always to use perfect camelCase because I think it will
> confuse my end users and the line length limit which at the default of 80 seems to me, on a modern set up, to make
> my code far less readable than if I allow some long lines. My problem is that I am failing to work out how to override
> the defaults. I thought that putting in /TEMPLATES/.lintr in my package directory and having it contain:
> 
> # linters: with_defaults(object_usage_linter = NULL)
> linters: with_defaults(
>    line_length_linter(120),
>    cyclocomp_linter(25),
>    object_name_linter = NULL
>    )
> would override the defaults (I'm working on the cyclocomp complaint!)  Can anyone, perhaps looking at my
> https://github.com/cpsyctc/CECPfuns/ package, tell me what I'm doing wrong and how to get it right?!


I use lintr, and put my .lintr file in the main directory of the package.


> 
> 2) I work on a machine running Ubuntu 20.04 in Rstudio and everything checks and tests fine there but I wanted
> to use the github actions to check the package out on Windows and Mac and, rather more by luck I think than really
> understanding how I got there, I seem to have achieved that.  Rather bizarrely, the code (it's only R source)
> passes on Windows and Mac but fails in the Ubuntu test systems with errors like:
> 
> ?? R CMD build ?????????????????????????????????????????????????????????????????
> * checking for file ?.../DESCRIPTION? ... OK
> * preparing ?CECPfuns?:
> * checking DESCRIPTION meta-information ... OK
> * installing the package to process help pages
>        -----------------------------------
> * installing *source* package ?CECPfuns? ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>    unable to load shared object '/home/runner/work/_temp/Library/stringi/libs/stringi.so':
>    libicui18n.so.55: cannot open shared object file: No such file or directory
> Calls: <Anonymous> ... namespaceImport -> loadNamespace -> library.dynam -> dyn.load
> Execution halted
> ERROR: lazy loading failed for package ?CECPfuns?
> 
> I _think_ these are just changes in the stirngi package that seem to failing on the test machine
> and OK on my machine. That made me think that I can see a lot of logic in my checking things on
> the various default versions of R in Ubuntu 16.04, Windows and MacOS but perhaps it is unnecessary
> and wasting resources to check the release version of R on Ubuntu 20.04 as it seems safe enough to
> assume that the package built on my local machine in the release version of R and on Ubuntu 20.04
> that fails like this will only be transient (or that successes on my machine will only be ... but
> at least I'll see them and not waste github resources!)
> 
> The catch is that I am baffled by how to configure github actions to change the lint defaults and
> to change the selection of releases and platforms.  I think that may because I may have created
> a mess in my github actions workflows.
> 
> Would anyone be willing to help or even to look at it and point me to the explanations I am failing
> to find?!

You have 5 workflows, and their current content doesn't appear to match 
the results on your actions page.  Pick one, run it, and I'll see if I 
can spot the reason for a failure.

Duncan Murdoch


From edd @end|ng |rom deb|@n@org  Tue Mar 16 13:45:44 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 16 Mar 2021 07:45:44 -0500
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
In-Reply-To: <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
References: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
 <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
Message-ID: <24656.43128.850378.63967@rob.eddelbuettel.com>


On 16 March 2021 at 06:48, Duncan Murdoch wrote:
| On 16/03/2021 5:58 a.m., Chris Evans wrote:
| You have 5 workflows, and their current content doesn't appear to match 
| the results on your actions page.  Pick one, run it, and I'll see if I 
| can spot the reason for a failure.

More granularly, one of these five workflow spawns nine builds of which the
ones with older R version (3.3, 3.4, 3.5) fail as seen eg for run #3:

https://github.com/cpsyctc/CECPfuns/actions/runs/657501549

Maybe you want to comment out runs for R versions that old, or debug why they
fail. The error shown in R 3.5 (a version soon three years out of date you
are not obliged to care for: CRAN uses only current, previous and next
release) is not something I have seen before:

  ?? R CMD build ?????????????????????????????????????????????????????????????????
  * checking for file ?.../DESCRIPTION? ... OK
  * preparing ?CECPfuns?:
  * checking DESCRIPTION meta-information ... OK
  Error in parse_Rd("/tmp/RtmpydYbB0/Rbuild4d3e1cce5e37/CECPfuns/man/getCSC.Rd",  : 
    Value of SET_STRING_ELT() must be a 'CHARSXP' not a 'NULL'
  Execution halted
  Error: Error in proc$get_built_file() : Build process failed
  Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
  Execution halted
  Error: Process completed with exit code 1.

Here proce$get_built_file points to `pkgbuild` which is part of a non-CRAN
toolchain.  So this may not be caused by your package -- I can't tell. My
preference is to keep it simpler: I usually get by with one workflow and
generally at most two builds.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From chr|@ho|d @end|ng |rom p@yctc@org  Tue Mar 16 14:04:49 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Tue, 16 Mar 2021 13:04:49 +0000 (GMT)
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
In-Reply-To: <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
References: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
 <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
Message-ID: <211433519.9011739.1615899889493.JavaMail.zimbra@psyctc.org>

Hugely appreciated Duncan.

----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Chris Evans" <chrishold at psyctc.org>, "r-package-devel" <r-package-devel at r-project.org>
> Sent: Tuesday, 16 March, 2021 10:48:50
> Subject: Re: [R-pkg-devel] Two (newbie/luser) questions about adding CI to github hosted package

> On 16/03/2021 5:58 a.m., Chris Evans wrote:
>> I would be very grateful of help as I seem to be making very heavy weather of
>> all the intricacies of creating a
>> robust R package that might be useful (mainly to R newbies/lusers of even lower
>> R/programming skills than mine).
>> 
>> I am making a lot of progress and am awed by the work so many have put in to
>> make things possible: huge gratitude
>> to too many to name. However, I seem to be hitting a wall on adding CI to my
>> package.
>> 
>> 1) I am sure that linting my package will help me but there are some defaults in
>> lintr/superlinter that I am want
>> to take a personal stand and not use: allowing myself not always to use perfect
>> camelCase because I think it will
>> confuse my end users and the line length limit which at the default of 80 seems
>> to me, on a modern set up, to make
>> my code far less readable than if I allow some long lines. My problem is that I
>> am failing to work out how to override
>> the defaults. I thought that putting in /TEMPLATES/.lintr in my package
>> directory and having it contain:
>> 
>> # linters: with_defaults(object_usage_linter = NULL)
>> linters: with_defaults(
>>    line_length_linter(120),
>>    cyclocomp_linter(25),
>>    object_name_linter = NULL
>>    )
>> would override the defaults (I'm working on the cyclocomp complaint!)  Can
>> anyone, perhaps looking at my
>> https://github.com/cpsyctc/CECPfuns/ package, tell me what I'm doing wrong and
>> how to get it right?!
> 
> 
> I use lintr, and put my .lintr file in the main directory of the package.

OK.  I have removed the TEMPLATES directory and moved .lintr to the package root.

I think I am better keeping lintr local and having moved .lintr using

lintr::lint_package()

locally is working fine, flagging up cosmetics I can see are all improvements so I
can sort those out without wasting github power.  Which takes to the next stage ...

> 
> 
>> 
>> 2) I work on a machine running Ubuntu 20.04 in Rstudio and everything checks and
>> tests fine there but I wanted
>> to use the github actions to check the package out on Windows and Mac and,
>> rather more by luck I think than really
>> understanding how I got there, I seem to have achieved that.  Rather bizarrely,
>> the code (it's only R source)
>> passes on Windows and Mac but fails in the Ubuntu test systems with errors like:
>> 
>> ?? R CMD build ?????????????????????????????????????????????????????????????????
>> * checking for file ?.../DESCRIPTION? ... OK
>> * preparing ?CECPfuns?:
>> * checking DESCRIPTION meta-information ... OK
>> * installing the package to process help pages
>>        -----------------------------------
>> * installing *source* package ?CECPfuns? ...
>> ** using staged installation
>> ** R
>> ** inst
>> ** byte-compile and prepare package for lazy loading
>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>    unable to load shared object
>>    '/home/runner/work/_temp/Library/stringi/libs/stringi.so':
>>    libicui18n.so.55: cannot open shared object file: No such file or directory
>> Calls: <Anonymous> ... namespaceImport -> loadNamespace -> library.dynam ->
>> dyn.load
>> Execution halted
>> ERROR: lazy loading failed for package ?CECPfuns?
>> 
>> I _think_ these are just changes in the stirngi package that seem to failing on
>> the test machine
>> and OK on my machine. That made me think that I can see a lot of logic in my
>> checking things on
>> the various default versions of R in Ubuntu 16.04, Windows and MacOS but perhaps
>> it is unnecessary
>> and wasting resources to check the release version of R on Ubuntu 20.04 as it
>> seems safe enough to
>> assume that the package built on my local machine in the release version of R
>> and on Ubuntu 20.04
>> that fails like this will only be transient (or that successes on my machine
>> will only be ... but
>> at least I'll see them and not waste github resources!)
>> 
>> The catch is that I am baffled by how to configure github actions to change the
>> lint defaults and
>> to change the selection of releases and platforms.  I think that may because I
>> may have created
>> a mess in my github actions workflows.
>> 
>> Would anyone be willing to help or even to look at it and point me to the
>> explanations I am failing
>> to find?!
> 
> You have 5 workflows, and their current content doesn't appear to match
> the results on your actions page.  Pick one, run it, and I'll see if I
> can spot the reason for a failure.

That is so appreciated Duncan. One stupid question: is there a way to run a
workflow other than by making an upload/push (or a pull request)?  

I think I have discovered that the workflows are controlled by the yaml files
in .github/workflows so I have deleted all except R-CMD-check.yaml and I think
that when I now commit and push this that should delete the other workflows 
on github and trigger this one to run.  If you could look at that one then
that would be hugely appreciated.  I see it says:

    strategy:
      fail-fast: false
      matrix:
        config:
          - {os: macOS-latest,   r: 'release'}
          - {os: windows-latest, r: 'release'}
          - {os: windows-latest, r: '3.6'}
          - {os: ubuntu-18.04,   r: 'devel', rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest", http-user-agent: "R/4.0.0 (ubuntu-18.04) R (4.0.0 x86_64-pc-linux-gnu x86_64 linux-gnu) on GitHub Actions" }
          - {os: ubuntu-18.04,   r: 'release', rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
          - {os: ubuntu-18.04,   r: 'oldrel',  rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
          - {os: ubuntu-18.04,   r: '3.5',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
          - {os: ubuntu-18.04,   r: '3.4',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
          - {os: ubuntu-18.04,   r: '3.3',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}


Some questions as I, I think, make some progress:

1) Why is windows-latest pointing at 3.6?  I am on 4.0.4 locally for windows.  I assume this is because I have copied or pulled in
a template that is out of date.  Can I just replace that '3.6' with 'release'

2) My guts say that at this point it is sensible for me to test against devel, release and oldrel but that after the next
release I could stop testing against oldrel?  Is that sensible?

3) I see tests against 3.3, 3.4 and 3.5 there for ubuntu 18.04 and no 20.04.  Am I correct that I could replace the above
with this:

    strategy:
      fail-fast: false
      matrix:
        config:
          - {os: macOS-latest,   r: 'release'}
          - {os: windows-latest, r: 'release'}
          - {os: windows-latest, r: 'release'}
          - {os: ubuntu-18.04,   r: 'devel', rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest", http-user-agent: "R/4.0.0 (ubuntu-18.04) R (4.0.0 x86_64-pc-linux-gnu x86_64 linux-gnu) on GitHub Actions" }
          - {os: ubuntu-18.04,   r: 'release', rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
          - {os: ubuntu-18.04,   r: 'oldrel',  rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
          - {os: ubuntu-20.04,   r: 'devel',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}
          - {os: ubuntu-20.04,   r: 'release',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}
          - {os: ubuntu-20.04,   r: 'oldrel',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}

[I have changed the windows '3.6' to 'release' and the last three ubuntu calls to 20.04 and the R versions to 'devel', 'release'
 and 'oldrel' and the repositories to point at xenial not bionic.  I have only done this here in the Email, not on disc!]

It would be nice to check all that occasionally but I am sure that at the frequency I'm pushing up new functions and tweaks,
so my colleagues can check things, I am putting far too much work on github with all those.  Could I just check windows
and macOS release and devel by commenting out lines there.  Or is it better to have different yaml files and just to put
the one you want in .github/workflows for each particular push?  No great difference?

OK.  I have pushed these changes with the commit comment "More work to get continuous integration testing ..." and the
actions seem to be running and I seem to have succeeded in pruning things down to that one action.

Wonderful if you can find the time to have a look at these questions and the run ... now I'm off to the dentist.
Hm: dentist ... bad day with R ... dentist ... OK, I'll take bad day with R any day!

Thanks (and to all),

Chris

> 
> Duncan Murdoch

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From chr|@ho|d @end|ng |rom p@yctc@org  Tue Mar 16 14:06:54 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Tue, 16 Mar 2021 13:06:54 +0000 (GMT)
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
In-Reply-To: <24656.43128.850378.63967@rob.eddelbuettel.com>
References: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
 <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
 <24656.43128.850378.63967@rob.eddelbuettel.com>
Message-ID: <430670312.9014833.1615900014712.JavaMail.zimbra@psyctc.org>

Brilliant and so obviously correct.  As per response a minute ago to Dirk's 
help, I agree completely and have started moves that look to be in line with
that Dirk.

Apologies for my newbie/luser missteps and huge thanks to you both for your 
inputs.  I'm awed to have had this.

Chris

----- Original Message -----
> From: "Dirk Eddelbuettel" <edd at debian.org>
> To: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> Cc: "Chris Evans" <chrishold at psyctc.org>, "r-package-devel" <r-package-devel at r-project.org>
> Sent: Tuesday, 16 March, 2021 12:45:44
> Subject: Re: [R-pkg-devel] Two (newbie/luser) questions about adding CI to github hosted package

> On 16 March 2021 at 06:48, Duncan Murdoch wrote:
>| On 16/03/2021 5:58 a.m., Chris Evans wrote:
>| You have 5 workflows, and their current content doesn't appear to match
>| the results on your actions page.  Pick one, run it, and I'll see if I
>| can spot the reason for a failure.
> 
> More granularly, one of these five workflow spawns nine builds of which the
> ones with older R version (3.3, 3.4, 3.5) fail as seen eg for run #3:
> 
> https://github.com/cpsyctc/CECPfuns/actions/runs/657501549
> 
> Maybe you want to comment out runs for R versions that old, or debug why they
> fail. The error shown in R 3.5 (a version soon three years out of date you
> are not obliged to care for: CRAN uses only current, previous and next
> release) is not something I have seen before:
> 
>  ?? R CMD build ?????????????????????????????????????????????????????????????????
>  * checking for file ?.../DESCRIPTION? ... OK
>  * preparing ?CECPfuns?:
>  * checking DESCRIPTION meta-information ... OK
>  Error in parse_Rd("/tmp/RtmpydYbB0/Rbuild4d3e1cce5e37/CECPfuns/man/getCSC.Rd",
>  :
>    Value of SET_STRING_ELT() must be a 'CHARSXP' not a 'NULL'
>  Execution halted
>  Error: Error in proc$get_built_file() : Build process failed
>  Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
>  Execution halted
>  Error: Process completed with exit code 1.
> 
> Here proce$get_built_file points to `pkgbuild` which is part of a non-CRAN
> toolchain.  So this may not be caused by your package -- I can't tell. My
> preference is to keep it simpler: I usually get by with one workflow and
> generally at most two builds.
> 
> Dirk
> 
> --
> https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From @me @end|ng |rom |y@|k@com  Tue Mar 16 14:22:53 2021
From: @me @end|ng |rom |y@|k@com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Tue, 16 Mar 2021 14:22:53 +0100
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
In-Reply-To: <211433519.9011739.1615899889493.JavaMail.zimbra@psyctc.org>
References: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
 <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
 <211433519.9011739.1615899889493.JavaMail.zimbra@psyctc.org>
Message-ID: <CAHJFP8Qgt2dz1O18oQq0wZdMxhETivuXanrpEpmZiZLusqar5Q@mail.gmail.com>

Hi everybody,

I would like to take a minute to address the language used in the initial
e-mail, notably the "newbie/luser" terminology.
It was given in both the subject (" Two (newbie/luser) questions") as well
as the body ("...  robust R package that might be useful (mainly to R
newbies/lusers of even lower R/programming skills than mine).").

Personally I find the term "luser" (as of a "loser user") very
condescending, whether it is about yourself (because you are not an
experienced programmer) or others (because you perceive them as
inexperienced programmers).
To put it short, using such a condescending term inhibits yourself and,
especially, others. Its use is simply unwarranted. Using the term about the
users of your package, regardless of their experience, is derogatory.

If you are writing to this mailing list with issues developing an
R-package, you are neither a newbie nor a loser, and we collectively will
do our best to help you. So no need in derograting yourself.

Kind regards,
Stefan

Den tir. 16. mar. 2021 kl. 14.05 skrev Chris Evans <chrishold at psyctc.org>:

> Hugely appreciated Duncan.
>
> ----- Original Message -----
> > From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> > To: "Chris Evans" <chrishold at psyctc.org>, "r-package-devel" <
> r-package-devel at r-project.org>
> > Sent: Tuesday, 16 March, 2021 10:48:50
> > Subject: Re: [R-pkg-devel] Two (newbie/luser) questions about adding CI
> to github hosted package
>
> > On 16/03/2021 5:58 a.m., Chris Evans wrote:
> >> I would be very grateful of help as I seem to be making very heavy
> weather of
> >> all the intricacies of creating a
> >> robust R package that might be useful (mainly to R newbies/lusers of
> even lower
> >> R/programming skills than mine).
> >>
> >> I am making a lot of progress and am awed by the work so many have put
> in to
> >> make things possible: huge gratitude
> >> to too many to name. However, I seem to be hitting a wall on adding CI
> to my
> >> package.
> >>
> >> 1) I am sure that linting my package will help me but there are some
> defaults in
> >> lintr/superlinter that I am want
> >> to take a personal stand and not use: allowing myself not always to use
> perfect
> >> camelCase because I think it will
> >> confuse my end users and the line length limit which at the default of
> 80 seems
> >> to me, on a modern set up, to make
> >> my code far less readable than if I allow some long lines. My problem
> is that I
> >> am failing to work out how to override
> >> the defaults. I thought that putting in /TEMPLATES/.lintr in my package
> >> directory and having it contain:
> >>
> >> # linters: with_defaults(object_usage_linter = NULL)
> >> linters: with_defaults(
> >>    line_length_linter(120),
> >>    cyclocomp_linter(25),
> >>    object_name_linter = NULL
> >>    )
> >> would override the defaults (I'm working on the cyclocomp complaint!)
> Can
> >> anyone, perhaps looking at my
> >> https://github.com/cpsyctc/CECPfuns/ package, tell me what I'm doing
> wrong and
> >> how to get it right?!
> >
> >
> > I use lintr, and put my .lintr file in the main directory of the package.
>
> OK.  I have removed the TEMPLATES directory and moved .lintr to the
> package root.
>
> I think I am better keeping lintr local and having moved .lintr using
>
> lintr::lint_package()
>
> locally is working fine, flagging up cosmetics I can see are all
> improvements so I
> can sort those out without wasting github power.  Which takes to the next
> stage ...
>
> >
> >
> >>
> >> 2) I work on a machine running Ubuntu 20.04 in Rstudio and everything
> checks and
> >> tests fine there but I wanted
> >> to use the github actions to check the package out on Windows and Mac
> and,
> >> rather more by luck I think than really
> >> understanding how I got there, I seem to have achieved that.  Rather
> bizarrely,
> >> the code (it's only R source)
> >> passes on Windows and Mac but fails in the Ubuntu test systems with
> errors like:
> >>
> >> ?? R CMD build
> ?????????????????????????????????????????????????????????????????
> >> * checking for file ?.../DESCRIPTION? ... OK
> >> * preparing ?CECPfuns?:
> >> * checking DESCRIPTION meta-information ... OK
> >> * installing the package to process help pages
> >>        -----------------------------------
> >> * installing *source* package ?CECPfuns? ...
> >> ** using staged installation
> >> ** R
> >> ** inst
> >> ** byte-compile and prepare package for lazy loading
> >> Error in dyn.load(file, DLLpath = DLLpath, ...) :
> >>    unable to load shared object
> >>    '/home/runner/work/_temp/Library/stringi/libs/stringi.so':
> >>    libicui18n.so.55: cannot open shared object file: No such file or
> directory
> >> Calls: <Anonymous> ... namespaceImport -> loadNamespace ->
> library.dynam ->
> >> dyn.load
> >> Execution halted
> >> ERROR: lazy loading failed for package ?CECPfuns?
> >>
> >> I _think_ these are just changes in the stirngi package that seem to
> failing on
> >> the test machine
> >> and OK on my machine. That made me think that I can see a lot of logic
> in my
> >> checking things on
> >> the various default versions of R in Ubuntu 16.04, Windows and MacOS
> but perhaps
> >> it is unnecessary
> >> and wasting resources to check the release version of R on Ubuntu 20.04
> as it
> >> seems safe enough to
> >> assume that the package built on my local machine in the release
> version of R
> >> and on Ubuntu 20.04
> >> that fails like this will only be transient (or that successes on my
> machine
> >> will only be ... but
> >> at least I'll see them and not waste github resources!)
> >>
> >> The catch is that I am baffled by how to configure github actions to
> change the
> >> lint defaults and
> >> to change the selection of releases and platforms.  I think that may
> because I
> >> may have created
> >> a mess in my github actions workflows.
> >>
> >> Would anyone be willing to help or even to look at it and point me to
> the
> >> explanations I am failing
> >> to find?!
> >
> > You have 5 workflows, and their current content doesn't appear to match
> > the results on your actions page.  Pick one, run it, and I'll see if I
> > can spot the reason for a failure.
>
> That is so appreciated Duncan. One stupid question: is there a way to run a
> workflow other than by making an upload/push (or a pull request)?
>
> I think I have discovered that the workflows are controlled by the yaml
> files
> in .github/workflows so I have deleted all except R-CMD-check.yaml and I
> think
> that when I now commit and push this that should delete the other
> workflows
> on github and trigger this one to run.  If you could look at that one then
> that would be hugely appreciated.  I see it says:
>
>     strategy:
>       fail-fast: false
>       matrix:
>         config:
>           - {os: macOS-latest,   r: 'release'}
>           - {os: windows-latest, r: 'release'}
>           - {os: windows-latest, r: '3.6'}
>           - {os: ubuntu-18.04,   r: 'devel', rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest",
> http-user-agent: "R/4.0.0 (ubuntu-18.04) R (4.0.0 x86_64-pc-linux-gnu
> x86_64 linux-gnu) on GitHub Actions" }
>           - {os: ubuntu-18.04,   r: 'release', rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>           - {os: ubuntu-18.04,   r: 'oldrel',  rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>           - {os: ubuntu-18.04,   r: '3.5',     rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>           - {os: ubuntu-18.04,   r: '3.4',     rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>           - {os: ubuntu-18.04,   r: '3.3',     rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>
>
> Some questions as I, I think, make some progress:
>
> 1) Why is windows-latest pointing at 3.6?  I am on 4.0.4 locally for
> windows.  I assume this is because I have copied or pulled in
> a template that is out of date.  Can I just replace that '3.6' with
> 'release'
>
> 2) My guts say that at this point it is sensible for me to test against
> devel, release and oldrel but that after the next
> release I could stop testing against oldrel?  Is that sensible?
>
> 3) I see tests against 3.3, 3.4 and 3.5 there for ubuntu 18.04 and no
> 20.04.  Am I correct that I could replace the above
> with this:
>
>     strategy:
>       fail-fast: false
>       matrix:
>         config:
>           - {os: macOS-latest,   r: 'release'}
>           - {os: windows-latest, r: 'release'}
>           - {os: windows-latest, r: 'release'}
>           - {os: ubuntu-18.04,   r: 'devel', rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest",
> http-user-agent: "R/4.0.0 (ubuntu-18.04) R (4.0.0 x86_64-pc-linux-gnu
> x86_64 linux-gnu) on GitHub Actions" }
>           - {os: ubuntu-18.04,   r: 'release', rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>           - {os: ubuntu-18.04,   r: 'oldrel',  rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>           - {os: ubuntu-20.04,   r: 'devel',     rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}
>           - {os: ubuntu-20.04,   r: 'release',     rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}
>           - {os: ubuntu-20.04,   r: 'oldrel',     rspm: "
> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}
>
> [I have changed the windows '3.6' to 'release' and the last three ubuntu
> calls to 20.04 and the R versions to 'devel', 'release'
>  and 'oldrel' and the repositories to point at xenial not bionic.  I have
> only done this here in the Email, not on disc!]
>
> It would be nice to check all that occasionally but I am sure that at the
> frequency I'm pushing up new functions and tweaks,
> so my colleagues can check things, I am putting far too much work on
> github with all those.  Could I just check windows
> and macOS release and devel by commenting out lines there.  Or is it
> better to have different yaml files and just to put
> the one you want in .github/workflows for each particular push?  No great
> difference?
>
> OK.  I have pushed these changes with the commit comment "More work to get
> continuous integration testing ..." and the
> actions seem to be running and I seem to have succeeded in pruning things
> down to that one action.
>
> Wonderful if you can find the time to have a look at these questions and
> the run ... now I'm off to the dentist.
> Hm: dentist ... bad day with R ... dentist ... OK, I'll take bad day with
> R any day!
>
> Thanks (and to all),
>
> Chris
>
> >
> > Duncan Murdoch
>
> --
> Small contribution in our coronavirus rigours:
>
> https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/
>
> Chris Evans <chris at psyctc.org> Visiting Professor, University of
> Sheffield <chris.evans at sheffield.ac.uk>
> I do some consultation work for the University of Roehampton <
> chris.evans at roehampton.ac.uk> and other places
> but <chris at psyctc.org> remains my main Email address.  I have a work web
> site at:
>    https://www.psyctc.org/psyctc/
> and a site I manage for CORE and CORE system trust at:
>    http://www.coresystemtrust.org.uk/
> I have "semigrated" to France, see:
>    https://www.psyctc.org/pelerinage2016/semigrating-to-france/
>
> https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/
>
> If you want an Emeeting, I am trying to keep them to Thursdays and my
> diary is at:
>    https://www.psyctc.org/pelerinage2016/ceworkdiary/
> Beware: French time, generally an hour ahead of UK.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Mar 16 15:58:35 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 16 Mar 2021 14:58:35 +0000
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
In-Reply-To: <24656.43128.850378.63967@rob.eddelbuettel.com>
References: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
 <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
 <24656.43128.850378.63967@rob.eddelbuettel.com>
Message-ID: <LOYP265MB2015F5862235693B91D7F206AE6B9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

>  ?? R CMD build ?????????????????????????????????????????????????????????????????
>  * checking DESCRIPTION meta-information ... OK
> Error in parse_Rd("/tmp/RtmpydYbB0/Rbuild4d3e1cce5e37/CECPfuns/man/getCSC.Rd",  : 
>   Value of SET_STRING_ELT() must be a 'CHARSXP' not a 'NULL'
> Execution halted
> Error: Error in proc$get_built_file() : Build process failed
>  Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
>  Execution halted
 > Error: Process completed with exit code 1.

The error seems to be in building the documentation. There used to be a buglet in older versions of R, 
that caused some errors in processing to cause this kind of uninformative message from low level code. 
I don't remember the R version but the time frame seems consistent. 
It may well be that some \Sexpr code is spread over more than one line, which sometimes threw errors, sometimes silently ignored the lines after the first.

Maybe it's easiest just to require R >= "more recent version.

Georgi Boshnakov


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Dirk Eddelbuettel
Sent: 16 March 2021 12:46
To: Duncan Murdoch <murdoch.duncan at gmail.com>
Cc: r-package-devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Two (newbie/luser) questions about adding CI to github hosted package


On 16 March 2021 at 06:48, Duncan Murdoch wrote:
| On 16/03/2021 5:58 a.m., Chris Evans wrote:
| You have 5 workflows, and their current content doesn't appear to 
| match the results on your actions page.  Pick one, run it, and I'll 
| see if I can spot the reason for a failure.

More granularly, one of these five workflow spawns nine builds of which the ones with older R version (3.3, 3.4, 3.5) fail as seen eg for run #3:

https://github.com/cpsyctc/CECPfuns/actions/runs/657501549

Maybe you want to comment out runs for R versions that old, or debug why they fail. The error shown in R 3.5 (a version soon three years out of date you are not obliged to care for: CRAN uses only current, previous and next
release) is not something I have seen before:

  ?? R CMD build ?????????????????????????????????????????????????????????????????
  * checking for file ?.../DESCRIPTION? ... OK
  * preparing ?CECPfuns?:
  * checking DESCRIPTION meta-information ... OK
  Error in parse_Rd("/tmp/RtmpydYbB0/Rbuild4d3e1cce5e37/CECPfuns/man/getCSC.Rd",  : 
    Value of SET_STRING_ELT() must be a 'CHARSXP' not a 'NULL'
  Execution halted
  Error: Error in proc$get_built_file() : Build process failed
  Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
  Execution halted
  Error: Process completed with exit code 1.

Here proce$get_built_file points to `pkgbuild` which is part of a non-CRAN toolchain.  So this may not be caused by your package -- I can't tell. My preference is to keep it simpler: I usually get by with one workflow and generally at most two builds.

Dirk

--
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From chr|@ho|d @end|ng |rom p@yctc@org  Tue Mar 16 16:24:23 2021
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Tue, 16 Mar 2021 15:24:23 +0000 (GMT)
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
In-Reply-To: <CAHJFP8Qgt2dz1O18oQq0wZdMxhETivuXanrpEpmZiZLusqar5Q@mail.gmail.com>
References: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
 <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
 <211433519.9011739.1615899889493.JavaMail.zimbra@psyctc.org>
 <CAHJFP8Qgt2dz1O18oQq0wZdMxhETivuXanrpEpmZiZLusqar5Q@mail.gmail.com>
Message-ID: <537600192.9359908.1615908263312.JavaMail.zimbra@psyctc.org>

Thanks. That's very kind and at some levels I know it's correct and I should not go there. I have been on the receiving end of some (mostly one) incredibly brutal public battering 
in relation to R so perhaps I am lightly scarred by that! 

> From: "Stefan McKinnon H?j-Edwards" <sme at iysik.com>
> To: "Chris Evans" <chrishold at psyctc.org>
> Cc: "Duncan Murdoch" <murdoch.duncan at gmail.com>, "r-package-devel"
> <r-package-devel at r-project.org>
> Sent: Tuesday, 16 March, 2021 13:22:53
> Subject: Re: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
> github hosted package

> Hi everybody,

> I would like to take a minute to address the language used in the initial
> e-mail, notably the "newbie/luser" terminology.
> It was given in both the subject (" Two (newbie/luser) questions") as well as
> the body ("... robust R package that might be useful (mainly to R
> newbies/lusers of even lower R/programming skills than mine).").

> Personally I find the term "luser" (as of a "loser user") very condescending,
> whether it is about yourself (because you are not an experienced programmer) or
> others (because you perceive them as inexperienced programmers).
> To put it short, using such a condescending term inhibits yourself and,
> especially, others. Its use is simply unwarranted. Using the term about the
> users of your package, regardless of their experience, is derogatory.

> If you are writing to this mailing list with issues developing an R-package, you
> are neither a newbie nor a loser, and we collectively will do our best to help
> you. So no need in derograting yourself.

> Kind regards,
> Stefan

> Den tir. 16. mar. 2021 kl. 14.05 skrev Chris Evans < [
> mailto:chrishold at psyctc.org | chrishold at psyctc.org ] >:

>> Hugely appreciated Duncan.

>> ----- Original Message -----
>>> From: "Duncan Murdoch" < [ mailto:murdoch.duncan at gmail.com |
>> > murdoch.duncan at gmail.com ] >
>>> To: "Chris Evans" < [ mailto:chrishold at psyctc.org | chrishold at psyctc.org ] >,
>>> "r-package-devel" < [ mailto:r-package-devel at r-project.org |
>> > r-package-devel at r-project.org ] >
>> > Sent: Tuesday, 16 March, 2021 10:48:50
>>> Subject: Re: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
>> > github hosted package

>> > On 16/03/2021 5:58 a.m., Chris Evans wrote:
>> >> I would be very grateful of help as I seem to be making very heavy weather of
>> >> all the intricacies of creating a
>> >> robust R package that might be useful (mainly to R newbies/lusers of even lower
>> >> R/programming skills than mine).

>> >> I am making a lot of progress and am awed by the work so many have put in to
>> >> make things possible: huge gratitude
>> >> to too many to name. However, I seem to be hitting a wall on adding CI to my
>> >> package.

>> >> 1) I am sure that linting my package will help me but there are some defaults in
>> >> lintr/superlinter that I am want
>> >> to take a personal stand and not use: allowing myself not always to use perfect
>> >> camelCase because I think it will
>> >> confuse my end users and the line length limit which at the default of 80 seems
>> >> to me, on a modern set up, to make
>> >> my code far less readable than if I allow some long lines. My problem is that I
>> >> am failing to work out how to override
>> >> the defaults. I thought that putting in /TEMPLATES/.lintr in my package
>> >> directory and having it contain:

>> >> # linters: with_defaults(object_usage_linter = NULL)
>> >> linters: with_defaults(
>> >> line_length_linter(120),
>> >> cyclocomp_linter(25),
>> >> object_name_linter = NULL
>> >> )
>> >> would override the defaults (I'm working on the cyclocomp complaint!) Can
>> >> anyone, perhaps looking at my
>>>> [ https://github.com/cpsyctc/CECPfuns/ | https://github.com/cpsyctc/CECPfuns/ ]
>> >> package, tell me what I'm doing wrong and
>> >> how to get it right?!


>> > I use lintr, and put my .lintr file in the main directory of the package.

>> OK. I have removed the TEMPLATES directory and moved .lintr to the package root.

>> I think I am better keeping lintr local and having moved .lintr using

>> lintr::lint_package()

>> locally is working fine, flagging up cosmetics I can see are all improvements so
>> I
>> can sort those out without wasting github power. Which takes to the next stage
>> ...




>> >> 2) I work on a machine running Ubuntu 20.04 in Rstudio and everything checks and
>> >> tests fine there but I wanted
>> >> to use the github actions to check the package out on Windows and Mac and,
>> >> rather more by luck I think than really
>> >> understanding how I got there, I seem to have achieved that. Rather bizarrely,
>> >> the code (it's only R source)
>> >> passes on Windows and Mac but fails in the Ubuntu test systems with errors like:

>> >> ?? R CMD build ?????????????????????????????????????????????????????????????????
>> >> * checking for file ?.../DESCRIPTION? ... OK
>> >> * preparing ?CECPfuns?:
>> >> * checking DESCRIPTION meta-information ... OK
>> >> * installing the package to process help pages
>> >> -----------------------------------
>> >> * installing *source* package ?CECPfuns? ...
>> >> ** using staged installation
>> >> ** R
>> >> ** inst
>> >> ** byte-compile and prepare package for lazy loading
>> >> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>> >> unable to load shared object
>> >> '/home/runner/work/_temp/Library/stringi/libs/stringi.so':
>> >> libicui18n.so.55: cannot open shared object file: No such file or directory
>> >> Calls: <Anonymous> ... namespaceImport -> loadNamespace -> library.dynam ->
>> >> dyn.load
>> >> Execution halted
>> >> ERROR: lazy loading failed for package ?CECPfuns?

>> >> I _think_ these are just changes in the stirngi package that seem to failing on
>> >> the test machine
>> >> and OK on my machine. That made me think that I can see a lot of logic in my
>> >> checking things on
>> >> the various default versions of R in Ubuntu 16.04, Windows and MacOS but perhaps
>> >> it is unnecessary
>> >> and wasting resources to check the release version of R on Ubuntu 20.04 as it
>> >> seems safe enough to
>> >> assume that the package built on my local machine in the release version of R
>> >> and on Ubuntu 20.04
>> >> that fails like this will only be transient (or that successes on my machine
>> >> will only be ... but
>> >> at least I'll see them and not waste github resources!)

>> >> The catch is that I am baffled by how to configure github actions to change the
>> >> lint defaults and
>> >> to change the selection of releases and platforms. I think that may because I
>> >> may have created
>> >> a mess in my github actions workflows.

>> >> Would anyone be willing to help or even to look at it and point me to the
>> >> explanations I am failing
>> >> to find?!

>> > You have 5 workflows, and their current content doesn't appear to match
>> > the results on your actions page. Pick one, run it, and I'll see if I
>> > can spot the reason for a failure.

>> That is so appreciated Duncan. One stupid question: is there a way to run a
>> workflow other than by making an upload/push (or a pull request)?

>> I think I have discovered that the workflows are controlled by the yaml files
>> in .github/workflows so I have deleted all except R-CMD-check.yaml and I think
>> that when I now commit and push this that should delete the other workflows
>> on github and trigger this one to run. If you could look at that one then
>> that would be hugely appreciated. I see it says:

>> strategy:
>> fail-fast: false
>> matrix:
>> config:
>> - {os: macOS-latest, r: 'release'}
>> - {os: windows-latest, r: 'release'}
>> - {os: windows-latest, r: '3.6'}
>> - {os: ubuntu-18.04, r: 'devel', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] ",
>> http-user-agent: "R/4.0.0 (ubuntu-18.04) R (4.0.0 x86_64-pc-linux-gnu x86_64
>> linux-gnu) on GitHub Actions" }
>> - {os: ubuntu-18.04, r: 'release', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] "}
>> - {os: ubuntu-18.04, r: 'oldrel', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] "}
>> - {os: ubuntu-18.04, r: '3.5', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] "}
>> - {os: ubuntu-18.04, r: '3.4', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] "}
>> - {os: ubuntu-18.04, r: '3.3', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] "}

>> Some questions as I, I think, make some progress:

>> 1) Why is windows-latest pointing at 3.6? I am on 4.0.4 locally for windows. I
>> assume this is because I have copied or pulled in
>> a template that is out of date. Can I just replace that '3.6' with 'release'

>> 2) My guts say that at this point it is sensible for me to test against devel,
>> release and oldrel but that after the next
>> release I could stop testing against oldrel? Is that sensible?

>> 3) I see tests against 3.3, 3.4 and 3.5 there for ubuntu 18.04 and no 20.04. Am
>> I correct that I could replace the above
>> with this:

>> strategy:
>> fail-fast: false
>> matrix:
>> config:
>> - {os: macOS-latest, r: 'release'}
>> - {os: windows-latest, r: 'release'}
>> - {os: windows-latest, r: 'release'}
>> - {os: ubuntu-18.04, r: 'devel', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] ",
>> http-user-agent: "R/4.0.0 (ubuntu-18.04) R (4.0.0 x86_64-pc-linux-gnu x86_64
>> linux-gnu) on GitHub Actions" }
>> - {os: ubuntu-18.04, r: 'release', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] "}
>> - {os: ubuntu-18.04, r: 'oldrel', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/bionic/latest ] "}
>> - {os: ubuntu-20.04, r: 'devel', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest ] "}
>> - {os: ubuntu-20.04, r: 'release', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest ] "}
>> - {os: ubuntu-20.04, r: 'oldrel', rspm: " [
>> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest |
>> https://packagemanager.rstudio.com/cran/__linux__/xenial/latest ] "}

>> [I have changed the windows '3.6' to 'release' and the last three ubuntu calls
>> to 20.04 and the R versions to 'devel', 'release'
>> and 'oldrel' and the repositories to point at xenial not bionic. I have only
>> done this here in the Email, not on disc!]

>> It would be nice to check all that occasionally but I am sure that at the
>> frequency I'm pushing up new functions and tweaks,
>> so my colleagues can check things, I am putting far too much work on github with
>> all those. Could I just check windows
>> and macOS release and devel by commenting out lines there. Or is it better to
>> have different yaml files and just to put
>> the one you want in .github/workflows for each particular push? No great
>> difference?

>> OK. I have pushed these changes with the commit comment "More work to get
>> continuous integration testing ..." and the
>> actions seem to be running and I seem to have succeeded in pruning things down
>> to that one action.

>> Wonderful if you can find the time to have a look at these questions and the run
>> ... now I'm off to the dentist.
>> Hm: dentist ... bad day with R ... dentist ... OK, I'll take bad day with R any
>> day!

>> Thanks (and to all),

>> Chris


>> > Duncan Murdoch

>> --
>> Small contribution in our coronavirus rigours:
>> [
>> https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/
>> |
>> https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/
>> ]

>> Chris Evans < [ mailto:chris at psyctc.org | chris at psyctc.org ] > Visiting
>> Professor, University of Sheffield < [ mailto:chris.evans at sheffield.ac.uk |
>> chris.evans at sheffield.ac.uk ] >
>> I do some consultation work for the University of Roehampton < [
>> mailto:chris.evans at roehampton.ac.uk | chris.evans at roehampton.ac.uk ] > and
>> other places
>> but < [ mailto:chris at psyctc.org | chris at psyctc.org ] > remains my main Email
>> address. I have a work web site at:
>> [ https://www.psyctc.org/psyctc/ | https://www.psyctc.org/psyctc/ ]
>> and a site I manage for CORE and CORE system trust at:
>> [ http://www.coresystemtrust.org.uk/ | http://www.coresystemtrust.org.uk/ ]
>> I have "semigrated" to France, see:
>> [ https://www.psyctc.org/pelerinage2016/semigrating-to-france/ |
>> https://www.psyctc.org/pelerinage2016/semigrating-to-france/ ]
>> [
>> https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/
>> |
>> https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/
>> ]

>> If you want an Emeeting, I am trying to keep them to Thursdays and my diary is
>> at:
>> [ https://www.psyctc.org/pelerinage2016/ceworkdiary/ |
>> https://www.psyctc.org/pelerinage2016/ceworkdiary/ ]
>> Beware: French time, generally an hour ahead of UK.

>> ______________________________________________
>> [ mailto:R-package-devel at r-project.org | R-package-devel at r-project.org ] mailing
>> list
>> [ https://stat.ethz.ch/mailman/listinfo/r-package-devel |
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel ]

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/ 

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk> 
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places 
but <chris at psyctc.org> remains my main Email address. I have a work web site at: 
https://www.psyctc.org/psyctc/ 
and a site I manage for CORE and CORE system trust at: 
http://www.coresystemtrust.org.uk/ 
I have "semigrated" to France, see: 
https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/ 

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at: 
https://www.psyctc.org/pelerinage2016/ceworkdiary/ 
Beware: French time, generally an hour ahead of UK. 

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 16 17:52:56 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 16 Mar 2021 12:52:56 -0400
Subject: [R-pkg-devel] Two (newbie/luser) questions about adding CI to
 github hosted package
In-Reply-To: <211433519.9011739.1615899889493.JavaMail.zimbra@psyctc.org>
References: <71536050.8605005.1615888703205.JavaMail.zimbra@psyctc.org>
 <cd704462-94dc-7f73-09aa-b1041b77acd8@gmail.com>
 <211433519.9011739.1615899889493.JavaMail.zimbra@psyctc.org>
Message-ID: <0e72f270-1182-3c18-c9ae-771d50e1608c@gmail.com>

On 16/03/2021 9:04 a.m., Chris Evans wrote:
> Hugely appreciated Duncan.
> 
> ----- Original Message -----
>> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
  ...

>> You have 5 workflows, and their current content doesn't appear to match
>> the results on your actions page.  Pick one, run it, and I'll see if I
>> can spot the reason for a failure.
> 
> That is so appreciated Duncan. One stupid question: is there a way to run a
> workflow other than by making an upload/push (or a pull request)?

If you have something like this in your yaml file:

# Controls when the action will run.
on:

   pull_request:
     branches: [ master ]

   workflow_dispatch:


then it says the workflow will run when there is a pull request to the 
master branch, and also on request (that's what "workflow_displatch:" 
means).  You can leave out the "pull_request:" lines and only run on 
request.

To actually make the request, you go onto your Github site, go to the 
Actions page, then pick one of the workflows from the list on the left.
If it has "workflow_dispatch" in the file, you'll see a "Run workflow" 
button appear on the right.  It's actually a drop down box; you can 
choose to use the workflow from a different branch by choosing it from 
the list.

Something I'm not sure about is whether choosing a workflow from a 
different branch also selects your package code from that branch, or 
whether you have to choose that on the main Code page.  Experiment, it's 
free!

> 
> I think I have discovered that the workflows are controlled by the yaml files
> in .github/workflows so I have deleted all except R-CMD-check.yaml and I think
> that when I now commit and push this that should delete the other workflows
> on github and trigger this one to run.  If you could look at that one then
> that would be hugely appreciated.  I see it says:
> 
>      strategy:
>        fail-fast: false
>        matrix:
>          config:
>            - {os: macOS-latest,   r: 'release'}
>            - {os: windows-latest, r: 'release'}
>            - {os: windows-latest, r: '3.6'}
>            - {os: ubuntu-18.04,   r: 'devel', rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest", http-user-agent: "R/4.0.0 (ubuntu-18.04) R (4.0.0 x86_64-pc-linux-gnu x86_64 linux-gnu) on GitHub Actions" }
>            - {os: ubuntu-18.04,   r: 'release', rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>            - {os: ubuntu-18.04,   r: 'oldrel',  rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>            - {os: ubuntu-18.04,   r: '3.5',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>            - {os: ubuntu-18.04,   r: '3.4',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>            - {os: ubuntu-18.04,   r: '3.3',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
> 
> 
> Some questions as I, I think, make some progress:
> 
> 1) Why is windows-latest pointing at 3.6?  I am on 4.0.4 locally for windows.  I assume this is because I have copied or pulled in
> a template that is out of date.  Can I just replace that '3.6' with 'release'

I think so.

> 2) My guts say that at this point it is sensible for me to test against devel, release and oldrel but that after the next
> release I could stop testing against oldrel?  Is that sensible?

This really depends on your audience.  It looks like the script you have 
came from the tidyverse people; they try to support 4 releases before 
the current one.  That's pretty extreme, you don't really need all 
those.  But I'd leave oldrel in place.  There are definitely lots of 
people out there who haven't updated to 4.0.x yet, for various reasons, 
e.g. not being admin on their computer.

> 
> 3) I see tests against 3.3, 3.4 and 3.5 there for ubuntu 18.04 and no 20.04.  Am I correct that I could replace the above
> with this:
> 
>      strategy:
>        fail-fast: false
>        matrix:
>          config:
>            - {os: macOS-latest,   r: 'release'}
>            - {os: windows-latest, r: 'release'}
>            - {os: windows-latest, r: 'release'}
>            - {os: ubuntu-18.04,   r: 'devel', rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest", http-user-agent: "R/4.0.0 (ubuntu-18.04) R (4.0.0 x86_64-pc-linux-gnu x86_64 linux-gnu) on GitHub Actions" }
>            - {os: ubuntu-18.04,   r: 'release', rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>            - {os: ubuntu-18.04,   r: 'oldrel',  rspm: "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest"}
>            - {os: ubuntu-20.04,   r: 'devel',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}
>            - {os: ubuntu-20.04,   r: 'release',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}
>            - {os: ubuntu-20.04,   r: 'oldrel',     rspm: "https://packagemanager.rstudio.com/cran/__linux__/xenial/latest"}
> 
> [I have changed the windows '3.6' to 'release' and the last three ubuntu calls to 20.04 and the R versions to 'devel', 'release'
>   and 'oldrel' and the repositories to point at xenial not bionic.  I have only done this here in the Email, not on disc!]

I don't know.  This depends on all those paths in the rspm field being 
available.  If RStudio is making them available, that is probably fine.


> It would be nice to check all that occasionally but I am sure that at the frequency I'm pushing up new functions and tweaks,
> so my colleagues can check things, I am putting far too much work on github with all those.  Could I just check windows
> and macOS release and devel by commenting out lines there.  Or is it better to have different yaml files and just to put
> the one you want in .github/workflows for each particular push?  No great difference?

My feeling is you want lots of versions, and lots of platforms, but not 
necessarily the product of those two things.  If something is going to 
fail because of a platform issue, it'll likely fail in the "release" 
version.  If it is going to fail because of R changes, it'll likely fail 
on all platforms.

As you've probably seen, when one of those jobs fails, you get email:  I 
don't like repetitive emails, so I limit the jobs I run.

Duncan Murdoch


From @kw@|mmo @end|ng |rom gm@||@com  Tue Mar 16 19:02:30 2021
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 16 Mar 2021 14:02:30 -0400
Subject: [R-pkg-devel] Rcmd check and sourcing URL issues
Message-ID: <CAPcHnpSKHz6AgZ1cwkY+D=EHRVMCs2MCgPaQtczQim-UhSNiuQ@mail.gmail.com>

Hello,


I am the maintainer of this.path
<https://CRAN.R-project.org/package=this.path>, and as you can see
from the CRAN
checks <https://cran.r-project.org/web/checks/check_results_this.path.html>,
it flags a NOTE that package testthat
<https://CRAN.R-project.org/package=testthat> is undeclared in the R
documentation references. this.path allows an R script to know its own path
(from 'RStudio', 'RGui', the command-line, and when using 'source' or any
source equivalents), and I recently added functionality to this.path when
using testthat::source_file. However, I don't know how to go about
declaring package testthat such that I can use it reference it in the R
documentation WITHOUT forcing testthat to load or attach itself when
this.path is loaded or attached (I don't want to declare testthat is the
Imports or Depends field of the DESCRIPTION file).

Another issue related to this.path and base::source, but the fix for this
is more opinionated than the above. If someone sources a URL which contains
a call to this.path, should this.path:
* skip that source call and look for the next available path (which may or
may not exist)
* throw an error that this.path is incompatible when sourcing URLs
* return the URL from that source call

Any help is greatly appreciated, thank you!


Regards,
    Andrew Simmons

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 16 19:17:10 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 16 Mar 2021 14:17:10 -0400
Subject: [R-pkg-devel] Rcmd check and sourcing URL issues
In-Reply-To: <CAPcHnpSKHz6AgZ1cwkY+D=EHRVMCs2MCgPaQtczQim-UhSNiuQ@mail.gmail.com>
References: <CAPcHnpSKHz6AgZ1cwkY+D=EHRVMCs2MCgPaQtczQim-UhSNiuQ@mail.gmail.com>
Message-ID: <9cf1d8de-4490-9cb3-6784-9043e4b01a71@gmail.com>

On 16/03/2021 2:02 p.m., Andrew Simmons wrote:
> Hello,
> 
> 
> I am the maintainer of this.path
> <https://CRAN.R-project.org/package=this.path>, and as you can see
> from the CRAN
> checks <https://cran.r-project.org/web/checks/check_results_this.path.html>,
> it flags a NOTE that package testthat
> <https://CRAN.R-project.org/package=testthat> is undeclared in the R
> documentation references. this.path allows an R script to know its own path
> (from 'RStudio', 'RGui', the command-line, and when using 'source' or any
> source equivalents), and I recently added functionality to this.path when
> using testthat::source_file. However, I don't know how to go about
> declaring package testthat such that I can use it reference it in the R
> documentation WITHOUT forcing testthat to load or attach itself when
> this.path is loaded or attached (I don't want to declare testthat is the
> Imports or Depends field of the DESCRIPTION file).

Declaring it in Suggests sounds appropriate here.  Just make sure that 
your code works (perhaps with limited functionality) if testthat is not 
installed.  You do this by wrapping all uses in tests, e.g.

if (requireNamespace("testthat", quietly = TRUE)) {
    do something with testthat
} else
    do something else.


> 
> Another issue related to this.path and base::source, but the fix for this
> is more opinionated than the above. If someone sources a URL which contains
> a call to this.path, should this.path:
> * skip that source call and look for the next available path (which may or
> may not exist)
> * throw an error that this.path is incompatible when sourcing URLs
> * return the URL from that source call

No opinion.

Duncan Murdoch


From pik@pp@@devei m@iii@g oii gm@ii@com  Tue Mar 16 22:17:21 2021
From: pik@pp@@devei m@iii@g oii gm@ii@com (pik@pp@@devei m@iii@g oii gm@ii@com)
Date: Tue, 16 Mar 2021 22:17:21 +0100
Subject: [R-pkg-devel] Problem installing package on windows platforms
Message-ID: <19f9328df705824c4101e61e4f82b692b2ba8c68.camel@gmail.com>

Dear all,
in the latest version of the check results for package diseq (see here)
I get
Version: 0.1.5Check: whether package can be installedResult:
ERROR    Installation failed.    See
'd:/Rcompile/CRANpkg/local/4.0/diseq.Rcheck/00install.out'Flavor: r-
release-windows-ix86+x86_64 During the development phase of version
0.1.5, I had checked the package on windows platforms and I had no
problem. When I try to take a look into the details:
https://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/diseq-00install.html
it seems that the link is dead. I have tried to replicate the problem
using win-builder and rhub but the package is installed successfully
there.

Would you have any suggestions on how to further investigate the
problem?

Thanks in advance!
Best regards,Pantelis

 

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Mar 17 23:57:44 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 17 Mar 2021 23:57:44 +0100
Subject: [R-pkg-devel] CRAN incoming submissions and winbuilder downtime Mar
 19 - Mar 20
Message-ID: <2a78728b-6e1e-2261-3dcf-019439f5177c@statistik.tu-dortmund.de>

Dear package developers,

the CRAN incoming submission webform will be down on Mar 19 from 8:30 am 
CET for roughly an hour. Reason: maintainance work in Vienna.

CRAN incoming checks and the winbuilder services will be offline Mar 19, 
4pm CET to Mar 20, 6pm CET. Submissions will be possible, but not being 
processed in this time. reason: maintainance at the electrical power 
infrastructure in Dortmund.

Best,
Uwe Ligges for the CRAN team


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Sun Mar 21 12:18:43 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Sun, 21 Mar 2021 12:18:43 +0100
Subject: [R-pkg-devel] =?utf-8?q?=E2=80=98Package_required_and_available_?=
 =?utf-8?q?but_unsuitable_version=E2=80=99_and_notes_about_examples_execut?=
 =?utf-8?q?ion_time?=
In-Reply-To: <db753c6d-a6cf-4fab-82ed-9ebda457df72@Spark>
References: <db753c6d-a6cf-4fab-82ed-9ebda457df72@Spark>
Message-ID: <7a73a31b-ad0a-44ca-9ff2-084616627c89@Spark>

Hello,

I am in the process of testing a new version of my GmAMisc package before submitting it to CRAN.

I have checked it using:
(a) devtools::check_win_devel()
https://win-builder.r-project.org/T9yi5bawc203

(b) devtools::check_win_release()
https://win-builder.r-project.org/VACDopQ9QBMi

(c) devtools::check_win_oldrelease()
https://win-builder.r-project.org/yoIK3iE7IZqk

Now,
(a) returns 2 notes about functions? examples whose execution time is larger than 10 sec
This didn?t happen when testing earlier versions of the same package. I did not make any major change to those functions, excluding updating some chunks of code to adapt them to the new structure of the ?spatstat' package. Most of my functions whose execution time is larger than 10 sec are feature Monte Carlo-based resampling; I have tried to reduce the number of randomised iterations (e.g., from 199 to 99) but no significant changes were produced when it comes to the execution time.

(b) returns the same two notes as (a)

(c) returns 1 error:
Package required and available but unsuitable version: ?spatstat.linnet'

I am wondering:
(1) are the 2 notes returned by (a) and (b) a relevant obstacle when it comes to getting my new version on CRAN? I am a little concerned because I do not know how to reduce the execution time further.

(2) why the difference between (a)-(b) and (c) when it comes to the error related to?spatstat.linnet? Is the error returned by (c) fatal in anticipation of submitting the package to CRAN? If it is, how can I tackle that?


Thank you in advance for any help on the above issues.

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar 21 13:46:36 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 21 Mar 2021 08:46:36 -0400
Subject: [R-pkg-devel] 
 =?utf-8?q?=E2=80=98Package_required_and_available_?=
 =?utf-8?q?but_unsuitable_version=E2=80=99_and_notes_about_examples_execut?=
 =?utf-8?q?ion_time?=
In-Reply-To: <7a73a31b-ad0a-44ca-9ff2-084616627c89@Spark>
References: <db753c6d-a6cf-4fab-82ed-9ebda457df72@Spark>
 <7a73a31b-ad0a-44ca-9ff2-084616627c89@Spark>
Message-ID: <64d46e7a-ebc6-184b-8b74-2d011fe4fb92@gmail.com>

On 21/03/2021 7:18 a.m., Gianmarco Alberti wrote:
> Hello,
> 
> I am in the process of testing a new version of my GmAMisc package before submitting it to CRAN.
> 
> I have checked it using:
> (a) devtools::check_win_devel()
> https://win-builder.r-project.org/T9yi5bawc203
> 
> (b) devtools::check_win_release()
> https://win-builder.r-project.org/VACDopQ9QBMi
> 
> (c) devtools::check_win_oldrelease()
> https://win-builder.r-project.org/yoIK3iE7IZqk
> 
> Now,
> (a) returns 2 notes about functions? examples whose execution time is larger than 10 sec
> This didn?t happen when testing earlier versions of the same package. I did not make any major change to those functions, excluding updating some chunks of code to adapt them to the new structure of the ?spatstat' package. Most of my functions whose execution time is larger than 10 sec are feature Monte Carlo-based resampling; I have tried to reduce the number of randomised iterations (e.g., from 199 to 99) but no significant changes were produced when it comes to the execution time.

Did the examples actually become slower?  You can time them locally: 
you won't get the same timings as Win-builder, but relative timings 
should be roughly proportional.

If they did become slower, then you really should modify the examples. 
This might mean using an unrealistically small number of iterations; 
that's better than not running them at all, because at least it will 
show users how your functions work.

Or maybe Win-builder was under heavy load, and that's why the timings 
are slower.  You could take a chance and submit with a note about this.

> 
> (b) returns the same two notes as (a)
> 
> (c) returns 1 error:
> Package required and available but unsuitable version: ?spatstat.linnet'

How are you stating your dependency on this package?  Your current 
version only mentions "spatstat (>= 1.56-0)".  CRAN has spatstat.linnet 
2.0-0, but perhaps Win-builder hadn't updated its old release library to 
that version when you ran your test.

Duncan Murdoch

> 
> I am wondering:
> (1) are the 2 notes returned by (a) and (b) a relevant obstacle when it comes to getting my new version on CRAN? I am a little concerned because I do not know how to reduce the execution time further.
> 
> (2) why the difference between (a)-(b) and (c) when it comes to the error related to?spatstat.linnet? Is the error returned by (c) fatal in anticipation of submitting the package to CRAN? If it is, how can I tackle that?
> 
> 
> Thank you in advance for any help on the above issues.


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Sun Mar 21 14:12:13 2021
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Sun, 21 Mar 2021 14:12:13 +0100
Subject: [R-pkg-devel] 
 =?utf-8?q?=E2=80=98Package_required_and_available_?=
 =?utf-8?q?but_unsuitable_version=E2=80=99_and_notes_about_examples_execut?=
 =?utf-8?q?ion_time?=
In-Reply-To: <64d46e7a-ebc6-184b-8b74-2d011fe4fb92@gmail.com>
References: <db753c6d-a6cf-4fab-82ed-9ebda457df72@Spark>
 <7a73a31b-ad0a-44ca-9ff2-084616627c89@Spark>
 <64d46e7a-ebc6-184b-8b74-2d011fe4fb92@gmail.com>
Message-ID: <55d73415-70ac-4c07-acc6-fd16ae18f0ba@Spark>

Hello,
Thank you very much for your prompt reply on a weekend.

I am testing my examples locally, and I am noticing that they did not get slower actually. So far I have tested 3 of them and they are in the order of 3 or 4 seconds. So, shall I repeat the test later (or another day)?

When it comes to your second question, in my new version?s DESCRIPTION file the following are mentioned (Imports):
spatstat.geom (>= 1.65-5),
spatstat.core (>= 1.65-5),
spatstat.linnet (>= 2.0-0),
spatstat (>= 2.0-0)


Any further hint?

Thank you for your time
Best
Gianmarco

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA dissertations
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 21 Mar 2021, 13:46 +0100, Duncan Murdoch <murdoch.duncan at gmail.com>, wrote:
> On 21/03/2021 7:18 a.m., Gianmarco Alberti wrote:
> > Hello,
> >
> > I am in the process of testing a new version of my GmAMisc package before submitting it to CRAN.
> >
> > I have checked it using:
> > (a) devtools::check_win_devel()
> > https://win-builder.r-project.org/T9yi5bawc203
> >
> > (b) devtools::check_win_release()
> > https://win-builder.r-project.org/VACDopQ9QBMi
> >
> > (c) devtools::check_win_oldrelease()
> > https://win-builder.r-project.org/yoIK3iE7IZqk
> >
> > Now,
> > (a) returns 2 notes about functions? examples whose execution time is larger than 10 sec
> > This didn?t happen when testing earlier versions of the same package. I did not make any major change to those functions, excluding updating some chunks of code to adapt them to the new structure of the ?spatstat' package. Most of my functions whose execution time is larger than 10 sec are feature Monte Carlo-based resampling; I have tried to reduce the number of randomised iterations (e.g., from 199 to 99) but no significant changes were produced when it comes to the execution time.
>
> Did the examples actually become slower? You can time them locally:
> you won't get the same timings as Win-builder, but relative timings
> should be roughly proportional.
>
> If they did become slower, then you really should modify the examples.
> This might mean using an unrealistically small number of iterations;
> that's better than not running them at all, because at least it will
> show users how your functions work.
>
> Or maybe Win-builder was under heavy load, and that's why the timings
> are slower. You could take a chance and submit with a note about this.
>
> >
> > (b) returns the same two notes as (a)
> >
> > (c) returns 1 error:
> > Package required and available but unsuitable version: ?spatstat.linnet'
>
> How are you stating your dependency on this package? Your current
> version only mentions "spatstat (>= 1.56-0)". CRAN has spatstat.linnet
> 2.0-0, but perhaps Win-builder hadn't updated its old release library to
> that version when you ran your test.
>
> Duncan Murdoch
>
> >
> > I am wondering:
> > (1) are the 2 notes returned by (a) and (b) a relevant obstacle when it comes to getting my new version on CRAN? I am a little concerned because I do not know how to reduce the execution time further.
> >
> > (2) why the difference between (a)-(b) and (c) when it comes to the error related to?spatstat.linnet? Is the error returned by (c) fatal in anticipation of submitting the package to CRAN? If it is, how can I tackle that?
> >
> >
> > Thank you in advance for any help on the above issues.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar 21 14:19:33 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 21 Mar 2021 09:19:33 -0400
Subject: [R-pkg-devel] 
 =?utf-8?q?=E2=80=98Package_required_and_available_?=
 =?utf-8?q?but_unsuitable_version=E2=80=99_and_notes_about_examples_execut?=
 =?utf-8?q?ion_time?=
In-Reply-To: <55d73415-70ac-4c07-acc6-fd16ae18f0ba@Spark>
References: <db753c6d-a6cf-4fab-82ed-9ebda457df72@Spark>
 <7a73a31b-ad0a-44ca-9ff2-084616627c89@Spark>
 <64d46e7a-ebc6-184b-8b74-2d011fe4fb92@gmail.com>
 <55d73415-70ac-4c07-acc6-fd16ae18f0ba@Spark>
Message-ID: <94dc472a-a726-1062-19e8-0cd84d9b522a@gmail.com>

On 21/03/2021 9:12 a.m., Gianmarco Alberti wrote:
> Hello,
> Thank you very much for your prompt reply on a weekend.
> 
> I am testing my examples locally, and I am noticing that they did not 
> get slower actually. So far I have tested 3 of them and they are in the 
> order of 3 or 4 seconds. So, shall I repeat the test later (or another day)?
> 
> When it comes to your second question, in my new version?s DESCRIPTION 
> file the following are mentioned (Imports):
> spatstat.geom (>= 1.65-5),
> spatstat.core (>= 1.65-5),
> spatstat.linnet (>= 2.0-0),
> spatstat (>= 2.0-0)
> 

I think you should be fine with no more changes.  Mention the issues you 
saw in your submission message, but it looks to me like a transient 
issue on Win-builder.

Duncan Murdoch

> 
> Any further hint?
> 
> Thank you for your time
> Best
> Gianmarco
> 
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> /Lecturer in Spatial Forensics
> /Coordinator of the BA dissertations
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
> 
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4 
> <https://www.researchgate.net/profile/Gianmarco_Alberti4>
> https://malta.academia.edu/GianmarcoAlberti 
> <https://malta.academia.edu/GianmarcoAlberti>
> 
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en 
> <https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en>
> 
> Correspondence Analysis website
> _http://cainarchaeology.weebly.com/ <http://cainarchaeology.weebly.com/>_
> 
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html 
> <https://cran.r-project.org/web/packages/CAinterprTools/index.html>
> 
> GmAMisc
> https://cran.r-project.org/package=GmAMisc 
> <https://cran.r-project.org/package=GmAMisc>
> 
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html 
> <https://cran.r-project.org/web/packages/movecost/index.html>
> ************************************************
> On 21 Mar 2021, 13:46 +0100, Duncan Murdoch <murdoch.duncan at gmail.com>, 
> wrote:
>> On 21/03/2021 7:18 a.m., Gianmarco Alberti wrote:
>>> Hello,
>>>
>>> I am in the process of testing a new version of my GmAMisc package 
>>> before submitting it to CRAN.
>>>
>>> I have checked it using:
>>> (a) devtools::check_win_devel()
>>> https://win-builder.r-project.org/T9yi5bawc203
>>>
>>> (b) devtools::check_win_release()
>>> https://win-builder.r-project.org/VACDopQ9QBMi
>>>
>>> (c) devtools::check_win_oldrelease()
>>> https://win-builder.r-project.org/yoIK3iE7IZqk
>>>
>>> Now,
>>> (a) returns 2 notes about functions? examples whose execution time is 
>>> larger than 10 sec
>>> This didn?t happen when testing earlier versions of the same package. 
>>> I did not make any major change to those functions, excluding 
>>> updating some chunks of code to adapt them to the new structure of 
>>> the ?spatstat' package. Most of my functions whose execution time is 
>>> larger than 10 sec are feature Monte Carlo-based resampling; I have 
>>> tried to reduce the number of randomised iterations (e.g., from 199 
>>> to 99) but no significant changes were produced when it comes to the 
>>> execution time.
>>
>> Did the examples actually become slower? You can time them locally:
>> you won't get the same timings as Win-builder, but relative timings
>> should be roughly proportional.
>>
>> If they did become slower, then you really should modify the examples.
>> This might mean using an unrealistically small number of iterations;
>> that's better than not running them at all, because at least it will
>> show users how your functions work.
>>
>> Or maybe Win-builder was under heavy load, and that's why the timings
>> are slower. You could take a chance and submit with a note about this.
>>
>>>
>>> (b) returns the same two notes as (a)
>>>
>>> (c) returns 1 error:
>>> Package required and available but unsuitable version: ?spatstat.linnet'
>>
>> How are you stating your dependency on this package? Your current
>> version only mentions "spatstat (>= 1.56-0)". CRAN has spatstat.linnet
>> 2.0-0, but perhaps Win-builder hadn't updated its old release library to
>> that version when you ran your test.
>>
>> Duncan Murdoch
>>
>>>
>>> I am wondering:
>>> (1) are the 2 notes returned by (a) and (b) a relevant obstacle when 
>>> it comes to getting my new version on CRAN? I am a little concerned 
>>> because I do not know how to reduce the execution time further.
>>>
>>> (2) why the difference between (a)-(b) and (c) when it comes to the 
>>> error related to?spatstat.linnet? Is the error returned by (c) fatal 
>>> in anticipation of submitting the package to CRAN? If it is, how can 
>>> I tackle that?
>>>
>>>
>>> Thank you in advance for any help on the above issues.
>>


From rm@h@rp @end|ng |rom me@com  Wed Mar 24 05:16:59 2021
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Tue, 23 Mar 2021 23:16:59 -0500
Subject: [R-pkg-devel] Confusion about what should be in Imports for a
 package with a shiny app
Message-ID: <F70A41F1-B434-43AE-B4E1-FD076A31A8DA@me.com>

I have a package (nprcgenekeepr) in which some packages listed in the DESCRIPTION file are used only within the shiny app scripts. For my prior CRAN submission (successful), I placed such packages in the Suggests section of the DESCRIPTION file. This time testing sites seemed to have directed me to place them in the Imports section and I now have multiple test environments (3 R-hub builder, 3 winbuilder, and 3 Travis-ci) that are showing no errors, warnings, or notes with that placement. However, the package check page https://cran.rstudio.com//web/checks/check_results_nprcgenekeepr.html site is showing the wrong package version (1.0.3 instead of 1.0.5) and some environments with a note of "Namespace in Imports field not imported from: ?shinyBS? All declared Imports should be used.?

I changed the function call from `popify` to `shinyBS::popify` and get the same results

I moved shinyBS to Suggests and I get the same note.

I also have shinyWidgets used within the same UI script and listed in the Imports section and it does not generate a note.

It appears that I have a basic misunderstanding of the message in the note and of where the `shinyBS` package should be listed within the DESCRIPTION file.

Help will be appreciated.

Mark


R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 24 08:31:45 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 24 Mar 2021 03:31:45 -0400
Subject: [R-pkg-devel] Confusion about what should be in Imports for a
 package with a shiny app
In-Reply-To: <F70A41F1-B434-43AE-B4E1-FD076A31A8DA@me.com>
References: <F70A41F1-B434-43AE-B4E1-FD076A31A8DA@me.com>
Message-ID: <c764b7d4-6495-9ea9-2c74-31dcfed6262a@gmail.com>

On 24/03/2021 12:16 a.m., R. Mark Sharp wrote:
> I have a package (nprcgenekeepr) in which some packages listed in the DESCRIPTION file are used only within the shiny app scripts. For my prior CRAN submission (successful), I placed such packages in the Suggests section of the DESCRIPTION file. This time testing sites seemed to have directed me to place them in the Imports section and I now have multiple test environments (3 R-hub builder, 3 winbuilder, and 3 Travis-ci) that are showing no errors, warnings, or notes with that placement. However, the package check page https://cran.rstudio.com//web/checks/check_results_nprcgenekeepr.html site is showing the wrong package version (1.0.3 instead of 1.0.5) and some environments with a note of "Namespace in Imports field not imported from: ?shinyBS? All declared Imports should be used.?
> 
> I changed the function call from `popify` to `shinyBS::popify` and get the same results
> 
> I moved shinyBS to Suggests and I get the same note.
> 
> I also have shinyWidgets used within the same UI script and listed in the Imports section and it does not generate a note.
> 
> It appears that I have a basic misunderstanding of the message in the note and of where the `shinyBS` package should be listed within the DESCRIPTION file.
> 
> Help will be appreciated.
> 

The check code won't examine R code in your inst/application directory 
where the Shiny app code is kept, so that's why you get the "All 
declared Imports should be used" message.

Your README says

"The goal of nprcgenekeepr is to implement Genetic Tools for Colony 
Management. It was initially conceived and developed as a Shiny web 
application at the Oregon National Primate Research Center (ONPRC) to 
facilitate some of the analyses they perform regularly. It has been 
enhanced to have more capability as a Shiny application and to expose 
the functions so they can be used either interactively or in R scripts."

This indicates that you expect some users aren't going to use the Shiny 
script, so they won't need shinyBS.  That means it should be in 
Suggests, not Imports, and your Shiny app should check whether it is 
available before trying to run it.

If you think *most* users will want the Shiny app, then you could force 
it to be installed and loaded by putting it in Imports.  Then you'll 
have to make use of it somewhere in your main code to silence the 
message.  But it's probably better to leave it in Suggests.

As to the "wrong package version" issue:  CRAN isn't showing 1.0.5 
anywhere.  You may have submitted it, but it hasn't been accepted.  It's 
not in the CRAN queues, so you'll need to submit again if you want it on 
CRAN.

Duncan Murdoch


From rm@h@rp @end|ng |rom me@com  Wed Mar 24 17:19:52 2021
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Wed, 24 Mar 2021 11:19:52 -0500
Subject: [R-pkg-devel] Confusion about what should be in Imports for a
 package with a shiny app
In-Reply-To: <c764b7d4-6495-9ea9-2c74-31dcfed6262a@gmail.com>
References: <F70A41F1-B434-43AE-B4E1-FD076A31A8DA@me.com>
 <c764b7d4-6495-9ea9-2c74-31dcfed6262a@gmail.com>
Message-ID: <C8AC97E7-F5A5-46AA-AC80-D7619ABC44AD@me.com>

Duncan,

As always, your answer is helpful. What you wrote agrees with my original understanding. I was somehow mislead by my interpretation of earlier tesing output and got on the wrong track. 

You are correct that the intent of the package is to enable more skilled users to use the package interactively or in their own scripts and applications. I will modify the DESCRIPTION file accordingly.

Mark
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com











> On Mar 24, 2021, at 2:31 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 24/03/2021 12:16 a.m., R. Mark Sharp wrote:
>> I have a package (nprcgenekeepr) in which some packages listed in the DESCRIPTION file are used only within the shiny app scripts. For my prior CRAN submission (successful), I placed such packages in the Suggests section of the DESCRIPTION file. This time testing sites seemed to have directed me to place them in the Imports section and I now have multiple test environments (3 R-hub builder, 3 winbuilder, and 3 Travis-ci) that are showing no errors, warnings, or notes with that placement. However, the package check page https://cran.rstudio.com//web/checks/check_results_nprcgenekeepr.html site is showing the wrong package version (1.0.3 instead of 1.0.5) and some environments with a note of "Namespace in Imports field not imported from: ?shinyBS? All declared Imports should be used.?
>> I changed the function call from `popify` to `shinyBS::popify` and get the same results
>> I moved shinyBS to Suggests and I get the same note.
>> I also have shinyWidgets used within the same UI script and listed in the Imports section and it does not generate a note.
>> It appears that I have a basic misunderstanding of the message in the note and of where the `shinyBS` package should be listed within the DESCRIPTION file.
>> Help will be appreciated.
> 
> The check code won't examine R code in your inst/application directory where the Shiny app code is kept, so that's why you get the "All declared Imports should be used" message.
> 
> Your README says
> 
> "The goal of nprcgenekeepr is to implement Genetic Tools for Colony Management. It was initially conceived and developed as a Shiny web application at the Oregon National Primate Research Center (ONPRC) to facilitate some of the analyses they perform regularly. It has been enhanced to have more capability as a Shiny application and to expose the functions so they can be used either interactively or in R scripts."
> 
> This indicates that you expect some users aren't going to use the Shiny script, so they won't need shinyBS.  That means it should be in Suggests, not Imports, and your Shiny app should check whether it is available before trying to run it.
> 
> If you think *most* users will want the Shiny app, then you could force it to be installed and loaded by putting it in Imports.  Then you'll have to make use of it somewhere in your main code to silence the message.  But it's probably better to leave it in Suggests.
> 
> As to the "wrong package version" issue:  CRAN isn't showing 1.0.5 anywhere.  You may have submitted it, but it hasn't been accepted.  It's not in the CRAN queues, so you'll need to submit again if you want it on CRAN.
> 
> Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Mar 25 09:01:29 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 25 Mar 2021 09:01:29 +0100
Subject: [R-pkg-devel] CRAN incoming checks offline for one more day
Message-ID: <5668c259-3811-c7d2-9b12-d35fd4644114@statistik.tu-dortmund.de>

Dear package developers,

CRAN incoming submissions are currently not being processed due to 
maintainance work on the CRAN check farm. This may take one more day.

Best,
Uwe Ligges
(CRAN team)


From edd @end|ng |rom deb|@n@org  Fri Mar 26 13:08:57 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 26 Mar 2021 07:08:57 -0500
Subject: [R-pkg-devel] 
 CRAN incoming submissions and winbuilder downtime Mar 19 - Mar 20
In-Reply-To: <2a78728b-6e1e-2261-3dcf-019439f5177c@statistik.tu-dortmund.de>
References: <2a78728b-6e1e-2261-3dcf-019439f5177c@statistik.tu-dortmund.de>
Message-ID: <24669.52953.244343.989327@rob.eddelbuettel.com>


Dear Uwe,

CRAN processing appears to have halted completely, with packages stuck in
incoming. I do not recall seeing an announcement, or a note on the site so I
am assuming this was unplanned.  Is there an expected resolution time?

Many thanks as always for keeping the CRAN machine humming,  Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Fri Mar 26 13:31:49 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 26 Mar 2021 07:31:49 -0500
Subject: [R-pkg-devel] 
 CRAN incoming submissions and winbuilder downtime Mar 19 - Mar 20
In-Reply-To: <24669.52953.244343.989327@rob.eddelbuettel.com>
References: <2a78728b-6e1e-2261-3dcf-019439f5177c@statistik.tu-dortmund.de>
 <24669.52953.244343.989327@rob.eddelbuettel.com>
Message-ID: <24669.54325.212141.183681@rob.eddelbuettel.com>


Sorry for the noise. I was (clearly) unaware of one more message in the queue
for this folder.  My apologies.  Looking forward to a refreshed and
strengthened check farm for CRAN.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar 26 14:51:10 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 26 Mar 2021 09:51:10 -0400
Subject: [R-pkg-devel] When are import version requirements checked?
Message-ID: <1571b299-209c-43cf-4cbb-f87381f41187@gmail.com>

Recently I contributed some changes to the pkgdown and downlit packages. 
  The new pkgdown changes require the new downlit changes in order to 
work.  These are still both only on Github, in r-lib/pkgdown and 
r-lib/downlit respectively.

pkgdown lists downlit in the Imports section of DESCRIPTION, but doesn't 
import anything from it:  all calls use the :: syntax, e.g. 
downlit::highlight.

Clearly pkgdown should add a version dependency to its Imports line 
since the old downlit doesn't work.  What I was surprised to find was 
that R pretty much ignores that line.  I can install downlit 0.2.1 from 
CRAN, and put

   downlit (>= 0.2.1.9000),

into the Imports field in DESCRIPTION, and then install the devel 
version of pkgdown without any complaints from R, e.g.

   > packageVersion("downlit")
   [1] ?0.2.1?
   > install.packages("~/pkgdown_1.6.1.9001.tar.gz", repos=NULL, type = 
"source")
   * installing *source* package ?pkgdown? ...
   ** using staged installation
   ** R
   ** inst
   ** byte-compile and prepare package for lazy loading
   ** help
   *** installing help indices
   *** copying figures
   ** building package indices
   ** installing vignettes
   ** testing if installed package can be loaded from temporary location
   ** testing if installed package can be loaded from final location
   ** testing if installed package keeps a record of temporary 
installation path
   * DONE (pkgdown)
   > library(pkgdown)
   >

The first sign of a problem comes when I try to use the modified function:

   > build_reference()
     ... [ lots deleted ] ...
   Error: Failed to parse Rd in build_site.Rd
   ? unused argument (output_handler = 
evaluate::new_output_handler(value = pkgdown_print))
   Run `rlang::last_error()` to see where the error occurred.

The problem here is that the "output_handler" argument is new in downlit 
0.2.1.9000, and we aren't using that version.

Should R object to the incompatible versions here?

Duncan Murdoch


From |kry|ov @end|ng |rom |@@er@chem@m@u@ru  Sat Mar 27 15:26:16 2021
From: |kry|ov @end|ng |rom |@@er@chem@m@u@ru (Ivan Krylov)
Date: Sat, 27 Mar 2021 17:26:16 +0300
Subject: [R-pkg-devel] Debugging M1mac problems
Message-ID: <20210327172616.0a16ed30@Tarkus>

Dear R-package-devel,

My package "albatross" doesn't contain any compiled code and has been
checked on both a POSIX-compatible system and on Windows, so I wasn't
expecting any problems after seeing it pass CRAN "pretest" checks.
Imagine my surprise when it failed a test on M1mac while reading some
files that the test creates in a temporary directory:

https://www.stats.ox.ac.uk/pub/bdr/M1mac/albatross.out

Admittedly, I missed a chance to provide a useful test failure message
here, so I only know that the names differ from my expectations, not
what the differences are. I changed the function to output the actual
differences, but so far wasn't able to reproduce the failure;
apparently it's not a Mac-specific problem, since the package passed
the test on R-hub's "CRAN-like" Mac setup:

https://artifacts.r-hub.io/albatross_0.3-0.tar.gz-6df95a00d916dc9c5ff28bdfe2a1e217/albatross.Rcheck/

I had an idea to rent some CPU time on an M1 machine (buying my own not
being an option). The Web is full of ads for Scaleway offering exactly
this service, but when I checked, they turned out to be out of stock.

I'm probably doing something stupid with the file names that usually
works but isn't guaranteed to work in all cases, but I cannot figure it
out. What should I do to debug this problem? I really don't want to be
bothering CRAN with small updates that only help diagnose the problem
instead of fixing it.

Please keep me Cc:-d in your replies if possible.

-- 
Best,
Ivan


From edd @end|ng |rom deb|@n@org  Sat Mar 27 15:55:07 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 27 Mar 2021 09:55:07 -0500
Subject: [R-pkg-devel] Debugging M1mac problems
In-Reply-To: <20210327172616.0a16ed30@Tarkus>
References: <20210327172616.0a16ed30@Tarkus>
Message-ID: <24671.18251.777462.714420@rob.eddelbuettel.com>


On 27 March 2021 at 17:26, Ivan Krylov wrote:
| Dear R-package-devel,
| 
| My package "albatross" doesn't contain any compiled code and has been
| checked on both a POSIX-compatible system and on Windows, so I wasn't
| expecting any problems after seeing it pass CRAN "pretest" checks.
| Imagine my surprise when it failed a test on M1mac while reading some
| files that the test creates in a temporary directory:
| 
| https://www.stats.ox.ac.uk/pub/bdr/M1mac/albatross.out
| 
| Admittedly, I missed a chance to provide a useful test failure message
| here, so I only know that the names differ from my expectations, not
| what the differences are. I changed the function to output the actual
| differences, but so far wasn't able to reproduce the failure;
| apparently it's not a Mac-specific problem, since the package passed
| the test on R-hub's "CRAN-like" Mac setup:
| 
| https://artifacts.r-hub.io/albatross_0.3-0.tar.gz-6df95a00d916dc9c5ff28bdfe2a1e217/albatross.Rcheck/
| 
| I had an idea to rent some CPU time on an M1 machine (buying my own not
| being an option). The Web is full of ads for Scaleway offering exactly
| this service, but when I checked, they turned out to be out of stock.
| 
| I'm probably doing something stupid with the file names that usually
| works but isn't guaranteed to work in all cases, but I cannot figure it
| out. What should I do to debug this problem? I really don't want to be
| bothering CRAN with small updates that only help diagnose the problem
| instead of fixing it.
| 
| Please keep me Cc:-d in your replies if possible.

Looking at the CRAN mirror (thanks, Gabor) for your package shows (a common
but not apparently outlawed) practice of creating a temporary file:
 
  https://github.com/cran/albatross/search?q=tempfile
  
i.e.

  write.openfluor(factors, f1 <- tempfile(fileext = '.txt'))
  ... f2 <- tempfile(fileext = '.txt')   ...
  
and I think we are now being asked to no longer leave these files behind
(whereas in the past we were asked to create them _exactly this way_).

Christoph and I are having the same issue right now with x13binary and
seasonal; the corrected version of x13binary is however currently archived
and I have not yet heard back from CRAN on my reply to the (to me false
positive) automatic archival of x13binary. I plan to send an email in a day
or two if it does not get resolved before then.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |kry|ov @end|ng |rom |@@er@chem@m@u@ru  Sat Mar 27 17:11:55 2021
From: |kry|ov @end|ng |rom |@@er@chem@m@u@ru (Ivan Krylov)
Date: Sat, 27 Mar 2021 19:11:55 +0300
Subject: [R-pkg-devel] Debugging M1mac problems
In-Reply-To: <24671.18251.777462.714420@rob.eddelbuettel.com>
References: <20210327172616.0a16ed30@Tarkus>
 <24671.18251.777462.714420@rob.eddelbuettel.com>
Message-ID: <20210327191155.22d52968@Tarkus>

Dirk, thank you a prompt reply!

I see the issue you took part in solving:
https://github.com/x13org/x13binary/issues/49

Wondering if a combination of environment variables for R CMD check
could have helped reproduce this on another machine. Unfortunately
<https://www.stats.ox.ac.uk/pub/bdr/M1mac/README.txt> doesn't list any
environment variables.

On Sat, 27 Mar 2021 17:55:07 +0300
Dirk Eddelbuettel <edd at debian.org> wrote:

> I think we are now being asked to no longer leave [the temp] files
> behind (whereas in the past we were asked to create them _exactly
> this way_).

I will make sure to address this deficiency of ?write.openfluor in the
next version and avoid leaving files in tempdir() in the future, but
I'm afraid this won't help me fix tests/feemlist.R on M1mac. Or is it
not enough that I clean up all temporary files created in
tests/feemlist.R at the very end by means of unlink(..., recursive =
TRUE)?

-- 
Best,
Ivan


From edd @end|ng |rom deb|@n@org  Sun Mar 28 06:49:03 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 27 Mar 2021 23:49:03 -0500
Subject: [R-pkg-devel] Debugging M1mac problems
In-Reply-To: <20210327191155.22d52968@Tarkus>
References: <20210327172616.0a16ed30@Tarkus>
 <24671.18251.777462.714420@rob.eddelbuettel.com>
 <20210327191155.22d52968@Tarkus>
Message-ID: <24672.2751.408572.332750@rob.eddelbuettel.com>


Hi Ivan,

On 27 March 2021 at 19:11, Ivan Krylov wrote:
| Dirk, thank you a prompt reply!
| 
| I see the issue you took part in solving:
| https://github.com/x13org/x13binary/issues/49

Yes. Temporary files are now written to a temporary directory which I make
sure to remove at end of examples (and tests, see below).

[...]

| I will make sure to address this deficiency of ?write.openfluor in the
| next version and avoid leaving files in tempdir() in the future, but
| I'm afraid this won't help me fix tests/feemlist.R on M1mac. Or is it
| not enough that I clean up all temporary files created in
| tests/feemlist.R at the very end by means of unlink(..., recursive =
| TRUE)?

I started using the idiom above in tests. So it might be a good idea to do it
there too as the issue has already been identified in your package.

What is a little frustrating is that when we keep r-devel around yet are
unable to replicate the issues (yet?) -- and as you noted we do not have
access to that 'M1mac' machine so there is some poking in the dark here too.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jr@| @end|ng |rom po@teo@no  Mon Mar 29 23:29:22 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 29 Mar 2021 23:29:22 +0200
Subject: [R-pkg-devel] Debugging RODBC installation problems on FreeBSD
 (unixodbc library path)
Message-ID: <YGJGHehazrzCror7@posteo.no>

Dear r-package-devel list subscribers,

can someone please guide me a little in
installing RODBC[1] on FreeBSD 13?

I believe it depends on unixodbc[2], but
the compilation stops with at not
finding unixodbc (I think):

	rasmus at iselin ~ % mkdir ~/src/RODBC
	rasmus at iselin ~ % cd ~/src/RODBC
	rasmus at iselin ~/src/RODBC % fetch 'https://cran.rstudio.com/src/contrib/RODBC_1.3-17.tar.gz'
	rasmus at iselin ~/src/RODBC % R CMD INSTALL RODBC
	* installing to library ?/usr/home/rasmus/R/amd64-portbld-freebsd13.0-library/4.0?
	* installing *source* package ?RODBC? ...
	** package ?RODBC? successfully unpacked and MD5 sums checked
	** using staged installation
	checking for gcc... cc
	checking whether the C compiler works... yes
	checking for C compiler default output file name... a.out
	checking for suffix of executables...
	checking whether we are cross compiling... no
	checking for suffix of object files... o
	checking whether we are using the GNU C compiler... yes
	checking whether cc accepts -g... yes
	checking for cc option to accept ISO C89... none needed
	checking how to run the C preprocessor... cc -E
	checking for grep that handles long lines and -e... /usr/bin/grep
	checking for egrep... /usr/bin/grep -E
	checking for ANSI C header files... yes
	checking for sys/types.h... yes
	checking for sys/stat.h... yes
	checking for stdlib.h... yes
	checking for string.h... yes
	checking for memory.h... yes
	checking for strings.h... yes
	checking for inttypes.h... yes
	checking for stdint.h... yes
	checking for unistd.h... yes
	checking sql.h usability... yes
	checking sql.h presence... yes
	checking for sql.h... yes
	checking sqlext.h usability... yes
	checking sqlext.h presence... yes
	checking for sqlext.h... yes
	checking for library containing SQLTables... no
	configure: error: "no ODBC driver manager found"
	ERROR: configuration failed for package ?RODBC?
	* removing ?/usr/home/rasmus/R/amd64-portbld-freebsd13.0-library/4.0/RODBC?

I've attached the config.log.  I think
the important lines are 249:253:

	configure:3672: cc -o conftest -O2 -pipe -DLIBICONV_PLUG -fstack-protector-strong -isystem /usr/local/include -fno-strict-aliasing -DLIBICONV_PLUG -I/usr/local/include -isystem /usr/local/include -I.  conftest.c -lodbc   >&5
	ld: error: unable to find library -lodbc
	cc: error: linker command failed with exit code 1 (use -v to see invocation)
	configure:3672: $? = 1

I found line 48 in configure.ac [3]

	odbc_lib_path=`odbc_config --libs | sed s/-lodbc//`

and tried to change it to

	odbc_lib_path=`pkg-config --libs --cflags odbc | sed s/-lodbc//`

but this changes nothing (I think ...)

Running odbc_config and pkg-config:

	rasmus at iselin ~/src/RODBC % odbc_config --libs
	-L/usr/local/lib -lodbc
	rasmus at iselin ~/src/RODBC % pkg-config --libs --cflags odbc
	-I/usr/local/include -L/usr/local/lib -lodbc

Hey, I am at a loss here ...

I have not done much debugging work like 
this before ...

Perhaps some kind soul among you can 
provide some useful pointers on this?

Best,
Rasmus Liland

[1] https://cran.r-project.org/web/packages/RODBC/index.html
[2] http://www.unixodbc.org/
[3] https://raw.githubusercontent.com/cran/RODBC/master/configure.ac

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: config.log
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20210329/688d058f/attachment.log>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20210329/688d058f/attachment.sig>

From edd @end|ng |rom deb|@n@org  Tue Mar 30 00:07:25 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 29 Mar 2021 17:07:25 -0500
Subject: [R-pkg-devel] Debugging RODBC installation problems on FreeBSD
 (unixodbc library path)
In-Reply-To: <YGJGHehazrzCror7@posteo.no>
References: <YGJGHehazrzCror7@posteo.no>
Message-ID: <24674.20381.94259.3434@rob.eddelbuettel.com>


On 29 March 2021 at 23:29, Rasmus Liland wrote:
| can someone please guide me a little in
| installing RODBC[1] on FreeBSD 13?
| 
| I believe it depends on unixodbc[2], but
| the compilation stops with at not
| finding unixodbc (I think):
| 
| 	rasmus at iselin ~ % mkdir ~/src/RODBC
| 	rasmus at iselin ~ % cd ~/src/RODBC
| 	rasmus at iselin ~/src/RODBC % fetch 'https://cran.rstudio.com/src/contrib/RODBC_1.3-17.tar.gz'
| 	rasmus at iselin ~/src/RODBC % R CMD INSTALL RODBC
| 	* installing to library ?/usr/home/rasmus/R/amd64-portbld-freebsd13.0-library/4.0?
[...]
| 	checking for sqlext.h... yes
| 	checking for library containing SQLTables... no
| 	configure: error: "no ODBC driver manager found"
| 	ERROR: configuration failed for package ?RODBC?
| 	* removing ?/usr/home/rasmus/R/amd64-portbld-freebsd13.0-library/4.0/RODBC?
| 
| I've attached the config.log.  I think
| the important lines are 249:253:

I find it easier to look at the input code in configure.ac that is used to
create configure (which, as a machine generated script, is less readable,
same for the log). So we see that test for sqlext.h still passed, but the
next one failed. Using the source for RODBC we have first the block that
passes and then the block that fails:

   dnl Check the headers can be found
   AC_CHECK_HEADERS(sql.h sqlext.h)
   if test "${ac_cv_header_sql_h}" = no || 
      test "${ac_cv_header_sqlext_h}" = no; then
      AC_MSG_ERROR("ODBC headers sql.h and sqlext.h not found")
   fi
   
   dnl search for a library containing an ODBC function
   if test [ -n "${odbc_mgr}" ] ; then
     AC_SEARCH_LIBS(SQLTables, ${odbc_mgr}, ,
   	         AC_MSG_ERROR("ODBC driver manager '${odbc_mgr}' not found"))
   else
     AC_SEARCH_LIBS(SQLTables, odbc odbc32 iodbc, ,
   	         AC_MSG_ERROR("no ODBC driver manager found"))
   fi
   
So we see that we end up in the else branch of the test for
odbc_mgr. Scrolling back we see

   dnl A user-specifiable option
   odbc_mgr=""
   AC_ARG_WITH([odbc-manager],
               AC_HELP_STRING([--with-odbc-manager=MGR],
                              [specify the ODBC manager, e.g. odbc or iodbc]),
               [odbc_mgr=$withval])
   
   if test "$odbc_mgr" = "odbc" ; then
     AC_PATH_PROGS(ODBC_CONFIG, odbc_config)
   fi

So this wants you to specify either (unix)odbc or (lib)iodbc explicitly, and
if odbc was set, check for odbc_config.

I have looked after RODBC for Debian since 2003 or so, and I think I switched
from unixodbc to iodbc and back in that time, reflecting the state of the
library at the time. I think what I would do now is to see which of libiodbc
and unixodbc is present, and if it is the latter if setting it as argument to
--with-odbc-manager helps some more.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jr@| @end|ng |rom po@teo@no  Tue Mar 30 01:10:25 2021
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 30 Mar 2021 01:10:25 +0200
Subject: [R-pkg-devel] Debugging RODBC installation problems on FreeBSD
 (unixodbc library path)
In-Reply-To: <24674.20381.94259.3434@rob.eddelbuettel.com>
References: <YGJGHehazrzCror7@posteo.no>
 <24674.20381.94259.3434@rob.eddelbuettel.com>
Message-ID: <YGJd1Eg8G8VovS5h@posteo.no>

Dirk, I did not realize libiodbc[1] is an 
alternative to unixODBC, how are you 
able to see this?  

I also did not realize I had both of 
them installed ... 

Uninstalling libiodbc, keeping unixODBC, 
adding the flag (I only suppose this is 
how the flag is added), does nothing:

	rasmus at iselin ~/src/RODBC % R CMD INSTALL RODBC --with-odbc-manager=odbc
	Warning: unknown option ?--with-odbc-manager=odbc?
	* installing to library ?/usr/home/rasmus/R/amd64-portbld-freebsd13.0-library/4.0?
	* installing *source* package ?RODBC? ...
	files ?configure?, ?configure.ac? have the wrong MD5 checksums
	** using staged installation
	checking for gcc... cc
	checking whether the C compiler works... yes
	checking for C compiler default output file name... a.out
	checking for suffix of executables...
	checking whether we are cross compiling... no
	checking for suffix of object files... o
	checking whether we are using the GNU C compiler... yes
	checking whether cc accepts -g... yes
	checking for cc option to accept ISO C89... none needed
	checking how to run the C preprocessor... cc -E
	checking for grep that handles long lines and -e... /usr/bin/grep
	checking for egrep... /usr/bin/grep -E
	checking for ANSI C header files... yes
	checking for sys/types.h... yes
	checking for sys/stat.h... yes
	checking for stdlib.h... yes
	checking for string.h... yes
	checking for memory.h... yes
	checking for strings.h... yes
	checking for inttypes.h... yes
	checking for stdint.h... yes
	checking for unistd.h... yes
	checking sql.h usability... yes
	checking sql.h presence... yes
	checking for sql.h... yes
	checking sqlext.h usability... yes
	checking sqlext.h presence... yes
	checking for sqlext.h... yes
	checking for library containing SQLTables... no
	configure: error: "no ODBC driver manager found"
	ERROR: configuration failed for package ?RODBC?
	* removing ?/usr/home/rasmus/R/amd64-portbld-freebsd13.0-library/4.0/RODBC?

The other way around, uninstalling 
unixODBC, keeping libiodbc, brings me 
one step backwards: 

	rasmus at iselin ~/src/RODBC % R CMD INSTALL RODBC --with-odbc-manager=iodbc
	Warning: unknown option ?--with-odbc-manager=iodbc?
	* installing to library ?/usr/home/rasmus/R/amd64-portbld-freebsd13.0-library/4.0?
	* installing *source* package ?RODBC? ...
	files ?configure?, ?configure.ac? have the wrong MD5 checksums
	** using staged installation
	checking for gcc... cc
	checking whether the C compiler works... yes
	checking for C compiler default output file name... a.out
	checking for suffix of executables...
	checking whether we are cross compiling... no
	checking for suffix of object files... o
	checking whether we are using the GNU C compiler... yes
	checking whether cc accepts -g... yes
	checking for cc option to accept ISO C89... none needed
	checking how to run the C preprocessor... cc -E
	checking for grep that handles long lines and -e... /usr/bin/grep
	checking for egrep... /usr/bin/grep -E
	checking for ANSI C header files... yes
	checking for sys/types.h... yes
	checking for sys/stat.h... yes
	checking for stdlib.h... yes
	checking for string.h... yes
	checking for memory.h... yes
	checking for strings.h... yes
	checking for inttypes.h... yes
	checking for stdint.h... yes
	checking for unistd.h... yes
	checking sql.h usability... no
	checking sql.h presence... no
	checking for sql.h... no
	checking sqlext.h usability... no
	checking sqlext.h presence... no
	checking for sqlext.h... no
	configure: error: "ODBC headers sql.h and sqlext.h not found"
	ERROR: configuration failed for package ?RODBC?
	* removing ?/usr/home/rasmus/R/amd64-portbld-freebsd13.0-library/4.0/RODBC?

... the sql.h and sqlext.h header files 
are there, libiodbc provides them both:

	root at iselin /usr/home/rasmus # pkg info -l libiodbc | egrep 'sql.h|sqlext.h'
	        /usr/local/include/libiodbc/isql.h
	        /usr/local/include/libiodbc/isqlext.h
	        /usr/local/include/libiodbc/sql.h
	        /usr/local/include/libiodbc/sqlext.h

... also when having unixodbc installed:

	root at iselin /usr/home/rasmus # pkg info -l unixODBC-2.3.9 | egrep 'sql.h|sqlext.h'
	        /usr/local/include/sql.h
	        /usr/local/include/sqlext.h

Rasmus

[1] https://www.freshports.org/databases/libiodbc/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20210330/60b98b81/attachment.sig>

From bkum@r @end|ng |rom rocket@o|tw@re@com  Tue Mar 30 09:05:42 2021
From: bkum@r @end|ng |rom rocket@o|tw@re@com (Binit Kumar)
Date: Tue, 30 Mar 2021 07:05:42 +0000
Subject: [R-pkg-devel] FW: [CRAN-pretest-archived] CRAN submission RIBMDB
 1.0-21
In-Reply-To: <01d72531$Blat.v3.2.16$7d606261$ed6c451a@mail.statistik.tu-dortmund.de>
References: <20210330044301.4779E162EA5@xmpalantir.wu.ac.at>
 <01d72531$Blat.v3.2.16$7d606261$ed6c451a@mail.statistik.tu-dortmund.de>
Message-ID: <BYAPR07MB58949FC273152182813465A8BC7D9@BYAPR07MB5894.namprd07.prod.outlook.com>

Hi Team,
I mentioned some comment before uploading the package for publishing i.e. "My package RIBMDB has a dependency on CLI driver which has some IBM proprietary C code due to which it cannot be included as part of package and needs executables i.e. dll or .so file depending on the platform i.e. WINDOWS or DEBIAN. However there is a script i.e. CLIDriverInstaller.R which downloads the executable based on platform.".

My understanding is that there is some manual intervention in testing the packages and hence is it is possible for the manual testers testing the package to set the IBM_DB_HOME and then install the RIBMDB package as this is the intended way of use of RIBMDB package.

Not sure if the testers are part of this DL(r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>). I guess yes. If so kindly let me know if the above approach is possible.


Thanks & Regards,
Binit Kumar
From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
Sent: 30 March 2021 12:24
To: Binit Kumar <bkumar at rocketsoftware.com>
Cc: CRAN-submissions at R-project.org
Subject: [CRAN-pretest-archived] CRAN submission RIBMDB 1.0-21

Dear maintainer,

package RIBMDB_1.0-21.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/Windows/00check.log<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/Windows/00check.log>>
Status: 1 ERROR, 1 NOTE
Debian: <https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/Debian/00check.log<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/Debian/00check.log>>
Status: 1 ERROR, 1 NOTE



Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301>>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service

================================
Rocket Software, Inc. and subsidiaries ? 77 Fourth Avenue, Waltham MA 02451 ? Main Office Toll Free Number: +1 855.577.4323
Contact Customer Support: https://my.rocketsoftware.com/RocketCommunity/RCEmailSupport
Unsubscribe from Marketing Messages/Manage Your Subscription Preferences - http://www.rocketsoftware.com/manage-your-email-preferences
Privacy Policy - http://www.rocketsoftware.com/company/legal/privacy-policy
================================

This communication and any attachments may contain confidential information of Rocket Software, Inc. All unauthorized use, disclosure or distribution is prohibited. If you are not the intended recipient, please notify Rocket Software immediately and destroy all copies of this communication. Thank you.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 00details.log
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20210330/8bbeb240/attachment.log>

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar 30 13:58:55 2021
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 30 Mar 2021 13:58:55 +0200
Subject: [R-pkg-devel] 
 FW: [CRAN-pretest-archived] CRAN submission RIBMDB 1.0-21
In-Reply-To: <BYAPR07MB58949FC273152182813465A8BC7D9@BYAPR07MB5894.namprd07.prod.outlook.com>
References: <20210330044301.4779E162EA5@xmpalantir.wu.ac.at>
 <01d72531$Blat.v3.2.16$7d606261$ed6c451a@mail.statistik.tu-dortmund.de>
 <BYAPR07MB58949FC273152182813465A8BC7D9@BYAPR07MB5894.namprd07.prod.outlook.com>
Message-ID: <44faa0ba-c769-1b15-2cc8-f5b17831a5fe@statistik.tu-dortmund.de>

Pls write your message to CRAN at R-project.org

Best,
Uwe Ligges

On 30.03.2021 09:05, Binit Kumar wrote:
> Hi Team,
> I mentioned some comment before uploading the package for publishing i.e. "My package RIBMDB has a dependency on CLI driver which has some IBM proprietary C code due to which it cannot be included as part of package and needs executables i.e. dll or .so file depending on the platform i.e. WINDOWS or DEBIAN. However there is a script i.e. CLIDriverInstaller.R which downloads the executable based on platform.".
> 
> My understanding is that there is some manual intervention in testing the packages and hence is it is possible for the manual testers testing the package to set the IBM_DB_HOME and then install the RIBMDB package as this is the intended way of use of RIBMDB package.
> 
> Not sure if the testers are part of this DL(r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>). I guess yes. If so kindly let me know if the above approach is possible.
> 
> 
> Thanks & Regards,
> Binit Kumar
> From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
> Sent: 30 March 2021 12:24
> To: Binit Kumar <bkumar at rocketsoftware.com>
> Cc: CRAN-submissions at R-project.org
> Subject: [CRAN-pretest-archived] CRAN submission RIBMDB 1.0-21
> 
> Dear maintainer,
> 
> package RIBMDB_1.0-21.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/Windows/00check.log<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/Windows/00check.log>>
> Status: 1 ERROR, 1 NOTE
> Debian: <https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/Debian/00check.log<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/Debian/00check.log>>
> Status: 1 ERROR, 1 NOTE
> 
> 
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301/<https://win-builder.r-project.org/incoming_pretest/RIBMDB_1.0-21_20210330_064301>>
> The files will be removed after roughly 7 days.
> 
> No strong reverse dependencies to be checked.
> 
> Best regards,
> CRAN teams' auto-check service
> 
> ================================
> Rocket Software, Inc. and subsidiaries ? 77 Fourth Avenue, Waltham MA 02451 ? Main Office Toll Free Number: +1 855.577.4323
> Contact Customer Support: https://my.rocketsoftware.com/RocketCommunity/RCEmailSupport
> Unsubscribe from Marketing Messages/Manage Your Subscription Preferences - http://www.rocketsoftware.com/manage-your-email-preferences
> Privacy Policy - http://www.rocketsoftware.com/company/legal/privacy-policy
> ================================
> 
> This communication and any attachments may contain confidential information of Rocket Software, Inc. All unauthorized use, disclosure or distribution is prohibited. If you are not the intended recipient, please notify Rocket Software immediately and destroy all copies of this communication. Thank you.
> 
> 
> 00details.log
> 
> Flavor: r-devel-windows-ix86+x86_64
> Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'ROCKET SOFTWARE <bkumar at rocketsoftware.com>'
>    
>    New submission
>    
>    Possibly mis-spelled words in DESCRIPTION:
>      ODBC (8:17)
>    
>    Found the following (possibly) invalid URLs:
>      URL: http://msdn.microsoft.com/en-us/library/ms711683(VS.85).aspx
>        From: man/sqlColumns.Rd
>        Status: 403
>        Message: Forbidden
>      URL: http://msdn.microsoft.com/en-us/library/ms714602(VS.85).aspx
>        From: man/sqlColumns.Rd
>        Status: 403
>        Message: Forbidden
>      URL: http://msdn.microsoft.com/en-us/library/ms714632(VS.85).aspx
>        From: man/sqlTypeInfo.Rd
>        Status: 403
>        Message: Forbidden
>      URL: https://cran.r-project.org/web/packages/RODBCDBI/index.html
>        From: README.md
>        Status: 200
>        Message: OK
>        CRAN URL not in canonical form
>      URL: https://github.com/ibmdb/RIBMDB/blob/master/contributing/CONTRIBUTING.md
>        From: README.md
>        Status: 404
>        Message: Not Found
>      The canonical URL of the CRAN page for a package is
>        https://CRAN.R-project.org/package=pkgname
>    
>    The Date field is over a month old.
>    
>    This build time stamp is over a month old.
> 
> Flavor: r-devel-windows-ix86+x86_64
> Check: whether package can be installed, Result: ERROR
>    Installation failed.
>    See 'd:/RCompile/CRANincoming/R-devel/RIBMDB.Rcheck/00install.out' for details.
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'ROCKET SOFTWARE <bkumar at rocketsoftware.com>'
>    
>    New submission
>    
>    Possibly mis-spelled words in DESCRIPTION:
>      ODBC (8:17)
>    
>    Found the following (possibly) invalid URLs:
>      URL: http://msdn.microsoft.com/en-us/library/ms711683(VS.85).aspx
>        From: man/sqlColumns.Rd
>        Status: 403
>        Message: Forbidden
>      URL: http://msdn.microsoft.com/en-us/library/ms714602(VS.85).aspx
>        From: man/sqlColumns.Rd
>        Status: 403
>        Message: Forbidden
>      URL: http://msdn.microsoft.com/en-us/library/ms714632(VS.85).aspx
>        From: man/sqlTypeInfo.Rd
>        Status: 403
>        Message: Forbidden
>      URL: https://cran.r-project.org/web/packages/RODBCDBI/index.html
>        From: README.md
>        Status: 200
>        Message: OK
>        CRAN URL not in canonical form
>      URL: https://github.com/ibmdb/RIBMDB/blob/master/contributing/CONTRIBUTING.md
>        From: README.md
>        Status: 404
>        Message: Not Found
>      URL: https://github.com/ibmdb/RIBMDB/master/INSTALL.md
>        From: README.md
>        Status: 404
>        Message: Not Found
>      The canonical URL of the CRAN page for a package is
>        https://CRAN.R-project.org/package=pkgname
>    
>    The Date field is over a month old.
>    
>    This build time stamp is over a month old.
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: whether package can be installed, Result: ERROR
>    Installation failed.
>    See '/srv/hornik/tmp/CRAN/RIBMDB.Rcheck/00install.out' for details.
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||oruppr @end|ng |rom gm@||@com  Tue Mar 30 15:19:26 2021
From: ||oruppr @end|ng |rom gm@||@com (Florian Rupprecht)
Date: Tue, 30 Mar 2021 15:19:26 +0200
Subject: [R-pkg-devel] Optional system/C++ library
Message-ID: <CAHTZEhCkWTX8LZEQmtVQ79_OO-yoPEdP3LKSQ7HMP3b66a=dgQ@mail.gmail.com>

Hi Team,

I am trying to add an optional system/C++ library to my package and was
wondering if anyone could point me in the right direction on how to do this
in the R package ecosystem.

To be concrete, I want my graphics device package httpgd to be able to call
into imagemagick/magick++ to add image format support for the various
formats imagemagick can convert to. For this I need direct C/C++ access as
the rendering is done in a background thread. Additionally I want to keep
this completely optional, so httpgd can be compiled and executed when
imagemagick is not installed on the system.

Any help is very much appreciated.

Thanks and best regards,
Florian

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Mar 30 15:37:01 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 30 Mar 2021 08:37:01 -0500
Subject: [R-pkg-devel] Optional system/C++ library
In-Reply-To: <CAHTZEhCkWTX8LZEQmtVQ79_OO-yoPEdP3LKSQ7HMP3b66a=dgQ@mail.gmail.com>
References: <CAHTZEhCkWTX8LZEQmtVQ79_OO-yoPEdP3LKSQ7HMP3b66a=dgQ@mail.gmail.com>
Message-ID: <24675.10621.24186.548770@rob.eddelbuettel.com>


On 30 March 2021 at 15:19, Florian Rupprecht wrote:
| I am trying to add an optional system/C++ library to my package and was
| wondering if anyone could point me in the right direction on how to do this
| in the R package ecosystem.
| 
| To be concrete, I want my graphics device package httpgd to be able to call
| into imagemagick/magick++ to add image format support for the various
| formats imagemagick can convert to. For this I need direct C/C++ access as
| the rendering is done in a background thread. Additionally I want to keep
| this completely optional, so httpgd can be compiled and executed when
| imagemagick is not installed on the system.

One uses a file 'configure' to test for properties of the system, and e.g. sets
conditional #define statements for code in src/Makevars, or in src/*h files, or...

This has been done since time immortal using a tool called 'autoconf' which
produces these scripts from input files called 'configure.ac' (or in the case
of very old ones, 'configure.in'). It is very powerful and generic, R itself
uses it.  Many of us have examples across our packages.  An alternative
exists in the outside world with 'cmake', this is used less at CRAN.  Lastly
you can also write 'configure' scripts in sh or R or ...  See 'Writing R
Extensions' for background, and many CRAN packages for examples (which you
can search within the excellent github.org/cran 'org' that mirrors CRAN).

The devil is in the detail of making it robust acrosss platforms and setups.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Tue Mar 30 15:40:43 2021
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 30 Mar 2021 08:40:43 -0500
Subject: [R-pkg-devel] Debugging RODBC installation problems on FreeBSD
 (unixodbc library path)
In-Reply-To: <YGJd1Eg8G8VovS5h@posteo.no>
References: <YGJGHehazrzCror7@posteo.no>
 <24674.20381.94259.3434@rob.eddelbuettel.com>
 <YGJd1Eg8G8VovS5h@posteo.no>
Message-ID: <24675.10843.893251.372051@rob.eddelbuettel.com>


On 30 March 2021 at 01:10, Rasmus Liland wrote:
| Dirk, I did not realize libiodbc[1] is an 
| alternative to unixODBC, how are you 
| able to see this?  

By studing the sources and README of the package you are trying to build.
 
| I also did not realize I had both of 
| them installed ... 
| 
| Uninstalling libiodbc, keeping unixODBC, 
| adding the flag (I only suppose this is 
| how the flag is added), does nothing:
| 
| 	rasmus at iselin ~/src/RODBC % R CMD INSTALL RODBC --with-odbc-manager=odbc
| 	Warning: unknown option ?--with-odbc-manager=odbc?
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

These runs are not doing what you think they are doing.  The switch applies
to calling 'configure' directly (which I recommend you do for debugging). For
builds from 'R CMD INSTALL ...' you need another indirection, see --help there.

If I were you, I'd try to mimick what 'configure' does and compile and link a
minimal C program against either of the two to demonstrate "you can". The
next step then is to make 'configure' do it too, ideally without switches.
Then the R package has a better-than-fair chance of installing.

Dirk

-- 
https://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||or|@@v@nderh@eghe @end|ng |rom |nbo@be  Tue Mar 30 15:44:42 2021
From: ||or|@@v@nderh@eghe @end|ng |rom |nbo@be (Floris Vanderhaeghe)
Date: Tue, 30 Mar 2021 15:44:42 +0200
Subject: [R-pkg-devel] CRAN note about \href{https://doi.org/...}{label} in
 Rd files
Message-ID: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>

Hi,

When running R CMD check on R-devel, a CRAN note appears about 
\href{https://doi.org/...}{label} in Rd files. Like:

Found the following URLs which should use \doi (with the DOI name only):
 ? File ?read_GRTSmh.Rd?:
 ??? https://doi.org/10.5281/zenodo.2611233
 ??? https://doi.org/10.5281/zenodo.3354403
 ? File ?read_GRTSmh_base4frac.Rd?:
 ??? https://doi.org/10.5281/zenodo.3354401

(Full output is at 
https://github.com/inbo/n2khab/runs/2219662325?check_suite_focus=true#step:10:35)

The note does not appear in R 4.0.4.

The cause is documentation hyperlinks to doi.org, ** inside \href{} **:

./man/read_GRTSmh.Rd:42:\href{https://doi.org/10.5281/zenodo.2611233}{Zenodo}, 
is a monolayered GeoTIFF
./man/read_GRTSmh.Rd:73:\href{https://doi.org/10.5281/zenodo.3354403}{Zenodo}, 
and can only be
./man/read_GRTSmh_base4frac.Rd:33:\href{https://doi.org/10.5281/zenodo.3354401}{Zenodo}.
./man/read_GRTSmh_diffres.Rd:45:at 
\href{https://doi.org/10.5281/zenodo.3354405}{Zenodo}), composed of
./man/read_habitatmap_stdized.Rd:68:\href{https://doi.org/10.5281/zenodo.3355192}{Zenodo}, 
that
./man/read_habitatmap_terr.Rd:117:\href{https://doi.org/10.5281/zenodo.3468948}{Zenodo}, 
that contains:
./man/read_habitatquarries.Rd:70:\href{https://doi.org/10.5281/zenodo.4072967}{Zenodo}, 
that contains:
./man/read_habitatsprings.Rd:83:\href{https://doi.org/10.5281/zenodo.3550994}{Zenodo}.
./man/read_soilmap.Rd:225:\href{https://doi.org/10.5281/zenodo.3732903}{Zenodo}.
./man/read_watercourse_100mseg.Rd:73:\href{https://doi.org/10.5281/zenodo.4452577}{Zenodo}, 
and contains two
./man/read_watercourse_100mseg.Rd:83:\href{https://doi.org/10.5281/zenodo.4420904}{\code{watercourses}} 
data
./man/read_watersurfaces_hab.Rd:66:\href{https://doi.org/10.5281/zenodo.3386857}{watersurface 
map of Flanders}.
./man/read_watersurfaces_hab.Rd:71:\href{https://doi.org/10.5281/zenodo.3374645}{Zenodo}, 
that contains:


Can this be resolved using \doi{} as suggested, while still resulting in 
a working link to doi.org? I didn't find a way to do that.

Perhaps a 'https://doi.org' address which does not show as such in the 
documentation (because of the clickable label) should still be allowed.


With regards

Floris Vanderhaeghe


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 30 16:20:03 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 30 Mar 2021 10:20:03 -0400
Subject: [R-pkg-devel] 
 CRAN note about \href{https://doi.org/...}{label} in Rd files
In-Reply-To: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
References: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
Message-ID: <cf779023-7d99-10e5-4934-1725c3ac6b40@gmail.com>

On 30/03/2021 9:44 a.m., Floris Vanderhaeghe wrote:
> Hi,
> 
> When running R CMD check on R-devel, a CRAN note appears about
> \href{https://doi.org/...}{label} in Rd files. Like:
> 
> Found the following URLs which should use \doi (with the DOI name only):
>   ? File ?read_GRTSmh.Rd?:
>   ??? https://doi.org/10.5281/zenodo.2611233
>   ??? https://doi.org/10.5281/zenodo.3354403
>   ? File ?read_GRTSmh_base4frac.Rd?:
>   ??? https://doi.org/10.5281/zenodo.3354401
> 
> (Full output is at
> https://github.com/inbo/n2khab/runs/2219662325?check_suite_focus=true#step:10:35)
> 
> The note does not appear in R 4.0.4.
> 
> The cause is documentation hyperlinks to doi.org, ** inside \href{} **:
> 
> ./man/read_GRTSmh.Rd:42:\href{https://doi.org/10.5281/zenodo.2611233}{Zenodo},
> is a monolayered GeoTIFF
> ./man/read_GRTSmh.Rd:73:\href{https://doi.org/10.5281/zenodo.3354403}{Zenodo},
> and can only be
> ./man/read_GRTSmh_base4frac.Rd:33:\href{https://doi.org/10.5281/zenodo.3354401}{Zenodo}.
> ./man/read_GRTSmh_diffres.Rd:45:at
> \href{https://doi.org/10.5281/zenodo.3354405}{Zenodo}), composed of
> ./man/read_habitatmap_stdized.Rd:68:\href{https://doi.org/10.5281/zenodo.3355192}{Zenodo},
> that
> ./man/read_habitatmap_terr.Rd:117:\href{https://doi.org/10.5281/zenodo.3468948}{Zenodo},
> that contains:
> ./man/read_habitatquarries.Rd:70:\href{https://doi.org/10.5281/zenodo.4072967}{Zenodo},
> that contains:
> ./man/read_habitatsprings.Rd:83:\href{https://doi.org/10.5281/zenodo.3550994}{Zenodo}.
> ./man/read_soilmap.Rd:225:\href{https://doi.org/10.5281/zenodo.3732903}{Zenodo}.
> ./man/read_watercourse_100mseg.Rd:73:\href{https://doi.org/10.5281/zenodo.4452577}{Zenodo},
> and contains two
> ./man/read_watercourse_100mseg.Rd:83:\href{https://doi.org/10.5281/zenodo.4420904}{\code{watercourses}}
> data
> ./man/read_watersurfaces_hab.Rd:66:\href{https://doi.org/10.5281/zenodo.3386857}{watersurface
> map of Flanders}.
> ./man/read_watersurfaces_hab.Rd:71:\href{https://doi.org/10.5281/zenodo.3374645}{Zenodo},
> that contains:
> 
> 
> Can this be resolved using \doi{} as suggested, while still resulting in
> a working link to doi.org? I didn't find a way to do that.

I just tried \doi{10.5281/zenodo.2611233} and it worked.

Duncan Murdoch
> 
> Perhaps a 'https://doi.org' address which does not show as such in the
> documentation (because of the clickable label) should still be allowed.
> 
> 
> With regards
> 
> Floris Vanderhaeghe
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||or|@@v@nderh@eghe @end|ng |rom |nbo@be  Tue Mar 30 16:39:50 2021
From: ||or|@@v@nderh@eghe @end|ng |rom |nbo@be (Floris Vanderhaeghe)
Date: Tue, 30 Mar 2021 16:39:50 +0200
Subject: [R-pkg-devel] 
 CRAN note about \href{https://doi.org/...}{label} in Rd files
In-Reply-To: <cf779023-7d99-10e5-4934-1725c3ac6b40@gmail.com>
References: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
 <cf779023-7d99-10e5-4934-1725c3ac6b40@gmail.com>
Message-ID: <7a059ae4-6322-148e-6007-ad1c72df6399@inbo.be>

> > I just tried \doi{10.5281/zenodo.2611233} and it worked. 

Sure, but what about making a hyperlink to 
https://doi.org/10.5281/zenodo.2611233 while showing "text" in the 
documentation, as in \href{wwwaddress}{text}. I assume the CRAN note 
appears because it wants literal DOI strings in the documentation to be 
specified with \doi{}. However with \href{} the DOI string remains hidden.

href{\doi{10.5281/zenodo.2611233}}{text} is a non-functional link while 
\href{https://doi.org/10.5281/zenodo.2611233}{text} is functional.


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Mar 30 18:22:23 2021
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 30 Mar 2021 16:22:23 +0000
Subject: [R-pkg-devel] 
 CRAN note about \href{https://doi.org/...}{label} in Rd files
In-Reply-To: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
References: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
Message-ID: <LOYP265MB2015954314983942F1374B9DAE7D9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>

> When running R CMD check on R-devel, a CRAN note appears about \href{https://doi.org/...}{label} in Rd files...
>... Can this be resolved using \doi{} as suggested, while still resulting in a working link to doi.org? I didn't find a way to do that.

This is a recent addition to R checks. I am pretty sure that \doi{} with the suggested syntax does produce proper links in the documentation.

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Floris Vanderhaeghe
Sent: 30 March 2021 14:45
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] CRAN note about \href{https://doi.org/...}{label} in Rd files

Hi,

When running R CMD check on R-devel, a CRAN note appears about \href{https://doi.org/...}{label} in Rd files. Like:

Found the following URLs which should use \doi (with the DOI name only):
 ? File ?read_GRTSmh.Rd?:
 ??? https://doi.org/10.5281/zenodo.2611233
 ??? https://doi.org/10.5281/zenodo.3354403
 ? File ?read_GRTSmh_base4frac.Rd?:
 ??? https://doi.org/10.5281/zenodo.3354401

(Full output is at
https://github.com/inbo/n2khab/runs/2219662325?check_suite_focus=true#step:10:35)

The note does not appear in R 4.0.4.

The cause is documentation hyperlinks to doi.org, ** inside \href{} **:

./man/read_GRTSmh.Rd:42:\href{https://doi.org/10.5281/zenodo.2611233}{Zenodo},
is a monolayered GeoTIFF
./man/read_GRTSmh.Rd:73:\href{https://doi.org/10.5281/zenodo.3354403}{Zenodo},
and can only be
./man/read_GRTSmh_base4frac.Rd:33:\href{https://doi.org/10.5281/zenodo.3354401}{Zenodo}.
./man/read_GRTSmh_diffres.Rd:45:at
\href{https://doi.org/10.5281/zenodo.3354405}{Zenodo}), composed of ./man/read_habitatmap_stdized.Rd:68:\href{https://doi.org/10.5281/zenodo.3355192}{Zenodo},
that
./man/read_habitatmap_terr.Rd:117:\href{https://doi.org/10.5281/zenodo.3468948}{Zenodo},
that contains:
./man/read_habitatquarries.Rd:70:\href{https://doi.org/10.5281/zenodo.4072967}{Zenodo},
that contains:
./man/read_habitatsprings.Rd:83:\href{https://doi.org/10.5281/zenodo.3550994}{Zenodo}.
./man/read_soilmap.Rd:225:\href{https://doi.org/10.5281/zenodo.3732903}{Zenodo}.
./man/read_watercourse_100mseg.Rd:73:\href{https://doi.org/10.5281/zenodo.4452577}{Zenodo},
and contains two
./man/read_watercourse_100mseg.Rd:83:\href{https://doi.org/10.5281/zenodo.4420904}{\code{watercourses}}
data
./man/read_watersurfaces_hab.Rd:66:\href{https://doi.org/10.5281/zenodo.3386857}{watersurface
map of Flanders}.
./man/read_watersurfaces_hab.Rd:71:\href{https://doi.org/10.5281/zenodo.3374645}{Zenodo},
that contains:


Can this be resolved using \doi{} as suggested, while still resulting in a working link to doi.org? I didn't find a way to do that.

Perhaps a 'https://doi.org' address which does not show as such in the documentation (because of the clickable label) should still be allowed.


With regards

Floris Vanderhaeghe

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 30 18:36:33 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 30 Mar 2021 12:36:33 -0400
Subject: [R-pkg-devel] 
 CRAN note about \href{https://doi.org/...}{label} in Rd files
In-Reply-To: <7a059ae4-6322-148e-6007-ad1c72df6399@inbo.be>
References: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
 <cf779023-7d99-10e5-4934-1725c3ac6b40@gmail.com>
 <7a059ae4-6322-148e-6007-ad1c72df6399@inbo.be>
Message-ID: <ad7da37c-d6ed-18f7-b5f1-85141c00b1c5@gmail.com>

On 30/03/2021 10:39 a.m., Floris Vanderhaeghe wrote:
>>> I just tried \doi{10.5281/zenodo.2611233} and it worked.
> 
> Sure, but what about making a hyperlink to
> https://doi.org/10.5281/zenodo.2611233 while showing "text" in the
> documentation, as in \href{wwwaddress}{text}. I assume the CRAN note
> appears because it wants literal DOI strings in the documentation to be
> specified with \doi{}. However with \href{} the DOI string remains hidden.
> 
> href{\doi{10.5281/zenodo.2611233}}{text} is a non-functional link while
> \href{https://doi.org/10.5281/zenodo.2611233}{text} is functional.
> 

No, I don't think there's currently any way to do that.  Your choices 
are probably to link to whatever the DOI links to, e.g. 
\href{https://zenodo.org/record/2682323}{text} and live with the fact 
that the URL might change tomorrow, or show the DOI.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 30 18:46:45 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 30 Mar 2021 12:46:45 -0400
Subject: [R-pkg-devel] 
 CRAN note about \href{https://doi.org/...}{label} in Rd files
In-Reply-To: <ad7da37c-d6ed-18f7-b5f1-85141c00b1c5@gmail.com>
References: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
 <cf779023-7d99-10e5-4934-1725c3ac6b40@gmail.com>
 <7a059ae4-6322-148e-6007-ad1c72df6399@inbo.be>
 <ad7da37c-d6ed-18f7-b5f1-85141c00b1c5@gmail.com>
Message-ID: <63c1e7b7-768f-27c0-7e67-84d88e1cdf6d@gmail.com>

On 30/03/2021 12:36 p.m., Duncan Murdoch wrote:
> On 30/03/2021 10:39 a.m., Floris Vanderhaeghe wrote:
>>>> I just tried \doi{10.5281/zenodo.2611233} and it worked.
>>
>> Sure, but what about making a hyperlink to
>> https://doi.org/10.5281/zenodo.2611233 while showing "text" in the
>> documentation, as in \href{wwwaddress}{text}. I assume the CRAN note
>> appears because it wants literal DOI strings in the documentation to be
>> specified with \doi{}. However with \href{} the DOI string remains hidden.
>>
>> href{\doi{10.5281/zenodo.2611233}}{text} is a non-functional link while
>> \href{https://doi.org/10.5281/zenodo.2611233}{text} is functional.
>>
> 
> No, I don't think there's currently any way to do that.  Your choices
> are probably to link to whatever the DOI links to, e.g.
> \href{https://zenodo.org/record/2682323}{text} and live with the fact
> that the URL might change tomorrow, or show the DOI.

One other suggestion:  define your own \doi{} macro.  The current 
definition (from R_HOME/share/Rd/macros/system.Rd) is

\newcommand{\doi}{\Sexpr[results=rd,stage=build]{tools:::Rd_expr_doi("#1")}}

You could make a two-argument variant on this.  You could even submit it 
as a patch on Bugzilla if you think others would like it.

Duncan Murdoch


From ||or|@@v@nderh@eghe @end|ng |rom |nbo@be  Tue Mar 30 19:33:26 2021
From: ||or|@@v@nderh@eghe @end|ng |rom |nbo@be (Floris Vanderhaeghe)
Date: Tue, 30 Mar 2021 19:33:26 +0200
Subject: [R-pkg-devel] 
 CRAN note about \href{https://doi.org/...}{label} in Rd files
In-Reply-To: <63c1e7b7-768f-27c0-7e67-84d88e1cdf6d@gmail.com>
References: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
 <cf779023-7d99-10e5-4934-1725c3ac6b40@gmail.com>
 <7a059ae4-6322-148e-6007-ad1c72df6399@inbo.be>
 <ad7da37c-d6ed-18f7-b5f1-85141c00b1c5@gmail.com>
 <63c1e7b7-768f-27c0-7e67-84d88e1cdf6d@gmail.com>
Message-ID: <3ce1e4d7-3381-b783-c11c-dffb487d8640@inbo.be>

Op 30/03/2021 om 18:46 schreef Duncan Murdoch:
> On 30/03/2021 12:36 p.m., Duncan Murdoch wrote:
>> On 30/03/2021 10:39 a.m., Floris Vanderhaeghe wrote:
>>>>> I just tried \doi{10.5281/zenodo.2611233} and it worked.
>>>
>>> Sure, but what about making a hyperlink to
>>> https://doi.org/10.5281/zenodo.2611233 while showing "text" in the
>>> documentation, as in \href{wwwaddress}{text}. I assume the CRAN note
>>> appears because it wants literal DOI strings in the documentation to be
>>> specified with \doi{}. However with \href{} the DOI string remains 
>>> hidden.
>>>
>>> href{\doi{10.5281/zenodo.2611233}}{text} is a non-functional link while
>>> \href{https://doi.org/10.5281/zenodo.2611233}{text} is functional.
>>>
>>
>> No, I don't think there's currently any way to do that.? Your choices
>> are probably to link to whatever the DOI links to, e.g.
>> \href{https://zenodo.org/record/2682323}{text} and live with the fact
>> that the URL might change tomorrow, or show the DOI.
>
> One other suggestion:? define your own \doi{} macro.? The current 
> definition (from R_HOME/share/Rd/macros/system.Rd) is
>
> \newcommand{\doi}{\Sexpr[results=rd,stage=build]{tools:::Rd_expr_doi("#1")}} 
>
>
> You could make a two-argument variant on this.? You could even submit 
> it as a patch on Bugzilla if you think others would like it.
>
> Duncan Murdoch

Thanks for the helpful answers Duncan, I will consider.

Best

Floris


From ||or|@@v@nderh@eghe @end|ng |rom |nbo@be  Wed Mar 31 10:29:18 2021
From: ||or|@@v@nderh@eghe @end|ng |rom |nbo@be (Floris Vanderhaeghe)
Date: Wed, 31 Mar 2021 10:29:18 +0200
Subject: [R-pkg-devel] 
 CRAN note about \href{https://doi.org/...}{label} in Rd files
In-Reply-To: <LOYP265MB2015954314983942F1374B9DAE7D9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
References: <4d79be0b-5bea-51b3-4b9e-b75678593e96@inbo.be>
 <LOYP265MB2015954314983942F1374B9DAE7D9@LOYP265MB2015.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <5456b02b-f8cb-17f3-1b21-ac54362d5954@inbo.be>

> This is a recent addition to R checks. I am pretty sure that \doi{} with the suggested syntax does produce proper links in the documentation.
>
> Georgi Boshnakov
>
Indeed, \doi{} produces proper links. But I think the note should not be 
triggered when a https://doi.org address is used inside 
\href{doiURL}{text}, where the purpose is to show "text", not a 
DOI-string in standard format. In that way it would remain possible to 
link "text" to a stable doi-URL.

Using \href{doiURL}{text} currently triggers the DOI note.


From thu|@en @end|ng |rom gm@||@com  Wed Mar 31 11:55:30 2021
From: thu|@en @end|ng |rom gm@||@com (Tim Hulsen)
Date: Wed, 31 Mar 2021 11:55:30 +0200
Subject: [R-pkg-devel] checking LazyData ... NOTE 'LazyData' is specified
 without a 'data' directory
Message-ID: <CAHMN1Pz-LD0vkP0HLJr_q3jDj9QgwfGtLCFY5UK8W9JiuCU04g@mail.gmail.com>

When submitting my package to CRAN, I get the message:
checking LazyData ... NOTE
'LazyData' is specified without a 'data' directory

What can i do about this?

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 31 14:24:28 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 31 Mar 2021 08:24:28 -0400
Subject: [R-pkg-devel] 
 checking LazyData ... NOTE 'LazyData' is specified
 without a 'data' directory
In-Reply-To: <CAHMN1Pz-LD0vkP0HLJr_q3jDj9QgwfGtLCFY5UK8W9JiuCU04g@mail.gmail.com>
References: <CAHMN1Pz-LD0vkP0HLJr_q3jDj9QgwfGtLCFY5UK8W9JiuCU04g@mail.gmail.com>
Message-ID: <87bd6ba2-86b4-94f5-d7e9-fa18dc16bcbb@gmail.com>

On 31/03/2021 5:55 a.m., Tim Hulsen wrote:
> When submitting my package to CRAN, I get the message:
> checking LazyData ... NOTE
> 'LazyData' is specified without a 'data' directory
> 
> What can i do about this?
> 

Don't specify LazyData.  If that doesn't help, give us a bit more 
information, e.g. a link to your source.

Duncan Murdoch


From w@r@||e|@berger @end|ng |rom un|@tr@@|r  Wed Mar 31 14:27:51 2021
From: w@r@||e|@berger @end|ng |rom un|@tr@@|r (RAFFELSBERGER Wolfgang (IGBMC))
Date: Wed, 31 Mar 2021 14:27:51 +0200 (CEST)
Subject: [R-pkg-devel] 
 checking LazyData ... NOTE 'LazyData' is specified
 without a 'data' directory
In-Reply-To: <CAHMN1Pz-LD0vkP0HLJr_q3jDj9QgwfGtLCFY5UK8W9JiuCU04g@mail.gmail.com>
References: <CAHMN1Pz-LD0vkP0HLJr_q3jDj9QgwfGtLCFY5UK8W9JiuCU04g@mail.gmail.com>
Message-ID: <1250657557.2135150.1617193671025.JavaMail.zimbra@unistra.fr>

Dear Tim,

this has already been addressed on stackoverflow and other places.
In my case just removing the line 'LazyData: true' from the description did the job.

Wolfgang

----- Mail original -----
De: "Tim Hulsen" <thulsen at gmail.com>
?: "r-package-devel" <r-package-devel at r-project.org>
Envoy?: Mercredi 31 Mars 2021 11:55:30
Objet: [R-pkg-devel] checking LazyData ... NOTE 'LazyData' is specified without a 'data' directory

When submitting my package to CRAN, I get the message:
checking LazyData ... NOTE
'LazyData' is specified without a 'data' directory

What can i do about this?

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From thu|@en @end|ng |rom gm@||@com  Wed Mar 31 14:28:10 2021
From: thu|@en @end|ng |rom gm@||@com (Tim Hulsen)
Date: Wed, 31 Mar 2021 14:28:10 +0200
Subject: [R-pkg-devel] 
 checking LazyData ... NOTE 'LazyData' is specified
 without a 'data' directory
In-Reply-To: <87bd6ba2-86b4-94f5-d7e9-fa18dc16bcbb@gmail.com>
References: <87bd6ba2-86b4-94f5-d7e9-fa18dc16bcbb@gmail.com>
Message-ID: <13249B2D-8CA2-443F-A274-319A813403BF@gmail.com>

I don?t believe I do anything with lazydata.

https://cran.r-project.org/web/checks/check_results_BioVenn.html



> Op 31 mrt. 2021 om 14:24 heeft Duncan Murdoch <murdoch.duncan at gmail.com> het volgende geschreven:
> 
> ?On 31/03/2021 5:55 a.m., Tim Hulsen wrote:
>> When submitting my package to CRAN, I get the message:
>> checking LazyData ... NOTE
>> 'LazyData' is specified without a 'data' directory
>> What can i do about this?
> 
> Don't specify LazyData.  If that doesn't help, give us a bit more information, e.g. a link to your source.
> 
> Duncan Murdoch

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 31 14:31:04 2021
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 31 Mar 2021 08:31:04 -0400
Subject: [R-pkg-devel] 
 checking LazyData ... NOTE 'LazyData' is specified
 without a 'data' directory
In-Reply-To: <13249B2D-8CA2-443F-A274-319A813403BF@gmail.com>
References: <87bd6ba2-86b4-94f5-d7e9-fa18dc16bcbb@gmail.com>
 <13249B2D-8CA2-443F-A274-319A813403BF@gmail.com>
Message-ID: <e0316015-f0e5-2600-4c84-ffdc5156b687@gmail.com>

On 31/03/2021 8:28 a.m., Tim Hulsen wrote:
> I don?t believe I do anything with lazydata.

Your DESCRIPTION file specifies it is TRUE.

Duncan Murdoch

> 
> https://cran.r-project.org/web/checks/check_results_BioVenn.html 
> <https://cran.r-project.org/web/checks/check_results_BioVenn.html>
> 
> 
> 
>> Op 31 mrt. 2021 om 14:24 heeft Duncan Murdoch 
>> <murdoch.duncan at gmail.com> het volgende geschreven:
>>
>> ?On 31/03/2021 5:55 a.m., Tim Hulsen wrote:
>>> When submitting my package to CRAN, I get the message:
>>> checking LazyData ... NOTE
>>> 'LazyData' is specified without a 'data' directory
>>> What can i do about this?
>>
>> Don't specify LazyData. ?If that doesn't help, give us a bit more 
>> information, e.g. a link to your source.
>>
>> Duncan Murdoch


