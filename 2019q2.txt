From edd @end|ng |rom deb|@n@org  Tue Apr  2 16:10:27 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 2 Apr 2019 09:10:27 -0500
Subject: [R-pkg-devel] R 3.6.0, rpath and StagedInstall
Message-ID: <23715.27987.303848.432352@rob.eddelbuettel.com>


I have one (or two) packages that use an external library. So we use -rpath
to tell the dynamic linker about it.

But R 3.6.0 dislikes this and howls about an absolute path ending in
error. So we use StagedInstall: No.  Which gets a NOTE.  Which is still not
ideal and I would like to avoid it, but am short of ideas as to how.

Has anybody else encountered this and found a workaround, or can think of one?

Thanks,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Apr  2 18:35:08 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 2 Apr 2019 18:35:08 +0200
Subject: [R-pkg-devel] Note on check of DOI: string
Message-ID: <alpine.LFD.2.21.1904021820540.4518@reclus.nhh.no>

Using https://cran.r-project.org/web/packages/submission_checklist.html, I 
have a real but non-conformant DOI string in my DESCRIPTION file:

https://doi.org/10.1002/(SICI)1097-0258(19990830)18:16<2147::AID-SIM179>3.0.CO;2-I

giving in check --as-cran:

Found the following (possibly) invalid DOIs:
   DOI: 10.1002/(SICI)1097-0258(19990830)18:16<2147::AID-SIM179
     From: DESCRIPTION
     Status: Bad Request
     Message: 400

as parsing the string appears not to parse the embedded ">" correctly. Is 
escaping possible? Easiest would be just dropping the DOI in this case, as 
it is not rendering correctly. It looks like the pattern string in 
tools/R/doitools.R line 33 is over-eager.

Hints welcome,

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr  2 18:43:58 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 2 Apr 2019 18:43:58 +0200
Subject: [R-pkg-devel] Note on check of DOI: string
In-Reply-To: <alpine.LFD.2.21.1904021820540.4518@reclus.nhh.no>
References: <alpine.LFD.2.21.1904021820540.4518@reclus.nhh.no>
Message-ID: <74a79fda-d684-226a-031b-f5496454efe9@statistik.tu-dortmund.de>



On 02.04.2019 18:35, Roger Bivand wrote:
> Using https://cran.r-project.org/web/packages/submission_checklist.html, 
> I have a real but non-conformant DOI string in my DESCRIPTION file:
> 
> https://doi.org/10.1002/(SICI)1097-0258(19990830)18:16<2147::AID-SIM179>3.0.CO;2-I 
> 
> 
> giving in check --as-cran:
> 
> Found the following (possibly) invalid DOIs:
>  ? DOI: 10.1002/(SICI)1097-0258(19990830)18:16<2147::AID-SIM179
>  ??? From: DESCRIPTION
>  ??? Status: Bad Request
>  ??? Message: 400
> 
> as parsing the string appears not to parse the embedded ">" correctly. 
> Is escaping possible? Easiest would be just dropping the DOI in this 
> case, as it is not rendering correctly. It looks like the pattern string 
> in tools/R/doitools.R line 33 is over-eager.
> 
> Hints welcome,

URLencode() it for the DESCRIPTION file.

Best,
Uwe


> Roger
>


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Apr  2 19:14:35 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 2 Apr 2019 19:14:35 +0200
Subject: [R-pkg-devel] Note on check of DOI: string
In-Reply-To: <74a79fda-d684-226a-031b-f5496454efe9@statistik.tu-dortmund.de>
References: <alpine.LFD.2.21.1904021820540.4518@reclus.nhh.no>
 <74a79fda-d684-226a-031b-f5496454efe9@statistik.tu-dortmund.de>
Message-ID: <alpine.LFD.2.21.1904021912290.4518@reclus.nhh.no>

On Tue, 2 Apr 2019, Uwe Ligges wrote:

>
>
> On 02.04.2019 18:35, Roger Bivand wrote:
>>  Using https://cran.r-project.org/web/packages/submission_checklist.html, I
>>  have a real but non-conformant DOI string in my DESCRIPTION file:
>>
>>  https://doi.org/10.1002/(SICI)1097-0258(19990830)18:16<2147::AID-SIM179>3.0.CO;2-I
>>
>>  giving in check --as-cran:
>>
>>  Found the following (possibly) invalid DOIs:
>>   ? DOI: 10.1002/(SICI)1097-0258(19990830)18:16<2147::AID-SIM179
>>   ??? From: DESCRIPTION
>>   ??? Status: Bad Request
>>   ??? Message: 400
>>
>>  as parsing the string appears not to parse the embedded ">" correctly. Is
>>  escaping possible? Easiest would be just dropping the DOI in this case, as
>>  it is not rendering correctly. It looks like the pattern string in
>>  tools/R/doitools.R line 33 is over-eager.
>>
>>  Hints welcome,
>
> URLencode() it for the DESCRIPTION file.

Thanks, that is much simpler than expecting processing DESCRIPTION to sort 
it out: URLencode() the string in R and copy/paste the output into the 
DESCRIPTION file.

Best wishes,

Roger

>
> Best,
> Uwe
>
>
>>  Roger
>> 
>
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Apr  2 19:58:08 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 2 Apr 2019 10:58:08 -0700
Subject: Splitting maintainer from creator
Message-ID: <8302E383-045C-4E13-ADE6-1A08C7E6C5FB@noaa.gov>

Hi All;

In defining the roles in Description file of a package,  has there been any thought of adding a role of maintainer separate from creator  (cre).  While the definition given says:

> cre: the creator or maintainer, the person you should bother if you have problems.

that "or" separates two really distinct roles.  To me the sense of the word "creator' is the person or persons who originally created the package.  A present maintainer may well have only added patches to the present package,  but would need to be defined as "cre" to be the one to receive emails.

Thanks,

-Roy

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From bbo|ker @end|ng |rom gm@||@com  Tue Apr  2 20:40:55 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 2 Apr 2019 14:40:55 -0400
Subject: [R-pkg-devel] Splitting maintainer from creator
In-Reply-To: <mailman.3704.16.1554227900.8580.r-package-devel@r-project.org>
References: <mailman.3704.16.1554227900.8580.r-package-devel@r-project.org>
Message-ID: <CABghstTz_krOCg+YpTeO=N-9XkxD6ARvKm30xAqsbrKehRuU1Q@mail.gmail.com>

I think the problem is that MARC terms
<https://www.loc.gov/marc/relators/relaterm.html> don't seem to have
any choices analogous to "maintainer".

Author [aut] A person, family, or organization responsible for
creating a work that is primarily textual in content, regardless of
media type (e.g., printed text, spoken word, electronic text, tactile
text) or genre (e.g., poems, novels, screenplays, blogs). Use also for
persons, etc., creating a new work by paraphrasing, rewriting, or
adapting works by another creator such that the modification has
substantially changed the nature and content of the original or
changed the medium of expression

{Note under "Joint author": use "Author".  There doesn't seem to be a
concept of "primary author" here.}

Creator [cre] A person or organization responsible for the
intellectual or artistic content of a resource

If we were starting again, we might choose maintainer="Editor" ...

Editor [edt] A person, family, or organization contributing to a
resource by revising or elucidating the content, e.g., adding an
introduction, notes, or other critical matter. An editor may also
prepare a resource for production, publication, or distribution. For
major revisions, adaptations, etc., that substantially change the
nature and content of the original work, resulting in a new work, see
author

Other interesting tags:

Conceptor [ccp] A person or organization responsible for the original
idea on which a work is based, this includes the scientific author of
an audio-visual item and the conceptor of an advertisement

Dubious author [dub] A person or organization to which authorship has
been dubiously or incorrectly ascribed

On Tue, Apr 2, 2019 at 1:58 PM Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:
>
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> To: "Ma?lle SALMON via R-package-devel" <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 2 Apr 2019 10:58:08 -0700
> Subject: Splitting maintainer from creator
> Hi All;
>
> In defining the roles in Description file of a package,  has there been any thought of adding a role of maintainer separate from creator  (cre).  While the definition given says:
>
> > cre: the creator or maintainer, the person you should bother if you have problems.
>
> that "or" separates two really distinct roles.  To me the sense of the word "creator' is the person or persons who originally created the package.  A present maintainer may well have only added patches to the present package,  but would need to be defined as "cre" to be the one to receive emails.
>
> Thanks,
>
> -Roy
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> To: "Ma?lle SALMON via R-package-devel" <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 2 Apr 2019 10:58:08 -0700
> Subject: [R-pkg-devel] Splitting maintainer from creator
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Tue Apr  2 21:21:01 2019
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Tue, 2 Apr 2019 12:21:01 -0700
Subject: [R-pkg-devel] CRAN Submission Stalled
Message-ID: <CAGmyFCGP5ncii-XUmSrncfPQOGS4SiXarv5y=tghw7gwiNh6sA@mail.gmail.com>

Dear Community,

I am in the process of submitting an update for my package
(https://cran.r-project.org/package=pense), but it does not pass the
incoming checks. After discussion on this list (thread "CRAN incoming
checks fail due to non-staged installation"), I am fairly certain the
issue is a false positive, which I also told the CRAN team in the
reply to the rejection (to CRAN-submissions at r-project.org).

I haven't heard back from the CRAN team since over a week and I wanted
to double check if I have to take other steps (other than just
replying to the automated message) or if I simply have to be more
patient.

I am concerned because the old release of the package did not pass the
CRAN checks for R-devel anymore, but the submission for the updated
version has been taking longer than expected and the package is now
archived on CRAN. I have been given 2 weeks to fix the problems, but
the submission process is already taking 3 weeks.

Thanks,
David


From c@rtogr@iiow m@iii@g oii gm@ii@com  Wed Apr  3 20:11:10 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Wed, 3 Apr 2019 18:11:10 +0000 (UTC)
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
In-Reply-To: <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
Message-ID: <414595032.26250015.1554315070414@mail.yahoo.com>

 Hi, 

I come back to you? because I have always the problem with devtools::check of my package. 

I used the command to check my package with R-devel : 
sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz

When I start the rmd file there is a warning due to package dplyr : 
????????Attaching package: 'dplyr'
????????The following objects are masked from 'package:stats':
??????????????????? filter, lag
????????The following objects are masked from 'package:base':
??????????????????? intersect, setdiff, setequal, union

The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
So, the package conflicted avoid to have this warning. 

But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)

Can you help me to solve this issue if tit's possible? 
Thanks in advance to your help ! 
Sylvain
-----------------
Below extract of 00check.log 
* checking whether package ?cartograflow? can be installed ... ERROR
Installation failed.
See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
* DONE
Status: 1 ERROR, 1 NOTE

Below 00install.out 
* installing *source* package ?cartograflow? ...
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
? there is no package called ?conflicted?
Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
Ex?cution arr?t?e
ERROR: lazy loading failed for package ?cartograflow?
* removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?







    Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :  
 
 FWIW, you should be able to reproduce at least the following NOTEs
with your current R 3.5.2 and R CMD check --as-cran:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?cartogRaflow <cartograflow at gmail.com>?

New submission

Version contains large components (0.0.0.9000)

Possibly mis-spelled words in DESCRIPTION:
? flowmapping (7:41)

Author field should be Authors at R.? Current value is:
? c(person("Fran?oise", "Bahoken", email =
"francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
? ? ? ? ? ? person("Sylvain", "Blondeau", email =
"blondeau.sylvain at yahoo.fr", role = c("aut"))

The Title field should be in title case. Current version is:
?thematic cartography of flows and movements?
In title case that is:
?Thematic Cartography of Flows and Movements?

Those are all classical mistakes ("we've all been there").? The
vignette errors may or may not be specific to R devel.

/Henrik

On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
<cartograflow at gmail.com> wrote:
>
> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
> I confirm that I didn't received ? error message when I've made dev_tool::check.
> How can I solve my problem ?
> Thanks in advance Sylvain
>
>
> nvoy? depuis Yahoo Mail pour Android
>
>? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>
> Not sure about devtools which we do not use on CRAN, but simply
>
> R CMD check --as-cran
>
> with a recent R-devel? version on the package tarball should reproduce
> the findings.
>
> Best,
> Uwe Ligges
>
>
> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
> > Hello,
> > I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
> > Status: 1 ERROR, 2 WARNINGs, 1 NOTE
> >
> > So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
> > ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
> > Duration: 54.6s
> > 0 errors ? | 0 warnings ? | 0 notes ?
> > R CMD check succeeded
> > Can you? help me to fix the problem?
> > Thanks in advance to your replySylvain
> >? ? [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
>? ? ? ? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel  
	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Wed Apr  3 20:20:50 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 3 Apr 2019 14:20:50 -0400
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
In-Reply-To: <414595032.26250015.1554315070414@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
Message-ID: <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>


 Have you installed the 'conflicted' package on your local machine
(i.e., the machine you're running the checks on)?

On 2019-04-03 2:11 p.m., cartograflow at gmail.com wrote:
>  Hi, 
> 
> I come back to you? because I have always the problem with devtools::check of my package. 
> 
> I used the command to check my package with R-devel : 
> sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
> 
> When I start the rmd file there is a warning due to package dplyr : 
> ????????Attaching package: 'dplyr'
> ????????The following objects are masked from 'package:stats':
> ??????????????????? filter, lag
> ????????The following objects are masked from 'package:base':
> ??????????????????? intersect, setdiff, setequal, union
> 
> The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
> So, the package conflicted avoid to have this warning. 
> 
> But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)
> 
> Can you help me to solve this issue if tit's possible? 
> Thanks in advance to your help ! 
> Sylvain
> -----------------
> Below extract of 00check.log 
> * checking whether package ?cartograflow? can be installed ... ERROR
> Installation failed.
> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
> * DONE
> Status: 1 ERROR, 1 NOTE
> 
> Below 00install.out 
> * installing *source* package ?cartograflow? ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
> ? there is no package called ?conflicted?
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
> Ex?cution arr?t?e
> ERROR: lazy loading failed for package ?cartograflow?
> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
> 
> 
> 
> 
> 
> 
> 
>     Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :  
>  
>  FWIW, you should be able to reproduce at least the following NOTEs
> with your current R 3.5.2 and R CMD check --as-cran:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?cartogRaflow <cartograflow at gmail.com>?
> 
> New submission
> 
> Version contains large components (0.0.0.9000)
> 
> Possibly mis-spelled words in DESCRIPTION:
> ? flowmapping (7:41)
> 
> Author field should be Authors at R.? Current value is:
> ? c(person("Fran?oise", "Bahoken", email =
> "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
> ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
> "blondeau.sylvain at yahoo.fr", role = c("aut"))
> 
> The Title field should be in title case. Current version is:
> ?thematic cartography of flows and movements?
> In title case that is:
> ?Thematic Cartography of Flows and Movements?
> 
> Those are all classical mistakes ("we've all been there").? The
> vignette errors may or may not be specific to R devel.
> 
> /Henrik
> 
> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
> <cartograflow at gmail.com> wrote:
>>
>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
>> I confirm that I didn't received ? error message when I've made dev_tool::check.
>> How can I solve my problem ?
>> Thanks in advance Sylvain
>>
>>
>> nvoy? depuis Yahoo Mail pour Android
>>
>> ? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>>
>> Not sure about devtools which we do not use on CRAN, but simply
>>
>> R CMD check --as-cran
>>
>> with a recent R-devel? version on the package tarball should reproduce
>> the findings.
>>
>> Best,
>> Uwe Ligges
>>
>>
>> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
>>> Hello,
>>> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>
>>> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
>>> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
>>> Duration: 54.6s
>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>> R CMD check succeeded
>>> Can you? help me to fix the problem?
>>> Thanks in advance to your replySylvain
>>> ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> ? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel  
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@rtogr@iiow m@iii@g oii gm@ii@com  Wed Apr  3 20:23:49 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Wed, 3 Apr 2019 18:23:49 +0000 (UTC)
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
In-Reply-To: <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
Message-ID: <688550801.2852760.1554315829930@mail.yahoo.com>

 Yes!

    Le mercredi 3 avril 2019 ? 20:21:59 UTC+2, Ben Bolker <bbolker at gmail.com> a ?crit :  
 
 
 Have you installed the 'conflicted' package on your local machine
(i.e., the machine you're running the checks on)?

On 2019-04-03 2:11 p.m., cartograflow at gmail.com wrote:
>? Hi, 
> 
> I come back to you? because I have always the problem with devtools::check of my package. 
> 
> I used the command to check my package with R-devel : 
> sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
> 
> When I start the rmd file there is a warning due to package dplyr : 
> ????????Attaching package: 'dplyr'
> ????????The following objects are masked from 'package:stats':
> ??????????????????? filter, lag
> ????????The following objects are masked from 'package:base':
> ??????????????????? intersect, setdiff, setequal, union
> 
> The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
> So, the package conflicted avoid to have this warning. 
> 
> But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)
> 
> Can you help me to solve this issue if tit's possible? 
> Thanks in advance to your help ! 
> Sylvain
> -----------------
> Below extract of 00check.log 
> * checking whether package ?cartograflow? can be installed ... ERROR
> Installation failed.
> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
> * DONE
> Status: 1 ERROR, 1 NOTE
> 
> Below 00install.out 
> * installing *source* package ?cartograflow? ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
> ? there is no package called ?conflicted?
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
> Ex?cution arr?t?e
> ERROR: lazy loading failed for package ?cartograflow?
> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
> 
> 
> 
> 
> 
> 
> 
>? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :? 
>? 
>? FWIW, you should be able to reproduce at least the following NOTEs
> with your current R 3.5.2 and R CMD check --as-cran:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?cartogRaflow <cartograflow at gmail.com>?
> 
> New submission
> 
> Version contains large components (0.0.0.9000)
> 
> Possibly mis-spelled words in DESCRIPTION:
> ? flowmapping (7:41)
> 
> Author field should be Authors at R.? Current value is:
> ? c(person("Fran?oise", "Bahoken", email =
> "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
> ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
> "blondeau.sylvain at yahoo.fr", role = c("aut"))
> 
> The Title field should be in title case. Current version is:
> ?thematic cartography of flows and movements?
> In title case that is:
> ?Thematic Cartography of Flows and Movements?
> 
> Those are all classical mistakes ("we've all been there").? The
> vignette errors may or may not be specific to R devel.
> 
> /Henrik
> 
> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
> <cartograflow at gmail.com> wrote:
>>
>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
>> I confirm that I didn't received ? error message when I've made dev_tool::check.
>> How can I solve my problem ?
>> Thanks in advance Sylvain
>>
>>
>> nvoy? depuis Yahoo Mail pour Android
>>
>> ? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>>
>> Not sure about devtools which we do not use on CRAN, but simply
>>
>> R CMD check --as-cran
>>
>> with a recent R-devel? version on the package tarball should reproduce
>> the findings.
>>
>> Best,
>> Uwe Ligges
>>
>>
>> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
>>> Hello,
>>> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>
>>> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
>>> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
>>> Duration: 54.6s
>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>> R CMD check succeeded
>>> Can you? help me to fix the problem?
>>> Thanks in advance to your replySylvain
>>> ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> ? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel  
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
  
	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Thu Apr  4 07:20:45 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Thu, 4 Apr 2019 05:20:45 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?q?Re=C2=A0=3ARe=3A__package_cartograflow?=
 =?utf-8?b?XzAuMC4wLjkwMDAudGFyLmd6?=
In-Reply-To: <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
Message-ID: <1555990824.18102124.1554355245299@mail.yahoo.com>


Hi,I don't know if my explanations are clear.I tried several way to solve this problem w/o success.?Someone have an idea ?Thanks in advance?

On 2019-04-03 2:11 p.m., cartograflow at gmail.com wrote:
>? Hi, 
> 
> I come back to you? because I have always the problem with devtools::check of my package. 
> 
> I used the command to check my package with R-devel : 
> sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
> 
> When I start the rmd file there is a warning due to package dplyr : 
> ????????Attaching package: 'dplyr'
> ????????The following objects are masked from 'package:stats':
> ??????????????????? filter, lag
> ????????The following objects are masked from 'package:base':
> ??????????????????? intersect, setdiff, setequal, union
> 
> The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
> So, the package conflicted avoid to have this warning. 
> 
> But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)
> 
> Can you help me to solve this issue if tit's possible? 
> Thanks in advance to your help ! 
> Sylvain
> -----------------
> Below extract of 00check.log 
> * checking whether package ?cartograflow? can be installed ... ERROR
> Installation failed.
> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
> * DONE
> Status: 1 ERROR, 1 NOTE
> 
> Below 00install.out 
> * installing *source* package ?cartograflow? ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
> ? there is no package called ?conflicted?
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
> Ex?cution arr?t?e
> ERROR: lazy loading failed for package ?cartograflow?
> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
> 
> 
> 
> 
> 
> 
> 
>? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :? 
>? 
>? FWIW, you should be able to reproduce at least the following NOTEs
> with your current R 3.5.2 and R CMD check --as-cran:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?cartogRaflow <cartograflow at gmail.com>?
> 
> New submission
> 
> Version contains large components (0.0.0.9000)
> 
> Possibly mis-spelled words in DESCRIPTION:
> ? flowmapping (7:41)
> 
> Author field should be Authors at R.? Current value is:
> ? c(person("Fran?oise", "Bahoken", email =
> "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
> ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
> "blondeau.sylvain at yahoo.fr", role = c("aut"))
> 
> The Title field should be in title case. Current version is:
> ?thematic cartography of flows and movements?
> In title case that is:
> ?Thematic Cartography of Flows and Movements?
> 
> Those are all classical mistakes ("we've all been there").? The
> vignette errors may or may not be specific to R devel.
> 
> /Henrik
> 
> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
> <cartograflow at gmail.com> wrote:
>>
>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
>> I confirm that I didn't received ? error message when I've made dev_tool::check.
>> How can I solve my problem ?
>> Thanks in advance Sylvain
>>
>>
>> nvoy? depuis Yahoo Mail pour Android
>>
>> ? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>>
>> Not sure about devtools which we do not use on CRAN, but simply
>>
>> R CMD check --as-cran
>>
>> with a recent R-devel? version on the package tarball should reproduce
>> the findings.
>>
>> Best,
>> Uwe Ligges
>>
>>
>> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
>>> Hello,
>>> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>
>>> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
>>> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
>>> Duration: 54.6s
>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>> R CMD check succeeded
>>> Can you? help me to fix the problem?
>>> Thanks in advance to your replySylvain
>>> ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> ? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel  
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
  


	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Thu Apr  4 08:00:52 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Thu, 4 Apr 2019 07:00:52 +0100
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
In-Reply-To: <688550801.2852760.1554315829930@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <688550801.2852760.1554315829930@mail.yahoo.com>
Message-ID: <CAARY7kh9bxw20Ns4UYck7tZyZb9p7aPJqOdmR1a2k8FwFhY8=A@mail.gmail.com>

Is ?conflicted? in your DESCRIPTION file? Btw, can we see the package
source somewhere?

On Wed, 3 Apr 2019 at 19:24, cartograflow at gmail.com <cartograflow at gmail.com>
wrote:

>  Yes!
>
>     Le mercredi 3 avril 2019 ? 20:21:59 UTC+2, Ben Bolker <
> bbolker at gmail.com> a ?crit :
>
>
>  Have you installed the 'conflicted' package on your local machine
> (i.e., the machine you're running the checks on)?
>
> On 2019-04-03 2:11 p.m., cartograflow at gmail.com wrote:
> >  Hi,
> >
> > I come back to you  because I have always the problem with
> devtools::check of my package.
> >
> > I used the command to check my package with R-devel :
> > sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran
> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
> >
> > When I start the rmd file there is a warning due to package dplyr :
> >         Attaching package: 'dplyr'
> >         The following objects are masked from 'package:stats':
> >                     filter, lag
> >         The following objects are masked from 'package:base':
> >                     intersect, setdiff, setequal, union
> >
> > The solve this issue I added in rmd file, description file and the
> namespace the package conflicted.
> > So, the package conflicted avoid to have this warning.
> >
> > But when I run R-devel CMD check I have a new issue that is Error in
> loadNamespace...no package called ?conflicted? (see below)
> >
> > Can you help me to solve this issue if tit's possible?
> > Thanks in advance to your help !
> > Sylvain
> > -----------------
> > Below extract of 00check.log
> > * checking whether package ?cartograflow? can be installed ... ERROR
> > Installation failed.
> > See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
> > * DONE
> > Status: 1 ERROR, 1 NOTE
> >
> > Below 00install.out
> > * installing *source* package ?cartograflow? ...
> > ** using staged installation
> > ** R
> > ** inst
> > ** byte-compile and prepare package for lazy loading
> > Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> vI[[i]]) :
> >   there is no package called ?conflicted?
> > Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart
> -> doWithOneRestart
> > Ex?cution arr?t?e
> > ERROR: lazy loading failed for package ?cartograflow?
> > * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
> >
> >
> >
> >
> >
> >
> >
> >    Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <
> henrik.bengtsson at gmail.com> a ?crit :
> >
> >  FWIW, you should be able to reproduce at least the following NOTEs
> > with your current R 3.5.2 and R CMD check --as-cran:
> >
> > * checking CRAN incoming feasibility ... NOTE
> > Maintainer: ?cartogRaflow <cartograflow at gmail.com>?
> >
> > New submission
> >
> > Version contains large components (0.0.0.9000)
> >
> > Possibly mis-spelled words in DESCRIPTION:
> >   flowmapping (7:41)
> >
> > Author field should be Authors at R.  Current value is:
> >   c(person("Fran?oise", "Bahoken", email =
> > "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
> >             person("Sylvain", "Blondeau", email =
> > "blondeau.sylvain at yahoo.fr", role = c("aut"))
> >
> > The Title field should be in title case. Current version is:
> > ?thematic cartography of flows and movements?
> > In title case that is:
> > ?Thematic Cartography of Flows and Movements?
> >
> > Those are all classical mistakes ("we've all been there").  The
> > vignette errors may or may not be specific to R devel.
> >
> > /Henrik
> >
> > On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
> > <cartograflow at gmail.com> wrote:
> >>
> >> Hi,  l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use
> r-devel?
> >> I confirm that I didn't received ? error message when I've made
> dev_tool::check.
> >> How can I solve my problem ?
> >> Thanks in advance Sylvain
> >>
> >>
> >> nvoy? depuis Yahoo Mail pour Android
> >>
> >>   Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<
> ligges at statistik.tu-dortmund.de> a ?crit :  I cannot beloeve it. But this
> is certainly not R-devel?
> >>
> >> Not sure about devtools which we do not use on CRAN, but simply
> >>
> >> R CMD check --as-cran
> >>
> >> with a recent R-devel  version on the package tarball should reproduce
> >> the findings.
> >>
> >> Best,
> >> Uwe Ligges
> >>
> >>
> >> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
> >>> Hello,
> >>> I've submitted my package cartograflow and I received an email from
> your teeam that it does not pass the incoming checks automatically.Debian: <
> https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log
> >
> >>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
> >>>
> >>> So, I've made the new check on my plateform (linux ubuntu) and the
> check is OK.I used : ==> devtools::check(args =
> c('--no-manual','--as-cran'))Status is :
> >>> ?? R CMD check results ???????????????????????????? cartograflow
> 0.0.0.9000 ????
> >>> Duration: 54.6s
> >>> 0 errors ? | 0 warnings ? | 0 notes ?
> >>> R CMD check succeeded
> >>> Can you  help me to fix the problem?
> >>> Thanks in advance to your replySylvain
> >>>     [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >     [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Thu Apr  4 08:16:21 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Thu, 4 Apr 2019 06:16:21 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?q?Re=C2=A0=3ARe=3A__package_cartograflow?=
 =?utf-8?b?XzAuMC4wLjkwMDAudGFyLmd6?=
In-Reply-To: <CAARY7kh9bxw20Ns4UYck7tZyZb9p7aPJqOdmR1a2k8FwFhY8=A@mail.gmail.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <688550801.2852760.1554315829930@mail.yahoo.com>
 <CAARY7kh9bxw20Ns4UYck7tZyZb9p7aPJqOdmR1a2k8FwFhY8=A@mail.gmail.com>
Message-ID: <1762548284.26520512.1554358581218@mail.yahoo.com>

First of all, I used the conflicted package because there had a problem with the package dplyr: Attaching package dplyr Vs stats.?
Maybe I've to put the conflicted package in line depends of the description file.?
Envoy? depuis Yahoo?Mail pour Android 
 
  Le jeu., avr. 4, 2019 ? 8:01, David Hugh-Jones<davidhughjones at gmail.com> a ?crit :   Is ?conflicted? in your DESCRIPTION file? Btw, can we see the package source somewhere?
On Wed, 3 Apr 2019 at 19:24, cartograflow at gmail.com <cartograflow at gmail.com> wrote:

?Yes!

? ? Le mercredi 3 avril 2019 ? 20:21:59 UTC+2, Ben Bolker <bbolker at gmail.com> a ?crit :? 


?Have you installed the 'conflicted' package on your local machine
(i.e., the machine you're running the checks on)?

On 2019-04-03 2:11 p.m., cartograflow at gmail.com wrote:
>? Hi, 
> 
> I come back to you? because I have always the problem with devtools::check of my package. 
> 
> I used the command to check my package with R-devel : 
> sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
> 
> When I start the rmd file there is a warning due to package dplyr : 
> ????????Attaching package: 'dplyr'
> ????????The following objects are masked from 'package:stats':
> ??????????????????? filter, lag
> ????????The following objects are masked from 'package:base':
> ??????????????????? intersect, setdiff, setequal, union
> 
> The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
> So, the package conflicted avoid to have this warning. 
> 
> But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)
> 
> Can you help me to solve this issue if tit's possible? 
> Thanks in advance to your help ! 
> Sylvain
> -----------------
> Below extract of 00check.log 
> * checking whether package ?cartograflow? can be installed ... ERROR
> Installation failed.
> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
> * DONE
> Status: 1 ERROR, 1 NOTE
> 
> Below 00install.out 
> * installing *source* package ?cartograflow? ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
> ? there is no package called ?conflicted?
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
> Ex?cution arr?t?e
> ERROR: lazy loading failed for package ?cartograflow?
> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
> 
> 
> 
> 
> 
> 
> 
>? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :? 
>? 
>? FWIW, you should be able to reproduce at least the following NOTEs
> with your current R 3.5.2 and R CMD check --as-cran:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?cartogRaflow <cartograflow at gmail.com>?
> 
> New submission
> 
> Version contains large components (0.0.0.9000)
> 
> Possibly mis-spelled words in DESCRIPTION:
> ? flowmapping (7:41)
> 
> Author field should be Authors at R.? Current value is:
> ? c(person("Fran?oise", "Bahoken", email =
> "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
> ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
> "blondeau.sylvain at yahoo.fr", role = c("aut"))
> 
> The Title field should be in title case. Current version is:
> ?thematic cartography of flows and movements?
> In title case that is:
> ?Thematic Cartography of Flows and Movements?
> 
> Those are all classical mistakes ("we've all been there").? The
> vignette errors may or may not be specific to R devel.
> 
> /Henrik
> 
> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
> <cartograflow at gmail.com> wrote:
>>
>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
>> I confirm that I didn't received ? error message when I've made dev_tool::check.
>> How can I solve my problem ?
>> Thanks in advance Sylvain
>>
>>
>> nvoy? depuis Yahoo Mail pour Android
>>
>> ? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>>
>> Not sure about devtools which we do not use on CRAN, but simply
>>
>> R CMD check --as-cran
>>
>> with a recent R-devel? version on the package tarball should reproduce
>> the findings.
>>
>> Best,
>> Uwe Ligges
>>
>>
>> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
>>> Hello,
>>> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>
>>> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
>>> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
>>> Duration: 54.6s
>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>> R CMD check succeeded
>>> Can you? help me to fix the problem?
>>> Thanks in advance to your replySylvain
>>> ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> ? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel? 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

? ? ? ? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from Gmail Mobile  

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Thu Apr  4 08:22:16 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 4 Apr 2019 08:22:16 +0200
Subject: [R-pkg-devel] 
 =?utf-8?q?Re=C2=A0=3ARe=3A_package_cartograflow=5F?=
 =?utf-8?b?MC4wLjAuOTAwMC50YXIuZ3o=?=
In-Reply-To: <1555990824.18102124.1554355245299@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
Message-ID: <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>

Note that output concerning masked objects are just messages which do
not cause your vignette to fail. So it is not stricly necessary to start
working on these conflicts now.

However, looking closely at the win-builder check results
(https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
I see the following output below these messages

> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
> Quitting from lines 529-573 (cartograflow.Rmd) 
> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
> argument is of length zero

So the problem actually is in lines 529-573 of the cartograflow.Rmd
vignette (at least in the version submitted to win-builder a few weeks ago).

Running tools::buildVignette("cartograflow.Rmd") locally, I see

> Error in if (horiz) { : argument is of length zero

and the subsequent traceback() shows that the error originates from

> layoutLayer(title = "Professional mobility in Greater Paris", 
>         coltitle = "black", author = "Cartograflow, 2019", sources = "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS 2414 RIATE, 2018.", 
>         scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos = "topright"), 
>         col = "grey")

So it seems to me that the unnamed argument 'north(pos = "topright")' is
wrongly matched to the "horiz" argument of layoutLayer().

Cheers,

	Sebastian


Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com:
> 
> Hi,I don't know if my explanations are clear.I tried several way to solve this problem w/o success.?Someone have an idea ?Thanks in advance?
> 
> On 2019-04-03 2:11 p.m., cartograflow at gmail.com wrote:
>> ? Hi, 
>>
>> I come back to you? because I have always the problem with devtools::check of my package. 
>>
>> I used the command to check my package with R-devel : 
>> sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>
>> When I start the rmd file there is a warning due to package dplyr : 
>> ????????Attaching package: 'dplyr'
>> ????????The following objects are masked from 'package:stats':
>> ??????????????????? filter, lag
>> ????????The following objects are masked from 'package:base':
>> ??????????????????? intersect, setdiff, setequal, union
>>
>> The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
>> So, the package conflicted avoid to have this warning. 
>>
>> But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)
>>
>> Can you help me to solve this issue if tit's possible? 
>> Thanks in advance to your help ! 
>> Sylvain
>> -----------------
>> Below extract of 00check.log 
>> * checking whether package ?cartograflow? can be installed ... ERROR
>> Installation failed.
>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>> * DONE
>> Status: 1 ERROR, 1 NOTE
>>
>> Below 00install.out 
>> * installing *source* package ?cartograflow? ...
>> ** using staged installation
>> ** R
>> ** inst
>> ** byte-compile and prepare package for lazy loading
>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
>> ? there is no package called ?conflicted?
>> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
>> Ex?cution arr?t?e
>> ERROR: lazy loading failed for package ?cartograflow?
>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>
>>
>>
>>
>>
>>
>>
>> ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :? 
>> ? 
>> ? FWIW, you should be able to reproduce at least the following NOTEs
>> with your current R 3.5.2 and R CMD check --as-cran:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: ?cartogRaflow <cartograflow at gmail.com>?
>>
>> New submission
>>
>> Version contains large components (0.0.0.9000)
>>
>> Possibly mis-spelled words in DESCRIPTION:
>> ? flowmapping (7:41)
>>
>> Author field should be Authors at R.? Current value is:
>> ? c(person("Fran?oise", "Bahoken", email =
>> "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
>> ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>> "blondeau.sylvain at yahoo.fr", role = c("aut"))
>>
>> The Title field should be in title case. Current version is:
>> ?thematic cartography of flows and movements?
>> In title case that is:
>> ?Thematic Cartography of Flows and Movements?
>>
>> Those are all classical mistakes ("we've all been there").? The
>> vignette errors may or may not be specific to R devel.
>>
>> /Henrik
>>
>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>> <cartograflow at gmail.com> wrote:
>>>
>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
>>> I confirm that I didn't received ? error message when I've made dev_tool::check.
>>> How can I solve my problem ?
>>> Thanks in advance Sylvain
>>>
>>>
>>> nvoy? depuis Yahoo Mail pour Android
>>>
>>> ? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>>>
>>> Not sure about devtools which we do not use on CRAN, but simply
>>>
>>> R CMD check --as-cran
>>>
>>> with a recent R-devel? version on the package tarball should reproduce
>>> the findings.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
>>>> Hello,
>>>> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>
>>>> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
>>>> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
>>>> Duration: 54.6s
>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>> R CMD check succeeded
>>>> Can you? help me to fix the problem?
>>>> Thanks in advance to your replySylvain
>>>> ? ? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>>
>>> ? ? ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel  
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>   
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Apr  4 08:39:47 2019
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 4 Apr 2019 08:39:47 +0200
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
In-Reply-To: <414595032.26250015.1554315070414@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
Message-ID: <23717.42675.850012.89685@stat.math.ethz.ch>

>>>>> cartograflow at gmail com 
>>>>>     on Wed, 3 Apr 2019 18:11:10 +0000 writes:

    > Hi, 
    > I come back to you? because I have always the problem with devtools::check of my package. 

But we've told you repeatedly now *NOT* to use it in this case, but
rather use

	R CMD build ...
and 	R CMD check --as-cran ...	

    > I used the command to check my package with R-devel : 
    > sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz

    > When I start the rmd file there is a warning due to package dplyr : 
    > ????????Attaching package: 'dplyr'
    > ????????The following objects are masked from 'package:stats':
    > ??????????????????? filter, lag
    > ????????The following objects are masked from 'package:base':
    > ??????????????????? intersect, setdiff, setequal, union

    > The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
    > So, the package conflicted avoid to have this warning. 

    > But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)

    > Can you help me to solve this issue if tit's possible? 
    > Thanks in advance to your help ! 
    > Sylvain
    > -----------------
    > Below extract of 00check.log 
    > * checking whether package ?cartograflow? can be installed ... ERROR
    > Installation failed.
    > See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
    > * DONE
    > Status: 1 ERROR, 1 NOTE

    > Below 00install.out 
    > * installing *source* package ?cartograflow? ...
    > ** using staged installation
    > ** R
    > ** inst
    > ** byte-compile and prepare package for lazy loading
    > Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
    > ? there is no package called ?conflicted?
    > Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
    > Ex?cution arr?t?e
    > ERROR: lazy loading failed for package ?cartograflow?
    > * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?







    > Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :  
 
    > FWIW, you should be able to reproduce at least the following NOTEs
    > with your current R 3.5.2 and R CMD check --as-cran:

    > * checking CRAN incoming feasibility ... NOTE
    > Maintainer: ?cartogRaflow <cartograflow at gmail.com>?

    > New submission

    > Version contains large components (0.0.0.9000)

    > Possibly mis-spelled words in DESCRIPTION:
    > ? flowmapping (7:41)

    > Author field should be Authors at R.? Current value is:
    > ? c(person("Fran?oise", "Bahoken", email =
    > "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
    > ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
    > "blondeau.sylvain at yahoo.fr", role = c("aut"))

    > The Title field should be in title case. Current version is:
    > ?thematic cartography of flows and movements?
    > In title case that is:
    > ?Thematic Cartography of Flows and Movements?

    > Those are all classical mistakes ("we've all been there").? The
    > vignette errors may or may not be specific to R devel.

    > /Henrik

    > On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
    > <cartograflow at gmail.com> wrote:
    >> 
    >> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
    >> I confirm that I didn't received ? error message when I've made dev_tool::check.
    >> How can I solve my problem ?
    >> Thanks in advance Sylvain
    >> 
    >> 
    >> nvoy? depuis Yahoo Mail pour Android
    >> 
    >> ? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
    >> 
    >> Not sure about devtools which we do not use on CRAN, but simply
    >> 
    >> R CMD check --as-cran
    >> 
    >> with a recent R-devel? version on the package tarball should reproduce
    >> the findings.
    >> 
    >> Best,
    >> Uwe Ligges
    >> 
    >> 
    >> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
    >> > Hello,
    >> > I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
    >> > Status: 1 ERROR, 2 WARNINGs, 1 NOTE
    >> >
    >> > So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
    >> > ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
    >> > Duration: 54.6s
    >> > 0 errors ? | 0 warnings ? | 0 notes ?
    >> > R CMD check succeeded
    >> > Can you? help me to fix the problem?
    >> > Thanks in advance to your replySylvain
    >> >? ? [[alternative HTML version deleted]]
    >> >
    >> > ______________________________________________
    >> > R-package-devel at r-project.org mailing list
    >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >> >
    >> 
    >> 
    >> ? ? ? ? [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-package-devel at r-project.org mailing list
    >> https://stat.ethz.ch/mailman/listinfo/r-package-devel  
    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@rtogr@iiow m@iii@g oii gm@ii@com  Thu Apr  4 09:47:43 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Thu, 4 Apr 2019 07:47:43 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?b?UmXCoDpSZTogIFJlwqA6UmU6IHBhY2thZ2UgY2Fy?=
 =?utf-8?b?dG9ncmFmbG93XzAuMC4wLjkwMDAudGFyLmd6?=
In-Reply-To: <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
Message-ID: <456325207.26623949.1554364063438@mail.yahoo.com>

Thanks to your reply.?I've made the modification for week ago.?As you can see when I submitted I was?1 ERROR 2WARNINGs 1NOTE?
After that I take into account some correction that one person proposed.?I've made R-devel check and I've now?1 ERROR 1NOTE?
Right now I 'm in platform linux.
Have you an idea to solve??Warning in eval(expr, envir, enclos) : NAs introduced by coercion.

I will check the other point?

Envoy? depuis Yahoo?Mail pour Android 
 
  Le jeu., avr. 4, 2019 ? 8:22, Sebastian Meyer<seb.meyer at fau.de> a ?crit :   Note that output concerning masked objects are just messages which do
not cause your vignette to fail. So it is not stricly necessary to start
working on these conflicts now.

However, looking closely at the win-builder check results
(https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
I see the following output below these messages

> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
> Quitting from lines 529-573 (cartograflow.Rmd) 
> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
> argument is of length zero

So the problem actually is in lines 529-573 of the cartograflow.Rmd
vignette (at least in the version submitted to win-builder a few weeks ago).

Running tools::buildVignette("cartograflow.Rmd") locally, I see

> Error in if (horiz) { : argument is of length zero

and the subsequent traceback() shows that the error originates from

> layoutLayer(title = "Professional mobility in Greater Paris", 
>? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources = "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS 2414 RIATE, 2018.", 
>? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos = "topright"), 
>? ? ? ? col = "grey")

So it seems to me that the unnamed argument 'north(pos = "topright")' is
wrongly matched to the "horiz" argument of layoutLayer().

Cheers,

??? Sebastian


Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com:
> 
> Hi,I don't know if my explanations are clear.I tried several way to solve this problem w/o success.?Someone have an idea ?Thanks in advance?
> 
> On 2019-04-03 2:11 p.m., cartograflow at gmail.com wrote:
>> ? Hi, 
>>
>> I come back to you? because I have always the problem with devtools::check of my package. 
>>
>> I used the command to check my package with R-devel : 
>> sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>
>> When I start the rmd file there is a warning due to package dplyr : 
>> ????????Attaching package: 'dplyr'
>> ????????The following objects are masked from 'package:stats':
>> ??????????????????? filter, lag
>> ????????The following objects are masked from 'package:base':
>> ??????????????????? intersect, setdiff, setequal, union
>>
>> The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
>> So, the package conflicted avoid to have this warning. 
>>
>> But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)
>>
>> Can you help me to solve this issue if tit's possible? 
>> Thanks in advance to your help ! 
>> Sylvain
>> -----------------
>> Below extract of 00check.log 
>> * checking whether package ?cartograflow? can be installed ... ERROR
>> Installation failed.
>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>> * DONE
>> Status: 1 ERROR, 1 NOTE
>>
>> Below 00install.out 
>> * installing *source* package ?cartograflow? ...
>> ** using staged installation
>> ** R
>> ** inst
>> ** byte-compile and prepare package for lazy loading
>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
>> ? there is no package called ?conflicted?
>> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
>> Ex?cution arr?t?e
>> ERROR: lazy loading failed for package ?cartograflow?
>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>
>>
>>
>>
>>
>>
>>
>> ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :? 
>> ? 
>> ? FWIW, you should be able to reproduce at least the following NOTEs
>> with your current R 3.5.2 and R CMD check --as-cran:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: ?cartogRaflow <cartograflow at gmail.com>?
>>
>> New submission
>>
>> Version contains large components (0.0.0.9000)
>>
>> Possibly mis-spelled words in DESCRIPTION:
>> ? flowmapping (7:41)
>>
>> Author field should be Authors at R.? Current value is:
>> ? c(person("Fran?oise", "Bahoken", email =
>> "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
>> ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>> "blondeau.sylvain at yahoo.fr", role = c("aut"))
>>
>> The Title field should be in title case. Current version is:
>> ?thematic cartography of flows and movements?
>> In title case that is:
>> ?Thematic Cartography of Flows and Movements?
>>
>> Those are all classical mistakes ("we've all been there").? The
>> vignette errors may or may not be specific to R devel.
>>
>> /Henrik
>>
>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>> <cartograflow at gmail.com> wrote:
>>>
>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
>>> I confirm that I didn't received ? error message when I've made dev_tool::check.
>>> How can I solve my problem ?
>>> Thanks in advance Sylvain
>>>
>>>
>>> nvoy? depuis Yahoo Mail pour Android
>>>
>>> ? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>>>
>>> Not sure about devtools which we do not use on CRAN, but simply
>>>
>>> R CMD check --as-cran
>>>
>>> with a recent R-devel? version on the package tarball should reproduce
>>> the findings.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
>>>> Hello,
>>>> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>
>>>> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
>>>> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
>>>> Duration: 54.6s
>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>> R CMD check succeeded
>>>> Can you? help me to fix the problem?
>>>> Thanks in advance to your replySylvain
>>>> ? ? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>>
>>> ? ? ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel  
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? 
> 
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
  

	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Thu Apr  4 13:14:35 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Thu, 4 Apr 2019 11:14:35 +0000 (UTC)
Subject: [R-pkg-devel] 
 =?utf-8?q?Re=C2=A0=3ARe=3A_package_cartograflow=5F?=
 =?utf-8?b?MC4wLjAuOTAwMC50YXIuZ3o=?=
In-Reply-To: <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
Message-ID: <2093107463.26894908.1554376475362@mail.yahoo.com>

 I follow up your recommendation and for the moment I didn't used "conflicted". 

So, I've made the nex R CMD check and I have the problem 
Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
? there is no package called ?dplyr?
How I can? solve this issue? 

Thanks in advance

    Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer <seb.meyer at fau.de> a ?crit :  
 
 Note that output concerning masked objects are just messages which do
not cause your vignette to fail. So it is not stricly necessary to start
working on these conflicts now.

However, looking closely at the win-builder check results
(https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
I see the following output below these messages

> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
> Quitting from lines 529-573 (cartograflow.Rmd) 
> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
> argument is of length zero

So the problem actually is in lines 529-573 of the cartograflow.Rmd
vignette (at least in the version submitted to win-builder a few weeks ago).

Running tools::buildVignette("cartograflow.Rmd") locally, I see

> Error in if (horiz) { : argument is of length zero

and the subsequent traceback() shows that the error originates from

> layoutLayer(title = "Professional mobility in Greater Paris", 
>? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources = "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS 2414 RIATE, 2018.", 
>? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos = "topright"), 
>? ? ? ? col = "grey")

So it seems to me that the unnamed argument 'north(pos = "topright")' is
wrongly matched to the "horiz" argument of layoutLayer().

Cheers,

??? Sebastian


Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com:
> 
> Hi,I don't know if my explanations are clear.I tried several way to solve this problem w/o success.?Someone have an idea ?Thanks in advance?
> 
> On 2019-04-03 2:11 p.m., cartograflow at gmail.com wrote:
>> ? Hi, 
>>
>> I come back to you? because I have always the problem with devtools::check of my package. 
>>
>> I used the command to check my package with R-devel : 
>> sylvain at sylvain:~/svn$ bash R-devel.sh CMD check --as-cran /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>
>> When I start the rmd file there is a warning due to package dplyr : 
>> ????????Attaching package: 'dplyr'
>> ????????The following objects are masked from 'package:stats':
>> ??????????????????? filter, lag
>> ????????The following objects are masked from 'package:base':
>> ??????????????????? intersect, setdiff, setequal, union
>>
>> The solve this issue I added in rmd file, description file and the namespace the package conflicted. 
>> So, the package conflicted avoid to have this warning. 
>>
>> But when I run R-devel CMD check I have a new issue that is Error in loadNamespace...no package called ?conflicted? (see below)
>>
>> Can you help me to solve this issue if tit's possible? 
>> Thanks in advance to your help ! 
>> Sylvain
>> -----------------
>> Below extract of 00check.log 
>> * checking whether package ?cartograflow? can be installed ... ERROR
>> Installation failed.
>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>> * DONE
>> Status: 1 ERROR, 1 NOTE
>>
>> Below 00install.out 
>> * installing *source* package ?cartograflow? ...
>> ** using staged installation
>> ** R
>> ** inst
>> ** byte-compile and prepare package for lazy loading
>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
>> ? there is no package called ?conflicted?
>> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
>> Ex?cution arr?t?e
>> ERROR: lazy loading failed for package ?cartograflow?
>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>
>>
>>
>>
>>
>>
>>
>> ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson <henrik.bengtsson at gmail.com> a ?crit :? 
>> ? 
>> ? FWIW, you should be able to reproduce at least the following NOTEs
>> with your current R 3.5.2 and R CMD check --as-cran:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: ?cartogRaflow <cartograflow at gmail.com>?
>>
>> New submission
>>
>> Version contains large components (0.0.0.9000)
>>
>> Possibly mis-spelled words in DESCRIPTION:
>> ? flowmapping (7:41)
>>
>> Author field should be Authors at R.? Current value is:
>> ? c(person("Fran?oise", "Bahoken", email =
>> "francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
>> ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>> "blondeau.sylvain at yahoo.fr", role = c("aut"))
>>
>> The Title field should be in title case. Current version is:
>> ?thematic cartography of flows and movements?
>> In title case that is:
>> ?Thematic Cartography of Flows and Movements?
>>
>> Those are all classical mistakes ("we've all been there").? The
>> vignette errors may or may not be specific to R devel.
>>
>> /Henrik
>>
>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>> <cartograflow at gmail.com> wrote:
>>>
>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
>>> I confirm that I didn't received ? error message when I've made dev_tool::check.
>>> How can I solve my problem ?
>>> Thanks in advance Sylvain
>>>
>>>
>>> nvoy? depuis Yahoo Mail pour Android
>>>
>>> ? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>>>
>>> Not sure about devtools which we do not use on CRAN, but simply
>>>
>>> R CMD check --as-cran
>>>
>>> with a recent R-devel? version on the package tarball should reproduce
>>> the findings.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
>>>> Hello,
>>>> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>
>>>> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
>>>> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
>>>> Duration: 54.6s
>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>> R CMD check succeeded
>>>> Can you? help me to fix the problem?
>>>> Thanks in advance to your replySylvain
>>>> ? ? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>>
>>> ? ? ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel  
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? 
> 
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
  
	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Thu Apr  4 13:34:44 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 4 Apr 2019 13:34:44 +0200
Subject: [R-pkg-devel] 
 =?utf-8?q?Re=C2=A0=3ARe=3A_package_cartograflow=5F?=
 =?utf-8?b?MC4wLjAuOTAwMC50YXIuZ3o=?=
In-Reply-To: <2093107463.26894908.1554376475362@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
Message-ID: <7a288fe5-8768-df59-c452-575a493486c4@fau.de>

There are probably no clairvoyants around here. So, again, without
access to the up-to-date source code of your package, nobody will be
able to help.

"there is no package called ..." means that the given package is not
installed in any of the libraries currently in use by R (see .libPaths()
for the relevant paths). Maybe you have installed "dplyr" in a library
used by your standard R installation, but not in any library used by
your R-devel installation (which you seem to use for checking the
package)? Just a wild guess.


Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
> I follow up your recommendation and for the moment I didn't used
> "conflicted".
> 
> So, I've made the nex R CMD check and I have the problem
> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> vI[[i]]) :
> ? there is no package called ?dplyr?
> 
> How I can? solve this issue?
> 
> Thanks in advance
> 
> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
> <seb.meyer at fau.de> a ?crit :
> 
> 
> Note that output concerning masked objects are just messages which do
> not cause your vignette to fail. So it is not stricly necessary to start
> working on these conflicts now.
> 
> However, looking closely at the win-builder check results
> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
> I see the following output below these messages
> 
>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>> Quitting from lines 529-573 (cartograflow.Rmd)
>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>> argument is of length zero
> 
> So the problem actually is in lines 529-573 of the cartograflow.Rmd
> vignette (at least in the version submitted to win-builder a few weeks ago).
> 
> Running tools::buildVignette("cartograflow.Rmd") locally, I see
> 
>> Error in if (horiz) { : argument is of length zero
> 
> and the subsequent traceback() shows that the error originates from
> 
>> layoutLayer(title = "Professional mobility in Greater Paris",
>>? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
> 2414 RIATE, 2018.",
>>? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
> "topright"),
>>? ? ? ? col = "grey")
> 
> So it seems to me that the unnamed argument 'north(pos = "topright")' is
> wrongly matched to the "horiz" argument of layoutLayer().
> 
> Cheers,
> 
> ??? Sebastian
> 
> 
> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
> <mailto:cartograflow at gmail.com>:
>>
>> Hi,I don't know if my explanations are clear.I tried several way to
> solve this problem w/o success.?Someone have an idea ?Thanks in advance?
>>
>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
> <mailto:cartograflow at gmail.com> wrote:
>>> ? Hi,
>>>
>>> I come back to you? because I have always the problem with
> devtools::check of my package.
>>>
>>> I used the command to check my package with R-devel :
>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
> check --as-cran
> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>
>>> When I start the rmd file there is a warning due to package dplyr :
>>> ????????Attaching package: 'dplyr'
>>> ????????The following objects are masked from 'package:stats':
>>> ??????????????????? filter, lag
>>> ????????The following objects are masked from 'package:base':
>>> ??????????????????? intersect, setdiff, setequal, union
>>>
>>> The solve this issue I added in rmd file, description file and the
> namespace the package conflicted.
>>> So, the package conflicted avoid to have this warning.
>>>
>>> But when I run R-devel CMD check I have a new issue that is Error in
> loadNamespace...no package called ?conflicted? (see below)
>>>
>>> Can you help me to solve this issue if tit's possible?
>>> Thanks in advance to your help !
>>> Sylvain
>>> -----------------
>>> Below extract of 00check.log
>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>> Installation failed.
>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>> * DONE
>>> Status: 1 ERROR, 1 NOTE
>>>
>>> Below 00install.out
>>> * installing *source* package ?cartograflow? ...
>>> ** using staged installation
>>> ** R
>>> ** inst
>>> ** byte-compile and prepare package for lazy loading
>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
> vI[[i]]) :
>>> ? there is no package called ?conflicted?
>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
> withOneRestart -> doWithOneRestart
>>> Ex?cution arr?t?e
>>> ERROR: lazy loading failed for package ?cartograflow?
>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :?
>>> ?
>>> ? FWIW, you should be able to reproduce at least the following NOTEs
>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>
>>> * checking CRAN incoming feasibility ... NOTE
>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
> <mailto:cartograflow at gmail.com>>?
>>>
>>> New submission
>>>
>>> Version contains large components (0.0.0.9000)
>>>
>>> Possibly mis-spelled words in DESCRIPTION:
>>> ? flowmapping (7:41)
>>>
>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>> ? c(person("Fran?oise", "Bahoken", email =
>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
> role = c("cre","aut")),
>>> ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
> = c("aut"))
>>>
>>> The Title field should be in title case. Current version is:
>>> ?thematic cartography of flows and movements?
>>> In title case that is:
>>> ?Thematic Cartography of Flows and Movements?
>>>
>>> Those are all classical mistakes ("we've all been there").? The
>>> vignette errors may or may not be specific to R devel.
>>>
>>> /Henrik
>>>
>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
> <mailto:cartograflow at gmail.com>
>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>
>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
> use r-devel?
>>>> I confirm that I didn't received ? error message when I've made
> dev_tool::check.
>>>> How can I solve my problem ?
>>>> Thanks in advance Sylvain
>>>>
>>>>
>>>> nvoy? depuis Yahoo Mail pour Android
>>>>
>>>> ? Le lun., mars 25, 2019 ? 23:38, Uwe
> Ligges<ligges at statistik.tu-dortmund.de
> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
> it. But this is certainly not R-devel?
>>>>
>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>
>>>> R CMD check --as-cran
>>>>
>>>> with a recent R-devel? version on the package tarball should reproduce
>>>> the findings.
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>>
>>>> On 25.03.2019 23:12, cartograflow at gmail.com
> <mailto:cartograflow at gmail.com> wrote:
>>>>> Hello,
>>>>> I've submitted my package cartograflow and I received an email from
> your teeam that it does not pass the incoming checks
> automatically.Debian:
> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>
>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
> check is OK.I used : ==> devtools::check(args =
> c('--no-manual','--as-cran'))Status is :
>>>>> ?? R CMD check results ???????????????????????????? cartograflow
> 0.0.0.9000 ????
>>>>> Duration: 54.6s
>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>> R CMD check succeeded
>>>>> Can you? help me to fix the problem?
>>>>> Thanks in advance to your replySylvain
>>>>> ? ? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org
> <mailto:R-package-devel at r-project.org> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>>
>>>> ? ? ? ? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
>>> ??? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>?
>>
>>
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Apr  4 14:42:20 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 4 Apr 2019 14:42:20 +0200
Subject: [R-pkg-devel] 
 =?utf-8?q?Re=C2=A0=3ARe=3A_package_cartograflow=5F?=
 =?utf-8?b?MC4wLjAuOTAwMC50YXIuZ3o=?=
In-Reply-To: <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
Message-ID: <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>

.... or forgot to declare a dependency on that package in the 
DESCRIPTION file...

Best,
Uwe Ligges

On 04.04.2019 13:34, Sebastian Meyer wrote:
> There are probably no clairvoyants around here. So, again, without
> access to the up-to-date source code of your package, nobody will be
> able to help.
> 
> "there is no package called ..." means that the given package is not
> installed in any of the libraries currently in use by R (see .libPaths()
> for the relevant paths). Maybe you have installed "dplyr" in a library
> used by your standard R installation, but not in any library used by
> your R-devel installation (which you seem to use for checking the
> package)? Just a wild guess.
> 
> 
> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>> I follow up your recommendation and for the moment I didn't used
>> "conflicted".
>>
>> So, I've made the nex R CMD check and I have the problem
>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>  ? there is no package called ?dplyr?
>>
>> How I can? solve this issue?
>>
>> Thanks in advance
>>
>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>> <seb.meyer at fau.de> a ?crit :
>>
>>
>> Note that output concerning masked objects are just messages which do
>> not cause your vignette to fail. So it is not stricly necessary to start
>> working on these conflicts now.
>>
>> However, looking closely at the win-builder check results
>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>> I see the following output below these messages
>>
>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>> argument is of length zero
>>
>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>
>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>
>>> Error in if (horiz) { : argument is of length zero
>>
>> and the subsequent traceback() shows that the error originates from
>>
>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>  ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>> 2414 RIATE, 2018.",
>>>  ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>> "topright"),
>>>  ? ? ? ? col = "grey")
>>
>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>> wrongly matched to the "horiz" argument of layoutLayer().
>>
>> Cheers,
>>
>>  ??? Sebastian
>>
>>
>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>:
>>>
>>> Hi,I don't know if my explanations are clear.I tried several way to
>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>
>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>  ? Hi,
>>>>
>>>> I come back to you? because I have always the problem with
>> devtools::check of my package.
>>>>
>>>> I used the command to check my package with R-devel :
>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>> check --as-cran
>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>
>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>  ????????Attaching package: 'dplyr'
>>>>  ????????The following objects are masked from 'package:stats':
>>>>  ??????????????????? filter, lag
>>>>  ????????The following objects are masked from 'package:base':
>>>>  ??????????????????? intersect, setdiff, setequal, union
>>>>
>>>> The solve this issue I added in rmd file, description file and the
>> namespace the package conflicted.
>>>> So, the package conflicted avoid to have this warning.
>>>>
>>>> But when I run R-devel CMD check I have a new issue that is Error in
>> loadNamespace...no package called ?conflicted? (see below)
>>>>
>>>> Can you help me to solve this issue if tit's possible?
>>>> Thanks in advance to your help !
>>>> Sylvain
>>>> -----------------
>>>> Below extract of 00check.log
>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>> Installation failed.
>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>> * DONE
>>>> Status: 1 ERROR, 1 NOTE
>>>>
>>>> Below 00install.out
>>>> * installing *source* package ?cartograflow? ...
>>>> ** using staged installation
>>>> ** R
>>>> ** inst
>>>> ** byte-compile and prepare package for lazy loading
>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>>>  ? there is no package called ?conflicted?
>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>> withOneRestart -> doWithOneRestart
>>>> Ex?cution arr?t?e
>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>  ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>   
>>>>  ? FWIW, you should be able to reproduce at least the following NOTEs
>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>
>>>> * checking CRAN incoming feasibility ... NOTE
>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>>?
>>>>
>>>> New submission
>>>>
>>>> Version contains large components (0.0.0.9000)
>>>>
>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>  ? flowmapping (7:41)
>>>>
>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>  ? c(person("Fran?oise", "Bahoken", email =
>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>> role = c("cre","aut")),
>>>>  ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>> = c("aut"))
>>>>
>>>> The Title field should be in title case. Current version is:
>>>> ?thematic cartography of flows and movements?
>>>> In title case that is:
>>>> ?Thematic Cartography of Flows and Movements?
>>>>
>>>> Those are all classical mistakes ("we've all been there").? The
>>>> vignette errors may or may not be specific to R devel.
>>>>
>>>> /Henrik
>>>>
>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>
>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>
>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>> use r-devel?
>>>>> I confirm that I didn't received ? error message when I've made
>> dev_tool::check.
>>>>> How can I solve my problem ?
>>>>> Thanks in advance Sylvain
>>>>>
>>>>>
>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>
>>>>>  ? Le lun., mars 25, 2019 ? 23:38, Uwe
>> Ligges<ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>> it. But this is certainly not R-devel?
>>>>>
>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>
>>>>> R CMD check --as-cran
>>>>>
>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>> the findings.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>>> Hello,
>>>>>> I've submitted my package cartograflow and I received an email from
>> your teeam that it does not pass the incoming checks
>> automatically.Debian:
>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>
>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>> check is OK.I used : ==> devtools::check(args =
>> c('--no-manual','--as-cran'))Status is :
>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>> 0.0.0.9000 ????
>>>>>> Duration: 54.6s
>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>> R CMD check succeeded
>>>>>> Can you? help me to fix the problem?
>>>>>> Thanks in advance to your replySylvain
>>>>>>  ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org
>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>
>>>>>  ? ? ? ? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>>>  ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>   
>>>
>>>
>>>  ??? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@rtogr@iiow m@iii@g oii gm@ii@com  Thu Apr  4 17:04:37 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Thu, 4 Apr 2019 15:04:37 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?b?UmXCoDpSZTogIFJlwqA6UmU6IHBhY2thZ2UgY2Fy?=
 =?utf-8?b?dG9ncmFmbG93XzAuMC4wLjkwMDAudGFyLmd6?=
In-Reply-To: <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
Message-ID: <125199542.27186571.1554390277315@mail.yahoo.com>

How I can declare the dependencies in DESCRIPTION file?
?depends: library(dplyr,dependencies =TRUE)
Thanks?
Envoy? depuis Yahoo?Mail pour Android 
 
  Le jeu., avr. 4, 2019 ? 14:42, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :   .... or forgot to declare a dependency on that package in the 
DESCRIPTION file...

Best,
Uwe Ligges

On 04.04.2019 13:34, Sebastian Meyer wrote:
> There are probably no clairvoyants around here. So, again, without
> access to the up-to-date source code of your package, nobody will be
> able to help.
> 
> "there is no package called ..." means that the given package is not
> installed in any of the libraries currently in use by R (see .libPaths()
> for the relevant paths). Maybe you have installed "dplyr" in a library
> used by your standard R installation, but not in any library used by
> your R-devel installation (which you seem to use for checking the
> package)? Just a wild guess.
> 
> 
> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>> I follow up your recommendation and for the moment I didn't used
>> "conflicted".
>>
>> So, I've made the nex R CMD check and I have the problem
>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>? ? there is no package called ?dplyr?
>>
>> How I can? solve this issue?
>>
>> Thanks in advance
>>
>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>> <seb.meyer at fau.de> a ?crit :
>>
>>
>> Note that output concerning masked objects are just messages which do
>> not cause your vignette to fail. So it is not stricly necessary to start
>> working on these conflicts now.
>>
>> However, looking closely at the win-builder check results
>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>> I see the following output below these messages
>>
>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>> argument is of length zero
>>
>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>
>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>
>>> Error in if (horiz) { : argument is of length zero
>>
>> and the subsequent traceback() shows that the error originates from
>>
>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>> 2414 RIATE, 2018.",
>>>? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>> "topright"),
>>>? ? ? ? ? col = "grey")
>>
>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>> wrongly matched to the "horiz" argument of layoutLayer().
>>
>> Cheers,
>>
>>? ??? Sebastian
>>
>>
>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>:
>>>
>>> Hi,I don't know if my explanations are clear.I tried several way to
>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>
>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>? ? Hi,
>>>>
>>>> I come back to you? because I have always the problem with
>> devtools::check of my package.
>>>>
>>>> I used the command to check my package with R-devel :
>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>> check --as-cran
>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>
>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>? ????????Attaching package: 'dplyr'
>>>>? ????????The following objects are masked from 'package:stats':
>>>>? ??????????????????? filter, lag
>>>>? ????????The following objects are masked from 'package:base':
>>>>? ??????????????????? intersect, setdiff, setequal, union
>>>>
>>>> The solve this issue I added in rmd file, description file and the
>> namespace the package conflicted.
>>>> So, the package conflicted avoid to have this warning.
>>>>
>>>> But when I run R-devel CMD check I have a new issue that is Error in
>> loadNamespace...no package called ?conflicted? (see below)
>>>>
>>>> Can you help me to solve this issue if tit's possible?
>>>> Thanks in advance to your help !
>>>> Sylvain
>>>> -----------------
>>>> Below extract of 00check.log
>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>> Installation failed.
>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>> * DONE
>>>> Status: 1 ERROR, 1 NOTE
>>>>
>>>> Below 00install.out
>>>> * installing *source* package ?cartograflow? ...
>>>> ** using staged installation
>>>> ** R
>>>> ** inst
>>>> ** byte-compile and prepare package for lazy loading
>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>>>? ? there is no package called ?conflicted?
>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>> withOneRestart -> doWithOneRestart
>>>> Ex?cution arr?t?e
>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>? 
>>>>? ? FWIW, you should be able to reproduce at least the following NOTEs
>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>
>>>> * checking CRAN incoming feasibility ... NOTE
>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>>?
>>>>
>>>> New submission
>>>>
>>>> Version contains large components (0.0.0.9000)
>>>>
>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>? ? flowmapping (7:41)
>>>>
>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>? ? c(person("Fran?oise", "Bahoken", email =
>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>> role = c("cre","aut")),
>>>>? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>> = c("aut"))
>>>>
>>>> The Title field should be in title case. Current version is:
>>>> ?thematic cartography of flows and movements?
>>>> In title case that is:
>>>> ?Thematic Cartography of Flows and Movements?
>>>>
>>>> Those are all classical mistakes ("we've all been there").? The
>>>> vignette errors may or may not be specific to R devel.
>>>>
>>>> /Henrik
>>>>
>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>
>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>
>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>> use r-devel?
>>>>> I confirm that I didn't received ? error message when I've made
>> dev_tool::check.
>>>>> How can I solve my problem ?
>>>>> Thanks in advance Sylvain
>>>>>
>>>>>
>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>
>>>>>? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>> Ligges<ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>> it. But this is certainly not R-devel?
>>>>>
>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>
>>>>> R CMD check --as-cran
>>>>>
>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>> the findings.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>>> Hello,
>>>>>> I've submitted my package cartograflow and I received an email from
>> your teeam that it does not pass the incoming checks
>> automatically.Debian:
>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>
>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>> check is OK.I used : ==> devtools::check(args =
>> c('--no-manual','--as-cran'))Status is :
>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>> 0.0.0.9000 ????
>>>>>> Duration: 54.6s
>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>> R CMD check succeeded
>>>>>> Can you? help me to fix the problem?
>>>>>> Thanks in advance to your replySylvain
>>>>>>? ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org
>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>
>>>>>? ? ? ? ? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>>>? ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>? 
>>>
>>>
>>>? ??? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
  

	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Thu Apr  4 17:07:46 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Thu, 4 Apr 2019 15:07:46 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?b?UmXCoDpSZTogIFJlwqA6UmU6IHBhY2thZ2UgY2Fy?=
 =?utf-8?b?dG9ncmFmbG93XzAuMC4wLjkwMDAudGFyLmd6?=
In-Reply-To: <125199542.27186571.1554390277315@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
Message-ID: <887009533.27207322.1554390466595@mail.yahoo.com>

I've put dplyr in import item of description file?

Envoy? depuis Yahoo?Mail pour Android 
 
  Le jeu., avr. 4, 2019 ? 17:04, cartograflow at gmail.com<cartograflow at gmail.com> a ?crit :   How I can declare the dependencies in DESCRIPTION file?
?depends: library(dplyr,dependencies =TRUE)
Thanks?
Envoy? depuis Yahoo?Mail pour Android 
 
  Le jeu., avr. 4, 2019 ? 14:42, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :   .... or forgot to declare a dependency on that package in the 
DESCRIPTION file...

Best,
Uwe Ligges

On 04.04.2019 13:34, Sebastian Meyer wrote:
> There are probably no clairvoyants around here. So, again, without
> access to the up-to-date source code of your package, nobody will be
> able to help.
> 
> "there is no package called ..." means that the given package is not
> installed in any of the libraries currently in use by R (see .libPaths()
> for the relevant paths). Maybe you have installed "dplyr" in a library
> used by your standard R installation, but not in any library used by
> your R-devel installation (which you seem to use for checking the
> package)? Just a wild guess.
> 
> 
> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>> I follow up your recommendation and for the moment I didn't used
>> "conflicted".
>>
>> So, I've made the nex R CMD check and I have the problem
>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>? ? there is no package called ?dplyr?
>>
>> How I can? solve this issue?
>>
>> Thanks in advance
>>
>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>> <seb.meyer at fau.de> a ?crit :
>>
>>
>> Note that output concerning masked objects are just messages which do
>> not cause your vignette to fail. So it is not stricly necessary to start
>> working on these conflicts now.
>>
>> However, looking closely at the win-builder check results
>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>> I see the following output below these messages
>>
>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>> argument is of length zero
>>
>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>
>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>
>>> Error in if (horiz) { : argument is of length zero
>>
>> and the subsequent traceback() shows that the error originates from
>>
>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>> 2414 RIATE, 2018.",
>>>? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>> "topright"),
>>>? ? ? ? ? col = "grey")
>>
>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>> wrongly matched to the "horiz" argument of layoutLayer().
>>
>> Cheers,
>>
>>? ??? Sebastian
>>
>>
>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>:
>>>
>>> Hi,I don't know if my explanations are clear.I tried several way to
>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>
>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>? ? Hi,
>>>>
>>>> I come back to you? because I have always the problem with
>> devtools::check of my package.
>>>>
>>>> I used the command to check my package with R-devel :
>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>> check --as-cran
>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>
>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>? ????????Attaching package: 'dplyr'
>>>>? ????????The following objects are masked from 'package:stats':
>>>>? ??????????????????? filter, lag
>>>>? ????????The following objects are masked from 'package:base':
>>>>? ??????????????????? intersect, setdiff, setequal, union
>>>>
>>>> The solve this issue I added in rmd file, description file and the
>> namespace the package conflicted.
>>>> So, the package conflicted avoid to have this warning.
>>>>
>>>> But when I run R-devel CMD check I have a new issue that is Error in
>> loadNamespace...no package called ?conflicted? (see below)
>>>>
>>>> Can you help me to solve this issue if tit's possible?
>>>> Thanks in advance to your help !
>>>> Sylvain
>>>> -----------------
>>>> Below extract of 00check.log
>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>> Installation failed.
>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>> * DONE
>>>> Status: 1 ERROR, 1 NOTE
>>>>
>>>> Below 00install.out
>>>> * installing *source* package ?cartograflow? ...
>>>> ** using staged installation
>>>> ** R
>>>> ** inst
>>>> ** byte-compile and prepare package for lazy loading
>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>>>? ? there is no package called ?conflicted?
>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>> withOneRestart -> doWithOneRestart
>>>> Ex?cution arr?t?e
>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>? 
>>>>? ? FWIW, you should be able to reproduce at least the following NOTEs
>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>
>>>> * checking CRAN incoming feasibility ... NOTE
>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>>?
>>>>
>>>> New submission
>>>>
>>>> Version contains large components (0.0.0.9000)
>>>>
>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>? ? flowmapping (7:41)
>>>>
>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>? ? c(person("Fran?oise", "Bahoken", email =
>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>> role = c("cre","aut")),
>>>>? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>> = c("aut"))
>>>>
>>>> The Title field should be in title case. Current version is:
>>>> ?thematic cartography of flows and movements?
>>>> In title case that is:
>>>> ?Thematic Cartography of Flows and Movements?
>>>>
>>>> Those are all classical mistakes ("we've all been there").? The
>>>> vignette errors may or may not be specific to R devel.
>>>>
>>>> /Henrik
>>>>
>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>
>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>
>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>> use r-devel?
>>>>> I confirm that I didn't received ? error message when I've made
>> dev_tool::check.
>>>>> How can I solve my problem ?
>>>>> Thanks in advance Sylvain
>>>>>
>>>>>
>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>
>>>>>? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>> Ligges<ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>> it. But this is certainly not R-devel?
>>>>>
>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>
>>>>> R CMD check --as-cran
>>>>>
>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>> the findings.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>>> Hello,
>>>>>> I've submitted my package cartograflow and I received an email from
>> your teeam that it does not pass the incoming checks
>> automatically.Debian:
>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>
>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>> check is OK.I used : ==> devtools::check(args =
>> c('--no-manual','--as-cran'))Status is :
>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>> 0.0.0.9000 ????
>>>>>> Duration: 54.6s
>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>> R CMD check succeeded
>>>>>> Can you? help me to fix the problem?
>>>>>> Thanks in advance to your replySylvain
>>>>>>? ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org
>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>
>>>>>? ? ? ? ? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>>>? ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>? 
>>>
>>>
>>>? ??? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
  
  

	[[alternative HTML version deleted]]


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Thu Apr  4 17:08:46 2019
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Thu, 4 Apr 2019 15:08:46 +0000 (UTC)
Subject: =?UTF-8?Q?Re:_[R-pkg-devel]_Re=C2=A0:Re:__Re=C2=A0:Re:_p?=
 =?UTF-8?Q?ackage_cartograflow=5F0.0.0.9000.tar.gz?=
In-Reply-To: <125199542.27186571.1554390277315@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
Message-ID: <1603540995.1859475.1554390526183@mail.yahoo.com>

 I'd recommend reading https://r-pkgs.org/description.html#dependencies (and the rest of the book is very good as well), it'll help you understand why and how to declare dependencies.




    Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com <cartograflow at gmail.com> skrev:  
 
 How I can declare the dependencies in DESCRIPTION file?
?depends: library(dplyr,dependencies =TRUE)
Thanks?
Envoy? depuis Yahoo?Mail pour Android 
 
? Le jeu., avr. 4, 2019 ? 14:42, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? .... or forgot to declare a dependency on that package in the 
DESCRIPTION file...

Best,
Uwe Ligges

On 04.04.2019 13:34, Sebastian Meyer wrote:
> There are probably no clairvoyants around here. So, again, without
> access to the up-to-date source code of your package, nobody will be
> able to help.
> 
> "there is no package called ..." means that the given package is not
> installed in any of the libraries currently in use by R (see .libPaths()
> for the relevant paths). Maybe you have installed "dplyr" in a library
> used by your standard R installation, but not in any library used by
> your R-devel installation (which you seem to use for checking the
> package)? Just a wild guess.
> 
> 
> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>> I follow up your recommendation and for the moment I didn't used
>> "conflicted".
>>
>> So, I've made the nex R CMD check and I have the problem
>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>? ? there is no package called ?dplyr?
>>
>> How I can? solve this issue?
>>
>> Thanks in advance
>>
>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>> <seb.meyer at fau.de> a ?crit :
>>
>>
>> Note that output concerning masked objects are just messages which do
>> not cause your vignette to fail. So it is not stricly necessary to start
>> working on these conflicts now.
>>
>> However, looking closely at the win-builder check results
>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>> I see the following output below these messages
>>
>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>> argument is of length zero
>>
>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>
>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>
>>> Error in if (horiz) { : argument is of length zero
>>
>> and the subsequent traceback() shows that the error originates from
>>
>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>> 2414 RIATE, 2018.",
>>>? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>> "topright"),
>>>? ? ? ? ? col = "grey")
>>
>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>> wrongly matched to the "horiz" argument of layoutLayer().
>>
>> Cheers,
>>
>>? ??? Sebastian
>>
>>
>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>:
>>>
>>> Hi,I don't know if my explanations are clear.I tried several way to
>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>
>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>? ? Hi,
>>>>
>>>> I come back to you? because I have always the problem with
>> devtools::check of my package.
>>>>
>>>> I used the command to check my package with R-devel :
>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>> check --as-cran
>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>
>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>? ????????Attaching package: 'dplyr'
>>>>? ????????The following objects are masked from 'package:stats':
>>>>? ??????????????????? filter, lag
>>>>? ????????The following objects are masked from 'package:base':
>>>>? ??????????????????? intersect, setdiff, setequal, union
>>>>
>>>> The solve this issue I added in rmd file, description file and the
>> namespace the package conflicted.
>>>> So, the package conflicted avoid to have this warning.
>>>>
>>>> But when I run R-devel CMD check I have a new issue that is Error in
>> loadNamespace...no package called ?conflicted? (see below)
>>>>
>>>> Can you help me to solve this issue if tit's possible?
>>>> Thanks in advance to your help !
>>>> Sylvain
>>>> -----------------
>>>> Below extract of 00check.log
>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>> Installation failed.
>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>> * DONE
>>>> Status: 1 ERROR, 1 NOTE
>>>>
>>>> Below 00install.out
>>>> * installing *source* package ?cartograflow? ...
>>>> ** using staged installation
>>>> ** R
>>>> ** inst
>>>> ** byte-compile and prepare package for lazy loading
>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>>>? ? there is no package called ?conflicted?
>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>> withOneRestart -> doWithOneRestart
>>>> Ex?cution arr?t?e
>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>? 
>>>>? ? FWIW, you should be able to reproduce at least the following NOTEs
>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>
>>>> * checking CRAN incoming feasibility ... NOTE
>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>>?
>>>>
>>>> New submission
>>>>
>>>> Version contains large components (0.0.0.9000)
>>>>
>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>? ? flowmapping (7:41)
>>>>
>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>? ? c(person("Fran?oise", "Bahoken", email =
>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>> role = c("cre","aut")),
>>>>? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>> = c("aut"))
>>>>
>>>> The Title field should be in title case. Current version is:
>>>> ?thematic cartography of flows and movements?
>>>> In title case that is:
>>>> ?Thematic Cartography of Flows and Movements?
>>>>
>>>> Those are all classical mistakes ("we've all been there").? The
>>>> vignette errors may or may not be specific to R devel.
>>>>
>>>> /Henrik
>>>>
>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>
>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>
>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>> use r-devel?
>>>>> I confirm that I didn't received ? error message when I've made
>> dev_tool::check.
>>>>> How can I solve my problem ?
>>>>> Thanks in advance Sylvain
>>>>>
>>>>>
>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>
>>>>>? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>> Ligges<ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>> it. But this is certainly not R-devel?
>>>>>
>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>
>>>>> R CMD check --as-cran
>>>>>
>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>> the findings.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>>> Hello,
>>>>>> I've submitted my package cartograflow and I received an email from
>> your teeam that it does not pass the incoming checks
>> automatically.Debian:
>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>
>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>> check is OK.I used : ==> devtools::check(args =
>> c('--no-manual','--as-cran'))Status is :
>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>> 0.0.0.9000 ????
>>>>>> Duration: 54.6s
>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>> R CMD check succeeded
>>>>>> Can you? help me to fix the problem?
>>>>>> Thanks in advance to your replySylvain
>>>>>>? ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org
>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>
>>>>>? ? ? ? ? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>>>? ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>? 
>>>
>>>
>>>? ??? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
? 

??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel  
	[[alternative HTML version deleted]]


From r@mon|@||on @end|ng |rom gm@||@com  Fri Apr  5 10:24:01 2019
From: r@mon|@||on @end|ng |rom gm@||@com (=?UTF-8?Q?Ram=C3=B3n_Fallon?=)
Date: Fri, 5 Apr 2019 09:24:01 +0100
Subject: [R-pkg-devel] attempt to re-insert old removed package
Message-ID: <CA+WKpEun6rzO=PA8TY0SR16JejngtZuFOhFcO9Qff-bZYnNZmg@mail.gmail.com>

Hi,

I've been searching for some procedures to try an get an old package back
into CRAN.

It's package that has the re exclamation mark on cran github and is not
available via install.packages() for modern version of R.

However some small changes to the source were enough to get it installed
via R CMD INSTALL, so I thought I might how difficult it would be to get it
back into the CRAN repo, but I have been able to find procedures for that
process.

Any body who has managed this already? Helpful links appreciated, many
thanks.

	[[alternative HTML version deleted]]


From z42d|r@j @end|ng |rom uco@e@  Fri Apr  5 12:29:49 2019
From: z42d|r@j @end|ng |rom uco@e@ (Jose V. Die)
Date: Fri, 5 Apr 2019 11:29:49 +0100
Subject: [R-pkg-devel] What version does "CRAN check list" refer to ?
In-Reply-To: <423C9941-F9D4-4F33-8C02-F8D7110E218F@uco.es>
References: <mailman.3715.11.1554372086.53491.r-package-devel@r-project.org>
 <423C9941-F9D4-4F33-8C02-F8D7110E218F@uco.es>
Message-ID: <B20F67F6-6811-485D-8C88-0F83B741E8D5@uco.es>

Hi, 

I am working on my first package and I released a new version (1.0.11). The CRAN checks link shows the last updated for today although the check details section refers to version 1.0.1. 

So, I?m confused about it. Are those check results from my old version or the current version just released? 


Package : https://cran.r-project.org/web/packages/geneHummus/index.html 
CRAN checks : https://cran.r-project.org/web/checks/check_results_geneHummus.html

Best, 
Jose



????????
Jose V. Die, Ph.D.

Departamento de Gen?tica
Escuela T?cnica Superior de Ingenieros Agr?nomos
Campus de Rabanales
Universidad de C?rdoba 

https://jdieramon.github.io


From pd@|gd @end|ng |rom gm@||@com  Fri Apr  5 13:30:27 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Fri, 5 Apr 2019 13:30:27 +0200
Subject: [R-pkg-devel] attempt to re-insert old removed package
In-Reply-To: <CA+WKpEun6rzO=PA8TY0SR16JejngtZuFOhFcO9Qff-bZYnNZmg@mail.gmail.com>
References: <CA+WKpEun6rzO=PA8TY0SR16JejngtZuFOhFcO9Qff-bZYnNZmg@mail.gmail.com>
Message-ID: <A18DDBA7-9BEA-4589-814E-377F5A50235B@gmail.com>

For most packages[*], I assume that you can just take on the role as maintainer, bump the version number and resubmit. If you don't actually maintain it, then of course it might fall of CRAN again after a while.

-pd

[*] Actually, I expect that CRAN policy implies "all" here; I just can't be bothered to check...


> On 5 Apr 2019, at 10:24 , Ram?n Fallon <ramonfallon at gmail.com> wrote:
> 
> Hi,
> 
> I've been searching for some procedures to try an get an old package back
> into CRAN.
> 
> It's package that has the re exclamation mark on cran github and is not
> available via install.packages() for modern version of R.
> 
> However some small changes to the source were enough to get it installed
> via R CMD INSTALL, so I thought I might how difficult it would be to get it
> back into the CRAN repo, but I have been able to find procedures for that
> process.
> 
> Any body who has managed this already? Helpful links appreciated, many
> thanks.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From edd @end|ng |rom deb|@n@org  Fri Apr  5 13:38:28 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 5 Apr 2019 06:38:28 -0500
Subject: [R-pkg-devel] What version does "CRAN check list" refer to ?
In-Reply-To: <B20F67F6-6811-485D-8C88-0F83B741E8D5@uco.es>
References: <mailman.3715.11.1554372086.53491.r-package-devel@r-project.org>
 <423C9941-F9D4-4F33-8C02-F8D7110E218F@uco.es>
 <B20F67F6-6811-485D-8C88-0F83B741E8D5@uco.es>
Message-ID: <23719.15924.958103.124334@rob.eddelbuettel.com>


On 5 April 2019 at 11:29, Jose V. Die wrote:
| I am working on my first package and I released a new version (1.0.11). The CRAN checks link shows the last updated for today although the check details section refers to version 1.0.1. 
| 
| So, I?m confused about it. Are those check results from my old version or the current version just released? 
| 
| 
| Package : https://cran.r-project.org/web/packages/geneHummus/index.html 
| CRAN checks : https://cran.r-project.org/web/checks/check_results_geneHummus.html

If you look at the package page you see that
 - your new version is the current one _in source form_
 - the binary builds provided are currently _all behind at the previous version_
 - the results page has a version column and is currently mixed

It simply takes 24 to 48 hours for the builds jobs to catch up.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Fri Apr  5 13:52:36 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 5 Apr 2019 06:52:36 -0500
Subject: [R-pkg-devel] attempt to re-insert old removed package
In-Reply-To: <A18DDBA7-9BEA-4589-814E-377F5A50235B@gmail.com>
References: <CA+WKpEun6rzO=PA8TY0SR16JejngtZuFOhFcO9Qff-bZYnNZmg@mail.gmail.com>
 <A18DDBA7-9BEA-4589-814E-377F5A50235B@gmail.com>
Message-ID: <23719.16772.337203.486154@rob.eddelbuettel.com>


On 5 April 2019 at 13:30, peter dalgaard wrote:
| For most packages[*], I assume that you can just take on the role as maintainer, bump the version number and resubmit. If you don't actually maintain it, then of course it might fall of CRAN again after a while.
| 
| -pd
| 
| [*] Actually, I expect that CRAN policy implies "all" here; I just can't be bothered to check...

One important aspect, though, is that 

| > However some small changes to the source were enough to get it installed
| > via R CMD INSTALL, so I thought I might how difficult it would be to get it

may not be enough.  Re-admitting a dead package is closer to admitting a new
package so it is expected to be free and clear of WARNING, NOTE and ERROR too.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Fri Apr  5 15:34:34 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 5 Apr 2019 13:34:34 +0000
Subject: [R-pkg-devel] attempt to re-insert old removed package
In-Reply-To: <23719.16772.337203.486154@rob.eddelbuettel.com>
References: <CA+WKpEun6rzO=PA8TY0SR16JejngtZuFOhFcO9Qff-bZYnNZmg@mail.gmail.com>
 <A18DDBA7-9BEA-4589-814E-377F5A50235B@gmail.com>
 <23719.16772.337203.486154@rob.eddelbuettel.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F70D405@MBXP01.ds.man.ac.uk>

It depends on the specific case but attempting to check with the previous maintainer/author looks like a courteous first step
before taking over.

Georgi Boshnakov


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dirk Eddelbuettel
Sent: 05 April 2019 12:53
To: peter dalgaard
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] attempt to re-insert old removed package


On 5 April 2019 at 13:30, peter dalgaard wrote:
| For most packages[*], I assume that you can just take on the role as maintainer, bump the version number and resubmit. If you don't actually maintain it, then of course it might fall of CRAN again after a while.
| 
| -pd
| 
| [*] Actually, I expect that CRAN policy implies "all" here; I just can't be bothered to check...

One important aspect, though, is that 

| > However some small changes to the source were enough to get it installed
| > via R CMD INSTALL, so I thought I might how difficult it would be to get it

may not be enough.  Re-admitting a dead package is closer to admitting a new
package so it is expected to be free and clear of WARNING, NOTE and ERROR too.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Sat Apr  6 12:39:35 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Sat, 6 Apr 2019 10:39:35 +0000
Subject: [R-pkg-devel] can't commit changes to a package on  R-Forge
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F70D55D@MBXP01.ds.man.ac.uk>

Hi,

I was given admin access to an R package developed on R-Forge, which I have not used before. I installed a command line svn client, checked out the package
>svn checkout svn://geobosh at svn.r-forge.r-project.org/svnroot/fints/

update, etc works fine, until I try to commit the changes:

>svn commit -m "update by Georgi"
svn: E170001: Commit failed (details follow):
svn: E170001: Authorization failed

The commit command doesn't ask me for username/password and all my attempts were in vain. Google search finds similar queries but the answers didn't help.

I can't find any way to make it ask me for credentials and will appreciate any help.


Georgi Boshnakov




	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr  6 13:39:58 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 6 Apr 2019 07:39:58 -0400
Subject: [R-pkg-devel] can't commit changes to a package on R-Forge
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F70D55D@MBXP01.ds.man.ac.uk>
References: <438D2EC9EAFE5946B2D5864670EA468E018F70D55D@MBXP01.ds.man.ac.uk>
Message-ID: <96ecbcd7-4220-a4f3-c6dc-e06a251d5b48@gmail.com>

On 06/04/2019 6:39 a.m., Georgi Boshnakov wrote:
> Hi,
> 
> I was given admin access to an R package developed on R-Forge, which I have not used before. I installed a command line svn client, checked out the package
>> svn checkout svn://geobosh at svn.r-forge.r-project.org/svnroot/fints/
> 
> update, etc works fine, until I try to commit the changes:
> 
>> svn commit -m "update by Georgi"
> svn: E170001: Commit failed (details follow):
> svn: E170001: Authorization failed
> 
> The commit command doesn't ask me for username/password and all my attempts were in vain. Google search finds similar queries but the answers didn't help.
> 
> I can't find any way to make it ask me for credentials and will appreciate any help.

I believe r-forge uses ssh public keys for authorization.  The manual 
(http://download.r-forge.r-project.org/R-Forge_Manual.pdf) mentions the 
possibility of password authentication, but I think that was dropped 
several years ago.  You need to upload your key in the Account 
Maintenance page:  detailed instructions are in the manual.

Duncan Murdoch


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Sat Apr  6 13:58:13 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Sat, 6 Apr 2019 11:58:13 +0000
Subject: [R-pkg-devel] can't commit changes to a package on R-Forge
In-Reply-To: <96ecbcd7-4220-a4f3-c6dc-e06a251d5b48@gmail.com>
References: <438D2EC9EAFE5946B2D5864670EA468E018F70D55D@MBXP01.ds.man.ac.uk>
 <96ecbcd7-4220-a4f3-c6dc-e06a251d5b48@gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F70D583@MBXP01.ds.man.ac.uk>

Thanks, I didn't realise that password approach has been dropped.

Georgi Boshnakov


-----Original Message-----
From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com] 
Sent: 06 April 2019 12:40
To: Georgi Boshnakov; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] can't commit changes to a package on R-Forge

On 06/04/2019 6:39 a.m., Georgi Boshnakov wrote:
> Hi,
> 
> I was given admin access to an R package developed on R-Forge, which I have not used before. I installed a command line svn client, checked out the package
>> svn checkout svn://geobosh at svn.r-forge.r-project.org/svnroot/fints/
> 
> update, etc works fine, until I try to commit the changes:
> 
>> svn commit -m "update by Georgi"
> svn: E170001: Commit failed (details follow):
> svn: E170001: Authorization failed
> 
> The commit command doesn't ask me for username/password and all my attempts were in vain. Google search finds similar queries but the answers didn't help.
> 
> I can't find any way to make it ask me for credentials and will appreciate any help.

I believe r-forge uses ssh public keys for authorization.  The manual 
(http://download.r-forge.r-project.org/R-Forge_Manual.pdf) mentions the 
possibility of password authentication, but I think that was dropped 
several years ago.  You need to upload your key in the Account 
Maintenance page:  detailed instructions are in the manual.

Duncan Murdoch

From c@rtogr@iiow m@iii@g oii gm@ii@com  Sun Apr  7 18:16:26 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Sun, 7 Apr 2019 16:16:26 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?b?UmXCoDpSZTogIFJlwqA6UmU6ICBSZcKgOlJlOiBw?=
 =?utf-8?q?ackage_cartograflow=5F0=2E0=2E0=2E9000=2Etar=2Egz?=
In-Reply-To: <1603540995.1859475.1554390526183@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
Message-ID: <132793636.29335534.1554653786460@mail.yahoo.com>

Hi,Thanks to your reply and your information.?Right now it stays only one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't identified this note in repertory R.check. What's file I've to check?I'd like to know if I can new submission in CRAN with one note.?Sylvain?



Envoy? depuis Yahoo?Mail pour Android 
 
  Le jeu., avr. 4, 2019 ? 17:09, Ma?lle SALMON<maelle.salmon at yahoo.se> a ?crit :    I'd recommend reading https://r-pkgs.org/description.html#dependencies (and the rest of the book is very good as well), it'll help you understand why and how to declare dependencies.




    Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com <cartograflow at gmail.com> skrev:  
 
 How I can declare the dependencies in DESCRIPTION file?
?depends: library(dplyr,dependencies =TRUE)
Thanks?
Envoy? depuis Yahoo?Mail pour Android 
 
? Le jeu., avr. 4, 2019 ? 14:42, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? .... or forgot to declare a dependency on that package in the 
DESCRIPTION file...

Best,
Uwe Ligges

On 04.04.2019 13:34, Sebastian Meyer wrote:
> There are probably no clairvoyants around here. So, again, without
> access to the up-to-date source code of your package, nobody will be
> able to help.
> 
> "there is no package called ..." means that the given package is not
> installed in any of the libraries currently in use by R (see .libPaths()
> for the relevant paths). Maybe you have installed "dplyr" in a library
> used by your standard R installation, but not in any library used by
> your R-devel installation (which you seem to use for checking the
> package)? Just a wild guess.
> 
> 
> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>> I follow up your recommendation and for the moment I didn't used
>> "conflicted".
>>
>> So, I've made the nex R CMD check and I have the problem
>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>? ? there is no package called ?dplyr?
>>
>> How I can? solve this issue?
>>
>> Thanks in advance
>>
>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>> <seb.meyer at fau.de> a ?crit :
>>
>>
>> Note that output concerning masked objects are just messages which do
>> not cause your vignette to fail. So it is not stricly necessary to start
>> working on these conflicts now.
>>
>> However, looking closely at the win-builder check results
>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>> I see the following output below these messages
>>
>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>> argument is of length zero
>>
>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>
>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>
>>> Error in if (horiz) { : argument is of length zero
>>
>> and the subsequent traceback() shows that the error originates from
>>
>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>> 2414 RIATE, 2018.",
>>>? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>> "topright"),
>>>? ? ? ? ? col = "grey")
>>
>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>> wrongly matched to the "horiz" argument of layoutLayer().
>>
>> Cheers,
>>
>>? ??? Sebastian
>>
>>
>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>:
>>>
>>> Hi,I don't know if my explanations are clear.I tried several way to
>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>
>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>? ? Hi,
>>>>
>>>> I come back to you? because I have always the problem with
>> devtools::check of my package.
>>>>
>>>> I used the command to check my package with R-devel :
>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>> check --as-cran
>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>
>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>? ????????Attaching package: 'dplyr'
>>>>? ????????The following objects are masked from 'package:stats':
>>>>? ??????????????????? filter, lag
>>>>? ????????The following objects are masked from 'package:base':
>>>>? ??????????????????? intersect, setdiff, setequal, union
>>>>
>>>> The solve this issue I added in rmd file, description file and the
>> namespace the package conflicted.
>>>> So, the package conflicted avoid to have this warning.
>>>>
>>>> But when I run R-devel CMD check I have a new issue that is Error in
>> loadNamespace...no package called ?conflicted? (see below)
>>>>
>>>> Can you help me to solve this issue if tit's possible?
>>>> Thanks in advance to your help !
>>>> Sylvain
>>>> -----------------
>>>> Below extract of 00check.log
>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>> Installation failed.
>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>> * DONE
>>>> Status: 1 ERROR, 1 NOTE
>>>>
>>>> Below 00install.out
>>>> * installing *source* package ?cartograflow? ...
>>>> ** using staged installation
>>>> ** R
>>>> ** inst
>>>> ** byte-compile and prepare package for lazy loading
>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>> vI[[i]]) :
>>>>? ? there is no package called ?conflicted?
>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>> withOneRestart -> doWithOneRestart
>>>> Ex?cution arr?t?e
>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>? 
>>>>? ? FWIW, you should be able to reproduce at least the following NOTEs
>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>
>>>> * checking CRAN incoming feasibility ... NOTE
>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>>?
>>>>
>>>> New submission
>>>>
>>>> Version contains large components (0.0.0.9000)
>>>>
>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>? ? flowmapping (7:41)
>>>>
>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>? ? c(person("Fran?oise", "Bahoken", email =
>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>> role = c("cre","aut")),
>>>>? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>> = c("aut"))
>>>>
>>>> The Title field should be in title case. Current version is:
>>>> ?thematic cartography of flows and movements?
>>>> In title case that is:
>>>> ?Thematic Cartography of Flows and Movements?
>>>>
>>>> Those are all classical mistakes ("we've all been there").? The
>>>> vignette errors may or may not be specific to R devel.
>>>>
>>>> /Henrik
>>>>
>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com>
>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>
>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>> use r-devel?
>>>>> I confirm that I didn't received ? error message when I've made
>> dev_tool::check.
>>>>> How can I solve my problem ?
>>>>> Thanks in advance Sylvain
>>>>>
>>>>>
>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>
>>>>>? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>> Ligges<ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>> it. But this is certainly not R-devel?
>>>>>
>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>
>>>>> R CMD check --as-cran
>>>>>
>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>> the findings.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>> <mailto:cartograflow at gmail.com> wrote:
>>>>>> Hello,
>>>>>> I've submitted my package cartograflow and I received an email from
>> your teeam that it does not pass the incoming checks
>> automatically.Debian:
>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>
>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>> check is OK.I used : ==> devtools::check(args =
>> c('--no-manual','--as-cran'))Status is :
>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>> 0.0.0.9000 ????
>>>>>> Duration: 54.6s
>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>> R CMD check succeeded
>>>>>> Can you? help me to fix the problem?
>>>>>> Thanks in advance to your replySylvain
>>>>>>? ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org
>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>
>>>>>? ? ? ? ? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>>>? ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>? 
>>>
>>>
>>>? ??? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
? 

??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel    

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Apr  7 18:22:29 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Apr 2019 12:22:29 -0400
Subject: [R-pkg-devel] 
 =?utf-8?b?UmXCoDpSZTogUmXCoDpSZTogUmXCoDpSZTogcGFj?=
 =?utf-8?q?kage_cartograflow=5F0=2E0=2E0=2E9000=2Etar=2Egz?=
In-Reply-To: <132793636.29335534.1554653786460@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
Message-ID: <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>

On 07/04/2019 12:16 p.m., cartograflow at gmail.com wrote:
> Hi,Thanks to your reply and your information.?Right now it stays only one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't identified this note in repertory R.check. What's file I've to check?I'd like to know if I can new submission in CRAN with one note.?Sylvain

It will be in cartograflow.Rcheck/00check.log.

Duncan Murdoch

> 
> 
> 
> Envoy? depuis Yahoo?Mail pour Android
>   
>    Le jeu., avr. 4, 2019 ? 17:09, Ma?lle SALMON<maelle.salmon at yahoo.se> a ?crit :    I'd recommend reading https://r-pkgs.org/description.html#dependencies (and the rest of the book is very good as well), it'll help you understand why and how to declare dependencies.
> 
> 
> 
> 
>      Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com <cartograflow at gmail.com> skrev:
>   
>   How I can declare the dependencies in DESCRIPTION file?
>  ?depends: library(dplyr,dependencies =TRUE)
> Thanks
> Envoy? depuis Yahoo?Mail pour Android
>   
>  ? Le jeu., avr. 4, 2019 ? 14:42, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? .... or forgot to declare a dependency on that package in the
> DESCRIPTION file...
> 
> Best,
> Uwe Ligges
> 
> On 04.04.2019 13:34, Sebastian Meyer wrote:
>> There are probably no clairvoyants around here. So, again, without
>> access to the up-to-date source code of your package, nobody will be
>> able to help.
>>
>> "there is no package called ..." means that the given package is not
>> installed in any of the libraries currently in use by R (see .libPaths()
>> for the relevant paths). Maybe you have installed "dplyr" in a library
>> used by your standard R installation, but not in any library used by
>> your R-devel installation (which you seem to use for checking the
>> package)? Just a wild guess.
>>
>>
>> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>>> I follow up your recommendation and for the moment I didn't used
>>> "conflicted".
>>>
>>> So, I've made the nex R CMD check and I have the problem
>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>> vI[[i]]) :
>>>  ? ? there is no package called ?dplyr?
>>>
>>> How I can? solve this issue?
>>>
>>> Thanks in advance
>>>
>>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>>> <seb.meyer at fau.de> a ?crit :
>>>
>>>
>>> Note that output concerning masked objects are just messages which do
>>> not cause your vignette to fail. So it is not stricly necessary to start
>>> working on these conflicts now.
>>>
>>> However, looking closely at the win-builder check results
>>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>>> I see the following output below these messages
>>>
>>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>>> argument is of length zero
>>>
>>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>>
>>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>>
>>>> Error in if (horiz) { : argument is of length zero
>>>
>>> and the subsequent traceback() shows that the error originates from
>>>
>>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>>  ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>>> 2414 RIATE, 2018.",
>>>>  ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>>> "topright"),
>>>>  ? ? ? ? ? col = "grey")
>>>
>>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>>> wrongly matched to the "horiz" argument of layoutLayer().
>>>
>>> Cheers,
>>>
>>>  ? ??? Sebastian
>>>
>>>
>>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>:
>>>>
>>>> Hi,I don't know if my explanations are clear.I tried several way to
>>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>>
>>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>  ? ? Hi,
>>>>>
>>>>> I come back to you? because I have always the problem with
>>> devtools::check of my package.
>>>>>
>>>>> I used the command to check my package with R-devel :
>>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>>> check --as-cran
>>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>>
>>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>>  ? ????????Attaching package: 'dplyr'
>>>>>  ? ????????The following objects are masked from 'package:stats':
>>>>>  ? ??????????????????? filter, lag
>>>>>  ? ????????The following objects are masked from 'package:base':
>>>>>  ? ??????????????????? intersect, setdiff, setequal, union
>>>>>
>>>>> The solve this issue I added in rmd file, description file and the
>>> namespace the package conflicted.
>>>>> So, the package conflicted avoid to have this warning.
>>>>>
>>>>> But when I run R-devel CMD check I have a new issue that is Error in
>>> loadNamespace...no package called ?conflicted? (see below)
>>>>>
>>>>> Can you help me to solve this issue if tit's possible?
>>>>> Thanks in advance to your help !
>>>>> Sylvain
>>>>> -----------------
>>>>> Below extract of 00check.log
>>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>>> Installation failed.
>>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>>> * DONE
>>>>> Status: 1 ERROR, 1 NOTE
>>>>>
>>>>> Below 00install.out
>>>>> * installing *source* package ?cartograflow? ...
>>>>> ** using staged installation
>>>>> ** R
>>>>> ** inst
>>>>> ** byte-compile and prepare package for lazy loading
>>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>> vI[[i]]) :
>>>>>  ? ? there is no package called ?conflicted?
>>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>>> withOneRestart -> doWithOneRestart
>>>>> Ex?cution arr?t?e
>>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>  ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>>    
>>>>>  ? ? FWIW, you should be able to reproduce at least the following NOTEs
>>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>>
>>>>> * checking CRAN incoming feasibility ... NOTE
>>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>>?
>>>>>
>>>>> New submission
>>>>>
>>>>> Version contains large components (0.0.0.9000)
>>>>>
>>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>>  ? ? flowmapping (7:41)
>>>>>
>>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>>  ? ? c(person("Fran?oise", "Bahoken", email =
>>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>>> role = c("cre","aut")),
>>>>>  ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>>> = c("aut"))
>>>>>
>>>>> The Title field should be in title case. Current version is:
>>>>> ?thematic cartography of flows and movements?
>>>>> In title case that is:
>>>>> ?Thematic Cartography of Flows and Movements?
>>>>>
>>>>> Those are all classical mistakes ("we've all been there").? The
>>>>> vignette errors may or may not be specific to R devel.
>>>>>
>>>>> /Henrik
>>>>>
>>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>
>>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>>
>>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>>> use r-devel?
>>>>>> I confirm that I didn't received ? error message when I've made
>>> dev_tool::check.
>>>>>> How can I solve my problem ?
>>>>>> Thanks in advance Sylvain
>>>>>>
>>>>>>
>>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>>
>>>>>>  ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>>> Ligges<ligges at statistik.tu-dortmund.de
>>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>>> it. But this is certainly not R-devel?
>>>>>>
>>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>>
>>>>>> R CMD check --as-cran
>>>>>>
>>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>>> the findings.
>>>>>>
>>>>>> Best,
>>>>>> Uwe Ligges
>>>>>>
>>>>>>
>>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>>> Hello,
>>>>>>> I've submitted my package cartograflow and I received an email from
>>> your teeam that it does not pass the incoming checks
>>> automatically.Debian:
>>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>>
>>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>>> check is OK.I used : ==> devtools::check(args =
>>> c('--no-manual','--as-cran'))Status is :
>>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>>> 0.0.0.9000 ????
>>>>>>> Duration: 54.6s
>>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>>> R CMD check succeeded
>>>>>>> Can you? help me to fix the problem?
>>>>>>> Thanks in advance to your replySylvain
>>>>>>>  ? ? ? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org
>>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>
>>>>>>
>>>>>>
>>>>>>  ? ? ? ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>>>  ? ??? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>    
>>>>
>>>>
>>>>  ? ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>    
> 
>  ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@rtogr@iiow m@iii@g oii gm@ii@com  Sun Apr  7 21:01:59 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Sun, 7 Apr 2019 19:01:59 +0000 (UTC)
Subject: [R-pkg-devel] 
 =?utf-8?b?UmXCoDpSZTogUmXCoDpSZTogUmXCoDpSZTogcGFj?=
 =?utf-8?q?kage_cartograflow=5F0=2E0=2E0=2E9000=2Etar=2Egz?=
In-Reply-To: <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
Message-ID: <1128749348.29445971.1554663719667@mail.yahoo.com>

 Thanks!So, I've already check and I didn't see the descrption of the note in 00check.log.The only thing I can say is that there's a problem with Author.
I tried to put Authors at R and it also generates notes.
Do you have any idea? 

You will find hereafter the copy of the file 00check.log.Thanks in advance 
----------------* using log directory ?/home/sylvain/svn/cartograflow.Rcheck?
* using R Under development (unstable) (2019-04-04 r76316)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?cartograflow/DESCRIPTION? ... OK
* this is package ?cartograflow? version ?1.0.0.0?
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr>?

New submission

Author field should be Authors at R.? Current value is:
? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
??????????? person("other", "other", email = "other.other at gmail.com", role = c("aut")))
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?cartograflow? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking for future file timestamps ... OK
* checking ?build? directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking installed files from ?inst/doc? ... OK
* checking files in ?vignettes? ... OK
* checking examples ... OK
* checking for unstated dependencies in ?tests? ... OK
* checking tests ... OK
? Running ?testthat.R?
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ?inst/doc? ... OK
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* DONE
Status: 1 NOTE


    Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch <murdoch.duncan at gmail.com> a ?crit :  
 
 On 07/04/2019 12:16 p.m., cartograflow at gmail.com wrote:
> Hi,Thanks to your reply and your information.?Right now it stays only one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't identified this note in repertory R.check. What's file I've to check?I'd like to know if I can new submission in CRAN with one note.?Sylvain

It will be in cartograflow.Rcheck/00check.log.

Duncan Murdoch

> 
> 
> 
> Envoy? depuis Yahoo?Mail pour Android
>? 
>? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle SALMON<maelle.salmon at yahoo.se> a ?crit :? ? I'd recommend reading https://r-pkgs.org/description.html#dependencies (and the rest of the book is very good as well), it'll help you understand why and how to declare dependencies.
> 
> 
> 
> 
>? ? ? Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com <cartograflow at gmail.com> skrev:
>? 
>? How I can declare the dependencies in DESCRIPTION file?
>? ?depends: library(dplyr,dependencies =TRUE)
> Thanks
> Envoy? depuis Yahoo?Mail pour Android
>? 
>? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? .... or forgot to declare a dependency on that package in the
> DESCRIPTION file...
> 
> Best,
> Uwe Ligges
> 
> On 04.04.2019 13:34, Sebastian Meyer wrote:
>> There are probably no clairvoyants around here. So, again, without
>> access to the up-to-date source code of your package, nobody will be
>> able to help.
>>
>> "there is no package called ..." means that the given package is not
>> installed in any of the libraries currently in use by R (see .libPaths()
>> for the relevant paths). Maybe you have installed "dplyr" in a library
>> used by your standard R installation, but not in any library used by
>> your R-devel installation (which you seem to use for checking the
>> package)? Just a wild guess.
>>
>>
>> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>>> I follow up your recommendation and for the moment I didn't used
>>> "conflicted".
>>>
>>> So, I've made the nex R CMD check and I have the problem
>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>> vI[[i]]) :
>>>? ? ? there is no package called ?dplyr?
>>>
>>> How I can? solve this issue?
>>>
>>> Thanks in advance
>>>
>>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>>> <seb.meyer at fau.de> a ?crit :
>>>
>>>
>>> Note that output concerning masked objects are just messages which do
>>> not cause your vignette to fail. So it is not stricly necessary to start
>>> working on these conflicts now.
>>>
>>> However, looking closely at the win-builder check results
>>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>>> I see the following output below these messages
>>>
>>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>>> argument is of length zero
>>>
>>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>>
>>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>>
>>>> Error in if (horiz) { : argument is of length zero
>>>
>>> and the subsequent traceback() shows that the error originates from
>>>
>>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>>> 2414 RIATE, 2018.",
>>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>>> "topright"),
>>>>? ? ? ? ? ? col = "grey")
>>>
>>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>>> wrongly matched to the "horiz" argument of layoutLayer().
>>>
>>> Cheers,
>>>
>>>? ? ??? Sebastian
>>>
>>>
>>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>:
>>>>
>>>> Hi,I don't know if my explanations are clear.I tried several way to
>>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>>
>>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>? ? ? Hi,
>>>>>
>>>>> I come back to you? because I have always the problem with
>>> devtools::check of my package.
>>>>>
>>>>> I used the command to check my package with R-devel :
>>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>>> check --as-cran
>>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>>
>>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>>? ? ????????Attaching package: 'dplyr'
>>>>>? ? ????????The following objects are masked from 'package:stats':
>>>>>? ? ??????????????????? filter, lag
>>>>>? ? ????????The following objects are masked from 'package:base':
>>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>>>>>
>>>>> The solve this issue I added in rmd file, description file and the
>>> namespace the package conflicted.
>>>>> So, the package conflicted avoid to have this warning.
>>>>>
>>>>> But when I run R-devel CMD check I have a new issue that is Error in
>>> loadNamespace...no package called ?conflicted? (see below)
>>>>>
>>>>> Can you help me to solve this issue if tit's possible?
>>>>> Thanks in advance to your help !
>>>>> Sylvain
>>>>> -----------------
>>>>> Below extract of 00check.log
>>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>>> Installation failed.
>>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>>> * DONE
>>>>> Status: 1 ERROR, 1 NOTE
>>>>>
>>>>> Below 00install.out
>>>>> * installing *source* package ?cartograflow? ...
>>>>> ** using staged installation
>>>>> ** R
>>>>> ** inst
>>>>> ** byte-compile and prepare package for lazy loading
>>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>> vI[[i]]) :
>>>>>? ? ? there is no package called ?conflicted?
>>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>>> withOneRestart -> doWithOneRestart
>>>>> Ex?cution arr?t?e
>>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>>? ? 
>>>>>? ? ? FWIW, you should be able to reproduce at least the following NOTEs
>>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>>
>>>>> * checking CRAN incoming feasibility ... NOTE
>>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>>?
>>>>>
>>>>> New submission
>>>>>
>>>>> Version contains large components (0.0.0.9000)
>>>>>
>>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>>? ? ? flowmapping (7:41)
>>>>>
>>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>>> role = c("cre","aut")),
>>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>>> = c("aut"))
>>>>>
>>>>> The Title field should be in title case. Current version is:
>>>>> ?thematic cartography of flows and movements?
>>>>> In title case that is:
>>>>> ?Thematic Cartography of Flows and Movements?
>>>>>
>>>>> Those are all classical mistakes ("we've all been there").? The
>>>>> vignette errors may or may not be specific to R devel.
>>>>>
>>>>> /Henrik
>>>>>
>>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>
>>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>>
>>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>>> use r-devel?
>>>>>> I confirm that I didn't received ? error message when I've made
>>> dev_tool::check.
>>>>>> How can I solve my problem ?
>>>>>> Thanks in advance Sylvain
>>>>>>
>>>>>>
>>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>>
>>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>>> Ligges<ligges at statistik.tu-dortmund.de
>>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>>> it. But this is certainly not R-devel?
>>>>>>
>>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>>
>>>>>> R CMD check --as-cran
>>>>>>
>>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>>> the findings.
>>>>>>
>>>>>> Best,
>>>>>> Uwe Ligges
>>>>>>
>>>>>>
>>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>>> Hello,
>>>>>>> I've submitted my package cartograflow and I received an email from
>>> your teeam that it does not pass the incoming checks
>>> automatically.Debian:
>>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>>
>>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>>> check is OK.I used : ==> devtools::check(args =
>>> c('--no-manual','--as-cran'))Status is :
>>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>>> 0.0.0.9000 ????
>>>>>>> Duration: 54.6s
>>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>>> R CMD check succeeded
>>>>>>> Can you? help me to fix the problem?
>>>>>>> Thanks in advance to your replySylvain
>>>>>>>? ? ? ? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org
>>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>
>>>>>>
>>>>>>
>>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>>>? ? ??? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>? ? 
>>>>
>>>>
>>>>? ? ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>? ? 
> 
>? ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

  
	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Sun Apr  7 21:08:39 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Sun, 7 Apr 2019 19:08:39 +0000 (UTC)
Subject: [R-pkg-devel] 
 =?utf-8?b?UmXCoDpSZTogUmXCoDpSZTogUmXCoDpSZTogcGFj?=
 =?utf-8?q?kage_cartograflow=5F0=2E0=2E0=2E9000=2Etar=2Egz?=
In-Reply-To: <1128749348.29445971.1554663719667@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
Message-ID: <23503037.29441704.1554664119026@mail.yahoo.com>

 I've seen in file xxxx the message below:
Package hyperref Warning: Option `pagebackref' has already been used,
(hyperref)??????????????? setting the option has no effect on input line 377.

Can this generate a note?

Sylvain

    Le dimanche 7 avril 2019 ? 21:01:59 UTC+2, cartograflow at gmail.com <cartograflow at gmail.com> a ?crit :  
 
  Thanks!So, I've already check and I didn't see the descrption of the note in 00check.log.The only thing I can say is that there's a problem with Author.
I tried to put Authors at R and it also generates notes.
Do you have any idea? 

You will find hereafter the copy of the file 00check.log.Thanks in advance 
----------------* using log directory ?/home/sylvain/svn/cartograflow.Rcheck?
* using R Under development (unstable) (2019-04-04 r76316)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?cartograflow/DESCRIPTION? ... OK
* this is package ?cartograflow? version ?1.0.0.0?
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr>?

New submission

Author field should be Authors at R.? Current value is:
? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
??????????? person("other", "other", email = "other.other at gmail.com", role = c("aut")))
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?cartograflow? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking for future file timestamps ... OK
* checking ?build? directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking installed files from ?inst/doc? ... OK
* checking files in ?vignettes? ... OK
* checking examples ... OK
* checking for unstated dependencies in ?tests? ... OK
* checking tests ... OK
? Running ?testthat.R?
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ?inst/doc? ... OK
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* DONE
Status: 1 NOTE


    Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch <murdoch.duncan at gmail.com> a ?crit :  
 
 On 07/04/2019 12:16 p.m., cartograflow at gmail.com wrote:
> Hi,Thanks to your reply and your information.?Right now it stays only one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't identified this note in repertory R.check. What's file I've to check?I'd like to know if I can new submission in CRAN with one note.?Sylvain

It will be in cartograflow.Rcheck/00check.log.

Duncan Murdoch

> 
> 
> 
> Envoy? depuis Yahoo?Mail pour Android
>? 
>? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle SALMON<maelle.salmon at yahoo.se> a ?crit :? ? I'd recommend reading https://r-pkgs.org/description.html#dependencies (and the rest of the book is very good as well), it'll help you understand why and how to declare dependencies.
> 
> 
> 
> 
>? ? ? Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com <cartograflow at gmail.com> skrev:
>? 
>? How I can declare the dependencies in DESCRIPTION file?
>? ?depends: library(dplyr,dependencies =TRUE)
> Thanks
> Envoy? depuis Yahoo?Mail pour Android
>? 
>? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? .... or forgot to declare a dependency on that package in the
> DESCRIPTION file...
> 
> Best,
> Uwe Ligges
> 
> On 04.04.2019 13:34, Sebastian Meyer wrote:
>> There are probably no clairvoyants around here. So, again, without
>> access to the up-to-date source code of your package, nobody will be
>> able to help.
>>
>> "there is no package called ..." means that the given package is not
>> installed in any of the libraries currently in use by R (see .libPaths()
>> for the relevant paths). Maybe you have installed "dplyr" in a library
>> used by your standard R installation, but not in any library used by
>> your R-devel installation (which you seem to use for checking the
>> package)? Just a wild guess.
>>
>>
>> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>>> I follow up your recommendation and for the moment I didn't used
>>> "conflicted".
>>>
>>> So, I've made the nex R CMD check and I have the problem
>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>> vI[[i]]) :
>>>? ? ? there is no package called ?dplyr?
>>>
>>> How I can? solve this issue?
>>>
>>> Thanks in advance
>>>
>>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>>> <seb.meyer at fau.de> a ?crit :
>>>
>>>
>>> Note that output concerning masked objects are just messages which do
>>> not cause your vignette to fail. So it is not stricly necessary to start
>>> working on these conflicts now.
>>>
>>> However, looking closely at the win-builder check results
>>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>>> I see the following output below these messages
>>>
>>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>>> argument is of length zero
>>>
>>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>>
>>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>>
>>>> Error in if (horiz) { : argument is of length zero
>>>
>>> and the subsequent traceback() shows that the error originates from
>>>
>>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>>> 2414 RIATE, 2018.",
>>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>>> "topright"),
>>>>? ? ? ? ? ? col = "grey")
>>>
>>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>>> wrongly matched to the "horiz" argument of layoutLayer().
>>>
>>> Cheers,
>>>
>>>? ? ??? Sebastian
>>>
>>>
>>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>:
>>>>
>>>> Hi,I don't know if my explanations are clear.I tried several way to
>>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>>
>>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>? ? ? Hi,
>>>>>
>>>>> I come back to you? because I have always the problem with
>>> devtools::check of my package.
>>>>>
>>>>> I used the command to check my package with R-devel :
>>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>>> check --as-cran
>>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>>
>>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>>? ? ????????Attaching package: 'dplyr'
>>>>>? ? ????????The following objects are masked from 'package:stats':
>>>>>? ? ??????????????????? filter, lag
>>>>>? ? ????????The following objects are masked from 'package:base':
>>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>>>>>
>>>>> The solve this issue I added in rmd file, description file and the
>>> namespace the package conflicted.
>>>>> So, the package conflicted avoid to have this warning.
>>>>>
>>>>> But when I run R-devel CMD check I have a new issue that is Error in
>>> loadNamespace...no package called ?conflicted? (see below)
>>>>>
>>>>> Can you help me to solve this issue if tit's possible?
>>>>> Thanks in advance to your help !
>>>>> Sylvain
>>>>> -----------------
>>>>> Below extract of 00check.log
>>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>>> Installation failed.
>>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>>> * DONE
>>>>> Status: 1 ERROR, 1 NOTE
>>>>>
>>>>> Below 00install.out
>>>>> * installing *source* package ?cartograflow? ...
>>>>> ** using staged installation
>>>>> ** R
>>>>> ** inst
>>>>> ** byte-compile and prepare package for lazy loading
>>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>> vI[[i]]) :
>>>>>? ? ? there is no package called ?conflicted?
>>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>>> withOneRestart -> doWithOneRestart
>>>>> Ex?cution arr?t?e
>>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>>? ? 
>>>>>? ? ? FWIW, you should be able to reproduce at least the following NOTEs
>>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>>
>>>>> * checking CRAN incoming feasibility ... NOTE
>>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>>?
>>>>>
>>>>> New submission
>>>>>
>>>>> Version contains large components (0.0.0.9000)
>>>>>
>>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>>? ? ? flowmapping (7:41)
>>>>>
>>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>>> role = c("cre","aut")),
>>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>>> = c("aut"))
>>>>>
>>>>> The Title field should be in title case. Current version is:
>>>>> ?thematic cartography of flows and movements?
>>>>> In title case that is:
>>>>> ?Thematic Cartography of Flows and Movements?
>>>>>
>>>>> Those are all classical mistakes ("we've all been there").? The
>>>>> vignette errors may or may not be specific to R devel.
>>>>>
>>>>> /Henrik
>>>>>
>>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>
>>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>>
>>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>>> use r-devel?
>>>>>> I confirm that I didn't received ? error message when I've made
>>> dev_tool::check.
>>>>>> How can I solve my problem ?
>>>>>> Thanks in advance Sylvain
>>>>>>
>>>>>>
>>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>>
>>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>>> Ligges<ligges at statistik.tu-dortmund.de
>>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>>> it. But this is certainly not R-devel?
>>>>>>
>>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>>
>>>>>> R CMD check --as-cran
>>>>>>
>>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>>> the findings.
>>>>>>
>>>>>> Best,
>>>>>> Uwe Ligges
>>>>>>
>>>>>>
>>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>>> Hello,
>>>>>>> I've submitted my package cartograflow and I received an email from
>>> your teeam that it does not pass the incoming checks
>>> automatically.Debian:
>>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>>
>>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>>> check is OK.I used : ==> devtools::check(args =
>>> c('--no-manual','--as-cran'))Status is :
>>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>>> 0.0.0.9000 ????
>>>>>>> Duration: 54.6s
>>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>>> R CMD check succeeded
>>>>>>> Can you? help me to fix the problem?
>>>>>>> Thanks in advance to your replySylvain
>>>>>>>? ? ? ? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org
>>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>
>>>>>>
>>>>>>
>>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>>>? ? ??? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>? ? 
>>>>
>>>>
>>>>? ? ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>? ? 
> 
>? ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

    
	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Sun Apr  7 21:09:11 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Sun, 7 Apr 2019 19:09:11 +0000 (UTC)
Subject: [R-pkg-devel] 
 =?utf-8?b?UmXCoDpSZTogUmXCoDpSZTogUmXCoDpSZTogcGFj?=
 =?utf-8?q?kage_cartograflow=5F0=2E0=2E0=2E9000=2Etar=2Egz?=
In-Reply-To: <23503037.29441704.1554664119026@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
 <23503037.29441704.1554664119026@mail.yahoo.com>
Message-ID: <1428857517.29447432.1554664151403@mail.yahoo.com>

 The file is Rdlatex;

    Le dimanche 7 avril 2019 ? 21:08:39 UTC+2, cartograflow at gmail.com <cartograflow at gmail.com> a ?crit :  
 
  I've seen in file xxxx the message below:
Package hyperref Warning: Option `pagebackref' has already been used,
(hyperref)??????????????? setting the option has no effect on input line 377.

Can this generate a note?

Sylvain

    Le dimanche 7 avril 2019 ? 21:01:59 UTC+2, cartograflow at gmail.com <cartograflow at gmail.com> a ?crit :  
 
  Thanks!So, I've already check and I didn't see the descrption of the note in 00check.log.The only thing I can say is that there's a problem with Author.
I tried to put Authors at R and it also generates notes.
Do you have any idea? 

You will find hereafter the copy of the file 00check.log.Thanks in advance 
----------------* using log directory ?/home/sylvain/svn/cartograflow.Rcheck?
* using R Under development (unstable) (2019-04-04 r76316)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?cartograflow/DESCRIPTION? ... OK
* this is package ?cartograflow? version ?1.0.0.0?
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr>?

New submission

Author field should be Authors at R.? Current value is:
? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
??????????? person("other", "other", email = "other.other at gmail.com", role = c("aut")))
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?cartograflow? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking for future file timestamps ... OK
* checking ?build? directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking installed files from ?inst/doc? ... OK
* checking files in ?vignettes? ... OK
* checking examples ... OK
* checking for unstated dependencies in ?tests? ... OK
* checking tests ... OK
? Running ?testthat.R?
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ?inst/doc? ... OK
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* DONE
Status: 1 NOTE


    Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch <murdoch.duncan at gmail.com> a ?crit :  
 
 On 07/04/2019 12:16 p.m., cartograflow at gmail.com wrote:
> Hi,Thanks to your reply and your information.?Right now it stays only one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't identified this note in repertory R.check. What's file I've to check?I'd like to know if I can new submission in CRAN with one note.?Sylvain

It will be in cartograflow.Rcheck/00check.log.

Duncan Murdoch

> 
> 
> 
> Envoy? depuis Yahoo?Mail pour Android
>? 
>? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle SALMON<maelle.salmon at yahoo.se> a ?crit :? ? I'd recommend reading https://r-pkgs.org/description.html#dependencies (and the rest of the book is very good as well), it'll help you understand why and how to declare dependencies.
> 
> 
> 
> 
>? ? ? Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com <cartograflow at gmail.com> skrev:
>? 
>? How I can declare the dependencies in DESCRIPTION file?
>? ?depends: library(dplyr,dependencies =TRUE)
> Thanks
> Envoy? depuis Yahoo?Mail pour Android
>? 
>? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? .... or forgot to declare a dependency on that package in the
> DESCRIPTION file...
> 
> Best,
> Uwe Ligges
> 
> On 04.04.2019 13:34, Sebastian Meyer wrote:
>> There are probably no clairvoyants around here. So, again, without
>> access to the up-to-date source code of your package, nobody will be
>> able to help.
>>
>> "there is no package called ..." means that the given package is not
>> installed in any of the libraries currently in use by R (see .libPaths()
>> for the relevant paths). Maybe you have installed "dplyr" in a library
>> used by your standard R installation, but not in any library used by
>> your R-devel installation (which you seem to use for checking the
>> package)? Just a wild guess.
>>
>>
>> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>>> I follow up your recommendation and for the moment I didn't used
>>> "conflicted".
>>>
>>> So, I've made the nex R CMD check and I have the problem
>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>> vI[[i]]) :
>>>? ? ? there is no package called ?dplyr?
>>>
>>> How I can? solve this issue?
>>>
>>> Thanks in advance
>>>
>>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>>> <seb.meyer at fau.de> a ?crit :
>>>
>>>
>>> Note that output concerning masked objects are just messages which do
>>> not cause your vignette to fail. So it is not stricly necessary to start
>>> working on these conflicts now.
>>>
>>> However, looking closely at the win-builder check results
>>> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>>> I see the following output below these messages
>>>
>>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>>>> argument is of length zero
>>>
>>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>>> vignette (at least in the version submitted to win-builder a few weeks ago).
>>>
>>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>>
>>>> Error in if (horiz) { : argument is of length zero
>>>
>>> and the subsequent traceback() shows that the error originates from
>>>
>>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", sources =
>>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>>> 2414 RIATE, 2018.",
>>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>>> "topright"),
>>>>? ? ? ? ? ? col = "grey")
>>>
>>> So it seems to me that the unnamed argument 'north(pos = "topright")' is
>>> wrongly matched to the "horiz" argument of layoutLayer().
>>>
>>> Cheers,
>>>
>>>? ? ??? Sebastian
>>>
>>>
>>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>:
>>>>
>>>> Hi,I don't know if my explanations are clear.I tried several way to
>>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>>>>
>>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>? ? ? Hi,
>>>>>
>>>>> I come back to you? because I have always the problem with
>>> devtools::check of my package.
>>>>>
>>>>> I used the command to check my package with R-devel :
>>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh CMD
>>> check --as-cran
>>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>>
>>>>> When I start the rmd file there is a warning due to package dplyr :
>>>>>? ? ????????Attaching package: 'dplyr'
>>>>>? ? ????????The following objects are masked from 'package:stats':
>>>>>? ? ??????????????????? filter, lag
>>>>>? ? ????????The following objects are masked from 'package:base':
>>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>>>>>
>>>>> The solve this issue I added in rmd file, description file and the
>>> namespace the package conflicted.
>>>>> So, the package conflicted avoid to have this warning.
>>>>>
>>>>> But when I run R-devel CMD check I have a new issue that is Error in
>>> loadNamespace...no package called ?conflicted? (see below)
>>>>>
>>>>> Can you help me to solve this issue if tit's possible?
>>>>> Thanks in advance to your help !
>>>>> Sylvain
>>>>> -----------------
>>>>> Below extract of 00check.log
>>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>>>>> Installation failed.
>>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for details.
>>>>> * DONE
>>>>> Status: 1 ERROR, 1 NOTE
>>>>>
>>>>> Below 00install.out
>>>>> * installing *source* package ?cartograflow? ...
>>>>> ** using staged installation
>>>>> ** R
>>>>> ** inst
>>>>> ** byte-compile and prepare package for lazy loading
>>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>> vI[[i]]) :
>>>>>? ? ? there is no package called ?conflicted?
>>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>>> withOneRestart -> doWithOneRestart
>>>>> Ex?cution arr?t?e
>>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a ?crit :
>>>>>? ? 
>>>>>? ? ? FWIW, you should be able to reproduce at least the following NOTEs
>>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>>
>>>>> * checking CRAN incoming feasibility ... NOTE
>>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>>?
>>>>>
>>>>> New submission
>>>>>
>>>>> Version contains large components (0.0.0.9000)
>>>>>
>>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>>? ? ? flowmapping (7:41)
>>>>>
>>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>>>>> "francoise.bahoken at ifsttar.fr <mailto:francoise.bahoken at ifsttar.fr>",
>>> role = c("cre","aut")),
>>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>>> = c("aut"))
>>>>>
>>>>> The Title field should be in title case. Current version is:
>>>>> ?thematic cartography of flows and movements?
>>>>> In title case that is:
>>>>> ?Thematic Cartography of Flows and Movements?
>>>>>
>>>>> Those are all classical mistakes ("we've all been there").? The
>>>>> vignette errors may or may not be specific to R devel.
>>>>>
>>>>> /Henrik
>>>>>
>>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com>
>>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>>
>>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>>> use r-devel?
>>>>>> I confirm that I didn't received ? error message when I've made
>>> dev_tool::check.
>>>>>> How can I solve my problem ?
>>>>>> Thanks in advance Sylvain
>>>>>>
>>>>>>
>>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>>
>>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>>> Ligges<ligges at statistik.tu-dortmund.de
>>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot beloeve
>>> it. But this is certainly not R-devel?
>>>>>>
>>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>>
>>>>>> R CMD check --as-cran
>>>>>>
>>>>>> with a recent R-devel? version on the package tarball should reproduce
>>>>>> the findings.
>>>>>>
>>>>>> Best,
>>>>>> Uwe Ligges
>>>>>>
>>>>>>
>>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>>> Hello,
>>>>>>> I've submitted my package cartograflow and I received an email from
>>> your teeam that it does not pass the incoming checks
>>> automatically.Debian:
>>> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>>
>>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>>> check is OK.I used : ==> devtools::check(args =
>>> c('--no-manual','--as-cran'))Status is :
>>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>>> 0.0.0.9000 ????
>>>>>>> Duration: 54.6s
>>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>>> R CMD check succeeded
>>>>>>> Can you? help me to fix the problem?
>>>>>>> Thanks in advance to your replySylvain
>>>>>>>? ? ? ? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org
>>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>
>>>>>>
>>>>>>
>>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>>>? ? ??? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>? ? 
>>>>
>>>>
>>>>? ? ??? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>? ? 
> 
>? ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

      
	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr  7 21:10:17 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 07 Apr 2019 12:10:17 -0700
Subject: [R-pkg-devel] 
 =?utf-8?b?UmXCoDpSZTogUmXCoDpSZTogUmXCoDpSZTogcGFj?=
 =?utf-8?q?kage_cartograflow=5F0=2E0=2E0=2E9000=2Etar=2Egz?=
In-Reply-To: <1128749348.29445971.1554663719667@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
Message-ID: <E87C33B1-7DA7-4C33-8FB1-DB184B08ADB6@dcn.davis.ca.us>

don't you think other.other at gmail.com is inappropriate?

On April 7, 2019 12:01:59 PM PDT, "cartograflow at gmail.com" <cartograflow at gmail.com> wrote:
>Thanks!So, I've already check and I didn't see the descrption of the
>note in 00check.log.The only thing I can say is that there's a problem
>with Author.
>I tried to put Authors at R and it also generates notes.
>Do you have any idea? 
>
>You will find hereafter the copy of the file 00check.log.Thanks in
>advance 
>----------------* using log directory
>?/home/sylvain/svn/cartograflow.Rcheck?
>* using R Under development (unstable) (2019-04-04 r76316)
>* using platform: x86_64-pc-linux-gnu (64-bit)
>* using session charset: UTF-8
>* using option ?--as-cran?
>* checking for file ?cartograflow/DESCRIPTION? ... OK
>* this is package ?cartograflow? version ?1.0.0.0?
>* package encoding: UTF-8
>* checking CRAN incoming feasibility ... NOTE
>Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr>?
>
>New submission
>
>Author field should be Authors at R.? Current value is:
>? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr",
>role = c("cre","aut")),
>??????????? person("other", "other", email = "other.other at gmail.com",
>role = c("aut")))
>* checking package namespace information ... OK
>* checking package dependencies ... OK
>* checking if this is a source package ... OK
>* checking if there is a namespace ... OK
>* checking for executable files ... OK
>* checking for hidden files and directories ... OK
>* checking for portable file names ... OK
>* checking for sufficient/correct file permissions ... OK
>* checking serialization versions ... OK
>* checking whether package ?cartograflow? can be installed ... OK
>* checking installed package size ... OK
>* checking package directory ... OK
>* checking for future file timestamps ... OK
>* checking ?build? directory ... OK
>* checking DESCRIPTION meta-information ... OK
>* checking top-level files ... OK
>* checking for left-over files ... OK
>* checking index information ... OK
>* checking package subdirectories ... OK
>* checking R files for non-ASCII characters ... OK
>* checking R files for syntax errors ... OK
>* checking whether the package can be loaded ... OK
>* checking whether the package can be loaded with stated dependencies
>... OK
>* checking whether the package can be unloaded cleanly ... OK
>* checking whether the namespace can be loaded with stated dependencies
>... OK
>* checking whether the namespace can be unloaded cleanly ... OK
>* checking use of S3 registration ... OK
>* checking dependencies in R code ... OK
>* checking S3 generic/method consistency ... OK
>* checking replacement functions ... OK
>* checking foreign function calls ... OK
>* checking R code for possible problems ... OK
>* checking Rd files ... OK
>* checking Rd metadata ... OK
>* checking Rd line widths ... OK
>* checking Rd cross-references ... OK
>* checking for missing documentation entries ... OK
>* checking for code/documentation mismatches ... OK
>* checking Rd \usage sections ... OK
>* checking Rd contents ... OK
>* checking for unstated dependencies in examples ... OK
>* checking installed files from ?inst/doc? ... OK
>* checking files in ?vignettes? ... OK
>* checking examples ... OK
>* checking for unstated dependencies in ?tests? ... OK
>* checking tests ... OK
>? Running ?testthat.R?
>* checking for unstated dependencies in vignettes ... OK
>* checking package vignettes in ?inst/doc? ... OK
>* checking re-building of vignette outputs ... OK
>* checking PDF version of manual ... OK
>* DONE
>Status: 1 NOTE
>
>
>Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch
><murdoch.duncan at gmail.com> a ?crit :  
> 
> On 07/04/2019 12:16 p.m., cartograflow at gmail.com wrote:
>> Hi,Thanks to your reply and your information.?Right now it stays only
>one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't
>identified this note in repertory R.check. What's file I've to
>check?I'd like to know if I can new submission in CRAN with one
>note.?Sylvain
>
>It will be in cartograflow.Rcheck/00check.log.
>
>Duncan Murdoch
>
>> 
>> 
>> 
>> Envoy? depuis Yahoo?Mail pour Android
>>? 
>>? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle
>SALMON<maelle.salmon at yahoo.se> a ?crit :? ? I'd recommend reading
>https://r-pkgs.org/description.html#dependencies (and the rest of the
>book is very good as well), it'll help you understand why and how to
>declare dependencies.
>> 
>> 
>> 
>> 
>>? ? ? Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com
><cartograflow at gmail.com> skrev:
>>? 
>>? How I can declare the dependencies in DESCRIPTION file?
>>? ?depends: library(dplyr,dependencies =TRUE)
>> Thanks
>> Envoy? depuis Yahoo?Mail pour Android
>>? 
>>? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe
>Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? .... or forgot to
>declare a dependency on that package in the
>> DESCRIPTION file...
>> 
>> Best,
>> Uwe Ligges
>> 
>> On 04.04.2019 13:34, Sebastian Meyer wrote:
>>> There are probably no clairvoyants around here. So, again, without
>>> access to the up-to-date source code of your package, nobody will be
>>> able to help.
>>>
>>> "there is no package called ..." means that the given package is not
>>> installed in any of the libraries currently in use by R (see
>.libPaths()
>>> for the relevant paths). Maybe you have installed "dplyr" in a
>library
>>> used by your standard R installation, but not in any library used by
>>> your R-devel installation (which you seem to use for checking the
>>> package)? Just a wild guess.
>>>
>>>
>>> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>>>> I follow up your recommendation and for the moment I didn't used
>>>> "conflicted".
>>>>
>>>> So, I've made the nex R CMD check and I have the problem
>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>>> vI[[i]]) :
>>>>? ? ? there is no package called ?dplyr?
>>>>
>>>> How I can? solve this issue?
>>>>
>>>> Thanks in advance
>>>>
>>>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>>>> <seb.meyer at fau.de> a ?crit :
>>>>
>>>>
>>>> Note that output concerning masked objects are just messages which
>do
>>>> not cause your vignette to fail. So it is not stricly necessary to
>start
>>>> working on these conflicts now.
>>>>
>>>> However, looking closely at the win-builder check results
>>>>
>(https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>>>> I see the following output below these messages
>>>>
>>>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>>>> Error: processing vignette 'cartograflow.Rmd' failed with
>diagnostics:
>>>>> argument is of length zero
>>>>
>>>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>>>> vignette (at least in the version submitted to win-builder a few
>weeks ago).
>>>>
>>>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>>>
>>>>> Error in if (horiz) { : argument is of length zero
>>>>
>>>> and the subsequent traceback() shows that the error originates from
>>>>
>>>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019",
>sources =
>>>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR,
>UMS
>>>> 2414 RIATE, 2018.",
>>>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>>>> "topright"),
>>>>>? ? ? ? ? ? col = "grey")
>>>>
>>>> So it seems to me that the unnamed argument 'north(pos =
>"topright")' is
>>>> wrongly matched to the "horiz" argument of layoutLayer().
>>>>
>>>> Cheers,
>>>>
>>>>? ? ??? Sebastian
>>>>
>>>>
>>>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com>:
>>>>>
>>>>> Hi,I don't know if my explanations are clear.I tried several way
>to
>>>> solve this problem w/o success.?Someone have an idea ?Thanks in
>advance
>>>>>
>>>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>>? ? ? Hi,
>>>>>>
>>>>>> I come back to you? because I have always the problem with
>>>> devtools::check of my package.
>>>>>>
>>>>>> I used the command to check my package with R-devel :
>>>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh
>CMD
>>>> check --as-cran
>>>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>>>
>>>>>> When I start the rmd file there is a warning due to package dplyr
>:
>>>>>>? ? ????????Attaching package: 'dplyr'
>>>>>>? ? ????????The following objects are masked from 'package:stats':
>>>>>>? ? ??????????????????? filter, lag
>>>>>>? ? ????????The following objects are masked from 'package:base':
>>>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>>>>>>
>>>>>> The solve this issue I added in rmd file, description file and
>the
>>>> namespace the package conflicted.
>>>>>> So, the package conflicted avoid to have this warning.
>>>>>>
>>>>>> But when I run R-devel CMD check I have a new issue that is Error
>in
>>>> loadNamespace...no package called ?conflicted? (see below)
>>>>>>
>>>>>> Can you help me to solve this issue if tit's possible?
>>>>>> Thanks in advance to your help !
>>>>>> Sylvain
>>>>>> -----------------
>>>>>> Below extract of 00check.log
>>>>>> * checking whether package ?cartograflow? can be installed ...
>ERROR
>>>>>> Installation failed.
>>>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for
>details.
>>>>>> * DONE
>>>>>> Status: 1 ERROR, 1 NOTE
>>>>>>
>>>>>> Below 00install.out
>>>>>> * installing *source* package ?cartograflow? ...
>>>>>> ** using staged installation
>>>>>> ** R
>>>>>> ** inst
>>>>>> ** byte-compile and prepare package for lazy loading
>>>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>>> vI[[i]]) :
>>>>>>? ? ? there is no package called ?conflicted?
>>>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>>>> withOneRestart -> doWithOneRestart
>>>>>> Ex?cution arr?t?e
>>>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>>>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a
>?crit :
>>>>>>? ? 
>>>>>>? ? ? FWIW, you should be able to reproduce at least the following
>NOTEs
>>>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>>>
>>>>>> * checking CRAN incoming feasibility ... NOTE
>>>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com>>?
>>>>>>
>>>>>> New submission
>>>>>>
>>>>>> Version contains large components (0.0.0.9000)
>>>>>>
>>>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>>>? ? ? flowmapping (7:41)
>>>>>>
>>>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current
>value is:
>>>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>>>>>> "francoise.bahoken at ifsttar.fr
><mailto:francoise.bahoken at ifsttar.fr>",
>>>> role = c("cre","aut")),
>>>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>",
>role
>>>> = c("aut"))
>>>>>>
>>>>>> The Title field should be in title case. Current version is:
>>>>>> ?thematic cartography of flows and movements?
>>>>>> In title case that is:
>>>>>> ?Thematic Cartography of Flows and Movements?
>>>>>>
>>>>>> Those are all classical mistakes ("we've all been there").? The
>>>>>> vignette errors may or may not be specific to R devel.
>>>>>>
>>>>>> /Henrik
>>>>>>
>>>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com>
>>>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>>>
>>>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have
>to
>>>> use r-devel?
>>>>>>> I confirm that I didn't received ? error message when I've made
>>>> dev_tool::check.
>>>>>>> How can I solve my problem ?
>>>>>>> Thanks in advance Sylvain
>>>>>>>
>>>>>>>
>>>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>>>
>>>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>>>> Ligges<ligges at statistik.tu-dortmund.de
>>>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot
>beloeve
>>>> it. But this is certainly not R-devel?
>>>>>>>
>>>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>>>
>>>>>>> R CMD check --as-cran
>>>>>>>
>>>>>>> with a recent R-devel? version on the package tarball should
>reproduce
>>>>>>> the findings.
>>>>>>>
>>>>>>> Best,
>>>>>>> Uwe Ligges
>>>>>>>
>>>>>>>
>>>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>>>> Hello,
>>>>>>>> I've submitted my package cartograflow and I received an email
>from
>>>> your teeam that it does not pass the incoming checks
>>>> automatically.Debian:
>>>>
><https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>>>
>>>>>>>> So, I've made the new check on my plateform (linux ubuntu) and
>the
>>>> check is OK.I used : ==> devtools::check(args =
>>>> c('--no-manual','--as-cran'))Status is :
>>>>>>>> ?? R CMD check results ????????????????????????????
>cartograflow
>>>> 0.0.0.9000 ????
>>>>>>>> Duration: 54.6s
>>>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>>>> R CMD check succeeded
>>>>>>>> Can you? help me to fix the problem?
>>>>>>>> Thanks in advance to your replySylvain
>>>>>>>>? ? ? ? [[alternative HTML version deleted]]
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-package-devel at r-project.org
>>>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>>>> mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>>>>? ? ??? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>>>> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>>>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>? ? 
>>>>>
>>>>>
>>>>>? ? ??? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>>>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>? ? 
>> 
>>? ??? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> ??? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>
>  
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From c@rtogr@iiow m@iii@g oii gm@ii@com  Sun Apr  7 21:24:20 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Sun, 7 Apr 2019 19:24:20 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?b?UmXCoDpSZTogICBSZcKgOlJlOiBSZcKgOlJlOiBS?=
 =?utf-8?q?e=C2=A0=3ARe=3A_package_cartog?=
In-Reply-To: <E87C33B1-7DA7-4C33-8FB1-DB184B08ADB6@dcn.davis.ca.us>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
 <E87C33B1-7DA7-4C33-8FB1-DB184B08ADB6@dcn.davis.ca.us>
Message-ID: <870363319.29449685.1554665060955@mail.yahoo.com>

I put?other.other at gmail.com?because I don't show the name of the person.?But when I've made the check I've put the good name.?

Envoy? depuis Yahoo?Mail pour Android 
 
  Le dim., avr. 7, 2019 ? 21:10, Jeff Newmiller<jdnewmil at dcn.davis.ca.us> a ?crit :   don't you think ?is inappropriate?

On April 7, 2019 12:01:59 PM PDT, "cartograflow at gmail.com" <cartograflow at gmail.com> wrote:
>Thanks!So, I've already check and I didn't see the descrption of the
>note in 00check.log.The only thing I can say is that there's a problem
>with Author.
>I tried to put Authors at R and it also generates notes.
>Do you have any idea? 
>
>You will find hereafter the copy of the file 00check.log.Thanks in
>advance 
>----------------* using log directory
>?/home/sylvain/svn/cartograflow.Rcheck?
>* using R Under development (unstable) (2019-04-04 r76316)
>* using platform: x86_64-pc-linux-gnu (64-bit)
>* using session charset: UTF-8
>* using option ?--as-cran?
>* checking for file ?cartograflow/DESCRIPTION? ... OK
>* this is package ?cartograflow? version ?1.0.0.0?
>* package encoding: UTF-8
>* checking CRAN incoming feasibility ... NOTE
>Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr>?
>
>New submission
>
>Author field should be Authors at R.? Current value is:
>? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr",
>role = c("cre","aut")),
>??????????? person("other", "other", email = "other.other at gmail.com",
>role = c("aut")))
>* checking package namespace information ... OK
>* checking package dependencies ... OK
>* checking if this is a source package ... OK
>* checking if there is a namespace ... OK
>* checking for executable files ... OK
>* checking for hidden files and directories ... OK
>* checking for portable file names ... OK
>* checking for sufficient/correct file permissions ... OK
>* checking serialization versions ... OK
>* checking whether package ?cartograflow? can be installed ... OK
>* checking installed package size ... OK
>* checking package directory ... OK
>* checking for future file timestamps ... OK
>* checking ?build? directory ... OK
>* checking DESCRIPTION meta-information ... OK
>* checking top-level files ... OK
>* checking for left-over files ... OK
>* checking index information ... OK
>* checking package subdirectories ... OK
>* checking R files for non-ASCII characters ... OK
>* checking R files for syntax errors ... OK
>* checking whether the package can be loaded ... OK
>* checking whether the package can be loaded with stated dependencies
>... OK
>* checking whether the package can be unloaded cleanly ... OK
>* checking whether the namespace can be loaded with stated dependencies
>... OK
>* checking whether the namespace can be unloaded cleanly ... OK
>* checking use of S3 registration ... OK
>* checking dependencies in R code ... OK
>* checking S3 generic/method consistency ... OK
>* checking replacement functions ... OK
>* checking foreign function calls ... OK
>* checking R code for possible problems ... OK
>* checking Rd files ... OK
>* checking Rd metadata ... OK
>* checking Rd line widths ... OK
>* checking Rd cross-references ... OK
>* checking for missing documentation entries ... OK
>* checking for code/documentation mismatches ... OK
>* checking Rd \usage sections ... OK
>* checking Rd contents ... OK
>* checking for unstated dependencies in examples ... OK
>* checking installed files from ?inst/doc? ... OK
>* checking files in ?vignettes? ... OK
>* checking examples ... OK
>* checking for unstated dependencies in ?tests? ... OK
>* checking tests ... OK
>? Running ?testthat.R?
>* checking for unstated dependencies in vignettes ... OK
>* checking package vignettes in ?inst/doc? ... OK
>* checking re-building of vignette outputs ... OK
>* checking PDF version of manual ... OK
>* DONE
>Status: 1 NOTE
>
>
>Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch
><murdoch.duncan at gmail.com> a ?crit :? 
> 
> On 07/04/2019 12:16 p.m., cartograflow at gmail.com wrote:
>> Hi,Thanks to your reply and your information.?Right now it stays only
>one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't
>identified this note in repertory R.check. What's file I've to
>check?I'd like to know if I can new submission in CRAN with one
>note.?Sylvain
>
>It will be in cartograflow.Rcheck/00check.log.
>
>Duncan Murdoch
>
>> 
>> 
>> 
>> Envoy? depuis Yahoo?Mail pour Android
>>? 
>>? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle
>SALMON<maelle.salmon at yahoo.se> a ?crit :? ? I'd recommend reading
>https://r-pkgs.org/description.html#dependencies (and the rest of the
>book is very good as well), it'll help you understand why and how to
>declare dependencies.
>> 
>> 
>> 
>> 
>>? ? ? Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com
><cartograflow at gmail.com> skrev:
>>? 
>>? How I can declare the dependencies in DESCRIPTION file?
>>? ?depends: library(dplyr,dependencies =TRUE)
>> Thanks
>> Envoy? depuis Yahoo?Mail pour Android
>>? 
>>? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe
>Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? .... or forgot to
>declare a dependency on that package in the
>> DESCRIPTION file...
>> 
>> Best,
>> Uwe Ligges
>> 
>> On 04.04.2019 13:34, Sebastian Meyer wrote:
>>> There are probably no clairvoyants around here. So, again, without
>>> access to the up-to-date source code of your package, nobody will be
>>> able to help.
>>>
>>> "there is no package called ..." means that the given package is not
>>> installed in any of the libraries currently in use by R (see
>.libPaths()
>>> for the relevant paths). Maybe you have installed "dplyr" in a
>library
>>> used by your standard R installation, but not in any library used by
>>> your R-devel installation (which you seem to use for checking the
>>> package)? Just a wild guess.
>>>
>>>
>>> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com:
>>>> I follow up your recommendation and for the moment I didn't used
>>>> "conflicted".
>>>>
>>>> So, I've made the nex R CMD check and I have the problem
>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>>> vI[[i]]) :
>>>>? ? ? there is no package called ?dplyr?
>>>>
>>>> How I can? solve this issue?
>>>>
>>>> Thanks in advance
>>>>
>>>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>>>> <seb.meyer at fau.de> a ?crit :
>>>>
>>>>
>>>> Note that output concerning masked objects are just messages which
>do
>>>> not cause your vignette to fail. So it is not stricly necessary to
>start
>>>> working on these conflicts now.
>>>>
>>>> However, looking closely at the win-builder check results
>>>>
>(https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>>>> I see the following output below these messages
>>>>
>>>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>>>>> Quitting from lines 529-573 (cartograflow.Rmd)
>>>>> Error: processing vignette 'cartograflow.Rmd' failed with
>diagnostics:
>>>>> argument is of length zero
>>>>
>>>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>>>> vignette (at least in the version submitted to win-builder a few
>weeks ago).
>>>>
>>>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>>>>
>>>>> Error in if (horiz) { : argument is of length zero
>>>>
>>>> and the subsequent traceback() shows that the error originates from
>>>>
>>>>> layoutLayer(title = "Professional mobility in Greater Paris",
>>>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019",
>sources =
>>>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR,
>UMS
>>>> 2414 RIATE, 2018.",
>>>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>>>> "topright"),
>>>>>? ? ? ? ? ? col = "grey")
>>>>
>>>> So it seems to me that the unnamed argument 'north(pos =
>"topright")' is
>>>> wrongly matched to the "horiz" argument of layoutLayer().
>>>>
>>>> Cheers,
>>>>
>>>>? ? ??? Sebastian
>>>>
>>>>
>>>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com>:
>>>>>
>>>>> Hi,I don't know if my explanations are clear.I tried several way
>to
>>>> solve this problem w/o success.?Someone have an idea ?Thanks in
>advance
>>>>>
>>>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>>? ? ? Hi,
>>>>>>
>>>>>> I come back to you? because I have always the problem with
>>>> devtools::check of my package.
>>>>>>
>>>>>> I used the command to check my package with R-devel :
>>>>>> sylvain at sylvain <mailto:sylvain at sylvain>:~/svn$ bash R-devel.sh
>CMD
>>>> check --as-cran
>>>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>>>>>>
>>>>>> When I start the rmd file there is a warning due to package dplyr
>:
>>>>>>? ? ????????Attaching package: 'dplyr'
>>>>>>? ? ????????The following objects are masked from 'package:stats':
>>>>>>? ? ??????????????????? filter, lag
>>>>>>? ? ????????The following objects are masked from 'package:base':
>>>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>>>>>>
>>>>>> The solve this issue I added in rmd file, description file and
>the
>>>> namespace the package conflicted.
>>>>>> So, the package conflicted avoid to have this warning.
>>>>>>
>>>>>> But when I run R-devel CMD check I have a new issue that is Error
>in
>>>> loadNamespace...no package called ?conflicted? (see below)
>>>>>>
>>>>>> Can you help me to solve this issue if tit's possible?
>>>>>> Thanks in advance to your help !
>>>>>> Sylvain
>>>>>> -----------------
>>>>>> Below extract of 00check.log
>>>>>> * checking whether package ?cartograflow? can be installed ...
>ERROR
>>>>>> Installation failed.
>>>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for
>details.
>>>>>> * DONE
>>>>>> Status: 1 ERROR, 1 NOTE
>>>>>>
>>>>>> Below 00install.out
>>>>>> * installing *source* package ?cartograflow? ...
>>>>>> ** using staged installation
>>>>>> ** R
>>>>>> ** inst
>>>>>> ** byte-compile and prepare package for lazy loading
>>>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>>>> vI[[i]]) :
>>>>>>? ? ? there is no package called ?conflicted?
>>>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>>>> withOneRestart -> doWithOneRestart
>>>>>> Ex?cution arr?t?e
>>>>>> ERROR: lazy loading failed for package ?cartograflow?
>>>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>>>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>> a
>?crit :
>>>>>>? ? 
>>>>>>? ? ? FWIW, you should be able to reproduce at least the following
>NOTEs
>>>>>> with your current R 3.5.2 and R CMD check --as-cran:
>>>>>>
>>>>>> * checking CRAN incoming feasibility ... NOTE
>>>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com>>?
>>>>>>
>>>>>> New submission
>>>>>>
>>>>>> Version contains large components (0.0.0.9000)
>>>>>>
>>>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>>>? ? ? flowmapping (7:41)
>>>>>>
>>>>>> Author field should be Authors at R. <mailto:Authors at R.>? Current
>value is:
>>>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>>>>>> "francoise.bahoken at ifsttar.fr
><mailto:francoise.bahoken at ifsttar.fr>",
>>>> role = c("cre","aut")),
>>>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>>>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>",
>role
>>>> = c("aut"))
>>>>>>
>>>>>> The Title field should be in title case. Current version is:
>>>>>> ?thematic cartography of flows and movements?
>>>>>> In title case that is:
>>>>>> ?Thematic Cartography of Flows and Movements?
>>>>>>
>>>>>> Those are all classical mistakes ("we've all been there").? The
>>>>>> vignette errors may or may not be specific to R devel.
>>>>>>
>>>>>> /Henrik
>>>>>>
>>>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com>
>>>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>>>>>>>
>>>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have
>to
>>>> use r-devel?
>>>>>>> I confirm that I didn't received ? error message when I've made
>>>> dev_tool::check.
>>>>>>> How can I solve my problem ?
>>>>>>> Thanks in advance Sylvain
>>>>>>>
>>>>>>>
>>>>>>> nvoy? depuis Yahoo Mail pour Android
>>>>>>>
>>>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>>>> Ligges<ligges at statistik.tu-dortmund.de
>>>> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot
>beloeve
>>>> it. But this is certainly not R-devel?
>>>>>>>
>>>>>>> Not sure about devtools which we do not use on CRAN, but simply
>>>>>>>
>>>>>>> R CMD check --as-cran
>>>>>>>
>>>>>>> with a recent R-devel? version on the package tarball should
>reproduce
>>>>>>> the findings.
>>>>>>>
>>>>>>> Best,
>>>>>>> Uwe Ligges
>>>>>>>
>>>>>>>
>>>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>>>> <mailto:cartograflow at gmail.com> wrote:
>>>>>>>> Hello,
>>>>>>>> I've submitted my package cartograflow and I received an email
>from
>>>> your teeam that it does not pass the incoming checks
>>>> automatically.Debian:
>>>>
><https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>>>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>>>>>>>>
>>>>>>>> So, I've made the new check on my plateform (linux ubuntu) and
>the
>>>> check is OK.I used : ==> devtools::check(args =
>>>> c('--no-manual','--as-cran'))Status is :
>>>>>>>> ?? R CMD check results ????????????????????????????
>cartograflow
>>>> 0.0.0.9000 ????
>>>>>>>> Duration: 54.6s
>>>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>>>>>> R CMD check succeeded
>>>>>>>> Can you? help me to fix the problem?
>>>>>>>> Thanks in advance to your replySylvain
>>>>>>>>? ? ? ? [[alternative HTML version deleted]]
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-package-devel at r-project.org
>>>> <mailto:R-package-devel at r-project.org> mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>>>> mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>>>>? ? ??? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>>>> mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>>>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>? ? 
>>>>>
>>>>>
>>>>>? ? ??? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>>>> mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>? ? 
>> 
>>? ??? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> ??? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>
>? 
>??? [[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.  

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Apr  7 21:32:05 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Apr 2019 15:32:05 -0400
Subject: [R-pkg-devel] 
 =?utf-8?b?UmXCoDpSZTogUmXCoDpSZTogUmXCoDpSZTogcGFj?=
 =?utf-8?q?kage_cartograflow=5F0=2E0=2E0=2E9000=2Etar=2Egz?=
In-Reply-To: <1128749348.29445971.1554663719667@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
Message-ID: <66763bd4-abe4-6722-8701-ebd32fd8e947@gmail.com>

On 07/04/2019 3:01 p.m., cartograflow at gmail.com wrote:
> Thanks!
> So, I've already check and I didn't see the descrption of the note in 
> 00check.log.
> The only thing I can say is that there's a problem with Author.
> I tried to put Authors at R and it also generates notes.
> Do you have any idea?
> 
> You will find hereafter the copy of the file 00check.log.
> Thanks in advance
> ----------------
> * using log directory ?/home/sylvain/svn/cartograflow.Rcheck?
> * using R Under development (unstable) (2019-04-04 r76316)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?cartograflow/DESCRIPTION? ... OK
> * this is package ?cartograflow? version ?1.0.0.0?
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr>?
> 
> New submission
> 
> Author field should be Authors at R.? Current value is:
>  ? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr", 
> role = c("cre","aut")),
>  ??????????? person("other", "other", email = "other.other at gmail.com", 
> role = c("aut")))

That second author doesn't look right, but I don't think the note is 
complaining about that.  I think you probably have put something like 
this in your DESCRIPTION file:

Author:  c(person("Sylvain", "Blondeau", email = 
"blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
            person("other", "other", email = "other.other at gmail.com",
role = c("aut")))

and what it is saying is that you should instead use

Authors at R:  c(person("Sylvain", "Blondeau", email = 
"blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
            person("other", "other", email = "other.other at gmail.com",
role = c("aut")))

If my guess is right and you fix it, you may still get a NOTE.  To make 
it easier for the CRAN maintainers to know who to contact in case of an 
issue with the package, they display information about the package 
maintainer in a NOTE.  Since most NOTEs indicate likely problems, it 
would probably make sense for them to use some other formatting for the 
message, but that's how it is.

Duncan Murdoch



> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ?cartograflow? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking for future file timestamps ... OK
> * checking ?build? directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies 
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking installed files from ?inst/doc? ... OK
> * checking files in ?vignettes? ... OK
> * checking examples ... OK
> * checking for unstated dependencies in ?tests? ... OK
> * checking tests ... OK
>  ? Running ?testthat.R?
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in ?inst/doc? ... OK
> * checking re-building of vignette outputs ... OK
> * checking PDF version of manual ... OK
> * DONE
> Status: 1 NOTE
> 
> 
> Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch 
> <murdoch.duncan at gmail.com> a ?crit :
> 
> 
> On 07/04/2019 12:16 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com> wrote:
>  > Hi,Thanks to your reply and your information.?Right now it stays only 
> one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't 
> identified this note in repertory R.check. What's file I've to check?I'd 
> like to know if I can new submission in CRAN with one note.?Sylvain
> 
> It will be in cartograflow.Rcheck/00check.log.
> 
> Duncan Murdoch
> 
> 
>  >
>  >
>  >
>  > Envoy? depuis Yahoo?Mail pour Android
>  >
>  >? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle 
> SALMON<maelle.salmon at yahoo.se <mailto:maelle.salmon at yahoo.se>> a ?crit 
> :? ? I'd recommend reading 
> https://r-pkgs.org/description.html#dependencies (and the rest of the 
> book is very good as well), it'll help you understand why and how to 
> declare dependencies.
>  >
>  >
>  >
>  >
>  >? ? ? Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com> <cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>> skrev:
>  >
>  >? How I can declare the dependencies in DESCRIPTION file?
>  >? ?depends: library(dplyr,dependencies =TRUE)
>  > Thanks
>  > Envoy? depuis Yahoo?Mail pour Android
>  >
>  >? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe 
> Ligges<ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? .... or forgot to 
> declare a dependency on that package in the
>  > DESCRIPTION file...
>  >
>  > Best,
>  > Uwe Ligges
>  >
>  > On 04.04.2019 13:34, Sebastian Meyer wrote:
>  >> There are probably no clairvoyants around here. So, again, without
>  >> access to the up-to-date source code of your package, nobody will be
>  >> able to help.
>  >>
>  >> "there is no package called ..." means that the given package is not
>  >> installed in any of the libraries currently in use by R (see .libPaths()
>  >> for the relevant paths). Maybe you have installed "dplyr" in a library
>  >> used by your standard R installation, but not in any library used by
>  >> your R-devel installation (which you seem to use for checking the
>  >> package)? Just a wild guess.
>  >>
>  >>
>  >> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>:
>  >>> I follow up your recommendation and for the moment I didn't used
>  >>> "conflicted".
>  >>>
>  >>> So, I've made the nex R CMD check and I have the problem
>  >>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>  >>> vI[[i]]) :
>  >>>? ? ? there is no package called ?dplyr?
>  >>>
>  >>> How I can? solve this issue?
>  >>>
>  >>> Thanks in advance
>  >>>
>  >>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>  >>> <seb.meyer at fau.de <mailto:seb.meyer at fau.de>> a ?crit :
>  >>>
>  >>>
>  >>> Note that output concerning masked objects are just messages which do
>  >>> not cause your vignette to fail. So it is not stricly necessary to 
> start
>  >>> working on these conflicts now.
>  >>>
>  >>> However, looking closely at the win-builder check results
>  >>> 
> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>  >>> I see the following output below these messages
>  >>>
>  >>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>  >>>> Quitting from lines 529-573 (cartograflow.Rmd)
>  >>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>  >>>> argument is of length zero
>  >>>
>  >>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>  >>> vignette (at least in the version submitted to win-builder a few 
> weeks ago).
>  >>>
>  >>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>  >>>
>  >>>> Error in if (horiz) { : argument is of length zero
>  >>>
>  >>> and the subsequent traceback() shows that the error originates from
>  >>>
>  >>>> layoutLayer(title = "Professional mobility in Greater Paris",
>  >>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", 
> sources =
>  >>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>  >>> 2414 RIATE, 2018.",
>  >>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>  >>> "topright"),
>  >>>>? ? ? ? ? ? col = "grey")
>  >>>
>  >>> So it seems to me that the unnamed argument 'north(pos = 
> "topright")' is
>  >>> wrongly matched to the "horiz" argument of layoutLayer().
>  >>>
>  >>> Cheers,
>  >>>
>  >>>? ? ??? Sebastian
>  >>>
>  >>>
>  >>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>:
>  >>>>
>  >>>> Hi,I don't know if my explanations are clear.I tried several way to
>  >>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>  >>>>
>  >>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>  >>>>>? ? ? Hi,
>  >>>>>
>  >>>>> I come back to you? because I have always the problem with
>  >>> devtools::check of my package.
>  >>>>>
>  >>>>> I used the command to check my package with R-devel :
>  >>>>> sylvain at sylvain <mailto:sylvain at sylvain> <mailto:sylvain at sylvain 
> <mailto:sylvain at sylvain>>:~/svn$ bash R-devel.sh CMD
>  >>> check --as-cran
>  >>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>  >>>>>
>  >>>>> When I start the rmd file there is a warning due to package dplyr :
>  >>>>>? ? ????????Attaching package: 'dplyr'
>  >>>>>? ? ????????The following objects are masked from 'package:stats':
>  >>>>>? ? ??????????????????? filter, lag
>  >>>>>? ? ????????The following objects are masked from 'package:base':
>  >>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>  >>>>>
>  >>>>> The solve this issue I added in rmd file, description file and the
>  >>> namespace the package conflicted.
>  >>>>> So, the package conflicted avoid to have this warning.
>  >>>>>
>  >>>>> But when I run R-devel CMD check I have a new issue that is Error in
>  >>> loadNamespace...no package called ?conflicted? (see below)
>  >>>>>
>  >>>>> Can you help me to solve this issue if tit's possible?
>  >>>>> Thanks in advance to your help !
>  >>>>> Sylvain
>  >>>>> -----------------
>  >>>>> Below extract of 00check.log
>  >>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>  >>>>> Installation failed.
>  >>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for 
> details.
>  >>>>> * DONE
>  >>>>> Status: 1 ERROR, 1 NOTE
>  >>>>>
>  >>>>> Below 00install.out
>  >>>>> * installing *source* package ?cartograflow? ...
>  >>>>> ** using staged installation
>  >>>>> ** R
>  >>>>> ** inst
>  >>>>> ** byte-compile and prepare package for lazy loading
>  >>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>  >>> vI[[i]]) :
>  >>>>>? ? ? there is no package called ?conflicted?
>  >>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>  >>> withOneRestart -> doWithOneRestart
>  >>>>> Ex?cution arr?t?e
>  >>>>> ERROR: lazy loading failed for package ?cartograflow?
>  >>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>  >>>>>
>  >>>>>
>  >>>>>
>  >>>>>
>  >>>>>
>  >>>>>
>  >>>>>
>  >>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>  >>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com> 
> <mailto:henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>>> 
> a ?crit :
>  >>>>>
>  >>>>>? ? ? FWIW, you should be able to reproduce at least the following 
> NOTEs
>  >>>>> with your current R 3.5.2 and R CMD check --as-cran:
>  >>>>>
>  >>>>> * checking CRAN incoming feasibility ... NOTE
>  >>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>>?
>  >>>>>
>  >>>>> New submission
>  >>>>>
>  >>>>> Version contains large components (0.0.0.9000)
>  >>>>>
>  >>>>> Possibly mis-spelled words in DESCRIPTION:
>  >>>>>? ? ? flowmapping (7:41)
>  >>>>>
>  >>>>> Author field should be Authors at R. <mailto:Authors at R.> 
> <mailto:Authors at R. <mailto:Authors at R.>>? Current value is:
>  >>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>  >>>>> "francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr> 
> <mailto:francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr>>",
>  >>> role = c("cre","aut")),
>  >>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>  >>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr> 
> <mailto:blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>>", role
>  >>> = c("aut"))
>  >>>>>
>  >>>>> The Title field should be in title case. Current version is:
>  >>>>> ?thematic cartography of flows and movements?
>  >>>>> In title case that is:
>  >>>>> ?Thematic Cartography of Flows and Movements?
>  >>>>>
>  >>>>> Those are all classical mistakes ("we've all been there").? The
>  >>>>> vignette errors may or may not be specific to R devel.
>  >>>>>
>  >>>>> /Henrik
>  >>>>>
>  >>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>  >>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>> wrote:
>  >>>>>>
>  >>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>  >>> use r-devel?
>  >>>>>> I confirm that I didn't received ? error message when I've made
>  >>> dev_tool::check.
>  >>>>>> How can I solve my problem ?
>  >>>>>> Thanks in advance Sylvain
>  >>>>>>
>  >>>>>>
>  >>>>>> nvoy? depuis Yahoo Mail pour Android
>  >>>>>>
>  >>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>  >>> Ligges<ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>
>  >>> <mailto:ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>>> a ?crit :? I cannot beloeve
>  >>> it. But this is certainly not R-devel?
>  >>>>>>
>  >>>>>> Not sure about devtools which we do not use on CRAN, but simply
>  >>>>>>
>  >>>>>> R CMD check --as-cran
>  >>>>>>
>  >>>>>> with a recent R-devel? version on the package tarball should 
> reproduce
>  >>>>>> the findings.
>  >>>>>>
>  >>>>>> Best,
>  >>>>>> Uwe Ligges
>  >>>>>>
>  >>>>>>
>  >>>>>> On 25.03.2019 23:12, cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>  >>>>>>> Hello,
>  >>>>>>> I've submitted my package cartograflow and I received an email from
>  >>> your teeam that it does not pass the incoming checks
>  >>> automatically.Debian:
>  >>> 
> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>  >>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>  >>>>>>>
>  >>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>  >>> check is OK.I used : ==> devtools::check(args =
>  >>> c('--no-manual','--as-cran'))Status is :
>  >>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>  >>> 0.0.0.9000 ????
>  >>>>>>> Duration: 54.6s
>  >>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>  >>>>>>> R CMD check succeeded
>  >>>>>>> Can you? help me to fix the problem?
>  >>>>>>> Thanks in advance to your replySylvain
>  >>>>>>>? ? ? ? [[alternative HTML version deleted]]
>  >>>>>>>
>  >>>>>>> ______________________________________________
>  >>>>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  >>> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>> mailing list
>  >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >>>>>>>
>  >>>>>>
>  >>>>>>
>  >>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>  >>>>>>
>  >>>>>> ______________________________________________
>  >>>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  >>> mailing list
>  >>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >>>
>  >>>>>? ? ??? [[alternative HTML version deleted]]
>  >>>>>
>  >>>>> ______________________________________________
>  >>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  >>> mailing list
>  >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >>>>>
>  >>>>
>  >>>> ______________________________________________
>  >>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  >>> mailing list
>  >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >>>>
>  >>>>
>  >>>>
>  >>>>? ? ??? [[alternative HTML version deleted]]
>  >>>>
>  >>>> ______________________________________________
>  >>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  >>> mailing list
>  >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >>>>
>  >>
>  >> ______________________________________________
>  >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>  >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >>
>  >
>  >
>  >? ??? [[alternative HTML version deleted]]
>  >
>  > ______________________________________________
>  > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >
>  > ??? [[alternative HTML version deleted]]
>  >
>  > ______________________________________________
>  > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Apr  7 21:34:39 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 7 Apr 2019 15:34:39 -0400
Subject: [R-pkg-devel] 
 =?utf-8?b?UmXCoDpSZTogIFJlwqA6UmU6IFJlwqA6UmU6IFJl?=
 =?utf-8?b?wqA6UmU6IHBhY2thZ2UgY2FydG9n?=
In-Reply-To: <870363319.29449685.1554665060955@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
 <E87C33B1-7DA7-4C33-8FB1-DB184B08ADB6@dcn.davis.ca.us>
 <870363319.29449685.1554665060955@mail.yahoo.com>
Message-ID: <71c5c3a3-644a-9afa-fdf7-a5b5e370e92b@gmail.com>

On 07/04/2019 3:24 p.m., cartograflow at gmail.com wrote:
> I put other.other at gmail.com <mailto:other.other at gmail.com>?because I 
> don't show the name of the person.
> But when I've made the check I've put the good name.

I hope you realize that if your package is accepted on CRAN, the full 
authorship list will be released to everyone.  Hiding it now seems a 
little counter-productive, in that it produced an obvious problem that 
isn't there in the real package.

Duncan Murdoch

> 
> Envoy? depuis Yahoo?Mail pour Android 
> <https://go.onelink.me/107872968?pid=InProduct&c=Global_Internal_YGrowth_AndroidEmailSig__AndroidUsers&af_wl=ym&af_sub1=Internal&af_sub2=Global_YGrowth&af_sub3=EmailSignature>
> 
>     Le dim., avr. 7, 2019 ? 21:10, Jeff Newmiller
>     <jdnewmil at dcn.davis.ca.us> a ?crit :
>     don't you think ?is inappropriate?
> 
>     On April 7, 2019 12:01:59 PM PDT, "cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>" <cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>> wrote:
>      >Thanks!So, I've already check and I didn't see the descrption of the
>      >note in 00check.log.The only thing I can say is that there's a problem
>      >with Author.
>      >I tried to put Authors at R <mailto:Authors at R> and it also generates
>     notes.
>      >Do you have any idea?
>      >
>      >You will find hereafter the copy of the file 00check.log.Thanks in
>      >advance
>      >----------------* using log directory
>      >?/home/sylvain/svn/cartograflow.Rcheck?
>      >* using R Under development (unstable) (2019-04-04 r76316)
>      >* using platform: x86_64-pc-linux-gnu (64-bit)
>      >* using session charset: UTF-8
>      >* using option ?--as-cran?
>      >* checking for file ?cartograflow/DESCRIPTION? ... OK
>      >* this is package ?cartograflow? version ?1.0.0.0?
>      >* package encoding: UTF-8
>      >* checking CRAN incoming feasibility ... NOTE
>      >Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr
>     <mailto:blondeau.sylvain at yahoo.fr>>?
>      >
>      >New submission
>      >
>      >Author field should be Authors at R. <mailto:Authors at R.>? Current
>     value is:
>      >? c(person("Sylvain", "Blondeau", email =
>     "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>",
>      >role = c("cre","aut")),
>      >??????????? person("other", "other", email =
>     "other.other at gmail.com <mailto:other.other at gmail.com>",
>      >role = c("aut")))
>      >* checking package namespace information ... OK
>      >* checking package dependencies ... OK
>      >* checking if this is a source package ... OK
>      >* checking if there is a namespace ... OK
>      >* checking for executable files ... OK
>      >* checking for hidden files and directories ... OK
>      >* checking for portable file names ... OK
>      >* checking for sufficient/correct file permissions ... OK
>      >* checking serialization versions ... OK
>      >* checking whether package ?cartograflow? can be installed ... OK
>      >* checking installed package size ... OK
>      >* checking package directory ... OK
>      >* checking for future file timestamps ... OK
>      >* checking ?build? directory ... OK
>      >* checking DESCRIPTION meta-information ... OK
>      >* checking top-level files ... OK
>      >* checking for left-over files ... OK
>      >* checking index information ... OK
>      >* checking package subdirectories ... OK
>      >* checking R files for non-ASCII characters ... OK
>      >* checking R files for syntax errors ... OK
>      >* checking whether the package can be loaded ... OK
>      >* checking whether the package can be loaded with stated dependencies
>      >... OK
>      >* checking whether the package can be unloaded cleanly ... OK
>      >* checking whether the namespace can be loaded with stated
>     dependencies
>      >... OK
>      >* checking whether the namespace can be unloaded cleanly ... OK
>      >* checking use of S3 registration ... OK
>      >* checking dependencies in R code ... OK
>      >* checking S3 generic/method consistency ... OK
>      >* checking replacement functions ... OK
>      >* checking foreign function calls ... OK
>      >* checking R code for possible problems ... OK
>      >* checking Rd files ... OK
>      >* checking Rd metadata ... OK
>      >* checking Rd line widths ... OK
>      >* checking Rd cross-references ... OK
>      >* checking for missing documentation entries ... OK
>      >* checking for code/documentation mismatches ... OK
>      >* checking Rd \usage sections ... OK
>      >* checking Rd contents ... OK
>      >* checking for unstated dependencies in examples ... OK
>      >* checking installed files from ?inst/doc? ... OK
>      >* checking files in ?vignettes? ... OK
>      >* checking examples ... OK
>      >* checking for unstated dependencies in ?tests? ... OK
>      >* checking tests ... OK
>      >? Running ?testthat.R?
>      >* checking for unstated dependencies in vignettes ... OK
>      >* checking package vignettes in ?inst/doc? ... OK
>      >* checking re-building of vignette outputs ... OK
>      >* checking PDF version of manual ... OK
>      >* DONE
>      >Status: 1 NOTE
>      >
>      >
>      >Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch
>      ><murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> a
>     ?crit :
>      >
>      > On 07/04/2019 12:16 p.m., cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com> wrote:
>      >> Hi,Thanks to your reply and your information.?Right now it stays
>     only
>      >one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't
>      >identified this note in repertory R.check. What's file I've to
>      >check?I'd like to know if I can new submission in CRAN with one
>      >note.?Sylvain
>      >
>      >It will be in cartograflow.Rcheck/00check.log.
>      >
>      >Duncan Murdoch
>      >
>      >>
>      >>
>      >>
>      >> Envoy? depuis Yahoo?Mail pour Android
>      >>
>      >>? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle
>      >SALMON<maelle.salmon at yahoo.se <mailto:maelle.salmon at yahoo.se>> a
>     ?crit :? ? I'd recommend reading
>      >https://r-pkgs.org/description.html#dependencies (and the rest of the
>      >book is very good as well), it'll help you understand why and how to
>      >declare dependencies.
>      >>
>      >>
>      >>
>      >>
>      >>? ? ? Den torsdag 4 april 2019 17:05:02 CEST,
>     cartograflow at gmail.com <mailto:cartograflow at gmail.com>
>      ><cartograflow at gmail.com <mailto:cartograflow at gmail.com>> skrev:
>      >>
>      >>? How I can declare the dependencies in DESCRIPTION file?
>      >>? ?depends: library(dplyr,dependencies =TRUE)
>      >> Thanks
>      >> Envoy? depuis Yahoo?Mail pour Android
>      >>
>      >>? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe
>      >Ligges<ligges at statistik.tu-dortmund.de
>     <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? .... or forgot to
>      >declare a dependency on that package in the
>      >> DESCRIPTION file...
>      >>
>      >> Best,
>      >> Uwe Ligges
>      >>
>      >> On 04.04.2019 13:34, Sebastian Meyer wrote:
>      >>> There are probably no clairvoyants around here. So, again, without
>      >>> access to the up-to-date source code of your package, nobody
>     will be
>      >>> able to help.
>      >>>
>      >>> "there is no package called ..." means that the given package
>     is not
>      >>> installed in any of the libraries currently in use by R (see
>      >.libPaths()
>      >>> for the relevant paths). Maybe you have installed "dplyr" in a
>      >library
>      >>> used by your standard R installation, but not in any library
>     used by
>      >>> your R-devel installation (which you seem to use for checking the
>      >>> package)? Just a wild guess.
>      >>>
>      >>>
>      >>> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>:
>      >>>> I follow up your recommendation and for the moment I didn't used
>      >>>> "conflicted".
>      >>>>
>      >>>> So, I've made the nex R CMD check and I have the problem
>      >>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>      >>>> vI[[i]]) :
>      >>>>? ? ? there is no package called ?dplyr?
>      >>>>
>      >>>> How I can? solve this issue?
>      >>>>
>      >>>> Thanks in advance
>      >>>>
>      >>>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>      >>>> <seb.meyer at fau.de <mailto:seb.meyer at fau.de>> a ?crit :
>      >>>>
>      >>>>
>      >>>> Note that output concerning masked objects are just messages which
>      >do
>      >>>> not cause your vignette to fail. So it is not stricly necessary to
>      >start
>      >>>> working on these conflicts now.
>      >>>>
>      >>>> However, looking closely at the win-builder check results
>      >>>>
>      >(https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>      >>>> I see the following output below these messages
>      >>>>
>      >>>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>      >>>>> Quitting from lines 529-573 (cartograflow.Rmd)
>      >>>>> Error: processing vignette 'cartograflow.Rmd' failed with
>      >diagnostics:
>      >>>>> argument is of length zero
>      >>>>
>      >>>> So the problem actually is in lines 529-573 of the
>     cartograflow.Rmd
>      >>>> vignette (at least in the version submitted to win-builder a few
>      >weeks ago).
>      >>>>
>      >>>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>      >>>>
>      >>>>> Error in if (horiz) { : argument is of length zero
>      >>>>
>      >>>> and the subsequent traceback() shows that the error originates
>     from
>      >>>>
>      >>>>> layoutLayer(title = "Professional mobility in Greater Paris",
>      >>>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019",
>      >sources =
>      >>>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR,
>      >UMS
>      >>>> 2414 RIATE, 2018.",
>      >>>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE,
>     north(pos =
>      >>>> "topright"),
>      >>>>>? ? ? ? ? ? col = "grey")
>      >>>>
>      >>>> So it seems to me that the unnamed argument 'north(pos =
>      >"topright")' is
>      >>>> wrongly matched to the "horiz" argument of layoutLayer().
>      >>>>
>      >>>> Cheers,
>      >>>>
>      >>>>? ? ??? Sebastian
>      >>>>
>      >>>>
>      >>>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>
>      >>>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>:
>      >>>>>
>      >>>>> Hi,I don't know if my explanations are clear.I tried several way
>      >to
>      >>>> solve this problem w/o success.?Someone have an idea ?Thanks in
>      >advance
>      >>>>>
>      >>>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>
>      >>>> <mailto:cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>> wrote:
>      >>>>>>? ? ? Hi,
>      >>>>>>
>      >>>>>> I come back to you? because I have always the problem with
>      >>>> devtools::check of my package.
>      >>>>>>
>      >>>>>> I used the command to check my package with R-devel :
>      >>>>>> sylvain at sylvain <mailto:sylvain at sylvain>
>     <mailto:sylvain at sylvain <mailto:sylvain at sylvain>>:~/svn$ bash R-devel.sh
>      >CMD
>      >>>> check --as-cran
>      >>>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>      >>>>>>
>      >>>>>> When I start the rmd file there is a warning due to package
>     dplyr
>      >:
>      >>>>>>? ? ????????Attaching package: 'dplyr'
>      >>>>>>? ? ????????The following objects are masked from
>     'package:stats':
>      >>>>>>? ? ??????????????????? filter, lag
>      >>>>>>? ? ????????The following objects are masked from 'package:base':
>      >>>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>      >>>>>>
>      >>>>>> The solve this issue I added in rmd file, description file and
>      >the
>      >>>> namespace the package conflicted.
>      >>>>>> So, the package conflicted avoid to have this warning.
>      >>>>>>
>      >>>>>> But when I run R-devel CMD check I have a new issue that is
>     Error
>      >in
>      >>>> loadNamespace...no package called ?conflicted? (see below)
>      >>>>>>
>      >>>>>> Can you help me to solve this issue if tit's possible?
>      >>>>>> Thanks in advance to your help !
>      >>>>>> Sylvain
>      >>>>>> -----------------
>      >>>>>> Below extract of 00check.log
>      >>>>>> * checking whether package ?cartograflow? can be installed ...
>      >ERROR
>      >>>>>> Installation failed.
>      >>>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for
>      >details.
>      >>>>>> * DONE
>      >>>>>> Status: 1 ERROR, 1 NOTE
>      >>>>>>
>      >>>>>> Below 00install.out
>      >>>>>> * installing *source* package ?cartograflow? ...
>      >>>>>> ** using staged installation
>      >>>>>> ** R
>      >>>>>> ** inst
>      >>>>>> ** byte-compile and prepare package for lazy loading
>      >>>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()),
>     versionCheck =
>      >>>> vI[[i]]) :
>      >>>>>>? ? ? there is no package called ?conflicted?
>      >>>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>      >>>> withOneRestart -> doWithOneRestart
>      >>>>>> Ex?cution arr?t?e
>      >>>>>> ERROR: lazy loading failed for package ?cartograflow?
>      >>>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>      >>>>>>
>      >>>>>>
>      >>>>>>
>      >>>>>>
>      >>>>>>
>      >>>>>>
>      >>>>>>
>      >>>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>      >>>> <henrik.bengtsson at gmail.com
>     <mailto:henrik.bengtsson at gmail.com>
>     <mailto:henrik.bengtsson at gmail.com
>     <mailto:henrik.bengtsson at gmail.com>>> a
>      >?crit :
>      >>>>>>
>      >>>>>>? ? ? FWIW, you should be able to reproduce at least the
>     following
>      >NOTEs
>      >>>>>> with your current R 3.5.2 and R CMD check --as-cran:
>      >>>>>>
>      >>>>>> * checking CRAN incoming feasibility ... NOTE
>      >>>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>
>      >>>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>>?
>      >>>>>>
>      >>>>>> New submission
>      >>>>>>
>      >>>>>> Version contains large components (0.0.0.9000)
>      >>>>>>
>      >>>>>> Possibly mis-spelled words in DESCRIPTION:
>      >>>>>>? ? ? flowmapping (7:41)
>      >>>>>>
>      >>>>>> Author field should be Authors at R. <mailto:Authors at R.>
>     <mailto:Authors at R. <mailto:Authors at R.>>? Current
>      >value is:
>      >>>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>      >>>>>> "francoise.bahoken at ifsttar.fr
>     <mailto:francoise.bahoken at ifsttar.fr>
>      ><mailto:francoise.bahoken at ifsttar.fr
>     <mailto:francoise.bahoken at ifsttar.fr>>",
>      >>>> role = c("cre","aut")),
>      >>>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>      >>>>>> "blondeau.sylvain at yahoo.fr
>     <mailto:blondeau.sylvain at yahoo.fr> <mailto:blondeau.sylvain at yahoo.fr
>     <mailto:blondeau.sylvain at yahoo.fr>>",
>      >role
>      >>>> = c("aut"))
>      >>>>>>
>      >>>>>> The Title field should be in title case. Current version is:
>      >>>>>> ?thematic cartography of flows and movements?
>      >>>>>> In title case that is:
>      >>>>>> ?Thematic Cartography of Flows and Movements?
>      >>>>>>
>      >>>>>> Those are all classical mistakes ("we've all been there").? The
>      >>>>>> vignette errors may or may not be specific to R devel.
>      >>>>>>
>      >>>>>> /Henrik
>      >>>>>>
>      >>>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>
>      >>>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>      >>>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>
>     <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>> wrote:
>      >>>>>>>
>      >>>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have
>      >to
>      >>>> use r-devel?
>      >>>>>>> I confirm that I didn't received ? error message when I've made
>      >>>> dev_tool::check.
>      >>>>>>> How can I solve my problem ?
>      >>>>>>> Thanks in advance Sylvain
>      >>>>>>>
>      >>>>>>>
>      >>>>>>> nvoy? depuis Yahoo Mail pour Android
>      >>>>>>>
>      >>>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>      >>>> Ligges<ligges at statistik.tu-dortmund.de
>     <mailto:ligges at statistik.tu-dortmund.de>
>      >>>> <mailto:ligges at statistik.tu-dortmund.de
>     <mailto:ligges at statistik.tu-dortmund.de>>> a ?crit :? I cannot
>      >beloeve
>      >>>> it. But this is certainly not R-devel?
>      >>>>>>>
>      >>>>>>> Not sure about devtools which we do not use on CRAN, but simply
>      >>>>>>>
>      >>>>>>> R CMD check --as-cran
>      >>>>>>>
>      >>>>>>> with a recent R-devel? version on the package tarball should
>      >reproduce
>      >>>>>>> the findings.
>      >>>>>>>
>      >>>>>>> Best,
>      >>>>>>> Uwe Ligges
>      >>>>>>>
>      >>>>>>>
>      >>>>>>> On 25.03.2019 23:12, cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>
>      >>>> <mailto:cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>> wrote:
>      >>>>>>>> Hello,
>      >>>>>>>> I've submitted my package cartograflow and I received an email
>      >from
>      >>>> your teeam that it does not pass the incoming checks
>      >>>> automatically.Debian:
>      >>>>
>      ><https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>      >>>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>      >>>>>>>>
>      >>>>>>>> So, I've made the new check on my plateform (linux ubuntu) and
>      >the
>      >>>> check is OK.I used : ==> devtools::check(args =
>      >>>> c('--no-manual','--as-cran'))Status is :
>      >>>>>>>> ?? R CMD check results ????????????????????????????
>      >cartograflow
>      >>>> 0.0.0.9000 ????
>      >>>>>>>> Duration: 54.6s
>      >>>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>      >>>>>>>> R CMD check succeeded
>      >>>>>>>> Can you? help me to fix the problem?
>      >>>>>>>> Thanks in advance to your replySylvain
>      >>>>>>>>? ? ? ? [[alternative HTML version deleted]]
>      >>>>>>>>
>      >>>>>>>> ______________________________________________
>      >>>>>>>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>
>      >>>> <mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>> mailing list
>      >>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>>>>>>
>      >>>>>>>
>      >>>>>>>
>      >>>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>      >>>>>>>
>      >>>>>>> ______________________________________________
>      >>>>>>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>
>      ><mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>>
>      >>>> mailing list
>      >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>>
>      >>>>>>? ? ??? [[alternative HTML version deleted]]
>      >>>>>>
>      >>>>>> ______________________________________________
>      >>>>>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>
>      ><mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>>
>      >>>> mailing list
>      >>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>>>>
>      >>>>>
>      >>>>> ______________________________________________
>      >>>>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>
>      ><mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>>
>      >>>> mailing list
>      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>>>
>      >>>>>
>      >>>>>
>      >>>>>? ? ??? [[alternative HTML version deleted]]
>      >>>>>
>      >>>>> ______________________________________________
>      >>>>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>
>      ><mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>>
>      >>>> mailing list
>      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>>>
>      >>>
>      >>> ______________________________________________
>      >>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>
>      >>
>      >>
>      >>? ??? [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>
>      >> ??? [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>
>      >
>      >
>      >??? [[alternative HTML version deleted]]
>      >
>      >______________________________________________
>      >R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
>     -- 
>     Sent from my phone. Please excuse my brevity.
>


From to||@@ch@| @end|ng |rom gm@||@com  Mon Apr  8 12:19:44 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Mon, 8 Apr 2019 13:19:44 +0300
Subject: [R-pkg-devel] Use lpSolve to another R package
Message-ID: <CAMfvGJMFymV4FOcuqo2CgHYyETByJWPpatO+DsQSpR0RSCO7Ug@mail.gmail.com>

Dear all,

We have developed an R package written in C++ with Rcpp wrappers
https://github.com/GeomScale/volume_approximation

We use the C code from lpSolveAPI (
https://cran.r-project.org/web/packages/lpSolveAPI/index.html). We have
added the code with no changes in folder ./src/lp_solve.

We want to submit the package to CRAN. Thus my question is how we have to
declare the usage of lpSolve code in the description file? Do we have to
add the Authors to the Authors at R field?

Thanks in advance,
Apostolos Chalkis

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Apr  8 13:08:10 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 8 Apr 2019 13:08:10 +0200
Subject: [R-pkg-devel] Use lpSolve to another R package
In-Reply-To: <CAMfvGJMFymV4FOcuqo2CgHYyETByJWPpatO+DsQSpR0RSCO7Ug@mail.gmail.com>
References: <CAMfvGJMFymV4FOcuqo2CgHYyETByJWPpatO+DsQSpR0RSCO7Ug@mail.gmail.com>
Message-ID: <34d8b3e4-97d5-24fc-f2d8-7c3be9e91d24@statistik.tu-dortmund.de>



On 08.04.2019 12:19, ????? ?????? wrote:
> Dear all,
> 
> We have developed an R package written in C++ with Rcpp wrappers
> https://github.com/GeomScale/volume_approximation
> 
> We use the C code from lpSolveAPI (
> https://cran.r-project.org/web/packages/lpSolveAPI/index.html). We have
> added the code with no changes in folder ./src/lp_solve.
> 
> We want to submit the package to CRAN. Thus my question is how we have to
> declare the usage of lpSolve code in the description file? Do we have to
> add the Authors to the Authors at R field?
> 
> Thanks in advance,
> Apostolos Chalkis
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


If you use the other package as a dependency, simply declarfe this in 
the DESCRIPTION file. If you copy code, check whether the license allows 
for it and be sure to mention all relevant authors and copyright holders 
also in your Authors at R field in the DESCRIPTION file.

Best,
Uwe Ligges


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Mon Apr  8 19:02:10 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Mon, 8 Apr 2019 17:02:10 +0000
Subject: [R-pkg-devel] set PKG_CONFIG_PATH before installing a package
Message-ID: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>

I am using this command to set an environment variable ` Sys.setenv(PKG_CONFIG_PATH=paste(Sys.getenv('PKG_CONFIG_PATH'),paste(.libPaths(),'my_package/lib/pkgconfig',sep='/',collapse=':'),sep=':'));?
before install my package. It works fine if I run it before installing my package.

How can I do this inside my package so that CRAN can execute it by default.

--Sameh

	[[alternative HTML version deleted]]


From tr@ver@c @end|ng |rom gm@||@com  Mon Apr  8 19:59:29 2019
From: tr@ver@c @end|ng |rom gm@||@com (Travers Ching)
Date: Mon, 8 Apr 2019 10:59:29 -0700
Subject: [R-pkg-devel] set PKG_CONFIG_PATH before installing a package
In-Reply-To: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
References: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
Message-ID: <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>

I think the correct way to do it is through the configure script.  See
for example the Cairo package that uses pkg-config.  Configure scripts
are slightly hard to work through in my experience, but are worth it
if you need  customization of the installation environment.

Travers

On Mon, Apr 8, 2019 at 10:46 AM Sameh M. Abdulah
<sameh.abdulah at kaust.edu.sa> wrote:
>
> I am using this command to set an environment variable ` Sys.setenv(PKG_CONFIG_PATH=paste(Sys.getenv('PKG_CONFIG_PATH'),paste(.libPaths(),'my_package/lib/pkgconfig',sep='/',collapse=':'),sep=':'));?
> before install my package. It works fine if I run it before installing my package.
>
> How can I do this inside my package so that CRAN can execute it by default.
>
> --Sameh
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Mon Apr  8 21:14:24 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 8 Apr 2019 14:14:24 -0500
Subject: [R-pkg-devel] set PKG_CONFIG_PATH before installing a package
In-Reply-To: <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>
References: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
 <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>
Message-ID: <23723.40336.967172.525275@rob.eddelbuettel.com>


On 8 April 2019 at 10:59, Travers Ching wrote:
| I think the correct way to do it is through the configure script.  See
| for example the Cairo package that uses pkg-config.  Configure scripts
| are slightly hard to work through in my experience, but are worth it
| if you need  customization of the installation environment.

Or from the RcppRedis package you and I stand behind :)

[...]

## ... but check for pkg-config
AC_DEFUN([AC_PROG_PKGCONFIG], [AC_CHECK_PROG(PKGCONFIG,pkg-config,yes)])
AC_PROG_PKGCONFIG

## use pkg-config for hiredis
##
if test x"${PKGCONFIG}" == x"yes"; then
    ## check via pkg-config for hiredis
    if pkg-config --exists hiredis; then
        ## obtain cflags and obtain libs
        hiredis_cxxflags=`pkg-config --cflags hiredis`
        hiredis_libs=`pkg-config --libs hiredis`
        ## no need to build libhiredis.a
        hiredis_tgt=""     
    else
        AC_MSG_WARN([pkg-config exists but hiredis is not available.])
    fi
fi

## And make sure these flags are used for the tests below.
CPPFLAGS="${hiredis_cxxflags} ${CPPFLAGS}"
CXXFLAGS="${hiredis_cxxflags} ${CXXFLAGS}"

[...]

There is more at
  https://github.com/eddelbuettel/rcppredis/blob/master/configure.ac 
but is a key part.


Another useful trick is to just write a shell script 'configure' as one does
not have to use 'autoconf' to produce 'configure' see eg
  https://github.com/Rblp/Rblpapi/blob/master/configure
for that approach, or one of Jeroen's packages.


Last but not least you can call 'pkg-config' directly from src/Makevars too.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tr@ver@c @end|ng |rom gm@||@com  Mon Apr  8 21:51:25 2019
From: tr@ver@c @end|ng |rom gm@||@com (Travers Ching)
Date: Mon, 8 Apr 2019 12:51:25 -0700
Subject: [R-pkg-devel] set PKG_CONFIG_PATH before installing a package
In-Reply-To: <23723.40336.967172.525275@rob.eddelbuettel.com>
References: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
 <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>
 <23723.40336.967172.525275@rob.eddelbuettel.com>
Message-ID: <CAPLMX9G2uQd5xgq-_MyPKw0AuoVPvFj2i5Fs3AEJxWRZnjFOsw@mail.gmail.com>

What Dirk said!  I'd also just add that it's useful to have a fallback
in case pkg-config fails, e.g., compile what you need from
source.  The configure script in RcppRedis looks like a good example of that.

Travers


Travers

On Mon, Apr 8, 2019 at 12:14 PM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 8 April 2019 at 10:59, Travers Ching wrote:
> | I think the correct way to do it is through the configure script.  See
> | for example the Cairo package that uses pkg-config.  Configure scripts
> | are slightly hard to work through in my experience, but are worth it
> | if you need  customization of the installation environment.
>
> Or from the RcppRedis package you and I stand behind :)
>
> [...]
>
> ## ... but check for pkg-config
> AC_DEFUN([AC_PROG_PKGCONFIG], [AC_CHECK_PROG(PKGCONFIG,pkg-config,yes)])
> AC_PROG_PKGCONFIG
>
> ## use pkg-config for hiredis
> ##
> if test x"${PKGCONFIG}" == x"yes"; then
>     ## check via pkg-config for hiredis
>     if pkg-config --exists hiredis; then
>         ## obtain cflags and obtain libs
>         hiredis_cxxflags=`pkg-config --cflags hiredis`
>         hiredis_libs=`pkg-config --libs hiredis`
>         ## no need to build libhiredis.a
>         hiredis_tgt=""
>     else
>         AC_MSG_WARN([pkg-config exists but hiredis is not available.])
>     fi
> fi
>
> ## And make sure these flags are used for the tests below.
> CPPFLAGS="${hiredis_cxxflags} ${CPPFLAGS}"
> CXXFLAGS="${hiredis_cxxflags} ${CXXFLAGS}"
>
> [...]
>
> There is more at
>   https://github.com/eddelbuettel/rcppredis/blob/master/configure.ac
> but is a key part.
>
>
> Another useful trick is to just write a shell script 'configure' as one does
> not have to use 'autoconf' to produce 'configure' see eg
>   https://github.com/Rblp/Rblpapi/blob/master/configure
> for that approach, or one of Jeroen's packages.
>
>
> Last but not least you can call 'pkg-config' directly from src/Makevars too.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tr@ver@c @end|ng |rom gm@||@com  Mon Apr  8 23:02:53 2019
From: tr@ver@c @end|ng |rom gm@||@com (Travers Ching)
Date: Mon, 8 Apr 2019 14:02:53 -0700
Subject: [R-pkg-devel] Executable file warning in CRAN check
In-Reply-To: <CAPLMX9G2uQd5xgq-_MyPKw0AuoVPvFj2i5Fs3AEJxWRZnjFOsw@mail.gmail.com>
References: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
 <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>
 <23723.40336.967172.525275@rob.eddelbuettel.com>
 <CAPLMX9G2uQd5xgq-_MyPKw0AuoVPvFj2i5Fs3AEJxWRZnjFOsw@mail.gmail.com>
Message-ID: <CAPLMX9EsQdXn6ji3cVKkeUGRHi-a1YBuk4qQCbpH_zcXst33TA@mail.gmail.com>

I see the following warning on CRAN:

Result: WARN
    Found the following executable file:
     src/LZ4/LICENSE
    Source packages should not contain undeclared executable files.
    See section ?Package structure? in the ?Writing R Extensions? manual.
https://cran.r-project.org/web/checks/check_results_qs.html

This seems like a false positive since it's clearly not an executable,
but I'm wondering if there's anything I should do on my end?

Travers


From @eb@meyer @end|ng |rom |@u@de  Mon Apr  8 23:27:17 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Mon, 8 Apr 2019 23:27:17 +0200
Subject: [R-pkg-devel] Executable file warning in CRAN check
In-Reply-To: <CAPLMX9EsQdXn6ji3cVKkeUGRHi-a1YBuk4qQCbpH_zcXst33TA@mail.gmail.com>
References: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
 <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>
 <23723.40336.967172.525275@rob.eddelbuettel.com>
 <CAPLMX9G2uQd5xgq-_MyPKw0AuoVPvFj2i5Fs3AEJxWRZnjFOsw@mail.gmail.com>
 <CAPLMX9EsQdXn6ji3cVKkeUGRHi-a1YBuk4qQCbpH_zcXst33TA@mail.gmail.com>
Message-ID: <a21cf8ed-5f59-e6ea-3018-36a3d94dd2b1@fau.de>

No false positive. This file is indeed marked as an executable file, see
also at https://github.com/cran/qs/blob/0.14.1/src/LZ4/LICENSE, which says

> Executable File | 25 lines (20 sloc) | 1.28 KB 

On a Unix-based system you could do

> chmod -x src/LZ4/LICENSE

to remove the executable bit from that file.

Cheers,

	Sebastian


Am 08.04.19 um 23:02 schrieb Travers Ching:
> I see the following warning on CRAN:
> 
> Result: WARN
>     Found the following executable file:
>      src/LZ4/LICENSE
>     Source packages should not contain undeclared executable files.
>     See section ?Package structure? in the ?Writing R Extensions? manual.
> https://cran.r-project.org/web/checks/check_results_qs.html
> 
> This seems like a false positive since it's clearly not an executable,
> but I'm wondering if there's anything I should do on my end?
> 
> Travers
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tr@ver@c @end|ng |rom gm@||@com  Tue Apr  9 00:56:28 2019
From: tr@ver@c @end|ng |rom gm@||@com (Travers Ching)
Date: Mon, 8 Apr 2019 15:56:28 -0700
Subject: [R-pkg-devel] Executable file warning in CRAN check
In-Reply-To: <a21cf8ed-5f59-e6ea-3018-36a3d94dd2b1@fau.de>
References: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
 <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>
 <23723.40336.967172.525275@rob.eddelbuettel.com>
 <CAPLMX9G2uQd5xgq-_MyPKw0AuoVPvFj2i5Fs3AEJxWRZnjFOsw@mail.gmail.com>
 <CAPLMX9EsQdXn6ji3cVKkeUGRHi-a1YBuk4qQCbpH_zcXst33TA@mail.gmail.com>
 <a21cf8ed-5f59-e6ea-3018-36a3d94dd2b1@fau.de>
Message-ID: <CAPLMX9E5rqL6RG7c8oJ7wrwgmip76Jfoa=7TVVM5F3ekfEtf7g@mail.gmail.com>

Thanks Sebastian, I'll give it a shot.  It seems weird that I can't
replicate the warning on a mac laptop, or any other system.

Travers

On Mon, Apr 8, 2019 at 2:27 PM Sebastian Meyer <seb.meyer at fau.de> wrote:
>
> No false positive. This file is indeed marked as an executable file, see
> also at https://github.com/cran/qs/blob/0.14.1/src/LZ4/LICENSE, which says
>
> > Executable File | 25 lines (20 sloc) | 1.28 KB
>
> On a Unix-based system you could do
>
> > chmod -x src/LZ4/LICENSE
>
> to remove the executable bit from that file.
>
> Cheers,
>
>         Sebastian
>
>
> Am 08.04.19 um 23:02 schrieb Travers Ching:
> > I see the following warning on CRAN:
> >
> > Result: WARN
> >     Found the following executable file:
> >      src/LZ4/LICENSE
> >     Source packages should not contain undeclared executable files.
> >     See section ?Package structure? in the ?Writing R Extensions? manual.
> > https://cran.r-project.org/web/checks/check_results_qs.html
> >
> > This seems like a false positive since it's clearly not an executable,
> > but I'm wondering if there's anything I should do on my end?
> >
> > Travers
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @eb@meyer @end|ng |rom |@u@de  Tue Apr  9 10:17:09 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Tue, 9 Apr 2019 10:17:09 +0200
Subject: [R-pkg-devel] Executable file warning in CRAN check
In-Reply-To: <CAPLMX9E5rqL6RG7c8oJ7wrwgmip76Jfoa=7TVVM5F3ekfEtf7g@mail.gmail.com>
References: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
 <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>
 <23723.40336.967172.525275@rob.eddelbuettel.com>
 <CAPLMX9G2uQd5xgq-_MyPKw0AuoVPvFj2i5Fs3AEJxWRZnjFOsw@mail.gmail.com>
 <CAPLMX9EsQdXn6ji3cVKkeUGRHi-a1YBuk4qQCbpH_zcXst33TA@mail.gmail.com>
 <a21cf8ed-5f59-e6ea-3018-36a3d94dd2b1@fau.de>
 <CAPLMX9E5rqL6RG7c8oJ7wrwgmip76Jfoa=7TVVM5F3ekfEtf7g@mail.gmail.com>
Message-ID: <10b355bd-2617-13a5-e749-4a07b5e17bff@fau.de>

Let's look at the check_executables() function inside
tools:::.check_packages()
[https://svn.r-project.org/R/trunk/src/library/tools/R/check.R]. If the
'file' program is available on the check system, the check for
executable files is based on what 'file' thinks about each file in the
source package. R CMD check essentially scans for the term " executable"
in the output from 'file'.

The check result therefore depends on the version of 'file' (and on the
involved "magic number file") used on the check system. On my system with

$ file --version
> file-5.25
> magic file from /etc/magic:/usr/share/misc/magic

I get

$ file src/LZ4/LICENSE
> src/LZ4/LICENSE: ASCII text

so no complaint about that file from R CMD check.

It seems that the version of 'file' used on CRAN's macOS check platforms
returns something "executable" for that ASCII file, probably because the
executable bit is set.

To answer your initial question, I don't think there's anything you need
to do on your end.

Cheers,

	Sebastian


Am 09.04.19 um 00:56 schrieb Travers Ching:
> Thanks Sebastian, I'll give it a shot.  It seems weird that I can't
> replicate the warning on a mac laptop, or any other system.
> 
> Travers
> 
> On Mon, Apr 8, 2019 at 2:27 PM Sebastian Meyer <seb.meyer at fau.de> wrote:
>>
>> No false positive. This file is indeed marked as an executable file, see
>> also at https://github.com/cran/qs/blob/0.14.1/src/LZ4/LICENSE, which says
>>
>>> Executable File | 25 lines (20 sloc) | 1.28 KB
>>
>> On a Unix-based system you could do
>>
>>> chmod -x src/LZ4/LICENSE
>>
>> to remove the executable bit from that file.
>>
>> Cheers,
>>
>>         Sebastian
>>
>>
>> Am 08.04.19 um 23:02 schrieb Travers Ching:
>>> I see the following warning on CRAN:
>>>
>>> Result: WARN
>>>     Found the following executable file:
>>>      src/LZ4/LICENSE
>>>     Source packages should not contain undeclared executable files.
>>>     See section ?Package structure? in the ?Writing R Extensions? manual.
>>> https://cran.r-project.org/web/checks/check_results_qs.html
>>>
>>> This seems like a false positive since it's clearly not an executable,
>>> but I'm wondering if there's anything I should do on my end?
>>>
>>> Travers
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From z42d|r@j @end|ng |rom uco@e@  Tue Apr  9 14:05:58 2019
From: z42d|r@j @end|ng |rom uco@e@ (Jose V. Die)
Date: Tue, 9 Apr 2019 14:05:58 +0200
Subject: [R-pkg-devel] What version does "CRAN check list" refer to ?
In-Reply-To: <23719.15924.958103.124334@rob.eddelbuettel.com>
References: <mailman.3715.11.1554372086.53491.r-package-devel@r-project.org>
 <423C9941-F9D4-4F33-8C02-F8D7110E218F@uco.es>
 <B20F67F6-6811-485D-8C88-0F83B741E8D5@uco.es>
 <23719.15924.958103.124334@rob.eddelbuettel.com>
Message-ID: <0391187B-2083-4EEA-AEA5-6ACEB4980345@uco.es>

Hi Dirk. 

Thank you very much for your comments. 

Jose



> On 5 Apr 2019, at 13:38, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 5 April 2019 at 11:29, Jose V. Die wrote:
> | I am working on my first package and I released a new version (1.0.11). The CRAN checks link shows the last updated for today although the check details section refers to version 1.0.1. 
> | 
> | So, I?m confused about it. Are those check results from my old version or the current version just released? 
> | 
> | 
> | Package : https://cran.r-project.org/web/packages/geneHummus/index.html 
> | CRAN checks : https://cran.r-project.org/web/checks/check_results_geneHummus.html
> 
> If you look at the package page you see that
> - your new version is the current one _in source form_
> - the binary builds provided are currently _all behind at the previous version_
> - the results page has a version column and is currently mixed
> 
> It simply takes 24 to 48 hours for the builds jobs to catch up.
> 
> Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Tue Apr  9 14:31:56 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Tue, 9 Apr 2019 12:31:56 +0000
Subject: [R-pkg-devel] set PKG_CONFIG_PATH before installing a package
In-Reply-To: <CAPLMX9G2uQd5xgq-_MyPKw0AuoVPvFj2i5Fs3AEJxWRZnjFOsw@mail.gmail.com>
References: <F1938048-62FB-441C-BCD6-9A62E79D1255@kaust.edu.sa>
 <CAPLMX9GH6iiMGObZEcJtYPDNDAyJPWUCsbiCRYYGBEvCDb5wug@mail.gmail.com>
 <23723.40336.967172.525275@rob.eddelbuettel.com>,
 <CAPLMX9G2uQd5xgq-_MyPKw0AuoVPvFj2i5Fs3AEJxWRZnjFOsw@mail.gmail.com>
Message-ID: <35CFF3BA962CA3B8.B80AC87D-8475-487B-90D6-9C32EB1D4311@mail.outlook.com>

Thanks Travers and Dirk for your feedbacks.

?Sameh

________________________________
From: Travers Ching <traversc at gmail.com>
Sent: Monday, April 8, 2019 10:52 PM
To: Dirk Eddelbuettel
Cc: Sameh M. Abdulah; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] set PKG_CONFIG_PATH before installing a package

What Dirk said! I'd also just add that it's useful to have a fallback
in case pkg-config fails, e.g., compile what you need from
source. The configure script in RcppRedis looks like a good example of that.

Travers


Travers

On Mon, Apr 8, 2019 at 12:14 PM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 8 April 2019 at 10:59, Travers Ching wrote:
> | I think the correct way to do it is through the configure script. See
> | for example the Cairo package that uses pkg-config. Configure scripts
> | are slightly hard to work through in my experience, but are worth it
> | if you need customization of the installation environment.
>
> Or from the RcppRedis package you and I stand behind :)
>
> [...]
>
> ## ... but check for pkg-config
> AC_DEFUN([AC_PROG_PKGCONFIG], [AC_CHECK_PROG(PKGCONFIG,pkg-config,yes)])
> AC_PROG_PKGCONFIG
>
> ## use pkg-config for hiredis
> ##
> if test x"${PKGCONFIG}" == x"yes"; then
> ## check via pkg-config for hiredis
> if pkg-config --exists hiredis; then
> ## obtain cflags and obtain libs
> hiredis_cxxflags=`pkg-config --cflags hiredis`
> hiredis_libs=`pkg-config --libs hiredis`
> ## no need to build libhiredis.a
> hiredis_tgt=""
> else
> AC_MSG_WARN([pkg-config exists but hiredis is not available.])
> fi
> fi
>
> ## And make sure these flags are used for the tests below.
> CPPFLAGS="${hiredis_cxxflags} ${CPPFLAGS}"
> CXXFLAGS="${hiredis_cxxflags} ${CXXFLAGS}"
>
> [...]
>
> There is more at
> https://github.com/eddelbuettel/rcppredis/blob/master/configure.ac
> but is a key part.
>
>
> Another useful trick is to just write a shell script 'configure' as one does
> not have to use 'autoconf' to produce 'configure' see eg
> https://github.com/Rblp/Rblpapi/blob/master/configure
> for that approach, or one of Jeroen's packages.
>
>
> Last but not least you can call 'pkg-config' directly from src/Makevars too.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

	[[alternative HTML version deleted]]


From d@v|d@gohe| @end|ng |rom @rd@t@@|r  Wed Apr 10 10:14:08 2019
From: d@v|d@gohe| @end|ng |rom @rd@t@@|r (David Gohel)
Date: Wed, 10 Apr 2019 10:14:08 +0200
Subject: [R-pkg-devel] Check Flavor r-devel-linux-x86_64-debian-clang charset
Message-ID: <1C1480DA-1128-4FEC-8861-7B6B3B6B48EA@ardata.fr>

Dear all,

Among the CRAN machines used by Check, "r-devel-linux-x86_64-debian-clang" has been upgraded from UTF-8 to ISO8859-15. 

# using R Under development (unstable) (2019-04-07 r76333)
# using platform: x86_64-pc-linux-gnu (64-bit)
# using session charset: ISO8859-15

I realized that while reading an error that appeared few days ago on a package I maintain:
https://cran.r-project.org/web/checks/check_results_fpeek.html <https://cran.r-project.org/web/checks/check_results_fpeek.html>

My question is not how to fix my error but about the setting. 

Does anyone know why and if that setting will stay as is?


Kind regards,
David Gohel


	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Apr 10 16:33:39 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 10 Apr 2019 15:33:39 +0100
Subject: [R-pkg-devel] Check Flavor r-devel-linux-x86_64-debian-clang
 charset
In-Reply-To: <1C1480DA-1128-4FEC-8861-7B6B3B6B48EA@ardata.fr>
References: <1C1480DA-1128-4FEC-8861-7B6B3B6B48EA@ardata.fr>
Message-ID: <CABtg=K=8FeVcWK0Ji9YWUDiZcFy_++t-6ZW2a=YUzLGjU5-u_Q@mail.gmail.com>

If the charset choice is intentional, then we can add a builder/docker
image for this on R-hub.

It would certainly make sense to have a builder with an unusual charset.

Gabor

On Wed, Apr 10, 2019 at 11:43 AM David Gohel <david.gohel at ardata.fr> wrote:
>
> Dear all,
>
> Among the CRAN machines used by Check, "r-devel-linux-x86_64-debian-clang" has been upgraded from UTF-8 to ISO8859-15.
>
> # using R Under development (unstable) (2019-04-07 r76333)
> # using platform: x86_64-pc-linux-gnu (64-bit)
> # using session charset: ISO8859-15
>
> I realized that while reading an error that appeared few days ago on a package I maintain:
> https://cran.r-project.org/web/checks/check_results_fpeek.html <https://cran.r-project.org/web/checks/check_results_fpeek.html>
>
> My question is not how to fix my error but about the setting.
>
> Does anyone know why and if that setting will stay as is?
>
>
> Kind regards,
> David Gohel
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Apr 11 10:04:50 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 11 Apr 2019 09:04:50 +0100
Subject: [R-pkg-devel] Check Flavor r-devel-linux-x86_64-debian-clang
 charset
In-Reply-To: <CABtg=K=8FeVcWK0Ji9YWUDiZcFy_++t-6ZW2a=YUzLGjU5-u_Q@mail.gmail.com>
References: <1C1480DA-1128-4FEC-8861-7B6B3B6B48EA@ardata.fr>
 <CABtg=K=8FeVcWK0Ji9YWUDiZcFy_++t-6ZW2a=YUzLGjU5-u_Q@mail.gmail.com>
Message-ID: <CABtg=KkJ3wgBCqAatiG38ZjPVYzzTZCdanRRre3yhqpr9_3Xrw@mail.gmail.com>

I just got the CRAN ultimatum about a package of mine failing in that
locale, so yes, it definitely seems intentional.

Gabor

On Wed, Apr 10, 2019 at 3:33 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> If the charset choice is intentional, then we can add a builder/docker
> image for this on R-hub.
>
> It would certainly make sense to have a builder with an unusual charset.
>
> Gabor
>
> On Wed, Apr 10, 2019 at 11:43 AM David Gohel <david.gohel at ardata.fr> wrote:
> >
> > Dear all,
> >
> > Among the CRAN machines used by Check, "r-devel-linux-x86_64-debian-clang" has been upgraded from UTF-8 to ISO8859-15.
> >
> > # using R Under development (unstable) (2019-04-07 r76333)
> > # using platform: x86_64-pc-linux-gnu (64-bit)
> > # using session charset: ISO8859-15
> >
> > I realized that while reading an error that appeared few days ago on a package I maintain:
> > https://cran.r-project.org/web/checks/check_results_fpeek.html <https://cran.r-project.org/web/checks/check_results_fpeek.html>
> >
> > My question is not how to fix my error but about the setting.
> >
> > Does anyone know why and if that setting will stay as is?
> >
> >
> > Kind regards,
> > David Gohel
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Thu Apr 11 10:08:39 2019
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Thu, 11 Apr 2019 08:08:39 +0000 (UTC)
Subject: Blog post about R-package-devel
References: <378556636.2456374.1554970119965.ref@mail.yahoo.com>
Message-ID: <378556636.2456374.1554970119965@mail.yahoo.com>

Dear R-package-devel subscribers,

We've just published a post about how to get help with R package development on R-hub blog.

https://blog.r-hub.io/2019/04/11/r-package-devel/

It features this mailing list and its archives quite prominently.

Thanks to the maintainers and contributors of R-package-devel for providing such an useful venue!

Best wishes

Ma?lle.

	[[alternative HTML version deleted]]


From d@v|d@gohe| @end|ng |rom @rd@t@@|r  Thu Apr 11 10:20:01 2019
From: d@v|d@gohe| @end|ng |rom @rd@t@@|r (David Gohel)
Date: Thu, 11 Apr 2019 10:20:01 +0200
Subject: [R-pkg-devel] Check Flavor r-devel-linux-x86_64-debian-clang
 charset
In-Reply-To: <CABtg=KkJ3wgBCqAatiG38ZjPVYzzTZCdanRRre3yhqpr9_3Xrw@mail.gmail.com>
References: <1C1480DA-1128-4FEC-8861-7B6B3B6B48EA@ardata.fr>
 <CABtg=K=8FeVcWK0Ji9YWUDiZcFy_++t-6ZW2a=YUzLGjU5-u_Q@mail.gmail.com>
 <CABtg=KkJ3wgBCqAatiG38ZjPVYzzTZCdanRRre3yhqpr9_3Xrw@mail.gmail.com>
Message-ID: <52CD5221-C8F3-4271-8BDB-DB3A90789D6D@ardata.fr>

Yes, it seems so. 

Thanks Gabor, if possible, a docker for that case would be welcome.

I think I solved my issues. I set the locale in my cpp code:

    setlocale(LC_NUMERIC, "C");

In the R code, I am testing if the locale is set to UTF-8 with the following code but I am not sure this is the best solution: 

    # Only when not windows
    has_locale <- Sys.which("locale") != ""
    is_utf_8 <- has_locale && (system(command = "locale charmap", intern = TRUE) == "UTF-8")

If someone has an advice, it will be welcomed :)



David Gohel



> Le 11 avr. 2019 ? 10:04, G?bor Cs?rdi <csardi.gabor at gmail.com> a ?crit :
> 
> I just got the CRAN ultimatum about a package of mine failing in that
> locale, so yes, it definitely seems intentional.
> 
> Gabor
> 
> On Wed, Apr 10, 2019 at 3:33 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>> 
>> If the charset choice is intentional, then we can add a builder/docker
>> image for this on R-hub.
>> 
>> It would certainly make sense to have a builder with an unusual charset.
>> 
>> Gabor
>> 
>> On Wed, Apr 10, 2019 at 11:43 AM David Gohel <david.gohel at ardata.fr> wrote:
>>> 
>>> Dear all,
>>> 
>>> Among the CRAN machines used by Check, "r-devel-linux-x86_64-debian-clang" has been upgraded from UTF-8 to ISO8859-15.
>>> 
>>> # using R Under development (unstable) (2019-04-07 r76333)
>>> # using platform: x86_64-pc-linux-gnu (64-bit)
>>> # using session charset: ISO8859-15
>>> 
>>> I realized that while reading an error that appeared few days ago on a package I maintain:
>>> https://cran.r-project.org/web/checks/check_results_fpeek.html <https://cran.r-project.org/web/checks/check_results_fpeek.html>
>>> 
>>> My question is not how to fix my error but about the setting.
>>> 
>>> Does anyone know why and if that setting will stay as is?
>>> 
>>> 
>>> Kind regards,
>>> David Gohel
>>> 
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Apr 11 10:36:11 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 11 Apr 2019 09:36:11 +0100
Subject: [R-pkg-devel] Check Flavor r-devel-linux-x86_64-debian-clang
 charset
In-Reply-To: <52CD5221-C8F3-4271-8BDB-DB3A90789D6D@ardata.fr>
References: <1C1480DA-1128-4FEC-8861-7B6B3B6B48EA@ardata.fr>
 <CABtg=K=8FeVcWK0Ji9YWUDiZcFy_++t-6ZW2a=YUzLGjU5-u_Q@mail.gmail.com>
 <CABtg=KkJ3wgBCqAatiG38ZjPVYzzTZCdanRRre3yhqpr9_3Xrw@mail.gmail.com>
 <52CD5221-C8F3-4271-8BDB-DB3A90789D6D@ardata.fr>
Message-ID: <CABtg=KkmSHvaDa84KST8zrXiNt9n5vzvNQVeY4eEoNBxAi_9Kw@mail.gmail.com>

I think in R you can use
? l10n_info()
$MBCS
[1] TRUE

$`UTF-8`
[1] TRUE

$`Latin-1`
[1] FALSE

G.

On Thu, Apr 11, 2019 at 9:20 AM David Gohel <david.gohel at ardata.fr> wrote:
>
> Yes, it seems so.
>
> Thanks Gabor, if possible, a docker for that case would be welcome.
>
> I think I solved my issues. I set the locale in my cpp code:
>
> setlocale(LC_NUMERIC, "C");
>
> In the R code, I am testing if the locale is set to UTF-8 with the following code but I am not sure this is the best solution:
>
>     # Only when not windows
>     has_locale <- Sys.which("locale") != ""
>     is_utf_8 <- has_locale && (system(command = "locale charmap", intern = TRUE) == "UTF-8")
>
> If someone has an advice, it will be welcomed :)
>
>
>
> David Gohel
>
>
>
> Le 11 avr. 2019 ? 10:04, G?bor Cs?rdi <csardi.gabor at gmail.com> a ?crit :
>
> I just got the CRAN ultimatum about a package of mine failing in that
> locale, so yes, it definitely seems intentional.
>
> Gabor
>
> On Wed, Apr 10, 2019 at 3:33 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
>
> If the charset choice is intentional, then we can add a builder/docker
> image for this on R-hub.
>
> It would certainly make sense to have a builder with an unusual charset.
>
> Gabor
>
> On Wed, Apr 10, 2019 at 11:43 AM David Gohel <david.gohel at ardata.fr> wrote:
>
>
> Dear all,
>
> Among the CRAN machines used by Check, "r-devel-linux-x86_64-debian-clang" has been upgraded from UTF-8 to ISO8859-15.
>
> # using R Under development (unstable) (2019-04-07 r76333)
> # using platform: x86_64-pc-linux-gnu (64-bit)
> # using session charset: ISO8859-15
>
> I realized that while reading an error that appeared few days ago on a package I maintain:
> https://cran.r-project.org/web/checks/check_results_fpeek.html <https://cran.r-project.org/web/checks/check_results_fpeek.html>
>
> My question is not how to fix my error but about the setting.
>
> Does anyone know why and if that setting will stay as is?
>
>
> Kind regards,
> David Gohel
>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From d@v|d@gohe| @end|ng |rom @rd@t@@|r  Thu Apr 11 10:38:30 2019
From: d@v|d@gohe| @end|ng |rom @rd@t@@|r (David Gohel)
Date: Thu, 11 Apr 2019 10:38:30 +0200
Subject: [R-pkg-devel] Check Flavor r-devel-linux-x86_64-debian-clang
 charset
In-Reply-To: <CABtg=KkmSHvaDa84KST8zrXiNt9n5vzvNQVeY4eEoNBxAi_9Kw@mail.gmail.com>
References: <1C1480DA-1128-4FEC-8861-7B6B3B6B48EA@ardata.fr>
 <CABtg=K=8FeVcWK0Ji9YWUDiZcFy_++t-6ZW2a=YUzLGjU5-u_Q@mail.gmail.com>
 <CABtg=KkJ3wgBCqAatiG38ZjPVYzzTZCdanRRre3yhqpr9_3Xrw@mail.gmail.com>
 <52CD5221-C8F3-4271-8BDB-DB3A90789D6D@ardata.fr>
 <CABtg=KkmSHvaDa84KST8zrXiNt9n5vzvNQVeY4eEoNBxAi_9Kw@mail.gmail.com>
Message-ID: <68B79EBF-C927-49A2-BAD9-B4D5943293D1@ardata.fr>

Thank you!

> Le 11 avr. 2019 ? 10:36, G?bor Cs?rdi <csardi.gabor at gmail.com> a ?crit :
> 
> I think in R you can use
> ? l10n_info()
> $MBCS
> [1] TRUE
> 
> $`UTF-8`
> [1] TRUE
> 
> $`Latin-1`
> [1] FALSE
> 
> G.
> 
> On Thu, Apr 11, 2019 at 9:20 AM David Gohel <david.gohel at ardata.fr> wrote:
>> 
>> Yes, it seems so.
>> 
>> Thanks Gabor, if possible, a docker for that case would be welcome.
>> 
>> I think I solved my issues. I set the locale in my cpp code:
>> 
>> setlocale(LC_NUMERIC, "C");
>> 
>> In the R code, I am testing if the locale is set to UTF-8 with the following code but I am not sure this is the best solution:
>> 
>>    # Only when not windows
>>    has_locale <- Sys.which("locale") != ""
>>    is_utf_8 <- has_locale && (system(command = "locale charmap", intern = TRUE) == "UTF-8")
>> 
>> If someone has an advice, it will be welcomed :)
>> 
>> 
>> 
>> David Gohel
>> 
>> 
>> 
>> Le 11 avr. 2019 ? 10:04, G?bor Cs?rdi <csardi.gabor at gmail.com> a ?crit :
>> 
>> I just got the CRAN ultimatum about a package of mine failing in that
>> locale, so yes, it definitely seems intentional.
>> 
>> Gabor
>> 
>> On Wed, Apr 10, 2019 at 3:33 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>> 
>> 
>> If the charset choice is intentional, then we can add a builder/docker
>> image for this on R-hub.
>> 
>> It would certainly make sense to have a builder with an unusual charset.
>> 
>> Gabor
>> 
>> On Wed, Apr 10, 2019 at 11:43 AM David Gohel <david.gohel at ardata.fr> wrote:
>> 
>> 
>> Dear all,
>> 
>> Among the CRAN machines used by Check, "r-devel-linux-x86_64-debian-clang" has been upgraded from UTF-8 to ISO8859-15.
>> 
>> # using R Under development (unstable) (2019-04-07 r76333)
>> # using platform: x86_64-pc-linux-gnu (64-bit)
>> # using session charset: ISO8859-15
>> 
>> I realized that while reading an error that appeared few days ago on a package I maintain:
>> https://cran.r-project.org/web/checks/check_results_fpeek.html <https://cran.r-project.org/web/checks/check_results_fpeek.html>
>> 
>> My question is not how to fix my error but about the setting.
>> 
>> Does anyone know why and if that setting will stay as is?
>> 
>> 
>> Kind regards,
>> David Gohel
>> 
>> 
>>       [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> 


From m@@@n|||oroo@h@n @end|ng |rom gm@||@com  Fri Apr 12 01:16:47 2019
From: m@@@n|||oroo@h@n @end|ng |rom gm@||@com (Mohammad Ali Nilforooshan)
Date: Fri, 12 Apr 2019 11:16:47 +1200
Subject: [R-pkg-devel] read-only mirror of the CRAN R package repository on
 GitHub
Message-ID: <CANoJKNhWxUY3X6r+1FuHG6qOmWmK5Yt4vTfRSkdv4h6-_ubgnA@mail.gmail.com>

Hi,

In the past, there were read-only mirrors of the CRAN R packages on GitHub
(i.e., https://github.com/cran/<packagename>).
I cannot find this for my R package (ggroups), which became available on
CRAN a few weeks ago. Does CRAN still provide package repositories on
GitHub? If yes, please elaborate how the review and permissions are handled.

Thank you
M. A. Nilforooshan

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Apr 12 02:56:02 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 11 Apr 2019 17:56:02 -0700
Subject: [R-pkg-devel] 
 read-only mirror of the CRAN R package repository on GitHub
In-Reply-To: <CANoJKNhWxUY3X6r+1FuHG6qOmWmK5Yt4vTfRSkdv4h6-_ubgnA@mail.gmail.com>
References: <CANoJKNhWxUY3X6r+1FuHG6qOmWmK5Yt4vTfRSkdv4h6-_ubgnA@mail.gmail.com>
Message-ID: <DB42F5CD-7D04-4F47-A6B3-BBA48B46B52D@dcn.davis.ca.us>

I don't think "CRAN" (R Core)  _ever_ did this... it was a volunteer effort by someone independently.

On April 11, 2019 4:16:47 PM PDT, Mohammad Ali Nilforooshan <m.a.nilforooshan at gmail.com> wrote:
>Hi,
>
>In the past, there were read-only mirrors of the CRAN R packages on
>GitHub
>(i.e., https://github.com/cran/<packagename>).
>I cannot find this for my R package (ggroups), which became available
>on
>CRAN a few weeks ago. Does CRAN still provide package repositories on
>GitHub? If yes, please elaborate how the review and permissions are
>handled.
>
>Thank you
>M. A. Nilforooshan
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From bbo|ker @end|ng |rom gm@||@com  Fri Apr 12 03:01:12 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 11 Apr 2019 21:01:12 -0400
Subject: [R-pkg-devel] 
 read-only mirror of the CRAN R package repository on GitHub
In-Reply-To: <DB42F5CD-7D04-4F47-A6B3-BBA48B46B52D@dcn.davis.ca.us>
References: <CANoJKNhWxUY3X6r+1FuHG6qOmWmK5Yt4vTfRSkdv4h6-_ubgnA@mail.gmail.com>
 <DB42F5CD-7D04-4F47-A6B3-BBA48B46B52D@dcn.davis.ca.us>
Message-ID: <01cde05b-e535-6e16-6048-c642ae1792a1@gmail.com>


  It's provided by METACRAN: https://www.r-pkg.org/about

https://github.com/metacran/metacranweb/issues is a good place to report
problems/ask questions.

On 2019-04-11 8:56 p.m., Jeff Newmiller wrote:
> I don't think "CRAN" (R Core)  _ever_ did this... it was a volunteer effort by someone independently.
> 
> On April 11, 2019 4:16:47 PM PDT, Mohammad Ali Nilforooshan <m.a.nilforooshan at gmail.com> wrote:
>> Hi,
>>
>> In the past, there were read-only mirrors of the CRAN R packages on
>> GitHub
>> (i.e., https://github.com/cran/<packagename>).
>> I cannot find this for my R package (ggroups), which became available
>> on
>> CRAN a few weeks ago. Does CRAN still provide package repositories on
>> GitHub? If yes, please elaborate how the review and permissions are
>> handled.
>>
>> Thank you
>> M. A. Nilforooshan
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Fri Apr 12 11:27:02 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 12 Apr 2019 10:27:02 +0100
Subject: [R-pkg-devel] 
 read-only mirror of the CRAN R package repository on GitHub
In-Reply-To: <01cde05b-e535-6e16-6048-c642ae1792a1@gmail.com>
References: <CANoJKNhWxUY3X6r+1FuHG6qOmWmK5Yt4vTfRSkdv4h6-_ubgnA@mail.gmail.com>
 <DB42F5CD-7D04-4F47-A6B3-BBA48B46B52D@dcn.davis.ca.us>
 <01cde05b-e535-6e16-6048-c642ae1792a1@gmail.com>
Message-ID: <CABtg=KkET2k0X5jLSQPyVSv-+BfDty5vv5LowKKC4BUMj1E=vQ@mail.gmail.com>

I have just added this package. The mirror had some hiccups a couple
of weeks ago when we had to switch to synchronize from a cran mirror
instead of the main CRAN site.
Turns out mirrors often have slightly inconsistent data/metadata, not
very surprisingly, and this threw off the mirroring script.

I'll make sure that all packages are up to date soon.

If you have any more issues, please report in the issue tracker Ben
pointer to below. Thanks!

Gabor

On Fri, Apr 12, 2019 at 2:06 AM Ben Bolker <bbolker at gmail.com> wrote:
>
>
>   It's provided by METACRAN: https://www.r-pkg.org/about
>
> https://github.com/metacran/metacranweb/issues is a good place to report
> problems/ask questions.
>
> On 2019-04-11 8:56 p.m., Jeff Newmiller wrote:
> > I don't think "CRAN" (R Core)  _ever_ did this... it was a volunteer effort by someone independently.
> >
> > On April 11, 2019 4:16:47 PM PDT, Mohammad Ali Nilforooshan <m.a.nilforooshan at gmail.com> wrote:
> >> Hi,
> >>
> >> In the past, there were read-only mirrors of the CRAN R packages on
> >> GitHub
> >> (i.e., https://github.com/cran/<packagename>).
> >> I cannot find this for my R package (ggroups), which became available
> >> on
> >> CRAN a few weeks ago. Does CRAN still provide package repositories on
> >> GitHub? If yes, please elaborate how the review and permissions are
> >> handled.
> >>
> >> Thank you
> >> M. A. Nilforooshan
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sat Apr 13 10:33:48 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sat, 13 Apr 2019 09:33:48 +0100
Subject: [R-pkg-devel] Check Flavor r-devel-linux-x86_64-debian-clang
 charset
In-Reply-To: <68B79EBF-C927-49A2-BAD9-B4D5943293D1@ardata.fr>
References: <1C1480DA-1128-4FEC-8861-7B6B3B6B48EA@ardata.fr>
 <CABtg=K=8FeVcWK0Ji9YWUDiZcFy_++t-6ZW2a=YUzLGjU5-u_Q@mail.gmail.com>
 <CABtg=KkJ3wgBCqAatiG38ZjPVYzzTZCdanRRre3yhqpr9_3Xrw@mail.gmail.com>
 <52CD5221-C8F3-4271-8BDB-DB3A90789D6D@ardata.fr>
 <CABtg=KkmSHvaDa84KST8zrXiNt9n5vzvNQVeY4eEoNBxAi_9Kw@mail.gmail.com>
 <68B79EBF-C927-49A2-BAD9-B4D5943293D1@ardata.fr>
Message-ID: <CABtg=K=KCZ6m77xfTEe+jVBDifAzk+scskOYh5J9OERs=Y9SXQ@mail.gmail.com>

R-hub has a debian-clang-devel platform now, with the same ISO-8859-15
locale, so you can easily reproduce this with

rhub::check(<package-file>, platform = "debian-clang-devel")

To fix it, it is probably better to reproduce it locally, either via

rhub::local_check_linux(<package-file>, image = "rhub/debian-clang-devel")

and then re-using the container, or you can directly get the
rhub/debian-clang-devel Docker image.

Gabor


On Thu, Apr 11, 2019 at 9:38 AM David Gohel <david.gohel at ardata.fr> wrote:
>
> Thank you!
>
> > Le 11 avr. 2019 ? 10:36, G?bor Cs?rdi <csardi.gabor at gmail.com> a ?crit :
> >
> > I think in R you can use
> > ? l10n_info()
> > $MBCS
> > [1] TRUE
> >
> > $`UTF-8`
> > [1] TRUE
> >
> > $`Latin-1`
> > [1] FALSE
> >
> > G.
> >
> > On Thu, Apr 11, 2019 at 9:20 AM David Gohel <david.gohel at ardata.fr> wrote:
> >>
> >> Yes, it seems so.
> >>
> >> Thanks Gabor, if possible, a docker for that case would be welcome.
> >>
> >> I think I solved my issues. I set the locale in my cpp code:
> >>
> >> setlocale(LC_NUMERIC, "C");
> >>
> >> In the R code, I am testing if the locale is set to UTF-8 with the following code but I am not sure this is the best solution:
> >>
> >>    # Only when not windows
> >>    has_locale <- Sys.which("locale") != ""
> >>    is_utf_8 <- has_locale && (system(command = "locale charmap", intern = TRUE) == "UTF-8")
> >>
> >> If someone has an advice, it will be welcomed :)
> >>
> >>
> >>
> >> David Gohel
> >>
> >>
> >>
> >> Le 11 avr. 2019 ? 10:04, G?bor Cs?rdi <csardi.gabor at gmail.com> a ?crit :
> >>
> >> I just got the CRAN ultimatum about a package of mine failing in that
> >> locale, so yes, it definitely seems intentional.
> >>
> >> Gabor
> >>
> >> On Wed, Apr 10, 2019 at 3:33 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >>
> >>
> >> If the charset choice is intentional, then we can add a builder/docker
> >> image for this on R-hub.
> >>
> >> It would certainly make sense to have a builder with an unusual charset.
> >>
> >> Gabor
> >>
> >> On Wed, Apr 10, 2019 at 11:43 AM David Gohel <david.gohel at ardata.fr> wrote:
> >>
> >>
> >> Dear all,
> >>
> >> Among the CRAN machines used by Check, "r-devel-linux-x86_64-debian-clang" has been upgraded from UTF-8 to ISO8859-15.
> >>
> >> # using R Under development (unstable) (2019-04-07 r76333)
> >> # using platform: x86_64-pc-linux-gnu (64-bit)
> >> # using session charset: ISO8859-15
> >>
> >> I realized that while reading an error that appeared few days ago on a package I maintain:
> >> https://cran.r-project.org/web/checks/check_results_fpeek.html <https://cran.r-project.org/web/checks/check_results_fpeek.html>
> >>
> >> My question is not how to fix my error but about the setting.
> >>
> >> Does anyone know why and if that setting will stay as is?
> >>
> >>
> >> Kind regards,
> >> David Gohel
> >>
> >>
> >>       [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >>
>


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Mon Apr 15 17:21:31 2019
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Mon, 15 Apr 2019 11:21:31 -0400
Subject: [R-pkg-devel] SHLIB_OPENMP_*FLAGS in Makefiles
Message-ID: <CAMVrHdBXMLYP-HByfRZdCy+9QcMNuu9r9YW1HRD6NmJbUNmeBQ@mail.gmail.com>

In checking my R package via devtools::check and devtools::check_built, I
received the following NOTE which I am unsure how to fix. My package
contains compiled code (via Rcpp). Within my .cpp file I have the following
line:

#define ARMA_DONT_PRINT_OPENMP_WARNING

Is this the issue?

checking use of SHLIB_OPENMP_*FLAGS in Makefiles ... NOTE
  src/Makevars: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but
not in PKG_LIBS
  src/Makevars: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but
linking is by C++
  src/Makevars.win: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS
but not in PKG_LIBS
  src/Makevars.win: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but
linking is by C++


Thanks.

	[[alternative HTML version deleted]]


From m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@  Mon Apr 15 17:31:57 2019
From: m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@ (Maxime Turgeon)
Date: Mon, 15 Apr 2019 15:31:57 +0000
Subject: [R-pkg-devel] SHLIB_OPENMP_*FLAGS in Makefiles
In-Reply-To: <CAMVrHdBXMLYP-HByfRZdCy+9QcMNuu9r9YW1HRD6NmJbUNmeBQ@mail.gmail.com>
References: <CAMVrHdBXMLYP-HByfRZdCy+9QcMNuu9r9YW1HRD6NmJbUNmeBQ@mail.gmail.com>
Message-ID: <QB1PR01MB3537304D48AA00C1C98E13C8BA2B0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>

The NOTE refers to Makevars and Makevars.win. The most logical place to start your investigation would be those two files. Do you have any reason to believe that they are *not* the culprits?

Max
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Jarrett Phillips <phillipsjarrett1 at gmail.com>
Sent: April 15, 2019 11:21 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] SHLIB_OPENMP_*FLAGS in Makefiles

In checking my R package via devtools::check and devtools::check_built, I
received the following NOTE which I am unsure how to fix. My package
contains compiled code (via Rcpp). Within my .cpp file I have the following
line:

#define ARMA_DONT_PRINT_OPENMP_WARNING

Is this the issue?

checking use of SHLIB_OPENMP_*FLAGS in Makefiles ... NOTE
  src/Makevars: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but
not in PKG_LIBS
  src/Makevars: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but
linking is by C++
  src/Makevars.win: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS
but not in PKG_LIBS
  src/Makevars.win: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but
linking is by C++


Thanks.

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Apr 15 17:50:47 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 15 Apr 2019 10:50:47 -0500
Subject: [R-pkg-devel] SHLIB_OPENMP_*FLAGS in Makefiles
In-Reply-To: <CAMVrHdBXMLYP-HByfRZdCy+9QcMNuu9r9YW1HRD6NmJbUNmeBQ@mail.gmail.com>
References: <CAMVrHdBXMLYP-HByfRZdCy+9QcMNuu9r9YW1HRD6NmJbUNmeBQ@mail.gmail.com>
Message-ID: <23732.43095.778533.595348@rob.eddelbuettel.com>


On 15 April 2019 at 11:21, Jarrett Phillips wrote:
| In checking my R package via devtools::check and devtools::check_built, I
| received the following NOTE which I am unsure how to fix. My package
| contains compiled code (via Rcpp). Within my .cpp file I have the following
| line:
| 
| #define ARMA_DONT_PRINT_OPENMP_WARNING
| 
| Is this the issue?

No.
 
| checking use of SHLIB_OPENMP_*FLAGS in Makefiles ... NOTE
|   src/Makevars: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but
| not in PKG_LIBS
|   src/Makevars: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but
| linking is by C++
|   src/Makevars.win: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS
| but not in PKG_LIBS
|   src/Makevars.win: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but
| linking is by C++

R is now quite explicit about something is used to not complain about: a mix
of C and CXX flags used in the two listed files (as Maxime pointed out).

This is quite possibly due to the skeleton version of these files included in
older versions of RcppArmadillo.  We of course switched to a corrected one
once these warnings appeared, but we cannot fix the packages already out there.
"Better" versions are at

https://github.com/RcppCore/RcppArmadillo/blob/master/inst/skeleton/Makevars
https://github.com/RcppCore/RcppArmadillo/blob/master/inst/skeleton/Makevars.win

and in essence you just need these two updated lines:

PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS) 
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)

and we also recommend including

CXX_STD = CXX11

as the files do.

Hope this helps, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From t@nkchow12 @end|ng |rom gm@||@com  Mon Apr 15 18:50:28 2019
From: t@nkchow12 @end|ng |rom gm@||@com (Tan Zhou)
Date: Mon, 15 Apr 2019 11:50:28 -0500
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
Message-ID: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>

Hi,
I am trying to put the r package on the CRAN. But one of the package
dependencies is not from CRAN. I can use the following can install in local.

if (!require("rPeaks")) {
    devtools::install_github("jrminter/rPeaks")
  }

I followed the suggestions based on
https://stackoverflow.com/questions/29419776/r-package-dependencies-not-installed-from-additional-repositories
.
But it didn't work out for me. OR maybe I didn't set up it right.

My GitHub repository is https://github.com/tankwin08/waveformlidar.

My DESCRIPTION:
Suggests:
    knitr,
rPeaks
Additional_repositories: https://github.com/jrminter/rPeaks/

I am not sure I need to add an additional step to change anything. The R
function needs to use the rPeaks is waveformlidar
<https://github.com/tankwin08/waveformlidar>/R
<https://github.com/tankwin08/waveformlidar/tree/master/R>/deconvolution.R

Any suggestion of how to set up the additional_repositories are appreciated.

-- 

Best regards

Tan Zhou

	[[alternative HTML version deleted]]


From r@||@@tubner @end|ng |rom d@q@n@@com  Mon Apr 15 19:06:37 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Mon, 15 Apr 2019 19:06:37 +0200
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
In-Reply-To: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
References: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
Message-ID: <7efd2aec-8b82-1bb1-d353-f0a573859dac@daqana.com>

On 15.04.19 18:50, Tan Zhou wrote:
> I followed the suggestions based on
> https://stackoverflow.com/questions/29419776/r-package-dependencies-not-installed-from-additional-repositories
> .
> But it didn't work out for me. OR maybe I didn't set up it right.
> 
> My GitHub repository is https://github.com/tankwin08/waveformlidar.
> 
> My DESCRIPTION:
> Suggests:
>     knitr,
> rPeaks
> Additional_repositories: https://github.com/jrminter/rPeaks/

The 'Additional_repositories' field is meant for additional CRAN-like
repositories, not for a git(hub) repository. A simple way to create such
a CRAN-like repository is given by the drat package, as mentioned in the
referenced SO answer. I am using that for the swephR package:

...
Suggests:
    testthat,
    swephRdata,
    knitr,
    rmarkdown
Encoding: UTF-8
URL: https://github.com/rstub/swephR/, http://www.astro.com/swisseph/
BugReports: https://github.com/rstub/swephR/issues/
Additional_repositories: https://rstub.github.io/drat
...


So while the 'swephRdata' can be found at
https://github.com/rstub/swephRdata/, the 'Additional_repositories'
field points to my drat repository.

In your case, you could either ask the rPeaks author to create a drat
repo or do that yourself (possibly with the author's consent).

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190415/865030bd/attachment.sig>

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Apr 15 20:09:53 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 15 Apr 2019 20:09:53 +0200
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
In-Reply-To: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
References: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
Message-ID: <ac7b5071-f5ef-d09c-8bd0-1e838bd121fd@statistik.tu-dortmund.de>



On 15.04.2019 18:50, Tan Zhou wrote:
> Hi,
> I am trying to put the r package on the CRAN. But one of the package
> dependencies is not from CRAN. I can use the following can install in local.
> 
> if (!require("rPeaks")) {
>      devtools::install_github("jrminter/rPeaks")
>    }
> 

You must not do that as it would install without explicit user permission.


Best,
Uwe Ligges


> I followed the suggestions based on
> https://stackoverflow.com/questions/29419776/r-package-dependencies-not-installed-from-additional-repositories
> .
> But it didn't work out for me. OR maybe I didn't set up it right.
> 
> My GitHub repository is https://github.com/tankwin08/waveformlidar.
> 
> My DESCRIPTION:
> Suggests:
>      knitr,
> rPeaks
> Additional_repositories: https://github.com/jrminter/rPeaks/
> 
> I am not sure I need to add an additional step to change anything. The R
> function needs to use the rPeaks is waveformlidar
> <https://github.com/tankwin08/waveformlidar>/R
> <https://github.com/tankwin08/waveformlidar/tree/master/R>/deconvolution.R
> 
> Any suggestion of how to set up the additional_repositories are appreciated.
>


From t@nkchow12 @end|ng |rom gm@||@com  Tue Apr 16 03:15:00 2019
From: t@nkchow12 @end|ng |rom gm@||@com (Tan Zhou)
Date: Mon, 15 Apr 2019 20:15:00 -0500
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
In-Reply-To: <7efd2aec-8b82-1bb1-d353-f0a573859dac@daqana.com>
References: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
 <7efd2aec-8b82-1bb1-d353-f0a573859dac@daqana.com>
Message-ID: <CACFKh4QdRKVCvMb+V2hfXNdsQVEXmaAbXwg9+UoJ6jxvqovacA@mail.gmail.com>

Thank you very much for your suggestions and explanation, Ralf. They are
very helpful.
I got permission from the author and use *drat::addRepo("jrminter").*

*When I try to test if this package can be installed with install.package*

*install.packages("rPeaks", repos = "https://jrminter.github.io/drat/
<https://jrminter.github.io/drat/>", type = "source")Warning in
install.packages :  unable to access index for repository
https://tankwin08.github.io/drat/src/contrib
<https://tankwin08.github.io/drat/src/contrib>:  cannot open URL
'https://tankwin08.github.io/drat/src/contrib/PACKAGES
<https://tankwin08.github.io/drat/src/contrib/PACKAGES>'Warning in
install.packages :  unable to access index for repository
https://jrminter.github.io/drat/src/contrib
<https://jrminter.github.io/drat/src/contrib>:  cannot open URL
'https://jrminter.github.io/drat/src/contrib/PACKAGES
<https://jrminter.github.io/drat/src/contrib/PACKAGES>'Installing package
into ?C:/Users/tank/Documents/R/win-library/3.4?(as ?lib? is
unspecified)Warning in install.packages :  unable to access index for
repository https://jrminter.github.io/drat/src/contrib
<https://jrminter.github.io/drat/src/contrib>:  cannot open URL
'https://jrminter.github.io/drat/src/contrib/PACKAGES
<https://jrminter.github.io/drat/src/contrib/PACKAGES>'Warning in
install.packages :  package ?rPeaks? is not available (for R version 3.4.3)*

*Do you have any suggestion? *


Best
Tan

On Mon, Apr 15, 2019 at 12:16 PM Ralf Stubner <ralf.stubner at daqana.com>
wrote:

> On 15.04.19 18:50, Tan Zhou wrote:
> > I followed the suggestions based on
> >
> https://stackoverflow.com/questions/29419776/r-package-dependencies-not-installed-from-additional-repositories
> > .
> > But it didn't work out for me. OR maybe I didn't set up it right.
> >
> > My GitHub repository is https://github.com/tankwin08/waveformlidar.
> >
> > My DESCRIPTION:
> > Suggests:
> >     knitr,
> > rPeaks
> > Additional_repositories: https://github.com/jrminter/rPeaks/
>
> The 'Additional_repositories' field is meant for additional CRAN-like
> repositories, not for a git(hub) repository. A simple way to create such
> a CRAN-like repository is given by the drat package, as mentioned in the
> referenced SO answer. I am using that for the swephR package:
>
> ...
> Suggests:
>     testthat,
>     swephRdata,
>     knitr,
>     rmarkdown
> Encoding: UTF-8
> URL: https://github.com/rstub/swephR/, http://www.astro.com/swisseph/
> BugReports: https://github.com/rstub/swephR/issues/
> Additional_repositories: https://rstub.github.io/drat
> ...
>
>
> So while the 'swephRdata' can be found at
> https://github.com/rstub/swephRdata/, the 'Additional_repositories'
> field points to my drat repository.
>
> In your case, you could either ask the rPeaks author to create a drat
> repo or do that yourself (possibly with the author's consent).
>
> Greetings
> Ralf
>
> --
> Ralf Stubner
> Senior Software Engineer / Trainer
>
> daqana GmbH
> Dortustra?e 48
> 14467 Potsdam
>
> T: +49 331 23 61 93 11
> F: +49 331 23 61 93 90
> M: +49 162 20 91 196
> Mail: ralf.stubner at daqana.com
>
> Sitz: Potsdam
> Register: AG Potsdam HRB 27966
> Ust.-IdNr.: DE300072622
> Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 

Best regards

Tan Zhou

	[[alternative HTML version deleted]]


From r@||@@tubner @end|ng |rom d@q@n@@com  Tue Apr 16 10:53:32 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Tue, 16 Apr 2019 10:53:32 +0200
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
In-Reply-To: <CACFKh4QdRKVCvMb+V2hfXNdsQVEXmaAbXwg9+UoJ6jxvqovacA@mail.gmail.com>
References: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
 <7efd2aec-8b82-1bb1-d353-f0a573859dac@daqana.com>
 <CACFKh4QdRKVCvMb+V2hfXNdsQVEXmaAbXwg9+UoJ6jxvqovacA@mail.gmail.com>
Message-ID: <2031ba29-e32c-3f92-7dd2-c9d5628b8fc6@daqana.com>

On 16.04.19 03:15, Tan Zhou wrote:
> install.packages("rPeaks", repos = "https://jrminter.github.io/drat/",
> type = "source")
> Warning in install.packages :
> ? unable to access index for repository
> https://tankwin08.github.io/drat/src/contrib:
> ? cannot open URL 'https://tankwin08.github.io/drat/src/contrib/PACKAGES'
> Warning in install.packages :
> ? unable to access index for repository
> https://jrminter.github.io/drat/src/contrib:
> ? cannot open URL 'https://jrminter.github.io/drat/src/contrib/PACKAGES'
> Installing package into ?C:/Users/tank/Documents/R/win-library/3.4?
> (as ?lib? is unspecified)
> Warning in install.packages :
> ? unable to access index for repository
> https://jrminter.github.io/drat/src/contrib:
> ? cannot open URL 'https://jrminter.github.io/drat/src/contrib/PACKAGES'
> Warning in install.packages :
> ? package ?rPeaks? is not available (for R version 3.4.3)

Either you or the rPeaks author should create a repository on GitHub
named 'drat', possibly by forking the original 'drat' repo. Please read
the corresponding vignette
https://cran.r-project.org/web/packages/drat/vignettes/DratForPackageAuthors.html
for the full details.

cheerio
ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190416/3efd0565/attachment.sig>

From |uc@r @end|ng |rom |edor@project@org  Tue Apr 16 11:00:15 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 16 Apr 2019 11:00:15 +0200
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
In-Reply-To: <CACFKh4QdRKVCvMb+V2hfXNdsQVEXmaAbXwg9+UoJ6jxvqovacA@mail.gmail.com>
References: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
 <7efd2aec-8b82-1bb1-d353-f0a573859dac@daqana.com>
 <CACFKh4QdRKVCvMb+V2hfXNdsQVEXmaAbXwg9+UoJ6jxvqovacA@mail.gmail.com>
Message-ID: <CALEXWq0zaAFUqh_8dDjDN81tDatvEA9i++UFObmb=nMsQb_e4Q@mail.gmail.com>

You could convince the original author to submit rPeaks to CRAN, or
volunteer to be the maintainer and do it yourself if he doesn't want
to maintain it. That would be easier for you and better for everyone,
because the package would be well-checked under the watchful eye of
CRAN maintainers. Otherwise, see below.

On Tue, 16 Apr 2019 at 03:15, Tan Zhou <tankchow12 at gmail.com> wrote:
>
> Thank you very much for your suggestions and explanation, Ralf. They are
> very helpful.
> I got permission from the author and use *drat::addRepo("jrminter").*
>
> *When I try to test if this package can be installed with install.package*
>
> *install.packages("rPeaks", repos = "https://jrminter.github.io/drat/
> <https://jrminter.github.io/drat/>", type = "source")Warning in
> install.packages :  unable to access index for repository
> https://tankwin08.github.io/drat/src/contrib
> <https://tankwin08.github.io/drat/src/contrib>:  cannot open URL
> 'https://tankwin08.github.io/drat/src/contrib/PACKAGES
> <https://tankwin08.github.io/drat/src/contrib/PACKAGES>'Warning in
> install.packages :  unable to access index for repository
> https://jrminter.github.io/drat/src/contrib
> <https://jrminter.github.io/drat/src/contrib>:  cannot open URL
> 'https://jrminter.github.io/drat/src/contrib/PACKAGES
> <https://jrminter.github.io/drat/src/contrib/PACKAGES>'Installing package
> into ?C:/Users/tank/Documents/R/win-library/3.4?(as ?lib? is
> unspecified)Warning in install.packages :  unable to access index for
> repository https://jrminter.github.io/drat/src/contrib
> <https://jrminter.github.io/drat/src/contrib>:  cannot open URL
> 'https://jrminter.github.io/drat/src/contrib/PACKAGES
> <https://jrminter.github.io/drat/src/contrib/PACKAGES>'Warning in
> install.packages :  package ?rPeaks? is not available (for R version 3.4.3)*
>
> *Do you have any suggestion? *

I see nothing in https://jrminter.github.io/drat or
https://tankwin08.github.io/drat. First of all, someone (the author or
you in his behalf) has to setup a drat repo, so please read and follow
the guide for package authors:

https://cran.r-project.org/web/packages/drat/vignettes/DratForPackageAuthors.html

After you setup such a repo (if the original author didn't want to do
it by himself and gave his permission) in your GitHub account and push
jrminter's package, you should be able to do the following:

drat::addRepo("tankwin08")
install.packages("rPeaks")

and that's it. So finally, you can add

Additional_repositories: https://tankwin08.github.io/drat

to your DESCRIPTION file.

-- 
I?aki ?car


From w|||@pe@r@e @end|ng |rom gm@||@com  Tue Apr 16 19:40:55 2019
From: w|||@pe@r@e @end|ng |rom gm@||@com (Will)
Date: Tue, 16 Apr 2019 11:40:55 -0600
Subject: [R-pkg-devel] Submitting a package whose unit tests sometimes fail
 because of server connections
Message-ID: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>

Hello everyone,

I'm sorry to bother you, but I would like some help getting a package (
*suppdata*; https://github.com/ropensci/suppdata) available through CRAN.
The package downloads supplementary materials from papers and data
repositories on the basis of their DOI, making reproducible analyses a
little easier to share and create.

The package's unit tests involve downloading data, and when multiple
requests for the same resource are sent from a single machine (as seems to
be done by CRAN's testing servers) the data hosts will sometimes refuse the
connection and so the package's tests will fail. I emphasise that the tests
pass at Travis-CI (https://travis-ci.org/ropensci/suppdata) and OpenCPU (
https://ropensci.ocpu.io/suppdata/info); I am confident this is a
connection issue but I would be grateful to be shown I am wrong. I am not
sure how to solve this problem, and was hoping you might have some advice.
Some things I have considered include:


   1. Skipping all unit tests on CRAN (using something like
   *testtht::skip_on_cran*). This would immediately fix the problem, and as
   a mitigating factor we report automated test result and coverage on the
   package's GitHub page (https://github.com/ropensci/suppdata).
   2. Using HTTP-mocking to avoid requiring a call to a server during tests
   at all. I would be uncomfortable relying solely on this for all tests,
   since if the data hosters changed things we wouldn't know. Thus I would
   still want the Internet-enabled tests, which would also have to be turned
   off for CRAN (see 1 above). This would also be a lot of additional work.
   3. Somehow bypassing the requirement for the unit tests to all pass
   before the package is checked by the CRAN maintainers. I have no idea if
   this is something CRAN would be willing to do, or if it is even possible.
   It would be the easiest option for me, but I don't want to create extra
   work for other people!
   4. Slowing the tests with something like *Sys.sleep*. This might work,
   but would slow the tests massively and so might that cause problems for
   CRAN?

Does anyone have any advice as to which of the above would be the best
option, or who I should email directly about this?

Thank you for your help, and I apologise if I've missed some aspect of the
documentation that already explains how to solve this,

Will Pearse

---

Need a phylogeny? Try phyloGenerator: original
<http://willpearse.github.io/phyloGenerator/> or new version
<http://willpearse.github.io/phyloGenerator2/>
Measuring phylogenetic structure? Try install.packages('pez')

Will Pearse <http://www.pearselab.com/>
Assistant Professor of Biology, Utah State University
Office: +1-435-797-0831; Room LSB-333
Skype: will.pearse

	[[alternative HTML version deleted]]


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Tue Apr 16 20:06:29 2019
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 16 Apr 2019 11:06:29 -0700
Subject: [R-pkg-devel] 
 Submitting a package whose unit tests sometimes fail
 because of server connections
In-Reply-To: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>
References: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>
Message-ID: <CAJqTW45Abo2=mW_OBzcu24+isyW+8rr=qQcVD+5zftK_hAjXNA@mail.gmail.com>

I'd mock the tests you want run on Cran and keep live fire tests that you
can run manually.  Just don't include the live fire stuff in the package.

On Tue, Apr 16, 2019, 10:57 AM Will <will.pearse at gmail.com> wrote:

> Hello everyone,
>
> I'm sorry to bother you, but I would like some help getting a package (
> *suppdata*; https://github.com/ropensci/suppdata) available through CRAN.
> The package downloads supplementary materials from papers and data
> repositories on the basis of their DOI, making reproducible analyses a
> little easier to share and create.
>
> The package's unit tests involve downloading data, and when multiple
> requests for the same resource are sent from a single machine (as seems to
> be done by CRAN's testing servers) the data hosts will sometimes refuse the
> connection and so the package's tests will fail. I emphasise that the tests
> pass at Travis-CI (https://travis-ci.org/ropensci/suppdata) and OpenCPU (
> https://ropensci.ocpu.io/suppdata/info); I am confident this is a
> connection issue but I would be grateful to be shown I am wrong. I am not
> sure how to solve this problem, and was hoping you might have some advice.
> Some things I have considered include:
>
>
>    1. Skipping all unit tests on CRAN (using something like
>    *testtht::skip_on_cran*). This would immediately fix the problem, and as
>    a mitigating factor we report automated test result and coverage on the
>    package's GitHub page (https://github.com/ropensci/suppdata).
>    2. Using HTTP-mocking to avoid requiring a call to a server during tests
>    at all. I would be uncomfortable relying solely on this for all tests,
>    since if the data hosters changed things we wouldn't know. Thus I would
>    still want the Internet-enabled tests, which would also have to be
> turned
>    off for CRAN (see 1 above). This would also be a lot of additional work.
>    3. Somehow bypassing the requirement for the unit tests to all pass
>    before the package is checked by the CRAN maintainers. I have no idea if
>    this is something CRAN would be willing to do, or if it is even
> possible.
>    It would be the easiest option for me, but I don't want to create extra
>    work for other people!
>    4. Slowing the tests with something like *Sys.sleep*. This might work,
>    but would slow the tests massively and so might that cause problems for
>    CRAN?
>
> Does anyone have any advice as to which of the above would be the best
> option, or who I should email directly about this?
>
> Thank you for your help, and I apologise if I've missed some aspect of the
> documentation that already explains how to solve this,
>
> Will Pearse
>
> ---
>
> Need a phylogeny? Try phyloGenerator: original
> <http://willpearse.github.io/phyloGenerator/> or new version
> <http://willpearse.github.io/phyloGenerator2/>
> Measuring phylogenetic structure? Try install.packages('pez')
>
> Will Pearse <http://www.pearselab.com/>
> Assistant Professor of Biology, Utah State University
> Office: +1-435-797-0831; Room LSB-333
> Skype: will.pearse
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Apr 16 20:16:01 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 16 Apr 2019 13:16:01 -0500
Subject: [R-pkg-devel] 
 Submitting a package whose unit tests sometimes fail
 because of server connections
In-Reply-To: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>
References: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>
Message-ID: <23734.7137.360072.936547@rob.eddelbuettel.com>


On 16 April 2019 at 11:40, Will wrote:
| Some things I have considered include:
| 
|    1. Skipping all unit tests on CRAN (using something like
|    *testtht::skip_on_cran*). This would immediately fix the problem, and as
|    a mitigating factor we report automated test result and coverage on the
|    package's GitHub page (https://github.com/ropensci/suppdata).
|    2. Using HTTP-mocking to avoid requiring a call to a server during tests
|    at all. I would be uncomfortable relying solely on this for all tests,
|    since if the data hosters changed things we wouldn't know. Thus I would
|    still want the Internet-enabled tests, which would also have to be turned
|    off for CRAN (see 1 above). This would also be a lot of additional work.
|    3. Somehow bypassing the requirement for the unit tests to all pass
|    before the package is checked by the CRAN maintainers. I have no idea if
|    this is something CRAN would be willing to do, or if it is even possible.
|    It would be the easiest option for me, but I don't want to create extra
|    work for other people!
|    4. Slowing the tests with something like *Sys.sleep*. This might work,
|    but would slow the tests massively and so might that cause problems for
|    CRAN?
| 
| Does anyone have any advice as to which of the above would be the best
| option, or who I should email directly about this?

5. Run a hybrid scheme where you have multiple levels:

   5.1 Do what eg Rcpp does and only opt into 'all tests' when an overall
       variable is set; that variable can be set conveniently in .travis.yml
       and conditionally in your test runner below ~/tests/

       That way you can skip tests that would fail.

   5.2 Do a lot of work and wrap 3. above into try() / tryCatch() and pass
       if _your own aggregation of tests_ passes a threshold.

       Overkill to me.

   5.3 Turn all tests on / off based on some other toggle. I.e. I don't think
       I test all features of RcppRedis on CRAN as I can't assume a redis
       server, but I do run those tests at home, on Travis, ...

Overall, I would recommend to 'keep it simple & stupid' (KISS) as life is to
short to argue^Hdebate this with CRAN. And their time is too precious so we
should try to make their life easier.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |uc@r @end|ng |rom |edor@project@org  Tue Apr 16 20:20:20 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 16 Apr 2019 20:20:20 +0200
Subject: [R-pkg-devel] 
 Submitting a package whose unit tests sometimes fail
 because of server connections
In-Reply-To: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>
References: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>
Message-ID: <CALEXWq0u3hiOm9XM3UqCFsRKQ+81bMam0_BCiDdX=hzCfA3-oQ@mail.gmail.com>

On Tue, 16 Apr 2019 at 19:57, Will <will.pearse at gmail.com> wrote:
>
> Hello everyone,
>
> I'm sorry to bother you, but I would like some help getting a package (
> *suppdata*; https://github.com/ropensci/suppdata) available through CRAN.
> The package downloads supplementary materials from papers and data
> repositories on the basis of their DOI, making reproducible analyses a
> little easier to share and create.
>
> The package's unit tests involve downloading data, and when multiple
> requests for the same resource are sent from a single machine (as seems to
> be done by CRAN's testing servers) the data hosts will sometimes refuse the
> connection and so the package's tests will fail. I emphasise that the tests
> pass at Travis-CI (https://travis-ci.org/ropensci/suppdata) and OpenCPU (
> https://ropensci.ocpu.io/suppdata/info); I am confident this is a
> connection issue but I would be grateful to be shown I am wrong. I am not
> sure how to solve this problem, and was hoping you might have some advice.
> Some things I have considered include:
>
>
>    1. Skipping all unit tests on CRAN (using something like
>    *testtht::skip_on_cran*). This would immediately fix the problem, and as
>    a mitigating factor we report automated test result and coverage on the
>    package's GitHub page (https://github.com/ropensci/suppdata).

This doesn't seem a good idea.

>    2. Using HTTP-mocking to avoid requiring a call to a server during tests
>    at all. I would be uncomfortable relying solely on this for all tests,
>    since if the data hosters changed things we wouldn't know. Thus I would
>    still want the Internet-enabled tests, which would also have to be turned
>    off for CRAN (see 1 above). This would also be a lot of additional work.

What about mocking on CRAN and run Internet-enabled tests otherwise?

>    3. Somehow bypassing the requirement for the unit tests to all pass
>    before the package is checked by the CRAN maintainers. I have no idea if
>    this is something CRAN would be willing to do, or if it is even possible.
>    It would be the easiest option for me, but I don't want to create extra
>    work for other people!

I think it's acceptable to skip a test if something is not available,
but not the majority of them, for packages like this which basically
is about downloading stuff from APIs. Mocking on CRAN, as said before,
is the way to go here.

>    4. Slowing the tests with something like *Sys.sleep*. This might work,
>    but would slow the tests massively and so might that cause problems for
>    CRAN?

This is not a good idea either.

-- 
I?aki ?car


From t@nkchow12 @end|ng |rom gm@||@com  Tue Apr 16 20:54:25 2019
From: t@nkchow12 @end|ng |rom gm@||@com (Tan Zhou)
Date: Tue, 16 Apr 2019 13:54:25 -0500
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
In-Reply-To: <CALEXWq0zaAFUqh_8dDjDN81tDatvEA9i++UFObmb=nMsQb_e4Q@mail.gmail.com>
References: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
 <7efd2aec-8b82-1bb1-d353-f0a573859dac@daqana.com>
 <CACFKh4QdRKVCvMb+V2hfXNdsQVEXmaAbXwg9+UoJ6jxvqovacA@mail.gmail.com>
 <CALEXWq0zaAFUqh_8dDjDN81tDatvEA9i++UFObmb=nMsQb_e4Q@mail.gmail.com>
Message-ID: <CACFKh4Qr03aAf-vgH863m9T4K3MFZknfMz_2R0ADEUsLHWyRdQ@mail.gmail.com>

Hi I?aki and Ralf,
Thank you very much for your help and suggestions.
Yes, I followed instruction and did that. Now I have the
https://tankwin08.github.io/drat.
But I test

install.packages("rPeaks")
Installing package into ?C:/Users/tank/Documents/R/win-library/3.4?
(as ?lib? is unspecified)
Warning in install.packages :
  unable to access index for repository
https://tankwin08.github.io/drat/bin/windows/contrib/3.4:
  cannot open URL '
https://tankwin08.github.io/drat/bin/windows/contrib/3.4/PACKAGES'
Package which is only available in source form, and may need compilation of
C/C++/Fortran:
  ?rPeaks?
Do you want to attempt to install these from sources?

I can install it by typing y.

For check my package, I changed it like this:
Suggests:
    knitr,
rPeaks
Additional_repositories: https://tankwin08.github.io/drat

But I conduct check, it still gives me a note:
R CMD check results
0 errors | 0 warnings | 1 note
checking package dependencies ... NOTE
Package suggested but not available for checking: 'rPeaks'

I guess it still may relate to the drat.
Or any suggestions? I deeply appreciated your effort and time.

Best
Tan




On Tue, Apr 16, 2019 at 4:00 AM I?aki Ucar <iucar at fedoraproject.org> wrote:

> You could convince the original author to submit rPeaks to CRAN, or
> volunteer to be the maintainer and do it yourself if he doesn't want
> to maintain it. That would be easier for you and better for everyone,
> because the package would be well-checked under the watchful eye of
> CRAN maintainers. Otherwise, see below.
>
> On Tue, 16 Apr 2019 at 03:15, Tan Zhou <tankchow12 at gmail.com> wrote:
> >
> > Thank you very much for your suggestions and explanation, Ralf. They are
> > very helpful.
> > I got permission from the author and use *drat::addRepo("jrminter").*
> >
> > *When I try to test if this package can be installed with
> install.package*
> >
> > *install.packages("rPeaks", repos = "https://jrminter.github.io/drat/
> > <https://jrminter.github.io/drat/>", type = "source")Warning in
> > install.packages :  unable to access index for repository
> > https://tankwin08.github.io/drat/src/contrib
> > <https://tankwin08.github.io/drat/src/contrib>:  cannot open URL
> > 'https://tankwin08.github.io/drat/src/contrib/PACKAGES
> > <https://tankwin08.github.io/drat/src/contrib/PACKAGES>'Warning in
> > install.packages :  unable to access index for repository
> > https://jrminter.github.io/drat/src/contrib
> > <https://jrminter.github.io/drat/src/contrib>:  cannot open URL
> > 'https://jrminter.github.io/drat/src/contrib/PACKAGES
> > <https://jrminter.github.io/drat/src/contrib/PACKAGES>'Installing
> package
> > into ?C:/Users/tank/Documents/R/win-library/3.4?(as ?lib? is
> > unspecified)Warning in install.packages :  unable to access index for
> > repository https://jrminter.github.io/drat/src/contrib
> > <https://jrminter.github.io/drat/src/contrib>:  cannot open URL
> > 'https://jrminter.github.io/drat/src/contrib/PACKAGES
> > <https://jrminter.github.io/drat/src/contrib/PACKAGES>'Warning in
> > install.packages :  package ?rPeaks? is not available (for R version
> 3.4.3)*
> >
> > *Do you have any suggestion? *
>
> I see nothing in https://jrminter.github.io/drat or
> https://tankwin08.github.io/drat. First of all, someone (the author or
> you in his behalf) has to setup a drat repo, so please read and follow
> the guide for package authors:
>
>
> https://cran.r-project.org/web/packages/drat/vignettes/DratForPackageAuthors.html
>
> After you setup such a repo (if the original author didn't want to do
> it by himself and gave his permission) in your GitHub account and push
> jrminter's package, you should be able to do the following:
>
> drat::addRepo("tankwin08")
> install.packages("rPeaks")
>
> and that's it. So finally, you can add
>
> Additional_repositories: https://tankwin08.github.io/drat
>
> to your DESCRIPTION file.
>
> --
> I?aki ?car
>


-- 

Best regards

Tan Zhou

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Tue Apr 16 21:13:44 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 16 Apr 2019 21:13:44 +0200
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
In-Reply-To: <CACFKh4Qr03aAf-vgH863m9T4K3MFZknfMz_2R0ADEUsLHWyRdQ@mail.gmail.com>
References: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
 <7efd2aec-8b82-1bb1-d353-f0a573859dac@daqana.com>
 <CACFKh4QdRKVCvMb+V2hfXNdsQVEXmaAbXwg9+UoJ6jxvqovacA@mail.gmail.com>
 <CALEXWq0zaAFUqh_8dDjDN81tDatvEA9i++UFObmb=nMsQb_e4Q@mail.gmail.com>
 <CACFKh4Qr03aAf-vgH863m9T4K3MFZknfMz_2R0ADEUsLHWyRdQ@mail.gmail.com>
Message-ID: <CALEXWq2szw7_mn7tqCB=51SreCep3TrMm6gPtBffski6ODZ3dg@mail.gmail.com>

On Tue, 16 Apr 2019 at 20:54, Tan Zhou <tankchow12 at gmail.com> wrote:
>
> Hi I?aki and Ralf,
> Thank you very much for your help and suggestions.
> Yes, I followed instruction and did that. Now I have the https://tankwin08.github.io/drat.
> But I test
>
> install.packages("rPeaks")
> Installing package into ?C:/Users/tank/Documents/R/win-library/3.4?
> (as ?lib? is unspecified)
> Warning in install.packages :
>   unable to access index for repository https://tankwin08.github.io/drat/bin/windows/contrib/3.4:
>   cannot open URL 'https://tankwin08.github.io/drat/bin/windows/contrib/3.4/PACKAGES'
> Package which is only available in source form, and may need compilation of C/C++/Fortran:
>   ?rPeaks?
> Do you want to attempt to install these from sources?
>
> I can install it by typing y.
>
> For check my package, I changed it like this:
> Suggests:
>     knitr,
> rPeaks
> Additional_repositories: https://tankwin08.github.io/drat
>
> But I conduct check, it still gives me a note:
> R CMD check results
> 0 errors | 0 warnings | 1 note
> checking package dependencies ... NOTE
> Package suggested but not available for checking: 'rPeaks'

You still need to install it in your computer to check it locally, as
with any other dependency.

-- 
I?aki ?car


From r@||@@tubner @end|ng |rom d@q@n@@com  Tue Apr 16 22:51:53 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Tue, 16 Apr 2019 22:51:53 +0200
Subject: [R-pkg-devel] Package suggested but not available for checking:
 'rPeaks'; Additional_repositories
In-Reply-To: <CACFKh4Qr03aAf-vgH863m9T4K3MFZknfMz_2R0ADEUsLHWyRdQ@mail.gmail.com>
References: <CACFKh4TimqE9R3poOPR+-m7=K2BkZfsfaDhnsNGtvVAeNCbwFg@mail.gmail.com>
 <7efd2aec-8b82-1bb1-d353-f0a573859dac@daqana.com>
 <CACFKh4QdRKVCvMb+V2hfXNdsQVEXmaAbXwg9+UoJ6jxvqovacA@mail.gmail.com>
 <CALEXWq0zaAFUqh_8dDjDN81tDatvEA9i++UFObmb=nMsQb_e4Q@mail.gmail.com>
 <CACFKh4Qr03aAf-vgH863m9T4K3MFZknfMz_2R0ADEUsLHWyRdQ@mail.gmail.com>
Message-ID: <7c6c40e8-4758-e0d0-0763-cb4e3ddced7a@daqana.com>

On 16.04.19 20:54, Tan Zhou wrote:
> But I conduct check, it still gives me a note:
> R CMD check results
> 0 errors | 0 warnings | 1 note?
> checking package dependencies ... NOTE
> Package suggested but not available for checking: 'rPeaks'
That NOTE is expected and will be there as long as rPeaks is not on
CRAN, c.f. https://cran.r-project.org/web/checks/check_results_swephR.html
One could argue that it's another reason to try to get rPeaks onto CRAN.

cheerio
ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190416/b27a8ebd/attachment.sig>

From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Apr 17 02:41:21 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 16 Apr 2019 17:41:21 -0700
Subject: Vignette timing out on test server
Message-ID: <2E99E29C-6801-488C-8CF5-D9C669EC17B7@noaa.gov>

Hi All:

The package I am trying to get ready for submission has a Vignette that does a number of data downloads and some complicate maps with satellite images.  While it knits on my computer,  on checks it times out.  I am looking for ways to speed it up,  but my question is, is  there a command or a way to profile a vignette as it knits to  have a record to see which chunks are using up how much time?

I realize CRAN only runs the vignette code to check that it runs, but it must have a time limit because I am consistently hitting time outs on test machines.  So ti would help me if I can identify where all the time is.

Thanks,

-Roy


**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From |uc@r @end|ng |rom |edor@project@org  Wed Apr 17 11:21:21 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 17 Apr 2019 11:21:21 +0200
Subject: [R-pkg-devel] Vignette timing out on test server
In-Reply-To: <mailman.3780.821.1555461691.8580.r-package-devel@r-project.org>
References: <mailman.3780.821.1555461691.8580.r-package-devel@r-project.org>
Message-ID: <CALEXWq2tRQYqfPw35Q80C=SR7gQsZAehFybNeDffT1fS3Kg+gg@mail.gmail.com>

On Wed, 17 Apr 2019 at 02:41, Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> To: "Ma?lle SALMON via R-package-devel" <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 16 Apr 2019 17:41:21 -0700
> Subject: Vignette timing out on test server
> Hi All:
>
> The package I am trying to get ready for submission has a Vignette that does a number of data downloads and some complicate maps with satellite images.  While it knits on my computer,  on checks it times out.  I am looking for ways to speed it up,  but my question is, is  there a command or a way to profile a vignette as it knits to  have a record to see which chunks are using up how much time?
>
> I realize CRAN only runs the vignette code to check that it runs, but it must have a time limit because I am consistently hitting time outs on test machines.  So ti would help me if I can identify where all the time is.

There you go:

https://stackoverflow.com/questions/24595280/timing-for-chunks
https://stackoverflow.com/questions/30530008/hook-to-time-knitr-chunks

-- 
I?aki ?car


From pg||bert902 @end|ng |rom gm@||@com  Wed Apr 17 15:55:13 2019
From: pg||bert902 @end|ng |rom gm@||@com (Paul Gilbert)
Date: Wed, 17 Apr 2019 09:55:13 -0400
Subject: [R-pkg-devel] 
 Submitting a package whose unit tests sometimes fail
 because of server connections
In-Reply-To: <23734.7137.360072.936547@rob.eddelbuettel.com>
References: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>
 <23734.7137.360072.936547@rob.eddelbuettel.com>
Message-ID: <e68c3bd4-b0ad-10ee-6afe-9627317de6ff@gmail.com>

5.4  In the spirit of simple & stupid you can also use the built in 
mechanism for doing this: organize some of your tests in subdirectories 
like inst/testWithInternet, inst/veryLongTests, 
inst/testsNeedingLicence, inst/testsNeedingSpecialCluster, etc. CRAN 
will only run the tests in the tests/ directory, but you can check them 
yourself  using

R CMD check  --test-dir=inst/testWithInternet   whatever.tar.gz

 > In a separate response On 4/16/19 2:06 PM, Steven Scott wrote:
 >  Just don't include the live fire stuff in the package.

Please do not do this. If you omit tests from your package then it 
cannot be properly checked by other people.

Paul Gilbert

On 4/16/19 2:16 PM, Dirk Eddelbuettel wrote:
> 
> On 16 April 2019 at 11:40, Will wrote:
> | Some things I have considered include:
> |
> |    1. Skipping all unit tests on CRAN (using something like
> |    *testtht::skip_on_cran*). This would immediately fix the problem, and as
> |    a mitigating factor we report automated test result and coverage on the
> |    package's GitHub page (https://github.com/ropensci/suppdata).
> |    2. Using HTTP-mocking to avoid requiring a call to a server during tests
> |    at all. I would be uncomfortable relying solely on this for all tests,
> |    since if the data hosters changed things we wouldn't know. Thus I would
> |    still want the Internet-enabled tests, which would also have to be turned
> |    off for CRAN (see 1 above). This would also be a lot of additional work.
> |    3. Somehow bypassing the requirement for the unit tests to all pass
> |    before the package is checked by the CRAN maintainers. I have no idea if
> |    this is something CRAN would be willing to do, or if it is even possible.
> |    It would be the easiest option for me, but I don't want to create extra
> |    work for other people!
> |    4. Slowing the tests with something like *Sys.sleep*. This might work,
> |    but would slow the tests massively and so might that cause problems for
> |    CRAN?
> |
> | Does anyone have any advice as to which of the above would be the best
> | option, or who I should email directly about this?
> 
> 5. Run a hybrid scheme where you have multiple levels:
> 
>     5.1 Do what eg Rcpp does and only opt into 'all tests' when an overall
>         variable is set; that variable can be set conveniently in .travis.yml
>         and conditionally in your test runner below ~/tests/
> 
>         That way you can skip tests that would fail.
> 
>     5.2 Do a lot of work and wrap 3. above into try() / tryCatch() and pass
>         if _your own aggregation of tests_ passes a threshold.
> 
>         Overkill to me.
> 
>     5.3 Turn all tests on / off based on some other toggle. I.e. I don't think
>         I test all features of RcppRedis on CRAN as I can't assume a redis
>         server, but I do run those tests at home, on Travis, ...
> 
> Overall, I would recommend to 'keep it simple & stupid' (KISS) as life is to
> short to argue^Hdebate this with CRAN. And their time is too precious so we
> should try to make their life easier.
> 
> Dirk
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Apr 17 16:32:06 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 17 Apr 2019 07:32:06 -0700
Subject: [R-pkg-devel] Vignette timing out on test server
In-Reply-To: <CALEXWq2tRQYqfPw35Q80C=SR7gQsZAehFybNeDffT1fS3Kg+gg@mail.gmail.com>
References: <mailman.3780.821.1555461691.8580.r-package-devel@r-project.org>
 <CALEXWq2tRQYqfPw35Q80C=SR7gQsZAehFybNeDffT1fS3Kg+gg@mail.gmail.com>
Message-ID: <EC4FB7BF-5AE7-4EA1-AE48-DADF6EDD255F@noaa.gov>

Thanks muchly.  That looks like I what I was after.  otherwise I was going to have to put tictoc on each chunk.

-Roy

> On Apr 17, 2019, at 2:21 AM, I?aki Ucar <iucar at fedoraproject.org> wrote:
> 
> On Wed, 17 Apr 2019 at 02:41, Roy Mendelssohn - NOAA Federal via
> R-package-devel <r-package-devel at r-project.org> wrote:
>> ---------- Forwarded message ----------
>> From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
>> To: "Ma?lle SALMON via R-package-devel" <r-package-devel at r-project.org>
>> Cc:
>> Bcc:
>> Date: Tue, 16 Apr 2019 17:41:21 -0700
>> Subject: Vignette timing out on test server
>> Hi All:
>> 
>> The package I am trying to get ready for submission has a Vignette that does a number of data downloads and some complicate maps with satellite images.  While it knits on my computer,  on checks it times out.  I am looking for ways to speed it up,  but my question is, is  there a command or a way to profile a vignette as it knits to  have a record to see which chunks are using up how much time?
>> 
>> I realize CRAN only runs the vignette code to check that it runs, but it must have a time limit because I am consistently hitting time outs on test machines.  So ti would help me if I can identify where all the time is.
> 
> There you go:
> 
> https://stackoverflow.com/questions/24595280/timing-for-chunks
> https://stackoverflow.com/questions/30530008/hook-to-time-knitr-chunks
> 
> -- 
> I?aki ?car

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From boennecd @end|ng |rom gm@||@com  Wed Apr 17 20:06:23 2019
From: boennecd @end|ng |rom gm@||@com (Benjamin Christoffersen)
Date: Wed, 17 Apr 2019 11:06:23 -0700
Subject: [R-pkg-devel] dtrti2 error on CRAN checks
Message-ID: <CAHHSL8tKGOM_QTLcD+T9nwE=tXoXGYbHDwocDc5qpi7G6uPGuw@mail.gmail.com>

Dear Sirs,

Since the start of April, I have gotten some errors on the Debian
machines on the check on CRAN for my package dynamichazard. The places
where I get the errors seems to come down to LAPACK's dtrtri routine.
I have tried to reproduce the error on Debian 18.04.2 with clang 8.0.0
but I cannot reproduce them.

The errors came suddenly and the tests passed before. I see similar
issues (I think) in the following package:
 - RcppHMM
 - BNPmix
 - themetagenomics
 - tidytext
 - stm

Any ideas what the error may be? Here is the relevant code parts for
one of the failed tests:
https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/for_tests.cpp#L216
https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/arma_BLAS_LAPACK.cpp#L26
https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/R_BLAS_LAPACK.cpp#L67

Sincerely yours,
Benjamin


From edd @end|ng |rom deb|@n@org  Wed Apr 17 20:38:35 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 17 Apr 2019 13:38:35 -0500
Subject: [R-pkg-devel] dtrti2 error on CRAN checks
In-Reply-To: <CAHHSL8tKGOM_QTLcD+T9nwE=tXoXGYbHDwocDc5qpi7G6uPGuw@mail.gmail.com>
References: <CAHHSL8tKGOM_QTLcD+T9nwE=tXoXGYbHDwocDc5qpi7G6uPGuw@mail.gmail.com>
Message-ID: <23735.29355.559651.301477@rob.eddelbuettel.com>


On 17 April 2019 at 11:06, Benjamin Christoffersen wrote:
| Since the start of April, I have gotten some errors on the Debian
| machines on the check on CRAN for my package dynamichazard. The places
| where I get the errors seems to come down to LAPACK's dtrtri routine.
| I have tried to reproduce the error on Debian 18.04.2 with clang 8.0.0
| but I cannot reproduce them.
| 
| The errors came suddenly and the tests passed before. I see similar
| issues (I think) in the following package:
|  - RcppHMM
|  - BNPmix
|  - themetagenomics
|  - tidytext
|  - stm
| 
| Any ideas what the error may be? Here is the relevant code parts for
| one of the failed tests:
| https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/for_tests.cpp#L216
| https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/arma_BLAS_LAPACK.cpp#L26
| https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/R_BLAS_LAPACK.cpp#L67

There are four or more different sources of LAPACK and BLAS on Debian as we
(since the late 1990s !!)  utilize the nature of the _interface_ allowing
different packages to fill in.

So there could be
  i)   the R internal source with a partial library -- Fedora/CentOS use this
       but the Debian distro builds do not
  ii)  "reference BLAS", external, unoptimized
  iii) OpenBLAS, the successor to Goto, parallel via multithreading
  iv)  Atlas, "tuned" but not mulitthreading
and more as eg Intel MKL via a quick script (see my blog).

As a historical aside, and way-back-when, ii) earned us year's long growling
from the direction of Oxfordshire because some early/old versions of LAPACK
had bugs.  But it cuts both ways: the external versions tend to be complete
whereas what R ships with internally contains a subset -- and at least one
(early) user of RcppArmadillo was bitten when R built from sources using
defaults would not have the complex operations he needed. To R Core's credit
these missing functions got filled in over the years.

In short, you need to look more closely. On the Ubuntu 18.10 machine that I
type this on, sessionInfo()'s second paragraph has

  Matrix products: default
  BLAS: /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
  LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.3.so

which IIRC is also the default (via some Debian/Ubuntu internal 'ordering' of
the available alternatives).

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From boennecd @end|ng |rom gm@||@com  Thu Apr 18 07:53:21 2019
From: boennecd @end|ng |rom gm@||@com (Benjamin Christoffersen)
Date: Wed, 17 Apr 2019 22:53:21 -0700
Subject: [R-pkg-devel] dtrti2 error on CRAN checks
In-Reply-To: <23735.29355.559651.301477@rob.eddelbuettel.com>
References: <CAHHSL8tKGOM_QTLcD+T9nwE=tXoXGYbHDwocDc5qpi7G6uPGuw@mail.gmail.com>
 <23735.29355.559651.301477@rob.eddelbuettel.com>
Message-ID: <CAHHSL8tUC=US6=64mo12Twp4C0c5+BRJ+mqqnVuFb2e8hNuWVw@mail.gmail.com>

Thanks for the quick reply. First a correction. I meant Ubuntu 18.04.2
of course, sorry.

> In short, you need to look more closely.
Is there a way to tell which BLAS and LAPACK is used on the Debian
machines on CRAN? I checked the "CRAN Package Check Flavors" page but
there is no information there regarding BLAS or LAPACK.

I have tried to test the package with Atlas, OpenBlas, and the
reference implementation with gcc 7.3.0 and 8.2.0. It all worked
without any errors.

It seems that gcc has changed since January from version 8.2.0 and
7.3.0 to 8.3.0 on the tests on CRAN. Further, it is now Debian version
8.3.0-2 instead of Debian 8.2.0-7 and Debian 7.3.0-29. I do not know
whether this can matter.

Sincerely yours,
Benjamin Christoffersen







Den ons. 17. apr. 2019 kl. 11.38 skrev Dirk Eddelbuettel <edd at debian.org>:
>
>
> On 17 April 2019 at 11:06, Benjamin Christoffersen wrote:
> | Since the start of April, I have gotten some errors on the Debian
> | machines on the check on CRAN for my package dynamichazard. The places
> | where I get the errors seems to come down to LAPACK's dtrtri routine.
> | I have tried to reproduce the error on Debian 18.04.2 with clang 8.0.0
> | but I cannot reproduce them.
> |
> | The errors came suddenly and the tests passed before. I see similar
> | issues (I think) in the following package:
> |  - RcppHMM
> |  - BNPmix
> |  - themetagenomics
> |  - tidytext
> |  - stm
> |
> | Any ideas what the error may be? Here is the relevant code parts for
> | one of the failed tests:
> | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/for_tests.cpp#L216
> | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/arma_BLAS_LAPACK.cpp#L26
> | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/R_BLAS_LAPACK.cpp#L67
>
> There are four or more different sources of LAPACK and BLAS on Debian as we
> (since the late 1990s !!)  utilize the nature of the _interface_ allowing
> different packages to fill in.
>
> So there could be
>   i)   the R internal source with a partial library -- Fedora/CentOS use this
>        but the Debian distro builds do not
>   ii)  "reference BLAS", external, unoptimized
>   iii) OpenBLAS, the successor to Goto, parallel via multithreading
>   iv)  Atlas, "tuned" but not mulitthreading
> and more as eg Intel MKL via a quick script (see my blog).
>
> As a historical aside, and way-back-when, ii) earned us year's long growling
> from the direction of Oxfordshire because some early/old versions of LAPACK
> had bugs.  But it cuts both ways: the external versions tend to be complete
> whereas what R ships with internally contains a subset -- and at least one
> (early) user of RcppArmadillo was bitten when R built from sources using
> defaults would not have the complex operations he needed. To R Core's credit
> these missing functions got filled in over the years.
>
> In short, you need to look more closely. On the Ubuntu 18.10 machine that I
> type this on, sessionInfo()'s second paragraph has
>
>   Matrix products: default
>   BLAS: /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>   LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.3.so
>
> which IIRC is also the default (via some Debian/Ubuntu internal 'ordering' of
> the available alternatives).
>
> Hth, Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |uc@r @end|ng |rom |edor@project@org  Thu Apr 18 11:12:59 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 18 Apr 2019 11:12:59 +0200
Subject: [R-pkg-devel] dtrti2 error on CRAN checks
In-Reply-To: <CAHHSL8tUC=US6=64mo12Twp4C0c5+BRJ+mqqnVuFb2e8hNuWVw@mail.gmail.com>
References: <CAHHSL8tKGOM_QTLcD+T9nwE=tXoXGYbHDwocDc5qpi7G6uPGuw@mail.gmail.com>
 <23735.29355.559651.301477@rob.eddelbuettel.com>
 <CAHHSL8tUC=US6=64mo12Twp4C0c5+BRJ+mqqnVuFb2e8hNuWVw@mail.gmail.com>
Message-ID: <CALEXWq2b++BykcmqbgJGf21B56H-BxrMumsZQnpa6pSRMRxiXA@mail.gmail.com>

Benjamin, did you try with rhub? G?bor makes a great effort there to
keep it up to date with CRAN machines. And even if you still are not
able to reproduce it with the current config, you could try to modify
the docker file yourself.

I?aki

On Thu, 18 Apr 2019 at 07:53, Benjamin Christoffersen
<boennecd at gmail.com> wrote:
>
> Thanks for the quick reply. First a correction. I meant Ubuntu 18.04.2
> of course, sorry.
>
> > In short, you need to look more closely.
> Is there a way to tell which BLAS and LAPACK is used on the Debian
> machines on CRAN? I checked the "CRAN Package Check Flavors" page but
> there is no information there regarding BLAS or LAPACK.
>
> I have tried to test the package with Atlas, OpenBlas, and the
> reference implementation with gcc 7.3.0 and 8.2.0. It all worked
> without any errors.
>
> It seems that gcc has changed since January from version 8.2.0 and
> 7.3.0 to 8.3.0 on the tests on CRAN. Further, it is now Debian version
> 8.3.0-2 instead of Debian 8.2.0-7 and Debian 7.3.0-29. I do not know
> whether this can matter.
>
> Sincerely yours,
> Benjamin Christoffersen
>
>
>
>
>
>
>
> Den ons. 17. apr. 2019 kl. 11.38 skrev Dirk Eddelbuettel <edd at debian.org>:
> >
> >
> > On 17 April 2019 at 11:06, Benjamin Christoffersen wrote:
> > | Since the start of April, I have gotten some errors on the Debian
> > | machines on the check on CRAN for my package dynamichazard. The places
> > | where I get the errors seems to come down to LAPACK's dtrtri routine.
> > | I have tried to reproduce the error on Debian 18.04.2 with clang 8.0.0
> > | but I cannot reproduce them.
> > |
> > | The errors came suddenly and the tests passed before. I see similar
> > | issues (I think) in the following package:
> > |  - RcppHMM
> > |  - BNPmix
> > |  - themetagenomics
> > |  - tidytext
> > |  - stm
> > |
> > | Any ideas what the error may be? Here is the relevant code parts for
> > | one of the failed tests:
> > | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/for_tests.cpp#L216
> > | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/arma_BLAS_LAPACK.cpp#L26
> > | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/R_BLAS_LAPACK.cpp#L67
> >
> > There are four or more different sources of LAPACK and BLAS on Debian as we
> > (since the late 1990s !!)  utilize the nature of the _interface_ allowing
> > different packages to fill in.
> >
> > So there could be
> >   i)   the R internal source with a partial library -- Fedora/CentOS use this
> >        but the Debian distro builds do not
> >   ii)  "reference BLAS", external, unoptimized
> >   iii) OpenBLAS, the successor to Goto, parallel via multithreading
> >   iv)  Atlas, "tuned" but not mulitthreading
> > and more as eg Intel MKL via a quick script (see my blog).
> >
> > As a historical aside, and way-back-when, ii) earned us year's long growling
> > from the direction of Oxfordshire because some early/old versions of LAPACK
> > had bugs.  But it cuts both ways: the external versions tend to be complete
> > whereas what R ships with internally contains a subset -- and at least one
> > (early) user of RcppArmadillo was bitten when R built from sources using
> > defaults would not have the complex operations he needed. To R Core's credit
> > these missing functions got filled in over the years.
> >
> > In short, you need to look more closely. On the Ubuntu 18.10 machine that I
> > type this on, sessionInfo()'s second paragraph has
> >
> >   Matrix products: default
> >   BLAS: /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> >   LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.3.so
> >
> > which IIRC is also the default (via some Debian/Ubuntu internal 'ordering' of
> > the available alternatives).
> >
> > Hth, Dirk
> >
> > --
> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From r@||@@tubner @end|ng |rom d@q@n@@com  Thu Apr 18 17:05:01 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Thu, 18 Apr 2019 17:05:01 +0200
Subject: [R-pkg-devel] dtrti2 error on CRAN checks
In-Reply-To: <CAHHSL8tUC=US6=64mo12Twp4C0c5+BRJ+mqqnVuFb2e8hNuWVw@mail.gmail.com>
References: <CAHHSL8tKGOM_QTLcD+T9nwE=tXoXGYbHDwocDc5qpi7G6uPGuw@mail.gmail.com>
 <23735.29355.559651.301477@rob.eddelbuettel.com>
 <CAHHSL8tUC=US6=64mo12Twp4C0c5+BRJ+mqqnVuFb2e8hNuWVw@mail.gmail.com>
Message-ID: <5e05a848-f41b-3084-8df9-b062b6885254@daqana.com>

On 18.04.19 07:53, Benjamin Christoffersen wrote:
>> In short, you need to look more closely.
> Is there a way to tell which BLAS and LAPACK is used on the Debian
> machines on CRAN?

I am sure CRAN machines use BLAS and LAPACK as shipped with R, i.e. not
*any* variant of system BLAS/LAPACK.

cheerio
ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190418/cd88919a/attachment.sig>

From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Thu Apr 18 19:37:40 2019
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Thu, 18 Apr 2019 10:37:40 -0700
Subject: [R-pkg-devel] long file names in tar
Message-ID: <CAJqTW46e7Zn_YyUfShbZjM6Od5=8W4AZ7TtSEgG1Z_8Xu-9J1w@mail.gmail.com>

My Boom package makes a C++ library available to package authors (mainly
me).  The wrapped library is used outside of R and must comply with
external style rules such as UseLongDescriptiveNames, and files must be
named for the class they contain.  From time to time a
LongDescriptiveFileName, when paired with its full directory path, exceeds
100 characters.

This creates a conflict with CRAN's rules about long file names, which
stems from tar.  I'm wondering what this community thinks about asking for
that rule to be relaxed.  Both gnu tar and posix tar now allow unlimited
length filenames, and the ustar format allows names up to 256 characters.

I'm interested in the opinions of people on this list about whether this
rule has outlived its usefulness.  Thanks.

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Apr 18 19:54:20 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 18 Apr 2019 12:54:20 -0500
Subject: [R-pkg-devel] long file names in tar
In-Reply-To: <CAJqTW46e7Zn_YyUfShbZjM6Od5=8W4AZ7TtSEgG1Z_8Xu-9J1w@mail.gmail.com>
References: <CAJqTW46e7Zn_YyUfShbZjM6Od5=8W4AZ7TtSEgG1Z_8Xu-9J1w@mail.gmail.com>
Message-ID: <23736.47564.661398.854465@rob.eddelbuettel.com>


On 18 April 2019 at 10:37, Steven Scott wrote:
| My Boom package makes a C++ library available to package authors (mainly
| me).  The wrapped library is used outside of R and must comply with
| external style rules such as UseLongDescriptiveNames, and files must be
| named for the class they contain.  From time to time a
| LongDescriptiveFileName, when paired with its full directory path, exceeds
| 100 characters.
| 
| This creates a conflict with CRAN's rules about long file names, which
| stems from tar.  I'm wondering what this community thinks about asking for
| that rule to be relaxed.  Both gnu tar and posix tar now allow unlimited
| length filenames, and the ustar format allows names up to 256 characters.
| 
| I'm interested in the opinions of people on this list about whether this
| rule has outlived its usefulness.  Thanks.

There are no "opinions". There is CRAN Repo Policy.

The BH package your Boom depends upon is actually named BH in part because
having a two-letter name shrunk the set of files violating this very
constraint.  Yet at every release I still get to renamed one file, and update
one include statement.  All documented in the ChangeLog.

So I would change the filenames, and move on.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Thu Apr 18 20:02:15 2019
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Thu, 18 Apr 2019 11:02:15 -0700
Subject: [R-pkg-devel] long file names in tar
In-Reply-To: <23736.47564.661398.854465@rob.eddelbuettel.com>
References: <CAJqTW46e7Zn_YyUfShbZjM6Od5=8W4AZ7TtSEgG1Z_8Xu-9J1w@mail.gmail.com>
 <23736.47564.661398.854465@rob.eddelbuettel.com>
Message-ID: <CAJqTW47=T+4QymjtEZtJZUg+U4N7RyhNFn=7=Attp86QjUOs9Q@mail.gmail.com>

Thanks Dirk,
Yes, I've done the same, and I agree the rules are the rules.  Rules should
be updated when they're no longer helpful, or when their cost outweighs
their benefit.  I'm curious whether that might be the case here.
Cheers,
Steve


On Thu, Apr 18, 2019 at 10:54 AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 18 April 2019 at 10:37, Steven Scott wrote:
> | My Boom package makes a C++ library available to package authors (mainly
> | me).  The wrapped library is used outside of R and must comply with
> | external style rules such as UseLongDescriptiveNames, and files must be
> | named for the class they contain.  From time to time a
> | LongDescriptiveFileName, when paired with its full directory path,
> exceeds
> | 100 characters.
> |
> | This creates a conflict with CRAN's rules about long file names, which
> | stems from tar.  I'm wondering what this community thinks about asking
> for
> | that rule to be relaxed.  Both gnu tar and posix tar now allow unlimited
> | length filenames, and the ustar format allows names up to 256 characters.
> |
> | I'm interested in the opinions of people on this list about whether this
> | rule has outlived its usefulness.  Thanks.
>
> There are no "opinions". There is CRAN Repo Policy.
>
> The BH package your Boom depends upon is actually named BH in part because
> having a two-letter name shrunk the set of files violating this very
> constraint.  Yet at every release I still get to renamed one file, and
> update
> one include statement.  All documented in the ChangeLog.
>
> So I would change the filenames, and move on.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Apr 18 20:30:22 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 18 Apr 2019 11:30:22 -0700
Subject: [R-pkg-devel] long file names in tar
In-Reply-To: <CAJqTW47=T+4QymjtEZtJZUg+U4N7RyhNFn=7=Attp86QjUOs9Q@mail.gmail.com>
References: <CAJqTW46e7Zn_YyUfShbZjM6Od5=8W4AZ7TtSEgG1Z_8Xu-9J1w@mail.gmail.com>
 <23736.47564.661398.854465@rob.eddelbuettel.com>
 <CAJqTW47=T+4QymjtEZtJZUg+U4N7RyhNFn=7=Attp86QjUOs9Q@mail.gmail.com>
Message-ID: <6E9C026C-5713-40B1-98C6-60391ADFB540@dcn.davis.ca.us>

You could go down this rabbit hole if you like, but I suspect it has something to do with maintaining compatibility with multiple operating systems and I doubt R Core will explore the consequences of this change for you. Windows, for example, allows long file names but has some nasty corners that break if your  total path+filename is 260+ characters and packages do get installed in directories fairly deep into the directory structure on a regular basis (e.g. packrat). Other tools that the R ecosystem depends on could also have internal constraints that come up when one tool builds on another and so on.

Have fun with that!

On April 18, 2019 11:02:15 AM PDT, Steven Scott <steve.the.bayesian at gmail.com> wrote:
>Thanks Dirk,
>Yes, I've done the same, and I agree the rules are the rules.  Rules
>should
>be updated when they're no longer helpful, or when their cost outweighs
>their benefit.  I'm curious whether that might be the case here.
>Cheers,
>Steve
>
>
>On Thu, Apr 18, 2019 at 10:54 AM Dirk Eddelbuettel <edd at debian.org>
>wrote:
>
>>
>> On 18 April 2019 at 10:37, Steven Scott wrote:
>> | My Boom package makes a C++ library available to package authors
>(mainly
>> | me).  The wrapped library is used outside of R and must comply with
>> | external style rules such as UseLongDescriptiveNames, and files
>must be
>> | named for the class they contain.  From time to time a
>> | LongDescriptiveFileName, when paired with its full directory path,
>> exceeds
>> | 100 characters.
>> |
>> | This creates a conflict with CRAN's rules about long file names,
>which
>> | stems from tar.  I'm wondering what this community thinks about
>asking
>> for
>> | that rule to be relaxed.  Both gnu tar and posix tar now allow
>unlimited
>> | length filenames, and the ustar format allows names up to 256
>characters.
>> |
>> | I'm interested in the opinions of people on this list about whether
>this
>> | rule has outlived its usefulness.  Thanks.
>>
>> There are no "opinions". There is CRAN Repo Policy.
>>
>> The BH package your Boom depends upon is actually named BH in part
>because
>> having a two-letter name shrunk the set of files violating this very
>> constraint.  Yet at every release I still get to renamed one file,
>and
>> update
>> one include statement.  All documented in the ChangeLog.
>>
>> So I would change the filenames, and move on.
>>
>> Dirk
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From pd@|gd @end|ng |rom gm@||@com  Fri Apr 19 11:15:55 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Fri, 19 Apr 2019 11:15:55 +0200
Subject: [R-pkg-devel] dtrti2 error on CRAN checks
In-Reply-To: <CAHHSL8tUC=US6=64mo12Twp4C0c5+BRJ+mqqnVuFb2e8hNuWVw@mail.gmail.com>
References: <CAHHSL8tKGOM_QTLcD+T9nwE=tXoXGYbHDwocDc5qpi7G6uPGuw@mail.gmail.com>
 <23735.29355.559651.301477@rob.eddelbuettel.com>
 <CAHHSL8tUC=US6=64mo12Twp4C0c5+BRJ+mqqnVuFb2e8hNuWVw@mail.gmail.com>
Message-ID: <C1F735F2-FE5D-46E9-A07C-EA636F5547A8@gmail.com>

Kurt Hornik submitted a bug report to the gfortran maintainers yesterday, and yes, it seems to have a lot to do with this.

He and Brian Ripley have been able to pinpoint it to certain gfortran revisions (specifically gfortran-9 at least r268992, or gfortran-8 at least r269349), but we're lacking a simple test case.

-pd

> On 18 Apr 2019, at 07:53 , Benjamin Christoffersen <boennecd at gmail.com> wrote:
> 
> Thanks for the quick reply. First a correction. I meant Ubuntu 18.04.2
> of course, sorry.
> 
>> In short, you need to look more closely.
> Is there a way to tell which BLAS and LAPACK is used on the Debian
> machines on CRAN? I checked the "CRAN Package Check Flavors" page but
> there is no information there regarding BLAS or LAPACK.
> 
> I have tried to test the package with Atlas, OpenBlas, and the
> reference implementation with gcc 7.3.0 and 8.2.0. It all worked
> without any errors.
> 
> It seems that gcc has changed since January from version 8.2.0 and
> 7.3.0 to 8.3.0 on the tests on CRAN. Further, it is now Debian version
> 8.3.0-2 instead of Debian 8.2.0-7 and Debian 7.3.0-29. I do not know
> whether this can matter.
> 
> Sincerely yours,
> Benjamin Christoffersen
> 
> 
> 
> 
> 
> 
> 
> Den ons. 17. apr. 2019 kl. 11.38 skrev Dirk Eddelbuettel <edd at debian.org>:
>> 
>> 
>> On 17 April 2019 at 11:06, Benjamin Christoffersen wrote:
>> | Since the start of April, I have gotten some errors on the Debian
>> | machines on the check on CRAN for my package dynamichazard. The places
>> | where I get the errors seems to come down to LAPACK's dtrtri routine.
>> | I have tried to reproduce the error on Debian 18.04.2 with clang 8.0.0
>> | but I cannot reproduce them.
>> |
>> | The errors came suddenly and the tests passed before. I see similar
>> | issues (I think) in the following package:
>> |  - RcppHMM
>> |  - BNPmix
>> |  - themetagenomics
>> |  - tidytext
>> |  - stm
>> |
>> | Any ideas what the error may be? Here is the relevant code parts for
>> | one of the failed tests:
>> | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/for_tests.cpp#L216
>> | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/arma_BLAS_LAPACK.cpp#L26
>> | https://github.com/boennecd/dynamichazard/blob/c42105feea5e2d16a8d461b7c606245a743b3e0a/src/BLAS_LAPACK/R_BLAS_LAPACK.cpp#L67
>> 
>> There are four or more different sources of LAPACK and BLAS on Debian as we
>> (since the late 1990s !!)  utilize the nature of the _interface_ allowing
>> different packages to fill in.
>> 
>> So there could be
>>  i)   the R internal source with a partial library -- Fedora/CentOS use this
>>       but the Debian distro builds do not
>>  ii)  "reference BLAS", external, unoptimized
>>  iii) OpenBLAS, the successor to Goto, parallel via multithreading
>>  iv)  Atlas, "tuned" but not mulitthreading
>> and more as eg Intel MKL via a quick script (see my blog).
>> 
>> As a historical aside, and way-back-when, ii) earned us year's long growling
>> from the direction of Oxfordshire because some early/old versions of LAPACK
>> had bugs.  But it cuts both ways: the external versions tend to be complete
>> whereas what R ships with internally contains a subset -- and at least one
>> (early) user of RcppArmadillo was bitten when R built from sources using
>> defaults would not have the complex operations he needed. To R Core's credit
>> these missing functions got filled in over the years.
>> 
>> In short, you need to look more closely. On the Ubuntu 18.10 machine that I
>> type this on, sessionInfo()'s second paragraph has
>> 
>>  Matrix products: default
>>  BLAS: /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>>  LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.3.so
>> 
>> which IIRC is also the default (via some Debian/Ubuntu internal 'ordering' of
>> the available alternatives).
>> 
>> Hth, Dirk
>> 
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From w|||@pe@r@e @end|ng |rom gm@||@com  Fri Apr 19 16:57:07 2019
From: w|||@pe@r@e @end|ng |rom gm@||@com (Will)
Date: Fri, 19 Apr 2019 08:57:07 -0600
Subject: [R-pkg-devel] 
 Submitting a package whose unit tests sometimes fail
 because of server connections
In-Reply-To: <CALEXWq0u3hiOm9XM3UqCFsRKQ+81bMam0_BCiDdX=hzCfA3-oQ@mail.gmail.com>
References: <CAJs-zoYKotX3vb9qDj4ELWHmOE_wtuyB1Mi_7qRY-NN8YT=m9A@mail.gmail.com>
 <CALEXWq0u3hiOm9XM3UqCFsRKQ+81bMam0_BCiDdX=hzCfA3-oQ@mail.gmail.com>
Message-ID: <CAJs-zoazdr56iy5auppHwFjNYMt58FdMpeNOBjEEsUrMLSS2mA@mail.gmail.com>

Hello everyone,

Thank you very much for your help with this! These are some excellent
ideas; I think we will go with either the mocking approach or a variant of
Dirk's suggestion to use a test threshold.

Thanks again!

Will

---

Need a phylogeny? Try phyloGenerator: original
<http://willpearse.github.io/phyloGenerator/> or new version
<http://willpearse.github.io/phyloGenerator2/>
Measuring phylogenetic structure? Try install.packages('pez')

Will Pearse <http://www.pearselab.com/>
Assistant Professor of Biology, Utah State University
Office: +1-435-797-0831; Room LSB-333
Skype: will.pearse


On Tue, 16 Apr 2019 at 12:20, I?aki Ucar <iucar at fedoraproject.org> wrote:

> On Tue, 16 Apr 2019 at 19:57, Will <will.pearse at gmail.com> wrote:
> >
> > Hello everyone,
> >
> > I'm sorry to bother you, but I would like some help getting a package (
> > *suppdata*; https://github.com/ropensci/suppdata) available through
> CRAN.
> > The package downloads supplementary materials from papers and data
> > repositories on the basis of their DOI, making reproducible analyses a
> > little easier to share and create.
> >
> > The package's unit tests involve downloading data, and when multiple
> > requests for the same resource are sent from a single machine (as seems
> to
> > be done by CRAN's testing servers) the data hosts will sometimes refuse
> the
> > connection and so the package's tests will fail. I emphasise that the
> tests
> > pass at Travis-CI (https://travis-ci.org/ropensci/suppdata) and OpenCPU
> (
> > https://ropensci.ocpu.io/suppdata/info); I am confident this is a
> > connection issue but I would be grateful to be shown I am wrong. I am not
> > sure how to solve this problem, and was hoping you might have some
> advice.
> > Some things I have considered include:
> >
> >
> >    1. Skipping all unit tests on CRAN (using something like
> >    *testtht::skip_on_cran*). This would immediately fix the problem, and
> as
> >    a mitigating factor we report automated test result and coverage on
> the
> >    package's GitHub page (https://github.com/ropensci/suppdata).
>
> This doesn't seem a good idea.
>
> >    2. Using HTTP-mocking to avoid requiring a call to a server during
> tests
> >    at all. I would be uncomfortable relying solely on this for all tests,
> >    since if the data hosters changed things we wouldn't know. Thus I
> would
> >    still want the Internet-enabled tests, which would also have to be
> turned
> >    off for CRAN (see 1 above). This would also be a lot of additional
> work.
>
> What about mocking on CRAN and run Internet-enabled tests otherwise?
>
> >    3. Somehow bypassing the requirement for the unit tests to all pass
> >    before the package is checked by the CRAN maintainers. I have no idea
> if
> >    this is something CRAN would be willing to do, or if it is even
> possible.
> >    It would be the easiest option for me, but I don't want to create
> extra
> >    work for other people!
>
> I think it's acceptable to skip a test if something is not available,
> but not the majority of them, for packages like this which basically
> is about downloading stuff from APIs. Mocking on CRAN, as said before,
> is the way to go here.
>
> >    4. Slowing the tests with something like *Sys.sleep*. This might work,
> >    but would slow the tests massively and so might that cause problems
> for
> >    CRAN?
>
> This is not a good idea either.
>
> --
> I?aki ?car
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Apr 21 17:45:49 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 21 Apr 2019 17:45:49 +0200
Subject: [R-pkg-devel] long file names in tar
In-Reply-To: <6E9C026C-5713-40B1-98C6-60391ADFB540@dcn.davis.ca.us>
References: <CAJqTW46e7Zn_YyUfShbZjM6Od5=8W4AZ7TtSEgG1Z_8Xu-9J1w@mail.gmail.com>
 <23736.47564.661398.854465@rob.eddelbuettel.com>
 <CAJqTW47=T+4QymjtEZtJZUg+U4N7RyhNFn=7=Attp86QjUOs9Q@mail.gmail.com>
 <6E9C026C-5713-40B1-98C6-60391ADFB540@dcn.davis.ca.us>
Message-ID: <c8daf783-1e27-c2dd-b682-90dda169fd30@statistik.tu-dortmund.de>

... or simply read the help for ?tar for a short discussion about 
standards and note R is still used on commercial Unixes that ship with 
very old versions of tar.

Best,
Uwe Ligges




On 18.04.2019 20:30, Jeff Newmiller wrote:
> You could go down this rabbit hole if you like, but I suspect it has something to do with maintaining compatibility with multiple operating systems and I doubt R Core will explore the consequences of this change for you. Windows, for example, allows long file names but has some nasty corners that break if your  total path+filename is 260+ characters and packages do get installed in directories fairly deep into the directory structure on a regular basis (e.g. packrat). Other tools that the R ecosystem depends on could also have internal constraints that come up when one tool builds on another and so on.
> 
> Have fun with that!
> 
> On April 18, 2019 11:02:15 AM PDT, Steven Scott <steve.the.bayesian at gmail.com> wrote:
>> Thanks Dirk,
>> Yes, I've done the same, and I agree the rules are the rules.  Rules
>> should
>> be updated when they're no longer helpful, or when their cost outweighs
>> their benefit.  I'm curious whether that might be the case here.
>> Cheers,
>> Steve
>>
>>
>> On Thu, Apr 18, 2019 at 10:54 AM Dirk Eddelbuettel <edd at debian.org>
>> wrote:
>>
>>>
>>> On 18 April 2019 at 10:37, Steven Scott wrote:
>>> | My Boom package makes a C++ library available to package authors
>> (mainly
>>> | me).  The wrapped library is used outside of R and must comply with
>>> | external style rules such as UseLongDescriptiveNames, and files
>> must be
>>> | named for the class they contain.  From time to time a
>>> | LongDescriptiveFileName, when paired with its full directory path,
>>> exceeds
>>> | 100 characters.
>>> |
>>> | This creates a conflict with CRAN's rules about long file names,
>> which
>>> | stems from tar.  I'm wondering what this community thinks about
>> asking
>>> for
>>> | that rule to be relaxed.  Both gnu tar and posix tar now allow
>> unlimited
>>> | length filenames, and the ustar format allows names up to 256
>> characters.
>>> |
>>> | I'm interested in the opinions of people on this list about whether
>> this
>>> | rule has outlived its usefulness.  Thanks.
>>>
>>> There are no "opinions". There is CRAN Repo Policy.
>>>
>>> The BH package your Boom depends upon is actually named BH in part
>> because
>>> having a two-letter name shrunk the set of files violating this very
>>> constraint.  Yet at every release I still get to renamed one file,
>> and
>>> update
>>> one include statement.  All documented in the ChangeLog.
>>>
>>> So I would change the filenames, and move on.
>>>
>>> Dirk
>>>
>>> --
>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From db|odgett @end|ng |rom u@g@@gov  Tue Apr 23 15:49:38 2019
From: db|odgett @end|ng |rom u@g@@gov (David Blodgett)
Date: Tue, 23 Apr 2019 08:49:38 -0500
Subject: CRAN Debian File Handling Differences?
Message-ID: <8C6CB33E-1AFF-4B30-A0BD-31EEB3EDA061@usgs.gov>

Dear R Package Development Community,

I'm working on some CRAN Debian test failures (https://win-builder.r-project.org/incoming_pretest/ncdfgeom_1.0.0_20190423_031452/). The tests all pass on rhub Debian, CRAN windows, local OSX, and Travis Ubuntu. The tests that are failing on CRAN Debian are ones where I check that changes got made to an existing file that is modified in place by my package code. 

Are there nuances of the CRAN environment that prevent a `tempfile()` file being created then modified at run time? What is a suggested best practice for such a test? 

I may just disable this set of tests on CRAN for the time being since it passes on so many environments, but want to do my due diligence and decrease fragility as much as possible.

Thanks for any guidance you can offer. 

Regards,

- Dave 

From |uc@r @end|ng |rom |edor@project@org  Tue Apr 23 17:16:21 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 23 Apr 2019 17:16:21 +0200
Subject: [R-pkg-devel] CRAN Debian File Handling Differences?
In-Reply-To: <mailman.3796.1101.1556027817.8580.r-package-devel@r-project.org>
References: <mailman.3796.1101.1556027817.8580.r-package-devel@r-project.org>
Message-ID: <CALEXWq30FRkaJsLA6wxC1FNLRLW=vAb4ACLGEphdUqWm=kKzGg@mail.gmail.com>

On Tue, 23 Apr 2019 at 15:57, David Blodgett via R-package-devel
<r-package-devel at r-project.org> wrote:
>
> I'm working on some CRAN Debian test failures (https://win-builder.r-project.org/incoming_pretest/ncdfgeom_1.0.0_20190423_031452/). The tests all pass on rhub Debian, CRAN windows, local OSX, and Travis Ubuntu. The tests that are failing on CRAN Debian are ones where I check that changes got made to an existing file that is modified in place by my package code.
>
> Are there nuances of the CRAN environment that prevent a `tempfile()` file being created then modified at run time? What is a suggested best practice for such a test?

According to the current master branch, the test that fails is not
using tempfile(), but "nc_file<-'data/test_output.nc'". Just change
that line with a call to tempfile and the test should pass.

-- 
I?aki ?car


From db|odgett @end|ng |rom u@g@@gov  Tue Apr 23 17:23:40 2019
From: db|odgett @end|ng |rom u@g@@gov (David Blodgett)
Date: Tue, 23 Apr 2019 10:23:40 -0500
Subject: [EXTERNAL] Re: [R-pkg-devel] CRAN Debian File Handling
 Differences?
In-Reply-To: <CALEXWq30FRkaJsLA6wxC1FNLRLW=vAb4ACLGEphdUqWm=kKzGg@mail.gmail.com>
References: <mailman.3796.1101.1556027817.8580.r-package-devel@r-project.org>
 <CALEXWq30FRkaJsLA6wxC1FNLRLW=vAb4ACLGEphdUqWm=kKzGg@mail.gmail.com>
Message-ID: <C1CB085F-7BD9-4C97-A276-D600B0307B47@usgs.gov>

OK. Thank you. I'm always nervous about closing and re-opening a tempfile() but I suppose it is safe.

Should I interpret your response as saying that creating and mutating files in "tests/testthat/data" is not possible on CRAN?

Thank you,

- Dave

> On Apr 23, 2019, at 10:16 AM, I?aki Ucar <iucar at fedoraproject.org> wrote:
> 
> On Tue, 23 Apr 2019 at 15:57, David Blodgett via R-package-devel
> <r-package-devel at r-project.org> wrote:
>> 
>> I'm working on some CRAN Debian test failures (https://win-builder.r-project.org/incoming_pretest/ncdfgeom_1.0.0_20190423_031452/). The tests all pass on rhub Debian, CRAN windows, local OSX, and Travis Ubuntu. The tests that are failing on CRAN Debian are ones where I check that changes got made to an existing file that is modified in place by my package code.
>> 
>> Are there nuances of the CRAN environment that prevent a `tempfile()` file being created then modified at run time? What is a suggested best practice for such a test?
> 
> According to the current master branch, the test that fails is not
> using tempfile(), but "nc_file<-'data/test_output.nc'". Just change
> that line with a call to tempfile and the test should pass.
> 
> -- 
> I?aki ?car


From |uc@r @end|ng |rom |edor@project@org  Tue Apr 23 17:28:52 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 23 Apr 2019 17:28:52 +0200
Subject: [R-pkg-devel] 
 [EXTERNAL] Re: CRAN Debian File Handling Differences?
In-Reply-To: <C1CB085F-7BD9-4C97-A276-D600B0307B47@usgs.gov>
References: <mailman.3796.1101.1556027817.8580.r-package-devel@r-project.org>
 <CALEXWq30FRkaJsLA6wxC1FNLRLW=vAb4ACLGEphdUqWm=kKzGg@mail.gmail.com>
 <C1CB085F-7BD9-4C97-A276-D600B0307B47@usgs.gov>
Message-ID: <CALEXWq1uEtG-Y-bZ9EtJ=mDKGoo2U7mDXoep1WY_kpqEVBWaOQ@mail.gmail.com>

On Tue, 23 Apr 2019 at 17:24, David Blodgett <dblodgett at usgs.gov> wrote:
>
> OK. Thank you. I'm always nervous about closing and re-opening a tempfile() but I suppose it is safe.
>
> Should I interpret your response as saying that creating and mutating files in "tests/testthat/data" is not possible on CRAN?

>From CRAN Repository Policy:

- Packages should not write in the user?s home filespace (including
clipboards), nor anywhere else on the file system apart from the R
session?s temporary directory (or during installation in the location
pointed to by TMPDIR: and such usage should be cleaned up).

-- 
I?aki ?car


From db|odgett @end|ng |rom u@g@@gov  Tue Apr 23 17:33:22 2019
From: db|odgett @end|ng |rom u@g@@gov (David Blodgett)
Date: Tue, 23 Apr 2019 10:33:22 -0500
Subject: [EXTERNAL] Re: [R-pkg-devel] CRAN Debian File Handling
 Differences?
In-Reply-To: <CALEXWq1uEtG-Y-bZ9EtJ=mDKGoo2U7mDXoep1WY_kpqEVBWaOQ@mail.gmail.com>
References: <mailman.3796.1101.1556027817.8580.r-package-devel@r-project.org>
 <CALEXWq30FRkaJsLA6wxC1FNLRLW=vAb4ACLGEphdUqWm=kKzGg@mail.gmail.com>
 <C1CB085F-7BD9-4C97-A276-D600B0307B47@usgs.gov>
 <CALEXWq1uEtG-Y-bZ9EtJ=mDKGoo2U7mDXoep1WY_kpqEVBWaOQ@mail.gmail.com>
Message-ID: <76AA671E-60B4-4E43-8DF1-859B73151FEC@usgs.gov>

I see. Thank you for the clarification. I did not realize this applied to testing as well as package functionality.

> On Apr 23, 2019, at 10:28 AM, I?aki Ucar <iucar at fedoraproject.org> wrote:
> 
> On Tue, 23 Apr 2019 at 17:24, David Blodgett <dblodgett at usgs.gov> wrote:
>> 
>> OK. Thank you. I'm always nervous about closing and re-opening a tempfile() but I suppose it is safe.
>> 
>> Should I interpret your response as saying that creating and mutating files in "tests/testthat/data" is not possible on CRAN?
> 
> From CRAN Repository Policy:
> 
> - Packages should not write in the user?s home filespace (including
> clipboards), nor anywhere else on the file system apart from the R
> session?s temporary directory (or during installation in the location
> pointed to by TMPDIR: and such usage should be cleaned up).
> 
> -- 
> I?aki ?car


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Apr 24 02:11:14 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 23 Apr 2019 17:11:14 -0700
Subject: Linux Errors on RHub
Message-ID: <9644A557-FA2D-4BFE-B542-6668E9EC3FAD@noaa.gov>

Hi All:

I am checking a package I am hoping to submit to CRAN on RHub.  The Windows and Fedora runs worked but the Ubuntu test ended because of the following:

> #> Warning messages:
> 3203#> 1: In i.p(...) : installation of package ?rgdal? had non-zero exit status
> 3204#> 2: In i.p(...) : installation of package ?sf? had non-zero exit status
> 3205#> 3: In i.p(...) :

I have a few details to work out on Mac and Windows tests (capitalization, a note to CRAN that a spelling is correct, reduce times of examples),  but given that rgdal and sf are packages on CRAN if I can clean up the other items is it appropriate to go ahead and submit?

Thanks,

-Roy


**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Wed Apr 24 02:33:31 2019
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 23 Apr 2019 17:33:31 -0700
Subject: [R-pkg-devel] Linux Errors on RHub
In-Reply-To: <mailman.3801.1140.1556064685.8580.r-package-devel@r-project.org>
References: <mailman.3801.1140.1556064685.8580.r-package-devel@r-project.org>
Message-ID: <CAJqTW47OvwLXTZ=3kXPPo10pkBOYGdJP2dYYb+WgXBNHOjcTAQ@mail.gmail.com>

Roy, I don't have an answer for you, but I have a similar issue.
Does your code happen to have a C++ component that takes a long time to
compile?

On Tue, Apr 23, 2019 at 5:11 PM Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:

>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> To: Roy Mendelssohn - NOAA Federal via R-package-devel <
> r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 23 Apr 2019 17:11:14 -0700
> Subject: Linux Errors on RHub
> Hi All:
>
> I am checking a package I am hoping to submit to CRAN on RHub.  The
> Windows and Fedora runs worked but the Ubuntu test ended because of the
> following:
>
> > #> Warning messages:
> > 3203#> 1: In i.p(...) : installation of package ?rgdal? had non-zero
> exit status
> > 3204#> 2: In i.p(...) : installation of package ?sf? had non-zero exit
> status
> > 3205#> 3: In i.p(...) :
>
> I have a few details to work out on Mac and Windows tests (capitalization,
> a note to CRAN that a spelling is correct, reduce times of examples),  but
> given that rgdal and sf are packages on CRAN if I can clean up the other
> items is it appropriate to go ahead and submit?
>
> Thanks,
>
> -Roy
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal via R-package-devel <
> r-package-devel at r-project.org>
> To: Roy Mendelssohn - NOAA Federal via R-package-devel <
> r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 23 Apr 2019 17:11:14 -0700
> Subject: [R-pkg-devel] Linux Errors on RHub
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Wed Apr 24 02:59:31 2019
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 23 Apr 2019 17:59:31 -0700
Subject: [R-pkg-devel] Linux Errors on RHub
In-Reply-To: <52A0AD1D-4F1B-4850-A010-52232CF40BC3@noaa.gov>
References: <mailman.3801.1140.1556064685.8580.r-package-devel@r-project.org>
 <CAJqTW47OvwLXTZ=3kXPPo10pkBOYGdJP2dYYb+WgXBNHOjcTAQ@mail.gmail.com>
 <52A0AD1D-4F1B-4850-A010-52232CF40BC3@noaa.gov>
Message-ID: <CAJqTW46PBPu5gJ516m1HM5Y-a8HSHP653gZM9VsaZkcxP0K73w@mail.gmail.com>

The examples are dual purpose.  They work like unit tests, and they show
humans how the code works.  If you have a separate unit testing section you
can mock out the parts that take a long time (e.g. "get data from...").
Then just put the slow bits in your .Rd files into \dontrun blocks.

On Tue, Apr 23, 2019 at 5:54 PM Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> No C++ in my package,  but I think sf or rgdal may have c++.  I have
> graphics examples overlaying grids on maps using ggplot2.  trying to get
> those under 5 sec and still have a meaningful example is nigh impossible.
> I mean I can make up an example that will be under 5 sec,  but it will
> neither be illuminating nor testing of anything.  I have even included the
> test data in the package so that it is faster, (this package maps data from
> a package that downloads data from a web service)  but I am still not
> there.  Also the times I get at home are about half of what CRAN or RHub
> get.
>
> I have a similar problem with a package that downloads data from a web
> service.  Even the most minimal example takes more than 5 seconds.  I fully
> understand CRAN's position.  When you have 1000s of package to test on
> different OS,  if everything takes too long it would be a disaster.  At the
> same time,  basically the last three days I have been trying to figure out
> how to get the times down.
>
> -Roy
>
> On Apr 23, 2019, at 5:33 PM, Steven Scott <steve.the.bayesian at gmail.com>
> wrote:
>
> Roy, I don't have an answer for you, but I have a similar issue.
> Does your code happen to have a C++ component that takes a long time to
> compile?
>
> On Tue, Apr 23, 2019 at 5:11 PM Roy Mendelssohn - NOAA Federal via
> R-package-devel <r-package-devel at r-project.org> wrote:
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> To: Roy Mendelssohn - NOAA Federal via R-package-devel <
> r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 23 Apr 2019 17:11:14 -0700
> Subject: Linux Errors on RHub
> Hi All:
>
> I am checking a package I am hoping to submit to CRAN on RHub.  The
> Windows and Fedora runs worked but the Ubuntu test ended because of the
> following:
>
> #> Warning messages:
> 3203#> 1: In i.p(...) : installation of package ?rgdal? had non-zero exit
> status
> 3204#> 2: In i.p(...) : installation of package ?sf? had non-zero exit
> status
> 3205#> 3: In i.p(...) :
>
>
> I have a few details to work out on Mac and Windows tests (capitalization,
> a note to CRAN that a spelling is correct, reduce times of examples),  but
> given that rgdal and sf are packages on CRAN if I can clean up the other
> items is it appropriate to go ahead and submit?
>
> Thanks,
>
> -Roy
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal via R-package-devel <
> r-package-devel at r-project.org>
> To: Roy Mendelssohn - NOAA Federal via R-package-devel <
> r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 23 Apr 2019 17:11:14 -0700
> Subject: [R-pkg-devel] Linux Errors on RHub
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
>

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Apr 24 03:05:42 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 23 Apr 2019 18:05:42 -0700
Subject: [R-pkg-devel] Linux Errors on RHub
In-Reply-To: <CAJqTW46PBPu5gJ516m1HM5Y-a8HSHP653gZM9VsaZkcxP0K73w@mail.gmail.com>
References: <mailman.3801.1140.1556064685.8580.r-package-devel@r-project.org>
 <CAJqTW47OvwLXTZ=3kXPPo10pkBOYGdJP2dYYb+WgXBNHOjcTAQ@mail.gmail.com>
 <52A0AD1D-4F1B-4850-A010-52232CF40BC3@noaa.gov>
 <CAJqTW46PBPu5gJ516m1HM5Y-a8HSHP653gZM9VsaZkcxP0K73w@mail.gmail.com>
Message-ID: <87EA4889-4E82-4C02-8018-853E2F7B8185@noaa.gov>

Have already done that.  Just to run a couple reasonable examples is taking 12 seconds.  On my laptop from home it is more like 8 seconds,  which if you put in the CRAN note with steps taken they will usually allow.  Again,  so I don't seem like I am criticizing CRAN,  I fully understand their requirement.  However,  ggplot2 is just slow drawing maps and overlaying raster or polygons on that map.  Th package does both base maps and ggplot2 maps.  The former render much faster than the latter. 

Also it is faster  if I just save the graphic to an object and not display it, is that kosher for examples?

Thanks,

-Roy

> On Apr 23, 2019, at 5:59 PM, Steven Scott <steve.the.bayesian at gmail.com> wrote:
> 
> The examples are dual purpose.  They work like unit tests, and they show humans how the code works.  If you have a separate unit testing section you can mock out the parts that take a long time (e.g. "get data from...").  Then just put the slow bits in your .Rd files into \dontrun blocks.
> 
> On Tue, Apr 23, 2019 at 5:54 PM Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> No C++ in my package,  but I think sf or rgdal may have c++.  I have graphics examples overlaying grids on maps using ggplot2.  trying to get those under 5 sec and still have a meaningful example is nigh impossible.  I mean I can make up an example that will be under 5 sec,  but it will neither be illuminating nor testing of anything.  I have even included the test data in the package so that it is faster, (this package maps data from a package that downloads data from a web service)  but I am still not there.  Also the times I get at home are about half of what CRAN or RHub get.
> 
> I have a similar problem with a package that downloads data from a web service.  Even the most minimal example takes more than 5 seconds.  I fully understand CRAN's position.  When you have 1000s of package to test on different OS,  if everything takes too long it would be a disaster.  At the same time,  basically the last three days I have been trying to figure out how to get the times down.
> 
> -Roy
> 
>> On Apr 23, 2019, at 5:33 PM, Steven Scott <steve.the.bayesian at gmail.com> wrote:
>> 
>> Roy, I don't have an answer for you, but I have a similar issue.
>> Does your code happen to have a C++ component that takes a long time to compile?
>> 
>> On Tue, Apr 23, 2019 at 5:11 PM Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org> wrote:
>> 
>> 
>> 
>> ---------- Forwarded message ----------
>> From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
>> To: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
>> Cc: 
>> Bcc: 
>> Date: Tue, 23 Apr 2019 17:11:14 -0700
>> Subject: Linux Errors on RHub
>> Hi All:
>> 
>> I am checking a package I am hoping to submit to CRAN on RHub.  The Windows and Fedora runs worked but the Ubuntu test ended because of the following:
>> 
>>> #> Warning messages:
>>> 3203#> 1: In i.p(...) : installation of package ?rgdal? had non-zero exit status
>>> 3204#> 2: In i.p(...) : installation of package ?sf? had non-zero exit status
>>> 3205#> 3: In i.p(...) :
>> 
>> I have a few details to work out on Mac and Windows tests (capitalization, a note to CRAN that a spelling is correct, reduce times of examples),  but given that rgdal and sf are packages on CRAN if I can clean up the other items is it appropriate to go ahead and submit?
>> 
>> Thanks,
>> 
>> -Roy
>> 
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected" 
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> 
>> 
>> 
>> ---------- Forwarded message ----------
>> From: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
>> To: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
>> Cc: 
>> Bcc: 
>> Date: Tue, 23 Apr 2019 17:11:14 -0700
>> Subject: [R-pkg-devel] Linux Errors on RHub
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Wed Apr 24 11:08:38 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Wed, 24 Apr 2019 09:08:38 +0000
Subject: [R-pkg-devel] Package writing to disc
Message-ID: <VI1PR06MB513441BB287C5FDF30A90195D53C0@VI1PR06MB5134.eurprd06.prod.outlook.com>


Hi,

I have a package with some keyboard shortcuts for Rstudio. Several friends and colleagues asked me to put it on CRAN.
It includes a function to set the keyboard bindings that will write to ~/.R/rstudio/keybindings/addins.json et al.
https://github.com/brry/rskey/blob/master/R/setKeyboardBindings.R
This is not allowed by CRAN policy:
"Packages should not write in the user?s [...] file system [...]. Limited exceptions may be allowed in interactive sessions if the package obtains confirmation from the user."

So if I include  readline("Is it OK to write into the '~/.R/rstudio/keybindings' files? y/n: ")
and explain this behaviour in the submission note, should I be fine to submit and see what happens?

Thanks ahead,
Berry


	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Apr 24 11:08:30 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 24 Apr 2019 10:08:30 +0100
Subject: [R-pkg-devel] Linux Errors on RHub
In-Reply-To: <mailman.3801.1140.1556064685.8580.r-package-devel@r-project.org>
References: <mailman.3801.1140.1556064685.8580.r-package-devel@r-project.org>
Message-ID: <CABtg=KkLySqjoUR5CHLOD_pE1POjy1vGatPMiu2uw_2cQxAzcQ@mail.gmail.com>

Hi, which package is this, and how exactly did rgdal fail?

Also, you can report R-hub problems at https://github.com/r-hub/rhub/issues

Thanks,
Gabor

On Wed, Apr 24, 2019 at 1:11 AM Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:
>
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> To: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 23 Apr 2019 17:11:14 -0700
> Subject: Linux Errors on RHub
> Hi All:
>
> I am checking a package I am hoping to submit to CRAN on RHub.  The Windows and Fedora runs worked but the Ubuntu test ended because of the following:
>
> > #> Warning messages:
> > 3203#> 1: In i.p(...) : installation of package ?rgdal? had non-zero exit status
> > 3204#> 2: In i.p(...) : installation of package ?sf? had non-zero exit status
> > 3205#> 3: In i.p(...) :
>
> I have a few details to work out on Mac and Windows tests (capitalization, a note to CRAN that a spelling is correct, reduce times of examples),  but given that rgdal and sf are packages on CRAN if I can clean up the other items is it appropriate to go ahead and submit?
>
> Thanks,
>
> -Roy
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> To: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 23 Apr 2019 17:11:14 -0700
> Subject: [R-pkg-devel] Linux Errors on RHub
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr 24 11:17:36 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 24 Apr 2019 11:17:36 +0200
Subject: [R-pkg-devel] Package writing to disc
In-Reply-To: <VI1PR06MB513441BB287C5FDF30A90195D53C0@VI1PR06MB5134.eurprd06.prod.outlook.com>
References: <VI1PR06MB513441BB287C5FDF30A90195D53C0@VI1PR06MB5134.eurprd06.prod.outlook.com>
Message-ID: <adf854e8-dbe7-839f-65b5-90d5f7be114e@statistik.tu-dortmund.de>



On 24.04.2019 11:08, Berry Boessenkool wrote:
> 
> Hi,
> 
> I have a package with some keyboard shortcuts for Rstudio. Several friends and colleagues asked me to put it on CRAN.
> It includes a function to set the keyboard bindings that will write to ~/.R/rstudio/keybindings/addins.json et al.
> https://github.com/brry/rskey/blob/master/R/setKeyboardBindings.R
> This is not allowed by CRAN policy:
> "Packages should not write in the user?s [...] file system [...]. Limited exceptions may be allowed in interactive sessions if the package obtains confirmation from the user."
> 
> So if I include  readline("Is it OK to write into the '~/.R/rstudio/keybindings' files? y/n: ")
> and explain this behaviour in the submission note, should I be fine to submit and see what happens?

Yes.

Best,
Uwe Ligges

> Thanks ahead,
> Berry
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Apr 24 12:06:26 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 24 Apr 2019 11:06:26 +0100
Subject: [R-pkg-devel] Linux Errors on RHub
In-Reply-To: <CABtg=KkLySqjoUR5CHLOD_pE1POjy1vGatPMiu2uw_2cQxAzcQ@mail.gmail.com>
References: <mailman.3801.1140.1556064685.8580.r-package-devel@r-project.org>
 <CABtg=KkLySqjoUR5CHLOD_pE1POjy1vGatPMiu2uw_2cQxAzcQ@mail.gmail.com>
Message-ID: <CABtg=KmkXyaa8JN78N+d01VPuPe_EJ5c7YTU4m-mBER1khwZXg@mail.gmail.com>

Seems like GDAL is too old on our Ubuntu:
https://github.com/r-hub/rhub/issues/258

Will try to fix soon.

FYI,
G.

On Wed, Apr 24, 2019 at 10:08 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> Hi, which package is this, and how exactly did rgdal fail?
>
> Also, you can report R-hub problems at https://github.com/r-hub/rhub/issues
>
> Thanks,
> Gabor
>
> On Wed, Apr 24, 2019 at 1:11 AM Roy Mendelssohn - NOAA Federal via
> R-package-devel <r-package-devel at r-project.org> wrote:
> >
> >
> >
> >
> > ---------- Forwarded message ----------
> > From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> > To: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> > Cc:
> > Bcc:
> > Date: Tue, 23 Apr 2019 17:11:14 -0700
> > Subject: Linux Errors on RHub
> > Hi All:
> >
> > I am checking a package I am hoping to submit to CRAN on RHub.  The Windows and Fedora runs worked but the Ubuntu test ended because of the following:
> >
> > > #> Warning messages:
> > > 3203#> 1: In i.p(...) : installation of package ?rgdal? had non-zero exit status
> > > 3204#> 2: In i.p(...) : installation of package ?sf? had non-zero exit status
> > > 3205#> 3: In i.p(...) :
> >
> > I have a few details to work out on Mac and Windows tests (capitalization, a note to CRAN that a spelling is correct, reduce times of examples),  but given that rgdal and sf are packages on CRAN if I can clean up the other items is it appropriate to go ahead and submit?
> >
> > Thanks,
> >
> > -Roy
> >
> >
> > **********************
> > "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> > **********************
> > Roy Mendelssohn
> > Supervisory Operations Research Analyst
> > NOAA/NMFS
> > Environmental Research Division
> > Southwest Fisheries Science Center
> > ***Note new street address***
> > 110 McAllister Way
> > Santa Cruz, CA 95060
> > Phone: (831)-420-3666
> > Fax: (831) 420-3980
> > e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> >
> > "Old age and treachery will overcome youth and skill."
> > "From those who have been given much, much will be expected"
> > "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> >
> >
> >
> >
> > ---------- Forwarded message ----------
> > From: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> > To: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> > Cc:
> > Bcc:
> > Date: Tue, 23 Apr 2019 17:11:14 -0700
> > Subject: [R-pkg-devel] Linux Errors on RHub
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Apr 24 16:30:57 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 24 Apr 2019 07:30:57 -0700
Subject: [R-pkg-devel] Linux Errors on RHub
In-Reply-To: <CABtg=KmkXyaa8JN78N+d01VPuPe_EJ5c7YTU4m-mBER1khwZXg@mail.gmail.com>
References: <mailman.3801.1140.1556064685.8580.r-package-devel@r-project.org>
 <CABtg=KkLySqjoUR5CHLOD_pE1POjy1vGatPMiu2uw_2cQxAzcQ@mail.gmail.com>
 <CABtg=KmkXyaa8JN78N+d01VPuPe_EJ5c7YTU4m-mBER1khwZXg@mail.gmail.com>
Message-ID: <54926DA1-EEDB-4C14-8045-7914876FC519@noaa.gov>

HI:

Though you appear to have found the problem.  it is a package called plotdap,  the Ubuntu results are here:

https://builder.r-hub.io/status/plotdap_0.0.1.tar.gz-5e8cf0d2b8304290820438dde5593e27

The complete build attempt was:

> #> * installing *source* package ?rgdal? ...
> 2626#> ** package ?rgdal? successfully unpacked and MD5 sums checked
> 2627#> configure: R_HOME: /usr/lib/R
> 2628#> configure: CC: gcc -std=gnu99
> 2629#> configure: CXX: g++
> 2630#> configure: C++11 support available
> 2631#> configure: rgdal: 1.4-3
> 2632#> checking for /usr/bin/svnversion... yes
> 2633#> configure: svn revision: 828
> 2634#> checking for gdal-config... /usr/bin/gdal-config
> 2635#> checking gdal-config usability... yes
> 2636#> configure: GDAL: 1.11.3
> 2637#> checking GDAL version >= 1.11.4... no
> 2638#> configure: error: upgrade GDAL to 1.11.4 or later
> 2639#> ERROR: configuration failed for package ?rgdal?


I wrote here rather than RHub first because I was unaware of the link  (thanks) and my issue was more if I could just go ahead and submit to CRAN despite this,  because the problem is not with my package.

Thanks for your response.

-Roy


> 
> On Apr 24, 2019, at 3:06 AM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> 
> FYI,

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From boo@ @end|ng |rom nc@u@edu  Thu Apr 25 02:09:12 2019
From: boo@ @end|ng |rom nc@u@edu (Dennis Boos)
Date: Wed, 24 Apr 2019 20:09:12 -0400
Subject: [R-pkg-devel] package problems
Message-ID: <779eadec-458b-7c84-b3f8-ef03c0822295@ncsu.edu>

R Package Folks,

The automatic checks rejected my package submission. A year ago, I got 
past the automatic checks, but a CRAN person told me to add a doi and 
use \donttest{}.

1. So I added the doi to the DESCRIPTION file--it seems to work using 
the cran checks in Rstudio and everything looks good when I load the 
package locally.  However, I got this message today when I submitted

Found the following (possibly) invalid DOIs:
     DOI: 10.1002/insr.12087
       From: DESCRIPTION
       Status: Not Found
       Message: 404

But the paper exists and I have placed it at

https://www4.stat.ncsu.edu/~boos/Monte.Carlo.se/

for anyone to check. The package source code is also there.

2. I tried \donttest{}, but decided to use \dontrun{} after getting 
rejected for having examples that run too long. Still I got this message 
today:

Flavor: r-devel-windows-ix86+x86_64
Check: running examples for arch 'i386', Result: NOTE
   Examples with CPU or elapsed time > 10s
                 user system elapsed
   mc.se.matrix 35.13   0.64   35.93

Flavor: r-devel-windows-ix86+x86_64
Check: running examples for arch 'x64', Result: NOTE
   Examples with CPU or elapsed time > 10s
                 user system elapsed
   mc.se.matrix 27.38   0.63   28.14

Flavor: r-devel-linux-x86_64-debian-gcc
Check: examples, Result: NOTE
   Examples with CPU or elapsed time > 10s
                 user system elapsed
   mc.se.matrix 18.62  1.372   19.99

Plus, I tried to stop the vignettes from running any code with

```{r setup, echo=FALSE,eval=FALSE, }
knitr::opts_chunk$set(
   collapse = TRUE,
   comment = "#>"
)
```

Any help would be appreciated.

Dennis
-- 
Dennis Boos, Assoc. Head    email: dennis_boos at ncsu.edu
Department of Statistics    Phone: 919-515-1918
NC State University         Fax: 919-515-1169
Raleigh, NC 27695-8203      http://www4.stat.ncsu.edu/~boos


From m|ch@e|@wey|@ndt @end|ng |rom gm@||@com  Thu Apr 25 17:22:01 2019
From: m|ch@e|@wey|@ndt @end|ng |rom gm@||@com (Michael Weylandt)
Date: Thu, 25 Apr 2019 10:22:01 -0500
Subject: [R-pkg-devel] package problems
In-Reply-To: <779eadec-458b-7c84-b3f8-ef03c0822295@ncsu.edu>
References: <779eadec-458b-7c84-b3f8-ef03c0822295@ncsu.edu>
Message-ID: <CAAmySGPTa8-1rsOJcdjGgtmz9Z5wbcKtX27NvptY=Qa9Oxf+qg@mail.gmail.com>

Hi Dennis,

I

On Thu, Apr 25, 2019 at 9:00 AM Dennis Boos <boos at ncsu.edu> wrote:
>
> R Package Folks,
>
> The automatic checks rejected my package submission. A year ago, I got
> past the automatic checks, but a CRAN person told me to add a doi and
> use \donttest{}.
>
> 1. So I added the doi to the DESCRIPTION file--it seems to work using
> the cran checks in Rstudio and everything looks good when I load the
> package locally.  However, I got this message today when I submitted
>
> Found the following (possibly) invalid DOIs:
>      DOI: 10.1002/insr.12087
>        From: DESCRIPTION
>        Status: Not Found
>        Message: 404
>
> But the paper exists and I have placed it at
>
> https://www4.stat.ncsu.edu/~boos/Monte.Carlo.se/
>
> for anyone to check. The package source code is also there.

That DOI doesn't appear to be valid: for example, the doi.org resolver
doesn't find anything for it (see, e.g.,
http://dx.doi.org/10.1002/insr.12087) giving the error you report.

If you go to the publisher's page for the paper [1] they give a
different DOI -- 10.1111/insr.12087 -- which seems to work just fine.

I'm not sure why the DOI on your copy is not working - it does seem to
go against the whole idea of DOIs...

Hope this helps,
Michael

[1] https://onlinelibrary.wiley.com/doi/abs/10.1111/insr.12087


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Thu Apr 25 18:44:07 2019
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Thu, 25 Apr 2019 12:44:07 -0400
Subject: [R-pkg-devel] What constitutes insufficient merit of an r package?
Message-ID: <CAMVrHdA0fmQHhZoCkdwf+FaxNQ0vEBpZL+YB7qd_pv_08E+bUw@mail.gmail.com>

Hello,

When submitting a package to the Comprehensive R Archive Network (CRAN),
one requirement for eventual acceptance is novelty of the package and its
workings (i.e., functions, etc.).

That is, a package's contribution cannot be trivial.

The flowchart found here explains things pictorially:

https://github.com/edgararuiz/cran-stages

Many R packages contain functions found in other packages. These functions
are not necessarily distinct from those in older R packages.

*What then is meant by 'sufficient merit' of an incoming R package?*

I realize this question is likely to be opinion-based, but it is one that
grabbed my attention nonetheless.


Thanks.

Cheers,

Jarrett

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Thu Apr 25 18:56:26 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 25 Apr 2019 12:56:26 -0400
Subject: [R-pkg-devel] 
 What constitutes insufficient merit of an r package?
In-Reply-To: <CAMVrHdA0fmQHhZoCkdwf+FaxNQ0vEBpZL+YB7qd_pv_08E+bUw@mail.gmail.com>
References: <CAMVrHdA0fmQHhZoCkdwf+FaxNQ0vEBpZL+YB7qd_pv_08E+bUw@mail.gmail.com>
Message-ID: <CABghstTnwtYoihCgzKjJ0Uss65AgmJAkrR59qt97MwgHuFFnnA@mail.gmail.com>

I don't think this can actually be answered except by CRAN
maintainers, and I would guess they will use the US Supreme Court's
definition of obscenity
<https://en.wikipedia.org/wiki/I_know_it_when_I_see_it>*.

I would guess that this would be used to turn down packages of
interest to a very narrow group of users ("me and the two people
working on this project"), or with only a small number of functions
whose functionality replicates base-R functions (or small/obvious
wrappers around base-R functions), or functions from an existing
package.

I agree that it would be interesting to have examples of packages that
had been turned down for lack of novelty.

===
* from Wikipedia:

In 1981 Justice Stewart commented about his second thoughts about
coining the phrase. "In a way I regret having said what I said about
obscenity?that's going to be on my tombstone. When I remember all of
the other solid words I've written," he said, "I regret a little bit
that if I'll be remembered at all I'll be remembered for that
particular phrase."[13]

On Thu, Apr 25, 2019 at 12:44 PM Jarrett Phillips
<phillipsjarrett1 at gmail.com> wrote:
>
> Hello,
>
> When submitting a package to the Comprehensive R Archive Network (CRAN),
> one requirement for eventual acceptance is novelty of the package and its
> workings (i.e., functions, etc.).
>
> That is, a package's contribution cannot be trivial.
>
> The flowchart found here explains things pictorially:
>
> https://github.com/edgararuiz/cran-stages
>
> Many R packages contain functions found in other packages. These functions
> are not necessarily distinct from those in older R packages.
>
> *What then is meant by 'sufficient merit' of an incoming R package?*
>
> I realize this question is likely to be opinion-based, but it is one that
> grabbed my attention nonetheless.
>
>
> Thanks.
>
> Cheers,
>
> Jarrett
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Apr 25 18:57:21 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 25 Apr 2019 18:57:21 +0200
Subject: [R-pkg-devel] package problems
In-Reply-To: <779eadec-458b-7c84-b3f8-ef03c0822295@ncsu.edu>
References: <779eadec-458b-7c84-b3f8-ef03c0822295@ncsu.edu>
Message-ID: <7b24ef07-88ef-3b39-c35a-e27e428b33e5@statistik.tu-dortmund.de>



On 25.04.2019 02:09, Dennis Boos wrote:
> R Package Folks,
> 
> The automatic checks rejected my package submission. A year ago, I got 
> past the automatic checks, but a CRAN person told me to add a doi and 
> use \donttest{}.
> 
> 1. So I added the doi to the DESCRIPTION file--it seems to work using 
> the cran checks in Rstudio and everything looks good when I load the 
> package locally.? However, I got this message today when I submitted
> 
> Found the following (possibly) invalid DOIs:
>  ??? DOI: 10.1002/insr.12087
>  ????? From: DESCRIPTION
>  ????? Status: Not Found
>  ????? Message: 404
> 
> But the paper exists and I have placed it at
> 
> https://www4.stat.ncsu.edu/~boos/Monte.Carlo.se/
> 
> for anyone to check. The package source code is also there.
> 
> 2. I tried \donttest{}, but decided to use \dontrun{} after getting 
> rejected for having examples that run too long. Still I got this message 
> today:
> 
> Flavor: r-devel-windows-ix86+x86_64
> Check: running examples for arch 'i386', Result: NOTE
>  ? Examples with CPU or elapsed time > 10s
>  ??????????????? user system elapsed
>  ? mc.se.matrix 35.13?? 0.64?? 35.93
> 
> Flavor: r-devel-windows-ix86+x86_64
> Check: running examples for arch 'x64', Result: NOTE
>  ? Examples with CPU or elapsed time > 10s
>  ??????????????? user system elapsed
>  ? mc.se.matrix 27.38?? 0.63?? 28.14
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: examples, Result: NOTE
>  ? Examples with CPU or elapsed time > 10s
>  ??????????????? user system elapsed
>  ? mc.se.matrix 18.62? 1.372?? 19.99


First qiuestion has been answered already, second one: Apparently it is 
NOT in \dontrun{}.
Please reduce each example to less than 5 sec and try to use toy 
examples that can be quickly executed by users to see how the fucntion 
works. Additionally to the sorter ones, longer examples can be provided 
within \donttest{}.

Best,
Uwe Ligges



> Plus, I tried to stop the vignettes from running any code with
> 
> ```{r setup, echo=FALSE,eval=FALSE, }
> knitr::opts_chunk$set(
>  ? collapse = TRUE,
>  ? comment = "#>"
> )
> ```
> 
> Any help would be appreciated.
> 
> Dennis


From |uc@r @end|ng |rom |edor@project@org  Thu Apr 25 20:58:40 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 25 Apr 2019 20:58:40 +0200
Subject: [R-pkg-devel] package problems
In-Reply-To: <7b24ef07-88ef-3b39-c35a-e27e428b33e5@statistik.tu-dortmund.de>
References: <779eadec-458b-7c84-b3f8-ef03c0822295@ncsu.edu>
 <7b24ef07-88ef-3b39-c35a-e27e428b33e5@statistik.tu-dortmund.de>
Message-ID: <CALEXWq3RSVfoyJP6rjiLBvLRvhSQoOsJVJ4HFK_WUE7XG_U67w@mail.gmail.com>

On Thu, 25 Apr 2019 at 18:57, Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
> On 25.04.2019 02:09, Dennis Boos wrote:
> > R Package Folks,
> >
> > The automatic checks rejected my package submission. A year ago, I got
> > past the automatic checks, but a CRAN person told me to add a doi and
> > use \donttest{}.
> >
> > 1. So I added the doi to the DESCRIPTION file--it seems to work using
> > the cran checks in Rstudio and everything looks good when I load the
> > package locally.  However, I got this message today when I submitted
> >
> > Found the following (possibly) invalid DOIs:
> >      DOI: 10.1002/insr.12087
> >        From: DESCRIPTION
> >        Status: Not Found
> >        Message: 404
> >
> > But the paper exists and I have placed it at
> >
> > https://www4.stat.ncsu.edu/~boos/Monte.Carlo.se/
> >
> > for anyone to check. The package source code is also there.
> >
> > 2. I tried \donttest{}, but decided to use \dontrun{} after getting
> > rejected for having examples that run too long. Still I got this message
> > today:
> >
> > Flavor: r-devel-windows-ix86+x86_64
> > Check: running examples for arch 'i386', Result: NOTE
> >    Examples with CPU or elapsed time > 10s
> >                  user system elapsed
> >    mc.se.matrix 35.13   0.64   35.93
> >
> > Flavor: r-devel-windows-ix86+x86_64
> > Check: running examples for arch 'x64', Result: NOTE
> >    Examples with CPU or elapsed time > 10s
> >                  user system elapsed
> >    mc.se.matrix 27.38   0.63   28.14
> >
> > Flavor: r-devel-linux-x86_64-debian-gcc
> > Check: examples, Result: NOTE
> >    Examples with CPU or elapsed time > 10s
> >                  user system elapsed
> >    mc.se.matrix 18.62  1.372   19.99
>
>
> First qiuestion has been answered already, second one: Apparently it is
> NOT in \dontrun{}.

Dennis, you added \dontrun{} to the source file, but you forgot to
regenerate the documentation with roxygen.

-- 
I?aki ?car


From r@||@e|e@@rg|ento @end|ng |rom un|to@|t  Mon Apr 29 11:03:04 2019
From: r@||@e|e@@rg|ento @end|ng |rom un|to@|t (Raffaele Argiento)
Date: Mon, 29 Apr 2019 11:03:04 +0200
Subject: [R-pkg-devel] data in R package
Message-ID: <CALYOhwgWqJG+WywL-j=+zobqzrRKGKVqgtOSStQMavPJgFoCuA@mail.gmail.com>

Dear all


we are developing a R package and we would like to include as an
example  published data that we have taken from a paper. Is this
allowed ? Where can I find the policy about distributing data through
the R Package

Thanks

-- 
Dr. Raffaele Argiento

University of Torino and Collegio Carlo Alberto

www.raffaeleargiento.it


From r@||@@tubner @end|ng |rom d@q@n@@com  Mon Apr 29 15:09:06 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Mon, 29 Apr 2019 15:09:06 +0200
Subject: [R-pkg-devel] data in R package
In-Reply-To: <CALYOhwgWqJG+WywL-j=+zobqzrRKGKVqgtOSStQMavPJgFoCuA@mail.gmail.com>
References: <CALYOhwgWqJG+WywL-j=+zobqzrRKGKVqgtOSStQMavPJgFoCuA@mail.gmail.com>
Message-ID: <9844f5ea-1dec-933c-26ef-bac9325d7863@daqana.com>

On 29.04.19 11:03, Raffaele Argiento wrote:
> we are developing a R package and we would like to include as an
> example  published data that we have taken from a paper. Is this
> allowed ? Where can I find the policy about distributing data through
> the R Package

From the CRAN policies
<https://cran.r-project.org/web/packages/policies.html>:

  Packages should be of the minimum necessary size. Reasonable
  compression should be used for data (not just .rda files) and PDF
  documentation: CRAN will if necessary pass the latter through qpdf.

  As a general rule, neither data nor documentation should exceed 5MB
  (which covers several books). A CRAN package is not an appropriate way
  to distribute course notes, and authors will be asked to trim their
  documentation to a maximum of 5MB.

  Where a large amount of data is required (even after compression),
  consideration should be given to a separate data-only package which
  can be updated only rarely (since older versions of packages are
  archived in perpetuity).

Besides these technical questions, one also has to consider legal
questions: Under which license may one distribute the data?

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190429/c934f256/attachment.sig>

From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr 29 15:10:29 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 29 Apr 2019 09:10:29 -0400
Subject: [R-pkg-devel] data in R package
In-Reply-To: <CALYOhwgWqJG+WywL-j=+zobqzrRKGKVqgtOSStQMavPJgFoCuA@mail.gmail.com>
References: <CALYOhwgWqJG+WywL-j=+zobqzrRKGKVqgtOSStQMavPJgFoCuA@mail.gmail.com>
Message-ID: <9783c852-6e34-faa3-e2c2-0dca388fba0f@gmail.com>

On 29/04/2019 5:03 a.m., Raffaele Argiento wrote:
> Dear all
> 
> 
> we are developing a R package and we would like to include as an
> example  published data that we have taken from a paper. Is this
> allowed ? Where can I find the policy about distributing data through
> the R Package

There are two answers to this.  If you are intending to distribute your 
package on CRAN, then the appropriate document is

https://cran.r-project.org/web/packages/policies.html

Relevant parts of it would likely be the rules about size and copyright 
status, but there may be other parts too:  read it over.

If you are not intending to distribute on CRAN, then you are pretty free 
to do whatever you want, subject to the laws of your country.  R has no 
standing to control what you do with your own creation.

Duncan Murdoch


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Tue Apr 30 00:12:46 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Mon, 29 Apr 2019 22:12:46 +0000
Subject: [R-pkg-devel] check warning in examples
Message-ID: <VI1PR06MB4813F6377AD490EE894651AED5390@VI1PR06MB4813.eurprd06.prod.outlook.com>


Hi,

my package has a warning in check (locally + all rhub::check_for_cran platforms):

* checking for unstated dependencies in examples ... WARNING
Warning: parse error in file 'berryFunctions-Ex.R':
'match' requires vector arguments

When I run the -Ex.R file locally (Windows 10, R3.5.2), things work fine, however.
parse("*-Ex.R") works fine.
devtools::run_examples() works fine as well.
https://github.com/brry/berryFunctions

Does anybody have an idea how to locate the cause for such a warning?
Does it mean something that this turns up in check unstated deps while checking examples itself has no problems?

Thanks ahead,
Berry


	[[alternative HTML version deleted]]


From w@ngz1 @end|ng |rom uth@c@@@edu  Tue Apr 30 01:44:42 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Mon, 29 Apr 2019 23:44:42 +0000
Subject: [R-pkg-devel] parallel computing slower than sequential computing
In-Reply-To: <0fbd4d11c36042308540ccbefd492b5a@EX-MCD-1.win.uthscsa.edu>
References: <0fbd4d11c36042308540ccbefd492b5a@EX-MCD-1.win.uthscsa.edu>
Message-ID: <1556581482876.32529@uthscsa.edu>

Hello,

I have a package where parallel computing is slower than sequential computing with cross-validation. For instance, please see the following reproducible example with 10 cores and the relevant lines in the corresponding R function. The R package is also attached. I thought parallel computing should improve the speed. However, it is not obvious to me where it went wrong.

Many thanks in advance.

Zhu Wang

library("mpath")
library("pscl")
data("bioChemists", package = "pscl")
>system.time(cv.zipath(art ~ . | ., data = bioChemists, family = "negbin",     nlambda=100, parallel=FALSE))
    user  system elapsed
  77.430   0.031  79.547
> system.time(cv.zipath(art ~ . | ., data = bioChemists, family = "negbin",     nlambda=100, parallel=TRUE, n.cores=10))
    user  system elapsed
  95.694   0.517 106.072
R> sessionInfo()
R version 3.5.2 (2018-12-20)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.2 LTS

The relevant lines in cv.zipath regarding parallel argument are below:

if(parallel){
     registerDoParallel(cores=n.cores)
     i <- 1  ###needed to pass R CMD check with parallel code below
     residmat <- foreach(i=seq(K), .combine=cbind, .packages='mpath') %dopar% {
         omit <- all.folds[[i]]
         fitcv <- do.call("zipath", list(formula, data[-omit,], weights[-omit],  lambda.count=lambda.count, lambda.zero=lambda.zero, nlambda=nlambda, ...))
         logLik(fitcv, newdata=data[omit,, drop=FALSE], Y[omit],                 weights=weights[omit])
     }
     stopImplicitCluster()
     }
     else{
      residmat <- matrix(NA, nlambda, K)
      for(i in seq(K)) {
        if(trace)
          cat("\n CV Fold", i, "\n\n")
        omit <- all.folds[[i]]
        fitcv <- do.call("zipath", list(formula, data[-omit,], weights[-omit],   lambda.count=lambda.count, lambda.zero=lambda.zero, nlambda=nlambda, ...))
        residmat[, i] <- logLik(fitcv, newdata=data[omit,, drop=FALSE],          Y[omit], weights=weights[omit])
      }
     }

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mpath_0.3-13.tar.gz
Type: application/gzip
Size: 83361 bytes
Desc: mpath_0.3-13.tar.gz
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190429/c9fc37a1/attachment.gz>

From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 30 01:59:39 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 29 Apr 2019 19:59:39 -0400
Subject: [R-pkg-devel] check warning in examples
In-Reply-To: <VI1PR06MB4813F6377AD490EE894651AED5390@VI1PR06MB4813.eurprd06.prod.outlook.com>
References: <VI1PR06MB4813F6377AD490EE894651AED5390@VI1PR06MB4813.eurprd06.prod.outlook.com>
Message-ID: <8b81118e-f9b2-d050-1e5a-d997f6cd821d@gmail.com>

On 29/04/2019 6:12 p.m., Berry Boessenkool wrote:
> 
> Hi,
> 
> my package has a warning in check (locally + all rhub::check_for_cran platforms):
> 
> * checking for unstated dependencies in examples ... WARNING
> Warning: parse error in file 'berryFunctions-Ex.R':
> 'match' requires vector arguments
> 
> When I run the -Ex.R file locally (Windows 10, R3.5.2), things work fine, however.
> parse("*-Ex.R") works fine.
> devtools::run_examples() works fine as well.
> https://github.com/brry/berryFunctions
> 
> Does anybody have an idea how to locate the cause for such a warning?
> Does it mean something that this turns up in check unstated deps while checking examples itself has no problems?


It looks like a bug in the QC code, triggered by this line in one of 
your examples for ?dataStr:

   data(list=x$Call, package=x$Package, envir=env)

In the R-devel source file src/library/tools/R/QC.R, in function 
.check_packages_used_helper(), there's a nested function called 
find_bad_exprs().  It parses lots of calls, and in particular, in 
handling calls to data(), it has this code:


if(Call %in%  "data" && length(e) >= 3L) {
                 mc <- match.call(utils::data, e)
                 if(!is.null(pkg <- mc$package) && pkg %notin% 
depends_suggests)
                     bad_data <<- c(bad_data, pkg)
             }

Here e is the quoted expression from above, and Call is "data".  This 
sets pkg to the quoted expression x$package, and the test "pkg %notin% 
depends_suggests" dies with the error message you saw.

I think the fix for this is to check that pkg works out to be a string, 
not an expression, e.g.

  if(!is.null(pkg <- mc$package) && is.character(pkg) && pkg %notin% 
depends_suggests)

I'm not sure what would be the best thing for you to do.  You could fool 
the test by using obscure code like this

   do.call("data", list(list = x$Call, package=x$Package, envir=env))

or maybe you could just ignore the warning, pointing out that it is a 
bug in the QC code.

Duncan Murdoch


From m@rk@hogue@chp @end|ng |rom gm@||@com  Tue Apr 30 03:16:43 2019
From: m@rk@hogue@chp @end|ng |rom gm@||@com (Mark Hogue)
Date: Mon, 29 Apr 2019 21:16:43 -0400
Subject: [R-pkg-devel] Whack-a-mole base::assign(".ptime", proc.time(),
 pos = "CheckExEnv")
Message-ID: <CAHPRF8fzQTXGqoMk6r0nhSEB9Au0hXk8u0tCLp5W7+Er_jFDDw@mail.gmail.com>

(The subject title is in reference to the arcade game where fake mole heads
pop up and the contestant is challenged to smash them down as more and more
keep popping up.)

I made some changes to a package and when I run the R CMD check, I get one
error with this lead-in notification:

Running examples in 'radsafer-Ex.R' failed
  The error most likely occurred in:
*base::assign(".ptime", proc.time(), pos = "CheckExEnv")*

When I do something with the affected function, I get a similar error on
another function.

Could it have something to do with my having added argument checks on these
functions? Could someone advise where to go to understand this error
better? And is it normal to get only one error at a time like this?

Thanks,

Mark

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Tue Apr 30 10:44:26 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 30 Apr 2019 10:44:26 +0200
Subject: [R-pkg-devel] Whack-a-mole base::assign(".ptime", proc.time(),
 pos = "CheckExEnv")
In-Reply-To: <CAHPRF8fzQTXGqoMk6r0nhSEB9Au0hXk8u0tCLp5W7+Er_jFDDw@mail.gmail.com>
References: <CAHPRF8fzQTXGqoMk6r0nhSEB9Au0hXk8u0tCLp5W7+Er_jFDDw@mail.gmail.com>
Message-ID: <94CD643A-D7C1-46B1-8663-54A007A1FE33@gmail.com>

That line is a generic part of the timing (it records current time so that at the end you can do what amounts to "Time used:" proc.time() - .ptime). 

It is not likely to contain the actual error -- notice that the message just gives you a best guess of the error location and that may fail. You probably need to have a look at the actual radsafer-Ex.R file and its output to find the true culprit.

If you have catastrophic failures, yes, you see them only one at a time.

-pd

> On 30 Apr 2019, at 03:16 , Mark Hogue <mark.hogue.chp at gmail.com> wrote:
> 
> (The subject title is in reference to the arcade game where fake mole heads
> pop up and the contestant is challenged to smash them down as more and more
> keep popping up.)
> 
> I made some changes to a package and when I run the R CMD check, I get one
> error with this lead-in notification:
> 
> Running examples in 'radsafer-Ex.R' failed
>  The error most likely occurred in:
> *base::assign(".ptime", proc.time(), pos = "CheckExEnv")*
> 
> When I do something with the affected function, I get a similar error on
> another function.
> 
> Could it have something to do with my having added argument checks on these
> functions? Could someone advise where to go to understand this error
> better? And is it normal to get only one error at a time like this?
> 
> Thanks,
> 
> Mark
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Apr 30 17:17:01 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 30 Apr 2019 18:17:01 +0300
Subject: [R-pkg-devel] 
 parallel computing slower than sequential computing
In-Reply-To: <1556581482876.32529@uthscsa.edu>
References: <0fbd4d11c36042308540ccbefd492b5a@EX-MCD-1.win.uthscsa.edu>
 <1556581482876.32529@uthscsa.edu>
Message-ID: <20190430181701.07748700@trisector>

On Mon, 29 Apr 2019 23:44:42 +0000
"Wang, Zhu" <wangz1 at uthscsa.edu> wrote:

> sessionInfo()  
> R version 3.5.2 (2018-12-20)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.2 LTS

Which BLAS implementation do you use? One popular implementation,
OpenBLAS, spawns multiple threads to do some operations faster; the
threads can compete against each other for CPU resources if resulting
number of processes * threads per process is more than what CPU can
handle.

How many CPU cores does your system have? Does this include SMT (also
known as hyper-threading on Intel processors)? While some problems
benefit from processor pipeline being able to fetch from multiple
threads at the same time, for others it's more of a bottleneck.

It may help to decrease the n.cores parameter.

-- 
Best regards,
Ivan


From w@ngz1 @end|ng |rom uth@c@@@edu  Tue Apr 30 18:15:32 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Tue, 30 Apr 2019 16:15:32 +0000
Subject: [R-pkg-devel] 
 parallel computing slower than sequential computing
In-Reply-To: <20190430181701.07748700@trisector>
References: <0fbd4d11c36042308540ccbefd492b5a@EX-MCD-1.win.uthscsa.edu>
 <1556581482876.32529@uthscsa.edu> <20190430181701.07748700@trisector>
Message-ID: <5bf2f17d9a354ecfbf455532a1b61ecc@EX-MCD-1.win.uthscsa.edu>

-----Original Message-----
From: Ivan Krylov <krylov.r00t at gmail.com> 
Sent: Tuesday, April 30, 2019 10:17 AM
To: Wang, Zhu <wangz1 at uthscsa.edu>
Cc: R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] parallel computing slower than sequential computing

On Mon, 29 Apr 2019 23:44:42 +0000
"Wang, Zhu" <wangz1 at uthscsa.edu> wrote:

> sessionInfo()
> R version 3.5.2 (2018-12-20)
> Platform: x86_64-pc-linux-gnu (64-bit) Running under: Ubuntu 18.04.2 
> LTS

Which BLAS implementation do you use? One popular implementation, OpenBLAS, spawns multiple threads to do some operations faster; the threads can compete against each other for CPU resources if resulting number of processes * threads per process is more than what CPU can handle.

>>BLAS: /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.7.1
>>LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.7.1


How many CPU cores does your system have? Does this include SMT (also known as hyper-threading on Intel processors)? While some problems benefit from processor pipeline being able to fetch from multiple threads at the same time, for others it's more of a bottleneck.

>>8 CPU cores and 16 logical processors. The Linux system is on a Virtualbox. I realized this might be a factor.

It may help to decrease the n.cores parameter.
>> n.cores=3, 4, 5 would have similar user/elapsed time compared with sequential computing.  Thanks Ivan.
--
Best regards,
Ivan


From |zz46 @end|ng |rom p@u@edu  Tue Apr 30 21:53:49 2019
From: |zz46 @end|ng |rom p@u@edu (Zhang, Lixiang)
Date: Tue, 30 Apr 2019 19:53:49 +0000
Subject: [R-pkg-devel] Need help for Debian check error
In-Reply-To: <01d4fb81$Blat.v3.2.16$23745f61$2ec747d18@mail.statistik.tu-dortmund.de>
References: <20190425155509.452271629D9@xmpalantir.wu.ac.at>
 ,<01d4fb81$Blat.v3.2.16$23745f61$2ec747d18@mail.statistik.tu-dortmund.de>
Message-ID: <DM6PR02MB5033FE5ED76EF2276926C82CB83A0@DM6PR02MB5033.namprd02.prod.outlook.com>

Sorry to interrupt, but I have some problems that I don't understand about the check result. It shows that it passes the check using R CMD check --as-cran. But when I submit to cran, it shows me an error on Debian:

* checking whether package ?cps? can be installed ... [8s/8s] ERROR
Installation failed.

I don't know why is that happening and how should I fix it. Thanks a lot for your help.

Best,
Lixiang

PS: here are the details

Dear maintainer,

package cps_1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2Fcps_1.0_20190425_175509%2FWindows%2F00check.log&amp;data=02%7C01%7Clzz46%40psu.edu%7Cb89881b3b8a2475bd86508d6c9984a77%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C1%7C636918053268255366&amp;sdata=5%2BBvfk3P%2FrLqPnit1Y%2B7tbweQzqdLsz9ZcIq3Vac%2B7o%3D&amp;reserved=0>
Status: 1 NOTE
Debian: <https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2Fcps_1.0_20190425_175509%2FDebian%2F00check.log&amp;data=02%7C01%7Clzz46%40psu.edu%7Cb89881b3b8a2475bd86508d6c9984a77%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C1%7C636918053268255366&amp;sdata=oah7uKaY4vJu598t%2FOviixwXcCRbad9Z22Xn3SAQ0qU%3D&amp;reserved=0>
Status: 1 ERROR, 1 NOTE



Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Clzz46%40psu.edu%7Cb89881b3b8a2475bd86508d6c9984a77%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C1%7C636918053268255366&amp;sdata=BdYqaJ%2FCcCK1zkc4nDRbOCBImN5EqprOEprLr1sXTU0%3D&amp;reserved=0>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2Fcps_1.0_20190425_175509%2F&amp;data=02%7C01%7Clzz46%40psu.edu%7Cb89881b3b8a2475bd86508d6c9984a77%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C1%7C636918053268255366&amp;sdata=fZ5CtQ0YhwqddciDLi6kxts3GQhpwCa3j49yhpKwuwU%3D&amp;reserved=0>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 00details.log
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190430/3d6bec70/attachment.log>

From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 30 22:12:40 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 30 Apr 2019 16:12:40 -0400
Subject: [R-pkg-devel] Need help for Debian check error
In-Reply-To: <DM6PR02MB5033FE5ED76EF2276926C82CB83A0@DM6PR02MB5033.namprd02.prod.outlook.com>
References: <20190425155509.452271629D9@xmpalantir.wu.ac.at>
 <01d4fb81$Blat.v3.2.16$23745f61$2ec747d18@mail.statistik.tu-dortmund.de>
 <DM6PR02MB5033FE5ED76EF2276926C82CB83A0@DM6PR02MB5033.namprd02.prod.outlook.com>
Message-ID: <1c8f6354-e538-9f57-e46a-575c42e8ecb9@gmail.com>

On 30/04/2019 3:53 p.m., Zhang, Lixiang wrote:
> Sorry to interrupt, but I have some problems that I don't understand about the check result. It shows that it passes the check using R CMD check --as-cran. But when I submit to cran, it shows me an error on Debian:
> 
> * checking whether package ?cps? can be installed ... [8s/8s] ERROR
> Installation failed.
> 
> I don't know why is that happening and how should I fix it. Thanks a lot for your help.

I can't see your package, but the file

https://win-builder.r-project.org/incoming_pretest/cps_1.0_20190425_175509/Debian/00install.out

contains an explanation of the build error:

huge.cpp: In function ?float match_fast(float*, float*, float*, int, 
int, float*)?:
huge.cpp:374:16: error: ?HUGE? was not declared in this scope
          minval=HUGE;


So you need to work out why HUGE is defined on Windows but not on Debian.

Duncan Murdoch


From |uc@r @end|ng |rom |edor@project@org  Tue Apr 30 22:14:18 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 30 Apr 2019 22:14:18 +0200
Subject: [R-pkg-devel] Need help for Debian check error
In-Reply-To: <DM6PR02MB5033FE5ED76EF2276926C82CB83A0@DM6PR02MB5033.namprd02.prod.outlook.com>
References: <20190425155509.452271629D9@xmpalantir.wu.ac.at>
 <01d4fb81$Blat.v3.2.16$23745f61$2ec747d18@mail.statistik.tu-dortmund.de>
 <DM6PR02MB5033FE5ED76EF2276926C82CB83A0@DM6PR02MB5033.namprd02.prod.outlook.com>
Message-ID: <CALEXWq3pKyzRdfkz4E+SW9XGnwNr2DeTYxv1qSZGdr7oV2WYxg@mail.gmail.com>

On Tue, 30 Apr 2019 at 22:06, Zhang, Lixiang <lzz46 at psu.edu> wrote:
>
> Sorry to interrupt, but I have some problems that I don't understand about the check result. It shows that it passes the check using R CMD check --as-cran. But when I submit to cran, it shows me an error on Debian:
>
> * checking whether package ?cps? can be installed ... [8s/8s] ERROR
> Installation failed.
>
> I don't know why is that happening and how should I fix it. Thanks a lot for your help.

See the 00install.out:

https://win-builder.r-project.org/incoming_pretest/cps_1.0_20190425_175509/Debian/00install.out

huge.cpp:374:16: error: ?HUGE? was not declared in this scope
         minval=HUGE;
                ^~~~

-- 
I?aki ?car


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Apr 30 22:17:19 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 30 Apr 2019 23:17:19 +0300
Subject: [R-pkg-devel] Need help for Debian check error
In-Reply-To: <DM6PR02MB5033FE5ED76EF2276926C82CB83A0@DM6PR02MB5033.namprd02.prod.outlook.com>
References: <20190425155509.452271629D9@xmpalantir.wu.ac.at>
 <01d4fb81$Blat.v3.2.16$23745f61$2ec747d18@mail.statistik.tu-dortmund.de>
 <DM6PR02MB5033FE5ED76EF2276926C82CB83A0@DM6PR02MB5033.namprd02.prod.outlook.com>
Message-ID: <20190430231719.5947f190@Tarkus>

On Tue, 30 Apr 2019 19:53:49 +0000
"Zhang, Lixiang" <lzz46 at psu.edu> wrote:

> I don't know why is that happening and how should I fix it. Thanks a
> lot for your help.

The e-mail from CRAN also said,

>> More details are given in the directory:

followed by a link scrambled by your e-mail software. When you follow
the link, you can find this file:

https://win-builder.r-project.org/incoming_pretest/cps_1.0_20190425_175509/Debian/00install.out

which lists the messages from the compiler produced when trying to
build your package on a Debian machine. "HUGE" is not an identifier
defined anywhere in C++ standard (AFAIK), but in standard <cmath>
header you can find HUGE_VAL
<https://en.cppreference.com/w/cpp/numeric/math/HUGE_VAL>, which seems
to do what you mean.

-- 
Best regards,
Ivan


From m@rk@hogue@chp @end|ng |rom gm@||@com  Wed May  1 04:06:07 2019
From: m@rk@hogue@chp @end|ng |rom gm@||@com (Mark Hogue)
Date: Tue, 30 Apr 2019 22:06:07 -0400
Subject: [R-pkg-devel] Whack-a-mole base::assign(".ptime", proc.time(),
 pos = "CheckExEnv")
In-Reply-To: <94CD643A-D7C1-46B1-8663-54A007A1FE33@gmail.com>
References: <CAHPRF8fzQTXGqoMk6r0nhSEB9Au0hXk8u0tCLp5W7+Er_jFDDw@mail.gmail.com>
 <94CD643A-D7C1-46B1-8663-54A007A1FE33@gmail.com>
Message-ID: <CAHPRF8dSHGbzORgj-X-9Lna4RYobV28nQMWp7XPYCRQ92NUk6Q@mail.gmail.com>

Thank you very much Peter. Your advice helped me find the error. I had not
previously known where to find the package's -Ex.R file, and I didn't even
realize that this was a timeout error. (The -Ex.R file was in my working
directory, not the package directory.) One function did have some long
examples, but that function was never mentioned in the error, so it was
very confusing.

Cheers,

Mark

On Tue, Apr 30, 2019 at 4:44 AM peter dalgaard <pdalgd at gmail.com> wrote:

> That line is a generic part of the timing (it records current time so that
> at the end you can do what amounts to "Time used:" proc.time() - .ptime).
>
> It is not likely to contain the actual error -- notice that the message
> just gives you a best guess of the error location and that may fail. You
> probably need to have a look at the actual radsafer-Ex.R file and its
> output to find the true culprit.
>
> If you have catastrophic failures, yes, you see them only one at a time.
>
> -pd
>
> > On 30 Apr 2019, at 03:16 , Mark Hogue <mark.hogue.chp at gmail.com> wrote:
> >
> > (The subject title is in reference to the arcade game where fake mole
> heads
> > pop up and the contestant is challenged to smash them down as more and
> more
> > keep popping up.)
> >
> > I made some changes to a package and when I run the R CMD check, I get
> one
> > error with this lead-in notification:
> >
> > Running examples in 'radsafer-Ex.R' failed
> >  The error most likely occurred in:
> > *base::assign(".ptime", proc.time(), pos = "CheckExEnv")*
> >
> > When I do something with the affected function, I get a similar error on
> > another function.
> >
> > Could it have something to do with my having added argument checks on
> these
> > functions? Could someone advise where to go to understand this error
> > better? And is it normal to get only one error at a time like this?
> >
> > Thanks,
> >
> > Mark
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Fri May  3 16:02:36 2019
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Fri, 3 May 2019 10:02:36 -0400
Subject: [R-pkg-devel] False Positive WARNING in devtools::check_built
Message-ID: <CAMVrHdBkQE9r9UuFPgrBROLBU2GWzp8aLAeB9zzwEOn-4PMWrA@mail.gmail.com>

Hello,


I have run devtools::check_built() on my package tarball to ensure the
presence of no ERRORS/WARNINGS or NOTES. The below WARNING was found:


W  checking for unstated dependencies in examples ...

   Warning: parse error in file 'HACSim-Ex.R':

   197:17: unexpected symbol

   196: # user prompted to select appropriate FASTA file of

   197: aligned/trimmed DNA

                                            ^


My documentation doesn't run up to line 197. All documentation is below 100
lines in length.


Prior to a small fix (changing \dontrun to \donttest), my package had zero
WARNINGS, ERRORS and NOTES.


The WARNING seems to stem from the 'DNA' reference within the comment.


Is the above WARNING a false positive?


i recently updated to R 3.5.3, could this have caused this issue?



Thanks!



Cheers,


Jarrett

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri May  3 16:11:47 2019
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 3 May 2019 15:11:47 +0100
Subject: [R-pkg-devel] False Positive WARNING in devtools::check_built
In-Reply-To: <CAMVrHdBkQE9r9UuFPgrBROLBU2GWzp8aLAeB9zzwEOn-4PMWrA@mail.gmail.com>
References: <CAMVrHdBkQE9r9UuFPgrBROLBU2GWzp8aLAeB9zzwEOn-4PMWrA@mail.gmail.com>
Message-ID: <caf2ecee-a932-3d0d-09c0-d6224a1d7492@dewey.myzen.co.uk>

Dear Jarrett

Not clear what is going on here but that seems to be an error in your 
source code not the documentation file as you hint.

Michael

On 03/05/2019 15:02, Jarrett Phillips wrote:
> Hello,
> 
> 
> I have run devtools::check_built() on my package tarball to ensure the
> presence of no ERRORS/WARNINGS or NOTES. The below WARNING was found:
> 
> 
> W  checking for unstated dependencies in examples ...
> 
>     Warning: parse error in file 'HACSim-Ex.R':
> 
>     197:17: unexpected symbol
> 
>     196: # user prompted to select appropriate FASTA file of
> 
>     197: aligned/trimmed DNA
> 
>                                              ^
> 
> 
> My documentation doesn't run up to line 197. All documentation is below 100
> lines in length.
> 
> 
> Prior to a small fix (changing \dontrun to \donttest), my package had zero
> WARNINGS, ERRORS and NOTES.
> 
> 
> The WARNING seems to stem from the 'DNA' reference within the comment.
> 
> 
> Is the above WARNING a false positive?
> 
> 
> i recently updated to R 3.5.3, could this have caused this issue?
> 
> 
> 
> Thanks!
> 
> 
> 
> Cheers,
> 
> 
> Jarrett
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ---
> This email has been checked for viruses by AVG.
> https://www.avg.com
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri May  3 16:18:14 2019
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 3 May 2019 09:18:14 -0500
Subject: [R-pkg-devel] clang: error: unsupported option '-fopenmp'
Message-ID: <cc47e694-eb13-1cb7-0556-4f1df43c54d1@effectivedefense.org>

Hello, All:


 ????? I'm getting "clang: error: unsupported option '-fopenmp'" when 
trying to build "https://github.com/helske/bssm" under macOS 10.14.14 
with R 3.6.0;? see below.


 ????? What do you suggest?


 ????? Thanks,
 ????? Spencer Graves


p.s.? I assume I have to install compiler(s).? However, I've so far been 
unable to find instructions that are sufficiently current to convince me 
I might not do more harm than good following them.


 > R CMD build bssm
* checking for file ?bssm/DESCRIPTION? ... OK
* preparing ?bssm?:
* checking DESCRIPTION meta-information ... OK
* cleaning src
* installing the package to build vignettes
 ????? -----------------------------------
* installing *source* package ?bssm? ...
** using staged installation
** libs
clang++ -std=gnu++11 
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include" 
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include" 
-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk 
-I/usr/local/include -fopenmp -fPIC? -Wall -g -O2? -c R_approx.cpp -o 
R_approx.o
clang: error: unsupported option '-fopenmp'
make: *** [R_approx.o] Error 1
ERROR: compilation failed for package ?bssm?
* removing 
?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
 ????? -----------------------------------
ERROR: package installation failed


From m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@  Fri May  3 16:36:11 2019
From: m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@ (Maxime Turgeon)
Date: Fri, 3 May 2019 14:36:11 +0000
Subject: [R-pkg-devel] clang: error: unsupported option '-fopenmp'
In-Reply-To: <cc47e694-eb13-1cb7-0556-4f1df43c54d1@effectivedefense.org>
References: <cc47e694-eb13-1cb7-0556-4f1df43c54d1@effectivedefense.org>
Message-ID: <YTBPR01MB270115ABEE82A1E693E98BA7BA350@YTBPR01MB2701.CANPRD01.PROD.OUTLOOK.COM>

Hi Spencer,

I remember having a similar error a few years ago when trying to compile R (and its recommended packages, e.g. mgcv) from source. I was using clang as a compiler (this is what Hadley recommends in his book "R packages"), and I solved the issue by going back to g++. This can be done in your ".R/Makevars" file. Alternatively, you could switch to a version of clang that supports OpenMP.

Best,
Max
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Spencer Graves <spencer.graves at effectivedefense.org>
Sent: May 3, 2019 10:18 AM
To: List r-package-devel
Subject: [R-pkg-devel] clang: error: unsupported option '-fopenmp'

Hello, All:


       I'm getting "clang: error: unsupported option '-fopenmp'" when
trying to build "https://github.com/helske/bssm" under macOS 10.14.14
with R 3.6.0;  see below.


       What do you suggest?


       Thanks,
       Spencer Graves


p.s.  I assume I have to install compiler(s).  However, I've so far been
unable to find instructions that are sufficiently current to convince me
I might not do more harm than good following them.


 > R CMD build bssm
* checking for file ?bssm/DESCRIPTION? ... OK
* preparing ?bssm?:
* checking DESCRIPTION meta-information ... OK
* cleaning src
* installing the package to build vignettes
       -----------------------------------
* installing *source* package ?bssm? ...
** using staged installation
** libs
clang++ -std=gnu++11
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
-I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
-I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
R_approx.o
clang: error: unsupported option '-fopenmp'
make: *** [R_approx.o] Error 1
ERROR: compilation failed for package ?bssm?
* removing
?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
       -----------------------------------
ERROR: package installation failed

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From peter@c@rbonetto @end|ng |rom gm@||@com  Fri May  3 17:24:44 2019
From: peter@c@rbonetto @end|ng |rom gm@||@com (Peter Carbonetto)
Date: Fri, 3 May 2019 10:24:44 -0500
Subject: [R-pkg-devel] clang: error: unsupported option '-fopenmp'
In-Reply-To: <YTBPR01MB270115ABEE82A1E693E98BA7BA350@YTBPR01MB2701.CANPRD01.PROD.OUTLOOK.COM>
References: <cc47e694-eb13-1cb7-0556-4f1df43c54d1@effectivedefense.org>
 <YTBPR01MB270115ABEE82A1E693E98BA7BA350@YTBPR01MB2701.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAPvCojLEc2A_NXPQmwvyU=T=7by6cdko-5WpstTndWyGzhBSLQ@mail.gmail.com>

Have you seen this note (from https://cran.r-project.org/bin/macosx/)?

Important: this release uses Clang 7.0.0 and GNU Fortran 6.1, neither of
which is supplied by Apple. If you wish to compile R packages from sources,
you will need to download and install those tools - see the tools
directory.

Peter Carbonetto
Computational Scientist, Statistics & Genetics,
Research Computing Center & Dept. of Human Genetics
University of Chicago

On Fri, May 3, 2019 at 9:36 AM Maxime Turgeon <maxime.turgeon at mail.mcgill.ca>
wrote:

> Hi Spencer,
>
> I remember having a similar error a few years ago when trying to compile R
> (and its recommended packages, e.g. mgcv) from source. I was using clang as
> a compiler (this is what Hadley recommends in his book "R packages"), and I
> solved the issue by going back to g++. This can be done in your
> ".R/Makevars" file. Alternatively, you could switch to a version of clang
> that supports OpenMP.
>
> Best,
> Max
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Spencer Graves <spencer.graves at effectivedefense.org>
> Sent: May 3, 2019 10:18 AM
> To: List r-package-devel
> Subject: [R-pkg-devel] clang: error: unsupported option '-fopenmp'
>
> Hello, All:
>
>
>        I'm getting "clang: error: unsupported option '-fopenmp'" when
> trying to build "https://github.com/helske/bssm" under macOS 10.14.14
> with R 3.6.0;  see below.
>
>
>        What do you suggest?
>
>
>        Thanks,
>        Spencer Graves
>
>
> p.s.  I assume I have to install compiler(s).  However, I've so far been
> unable to find instructions that are sufficiently current to convince me
> I might not do more harm than good following them.
>
>
>  > R CMD build bssm
> * checking for file ?bssm/DESCRIPTION? ... OK
> * preparing ?bssm?:
> * checking DESCRIPTION meta-information ... OK
> * cleaning src
> * installing the package to build vignettes
>        -----------------------------------
> * installing *source* package ?bssm? ...
> ** using staged installation
> ** libs
> clang++ -std=gnu++11
> -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/BH/include"
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/Rcpp/include"
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/RcppArmadillo/include"
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/ramcmc/include"
>
> -I"/Library/Frameworks/R.framework/Versions/3.6/Resources/library/sitmo/include"
> -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
> -I/usr/local/include -fopenmp -fPIC  -Wall -g -O2  -c R_approx.cpp -o
> R_approx.o
> clang: error: unsupported option '-fopenmp'
> make: *** [R_approx.o] Error 1
> ERROR: compilation failed for package ?bssm?
> * removing
>
> ?/private/var/folders/mh/mrm_14nx19g13lsnj9zmvwjr0000gn/T/RtmppA2gBg/Rinst24427c5cbfeb/bssm?
>        -----------------------------------
> ERROR: package installation failed
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri May  3 17:33:11 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 3 May 2019 11:33:11 -0400
Subject: [R-pkg-devel] False Positive WARNING in devtools::check_built
In-Reply-To: <CAMVrHdBkQE9r9UuFPgrBROLBU2GWzp8aLAeB9zzwEOn-4PMWrA@mail.gmail.com>
References: <CAMVrHdBkQE9r9UuFPgrBROLBU2GWzp8aLAeB9zzwEOn-4PMWrA@mail.gmail.com>
Message-ID: <5858fab2-5bd3-d57b-2273-276a79bd15e0@gmail.com>

On 03/05/2019 10:02 a.m., Jarrett Phillips wrote:
> Hello,
> 
> 
> I have run devtools::check_built() on my package tarball to ensure the
> presence of no ERRORS/WARNINGS or NOTES. The below WARNING was found:

That appears to be similar to this bug, which has been fixed in R-devel:

https://bugs.r-project.org/bugzilla/show_bug.cgi?id=17558

That fix only handled the case of an example using data() with the 
package argument set to an expression, not a constant string.  Does one 
of your examples do that?  Other possible functions which haven't been 
fixed are "library", "require", "loadNamespace", "requireNamespace".  If 
you use one of those in an unusual way, that might be the cause.

If that doesn't help, I'd be willing to take a look at the tarball to 
see if I can spot what's going on.

Duncan Murdoch

>  
> 
> W  checking for unstated dependencies in examples ...
> 
>     Warning: parse error in file 'HACSim-Ex.R':
> 
>     197:17: unexpected symbol
> 
>     196: # user prompted to select appropriate FASTA file of
> 
>     197: aligned/trimmed DNA
> 
>                                              ^
> 
> 
> My documentation doesn't run up to line 197. All documentation is below 100
> lines in length.
> 
> 
> Prior to a small fix (changing \dontrun to \donttest), my package had zero
> WARNINGS, ERRORS and NOTES.
> 
> 
> The WARNING seems to stem from the 'DNA' reference within the comment.
> 
> 
> Is the above WARNING a false positive?
> 
> 
> i recently updated to R 3.5.3, could this have caused this issue?
> 
> 
> 
> Thanks!
> 
> 
> 
> Cheers,
> 
> 
> Jarrett
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From mxkuhn @end|ng |rom gm@||@com  Fri May  3 17:55:34 2019
From: mxkuhn @end|ng |rom gm@||@com (Max Kuhn)
Date: Fri, 3 May 2019 11:55:34 -0400
Subject: [R-pkg-devel] CRAN modifications of packages
Message-ID: <CAJ9CoW=JUEmHNAXsxE-aoFDT0Z_A0iiCyaE4CpPoS0YiDEK9+w@mail.gmail.com>

I've noticed a trend in the last year of a CRAN maintainer making
modifications to packages without notification to the package authors or
the community. Some times these have been made during a submission [1]
and,  in other cases, for existing packages [2]. In the latter case, we
intuit  that there are some cases where the maintainers have not responded
to  communications about required changes to existing versions.

In some cases, the changes are minor (see rngtools example linked below)
but also come with a strict R version dependency on the *current* version.
This causes a considerable number of problems for these packages and their
reverse dependencies. Since the reasons for the changes are not public, it
is unclear why they could not have been considerably less invasive.   The
process of making these changes is in direct opposition to the CRAN
policies, such as

> If for some reason the submission has to be made by someone else (for
example, a co-author) this needs to be explained, and the designated
maintainer will need to confirm the submission.

> If an update will change the package?s API and hence affect packages
depending on it, it is expected that you will contact the maintainers of
affected packages and suggest changes, and give them time (at least 2
weeks, ideally more) to prepare updates before submitting your updated
package.

It is understandable that the CRAN maintainers require package maintainers
to check reverse dependencies. There doesn't appear to be a good reason
that CRAN maintainers do not follow these rules.

In the case where a package maintainer has not properly responded to a
substantive issue, it is unclear what should happen. This does put CRAN in
a bad position, but one would hope that minimally invasive changes be made
and that the impact on the reverse dependencies be measured and processed
like a normal CRAN submission.  In particular, the effect of making
quadprog >= 3.6.0 has been significant due to failures to install  reverse
dependencies.

Perhaps some minimal changes to the process could be:

1. There should be some sort of visible status (analogous to ORPHANED)
that clearly indicates this has happened, so users can better understand
the context of the change. An update to any NEWS file would also be
appropriate.

2. CRAN should, at least temporarily, be listed as an author.

3. Reverse dependency authors who are affected are notified a priori.

Has anyone else experienced similar situations and how did you deal with
the consequences of the changes?

Examples

[1] https://github.com/gdkrmr/dimRed/issues/27#issuecomment-437458488

[2]

https://github.com/cran/rngtools/commit/c9c036b18e0bf6f20afcab15a2b38083aaf62da7


and

https://github.com/cran/quadprog/commit/a559f064e20f803ab3ffde413e7686d9c6299083

	[[alternative HTML version deleted]]


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Sat May  4 00:33:45 2019
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Fri, 3 May 2019 18:33:45 -0400
Subject: [R-pkg-devel] Writing to files without altering working directory
 in R package
Message-ID: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>

Hello,

My R package has a function with an argument to specify whether numerical
results should be outputted to a CSV file.

CRAN policy stipulates verbatim that

Packages should not write in the user?s home filespace (including
clipboards), nor anywhere else on the file system apart from the R
session?s temporary directory (or during installation in the location
pointed to by TMPDIR: and such usage should be cleaned up). Installing into
the system?s R installation (e.g., scripts to its bin directory) is not
allowed.

I know I should use tempdir() within my package function, but I've not seen
any examples on how this is best done within existing R packages.

Within my package documentation examples for my function, I have the lines:

 \dontshow{.oldwd <- setwd(tempdir())}

... some R code ...

\dontshow{setwd(.oldwd)}

but I have been informed that this is not the accepted way.

Any ideas from the community on how do do this properly?


Thanks for the help!

Cheers,

Jarrett

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat May  4 00:37:50 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 4 May 2019 00:37:50 +0200
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
Message-ID: <37b5baa9-78db-5544-3121-1592fd70b347@statistik.tu-dortmund.de>



On 04.05.2019 00:33, Jarrett Phillips wrote:
> Hello,
> 
> My R package has a function with an argument to specify whether numerical
> results should be outputted to a CSV file.
> 
> CRAN policy stipulates verbatim that
> 
> Packages should not write in the user?s home filespace (including
> clipboards), nor anywhere else on the file system apart from the R
> session?s temporary directory (or during installation in the location
> pointed to by TMPDIR: and such usage should be cleaned up). Installing into
> the system?s R installation (e.g., scripts to its bin directory) is not
> allowed.
> 
> I know I should use tempdir() within my package function, but I've not seen
> any examples on how this is best done within existing R packages.
> 
> Within my package documentation examples for my function, I have the lines:
> 
>   \dontshow{.oldwd <- setwd(tempdir())}


1. the user who copies the example to the R console does not change to 
the tempdir() and still overwrites files in her/his filespace.

2. And even if you o not wrap this in \dontshow, a user may oinly copy a 
part and then changes the workdir.

Why not simply use tempdir() in the code that writes the file in the 
example?

Best,
Uwe Ligges

> ... some R code ...
> 
> \dontshow{setwd(.oldwd)}
> 
> but I have been informed that this is not the accepted way.
> 
> Any ideas from the community on how do do this properly?
> 
> 
> Thanks for the help!
> 
> Cheers,
> 
> Jarrett
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat May  4 01:58:59 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 3 May 2019 19:58:59 -0400
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
Message-ID: <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>

On 03/05/2019 6:33 p.m., Jarrett Phillips wrote:
> Hello,
> 
> My R package has a function with an argument to specify whether numerical
> results should be outputted to a CSV file.
> 
> CRAN policy stipulates verbatim that
> 
> Packages should not write in the user?s home filespace (including
> clipboards), nor anywhere else on the file system apart from the R
> session?s temporary directory (or during installation in the location
> pointed to by TMPDIR: and such usage should be cleaned up). Installing into
> the system?s R installation (e.g., scripts to its bin directory) is not
> allowed.
> 
> I know I should use tempdir() within my package function, but I've not seen
> any examples on how this is best done within existing R packages.
> 
> Within my package documentation examples for my function, I have the lines:
> 
>   \dontshow{.oldwd <- setwd(tempdir())}
> 
> ... some R code ...
> 
> \dontshow{setwd(.oldwd)}
> 
> but I have been informed that this is not the accepted way.
> 
> Any ideas from the community on how do do this properly?

Use the tempfile() function to generate a filename in the temporary 
directory.  You might want to use the "pattern" or "fileext" arguments, 
but don't change the "tmpdir" argument.

Then write to that file.

For example,

filename <- tempfile(fileext = ".csv")
write.csv(df, filename)

It's a good idea to clean up afterwards using

unlink(filename)


From w@ngz1 @end|ng |rom uth@c@@@edu  Sun May  5 00:41:16 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Sat, 4 May 2019 22:41:16 +0000
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
Message-ID: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>

Hello,

In an R package I would like to compute intercept for an intercept-only GLM in a Fortran subroutine. For instance, in logistic regression, how to obtain an intercept in this simple model? I know glm_fit calls some Fortran subroutine, but I am not trying to invent something here. Any other suggestions?

Thanks,

Zhu Wang


	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Sun May  5 14:44:24 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Sun, 5 May 2019 12:44:24 +0000 (UTC)
Subject: [R-pkg-devel] package cartograflow_1.0.0.tar.gz
In-Reply-To: <66763bd4-abe4-6722-8701-ebd32fd8e947@gmail.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
 <66763bd4-abe4-6722-8701-ebd32fd8e947@gmail.com>
Message-ID: <1021675849.7150775.1557060264554@mail.yahoo.com>

 Hi,?
After I submitted my package I received some remarks e.g add the exmple that I've taken into account. 
So, I used R-devel CMD check, I've always one 1 note about maintener which it's not a problem to submit and another note due to package size. 
...
* checking installed package size ... NOTE? installed size is? 5.0Mb
? sub-directories of 1Mb or more:
??? doc?? 4.4Mb...
I would like to know if I can submit in CRAN with this note if not, do you hnow how I can solve this issue? 
In vignette directories the html file size is of 4.3MB. I don't know how I can reduce the size. There are a lot of picture (cartography). 
Thanks in advance to your replySylvain

    Le dimanche 7 avril 2019 ? 21:32:07 UTC+2, Duncan Murdoch <murdoch.duncan at gmail.com> a ?crit :  
 
 On 07/04/2019 3:01 p.m., cartograflow at gmail.com wrote:
> Thanks!
> So, I've already check and I didn't see the descrption of the note in 
> 00check.log.
> The only thing I can say is that there's a problem with Author.
> I tried to put Authors at R and it also generates notes.
> Do you have any idea?
> 
> You will find hereafter the copy of the file 00check.log.
> Thanks in advance
> ----------------
> * using log directory ?/home/sylvain/svn/cartograflow.Rcheck?
> * using R Under development (unstable) (2019-04-04 r76316)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?cartograflow/DESCRIPTION? ... OK
> * this is package ?cartograflow? version ?1.0.0.0?
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr>?
> 
> New submission
> 
> Author field should be Authors at R.? Current value is:
>? ? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr", 
> role = c("cre","aut")),
>? ??????????? person("other", "other", email = "other.other at gmail.com", 
> role = c("aut")))

That second author doesn't look right, but I don't think the note is 
complaining about that.? I think you probably have put something like 
this in your DESCRIPTION file:

Author:? c(person("Sylvain", "Blondeau", email = 
"blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
? ? ? ? ? ? person("other", "other", email = "other.other at gmail.com",
role = c("aut")))

and what it is saying is that you should instead use

Authors at R:? c(person("Sylvain", "Blondeau", email = 
"blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
? ? ? ? ? ? person("other", "other", email = "other.other at gmail.com",
role = c("aut")))

If my guess is right and you fix it, you may still get a NOTE.? To make 
it easier for the CRAN maintainers to know who to contact in case of an 
issue with the package, they display information about the package 
maintainer in a NOTE.? Since most NOTEs indicate likely problems, it 
would probably make sense for them to use some other formatting for the 
message, but that's how it is.

Duncan Murdoch



> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ?cartograflow? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking for future file timestamps ... OK
> * checking ?build? directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies 
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking installed files from ?inst/doc? ... OK
> * checking files in ?vignettes? ... OK
> * checking examples ... OK
> * checking for unstated dependencies in ?tests? ... OK
> * checking tests ... OK
>? ? Running ?testthat.R?
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in ?inst/doc? ... OK
> * checking re-building of vignette outputs ... OK
> * checking PDF version of manual ... OK
> * DONE
> Status: 1 NOTE
> 
> 
> Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch 
> <murdoch.duncan at gmail.com> a ?crit :
> 
> 
> On 07/04/2019 12:16 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com> wrote:
>? > Hi,Thanks to your reply and your information.?Right now it stays only 
> one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't 
> identified this note in repertory R.check. What's file I've to check?I'd 
> like to know if I can new submission in CRAN with one note.?Sylvain
> 
> It will be in cartograflow.Rcheck/00check.log.
> 
> Duncan Murdoch
> 
> 
>? >
>? >
>? >
>? > Envoy? depuis Yahoo?Mail pour Android
>? >
>? >? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle 
> SALMON<maelle.salmon at yahoo.se <mailto:maelle.salmon at yahoo.se>> a ?crit 
> :? ? I'd recommend reading 
> https://r-pkgs.org/description.html#dependencies (and the rest of the 
> book is very good as well), it'll help you understand why and how to 
> declare dependencies.
>? >
>? >
>? >
>? >
>? >? ? ? Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com> <cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>> skrev:
>? >
>? >? How I can declare the dependencies in DESCRIPTION file?
>? >? ?depends: library(dplyr,dependencies =TRUE)
>? > Thanks
>? > Envoy? depuis Yahoo?Mail pour Android
>? >
>? >? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe 
> Ligges<ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? .... or forgot to 
> declare a dependency on that package in the
>? > DESCRIPTION file...
>? >
>? > Best,
>? > Uwe Ligges
>? >
>? > On 04.04.2019 13:34, Sebastian Meyer wrote:
>? >> There are probably no clairvoyants around here. So, again, without
>? >> access to the up-to-date source code of your package, nobody will be
>? >> able to help.
>? >>
>? >> "there is no package called ..." means that the given package is not
>? >> installed in any of the libraries currently in use by R (see .libPaths()
>? >> for the relevant paths). Maybe you have installed "dplyr" in a library
>? >> used by your standard R installation, but not in any library used by
>? >> your R-devel installation (which you seem to use for checking the
>? >> package)? Just a wild guess.
>? >>
>? >>
>? >> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>:
>? >>> I follow up your recommendation and for the moment I didn't used
>? >>> "conflicted".
>? >>>
>? >>> So, I've made the nex R CMD check and I have the problem
>? >>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>? >>> vI[[i]]) :
>? >>>? ? ? there is no package called ?dplyr?
>? >>>
>? >>> How I can? solve this issue?
>? >>>
>? >>> Thanks in advance
>? >>>
>? >>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>? >>> <seb.meyer at fau.de <mailto:seb.meyer at fau.de>> a ?crit :
>? >>>
>? >>>
>? >>> Note that output concerning masked objects are just messages which do
>? >>> not cause your vignette to fail. So it is not stricly necessary to 
> start
>? >>> working on these conflicts now.
>? >>>
>? >>> However, looking closely at the win-builder check results
>? >>> 
> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>? >>> I see the following output below these messages
>? >>>
>? >>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>? >>>> Quitting from lines 529-573 (cartograflow.Rmd)
>? >>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>? >>>> argument is of length zero
>? >>>
>? >>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>? >>> vignette (at least in the version submitted to win-builder a few 
> weeks ago).
>? >>>
>? >>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>? >>>
>? >>>> Error in if (horiz) { : argument is of length zero
>? >>>
>? >>> and the subsequent traceback() shows that the error originates from
>? >>>
>? >>>> layoutLayer(title = "Professional mobility in Greater Paris",
>? >>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", 
> sources =
>? >>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>? >>> 2414 RIATE, 2018.",
>? >>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>? >>> "topright"),
>? >>>>? ? ? ? ? ? col = "grey")
>? >>>
>? >>> So it seems to me that the unnamed argument 'north(pos = 
> "topright")' is
>? >>> wrongly matched to the "horiz" argument of layoutLayer().
>? >>>
>? >>> Cheers,
>? >>>
>? >>>? ? ??? Sebastian
>? >>>
>? >>>
>? >>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>:
>? >>>>
>? >>>> Hi,I don't know if my explanations are clear.I tried several way to
>? >>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>? >>>>
>? >>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>? >>>>>? ? ? Hi,
>? >>>>>
>? >>>>> I come back to you? because I have always the problem with
>? >>> devtools::check of my package.
>? >>>>>
>? >>>>> I used the command to check my package with R-devel :
>? >>>>> sylvain at sylvain <mailto:sylvain at sylvain> <mailto:sylvain at sylvain 
> <mailto:sylvain at sylvain>>:~/svn$ bash R-devel.sh CMD
>? >>> check --as-cran
>? >>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>? >>>>>
>? >>>>> When I start the rmd file there is a warning due to package dplyr :
>? >>>>>? ? ????????Attaching package: 'dplyr'
>? >>>>>? ? ????????The following objects are masked from 'package:stats':
>? >>>>>? ? ??????????????????? filter, lag
>? >>>>>? ? ????????The following objects are masked from 'package:base':
>? >>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>? >>>>>
>? >>>>> The solve this issue I added in rmd file, description file and the
>? >>> namespace the package conflicted.
>? >>>>> So, the package conflicted avoid to have this warning.
>? >>>>>
>? >>>>> But when I run R-devel CMD check I have a new issue that is Error in
>? >>> loadNamespace...no package called ?conflicted? (see below)
>? >>>>>
>? >>>>> Can you help me to solve this issue if tit's possible?
>? >>>>> Thanks in advance to your help !
>? >>>>> Sylvain
>? >>>>> -----------------
>? >>>>> Below extract of 00check.log
>? >>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>? >>>>> Installation failed.
>? >>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for 
> details.
>? >>>>> * DONE
>? >>>>> Status: 1 ERROR, 1 NOTE
>? >>>>>
>? >>>>> Below 00install.out
>? >>>>> * installing *source* package ?cartograflow? ...
>? >>>>> ** using staged installation
>? >>>>> ** R
>? >>>>> ** inst
>? >>>>> ** byte-compile and prepare package for lazy loading
>? >>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>? >>> vI[[i]]) :
>? >>>>>? ? ? there is no package called ?conflicted?
>? >>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>? >>> withOneRestart -> doWithOneRestart
>? >>>>> Ex?cution arr?t?e
>? >>>>> ERROR: lazy loading failed for package ?cartograflow?
>? >>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>? >>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com> 
> <mailto:henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>>> 
> a ?crit :
>? >>>>>
>? >>>>>? ? ? FWIW, you should be able to reproduce at least the following 
> NOTEs
>? >>>>> with your current R 3.5.2 and R CMD check --as-cran:
>? >>>>>
>? >>>>> * checking CRAN incoming feasibility ... NOTE
>? >>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>>?
>? >>>>>
>? >>>>> New submission
>? >>>>>
>? >>>>> Version contains large components (0.0.0.9000)
>? >>>>>
>? >>>>> Possibly mis-spelled words in DESCRIPTION:
>? >>>>>? ? ? flowmapping (7:41)
>? >>>>>
>? >>>>> Author field should be Authors at R. <mailto:Authors at R.> 
> <mailto:Authors at R. <mailto:Authors at R.>>? Current value is:
>? >>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>? >>>>> "francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr> 
> <mailto:francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr>>",
>? >>> role = c("cre","aut")),
>? >>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>? >>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr> 
> <mailto:blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>>", role
>? >>> = c("aut"))
>? >>>>>
>? >>>>> The Title field should be in title case. Current version is:
>? >>>>> ?thematic cartography of flows and movements?
>? >>>>> In title case that is:
>? >>>>> ?Thematic Cartography of Flows and Movements?
>? >>>>>
>? >>>>> Those are all classical mistakes ("we've all been there").? The
>? >>>>> vignette errors may or may not be specific to R devel.
>? >>>>>
>? >>>>> /Henrik
>? >>>>>
>? >>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>? >>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>> wrote:
>? >>>>>>
>? >>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>? >>> use r-devel?
>? >>>>>> I confirm that I didn't received ? error message when I've made
>? >>> dev_tool::check.
>? >>>>>> How can I solve my problem ?
>? >>>>>> Thanks in advance Sylvain
>? >>>>>>
>? >>>>>>
>? >>>>>> nvoy? depuis Yahoo Mail pour Android
>? >>>>>>
>? >>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>? >>> Ligges<ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>
>? >>> <mailto:ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>>> a ?crit :? I cannot beloeve
>? >>> it. But this is certainly not R-devel?
>? >>>>>>
>? >>>>>> Not sure about devtools which we do not use on CRAN, but simply
>? >>>>>>
>? >>>>>> R CMD check --as-cran
>? >>>>>>
>? >>>>>> with a recent R-devel? version on the package tarball should 
> reproduce
>? >>>>>> the findings.
>? >>>>>>
>? >>>>>> Best,
>? >>>>>> Uwe Ligges
>? >>>>>>
>? >>>>>>
>? >>>>>> On 25.03.2019 23:12, cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>? >>>>>>> Hello,
>? >>>>>>> I've submitted my package cartograflow and I received an email from
>? >>> your teeam that it does not pass the incoming checks
>? >>> automatically.Debian:
>? >>> 
> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>? >>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>? >>>>>>>
>? >>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>? >>> check is OK.I used : ==> devtools::check(args =
>? >>> c('--no-manual','--as-cran'))Status is :
>? >>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>? >>> 0.0.0.9000 ????
>? >>>>>>> Duration: 54.6s
>? >>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>? >>>>>>> R CMD check succeeded
>? >>>>>>> Can you? help me to fix the problem?
>? >>>>>>> Thanks in advance to your replySylvain
>? >>>>>>>? ? ? ? [[alternative HTML version deleted]]
>? >>>>>>>
>? >>>>>>> ______________________________________________
>? >>>>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>? >>> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>> mailing list
>? >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>>>>>
>? >>>>>>
>? >>>>>>
>? >>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>? >>>>>>
>? >>>>>> ______________________________________________
>? >>>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>? >>> mailing list
>? >>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>
>? >>>>>? ? ??? [[alternative HTML version deleted]]
>? >>>>>
>? >>>>> ______________________________________________
>? >>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>? >>> mailing list
>? >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>>>
>? >>>>
>? >>>> ______________________________________________
>? >>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>? >>> mailing list
>? >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>>
>? >>>>
>? >>>>
>? >>>>? ? ??? [[alternative HTML version deleted]]
>? >>>>
>? >>>> ______________________________________________
>? >>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>? >>> mailing list
>? >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>>
>? >>
>? >> ______________________________________________
>? >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>? >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>
>? >
>? >
>? >? ??? [[alternative HTML version deleted]]
>? >
>? > ______________________________________________
>? > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >
>? > ??? [[alternative HTML version deleted]]
>? >
>? > ______________________________________________
>? > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >
> 

  
	[[alternative HTML version deleted]]


From |zz46 @end|ng |rom p@u@edu  Sun May  5 15:36:24 2019
From: |zz46 @end|ng |rom p@u@edu (Zhang, Lixiang)
Date: Sun, 5 May 2019 13:36:24 +0000
Subject: [R-pkg-devel] Submission Issue
Message-ID: <DM6PR02MB5033F6B80F7920FCF99D0DEDB8370@DM6PR02MB5033.namprd02.prod.outlook.com>

Hi all,

Sorry to interrupt, but I meet a weird case. After receiving some comments from the reviewer, I make some changes and pass the check on my computer. Then I resubmit the package to CRAN. But I haven't received the email about auto-processed for 1 day. When I try to submit it again it shows "The Server already contains a file with that name/version, please increase version number". Then I increase the version number and submit, but the same thing happens again.

It really confuses me. Does anyone have any idea about what is happening?

Best,
Lixiang



	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun May  5 16:56:01 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 5 May 2019 10:56:01 -0400
Subject: [R-pkg-devel] Submission Issue
In-Reply-To: <DM6PR02MB5033F6B80F7920FCF99D0DEDB8370@DM6PR02MB5033.namprd02.prod.outlook.com>
References: <DM6PR02MB5033F6B80F7920FCF99D0DEDB8370@DM6PR02MB5033.namprd02.prod.outlook.com>
Message-ID: <3ee514e3-4a83-3e77-dfb6-40a150410ff2@gmail.com>

On 05/05/2019 9:36 a.m., Zhang, Lixiang wrote:
> Hi all,
> 
> Sorry to interrupt, but I meet a weird case. After receiving some comments from the reviewer, I make some changes and pass the check on my computer. Then I resubmit the package to CRAN. But I haven't received the email about auto-processed for 1 day. When I try to submit it again it shows "The Server already contains a file with that name/version, please increase version number". Then I increase the version number and submit, but the same thing happens again.
> 
> It really confuses me. Does anyone have any idea about what is happening?
> 

Have you checked ftp://CRAN.R-project.org/incoming/ for the location of 
your package?

Duncan Murdoch


From mxkuhn @end|ng |rom gm@||@com  Sun May  5 17:46:07 2019
From: mxkuhn @end|ng |rom gm@||@com (Max Kuhn)
Date: Sun, 5 May 2019 11:46:07 -0400
Subject: [R-pkg-devel] CRAN modifications of packages
In-Reply-To: <CAJ9CoW=JUEmHNAXsxE-aoFDT0Z_A0iiCyaE4CpPoS0YiDEK9+w@mail.gmail.com>
References: <CAJ9CoW=JUEmHNAXsxE-aoFDT0Z_A0iiCyaE4CpPoS0YiDEK9+w@mail.gmail.com>
Message-ID: <CAJ9CoWn0tS7Npcb+VN2fs1FncMtp4jCfr2=7s+5CBuW82DP9Mg@mail.gmail.com>

Some other examples:

https://github.com/cran/archetypes/commit/c4b904b4b83392724ab1bb68dad2046150aba448#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/bartMachine/commit/aa807bf660925220891c5c2edeba08bde4a23481#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/bfp/commit/4e28e0919b7f7f26ccd793441d2409aba06e4541#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/biomod2/commit/8b5fbf1e5e71d9bbe2408184577d309a5eddc2b1#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/copula/commit/ac3b475d61c7ed806da2edf3f09e20f2e3b713da#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/cubature/commit/5132c784a9178bf0a0c5424848fc805be7fa8822#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/Delaporte/commit/f4c10667f1b21f7dd7286263010b5d91f920cf99#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/DiagrammeR/commit/3b753926be91aaaa35349b8422b8dcd303437c2b#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/diffobj/commit/d86edd6a581c8de695d9d70f2621e7cac8febf45#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/e1071/commit/bb30e53080210817e41e8f45397c9b064de9280d#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/ElemStatLearn/commit/4ab2e88d5b0b90cdaaa3b20d8113bc203a01f7ea#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/emplik/commit/344f321e5cd2c16878948de01191cd7cb678027a#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/etm/commit/025e60458b3618dc86da72b9c97448eaec94fc37#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/expoRkit/commit/93b6dca431ae439c473670791754a18f52fea816#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/fclust/commit/504393d27fea13b46fde04ea9444905a2538476b#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/fields/commit/9d9323471169a1a557415452432b8ca00d579329#diff-35ba4a2677442e210c23a00a5601aba3

https://github.com/cran/flexclust/commit/b455b290dde0917bb04ee73387e24d46546e0ecb#diff-35ba4a2677442e210c23a00a5601aba3

On Fri, May 3, 2019 at 11:55 AM Max Kuhn <mxkuhn at gmail.com> wrote:
>
> I've noticed a trend in the last year of a CRAN maintainer making  modifications to packages without notification to the package authors or  the community. Some times these have been made during a submission [1] and,  in other cases, for existing packages [2]. In the latter case, we intuit  that there are some cases where the maintainers have not responded to  communications about required changes to existing versions.
>
> In some cases, the changes are minor (see rngtools example linked below)  but also come with a strict R version dependency on the *current* version.  This causes a considerable number of problems for these packages and their  reverse dependencies. Since the reasons for the changes are not public, it is unclear why they could not have been considerably less invasive.   The process of making these changes is in direct opposition to the CRAN  policies, such as
>
> > If for some reason the submission has to be made by someone else (for  example, a co-author) this needs to be explained, and the designated  maintainer will need to confirm the submission.
>
> > If an update will change the package?s API and hence affect packages  depending on it, it is expected that you will contact the maintainers of  affected packages and suggest changes, and give them time (at least 2  weeks, ideally more) to prepare updates before submitting your updated  package.
>
> It is understandable that the CRAN maintainers require package maintainers  to check reverse dependencies. There doesn't appear to be a good reason  that CRAN maintainers do not follow these rules.
>
> In the case where a package maintainer has not properly responded to a  substantive issue, it is unclear what should happen. This does put CRAN in  a bad position, but one would hope that minimally invasive changes be made  and that the impact on the reverse dependencies be measured and processed  like a normal CRAN submission.  In particular, the effect of making quadprog >= 3.6.0 has been significant due to failures to install  reverse dependencies.
>
> Perhaps some minimal changes to the process could be:
>
> 1. There should be some sort of visible status (analogous to ORPHANED)  that clearly indicates this has happened, so users can better understand  the context of the change. An update to any NEWS file would also be  appropriate.
>
> 2. CRAN should, at least temporarily, be listed as an author.
>
> 3. Reverse dependency authors who are affected are notified a priori.
>
> Has anyone else experienced similar situations and how did you deal with  the consequences of the changes?
>
> Examples
>
> [1] https://github.com/gdkrmr/dimRed/issues/27#issuecomment-437458488
>
> [2]
>
> https://github.com/cran/rngtools/commit/c9c036b18e0bf6f20afcab15a2b38083aaf62da7
>
> and
>
> https://github.com/cran/quadprog/commit/a559f064e20f803ab3ffde413e7686d9c6299083


From edd @end|ng |rom deb|@n@org  Sun May  5 18:04:26 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 5 May 2019 11:04:26 -0500
Subject: [R-pkg-devel] CRAN macOS build failure
Message-ID: <23759.2442.339922.847960@rob.eddelbuettel.com>


A (somewhat resource-heavy) package of mine (RQuantLib) now fails to build on macOS:

clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG  -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.6/Rcpp/include" -I/usr/local/include -Wall -g -O2  -I/usr/local/include  -I../inst/include -I. -DBOOST_NO_AUTO_PTR -fopenmp -fPIC  -Wall -g -O2  -c vanilla.cpp -o vanilla.o
make: *** [vanilla.o] Interrupt: 2

We have seen such errors before on other OSs, it usually indicates lack of
RAM.  Who do I talk to ?

(Now, I am of course aware that the answer will likely be 'talk to Simon' but
I am posting it here to state that I find that somewhat less than ideal. Is
there really nobody else who can tickly a rebuild / reschedule resources?)

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From c@rtogr@iiow m@iii@g oii gm@ii@com  Sun May  5 20:34:34 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Sun, 5 May 2019 18:34:34 +0000 (UTC)
Subject: [R-pkg-devel] package cartograflow_1.0.0.tar.gz
In-Reply-To: <1021675849.7150775.1557060264554@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
 <66763bd4-abe4-6722-8701-ebd32fd8e947@gmail.com>
 <1021675849.7150775.1557060264554@mail.yahoo.com>
Message-ID: <2127774102.7335854.1557081274232@mail.yahoo.com>

 Hi, 
I've made a new submission. 
There is no note about checking installed package size.Thanks. 
Sylvain

    Le dimanche 5 mai 2019 ? 14:44:24 UTC+2, cartograflow at gmail.com <cartograflow at gmail.com> a ?crit :  
 
  Hi,?
After I submitted my package I received some remarks e.g add the exmple that I've taken into account. 
So, I used R-devel CMD check, I've always one 1 note about maintener which it's not a problem to submit and another note due to package size. 
...
* checking installed package size ... NOTE? installed size is? 5.0Mb
? sub-directories of 1Mb or more:
??? doc?? 4.4Mb...
I would like to know if I can submit in CRAN with this note if not, do you hnow how I can solve this issue? 
In vignette directories the html file size is of 4.3MB. I don't know how I can reduce the size. There are a lot of picture (cartography). 
Thanks in advance to your replySylvain

    Le dimanche 7 avril 2019 ? 21:32:07 UTC+2, Duncan Murdoch <murdoch.duncan at gmail.com> a ?crit :  
 
 On 07/04/2019 3:01 p.m., cartograflow at gmail.com wrote:
> Thanks!
> So, I've already check and I didn't see the descrption of the note in 
> 00check.log.
> The only thing I can say is that there's a problem with Author.
> I tried to put Authors at R and it also generates notes.
> Do you have any idea?
> 
> You will find hereafter the copy of the file 00check.log.
> Thanks in advance
> ----------------
> * using log directory ?/home/sylvain/svn/cartograflow.Rcheck?
> * using R Under development (unstable) (2019-04-04 r76316)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?cartograflow/DESCRIPTION? ... OK
> * this is package ?cartograflow? version ?1.0.0.0?
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr>?
> 
> New submission
> 
> Author field should be Authors at R.? Current value is:
>? ? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr", 
> role = c("cre","aut")),
>? ??????????? person("other", "other", email = "other.other at gmail.com", 
> role = c("aut")))

That second author doesn't look right, but I don't think the note is 
complaining about that.? I think you probably have put something like 
this in your DESCRIPTION file:

Author:? c(person("Sylvain", "Blondeau", email = 
"blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
? ? ? ? ? ? person("other", "other", email = "other.other at gmail.com",
role = c("aut")))

and what it is saying is that you should instead use

Authors at R:? c(person("Sylvain", "Blondeau", email = 
"blondeau.sylvain at yahoo.fr", role = c("cre","aut")),
? ? ? ? ? ? person("other", "other", email = "other.other at gmail.com",
role = c("aut")))

If my guess is right and you fix it, you may still get a NOTE.? To make 
it easier for the CRAN maintainers to know who to contact in case of an 
issue with the package, they display information about the package 
maintainer in a NOTE.? Since most NOTEs indicate likely problems, it 
would probably make sense for them to use some other formatting for the 
message, but that's how it is.

Duncan Murdoch



> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ?cartograflow? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking for future file timestamps ... OK
> * checking ?build? directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies 
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking installed files from ?inst/doc? ... OK
> * checking files in ?vignettes? ... OK
> * checking examples ... OK
> * checking for unstated dependencies in ?tests? ... OK
> * checking tests ... OK
>? ? Running ?testthat.R?
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in ?inst/doc? ... OK
> * checking re-building of vignette outputs ... OK
> * checking PDF version of manual ... OK
> * DONE
> Status: 1 NOTE
> 
> 
> Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch 
> <murdoch.duncan at gmail.com> a ?crit :
> 
> 
> On 07/04/2019 12:16 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com> wrote:
>? > Hi,Thanks to your reply and your information.?Right now it stays only 
> one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't 
> identified this note in repertory R.check. What's file I've to check?I'd 
> like to know if I can new submission in CRAN with one note.?Sylvain
> 
> It will be in cartograflow.Rcheck/00check.log.
> 
> Duncan Murdoch
> 
> 
>? >
>? >
>? >
>? > Envoy? depuis Yahoo?Mail pour Android
>? >
>? >? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle 
> SALMON<maelle.salmon at yahoo.se <mailto:maelle.salmon at yahoo.se>> a ?crit 
> :? ? I'd recommend reading 
> https://r-pkgs.org/description.html#dependencies (and the rest of the 
> book is very good as well), it'll help you understand why and how to 
> declare dependencies.
>? >
>? >
>? >
>? >
>? >? ? ? Den torsdag 4 april 2019 17:05:02 CEST, cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com> <cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>> skrev:
>? >
>? >? How I can declare the dependencies in DESCRIPTION file?
>? >? ?depends: library(dplyr,dependencies =TRUE)
>? > Thanks
>? > Envoy? depuis Yahoo?Mail pour Android
>? >
>? >? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe 
> Ligges<ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? .... or forgot to 
> declare a dependency on that package in the
>? > DESCRIPTION file...
>? >
>? > Best,
>? > Uwe Ligges
>? >
>? > On 04.04.2019 13:34, Sebastian Meyer wrote:
>? >> There are probably no clairvoyants around here. So, again, without
>? >> access to the up-to-date source code of your package, nobody will be
>? >> able to help.
>? >>
>? >> "there is no package called ..." means that the given package is not
>? >> installed in any of the libraries currently in use by R (see .libPaths()
>? >> for the relevant paths). Maybe you have installed "dplyr" in a library
>? >> used by your standard R installation, but not in any library used by
>? >> your R-devel installation (which you seem to use for checking the
>? >> package)? Just a wild guess.
>? >>
>? >>
>? >> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>:
>? >>> I follow up your recommendation and for the moment I didn't used
>? >>> "conflicted".
>? >>>
>? >>> So, I've made the nex R CMD check and I have the problem
>? >>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>? >>> vI[[i]]) :
>? >>>? ? ? there is no package called ?dplyr?
>? >>>
>? >>> How I can? solve this issue?
>? >>>
>? >>> Thanks in advance
>? >>>
>? >>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>? >>> <seb.meyer at fau.de <mailto:seb.meyer at fau.de>> a ?crit :
>? >>>
>? >>>
>? >>> Note that output concerning masked objects are just messages which do
>? >>> not cause your vignette to fail. So it is not stricly necessary to 
> start
>? >>> working on these conflicts now.
>? >>>
>? >>> However, looking closely at the win-builder check results
>? >>> 
> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>? >>> I see the following output below these messages
>? >>>
>? >>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>? >>>> Quitting from lines 529-573 (cartograflow.Rmd)
>? >>>> Error: processing vignette 'cartograflow.Rmd' failed with diagnostics:
>? >>>> argument is of length zero
>? >>>
>? >>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>? >>> vignette (at least in the version submitted to win-builder a few 
> weeks ago).
>? >>>
>? >>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>? >>>
>? >>>> Error in if (horiz) { : argument is of length zero
>? >>>
>? >>> and the subsequent traceback() shows that the error originates from
>? >>>
>? >>>> layoutLayer(title = "Professional mobility in Greater Paris",
>? >>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019", 
> sources =
>? >>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>? >>> 2414 RIATE, 2018.",
>? >>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>? >>> "topright"),
>? >>>>? ? ? ? ? ? col = "grey")
>? >>>
>? >>> So it seems to me that the unnamed argument 'north(pos = 
> "topright")' is
>? >>> wrongly matched to the "horiz" argument of layoutLayer().
>? >>>
>? >>> Cheers,
>? >>>
>? >>>? ? ??? Sebastian
>? >>>
>? >>>
>? >>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>:
>? >>>>
>? >>>> Hi,I don't know if my explanations are clear.I tried several way to
>? >>> solve this problem w/o success.?Someone have an idea ?Thanks in advance
>? >>>>
>? >>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>? >>>>>? ? ? Hi,
>? >>>>>
>? >>>>> I come back to you? because I have always the problem with
>? >>> devtools::check of my package.
>? >>>>>
>? >>>>> I used the command to check my package with R-devel :
>? >>>>> sylvain at sylvain <mailto:sylvain at sylvain> <mailto:sylvain at sylvain 
> <mailto:sylvain at sylvain>>:~/svn$ bash R-devel.sh CMD
>? >>> check --as-cran
>? >>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>? >>>>>
>? >>>>> When I start the rmd file there is a warning due to package dplyr :
>? >>>>>? ? ????????Attaching package: 'dplyr'
>? >>>>>? ? ????????The following objects are masked from 'package:stats':
>? >>>>>? ? ??????????????????? filter, lag
>? >>>>>? ? ????????The following objects are masked from 'package:base':
>? >>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>? >>>>>
>? >>>>> The solve this issue I added in rmd file, description file and the
>? >>> namespace the package conflicted.
>? >>>>> So, the package conflicted avoid to have this warning.
>? >>>>>
>? >>>>> But when I run R-devel CMD check I have a new issue that is Error in
>? >>> loadNamespace...no package called ?conflicted? (see below)
>? >>>>>
>? >>>>> Can you help me to solve this issue if tit's possible?
>? >>>>> Thanks in advance to your help !
>? >>>>> Sylvain
>? >>>>> -----------------
>? >>>>> Below extract of 00check.log
>? >>>>> * checking whether package ?cartograflow? can be installed ... ERROR
>? >>>>> Installation failed.
>? >>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for 
> details.
>? >>>>> * DONE
>? >>>>> Status: 1 ERROR, 1 NOTE
>? >>>>>
>? >>>>> Below 00install.out
>? >>>>> * installing *source* package ?cartograflow? ...
>? >>>>> ** using staged installation
>? >>>>> ** R
>? >>>>> ** inst
>? >>>>> ** byte-compile and prepare package for lazy loading
>? >>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>? >>> vI[[i]]) :
>? >>>>>? ? ? there is no package called ?conflicted?
>? >>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>? >>> withOneRestart -> doWithOneRestart
>? >>>>> Ex?cution arr?t?e
>? >>>>> ERROR: lazy loading failed for package ?cartograflow?
>? >>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>
>? >>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>? >>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com> 
> <mailto:henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>>> 
> a ?crit :
>? >>>>>
>? >>>>>? ? ? FWIW, you should be able to reproduce at least the following 
> NOTEs
>? >>>>> with your current R 3.5.2 and R CMD check --as-cran:
>? >>>>>
>? >>>>> * checking CRAN incoming feasibility ... NOTE
>? >>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>>?
>? >>>>>
>? >>>>> New submission
>? >>>>>
>? >>>>> Version contains large components (0.0.0.9000)
>? >>>>>
>? >>>>> Possibly mis-spelled words in DESCRIPTION:
>? >>>>>? ? ? flowmapping (7:41)
>? >>>>>
>? >>>>> Author field should be Authors at R. <mailto:Authors at R.> 
> <mailto:Authors at R. <mailto:Authors at R.>>? Current value is:
>? >>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>? >>>>> "francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr> 
> <mailto:francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr>>",
>? >>> role = c("cre","aut")),
>? >>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>? >>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr> 
> <mailto:blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>>", role
>? >>> = c("aut"))
>? >>>>>
>? >>>>> The Title field should be in title case. Current version is:
>? >>>>> ?thematic cartography of flows and movements?
>? >>>>> In title case that is:
>? >>>>> ?Thematic Cartography of Flows and Movements?
>? >>>>>
>? >>>>> Those are all classical mistakes ("we've all been there").? The
>? >>>>> vignette errors may or may not be specific to R devel.
>? >>>>>
>? >>>>> /Henrik
>? >>>>>
>? >>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>? >>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>> wrote:
>? >>>>>>
>? >>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to
>? >>> use r-devel?
>? >>>>>> I confirm that I didn't received ? error message when I've made
>? >>> dev_tool::check.
>? >>>>>> How can I solve my problem ?
>? >>>>>> Thanks in advance Sylvain
>? >>>>>>
>? >>>>>>
>? >>>>>> nvoy? depuis Yahoo Mail pour Android
>? >>>>>>
>? >>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>? >>> Ligges<ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>
>? >>> <mailto:ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>>> a ?crit :? I cannot beloeve
>? >>> it. But this is certainly not R-devel?
>? >>>>>>
>? >>>>>> Not sure about devtools which we do not use on CRAN, but simply
>? >>>>>>
>? >>>>>> R CMD check --as-cran
>? >>>>>>
>? >>>>>> with a recent R-devel? version on the package tarball should 
> reproduce
>? >>>>>> the findings.
>? >>>>>>
>? >>>>>> Best,
>? >>>>>> Uwe Ligges
>? >>>>>>
>? >>>>>>
>? >>>>>> On 25.03.2019 23:12, cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>? >>>>>>> Hello,
>? >>>>>>> I've submitted my package cartograflow and I received an email from
>? >>> your teeam that it does not pass the incoming checks
>? >>> automatically.Debian:
>? >>> 
> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>? >>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>? >>>>>>>
>? >>>>>>> So, I've made the new check on my plateform (linux ubuntu) and the
>? >>> check is OK.I used : ==> devtools::check(args =
>? >>> c('--no-manual','--as-cran'))Status is :
>? >>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>? >>> 0.0.0.9000 ????
>? >>>>>>> Duration: 54.6s
>? >>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>? >>>>>>> R CMD check succeeded
>? >>>>>>> Can you? help me to fix the problem?
>? >>>>>>> Thanks in advance to your replySylvain
>? >>>>>>>? ? ? ? [[alternative HTML version deleted]]
>? >>>>>>>
>? >>>>>>> ______________________________________________
>? >>>>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>? >>> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>> mailing list
>? >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>>>>>
>? >>>>>>
>? >>>>>>
>? >>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>? >>>>>>
>? >>>>>> ______________________________________________
>? >>>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>? >>> mailing list
>? >>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>
>? >>>>>? ? ??? [[alternative HTML version deleted]]
>? >>>>>
>? >>>>> ______________________________________________
>? >>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>? >>> mailing list
>? >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>>>
>? >>>>
>? >>>> ______________________________________________
>? >>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>? >>> mailing list
>? >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>>
>? >>>>
>? >>>>
>? >>>>? ? ??? [[alternative HTML version deleted]]
>? >>>>
>? >>>> ______________________________________________
>? >>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>? >>> mailing list
>? >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>>>
>? >>
>? >> ______________________________________________
>? >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>? >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >>
>? >
>? >
>? >? ??? [[alternative HTML version deleted]]
>? >
>? > ______________________________________________
>? > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >
>? > ??? [[alternative HTML version deleted]]
>? >
>? > ______________________________________________
>? > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>? >
> 

    
	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon May  6 11:14:22 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 6 May 2019 12:14:22 +0300
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
Message-ID: <20190506121422.7d661170@trisector>

On Sat, 4 May 2019 22:41:16 +0000
"Wang, Zhu" <wangz1 at uthscsa.edu> wrote:

> In an R package I would like to compute intercept for an
> intercept-only GLM in a Fortran subroutine.

If all else fails, you could use R API [*] to call coef(glm.fit(...)),
though it might require writing a C or C++ wrapper to avoid translating
all function prototypes from Rinternals.h into Fortran 2003 C
interoperability syntax.

-- 
Best regards,
Ivan

[*]:
https://cran.r-project.org/doc/manuals/R-exts.html#Evaluating-R-expressions-from-C


From j@me@@|@he@ter @end|ng |rom gm@||@com  Mon May  6 18:16:42 2019
From: j@me@@|@he@ter @end|ng |rom gm@||@com (Jim Hester)
Date: Mon, 6 May 2019 12:16:42 -0400
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
Message-ID: <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>

For what it's worth, the recommendation to use `tempfile()` is very
confusing to R users.

Often users (particularly new users) jump directly to examples when
reading documentation and when you have these more complicated
examples they do not realize they can just use a simple string
literal.

See https://github.com/tidyverse/readr/issues/635 for an issue where
multiple users explicitly request examples which do _not_ use
`tempfile()`.

On Fri, May 3, 2019 at 7:59 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 03/05/2019 6:33 p.m., Jarrett Phillips wrote:
> > Hello,
> >
> > My R package has a function with an argument to specify whether numerical
> > results should be outputted to a CSV file.
> >
> > CRAN policy stipulates verbatim that
> >
> > Packages should not write in the user?s home filespace (including
> > clipboards), nor anywhere else on the file system apart from the R
> > session?s temporary directory (or during installation in the location
> > pointed to by TMPDIR: and such usage should be cleaned up). Installing into
> > the system?s R installation (e.g., scripts to its bin directory) is not
> > allowed.
> >
> > I know I should use tempdir() within my package function, but I've not seen
> > any examples on how this is best done within existing R packages.
> >
> > Within my package documentation examples for my function, I have the lines:
> >
> >   \dontshow{.oldwd <- setwd(tempdir())}
> >
> > ... some R code ...
> >
> > \dontshow{setwd(.oldwd)}
> >
> > but I have been informed that this is not the accepted way.
> >
> > Any ideas from the community on how do do this properly?
>
> Use the tempfile() function to generate a filename in the temporary
> directory.  You might want to use the "pattern" or "fileext" arguments,
> but don't change the "tmpdir" argument.
>
> Then write to that file.
>
> For example,
>
> filename <- tempfile(fileext = ".csv")
> write.csv(df, filename)
>
> It's a good idea to clean up afterwards using
>
> unlink(filename)
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon May  6 18:28:49 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 06 May 2019 09:28:49 -0700
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
 <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
Message-ID: <F6B81524-73F4-4518-B071-8A0B1E989AA0@dcn.davis.ca.us>

You cannot go littering the user directories with sample files. Such examples would have to be dontrun, but in order to make some of the example runnable as is you would also need examples that use system.file paradigm. If you store the temporary file name in a variable then the user can retrieve the contents of that file briefly after running the example. Such practice of separating the call to tempfile from your function call also makes it a little clearer that the file name can be created using other methods than via system.file.

On May 6, 2019 9:16:42 AM PDT, Jim Hester <james.f.hester at gmail.com> wrote:
>For what it's worth, the recommendation to use `tempfile()` is very
>confusing to R users.
>
>Often users (particularly new users) jump directly to examples when
>reading documentation and when you have these more complicated
>examples they do not realize they can just use a simple string
>literal.
>
>See https://github.com/tidyverse/readr/issues/635 for an issue where
>multiple users explicitly request examples which do _not_ use
>`tempfile()`.
>
>On Fri, May 3, 2019 at 7:59 PM Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>>
>> On 03/05/2019 6:33 p.m., Jarrett Phillips wrote:
>> > Hello,
>> >
>> > My R package has a function with an argument to specify whether
>numerical
>> > results should be outputted to a CSV file.
>> >
>> > CRAN policy stipulates verbatim that
>> >
>> > Packages should not write in the user?s home filespace (including
>> > clipboards), nor anywhere else on the file system apart from the R
>> > session?s temporary directory (or during installation in the
>location
>> > pointed to by TMPDIR: and such usage should be cleaned up).
>Installing into
>> > the system?s R installation (e.g., scripts to its bin directory) is
>not
>> > allowed.
>> >
>> > I know I should use tempdir() within my package function, but I've
>not seen
>> > any examples on how this is best done within existing R packages.
>> >
>> > Within my package documentation examples for my function, I have
>the lines:
>> >
>> >   \dontshow{.oldwd <- setwd(tempdir())}
>> >
>> > ... some R code ...
>> >
>> > \dontshow{setwd(.oldwd)}
>> >
>> > but I have been informed that this is not the accepted way.
>> >
>> > Any ideas from the community on how do do this properly?
>>
>> Use the tempfile() function to generate a filename in the temporary
>> directory.  You might want to use the "pattern" or "fileext"
>arguments,
>> but don't change the "tmpdir" argument.
>>
>> Then write to that file.
>>
>> For example,
>>
>> filename <- tempfile(fileext = ".csv")
>> write.csv(df, filename)
>>
>> It's a good idea to clean up afterwards using
>>
>> unlink(filename)
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon May  6 21:04:03 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 6 May 2019 21:04:03 +0200
Subject: [R-pkg-devel] package cartograflow_1.0.0.tar.gz
In-Reply-To: <1021675849.7150775.1557060264554@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <414595032.26250015.1554315070414@mail.yahoo.com>
 <b643d5b4-51c6-2886-9a85-a5f2de20cc8f@gmail.com>
 <1555990824.18102124.1554355245299@mail.yahoo.com>
 <541ccf5e-3382-4cee-1db2-4a35399c3701@fau.de>
 <2093107463.26894908.1554376475362@mail.yahoo.com>
 <7a288fe5-8768-df59-c452-575a493486c4@fau.de>
 <fb2202e2-3f5b-626b-ea30-a103327c8211@statistik.tu-dortmund.de>
 <125199542.27186571.1554390277315@mail.yahoo.com>
 <1603540995.1859475.1554390526183@mail.yahoo.com>
 <132793636.29335534.1554653786460@mail.yahoo.com>
 <9c9012ed-c1c4-ab3e-8f39-03cca7932d54@gmail.com>
 <1128749348.29445971.1554663719667@mail.yahoo.com>
 <66763bd4-abe4-6722-8701-ebd32fd8e947@gmail.com>
 <1021675849.7150775.1557060264554@mail.yahoo.com>
Message-ID: <14a22a7f-f8f9-0104-2b8e-55ad89616ffd@statistik.tu-dortmund.de>

This should be fine.

Please always keep <cran-submissions at r-project.org> CCed.

Best,
Uwe Ligges


On 05.05.2019 14:44, cartograflow at gmail.com wrote:
> Hi,
> 
> After I submitted my package I received some remarks e.g add the exmple 
> that I've taken into account.
> So, I used R-devel CMD check, I've always one 1 note about maintener 
> which it's not a problem to submit and another note due to package size.
> ...
> * checking installed package size ... NOTE
>  ? installed size is? 5.0Mb
>  ? sub-directories of 1Mb or more:
>  ??? doc?? 4.4Mb
> ...
> I would like to know if I can submit in CRAN with this note if not, do 
> you hnow how I can solve this issue?
> In vignette directories the html file size is of 4.3MB. I don't know how 
> I can reduce the size. There are a lot of picture (cartography).
> 
> Thanks in advance to your reply
> Sylvain
> 
> Le dimanche 7 avril 2019 ? 21:32:07 UTC+2, Duncan Murdoch 
> <murdoch.duncan at gmail.com> a ?crit :
> 
> 
> On 07/04/2019 3:01 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com> wrote:
>  > Thanks!
>  > So, I've already check and I didn't see the descrption of the note in
>  > 00check.log.
>  > The only thing I can say is that there's a problem with Author.
>  > I tried to put Authors at R <mailto:Authors at R> and it also generates notes.
>  > Do you have any idea?
>  >
>  > You will find hereafter the copy of the file 00check.log.
>  > Thanks in advance
>  > ----------------
>  > * using log directory ?/home/sylvain/svn/cartograflow.Rcheck?
>  > * using R Under development (unstable) (2019-04-04 r76316)
>  > * using platform: x86_64-pc-linux-gnu (64-bit)
>  > * using session charset: UTF-8
>  > * using option ?--as-cran?
>  > * checking for file ?cartograflow/DESCRIPTION? ... OK
>  > * this is package ?cartograflow? version ?1.0.0.0?
>  > * package encoding: UTF-8
>  > * checking CRAN incoming feasibility ... NOTE
>  > Maintainer: ?Sylvain Blondeau <blondeau.sylvain at yahoo.fr 
> <mailto:blondeau.sylvain at yahoo.fr>>?
>  >
>  > New submission
>  >
>  > Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>  >? ? c(person("Sylvain", "Blondeau", email = "blondeau.sylvain at yahoo.fr 
> <mailto:blondeau.sylvain at yahoo.fr>",
>  > role = c("cre","aut")),
>  >? ??????????? person("other", "other", email = "other.other at gmail.com 
> <mailto:other.other at gmail.com>",
>  > role = c("aut")))
> 
> That second author doesn't look right, but I don't think the note is
> complaining about that.? I think you probably have put something like
> this in your DESCRIPTION file:
> 
> Author:? c(person("Sylvain", "Blondeau", email =
> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role = 
> c("cre","aut")),
>  ? ? ? ? ? ? person("other", "other", email = "other.other at gmail.com 
> <mailto:other.other at gmail.com>",
> role = c("aut")))
> 
> and what it is saying is that you should instead use
> 
> Authors at R <mailto:Authors at R>:? c(person("Sylvain", "Blondeau", email =
> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role = 
> c("cre","aut")),
>  ? ? ? ? ? ? person("other", "other", email = "other.other at gmail.com 
> <mailto:other.other at gmail.com>",
> role = c("aut")))
> 
> If my guess is right and you fix it, you may still get a NOTE.? To make
> it easier for the CRAN maintainers to know who to contact in case of an
> issue with the package, they display information about the package
> maintainer in a NOTE.? Since most NOTEs indicate likely problems, it
> would probably make sense for them to use some other formatting for the
> message, but that's how it is.
> 
> Duncan Murdoch
> 
> 
> 
>  > * checking package namespace information ... OK
>  > * checking package dependencies ... OK
>  > * checking if this is a source package ... OK
>  > * checking if there is a namespace ... OK
>  > * checking for executable files ... OK
>  > * checking for hidden files and directories ... OK
>  > * checking for portable file names ... OK
>  > * checking for sufficient/correct file permissions ... OK
>  > * checking serialization versions ... OK
>  > * checking whether package ?cartograflow? can be installed ... OK
>  > * checking installed package size ... OK
>  > * checking package directory ... OK
>  > * checking for future file timestamps ... OK
>  > * checking ?build? directory ... OK
>  > * checking DESCRIPTION meta-information ... OK
>  > * checking top-level files ... OK
>  > * checking for left-over files ... OK
>  > * checking index information ... OK
>  > * checking package subdirectories ... OK
>  > * checking R files for non-ASCII characters ... OK
>  > * checking R files for syntax errors ... OK
>  > * checking whether the package can be loaded ... OK
>  > * checking whether the package can be loaded with stated dependencies 
> ... OK
>  > * checking whether the package can be unloaded cleanly ... OK
>  > * checking whether the namespace can be loaded with stated dependencies
>  > ... OK
>  > * checking whether the namespace can be unloaded cleanly ... OK
>  > * checking use of S3 registration ... OK
>  > * checking dependencies in R code ... OK
>  > * checking S3 generic/method consistency ... OK
>  > * checking replacement functions ... OK
>  > * checking foreign function calls ... OK
>  > * checking R code for possible problems ... OK
>  > * checking Rd files ... OK
>  > * checking Rd metadata ... OK
>  > * checking Rd line widths ... OK
>  > * checking Rd cross-references ... OK
>  > * checking for missing documentation entries ... OK
>  > * checking for code/documentation mismatches ... OK
>  > * checking Rd \usage sections ... OK
>  > * checking Rd contents ... OK
>  > * checking for unstated dependencies in examples ... OK
>  > * checking installed files from ?inst/doc? ... OK
>  > * checking files in ?vignettes? ... OK
>  > * checking examples ... OK
>  > * checking for unstated dependencies in ?tests? ... OK
>  > * checking tests ... OK
>  >? ? Running ?testthat.R?
>  > * checking for unstated dependencies in vignettes ... OK
>  > * checking package vignettes in ?inst/doc? ... OK
>  > * checking re-building of vignette outputs ... OK
>  > * checking PDF version of manual ... OK
>  > * DONE
>  > Status: 1 NOTE
>  >
>  >
>  > Le dimanche 7 avril 2019 ? 18:22:32 UTC+2, Duncan Murdoch
>  > <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> a ?crit :
>  >
>  >
>  > On 07/04/2019 12:16 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>  >? > Hi,Thanks to your reply and your information.?Right now it stays only
>  > one note when I've made R-devel CMD CHECK --as-cran.?So, I didn't
>  > identified this note in repertory R.check. What's file I've to check?I'd
>  > like to know if I can new submission in CRAN with one note.?Sylvain
>  >
>  > It will be in cartograflow.Rcheck/00check.log.
>  >
>  > Duncan Murdoch
>  >
>  >
>  >? >
>  >? >
>  >? >
>  >? > Envoy? depuis Yahoo?Mail pour Android
>  >? >
>  >? >? ? Le jeu., avr. 4, 2019 ? 17:09, Ma?lle
>  > SALMON<maelle.salmon at yahoo.se <mailto:maelle.salmon at yahoo.se> 
> <mailto:maelle.salmon at yahoo.se <mailto:maelle.salmon at yahoo.se>>> a ?crit
>  > :? ? I'd recommend reading
>  > https://r-pkgs.org/description.html#dependencies (and the rest of the
>  > book is very good as well), it'll help you understand why and how to
>  > declare dependencies.
>  >? >
>  >? >
>  >? >
>  >? >
>  >? >? ? ? Den torsdag 4 april 2019 17:05:02 CEST, 
> cartograflow at gmail.com <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>> 
> <cartograflow at gmail.com <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>> skrev:
>  >? >
>  >? >? How I can declare the dependencies in DESCRIPTION file?
>  >? >? ?depends: library(dplyr,dependencies =TRUE)
>  >? > Thanks
>  >? > Envoy? depuis Yahoo?Mail pour Android
>  >? >
>  >? >? ? Le jeu., avr. 4, 2019 ? 14:42, Uwe
>  > Ligges<ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>
>  > <mailto:ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>>> a ?crit :? .... or forgot to
>  > declare a dependency on that package in the
>  >? > DESCRIPTION file...
>  >? >
>  >? > Best,
>  >? > Uwe Ligges
>  >? >
>  >? > On 04.04.2019 13:34, Sebastian Meyer wrote:
>  >? >> There are probably no clairvoyants around here. So, again, without
>  >? >> access to the up-to-date source code of your package, nobody will be
>  >? >> able to help.
>  >? >>
>  >? >> "there is no package called ..." means that the given package is not
>  >? >> installed in any of the libraries currently in use by R (see 
> .libPaths()
>  >? >> for the relevant paths). Maybe you have installed "dplyr" in a 
> library
>  >? >> used by your standard R installation, but not in any library used by
>  >? >> your R-devel installation (which you seem to use for checking the
>  >? >> package)? Just a wild guess.
>  >? >>
>  >? >>
>  >? >> Am 04.04.19 um 13:14 schrieb cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>:
>  >? >>> I follow up your recommendation and for the moment I didn't used
>  >? >>> "conflicted".
>  >? >>>
>  >? >>> So, I've made the nex R CMD check and I have the problem
>  >? >>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>  >? >>> vI[[i]]) :
>  >? >>>? ? ? there is no package called ?dplyr?
>  >? >>>
>  >? >>> How I can? solve this issue?
>  >? >>>
>  >? >>> Thanks in advance
>  >? >>>
>  >? >>> Le jeudi 4 avril 2019 ? 08:22:26 UTC+2, Sebastian Meyer
>  >? >>> <seb.meyer at fau.de <mailto:seb.meyer at fau.de> 
> <mailto:seb.meyer at fau.de <mailto:seb.meyer at fau.de>>> a ?crit :
>  >? >>>
>  >? >>>
>  >? >>> Note that output concerning masked objects are just messages 
> which do
>  >? >>> not cause your vignette to fail. So it is not stricly necessary to
>  > start
>  >? >>> working on these conflicts now.
>  >? >>>
>  >? >>> However, looking closely at the win-builder check results
>  >? >>>
>  > 
> (https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Windows/00check.log),
>  >? >>> I see the following output below these messages
>  >? >>>
>  >? >>>> Warning in eval(expr, envir, enclos) : NAs introduced by coercion
>  >? >>>> Quitting from lines 529-573 (cartograflow.Rmd)
>  >? >>>> Error: processing vignette 'cartograflow.Rmd' failed with 
> diagnostics:
>  >? >>>> argument is of length zero
>  >? >>>
>  >? >>> So the problem actually is in lines 529-573 of the cartograflow.Rmd
>  >? >>> vignette (at least in the version submitted to win-builder a few
>  > weeks ago).
>  >? >>>
>  >? >>> Running tools::buildVignette("cartograflow.Rmd") locally, I see
>  >? >>>
>  >? >>>> Error in if (horiz) { : argument is of length zero
>  >? >>>
>  >? >>> and the subsequent traceback() shows that the error originates from
>  >? >>>
>  >? >>>> layoutLayer(title = "Professional mobility in Greater Paris",
>  >? >>>>? ? ? ? ? ? coltitle = "black", author = "Cartograflow, 2019",
>  > sources =
>  >? >>> "Sources : data : INSEE, RP, MOBPRO, 2017 ; basemap : IGN, APUR, UMS
>  >? >>> 2414 RIATE, 2018.",
>  >? >>>>? ? ? ? ? ? scale = 0.2, tabtitle = TRUE, frame = TRUE, north(pos =
>  >? >>> "topright"),
>  >? >>>>? ? ? ? ? ? col = "grey")
>  >? >>>
>  >? >>> So it seems to me that the unnamed argument 'north(pos =
>  > "topright")' is
>  >? >>> wrongly matched to the "horiz" argument of layoutLayer().
>  >? >>>
>  >? >>> Cheers,
>  >? >>>
>  >? >>>? ? ??? Sebastian
>  >? >>>
>  >? >>>
>  >? >>> Am 04.04.19 um 07:20 schrieb cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>  >? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>>:
>  >? >>>>
>  >? >>>> Hi,I don't know if my explanations are clear.I tried several way to
>  >? >>> solve this problem w/o success.?Someone have an idea ?Thanks in 
> advance
>  >? >>>>
>  >? >>>> On 2019-04-03 2:11 p.m., cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>  >? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>> wrote:
>  >? >>>>>? ? ? Hi,
>  >? >>>>>
>  >? >>>>> I come back to you? because I have always the problem with
>  >? >>> devtools::check of my package.
>  >? >>>>>
>  >? >>>>> I used the command to check my package with R-devel :
>  >? >>>>> sylvain at sylvain <mailto:sylvain at sylvain> 
> <mailto:sylvain at sylvain <mailto:sylvain at sylvain>> 
> <mailto:sylvain at sylvain <mailto:sylvain at sylvain>
>  > <mailto:sylvain at sylvain <mailto:sylvain at sylvain>>>:~/svn$ bash 
> R-devel.sh CMD
>  >? >>> check --as-cran
>  >? >>> /home/sylvain/work/12_R_studio/package/cartograflow_0.0.0.1.tar.gz
>  >? >>>>>
>  >? >>>>> When I start the rmd file there is a warning due to package 
> dplyr :
>  >? >>>>>? ? ????????Attaching package: 'dplyr'
>  >? >>>>>? ? ????????The following objects are masked from 'package:stats':
>  >? >>>>>? ? ??????????????????? filter, lag
>  >? >>>>>? ? ????????The following objects are masked from 'package:base':
>  >? >>>>>? ? ??????????????????? intersect, setdiff, setequal, union
>  >? >>>>>
>  >? >>>>> The solve this issue I added in rmd file, description file and the
>  >? >>> namespace the package conflicted.
>  >? >>>>> So, the package conflicted avoid to have this warning.
>  >? >>>>>
>  >? >>>>> But when I run R-devel CMD check I have a new issue that is 
> Error in
>  >? >>> loadNamespace...no package called ?conflicted? (see below)
>  >? >>>>>
>  >? >>>>> Can you help me to solve this issue if tit's possible?
>  >? >>>>> Thanks in advance to your help !
>  >? >>>>> Sylvain
>  >? >>>>> -----------------
>  >? >>>>> Below extract of 00check.log
>  >? >>>>> * checking whether package ?cartograflow? can be installed ... 
> ERROR
>  >? >>>>> Installation failed.
>  >? >>>>> See ?/home/sylvain/svn/cartograflow.Rcheck/00install.out? for
>  > details.
>  >? >>>>> * DONE
>  >? >>>>> Status: 1 ERROR, 1 NOTE
>  >? >>>>>
>  >? >>>>> Below 00install.out
>  >? >>>>> * installing *source* package ?cartograflow? ...
>  >? >>>>> ** using staged installation
>  >? >>>>> ** R
>  >? >>>>> ** inst
>  >? >>>>> ** byte-compile and prepare package for lazy loading
>  >? >>>>> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck =
>  >? >>> vI[[i]]) :
>  >? >>>>>? ? ? there is no package called ?conflicted?
>  >? >>>>> Calls: <Anonymous> ... loadNamespace -> withRestarts ->
>  >? >>> withOneRestart -> doWithOneRestart
>  >? >>>>> Ex?cution arr?t?e
>  >? >>>>> ERROR: lazy loading failed for package ?cartograflow?
>  >? >>>>> * removing ?/home/sylvain/svn/cartograflow.Rcheck/cartograflow?
>  >? >>>>>
>  >? >>>>>
>  >? >>>>>
>  >? >>>>>
>  >? >>>>>
>  >? >>>>>
>  >? >>>>>
>  >? >>>>>? ? ? ? Le mardi 26 mars 2019 ? 22:42:21 UTC+1, Henrik Bengtsson
>  >? >>> <henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com> 
> <mailto:henrik.bengtsson at gmail.com <mailto:henrik.bengtsson at gmail.com>>
>  > <mailto:henrik.bengtsson at gmail.com 
> <mailto:henrik.bengtsson at gmail.com> <mailto:henrik.bengtsson at gmail.com 
> <mailto:henrik.bengtsson at gmail.com>>>>
>  > a ?crit :
>  >? >>>>>
>  >? >>>>>? ? ? FWIW, you should be able to reproduce at least the following
>  > NOTEs
>  >? >>>>> with your current R 3.5.2 and R CMD check --as-cran:
>  >? >>>>>
>  >? >>>>> * checking CRAN incoming feasibility ... NOTE
>  >? >>>>> Maintainer: ?cartogRaflow <cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>  >? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>>>?
>  >? >>>>>
>  >? >>>>> New submission
>  >? >>>>>
>  >? >>>>> Version contains large components (0.0.0.9000)
>  >? >>>>>
>  >? >>>>> Possibly mis-spelled words in DESCRIPTION:
>  >? >>>>>? ? ? flowmapping (7:41)
>  >? >>>>>
>  >? >>>>> Author field should be Authors at R. <mailto:Authors at R.> 
> <mailto:Authors at R. <mailto:Authors at R.>>
>  > <mailto:Authors at R. <mailto:Authors at R.> <mailto:Authors at R. 
> <mailto:Authors at R.>>>? Current value is:
>  >? >>>>>? ? ? c(person("Fran?oise", "Bahoken", email =
>  >? >>>>> "francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr>
>  > <mailto:francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr>>
>  > <mailto:francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr>
>  > <mailto:francoise.bahoken at ifsttar.fr 
> <mailto:francoise.bahoken at ifsttar.fr>>>",
>  >? >>> role = c("cre","aut")),
>  >? >>>>>? ? ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>  >? >>>>> "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr> 
> <mailto:blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>>
>  > <mailto:blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr> 
> <mailto:blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>>>", 
> role
>  >? >>> = c("aut"))
>  >? >>>>>
>  >? >>>>> The Title field should be in title case. Current version is:
>  >? >>>>> ?thematic cartography of flows and movements?
>  >? >>>>> In title case that is:
>  >? >>>>> ?Thematic Cartography of Flows and Movements?
>  >? >>>>>
>  >? >>>>> Those are all classical mistakes ("we've all been there").? The
>  >? >>>>> vignette errors may or may not be specific to R devel.
>  >? >>>>>
>  >? >>>>> /Henrik
>  >? >>>>>
>  >? >>>>> On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>  >? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>>
>  >? >>>>> <cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>>> wrote:
>  >? >>>>>>
>  >? >>>>>> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I 
> have to
>  >? >>> use r-devel?
>  >? >>>>>> I confirm that I didn't received ? error message when I've made
>  >? >>> dev_tool::check.
>  >? >>>>>> How can I solve my problem ?
>  >? >>>>>> Thanks in advance Sylvain
>  >? >>>>>>
>  >? >>>>>>
>  >? >>>>>> nvoy? depuis Yahoo Mail pour Android
>  >? >>>>>>
>  >? >>>>>>? ? ? Le lun., mars 25, 2019 ? 23:38, Uwe
>  >? >>> Ligges<ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>
>  > <mailto:ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>>
>  >? >>> <mailto:ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>
>  > <mailto:ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>>>> a ?crit :? I cannot beloeve
>  >? >>> it. But this is certainly not R-devel?
>  >? >>>>>>
>  >? >>>>>> Not sure about devtools which we do not use on CRAN, but simply
>  >? >>>>>>
>  >? >>>>>> R CMD check --as-cran
>  >? >>>>>>
>  >? >>>>>> with a recent R-devel? version on the package tarball should
>  > reproduce
>  >? >>>>>> the findings.
>  >? >>>>>>
>  >? >>>>>> Best,
>  >? >>>>>> Uwe Ligges
>  >? >>>>>>
>  >? >>>>>>
>  >? >>>>>> On 25.03.2019 23:12, cartograflow at gmail.com 
> <mailto:cartograflow at gmail.com>
>  > <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>
>  >? >>> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com> 
> <mailto:cartograflow at gmail.com <mailto:cartograflow at gmail.com>>> wrote:
>  >? >>>>>>> Hello,
>  >? >>>>>>> I've submitted my package cartograflow and I received an 
> email from
>  >? >>> your teeam that it does not pass the incoming checks
>  >? >>> automatically.Debian:
>  >? >>>
>  > 
> <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>  >? >>>>>>> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>  >? >>>>>>>
>  >? >>>>>>> So, I've made the new check on my plateform (linux ubuntu) 
> and the
>  >? >>> check is OK.I used : ==> devtools::check(args =
>  >? >>> c('--no-manual','--as-cran'))Status is :
>  >? >>>>>>> ?? R CMD check results ???????????????????????????? cartograflow
>  >? >>> 0.0.0.9000 ????
>  >? >>>>>>> Duration: 54.6s
>  >? >>>>>>> 0 errors ? | 0 warnings ? | 0 notes ?
>  >? >>>>>>> R CMD check succeeded
>  >? >>>>>>> Can you? help me to fix the problem?
>  >? >>>>>>> Thanks in advance to your replySylvain
>  >? >>>>>>>? ? ? ? [[alternative HTML version deleted]]
>  >? >>>>>>>
>  >? >>>>>>> ______________________________________________
>  >? >>>>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  >? >>> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>> mailing list
>  >? >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >? >>>>>>>
>  >? >>>>>>
>  >? >>>>>>
>  >? >>>>>>? ? ? ? ? ? [[alternative HTML version deleted]]
>  >? >>>>>>
>  >? >>>>>> ______________________________________________
>  >? >>>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>>
>  >? >>> mailing list
>  >? >>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >? >>>
>  >? >>>>>? ? ??? [[alternative HTML version deleted]]
>  >? >>>>>
>  >? >>>>> ______________________________________________
>  >? >>>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>>
>  >? >>> mailing list
>  >? >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >? >>>>>
>  >? >>>>
>  >? >>>> ______________________________________________
>  >? >>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>>
>  >? >>> mailing list
>  >? >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >? >>>>
>  >? >>>>
>  >? >>>>
>  >? >>>>? ? ??? [[alternative HTML version deleted]]
>  >? >>>>
>  >? >>>> ______________________________________________
>  >? >>>> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>
>  > <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>>
>  >? >>> mailing list
>  >? >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >? >>>>
>  >? >>
>  >? >> ______________________________________________
>  >? >> R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  > mailing list
>  >? >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >? >>
>  >? >
>  >? >
>  >? >? ??? [[alternative HTML version deleted]]
>  >? >
>  >? > ______________________________________________
>  >? > R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  > mailing list
>  >? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >? >
>  >? > ??? [[alternative HTML version deleted]]
>  >? >
>  >? > ______________________________________________
>  >? > R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org> 
> <mailto:R-package-devel at r-project.org 
> <mailto:R-package-devel at r-project.org>>
>  > mailing list
>  >? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >? >
>  >
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue May  7 19:57:06 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 7 May 2019 13:57:06 -0400
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
 <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
Message-ID: <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>

On 06/05/2019 12:16 p.m., Jim Hester wrote:
> For what it's worth, the recommendation to use `tempfile()` is very
> confusing to R users.
> 
> Often users (particularly new users) jump directly to examples when
> reading documentation and when you have these more complicated
> examples they do not realize they can just use a simple string
> literal.
> 
> See https://github.com/tidyverse/readr/issues/635 for an issue where
> multiple users explicitly request examples which do _not_ use
> `tempfile()`.

I think beginners rarely like the help pages, and that's really to be 
expected:  help pages need to be complete and correct, and beginners 
really need a small subset of possibilities.  Beginners need tutorials.

In the Github issue, you mentioned pollution of the working directory, 
but I think a bigger problem is destruction of user data, e.g. if a user 
has a file "wine.csv", and the example writes to that file.

So you need to do something to protect users.  I think making examples a 
little complicated by using setwd(tempdir()) with a literal filename, or 
writing to tempfile() is worth it.

Duncan Murdoch

> 
> On Fri, May 3, 2019 at 7:59 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 03/05/2019 6:33 p.m., Jarrett Phillips wrote:
>>> Hello,
>>>
>>> My R package has a function with an argument to specify whether numerical
>>> results should be outputted to a CSV file.
>>>
>>> CRAN policy stipulates verbatim that
>>>
>>> Packages should not write in the user?s home filespace (including
>>> clipboards), nor anywhere else on the file system apart from the R
>>> session?s temporary directory (or during installation in the location
>>> pointed to by TMPDIR: and such usage should be cleaned up). Installing into
>>> the system?s R installation (e.g., scripts to its bin directory) is not
>>> allowed.
>>>
>>> I know I should use tempdir() within my package function, but I've not seen
>>> any examples on how this is best done within existing R packages.
>>>
>>> Within my package documentation examples for my function, I have the lines:
>>>
>>>    \dontshow{.oldwd <- setwd(tempdir())}
>>>
>>> ... some R code ...
>>>
>>> \dontshow{setwd(.oldwd)}
>>>
>>> but I have been informed that this is not the accepted way.
>>>
>>> Any ideas from the community on how do do this properly?
>>
>> Use the tempfile() function to generate a filename in the temporary
>> directory.  You might want to use the "pattern" or "fileext" arguments,
>> but don't change the "tmpdir" argument.
>>
>> Then write to that file.
>>
>> For example,
>>
>> filename <- tempfile(fileext = ".csv")
>> write.csv(df, filename)
>>
>> It's a good idea to clean up afterwards using
>>
>> unlink(filename)
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue May  7 20:32:49 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 7 May 2019 11:32:49 -0700
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
 <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
 <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>
Message-ID: <CAFDcVCTsX0sa930DJsPdXAZFYLnA80NU0BLMkAa5r4xUTsY7FA@mail.gmail.com>

I agree that setwd(), tempdir(), etc. clutter up examples.  At the
same time, I respect the CRAN policy - it's conservative approach has
helped us avoid a wild-west working environment. One approach that
might help bring some standardization, instead of each package
developer rolls their own, and avoid having to have that tempdir code
in there is to have example() handle this.  For example, add a
workdir=tempdir() argument to example() and have example() change to
that directory temporarily, and report on the working directory at the
end.

> example(foo)
...
Any output files produced by this example may be found in the
temporary working directory '/tmp/alice/Rtmp4faDCv'.

This could be a message or a warning.  One could also imagine using
workdir=getOption("example.workdir", tempdir()) as the default.  If
properly done, this would allow the user to set
options(example.workdir = quote(getwd())) if they'd like to write to
the current directory.

What it does not solve is when a user cut'n'paste code, but maybe that
could be considered acceptable because in that case the user is not
running/source code, but calling it themself.

My $.02

/Henrik




These messages can be skipped if called with example(..., workdir=getwd()).

On Tue, May 7, 2019 at 10:57 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 06/05/2019 12:16 p.m., Jim Hester wrote:
> > For what it's worth, the recommendation to use `tempfile()` is very
> > confusing to R users.
> >
> > Often users (particularly new users) jump directly to examples when
> > reading documentation and when you have these more complicated
> > examples they do not realize they can just use a simple string
> > literal.
> >
> > See https://github.com/tidyverse/readr/issues/635 for an issue where
> > multiple users explicitly request examples which do _not_ use
> > `tempfile()`.
>
> I think beginners rarely like the help pages, and that's really to be
> expected:  help pages need to be complete and correct, and beginners
> really need a small subset of possibilities.  Beginners need tutorials.
>
> In the Github issue, you mentioned pollution of the working directory,
> but I think a bigger problem is destruction of user data, e.g. if a user
> has a file "wine.csv", and the example writes to that file.
>
> So you need to do something to protect users.  I think making examples a
> little complicated by using setwd(tempdir()) with a literal filename, or
> writing to tempfile() is worth it.
>
> Duncan Murdoch
>
> >
> > On Fri, May 3, 2019 at 7:59 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >>
> >> On 03/05/2019 6:33 p.m., Jarrett Phillips wrote:
> >>> Hello,
> >>>
> >>> My R package has a function with an argument to specify whether numerical
> >>> results should be outputted to a CSV file.
> >>>
> >>> CRAN policy stipulates verbatim that
> >>>
> >>> Packages should not write in the user?s home filespace (including
> >>> clipboards), nor anywhere else on the file system apart from the R
> >>> session?s temporary directory (or during installation in the location
> >>> pointed to by TMPDIR: and such usage should be cleaned up). Installing into
> >>> the system?s R installation (e.g., scripts to its bin directory) is not
> >>> allowed.
> >>>
> >>> I know I should use tempdir() within my package function, but I've not seen
> >>> any examples on how this is best done within existing R packages.
> >>>
> >>> Within my package documentation examples for my function, I have the lines:
> >>>
> >>>    \dontshow{.oldwd <- setwd(tempdir())}
> >>>
> >>> ... some R code ...
> >>>
> >>> \dontshow{setwd(.oldwd)}
> >>>
> >>> but I have been informed that this is not the accepted way.
> >>>
> >>> Any ideas from the community on how do do this properly?
> >>
> >> Use the tempfile() function to generate a filename in the temporary
> >> directory.  You might want to use the "pattern" or "fileext" arguments,
> >> but don't change the "tmpdir" argument.
> >>
> >> Then write to that file.
> >>
> >> For example,
> >>
> >> filename <- tempfile(fileext = ".csv")
> >> write.csv(df, filename)
> >>
> >> It's a good idea to clean up afterwards using
> >>
> >> unlink(filename)
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue May  7 22:48:49 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 07 May 2019 13:48:49 -0700
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <CAFDcVCTsX0sa930DJsPdXAZFYLnA80NU0BLMkAa5r4xUTsY7FA@mail.gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
 <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
 <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>
 <CAFDcVCTsX0sa930DJsPdXAZFYLnA80NU0BLMkAa5r4xUTsY7FA@mail.gmail.com>
Message-ID: <FAAB8098-90F7-4A24-96C5-DD8B7186CA0A@dcn.davis.ca.us>

I find the idea of using setwd in examples disturbing, because I try to avoid using setwd at all as a way to delegate my choice of working directory to the operating system actions taken when starting R. In other words, I recommend to  beginners that they start R in their working directory and leave it there all the time, using relative paths as much as possible. Since examples are likely to be run in the middle of an analysis in order to develop the next step in the analysis, leaving my wd elsewhere would be counterproductive. Having a leftover variable that tells me where the data were written is simpler than using setwd to and from the temp directory. More hand holding than that belongs in a tutorial or vignette.

Note that if you wrap the example up in a vignette then changing to the temp directory seems fair to me (if CRAN allows it) because the context is more like  a complete, self-contained analysis.

On May 7, 2019 11:32:49 AM PDT, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
>I agree that setwd(), tempdir(), etc. clutter up examples.  At the
>same time, I respect the CRAN policy - it's conservative approach has
>helped us avoid a wild-west working environment. One approach that
>might help bring some standardization, instead of each package
>developer rolls their own, and avoid having to have that tempdir code
>in there is to have example() handle this.  For example, add a
>workdir=tempdir() argument to example() and have example() change to
>that directory temporarily, and report on the working directory at the
>end.
>
>> example(foo)
>...
>Any output files produced by this example may be found in the
>temporary working directory '/tmp/alice/Rtmp4faDCv'.
>
>This could be a message or a warning.  One could also imagine using
>workdir=getOption("example.workdir", tempdir()) as the default.  If
>properly done, this would allow the user to set
>options(example.workdir = quote(getwd())) if they'd like to write to
>the current directory.
>
>What it does not solve is when a user cut'n'paste code, but maybe that
>could be considered acceptable because in that case the user is not
>running/source code, but calling it themself.
>
>My $.02
>
>/Henrik
>
>
>
>
>These messages can be skipped if called with example(...,
>workdir=getwd()).
>
>On Tue, May 7, 2019 at 10:57 AM Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>>
>> On 06/05/2019 12:16 p.m., Jim Hester wrote:
>> > For what it's worth, the recommendation to use `tempfile()` is very
>> > confusing to R users.
>> >
>> > Often users (particularly new users) jump directly to examples when
>> > reading documentation and when you have these more complicated
>> > examples they do not realize they can just use a simple string
>> > literal.
>> >
>> > See https://github.com/tidyverse/readr/issues/635 for an issue
>where
>> > multiple users explicitly request examples which do _not_ use
>> > `tempfile()`.
>>
>> I think beginners rarely like the help pages, and that's really to be
>> expected:  help pages need to be complete and correct, and beginners
>> really need a small subset of possibilities.  Beginners need
>tutorials.
>>
>> In the Github issue, you mentioned pollution of the working
>directory,
>> but I think a bigger problem is destruction of user data, e.g. if a
>user
>> has a file "wine.csv", and the example writes to that file.
>>
>> So you need to do something to protect users.  I think making
>examples a
>> little complicated by using setwd(tempdir()) with a literal filename,
>or
>> writing to tempfile() is worth it.
>>
>> Duncan Murdoch
>>
>> >
>> > On Fri, May 3, 2019 at 7:59 PM Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>> >>
>> >> On 03/05/2019 6:33 p.m., Jarrett Phillips wrote:
>> >>> Hello,
>> >>>
>> >>> My R package has a function with an argument to specify whether
>numerical
>> >>> results should be outputted to a CSV file.
>> >>>
>> >>> CRAN policy stipulates verbatim that
>> >>>
>> >>> Packages should not write in the user?s home filespace (including
>> >>> clipboards), nor anywhere else on the file system apart from the
>R
>> >>> session?s temporary directory (or during installation in the
>location
>> >>> pointed to by TMPDIR: and such usage should be cleaned up).
>Installing into
>> >>> the system?s R installation (e.g., scripts to its bin directory)
>is not
>> >>> allowed.
>> >>>
>> >>> I know I should use tempdir() within my package function, but
>I've not seen
>> >>> any examples on how this is best done within existing R packages.
>> >>>
>> >>> Within my package documentation examples for my function, I have
>the lines:
>> >>>
>> >>>    \dontshow{.oldwd <- setwd(tempdir())}
>> >>>
>> >>> ... some R code ...
>> >>>
>> >>> \dontshow{setwd(.oldwd)}
>> >>>
>> >>> but I have been informed that this is not the accepted way.
>> >>>
>> >>> Any ideas from the community on how do do this properly?
>> >>
>> >> Use the tempfile() function to generate a filename in the
>temporary
>> >> directory.  You might want to use the "pattern" or "fileext"
>arguments,
>> >> but don't change the "tmpdir" argument.
>> >>
>> >> Then write to that file.
>> >>
>> >> For example,
>> >>
>> >> filename <- tempfile(fileext = ".csv")
>> >> write.csv(df, filename)
>> >>
>> >> It's a good idea to clean up afterwards using
>> >>
>> >> unlink(filename)
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed May  8 00:44:30 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 8 May 2019 00:44:30 +0200
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
 <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
 <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>
Message-ID: <931d0d1e-b590-cda2-2ac2-9ca18d4fe8b0@statistik.tu-dortmund.de>



On 07.05.2019 19:57, Duncan Murdoch wrote:
> On 06/05/2019 12:16 p.m., Jim Hester wrote:
>> For what it's worth, the recommendation to use `tempfile()` is very
>> confusing to R users.
>>
>> Often users (particularly new users) jump directly to examples when
>> reading documentation and when you have these more complicated
>> examples they do not realize they can just use a simple string
>> literal.
>>
>> See https://github.com/tidyverse/readr/issues/635 for an issue where
>> multiple users explicitly request examples which do _not_ use
>> `tempfile()`.
> 
> I think beginners rarely like the help pages, and that's really to be 
> expected:? help pages need to be complete and correct, and beginners 
> really need a small subset of possibilities.? Beginners need tutorials.
> 
> In the Github issue, you mentioned pollution of the working directory, 
> but I think a bigger problem is destruction of user data, e.g. if a user 
> has a file "wine.csv", and the example writes to that file.
> 
> So you need to do something to protect users.? I think making examples a 
> little complicated by using setwd(tempdir()) with a literal filename, or 
> writing to tempfile() is worth it.

Thank you, Duncan. Well, setwd(tempdir()) should be made local to the 
examples if used at all, as the user may not expect to have the working 
directory changed.

Best,
Uwe

> Duncan Murdoch
> 
>>
>> On Fri, May 3, 2019 at 7:59 PM Duncan Murdoch 
>> <murdoch.duncan at gmail.com> wrote:
>>>
>>> On 03/05/2019 6:33 p.m., Jarrett Phillips wrote:
>>>> Hello,
>>>>
>>>> My R package has a function with an argument to specify whether 
>>>> numerical
>>>> results should be outputted to a CSV file.
>>>>
>>>> CRAN policy stipulates verbatim that
>>>>
>>>> Packages should not write in the user?s home filespace (including
>>>> clipboards), nor anywhere else on the file system apart from the R
>>>> session?s temporary directory (or during installation in the location
>>>> pointed to by TMPDIR: and such usage should be cleaned up). 
>>>> Installing into
>>>> the system?s R installation (e.g., scripts to its bin directory) is not
>>>> allowed.
>>>>
>>>> I know I should use tempdir() within my package function, but I've 
>>>> not seen
>>>> any examples on how this is best done within existing R packages.
>>>>
>>>> Within my package documentation examples for my function, I have the 
>>>> lines:
>>>>
>>>> ?? \dontshow{.oldwd <- setwd(tempdir())}
>>>>
>>>> ... some R code ...
>>>>
>>>> \dontshow{setwd(.oldwd)}
>>>>
>>>> but I have been informed that this is not the accepted way.
>>>>
>>>> Any ideas from the community on how do do this properly?
>>>
>>> Use the tempfile() function to generate a filename in the temporary
>>> directory.? You might want to use the "pattern" or "fileext" arguments,
>>> but don't change the "tmpdir" argument.
>>>
>>> Then write to that file.
>>>
>>> For example,
>>>
>>> filename <- tempfile(fileext = ".csv")
>>> write.csv(df, filename)
>>>
>>> It's a good idea to clean up afterwards using
>>>
>>> unlink(filename)
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May  8 00:50:04 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 7 May 2019 18:50:04 -0400
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <931d0d1e-b590-cda2-2ac2-9ca18d4fe8b0@statistik.tu-dortmund.de>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
 <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
 <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>
 <931d0d1e-b590-cda2-2ac2-9ca18d4fe8b0@statistik.tu-dortmund.de>
Message-ID: <87eeffe7-4e95-a8ca-de33-ab597ecd3453@gmail.com>

On 07/05/2019 6:44 p.m., Uwe Ligges wrote:
> 
> 
> On 07.05.2019 19:57, Duncan Murdoch wrote:
>> On 06/05/2019 12:16 p.m., Jim Hester wrote:
>>> For what it's worth, the recommendation to use `tempfile()` is very
>>> confusing to R users.
>>>
>>> Often users (particularly new users) jump directly to examples when
>>> reading documentation and when you have these more complicated
>>> examples they do not realize they can just use a simple string
>>> literal.
>>>
>>> See https://github.com/tidyverse/readr/issues/635 for an issue where
>>> multiple users explicitly request examples which do _not_ use
>>> `tempfile()`.
>>
>> I think beginners rarely like the help pages, and that's really to be
>> expected:? help pages need to be complete and correct, and beginners
>> really need a small subset of possibilities.? Beginners need tutorials.
>>
>> In the Github issue, you mentioned pollution of the working directory,
>> but I think a bigger problem is destruction of user data, e.g. if a user
>> has a file "wine.csv", and the example writes to that file.
>>
>> So you need to do something to protect users.? I think making examples a
>> little complicated by using setwd(tempdir()) with a literal filename, or
>> writing to tempfile() is worth it.
> 
> Thank you, Duncan. Well, setwd(tempdir()) should be made local to the
> examples if used at all, as the user may not expect to have the working
> directory changed.

Yes, I agree.

Duncan Murdoch


From bor|@@@te|pe @end|ng |rom utoronto@c@  Wed May  8 13:16:58 2019
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Wed, 8 May 2019 11:16:58 +0000
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <87eeffe7-4e95-a8ca-de33-ab597ecd3453@gmail.com>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
 <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
 <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>
 <931d0d1e-b590-cda2-2ac2-9ca18d4fe8b0@statistik.tu-dortmund.de>
 <87eeffe7-4e95-a8ca-de33-ab597ecd3453@gmail.com>
Message-ID: <60D73629-E0DB-4D96-A05C-61869A45BAC4@utoronto.ca>

Have you considered putting the explicit case into a comment? Something like ...

# For output to a CSV file, we would assign: myCSV <- "myResults.csv"
# ... but for this example we will use the value of tempfile() as the file name:
myCSV <- tempfile()
results <- doSomething(x, csvFile = myCSV, ...)


I often find the lack of comments in examples less than optimal for didactic reasons.

$0.02

Boris



> On 2019-05-07, at 18:50, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 07/05/2019 6:44 p.m., Uwe Ligges wrote:
>> On 07.05.2019 19:57, Duncan Murdoch wrote:
>>> On 06/05/2019 12:16 p.m., Jim Hester wrote:
>>>> For what it's worth, the recommendation to use `tempfile()` is very
>>>> confusing to R users.
>>>> 
>>>> Often users (particularly new users) jump directly to examples when
>>>> reading documentation and when you have these more complicated
>>>> examples they do not realize they can just use a simple string
>>>> literal.
>>>> 
>>>> See https://github.com/tidyverse/readr/issues/635 for an issue where
>>>> multiple users explicitly request examples which do _not_ use
>>>> `tempfile()`.
>>> 
>>> I think beginners rarely like the help pages, and that's really to be
>>> expected:  help pages need to be complete and correct, and beginners
>>> really need a small subset of possibilities.  Beginners need tutorials.
>>> 
>>> In the Github issue, you mentioned pollution of the working directory,
>>> but I think a bigger problem is destruction of user data, e.g. if a user
>>> has a file "wine.csv", and the example writes to that file.
>>> 
>>> So you need to do something to protect users.  I think making examples a
>>> little complicated by using setwd(tempdir()) with a literal filename, or
>>> writing to tempfile() is worth it.
>> Thank you, Duncan. Well, setwd(tempdir()) should be made local to the
>> examples if used at all, as the user may not expect to have the working
>> directory changed.
> 
> Yes, I agree.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May  8 14:08:40 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 8 May 2019 08:08:40 -0400
Subject: [R-pkg-devel] 
 Writing to files without altering working directory in R package
In-Reply-To: <60D73629-E0DB-4D96-A05C-61869A45BAC4@utoronto.ca>
References: <CAMVrHdD4h48Y+jUZbj4H4Hc1-0jwqUk3rNoR9rLuvsiFBtXWFQ@mail.gmail.com>
 <a403489d-4e27-fc16-86b1-95a07dbbc47a@gmail.com>
 <CAD6tx946DVPUEufHQygLuWnDzPMHckoqTVp6oBy1d+tURdMugA@mail.gmail.com>
 <1017854f-0572-ba0a-fcf1-89db71443bb3@gmail.com>
 <931d0d1e-b590-cda2-2ac2-9ca18d4fe8b0@statistik.tu-dortmund.de>
 <87eeffe7-4e95-a8ca-de33-ab597ecd3453@gmail.com>
 <60D73629-E0DB-4D96-A05C-61869A45BAC4@utoronto.ca>
Message-ID: <09c3aac0-59f6-6bab-85e1-077c09050331@gmail.com>

On 08/05/2019 7:16 a.m., Boris Steipe wrote:
> Have you considered putting the explicit case into a comment? Something like ...
> 
> # For output to a CSV file, we would assign: myCSV <- "myResults.csv"
> # ... but for this example we will use the value of tempfile() as the file name:
> myCSV <- tempfile()
> results <- doSomething(x, csvFile = myCSV, ...)

That seems like a good idea.  If the lack of string literals in the 
example was the issue, you might show the whole command in a comment 
with a string literal:

# This would create "myResults.csv" in the current working directory:
#   results <- doSomething(x, csvFile = "myResults.csv", ...)

# We will create a temporary file instead, with its name in myCSV...

myCSV <- tempfile()
results <- doSomething(x, csvFile = myCSV, ...)

> 
> 
> I often find the lack of comments in examples less than optimal for didactic reasons.
> 
> $0.02
> 
> Boris
> 
> 
> 
>> On 2019-05-07, at 18:50, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 07/05/2019 6:44 p.m., Uwe Ligges wrote:
>>> On 07.05.2019 19:57, Duncan Murdoch wrote:
>>>> On 06/05/2019 12:16 p.m., Jim Hester wrote:
>>>>> For what it's worth, the recommendation to use `tempfile()` is very
>>>>> confusing to R users.
>>>>>
>>>>> Often users (particularly new users) jump directly to examples when
>>>>> reading documentation and when you have these more complicated
>>>>> examples they do not realize they can just use a simple string
>>>>> literal.
>>>>>
>>>>> See https://github.com/tidyverse/readr/issues/635 for an issue where
>>>>> multiple users explicitly request examples which do _not_ use
>>>>> `tempfile()`.
>>>>
>>>> I think beginners rarely like the help pages, and that's really to be
>>>> expected:  help pages need to be complete and correct, and beginners
>>>> really need a small subset of possibilities.  Beginners need tutorials.
>>>>
>>>> In the Github issue, you mentioned pollution of the working directory,
>>>> but I think a bigger problem is destruction of user data, e.g. if a user
>>>> has a file "wine.csv", and the example writes to that file.
>>>>
>>>> So you need to do something to protect users.  I think making examples a
>>>> little complicated by using setwd(tempdir()) with a literal filename, or
>>>> writing to tempfile() is worth it.
>>> Thank you, Duncan. Well, setwd(tempdir()) should be made local to the
>>> examples if used at all, as the user may not expect to have the working
>>> directory changed.
>>
>> Yes, I agree.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ju||en@ch|quet @end|ng |rom gm@||@com  Thu May  9 09:43:23 2019
From: ju||en@ch|quet @end|ng |rom gm@||@com (julien chiquet)
Date: Thu, 9 May 2019 09:43:23 +0200
Subject: [R-pkg-devel] About the processing time of CRAN submissions
Message-ID: <CACeAVJniTC94Je8+NwiW5EAwZWeuq156aWJXmKcOPCQyi=sv5A@mail.gmail.com>

Hi,

I have submitted a package to CRAN (resubmission of a new submission) more
than 50 days ago and still have no feedback from CRAN (see PLNmodels)

https://cransays.itsalocke.com/articles/dashboard.html

I know that the workload of CRAN volunteers is extremely heavy and really
want to thank them a lot for their work. I am simply curious to understand
why some submissions take much longer to process than others. This would
allow me to avoid making mistakes in the future that would lengthen the
time it takes to publish on CRAN.

I hope no one will feel offended by this remark.

Thank you for your feedback.

J.

Julien Chiquet
https://jchiquet.github.io
mel: julien.chiquet at inra.fr

	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Thu May  9 09:53:01 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 9 May 2019 09:53:01 +0200
Subject: [R-pkg-devel] Package dependency graphs of packages in development
 (local)
Message-ID: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>

Hi

I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies but `tools::package_dependencies()` does only work on packages on CRAN. 

But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.

Is there a tool which allows me to plot a dependency graph for my local package?

Thanks,

Rainer


--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu May  9 10:31:12 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 9 May 2019 10:31:12 +0200
Subject: [R-pkg-devel] About the processing time of CRAN submissions
In-Reply-To: <CACeAVJniTC94Je8+NwiW5EAwZWeuq156aWJXmKcOPCQyi=sv5A@mail.gmail.com>
References: <CACeAVJniTC94Je8+NwiW5EAwZWeuq156aWJXmKcOPCQyi=sv5A@mail.gmail.com>
Message-ID: <f3a499d9-097d-3d23-b9c8-9e1c5257db15@statistik.tu-dortmund.de>

Please resubmit, we do not have the submission anymore, so I guess it 
has been auto archived and either soemthing went wrong with the auto 
generated message or it went into your spam folder.

It never takes 50 days ...

Best,
Uwe Ligges





On 09.05.2019 09:43, julien chiquet wrote:
> Hi,
> 
> I have submitted a package to CRAN (resubmission of a new submission) more
> than 50 days ago and still have no feedback from CRAN (see PLNmodels)
> 
> https://cransays.itsalocke.com/articles/dashboard.html
> 
> I know that the workload of CRAN volunteers is extremely heavy and really
> want to thank them a lot for their work. I am simply curious to understand
> why some submissions take much longer to process than others. This would
> allow me to avoid making mistakes in the future that would lengthen the
> time it takes to publish on CRAN.
> 
> I hope no one will feel offended by this remark.
> 
> Thank you for your feedback.
> 
> J.
> 
> Julien Chiquet
> https://jchiquet.github.io
> mel: julien.chiquet at inra.fr
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu May  9 11:24:32 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 9 May 2019 10:24:32 +0100
Subject: [R-pkg-devel] 
 Package dependency graphs of packages in development (local)
In-Reply-To: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
References: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
Message-ID: <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>

You can do something like this with https://github.com/r-lib/pkgdepends:

pr <- pkgdepends::remotes()$new("local::.", library = tempfile())
#> ? Creating library directory:
`/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//Rtmpo5NL9R/filee95427c73f55`

pr$solve()
#> ? Checking for package metadata updates
#> ? All 10 metadata files are current.
#> ? Using session cached package metadata
#> ? Using cached package metadata
#> PKG SOLUTION, 1 refs, resolved in 1.2s, solved in 193ms
???????????????????????
#>   local::.
#> Dependencies:
#>   github:
#>     r-lib/crancache, r-lib/rcmdcheck
#>   standard:
#>     askpass, assertthat, backports, base64enc, bit, bit64, blob, callr,
#>     cli, clisymbols, cranlike, crayon, curl, DBI, debugme, desc,
#>     digest, evaluate, fansi, glue, gmailr, highr, hms, httr, jsonlite,
#>     knitr, magrittr, markdown, memoise, mime, openssl, parsedate,
#>     pillar, pkgbuild, pkgconfig, prettyunits, processx, progress, ps,
#>     R6, rappdirs, Rcpp, rematch2, remotes, rlang, rprojroot, RSQLite,
#>     sessioninfo, stringi, stringr, sys, tibble, utf8, whoami, withr,
#>     xfun, xopen, yaml

tibble::as_tibble(pr$get_solution()$data)
#> # A tibble: 61 x 27
#>    ref   type  direct status package version license
needscompilation priority
#>    <chr> <chr> <lgl>  <chr>  <chr>   <chr>   <chr>   <lgl>            <chr>
#>  1 loca? local TRUE   OK     revdep? 1.0.0.? MIT + ? NA               NA
#>  2 askp? stan? FALSE  OK     askpass 1.1     NA      FALSE            NA
#>  3 asse? stan? FALSE  OK     assert? 0.2.1   NA      FALSE            NA
#>  4 back? stan? FALSE  OK     backpo? 1.1.4   NA      FALSE            NA
#>  5 base? stan? FALSE  OK     base64? 0.1-3   NA      FALSE            NA
#>  6 bit64 stan? FALSE  OK     bit64   0.9-7   NA      FALSE            NA
#>  7 bit   stan? FALSE  OK     bit     1.1-14  NA      FALSE            NA
#>  8 blob  stan? FALSE  OK     blob    1.1.1   NA      FALSE            NA
#>  9 callr stan? FALSE  OK     callr   3.2.0   NA      FALSE            NA
#> 10 cli   stan? FALSE  OK     cli     1.1.0   NA      FALSE            NA
#> # ? with 51 more rows, and 18 more variables: md5sum <chr>, sha256 <chr>,
#> #   filesize <int>, built <chr>, platform <chr>, rversion <chr>,
repodir <chr>,
#> #   target <chr>, deps <list>, mirror <chr>, sources <list>, remote <list>,
#> #   error <list>, metadata <list>, extra <list>, dep_types <list>,
#> #   cache_status <chr>, lib_status <chr>

And the `deps` column there shows the direct dependencies of the dependencies:

? pr$get_solution()$data$deps[1:2]
#> [[1]]
#> # A tibble: 25 x 5
#>    ref             type    package    op    version
#>    <chr>           <chr>   <chr>      <chr> <chr>
#>  1 assertthat      Imports assertthat ""    ""
#>  2 callr           Imports callr      ""    ""
#>  3 cli             Imports cli        ""    ""
#>  4 clisymbols      Imports clisymbols ""    ""
#>  5 r-lib/crancache Imports crancache  >=    0.0.0.9001
#>  6 crayon          Imports crayon     ""    ""
#>  7 DBI             Imports DBI        ""    ""
#>  8 desc            Imports desc       >=    1.1.1.9002
#>  9 glue            Imports glue       ""    ""
#> 10 gmailr          Imports gmailr     ""    ""
#> # ? with 15 more rows
#>
#> [[2]]
#> # A tibble: 2 x 5
#>   ref      type     package  op    version
#>   <chr>    <chr>    <chr>    <chr> <chr>
#> 1 testthat suggests testthat ""    ""
#> 2 sys      imports  sys      >=    2.1

Gabor

On Thu, May 9, 2019 at 8:53 AM Rainer M Krug <Rainer at krugs.de> wrote:
>
> Hi
>
> I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies but `tools::package_dependencies()` does only work on packages on CRAN.
>
> But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.
>
> Is there a tool which allows me to plot a dependency graph for my local package?
>
> Thanks,
>
> Rainer
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office: +41 (0)44 635 47 64
> Cell:           +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
>                 Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From R@|ner @end|ng |rom krug@@de  Thu May  9 12:09:26 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 9 May 2019 12:09:26 +0200
Subject: [R-pkg-devel] 
 Package dependency graphs of packages in development (local)
In-Reply-To: <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>
References: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
 <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>
Message-ID: <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>

Thanks Gabor. 

This gives me an impressive long list. Is there a way to see this graphically? Parsing seems to be a long, tedious process.

I want to identify packages which I should leave out to reduce the number of (indirect) dependencies.

Rainer


> On 9 May 2019, at 11:24, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> You can do something like this with https://github.com/r-lib/pkgdepends:
> 
> pr <- pkgdepends::remotes()$new("local::.", library = tempfile())
> #> ? Creating library directory:
> `/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//Rtmpo5NL9R/filee95427c73f55`
> 
> pr$solve()
> #> ? Checking for package metadata updates
> #> ? All 10 metadata files are current.
> #> ? Using session cached package metadata
> #> ? Using cached package metadata
> #> PKG SOLUTION, 1 refs, resolved in 1.2s, solved in 193ms
> ???????????????????????
> #>   local::.
> #> Dependencies:
> #>   github:
> #>     r-lib/crancache, r-lib/rcmdcheck
> #>   standard:
> #>     askpass, assertthat, backports, base64enc, bit, bit64, blob, callr,
> #>     cli, clisymbols, cranlike, crayon, curl, DBI, debugme, desc,
> #>     digest, evaluate, fansi, glue, gmailr, highr, hms, httr, jsonlite,
> #>     knitr, magrittr, markdown, memoise, mime, openssl, parsedate,
> #>     pillar, pkgbuild, pkgconfig, prettyunits, processx, progress, ps,
> #>     R6, rappdirs, Rcpp, rematch2, remotes, rlang, rprojroot, RSQLite,
> #>     sessioninfo, stringi, stringr, sys, tibble, utf8, whoami, withr,
> #>     xfun, xopen, yaml
> 
> tibble::as_tibble(pr$get_solution()$data)
> #> # A tibble: 61 x 27
> #>    ref   type  direct status package version license
> needscompilation priority
> #>    <chr> <chr> <lgl>  <chr>  <chr>   <chr>   <chr>   <lgl>            <chr>
> #>  1 loca? local TRUE   OK     revdep? 1.0.0.? MIT + ? NA               NA
> #>  2 askp? stan? FALSE  OK     askpass 1.1     NA      FALSE            NA
> #>  3 asse? stan? FALSE  OK     assert? 0.2.1   NA      FALSE            NA
> #>  4 back? stan? FALSE  OK     backpo? 1.1.4   NA      FALSE            NA
> #>  5 base? stan? FALSE  OK     base64? 0.1-3   NA      FALSE            NA
> #>  6 bit64 stan? FALSE  OK     bit64   0.9-7   NA      FALSE            NA
> #>  7 bit   stan? FALSE  OK     bit     1.1-14  NA      FALSE            NA
> #>  8 blob  stan? FALSE  OK     blob    1.1.1   NA      FALSE            NA
> #>  9 callr stan? FALSE  OK     callr   3.2.0   NA      FALSE            NA
> #> 10 cli   stan? FALSE  OK     cli     1.1.0   NA      FALSE            NA
> #> # ? with 51 more rows, and 18 more variables: md5sum <chr>, sha256 <chr>,
> #> #   filesize <int>, built <chr>, platform <chr>, rversion <chr>,
> repodir <chr>,
> #> #   target <chr>, deps <list>, mirror <chr>, sources <list>, remote <list>,
> #> #   error <list>, metadata <list>, extra <list>, dep_types <list>,
> #> #   cache_status <chr>, lib_status <chr>
> 
> And the `deps` column there shows the direct dependencies of the dependencies:
> 
> ? pr$get_solution()$data$deps[1:2]
> #> [[1]]
> #> # A tibble: 25 x 5
> #>    ref             type    package    op    version
> #>    <chr>           <chr>   <chr>      <chr> <chr>
> #>  1 assertthat      Imports assertthat ""    ""
> #>  2 callr           Imports callr      ""    ""
> #>  3 cli             Imports cli        ""    ""
> #>  4 clisymbols      Imports clisymbols ""    ""
> #>  5 r-lib/crancache Imports crancache  >=    0.0.0.9001
> #>  6 crayon          Imports crayon     ""    ""
> #>  7 DBI             Imports DBI        ""    ""
> #>  8 desc            Imports desc       >=    1.1.1.9002
> #>  9 glue            Imports glue       ""    ""
> #> 10 gmailr          Imports gmailr     ""    ""
> #> # ? with 15 more rows
> #>
> #> [[2]]
> #> # A tibble: 2 x 5
> #>   ref      type     package  op    version
> #>   <chr>    <chr>    <chr>    <chr> <chr>
> #> 1 testthat suggests testthat ""    ""
> #> 2 sys      imports  sys      >=    2.1
> 
> Gabor
> 
> On Thu, May 9, 2019 at 8:53 AM Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> Hi
>> 
>> I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies but `tools::package_dependencies()` does only work on packages on CRAN.
>> 
>> But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.
>> 
>> Is there a tool which allows me to plot a dependency graph for my local package?
>> 
>> Thanks,
>> 
>> Rainer
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office: +41 (0)44 635 47 64
>> Cell:           +41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>>                Rainer at krugs.de
>> Skype:     RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Thu May  9 12:15:53 2019
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Thu, 9 May 2019 10:15:53 +0000 (UTC)
Subject: [R-pkg-devel]  Package dependency graphs of packages in
 development (local)
In-Reply-To: <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>
References: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
 <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>
 <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>
Message-ID: <1455788522.10500014.1557396953993@mail.yahoo.com>

 Could https://github.com/jimhester/itdepends help?
Ma?lle.
   Den torsdag 9 maj 2019 12:10:14 CEST, Rainer M Krug <Rainer at krugs.de> skrev:  
 
 Thanks Gabor. 

This gives me an impressive long list. Is there a way to see this graphically? Parsing seems to be a long, tedious process.

I want to identify packages which I should leave out to reduce the number of (indirect) dependencies.

Rainer


> On 9 May 2019, at 11:24, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> You can do something like this with https://github.com/r-lib/pkgdepends:
> 
> pr <- pkgdepends::remotes()$new("local::.", library = tempfile())
> #> ? Creating library directory:
> `/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//Rtmpo5NL9R/filee95427c73f55`
> 
> pr$solve()
> #> ? Checking for package metadata updates
> #> ? All 10 metadata files are current.
> #> ? Using session cached package metadata
> #> ? Using cached package metadata
> #> PKG SOLUTION, 1 refs, resolved in 1.2s, solved in 193ms
> ???????????????????????
> #>? local::.
> #> Dependencies:
> #>? github:
> #>? ? r-lib/crancache, r-lib/rcmdcheck
> #>? standard:
> #>? ? askpass, assertthat, backports, base64enc, bit, bit64, blob, callr,
> #>? ? cli, clisymbols, cranlike, crayon, curl, DBI, debugme, desc,
> #>? ? digest, evaluate, fansi, glue, gmailr, highr, hms, httr, jsonlite,
> #>? ? knitr, magrittr, markdown, memoise, mime, openssl, parsedate,
> #>? ? pillar, pkgbuild, pkgconfig, prettyunits, processx, progress, ps,
> #>? ? R6, rappdirs, Rcpp, rematch2, remotes, rlang, rprojroot, RSQLite,
> #>? ? sessioninfo, stringi, stringr, sys, tibble, utf8, whoami, withr,
> #>? ? xfun, xopen, yaml
> 
> tibble::as_tibble(pr$get_solution()$data)
> #> # A tibble: 61 x 27
> #>? ? ref? type? direct status package version license
> needscompilation priority
> #>? ? <chr> <chr> <lgl>? <chr>? <chr>? <chr>? <chr>? <lgl>? ? ? ? ? ? <chr>
> #>? 1 loca? local TRUE? OK? ? revdep? 1.0.0.? MIT + ? NA? ? ? ? ? ? ? NA
> #>? 2 askp? stan? FALSE? OK? ? askpass 1.1? ? NA? ? ? FALSE? ? ? ? ? ? NA
> #>? 3 asse? stan? FALSE? OK? ? assert? 0.2.1? NA? ? ? FALSE? ? ? ? ? ? NA
> #>? 4 back? stan? FALSE? OK? ? backpo? 1.1.4? NA? ? ? FALSE? ? ? ? ? ? NA
> #>? 5 base? stan? FALSE? OK? ? base64? 0.1-3? NA? ? ? FALSE? ? ? ? ? ? NA
> #>? 6 bit64 stan? FALSE? OK? ? bit64? 0.9-7? NA? ? ? FALSE? ? ? ? ? ? NA
> #>? 7 bit? stan? FALSE? OK? ? bit? ? 1.1-14? NA? ? ? FALSE? ? ? ? ? ? NA
> #>? 8 blob? stan? FALSE? OK? ? blob? ? 1.1.1? NA? ? ? FALSE? ? ? ? ? ? NA
> #>? 9 callr stan? FALSE? OK? ? callr? 3.2.0? NA? ? ? FALSE? ? ? ? ? ? NA
> #> 10 cli? stan? FALSE? OK? ? cli? ? 1.1.0? NA? ? ? FALSE? ? ? ? ? ? NA
> #> # ? with 51 more rows, and 18 more variables: md5sum <chr>, sha256 <chr>,
> #> #? filesize <int>, built <chr>, platform <chr>, rversion <chr>,
> repodir <chr>,
> #> #? target <chr>, deps <list>, mirror <chr>, sources <list>, remote <list>,
> #> #? error <list>, metadata <list>, extra <list>, dep_types <list>,
> #> #? cache_status <chr>, lib_status <chr>
> 
> And the `deps` column there shows the direct dependencies of the dependencies:
> 
> ? pr$get_solution()$data$deps[1:2]
> #> [[1]]
> #> # A tibble: 25 x 5
> #>? ? ref? ? ? ? ? ? type? ? package? ? op? ? version
> #>? ? <chr>? ? ? ? ? <chr>? <chr>? ? ? <chr> <chr>
> #>? 1 assertthat? ? ? Imports assertthat ""? ? ""
> #>? 2 callr? ? ? ? ? Imports callr? ? ? ""? ? ""
> #>? 3 cli? ? ? ? ? ? Imports cli? ? ? ? ""? ? ""
> #>? 4 clisymbols? ? ? Imports clisymbols ""? ? ""
> #>? 5 r-lib/crancache Imports crancache? >=? ? 0.0.0.9001
> #>? 6 crayon? ? ? ? ? Imports crayon? ? ""? ? ""
> #>? 7 DBI? ? ? ? ? ? Imports DBI? ? ? ? ""? ? ""
> #>? 8 desc? ? ? ? ? ? Imports desc? ? ? >=? ? 1.1.1.9002
> #>? 9 glue? ? ? ? ? ? Imports glue? ? ? ""? ? ""
> #> 10 gmailr? ? ? ? ? Imports gmailr? ? ""? ? ""
> #> # ? with 15 more rows
> #>
> #> [[2]]
> #> # A tibble: 2 x 5
> #>? ref? ? ? type? ? package? op? ? version
> #>? <chr>? ? <chr>? ? <chr>? ? <chr> <chr>
> #> 1 testthat suggests testthat ""? ? ""
> #> 2 sys? ? ? imports? sys? ? ? >=? ? 2.1
> 
> Gabor
> 
> On Thu, May 9, 2019 at 8:53 AM Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> Hi
>> 
>> I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies but `tools::package_dependencies()` does only work on packages on CRAN.
>> 
>> But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.
>> 
>> Is there a tool which allows me to plot a dependency graph for my local package?
>> 
>> Thanks,
>> 
>> Rainer
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office: +41 (0)44 635 47 64
>> Cell:? ? ? ? ? +41 (0)78 630 66 57
>> email:? ? ? Rainer.Krug at uzh.ch
>>? ? ? ? ? ? ? ? Rainer at krugs.de
>> Skype:? ? RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:??? +41 (0)44 635 47 64
Cell:? ? ? ??? +41 (0)78 630 66 57
email:? ? ? Rainer.Krug at uzh.ch
??? ??? Rainer at krugs.de
Skype:? ? RMkrug

PGP: 0x0F52F982




??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel  
	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Thu May  9 12:20:03 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 9 May 2019 12:20:03 +0200
Subject: [R-pkg-devel] 
 Package dependency graphs of packages in development (local)
In-Reply-To: <1455788522.10500014.1557396953993@mail.yahoo.com>
References: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
 <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>
 <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>
 <1455788522.10500014.1557396953993@mail.yahoo.com>
Message-ID: <E25AAE83-8A9B-476F-944A-AFC1F7CC785E@krugs.de>

Thanks.

This sounds like a really useful package - I?ll check it out.


> On 9 May 2019, at 12:15, Ma?lle SALMON <maelle.salmon at yahoo.se> wrote:
> 
> Could https://github.com/jimhester/itdepends help?
> 
> Ma?lle.
> Den torsdag 9 maj 2019 12:10:14 CEST, Rainer M Krug <Rainer at krugs.de> skrev:
> 
> 
> Thanks Gabor. 
> 
> This gives me an impressive long list. Is there a way to see this graphically? Parsing seems to be a long, tedious process.
> 
> I want to identify packages which I should leave out to reduce the number of (indirect) dependencies.
> 
> Rainer
> 
> 
> > On 9 May 2019, at 11:24, G?bor Cs?rdi <csardi.gabor at gmail.com <mailto:csardi.gabor at gmail.com>> wrote:
> > 
> > You can do something like this with https://github.com/r-lib/pkgdepends:
> > 
> > pr <- pkgdepends::remotes()$new("local::.", library = tempfile())
> > #> ? Creating library directory:
> > `/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//Rtmpo5NL9R/filee95427c73f55`
> > 
> > pr$solve()
> > #> ? Checking for package metadata updates
> > #> ? All 10 metadata files are current.
> > #> ? Using session cached package metadata
> > #> ? Using cached package metadata
> > #> PKG SOLUTION, 1 refs, resolved in 1.2s, solved in 193ms
> > ???????????????????????
> > #>  local::.
> > #> Dependencies:
> > #>  github:
> > #>    r-lib/crancache, r-lib/rcmdcheck
> > #>  standard:
> > #>    askpass, assertthat, backports, base64enc, bit, bit64, blob, callr,
> > #>    cli, clisymbols, cranlike, crayon, curl, DBI, debugme, desc,
> > #>    digest, evaluate, fansi, glue, gmailr, highr, hms, httr, jsonlite,
> > #>    knitr, magrittr, markdown, memoise, mime, openssl, parsedate,
> > #>    pillar, pkgbuild, pkgconfig, prettyunits, processx, progress, ps,
> > #>    R6, rappdirs, Rcpp, rematch2, remotes, rlang, rprojroot, RSQLite,
> > #>    sessioninfo, stringi, stringr, sys, tibble, utf8, whoami, withr,
> > #>    xfun, xopen, yaml
> > 
> > tibble::as_tibble(pr$get_solution()$data)
> > #> # A tibble: 61 x 27
> > #>    ref  type  direct status package version license
> > needscompilation priority
> > #>    <chr> <chr> <lgl>  <chr>  <chr>  <chr>  <chr>  <lgl>            <chr>
> > #>  1 loca? local TRUE  OK    revdep? 1.0.0.? MIT + ? NA              NA
> > #>  2 askp? stan? FALSE  OK    askpass 1.1    NA      FALSE            NA
> > #>  3 asse? stan? FALSE  OK    assert? 0.2.1  NA      FALSE            NA
> > #>  4 back? stan? FALSE  OK    backpo? 1.1.4  NA      FALSE            NA
> > #>  5 base? stan? FALSE  OK    base64? 0.1-3  NA      FALSE            NA
> > #>  6 bit64 stan? FALSE  OK    bit64  0.9-7  NA      FALSE            NA
> > #>  7 bit  stan? FALSE  OK    bit    1.1-14  NA      FALSE            NA
> > #>  8 blob  stan? FALSE  OK    blob    1.1.1  NA      FALSE            NA
> > #>  9 callr stan? FALSE  OK    callr  3.2.0  NA      FALSE            NA
> > #> 10 cli  stan? FALSE  OK    cli    1.1.0  NA      FALSE            NA
> > #> # ? with 51 more rows, and 18 more variables: md5sum <chr>, sha256 <chr>,
> > #> #  filesize <int>, built <chr>, platform <chr>, rversion <chr>,
> > repodir <chr>,
> > #> #  target <chr>, deps <list>, mirror <chr>, sources <list>, remote <list>,
> > #> #  error <list>, metadata <list>, extra <list>, dep_types <list>,
> > #> #  cache_status <chr>, lib_status <chr>
> > 
> > And the `deps` column there shows the direct dependencies of the dependencies:
> > 
> > ? pr$get_solution()$data$deps[1:2]
> > #> [[1]]
> > #> # A tibble: 25 x 5
> > #>    ref            type    package    op    version
> > #>    <chr>          <chr>  <chr>      <chr> <chr>
> > #>  1 assertthat      Imports assertthat ""    ""
> > #>  2 callr          Imports callr      ""    ""
> > #>  3 cli            Imports cli        ""    ""
> > #>  4 clisymbols      Imports clisymbols ""    ""
> > #>  5 r-lib/crancache Imports crancache  >=    0.0.0.9001
> > #>  6 crayon          Imports crayon    ""    ""
> > #>  7 DBI            Imports DBI        ""    ""
> > #>  8 desc            Imports desc      >=    1.1.1.9002
> > #>  9 glue            Imports glue      ""    ""
> > #> 10 gmailr          Imports gmailr    ""    ""
> > #> # ? with 15 more rows
> > #>
> > #> [[2]]
> > #> # A tibble: 2 x 5
> > #>  ref      type    package  op    version
> > #>  <chr>    <chr>    <chr>    <chr> <chr>
> > #> 1 testthat suggests testthat ""    ""
> > #> 2 sys      imports  sys      >=    2.1
> > 
> > Gabor
> > 
> > On Thu, May 9, 2019 at 8:53 AM Rainer M Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>> wrote:
> >> 
> >> Hi
> >> 
> >> I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies  <http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies>but `tools::package_dependencies()` does only work on packages on CRAN.
> >> 
> >> But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.
> >> 
> >> Is there a tool which allows me to plot a dependency graph for my local package?
> >> 
> >> Thanks,
> >> 
> >> Rainer
> >> 
> >> 
> >> --
> >> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> >> 
> >> Orcid ID: 0000-0002-7490-0066
> >> 
> >> Department of Evolutionary Biology and Environmental Studies
> >> University of Z?rich
> >> Office Y34-J-74
> >> Winterthurerstrasse 190
> >> 8075 Z?rich
> >> Switzerland
> >> 
> >> Office: +41 (0)44 635 47 64
> >> Cell:          +41 (0)78 630 66 57
> >> email:      Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
> >>                Rainer at krugs.de <mailto:Rainer at krugs.de>
> >> Skype:    RMkrug
> >> 
> >> PGP: 0x0F52F982
> >> 
> >> ______________________________________________
> >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:    +41 (0)44 635 47 64
> Cell:          +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>         Rainer at krugs.de <mailto:Rainer at krugs.de>
> Skype:    RMkrug
> 
> PGP: 0x0F52F982
> 
> 
> 
> 
>     [[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu May  9 12:21:47 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 9 May 2019 11:21:47 +0100
Subject: [R-pkg-devel] 
 Package dependency graphs of packages in development (local)
In-Reply-To: <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>
References: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
 <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>
 <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>
Message-ID: <CABtg=K=6RRurzikL5Lw1_U7pMb+MAiSdj3wWNbTwpojNAafiFQ@mail.gmail.com>

You can try `pr$draw_tree()`, but it is quite buggy, and fails for
infinite (Suggests) loops:
https://github.com/r-lib/pkgdepends/issues/129

This might be an easier way to get the direct dependencies of each
package in the
dependency tree:
tibble::as_tibble(pr$get_install_plan(FALSE))[, c("package", "dependencies")]

Gabor

On Thu, May 9, 2019 at 11:09 AM Rainer M Krug <Rainer at krugs.de> wrote:
>
> Thanks Gabor.
>
> This gives me an impressive long list. Is there a way to see this graphically? Parsing seems to be a long, tedious process.
>
> I want to identify packages which I should leave out to reduce the number of (indirect) dependencies.
>
> Rainer
>
>
> On 9 May 2019, at 11:24, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> You can do something like this with https://github.com/r-lib/pkgdepends:
>
> pr <- pkgdepends::remotes()$new("local::.", library = tempfile())
> #> ? Creating library directory:
> `/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//Rtmpo5NL9R/filee95427c73f55`
>
> pr$solve()
> #> ? Checking for package metadata updates
> #> ? All 10 metadata files are current.
> #> ? Using session cached package metadata
> #> ? Using cached package metadata
> #> PKG SOLUTION, 1 refs, resolved in 1.2s, solved in 193ms
> ???????????????????????
> #>   local::.
> #> Dependencies:
> #>   github:
> #>     r-lib/crancache, r-lib/rcmdcheck
> #>   standard:
> #>     askpass, assertthat, backports, base64enc, bit, bit64, blob, callr,
> #>     cli, clisymbols, cranlike, crayon, curl, DBI, debugme, desc,
> #>     digest, evaluate, fansi, glue, gmailr, highr, hms, httr, jsonlite,
> #>     knitr, magrittr, markdown, memoise, mime, openssl, parsedate,
> #>     pillar, pkgbuild, pkgconfig, prettyunits, processx, progress, ps,
> #>     R6, rappdirs, Rcpp, rematch2, remotes, rlang, rprojroot, RSQLite,
> #>     sessioninfo, stringi, stringr, sys, tibble, utf8, whoami, withr,
> #>     xfun, xopen, yaml
>
> tibble::as_tibble(pr$get_solution()$data)
> #> # A tibble: 61 x 27
> #>    ref   type  direct status package version license
> needscompilation priority
> #>    <chr> <chr> <lgl>  <chr>  <chr>   <chr>   <chr>   <lgl>            <chr>
> #>  1 loca? local TRUE   OK     revdep? 1.0.0.? MIT + ? NA               NA
> #>  2 askp? stan? FALSE  OK     askpass 1.1     NA      FALSE            NA
> #>  3 asse? stan? FALSE  OK     assert? 0.2.1   NA      FALSE            NA
> #>  4 back? stan? FALSE  OK     backpo? 1.1.4   NA      FALSE            NA
> #>  5 base? stan? FALSE  OK     base64? 0.1-3   NA      FALSE            NA
> #>  6 bit64 stan? FALSE  OK     bit64   0.9-7   NA      FALSE            NA
> #>  7 bit   stan? FALSE  OK     bit     1.1-14  NA      FALSE            NA
> #>  8 blob  stan? FALSE  OK     blob    1.1.1   NA      FALSE            NA
> #>  9 callr stan? FALSE  OK     callr   3.2.0   NA      FALSE            NA
> #> 10 cli   stan? FALSE  OK     cli     1.1.0   NA      FALSE            NA
> #> # ? with 51 more rows, and 18 more variables: md5sum <chr>, sha256 <chr>,
> #> #   filesize <int>, built <chr>, platform <chr>, rversion <chr>,
> repodir <chr>,
> #> #   target <chr>, deps <list>, mirror <chr>, sources <list>, remote <list>,
> #> #   error <list>, metadata <list>, extra <list>, dep_types <list>,
> #> #   cache_status <chr>, lib_status <chr>
>
> And the `deps` column there shows the direct dependencies of the dependencies:
>
> ? pr$get_solution()$data$deps[1:2]
> #> [[1]]
> #> # A tibble: 25 x 5
> #>    ref             type    package    op    version
> #>    <chr>           <chr>   <chr>      <chr> <chr>
> #>  1 assertthat      Imports assertthat ""    ""
> #>  2 callr           Imports callr      ""    ""
> #>  3 cli             Imports cli        ""    ""
> #>  4 clisymbols      Imports clisymbols ""    ""
> #>  5 r-lib/crancache Imports crancache  >=    0.0.0.9001
> #>  6 crayon          Imports crayon     ""    ""
> #>  7 DBI             Imports DBI        ""    ""
> #>  8 desc            Imports desc       >=    1.1.1.9002
> #>  9 glue            Imports glue       ""    ""
> #> 10 gmailr          Imports gmailr     ""    ""
> #> # ? with 15 more rows
> #>
> #> [[2]]
> #> # A tibble: 2 x 5
> #>   ref      type     package  op    version
> #>   <chr>    <chr>    <chr>    <chr> <chr>
> #> 1 testthat suggests testthat ""    ""
> #> 2 sys      imports  sys      >=    2.1
>
> Gabor
>
> On Thu, May 9, 2019 at 8:53 AM Rainer M Krug <Rainer at krugs.de> wrote:
>
>
> Hi
>
> I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies but `tools::package_dependencies()` does only work on packages on CRAN.
>
> But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.
>
> Is there a tool which allows me to plot a dependency graph for my local package?
>
> Thanks,
>
> Rainer
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office: +41 (0)44 635 47 64
> Cell:           +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
>                Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office: +41 (0)44 635 47 64
> Cell:        +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982
>
>
>


From R@|ner @end|ng |rom krug@@de  Thu May  9 12:31:20 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 9 May 2019 12:31:20 +0200
Subject: [R-pkg-devel] 
 Package dependency graphs of packages in development (local)
In-Reply-To: <E25AAE83-8A9B-476F-944A-AFC1F7CC785E@krugs.de>
References: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
 <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>
 <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>
 <1455788522.10500014.1557396953993@mail.yahoo.com>
 <E25AAE83-8A9B-476F-944A-AFC1F7CC785E@krugs.de>
Message-ID: <C0EEFF2E-A538-425F-9350-C03478E6DBF6@krugs.de>

But I don?t get it to run.

When I do

> itdepends::dep_plot_size(".")
? Checking for package metadata updates
? Metadata download failed                                                                                                                                 
Error in stop(http_error(resp)) : 
Not Found (HTTP 404).

Could not load or update metadata cache. If you think your local cache is broken, try deleting it with `meta_cache_cleanup()`, or the
`$cleanup()` method.
d> 

I get an error. Suggestions?

Rainer




> On 9 May 2019, at 12:20, Rainer M Krug <Rainer at krugs.de> wrote:
> 
> Thanks.
> 
> This sounds like a really useful package - I?ll check it out.
> 
> 
>> On 9 May 2019, at 12:15, Ma?lle SALMON <maelle.salmon at yahoo.se <mailto:maelle.salmon at yahoo.se>> wrote:
>> 
>> Could https://github.com/jimhester/itdepends <https://github.com/jimhester/itdepends> help?
>> 
>> Ma?lle.
>> Den torsdag 9 maj 2019 12:10:14 CEST, Rainer M Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>> skrev:
>> 
>> 
>> Thanks Gabor. 
>> 
>> This gives me an impressive long list. Is there a way to see this graphically? Parsing seems to be a long, tedious process.
>> 
>> I want to identify packages which I should leave out to reduce the number of (indirect) dependencies.
>> 
>> Rainer
>> 
>> 
>> > On 9 May 2019, at 11:24, G?bor Cs?rdi <csardi.gabor at gmail.com <mailto:csardi.gabor at gmail.com>> wrote:
>> > 
>> > You can do something like this with https://github.com/r-lib/pkgdepends: <https://github.com/r-lib/pkgdepends:>
>> > 
>> > pr <- pkgdepends::remotes()$new("local::.", library = tempfile())
>> > #> ? Creating library directory:
>> > `/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//Rtmpo5NL9R/filee95427c73f55`
>> > 
>> > pr$solve()
>> > #> ? Checking for package metadata updates
>> > #> ? All 10 metadata files are current.
>> > #> ? Using session cached package metadata
>> > #> ? Using cached package metadata
>> > #> PKG SOLUTION, 1 refs, resolved in 1.2s, solved in 193ms
>> > ???????????????????????
>> > #>  local::.
>> > #> Dependencies:
>> > #>  github:
>> > #>    r-lib/crancache, r-lib/rcmdcheck
>> > #>  standard:
>> > #>    askpass, assertthat, backports, base64enc, bit, bit64, blob, callr,
>> > #>    cli, clisymbols, cranlike, crayon, curl, DBI, debugme, desc,
>> > #>    digest, evaluate, fansi, glue, gmailr, highr, hms, httr, jsonlite,
>> > #>    knitr, magrittr, markdown, memoise, mime, openssl, parsedate,
>> > #>    pillar, pkgbuild, pkgconfig, prettyunits, processx, progress, ps,
>> > #>    R6, rappdirs, Rcpp, rematch2, remotes, rlang, rprojroot, RSQLite,
>> > #>    sessioninfo, stringi, stringr, sys, tibble, utf8, whoami, withr,
>> > #>    xfun, xopen, yaml
>> > 
>> > tibble::as_tibble(pr$get_solution()$data)
>> > #> # A tibble: 61 x 27
>> > #>    ref  type  direct status package version license
>> > needscompilation priority
>> > #>    <chr> <chr> <lgl>  <chr>  <chr>  <chr>  <chr>  <lgl>            <chr>
>> > #>  1 loca? local TRUE  OK    revdep? 1.0.0.? MIT + ? NA              NA
>> > #>  2 askp? stan? FALSE  OK    askpass 1.1    NA      FALSE            NA
>> > #>  3 asse? stan? FALSE  OK    assert? 0.2.1  NA      FALSE            NA
>> > #>  4 back? stan? FALSE  OK    backpo? 1.1.4  NA      FALSE            NA
>> > #>  5 base? stan? FALSE  OK    base64? 0.1-3  NA      FALSE            NA
>> > #>  6 bit64 stan? FALSE  OK    bit64  0.9-7  NA      FALSE            NA
>> > #>  7 bit  stan? FALSE  OK    bit    1.1-14  NA      FALSE            NA
>> > #>  8 blob  stan? FALSE  OK    blob    1.1.1  NA      FALSE            NA
>> > #>  9 callr stan? FALSE  OK    callr  3.2.0  NA      FALSE            NA
>> > #> 10 cli  stan? FALSE  OK    cli    1.1.0  NA      FALSE            NA
>> > #> # ? with 51 more rows, and 18 more variables: md5sum <chr>, sha256 <chr>,
>> > #> #  filesize <int>, built <chr>, platform <chr>, rversion <chr>,
>> > repodir <chr>,
>> > #> #  target <chr>, deps <list>, mirror <chr>, sources <list>, remote <list>,
>> > #> #  error <list>, metadata <list>, extra <list>, dep_types <list>,
>> > #> #  cache_status <chr>, lib_status <chr>
>> > 
>> > And the `deps` column there shows the direct dependencies of the dependencies:
>> > 
>> > ? pr$get_solution()$data$deps[1:2]
>> > #> [[1]]
>> > #> # A tibble: 25 x 5
>> > #>    ref            type    package    op    version
>> > #>    <chr>          <chr>  <chr>      <chr> <chr>
>> > #>  1 assertthat      Imports assertthat ""    ""
>> > #>  2 callr          Imports callr      ""    ""
>> > #>  3 cli            Imports cli        ""    ""
>> > #>  4 clisymbols      Imports clisymbols ""    ""
>> > #>  5 r-lib/crancache Imports crancache  >=    0.0.0.9001
>> > #>  6 crayon          Imports crayon    ""    ""
>> > #>  7 DBI            Imports DBI        ""    ""
>> > #>  8 desc            Imports desc      >=    1.1.1.9002
>> > #>  9 glue            Imports glue      ""    ""
>> > #> 10 gmailr          Imports gmailr    ""    ""
>> > #> # ? with 15 more rows
>> > #>
>> > #> [[2]]
>> > #> # A tibble: 2 x 5
>> > #>  ref      type    package  op    version
>> > #>  <chr>    <chr>    <chr>    <chr> <chr>
>> > #> 1 testthat suggests testthat ""    ""
>> > #> 2 sys      imports  sys      >=    2.1
>> > 
>> > Gabor
>> > 
>> > On Thu, May 9, 2019 at 8:53 AM Rainer M Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>> wrote:
>> >> 
>> >> Hi
>> >> 
>> >> I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies  <http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies>but `tools::package_dependencies()` does only work on packages on CRAN.
>> >> 
>> >> But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.
>> >> 
>> >> Is there a tool which allows me to plot a dependency graph for my local package?
>> >> 
>> >> Thanks,
>> >> 
>> >> Rainer
>> >> 
>> >> 
>> >> --
>> >> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> >> 
>> >> Orcid ID: 0000-0002-7490-0066
>> >> 
>> >> Department of Evolutionary Biology and Environmental Studies
>> >> University of Z?rich
>> >> Office Y34-J-74
>> >> Winterthurerstrasse 190
>> >> 8075 Z?rich
>> >> Switzerland
>> >> 
>> >> Office: +41 (0)44 635 47 64
>> >> Cell:          +41 (0)78 630 66 57
>> >> email:      Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>> >>                Rainer at krugs.de <mailto:Rainer at krugs.de>
>> >> Skype:    RMkrug
>> >> 
>> >> PGP: 0x0F52F982
>> >> 
>> >> ______________________________________________
>> >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office:    +41 (0)44 635 47 64
>> Cell:          +41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>>         Rainer at krugs.de <mailto:Rainer at krugs.de>
>> Skype:    RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> 
>> 
>> 
>>     [[alternative HTML version deleted]]
>> 
>> 
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email: ? ? ?Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
> 		Rainer at krugs.de <mailto:Rainer at krugs.de>
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> 
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From d@tr7320 @end|ng |rom un|@@ydney@edu@@u  Thu May  9 13:00:10 2019
From: d@tr7320 @end|ng |rom un|@@ydney@edu@@u (Dario Strbenac)
Date: Thu, 9 May 2019 11:00:10 +0000
Subject: [R-pkg-devel] Function Overloading of S4 Methods
Message-ID: <SYBPR01MB393171B878B900A46C041F92CD330@SYBPR01MB3931.ausprd01.prod.outlook.com>

Good day,

Some programming languages, such as C++, allow function overloading. Is it possible to mimic it when creating S4 methods?

An example from an undergraduate text book is:

int largerInt(int x, int y);
char largerChar(char first, char second);

You can write the previous function prototypes simply as

int larger(int x, int y);
char larger(char first, char second);

Conversely, it does not seen to be possible to use different formal argument names for a S4 generic, unless I don't know about some obscure trick to do it.

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu May  9 13:16:48 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 9 May 2019 12:16:48 +0100
Subject: [R-pkg-devel] 
 Package dependency graphs of packages in development (local)
In-Reply-To: <C0EEFF2E-A538-425F-9350-C03478E6DBF6@krugs.de>
References: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
 <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>
 <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>
 <1455788522.10500014.1557396953993@mail.yahoo.com>
 <E25AAE83-8A9B-476F-944A-AFC1F7CC785E@krugs.de>
 <C0EEFF2E-A538-425F-9350-C03478E6DBF6@krugs.de>
Message-ID: <CABtg=KkKsSJGE=2+j3TzaQngQ8Xi2RniiQM_O_DZvCS+zbTX7g@mail.gmail.com>

It fails to download package metadata. Maybe your internet access is
restricted?

Gabor

On Thu, May 9, 2019 at 12:12 PM Rainer M Krug <Rainer at krugs.de> wrote:
>
> But I don?t get it to run.
>
> When I do
>
> > itdepends::dep_plot_size(".")
> ? Checking for package metadata updates
> ? Metadata download failed
> Error in stop(http_error(resp)) :
> Not Found (HTTP 404).
>
> Could not load or update metadata cache. If you think your local cache is broken, try deleting it with `meta_cache_cleanup()`, or the
> `$cleanup()` method.
> d>
>
> I get an error. Suggestions?
>
> Rainer
>
>
>
> On 9 May 2019, at 12:20, Rainer M Krug <Rainer at krugs.de> wrote:
>
> Thanks.
>
> This sounds like a really useful package - I?ll check it out.
>
>
> On 9 May 2019, at 12:15, Ma?lle SALMON <maelle.salmon at yahoo.se> wrote:
>
> Could https://github.com/jimhester/itdepends help?
>
> Ma?lle.
> Den torsdag 9 maj 2019 12:10:14 CEST, Rainer M Krug <Rainer at krugs.de> skrev:
>
>
> Thanks Gabor.
>
> This gives me an impressive long list. Is there a way to see this graphically? Parsing seems to be a long, tedious process.
>
> I want to identify packages which I should leave out to reduce the number of (indirect) dependencies.
>
> Rainer
>
>
> > On 9 May 2019, at 11:24, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >
> > You can do something like this with https://github.com/r-lib/pkgdepends:
> >
> > pr <- pkgdepends::remotes()$new("local::.", library = tempfile())
> > #> ? Creating library directory:
> > `/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//Rtmpo5NL9R/filee95427c73f55`
> >
> > pr$solve()
> > #> ? Checking for package metadata updates
> > #> ? All 10 metadata files are current.
> > #> ? Using session cached package metadata
> > #> ? Using cached package metadata
> > #> PKG SOLUTION, 1 refs, resolved in 1.2s, solved in 193ms
> > ???????????????????????
> > #>  local::.
> > #> Dependencies:
> > #>  github:
> > #>    r-lib/crancache, r-lib/rcmdcheck
> > #>  standard:
> > #>    askpass, assertthat, backports, base64enc, bit, bit64, blob, callr,
> > #>    cli, clisymbols, cranlike, crayon, curl, DBI, debugme, desc,
> > #>    digest, evaluate, fansi, glue, gmailr, highr, hms, httr, jsonlite,
> > #>    knitr, magrittr, markdown, memoise, mime, openssl, parsedate,
> > #>    pillar, pkgbuild, pkgconfig, prettyunits, processx, progress, ps,
> > #>    R6, rappdirs, Rcpp, rematch2, remotes, rlang, rprojroot, RSQLite,
> > #>    sessioninfo, stringi, stringr, sys, tibble, utf8, whoami, withr,
> > #>    xfun, xopen, yaml
> >
> > tibble::as_tibble(pr$get_solution()$data)
> > #> # A tibble: 61 x 27
> > #>    ref  type  direct status package version license
> > needscompilation priority
> > #>    <chr> <chr> <lgl>  <chr>  <chr>  <chr>  <chr>  <lgl>            <chr>
> > #>  1 loca? local TRUE  OK    revdep? 1.0.0.? MIT + ? NA              NA
> > #>  2 askp? stan? FALSE  OK    askpass 1.1    NA      FALSE            NA
> > #>  3 asse? stan? FALSE  OK    assert? 0.2.1  NA      FALSE            NA
> > #>  4 back? stan? FALSE  OK    backpo? 1.1.4  NA      FALSE            NA
> > #>  5 base? stan? FALSE  OK    base64? 0.1-3  NA      FALSE            NA
> > #>  6 bit64 stan? FALSE  OK    bit64  0.9-7  NA      FALSE            NA
> > #>  7 bit  stan? FALSE  OK    bit    1.1-14  NA      FALSE            NA
> > #>  8 blob  stan? FALSE  OK    blob    1.1.1  NA      FALSE            NA
> > #>  9 callr stan? FALSE  OK    callr  3.2.0  NA      FALSE            NA
> > #> 10 cli  stan? FALSE  OK    cli    1.1.0  NA      FALSE            NA
> > #> # ? with 51 more rows, and 18 more variables: md5sum <chr>, sha256 <chr>,
> > #> #  filesize <int>, built <chr>, platform <chr>, rversion <chr>,
> > repodir <chr>,
> > #> #  target <chr>, deps <list>, mirror <chr>, sources <list>, remote <list>,
> > #> #  error <list>, metadata <list>, extra <list>, dep_types <list>,
> > #> #  cache_status <chr>, lib_status <chr>
> >
> > And the `deps` column there shows the direct dependencies of the dependencies:
> >
> > ? pr$get_solution()$data$deps[1:2]
> > #> [[1]]
> > #> # A tibble: 25 x 5
> > #>    ref            type    package    op    version
> > #>    <chr>          <chr>  <chr>      <chr> <chr>
> > #>  1 assertthat      Imports assertthat ""    ""
> > #>  2 callr          Imports callr      ""    ""
> > #>  3 cli            Imports cli        ""    ""
> > #>  4 clisymbols      Imports clisymbols ""    ""
> > #>  5 r-lib/crancache Imports crancache  >=    0.0.0.9001
> > #>  6 crayon          Imports crayon    ""    ""
> > #>  7 DBI            Imports DBI        ""    ""
> > #>  8 desc            Imports desc      >=    1.1.1.9002
> > #>  9 glue            Imports glue      ""    ""
> > #> 10 gmailr          Imports gmailr    ""    ""
> > #> # ? with 15 more rows
> > #>
> > #> [[2]]
> > #> # A tibble: 2 x 5
> > #>  ref      type    package  op    version
> > #>  <chr>    <chr>    <chr>    <chr> <chr>
> > #> 1 testthat suggests testthat ""    ""
> > #> 2 sys      imports  sys      >=    2.1
> >
> > Gabor
> >
> > On Thu, May 9, 2019 at 8:53 AM Rainer M Krug <Rainer at krugs.de> wrote:
> >>
> >> Hi
> >>
> >> I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies but `tools::package_dependencies()` does only work on packages on CRAN.
> >>
> >> But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.
> >>
> >> Is there a tool which allows me to plot a dependency graph for my local package?
> >>
> >> Thanks,
> >>
> >> Rainer
> >>
> >>
> >> --
> >> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> >>
> >> Orcid ID: 0000-0002-7490-0066
> >>
> >> Department of Evolutionary Biology and Environmental Studies
> >> University of Z?rich
> >> Office Y34-J-74
> >> Winterthurerstrasse 190
> >> 8075 Z?rich
> >> Switzerland
> >>
> >> Office: +41 (0)44 635 47 64
> >> Cell:          +41 (0)78 630 66 57
> >> email:      Rainer.Krug at uzh.ch
> >>                Rainer at krugs.de
> >> Skype:    RMkrug
> >>
> >> PGP: 0x0F52F982
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office:    +41 (0)44 635 47 64
> Cell:          +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
>         Rainer at krugs.de
> Skype:    RMkrug
>
> PGP: 0x0F52F982
>
>
>
>
>     [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office: +41 (0)44 635 47 64
> Cell:        +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982
>
>
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office: +41 (0)44 635 47 64
> Cell:        +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982
>
>
>


From R@|ner @end|ng |rom krug@@de  Thu May  9 13:34:16 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 9 May 2019 13:34:16 +0200
Subject: [R-pkg-devel] 
 Package dependency graphs of packages in development (local)
In-Reply-To: <CABtg=KkKsSJGE=2+j3TzaQngQ8Xi2RniiQM_O_DZvCS+zbTX7g@mail.gmail.com>
References: <AEE525B8-542A-4DC2-BAF2-E1BA4A6540A5@krugs.de>
 <CABtg=KkOynbyEwppwfh4R0JqFXNDFqm+4kd=o7WTk89KZGy=-g@mail.gmail.com>
 <21D67A13-E982-414F-837B-2C087CD50C4A@krugs.de>
 <1455788522.10500014.1557396953993@mail.yahoo.com>
 <E25AAE83-8A9B-476F-944A-AFC1F7CC785E@krugs.de>
 <C0EEFF2E-A538-425F-9350-C03478E6DBF6@krugs.de>
 <CABtg=KkKsSJGE=2+j3TzaQngQ8Xi2RniiQM_O_DZvCS+zbTX7g@mail.gmail.com>
Message-ID: <ECA5DD35-993D-4874-ADF4-4F6D2E94EFDB@krugs.de>

Nope:

```
> meta_cache_update()
? Checking for package metadata updates
? Downloaded metadata files, 1.37 MB in 5 files.                                                                                                           
? Updating metadata database                                                                                                                               
> itdepends::dep_plot_size(".")
? Checking for package metadata updates
? Metadata download failed                                                                                                                                 
Error in stop(http_error(resp)) : 
Not Found (HTTP 404).

Could not load or update metadata cache. If you think your local cache is broken, try deleting it with `meta_cache_cleanup()`, or the
`$cleanup()` method.
> 

I can download the cache manually (see above). 

Rainer


```

> On 9 May 2019, at 13:16, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> It fails to download package metadata. Maybe your internet access is
> restricted?
> 
> Gabor
> 
> On Thu, May 9, 2019 at 12:12 PM Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> But I don?t get it to run.
>> 
>> When I do
>> 
>>> itdepends::dep_plot_size(".")
>> ? Checking for package metadata updates
>> ? Metadata download failed
>> Error in stop(http_error(resp)) :
>> Not Found (HTTP 404).
>> 
>> Could not load or update metadata cache. If you think your local cache is broken, try deleting it with `meta_cache_cleanup()`, or the
>> `$cleanup()` method.
>> d>
>> 
>> I get an error. Suggestions?
>> 
>> Rainer
>> 
>> 
>> 
>> On 9 May 2019, at 12:20, Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> Thanks.
>> 
>> This sounds like a really useful package - I?ll check it out.
>> 
>> 
>> On 9 May 2019, at 12:15, Ma?lle SALMON <maelle.salmon at yahoo.se> wrote:
>> 
>> Could https://github.com/jimhester/itdepends help?
>> 
>> Ma?lle.
>> Den torsdag 9 maj 2019 12:10:14 CEST, Rainer M Krug <Rainer at krugs.de> skrev:
>> 
>> 
>> Thanks Gabor.
>> 
>> This gives me an impressive long list. Is there a way to see this graphically? Parsing seems to be a long, tedious process.
>> 
>> I want to identify packages which I should leave out to reduce the number of (indirect) dependencies.
>> 
>> Rainer
>> 
>> 
>>> On 9 May 2019, at 11:24, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>> 
>>> You can do something like this with https://github.com/r-lib/pkgdepends:
>>> 
>>> pr <- pkgdepends::remotes()$new("local::.", library = tempfile())
>>> #> ? Creating library directory:
>>> `/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//Rtmpo5NL9R/filee95427c73f55`
>>> 
>>> pr$solve()
>>> #> ? Checking for package metadata updates
>>> #> ? All 10 metadata files are current.
>>> #> ? Using session cached package metadata
>>> #> ? Using cached package metadata
>>> #> PKG SOLUTION, 1 refs, resolved in 1.2s, solved in 193ms
>>> ???????????????????????
>>> #>  local::.
>>> #> Dependencies:
>>> #>  github:
>>> #>    r-lib/crancache, r-lib/rcmdcheck
>>> #>  standard:
>>> #>    askpass, assertthat, backports, base64enc, bit, bit64, blob, callr,
>>> #>    cli, clisymbols, cranlike, crayon, curl, DBI, debugme, desc,
>>> #>    digest, evaluate, fansi, glue, gmailr, highr, hms, httr, jsonlite,
>>> #>    knitr, magrittr, markdown, memoise, mime, openssl, parsedate,
>>> #>    pillar, pkgbuild, pkgconfig, prettyunits, processx, progress, ps,
>>> #>    R6, rappdirs, Rcpp, rematch2, remotes, rlang, rprojroot, RSQLite,
>>> #>    sessioninfo, stringi, stringr, sys, tibble, utf8, whoami, withr,
>>> #>    xfun, xopen, yaml
>>> 
>>> tibble::as_tibble(pr$get_solution()$data)
>>> #> # A tibble: 61 x 27
>>> #>    ref  type  direct status package version license
>>> needscompilation priority
>>> #>    <chr> <chr> <lgl>  <chr>  <chr>  <chr>  <chr>  <lgl>            <chr>
>>> #>  1 loca? local TRUE  OK    revdep? 1.0.0.? MIT + ? NA              NA
>>> #>  2 askp? stan? FALSE  OK    askpass 1.1    NA      FALSE            NA
>>> #>  3 asse? stan? FALSE  OK    assert? 0.2.1  NA      FALSE            NA
>>> #>  4 back? stan? FALSE  OK    backpo? 1.1.4  NA      FALSE            NA
>>> #>  5 base? stan? FALSE  OK    base64? 0.1-3  NA      FALSE            NA
>>> #>  6 bit64 stan? FALSE  OK    bit64  0.9-7  NA      FALSE            NA
>>> #>  7 bit  stan? FALSE  OK    bit    1.1-14  NA      FALSE            NA
>>> #>  8 blob  stan? FALSE  OK    blob    1.1.1  NA      FALSE            NA
>>> #>  9 callr stan? FALSE  OK    callr  3.2.0  NA      FALSE            NA
>>> #> 10 cli  stan? FALSE  OK    cli    1.1.0  NA      FALSE            NA
>>> #> # ? with 51 more rows, and 18 more variables: md5sum <chr>, sha256 <chr>,
>>> #> #  filesize <int>, built <chr>, platform <chr>, rversion <chr>,
>>> repodir <chr>,
>>> #> #  target <chr>, deps <list>, mirror <chr>, sources <list>, remote <list>,
>>> #> #  error <list>, metadata <list>, extra <list>, dep_types <list>,
>>> #> #  cache_status <chr>, lib_status <chr>
>>> 
>>> And the `deps` column there shows the direct dependencies of the dependencies:
>>> 
>>> ? pr$get_solution()$data$deps[1:2]
>>> #> [[1]]
>>> #> # A tibble: 25 x 5
>>> #>    ref            type    package    op    version
>>> #>    <chr>          <chr>  <chr>      <chr> <chr>
>>> #>  1 assertthat      Imports assertthat ""    ""
>>> #>  2 callr          Imports callr      ""    ""
>>> #>  3 cli            Imports cli        ""    ""
>>> #>  4 clisymbols      Imports clisymbols ""    ""
>>> #>  5 r-lib/crancache Imports crancache  >=    0.0.0.9001
>>> #>  6 crayon          Imports crayon    ""    ""
>>> #>  7 DBI            Imports DBI        ""    ""
>>> #>  8 desc            Imports desc      >=    1.1.1.9002
>>> #>  9 glue            Imports glue      ""    ""
>>> #> 10 gmailr          Imports gmailr    ""    ""
>>> #> # ? with 15 more rows
>>> #>
>>> #> [[2]]
>>> #> # A tibble: 2 x 5
>>> #>  ref      type    package  op    version
>>> #>  <chr>    <chr>    <chr>    <chr> <chr>
>>> #> 1 testthat suggests testthat ""    ""
>>> #> 2 sys      imports  sys      >=    2.1
>>> 
>>> Gabor
>>> 
>>> On Thu, May 9, 2019 at 8:53 AM Rainer M Krug <Rainer at krugs.de> wrote:
>>>> 
>>>> Hi
>>>> 
>>>> I am quite sure, there was a recent discussion about dependency graphs of packages. I saw the post from Dirk at http://dirk.eddelbuettel.com/blog/2018/02/28/#017_dependencies but `tools::package_dependencies()` does only work on packages on CRAN.
>>>> 
>>>> But my package is not yet on CRAN (but on GitHub and a drat repo), and I would like to look at the package dependencies BEFORE submitting to CRAN.
>>>> 
>>>> Is there a tool which allows me to plot a dependency graph for my local package?
>>>> 
>>>> Thanks,
>>>> 
>>>> Rainer
>>>> 
>>>> 
>>>> --
>>>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>>>> 
>>>> Orcid ID: 0000-0002-7490-0066
>>>> 
>>>> Department of Evolutionary Biology and Environmental Studies
>>>> University of Z?rich
>>>> Office Y34-J-74
>>>> Winterthurerstrasse 190
>>>> 8075 Z?rich
>>>> Switzerland
>>>> 
>>>> Office: +41 (0)44 635 47 64
>>>> Cell:          +41 (0)78 630 66 57
>>>> email:      Rainer.Krug at uzh.ch
>>>>               Rainer at krugs.de
>>>> Skype:    RMkrug
>>>> 
>>>> PGP: 0x0F52F982
>>>> 
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office:    +41 (0)44 635 47 64
>> Cell:          +41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>>        Rainer at krugs.de
>> Skype:    RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> 
>> 
>> 
>>    [[alternative HTML version deleted]]
>> 
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office: +41 (0)44 635 47 64
>> Cell:        +41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> Rainer at krugs.de
>> Skype:     RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> 
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office: +41 (0)44 635 47 64
>> Cell:        +41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> Rainer at krugs.de
>> Skype:     RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> 
>> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From groemp|ng @end|ng |rom beuth-hoch@chu|e@de  Thu May  9 15:15:01 2019
From: groemp|ng @end|ng |rom beuth-hoch@chu|e@de (=?UTF-8?Q?Ulrike_Gr=c3=b6mping?=)
Date: Thu, 9 May 2019 15:15:01 +0200
Subject: [R-pkg-devel] Change in normal random numbers between R 3.5.3 and R
 3.6.0
In-Reply-To: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
Message-ID: <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>

Dear R package authors,

I am currently struggling with differences in test results between R 
versions 3.5.3 and 3.6.0: There are expected ones (from the new behavior 
of sample(), which can be switched off by 
RNGkind(sample.kind="Rounding")) and unexpected ones: The normal random 
numbers from a call "y <- rnorm(36)" have changed between R versions, in 
spite of working with a seed. Consequently, most other outcomes change 
as well, as they depend on those random numbers.

Does anyone have an idea what this behavior results from ? You see 
samples below (ignore the first columns, these can be made alike by 
changing sample.kind; but the normal random numbers in the last column 
were the bottom ones before version 3.6.0 and are the top ones afterwards.

>
> < 1 200 10 -25 -2.07823754
> < 2 150 30 25 0.48522682
> < 3 200 20 -25 0.69676878
>
> ...
>
> > 1 250 10 -15 -0.820426525
> > 2 200 10 -25 -1.238082813
> > 3 100 10 15 -1.199567511
...

Can anyone explain, why this is the case, or how I could possibly 
circumvent it (for some noLD checks)?

Best regards,

Ulrike

-- 
##############################################
## Prof. Ulrike Groemping
## FB II
## Beuth University of Applied Sciences Berlin
##############################################
## prof.beuth-hochschule.de/groemping
## Phone: +49(0)30 4504 5127
## Fax:   +49(0)30 4504 66 5127
## Home office: +49(0)30 394 04 863
##############################################


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu May  9 16:19:26 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 9 May 2019 10:19:26 -0400
Subject: [R-pkg-devel] 
 Change in normal random numbers between R 3.5.3 and R 3.6.0
In-Reply-To: <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
 <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
Message-ID: <781fdde6-8154-372e-9804-a68c56205067@gmail.com>

On 09/05/2019 9:15 a.m., Ulrike Gr?mping wrote:
> Dear R package authors,
> 
> I am currently struggling with differences in test results between R
> versions 3.5.3 and 3.6.0: There are expected ones (from the new behavior
> of sample(), which can be switched off by
> RNGkind(sample.kind="Rounding")) and unexpected ones: The normal random
> numbers from a call "y <- rnorm(36)" have changed between R versions, in
> spite of working with a seed. Consequently, most other outcomes change
> as well, as they depend on those random numbers.
> 
> Does anyone have an idea what this behavior results from ? You see
> samples below (ignore the first columns, these can be made alike by
> changing sample.kind; but the normal random numbers in the last column
> were the bottom ones before version 3.6.0 and are the top ones afterwards.
> 
>>
>> < 1 200 10 -25 -2.07823754
>> < 2 150 30 25 0.48522682
>> < 3 200 20 -25 0.69676878
>>
>> ...
>>
>>> 1 250 10 -15 -0.820426525
>>> 2 200 10 -25 -1.238082813
>>> 3 100 10 15 -1.199567511
> ...
> 
> Can anyone explain, why this is the case, or how I could possibly
> circumvent it (for some noLD checks)?
> 

I am not seeing a difference in rnorm(), but I would expect to see one 
if the new sample() code was used, as it can make a different number of 
calls to the underlying RNG.

That is:  I'd expect this code to give identical results in both 
versions, whether I used val <- 10 or any other value:

val <- 10
set.seed(val)
rnorm(36)

This code does not give identical results, because the calls to sample() 
will result in different changes to the seed:

val <- 10
set.seed(val)
discard <- sample(1000, 100)
rnorm(36)

Duncan Murdoch


From groemp|ng @end|ng |rom beuth-hoch@chu|e@de  Thu May  9 18:43:01 2019
From: groemp|ng @end|ng |rom beuth-hoch@chu|e@de (=?UTF-8?Q?Ulrike_Gr=c3=b6mping?=)
Date: Thu, 9 May 2019 18:43:01 +0200
Subject: [R-pkg-devel] 
 Change in normal random numbers between R 3.5.3 and R 3.6.0
In-Reply-To: <781fdde6-8154-372e-9804-a68c56205067@gmail.com>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
 <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
 <781fdde6-8154-372e-9804-a68c56205067@gmail.com>
Message-ID: <9e2ba306-a830-8897-f714-9bf422b876e5@beuth-hochschule.de>

Hmmmh, but does that also apply if the sample.kind has been set to the 
old version? I.e., would

if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
val <- 10
set.seed(val)
discard <- sample(1000, 100)
rnorm(36)

produce the same normal random numbers in 3.5.3 and 3.6.0? I would have 
expected it to, but it seems to produce the same normal random numbers 
as R version 3.6.0 in the previous version of the test code without the 
RNGkind call.

Best, Ulrike

Am 09.05.2019 um 16:19 schrieb Duncan Murdoch:
> That is:? I'd expect this code to give identical results in both 
> versions, whether I used val <- 10 or any other value:
>
> val <- 10
> set.seed(val)
> rnorm(36)
>
> This code does not give identical results, because the calls to 
> sample() will result in different changes to the seed:
>
> val <- 10
> set.seed(val)
> discard <- sample(1000, 100)
> rnorm(36) 


-- 
##############################################
## Prof. Ulrike Groemping
## FB II
## Beuth University of Applied Sciences Berlin
##############################################
## prof.beuth-hochschule.de/groemping
## Phone: +49(0)30 4504 5127
## Fax:   +49(0)30 4504 66 5127
## Home office: +49(0)30 394 04 863
##############################################


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu May  9 19:45:46 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 9 May 2019 13:45:46 -0400
Subject: [R-pkg-devel] 
 Change in normal random numbers between R 3.5.3 and R 3.6.0
In-Reply-To: <9e2ba306-a830-8897-f714-9bf422b876e5@beuth-hochschule.de>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
 <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
 <781fdde6-8154-372e-9804-a68c56205067@gmail.com>
 <9e2ba306-a830-8897-f714-9bf422b876e5@beuth-hochschule.de>
Message-ID: <70b02f6d-4a5a-9119-9c5d-cfef64996772@gmail.com>

On 09/05/2019 12:43 p.m., Ulrike Gr?mping wrote:
> Hmmmh, but does that also apply if the sample.kind has been set to the
> old version? I.e., would
> 
> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
> val <- 10
> set.seed(val)
> discard <- sample(1000, 100)
> rnorm(36)
> 
> produce the same normal random numbers in 3.5.3 and 3.6.0? I would have
> expected it to, but it seems to produce the same normal random numbers
> as R version 3.6.0 in the previous version of the test code without the
> RNGkind call.
> 

I'm not seeing that, but I'm not using the exact versions you tested. 
If I run your code in  "R version 3.5.2 (2018-12-20)" and "R Under 
development (unstable) (2019-05-02 r76454)" I get this output from both:

 > if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
 > val <- 10
 > set.seed(val)
 > discard <- sample(1000, 100)
 > rnorm(36)
  [1] -0.4006375 -0.3345566  1.3679540  2.1377671  0.5058193  0.7863424 
-0.9022119  0.5328970 -0.6458943  0.2909875 -1.2375945
[12] -0.4561763 -0.8303227  0.3401156  1.0663764  1.2161258  0.7356907 
-0.4812086  0.5627448 -1.2463197  0.3809222 -1.4304273
[23] -1.0484455 -0.2185036 -1.4899362  1.1727063 -1.4798270 -0.4303878 
-1.0516386  1.5225863  0.5928281 -0.2226615  0.7128943
[34]  0.7166008  0.4402419  0.1588306

Okay, I just installed 3.6.0, and I get the same values there.  I don't 
see a Mac binary for 3.5.3, so I can't test that one.

Duncan Murdoch


From w@ngz1 @end|ng |rom uth@c@@@edu  Fri May 10 01:19:46 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Thu, 9 May 2019 23:19:46 +0000
Subject: [R-pkg-devel] R CMD check ERROR (strange to me)
In-Reply-To: <3d72a40d9a3842d8b3718596f91d5fca@EX-MCD-1.win.uthscsa.edu>
References: <3d72a40d9a3842d8b3718596f91d5fca@EX-MCD-1.win.uthscsa.edu>
Message-ID: <f2b7b2e54728459f9a34b4f4590cd7e0@EX-MCD-1.win.uthscsa.edu>

Hello,

I have encountered some strange error (see 00install.out). Please see the attached package and relevant files. It happened not just this package. I restart the system including VirtualBox but the problem is still there. I would appreciate any suggestions.

Thanks,

Zhu Wang



-------------- next part --------------
A non-text attachment was scrubbed...
Name: cts_1.0-22.tar.gz
Type: application/x-gzip
Size: 532744 bytes
Desc: cts_1.0-22.tar.gz
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190509/41e22180/attachment.bin>

From rm@h@rp @end|ng |rom me@com  Fri May 10 04:58:47 2019
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Thu, 9 May 2019 21:58:47 -0500
Subject: [R-pkg-devel] 
 Change in normal random numbers between R 3.5.3 and R 3.6.0
In-Reply-To: <70b02f6d-4a5a-9119-9c5d-cfef64996772@gmail.com>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
 <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
 <781fdde6-8154-372e-9804-a68c56205067@gmail.com>
 <9e2ba306-a830-8897-f714-9bf422b876e5@beuth-hochschule.de>
 <70b02f6d-4a5a-9119-9c5d-cfef64996772@gmail.com>
Message-ID: <39E23D9F-5025-4A1B-B0CE-6F92C26E62D4@me.com>

I was dealing with a similar issue but in the context of getting the same unit test code to work on multiple versions of R in a Travis-CI build. It seems RNGkind(sample.kind="Rounding?) does not work prior to version 3.6 so I resorted to using version dependent construction of the argument list to set.seed() in do.call().

I better solution will be greatly appreciated.

#' Work around for unit tests using sample()
#'
#' @param seed argument to \code{set.seed}
set_seed <- function(seed = 1) {
  version <- as.integer(R.Version()$major) + (as.numeric(R.Version()$minor) / 10.0)
  if (version >= 3.6) {
    args <- list(seed, sample.kind = "Rounding")
  } else {
    args <- list(seed)
  }
  suppressWarnings(do.call(set.seed, args))
}

Mark

R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com











> On May 9, 2019, at 12:45 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 09/05/2019 12:43 p.m., Ulrike Gr?mping wrote:
>> Hmmmh, but does that also apply if the sample.kind has been set to the
>> old version? I.e., would
>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
>> val <- 10
>> set.seed(val)
>> discard <- sample(1000, 100)
>> rnorm(36)
>> produce the same normal random numbers in 3.5.3 and 3.6.0? I would have
>> expected it to, but it seems to produce the same normal random numbers
>> as R version 3.6.0 in the previous version of the test code without the
>> RNGkind call.
> 
> I'm not seeing that, but I'm not using the exact versions you tested. If I run your code in  "R version 3.5.2 (2018-12-20)" and "R Under development (unstable) (2019-05-02 r76454)" I get this output from both:
> 
> > if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
> > val <- 10
> > set.seed(val)
> > discard <- sample(1000, 100)
> > rnorm(36)
> [1] -0.4006375 -0.3345566  1.3679540  2.1377671  0.5058193  0.7863424 -0.9022119  0.5328970 -0.6458943  0.2909875 -1.2375945
> [12] -0.4561763 -0.8303227  0.3401156  1.0663764  1.2161258  0.7356907 -0.4812086  0.5627448 -1.2463197  0.3809222 -1.4304273
> [23] -1.0484455 -0.2185036 -1.4899362  1.1727063 -1.4798270 -0.4303878 -1.0516386  1.5225863  0.5928281 -0.2226615  0.7128943
> [34]  0.7166008  0.4402419  0.1588306
> 
> Okay, I just installed 3.6.0, and I get the same values there.  I don't see a Mac binary for 3.5.3, so I can't test that one.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From groemp|ng @end|ng |rom beuth-hoch@chu|e@de  Fri May 10 06:39:39 2019
From: groemp|ng @end|ng |rom beuth-hoch@chu|e@de (=?UTF-8?Q?Ulrike_Gr=c3=b6mping?=)
Date: Fri, 10 May 2019 06:39:39 +0200
Subject: [R-pkg-devel] 
 Change in normal random numbers between R 3.5.3 and R 3.6.0
In-Reply-To: <39E23D9F-5025-4A1B-B0CE-6F92C26E62D4@me.com>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
 <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
 <781fdde6-8154-372e-9804-a68c56205067@gmail.com>
 <9e2ba306-a830-8897-f714-9bf422b876e5@beuth-hochschule.de>
 <70b02f6d-4a5a-9119-9c5d-cfef64996772@gmail.com>
 <39E23D9F-5025-4A1B-B0CE-6F92C26E62D4@me.com>
Message-ID: <8e78d48f-8486-4305-262b-7c6bb2879b5c@beuth-hochschule.de>

Mark,

I used

if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")

And that works. Actually, using rnorm afterwards also yields the same random numbers.
My question arose from the fact that I confused myself about the noLD output I was supposed to reproduce. Therefore, my problem should be entirely explained by Duncan Murdoch's initial explanation: the sample() change does not only lead to different results in discrete sampling but also to different results from random number calls for other functions (like rnorm).

Best, Ulrike

Am 10.05.2019 um 04:58 schrieb R. Mark Sharp:
> I was dealing with a similar issue but in the context of getting the same unit test code to work on multiple versions of R in a Travis-CI build. It seems RNGkind(sample.kind="Rounding?) does not work prior to version 3.6 so I resorted to using version dependent construction of the argument list to set.seed() in do.call().
>
> I better solution will be greatly appreciated.
>
> #' Work around for unit tests using sample()
> #'
> #' @param seed argument to \code{set.seed}
> set_seed <- function(seed = 1) {
>    version <- as.integer(R.Version()$major) + (as.numeric(R.Version()$minor) / 10.0)
>    if (version >= 3.6) {
>      args <- list(seed, sample.kind = "Rounding")
>    } else {
>      args <- list(seed)
>    }
>    suppressWarnings(do.call(set.seed, args))
> }
>
> Mark
>
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
>
>
>
>
>
>
>
>
>
>
>
>> On May 9, 2019, at 12:45 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 09/05/2019 12:43 p.m., Ulrike Gr?mping wrote:
>>> Hmmmh, but does that also apply if the sample.kind has been set to the
>>> old version? I.e., would
>>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
>>> val <- 10
>>> set.seed(val)
>>> discard <- sample(1000, 100)
>>> rnorm(36)
>>> produce the same normal random numbers in 3.5.3 and 3.6.0? I would have
>>> expected it to, but it seems to produce the same normal random numbers
>>> as R version 3.6.0 in the previous version of the test code without the
>>> RNGkind call.
>> I'm not seeing that, but I'm not using the exact versions you tested. If I run your code in  "R version 3.5.2 (2018-12-20)" and "R Under development (unstable) (2019-05-02 r76454)" I get this output from both:
>>
>>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
>>> val <- 10
>>> set.seed(val)
>>> discard <- sample(1000, 100)
>>> rnorm(36)
>> [1] -0.4006375 -0.3345566  1.3679540  2.1377671  0.5058193  0.7863424 -0.9022119  0.5328970 -0.6458943  0.2909875 -1.2375945
>> [12] -0.4561763 -0.8303227  0.3401156  1.0663764  1.2161258  0.7356907 -0.4812086  0.5627448 -1.2463197  0.3809222 -1.4304273
>> [23] -1.0484455 -0.2185036 -1.4899362  1.1727063 -1.4798270 -0.4303878 -1.0516386  1.5225863  0.5928281 -0.2226615  0.7128943
>> [34]  0.7166008  0.4402419  0.1588306
>>
>> Okay, I just installed 3.6.0, and I get the same values there.  I don't see a Mac binary for 3.5.3, so I can't test that one.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


-- 
##############################################
## Prof. Ulrike Groemping
## FB II
## Beuth University of Applied Sciences Berlin
##############################################
## prof.beuth-hochschule.de/groemping
## Phone: +49(0)30 4504 5127
## Fax:   +49(0)30 4504 66 5127
## Home office: +49(0)30 394 04 863
##############################################


From kry|ov@r00t @end|ng |rom gm@||@com  Fri May 10 08:12:03 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 10 May 2019 09:12:03 +0300
Subject: [R-pkg-devel] R CMD check ERROR (strange to me)
In-Reply-To: <f2b7b2e54728459f9a34b4f4590cd7e0@EX-MCD-1.win.uthscsa.edu>
References: <3d72a40d9a3842d8b3718596f91d5fca@EX-MCD-1.win.uthscsa.edu>
 <f2b7b2e54728459f9a34b4f4590cd7e0@EX-MCD-1.win.uthscsa.edu>
Message-ID: <20190510091203.0bb953f6@parabola>

On Thu, 9 May 2019 23:19:46 +0000
"Wang, Zhu" <wangz1 at uthscsa.edu> wrote:

> I have encountered some strange error (see 00install.out).

It seems to have been stripped by the attachment filter, and there are
no compilation errors on my system. Can you include the relevant lines
from 00install.out inline?

-- 
Best regards,
Ivan


From |jh988488 @end|ng |rom gm@||@com  Fri May 10 12:47:38 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Fri, 10 May 2019 19:47:38 +0900
Subject: [R-pkg-devel] "unable to verify current time" in R CMD check
Message-ID: <CACSCokcyibqBt6ZXF6j8RRQJz8_6bh+jzW1SSnv2m9PY2OJc_Q@mail.gmail.com>

Hi, I'm checking my package for CRAN.

In fact, I already complete checking CMD in 3.5.3ver.
but for the latest ver., 3.6.0, I get  '1 note' when checking CMD.

I wonder how I can solve this note.

> checking for future file timestamps ... NOTE
  unable to verify current time


Waiting your reply,

Juhee Lee.

	[[alternative HTML version deleted]]


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Fri May 10 13:48:13 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Fri, 10 May 2019 11:48:13 +0000
Subject: [R-pkg-devel] Problem with using parallel runtime system with R
Message-ID: <E753EEE8-9805-40C4-AF05-90C62674A48C@kaust.edu.sa>


Hi,

I have a C package which includes the usage of the StarPU runtime system to allow running my code on different HW architectures. I included this to an R-package and I found that R is using only one core and all the thread
initiated by the runtime system is assigned to a single core which impacted the performance.  I used  Sys.setenv(KMP_AFFINITY= "disabled") to disable the default affinity and this helps to allow the runtime system to use
all available cores. However, even I gained speedup, the R package is still 5X slower than the C package. Could anyone help me to understand the problem better?


--Sameh

	[[alternative HTML version deleted]]


From rm@h@rp @end|ng |rom me@com  Fri May 10 14:33:14 2019
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Fri, 10 May 2019 07:33:14 -0500
Subject: [R-pkg-devel] 
 Change in normal random numbers between R 3.5.3 and R 3.6.0
In-Reply-To: <8e78d48f-8486-4305-262b-7c6bb2879b5c@beuth-hochschule.de>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
 <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
 <781fdde6-8154-372e-9804-a68c56205067@gmail.com>
 <9e2ba306-a830-8897-f714-9bf422b876e5@beuth-hochschule.de>
 <70b02f6d-4a5a-9119-9c5d-cfef64996772@gmail.com>
 <39E23D9F-5025-4A1B-B0CE-6F92C26E62D4@me.com>
 <8e78d48f-8486-4305-262b-7c6bb2879b5c@beuth-hochschule.de>
Message-ID: <91C74AC6-B42E-42DB-9703-E499E97723DC@me.com>

Ulrike,

RNGkind() worked on 3.4.1 and 3.6.0 but generated a warning on R 3.5.3. The message follows:

 checking whether package ?nprcmanager? can be installed ... WARNING
Found the following significant warnings:
  Note: possible error in 'RNGkind(sample.kind = "Rounding")': unused argument (sample.kind = "Rounding") 
See ?/tmp/RtmpA4S3Ki/file32b81c218ac8/nprcmanager.Rcheck/00install.out? for details.
Information on the location(s) of code generating the ?Note?s can be
obtained by re-running with environment variable R_KEEP_PKG_SOURCE set
to ?yes?.

Mark
R. Mark Sharp
rmsharp at me.com



> On May 9, 2019, at 11:39 PM, Ulrike Gr?mping <groemping at beuth-hochschule.de> wrote:
> 
> Mark,
> 
> I used
> 
> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
> 
> And that works. Actually, using rnorm afterwards also yields the same random numbers.
> My question arose from the fact that I confused myself about the noLD output I was supposed to reproduce. Therefore, my problem should be entirely explained by Duncan Murdoch's initial explanation: the sample() change does not only lead to different results in discrete sampling but also to different results from random number calls for other functions (like rnorm).
> 
> Best, Ulrike
> 
> Am 10.05.2019 um 04:58 schrieb R. Mark Sharp:
>> I was dealing with a similar issue but in the context of getting the same unit test code to work on multiple versions of R in a Travis-CI build. It seems RNGkind(sample.kind="Rounding?) does not work prior to version 3.6 so I resorted to using version dependent construction of the argument list to set.seed() in do.call().
>> 
>> I better solution will be greatly appreciated.
>> 
>> #' Work around for unit tests using sample()
>> #'
>> #' @param seed argument to \code{set.seed}
>> set_seed <- function(seed = 1) {
>>   version <- as.integer(R.Version()$major) + (as.numeric(R.Version()$minor) / 10.0)
>>   if (version >= 3.6) {
>>     args <- list(seed, sample.kind = "Rounding")
>>   } else {
>>     args <- list(seed)
>>   }
>>   suppressWarnings(do.call(set.seed, args))
>> }
>> 
>> Mark
>> 
>> R. Mark Sharp, Ph.D.
>> Data Scientist and Biomedical Statistical Consultant
>> 7526 Meadow Green St.
>> San Antonio, TX 78251
>> mobile: 210-218-2868
>> rmsharp at me.com
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>>> On May 9, 2019, at 12:45 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> 
>>> On 09/05/2019 12:43 p.m., Ulrike Gr?mping wrote:
>>>> Hmmmh, but does that also apply if the sample.kind has been set to the
>>>> old version? I.e., would
>>>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
>>>> val <- 10
>>>> set.seed(val)
>>>> discard <- sample(1000, 100)
>>>> rnorm(36)
>>>> produce the same normal random numbers in 3.5.3 and 3.6.0? I would have
>>>> expected it to, but it seems to produce the same normal random numbers
>>>> as R version 3.6.0 in the previous version of the test code without the
>>>> RNGkind call.
>>> I'm not seeing that, but I'm not using the exact versions you tested. If I run your code in  "R version 3.5.2 (2018-12-20)" and "R Under development (unstable) (2019-05-02 r76454)" I get this output from both:
>>> 
>>>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
>>>> val <- 10
>>>> set.seed(val)
>>>> discard <- sample(1000, 100)
>>>> rnorm(36)
>>> [1] -0.4006375 -0.3345566  1.3679540  2.1377671  0.5058193  0.7863424 -0.9022119  0.5328970 -0.6458943  0.2909875 -1.2375945
>>> [12] -0.4561763 -0.8303227  0.3401156  1.0663764  1.2161258  0.7356907 -0.4812086  0.5627448 -1.2463197  0.3809222 -1.4304273
>>> [23] -1.0484455 -0.2185036 -1.4899362  1.1727063 -1.4798270 -0.4303878 -1.0516386  1.5225863  0.5928281 -0.2226615  0.7128943
>>> [34]  0.7166008  0.4402419  0.1588306
>>> 
>>> Okay, I just installed 3.6.0, and I get the same values there.  I don't see a Mac binary for 3.5.3, so I can't test that one.
>>> 
>>> Duncan Murdoch
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> -- 
> ##############################################
> ## Prof. Ulrike Groemping
> ## FB II
> ## Beuth University of Applied Sciences Berlin
> ##############################################
> ## prof.beuth-hochschule.de/groemping
> ## Phone: +49(0)30 4504 5127
> ## Fax:   +49(0)30 4504 66 5127
> ## Home office: +49(0)30 394 04 863
> ##############################################
> 


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri May 10 14:55:38 2019
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 10 May 2019 14:55:38 +0200
Subject: [R-pkg-devel] 
 Change in normal random numbers between R 3.5.3 and R 3.6.0
In-Reply-To: <8e78d48f-8486-4305-262b-7c6bb2879b5c@beuth-hochschule.de>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
 <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
 <781fdde6-8154-372e-9804-a68c56205067@gmail.com>
 <9e2ba306-a830-8897-f714-9bf422b876e5@beuth-hochschule.de>
 <70b02f6d-4a5a-9119-9c5d-cfef64996772@gmail.com>
 <39E23D9F-5025-4A1B-B0CE-6F92C26E62D4@me.com>
 <8e78d48f-8486-4305-262b-7c6bb2879b5c@beuth-hochschule.de>
Message-ID: <23765.29898.458360.210015@stat.math.ethz.ch>

>>>>> Ulrike Gr?mping 
>>>>>     on Fri, 10 May 2019 06:39:39 +0200 writes:

    > Mark,
    > I used

    > if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")

    > And that works. Actually, using rnorm afterwards also
    > yields the same random numbers.

Yes, "of course",  'sample.kind' was only introduced into 3.6.0.
We had always recommended

   RNGversion("3.5.0")

possibly wrapped in  suppressWarnings().
That *does* work in old and new versions of R.

Note that in R >= 3.6.0 , e.g., inside your if(.) { ** }
you could also use  set.seed(<n>, sample.kind="Rounding")

Martin


    > My question arose from the fact that I confused myself about the noLD output I was supposed to reproduce. Therefore, my problem should be entirely explained by Duncan Murdoch's initial explanation: the sample() change does not only lead to different results in discrete sampling but also to different results from random number calls for other functions (like rnorm)

*IFF* callled after sample() [etc].
So yes, do call   RNGversion("3.5.0")
before set.seed() before the first call to sample() / sample.int()
or functions using those [or 'rwilcox()', see its help in R >= 3.6.0!].

Martin


    > Best, Ulrike

    > Am 10.05.2019 um 04:58 schrieb R. Mark Sharp:
    >> I was dealing with a similar issue but in the context of getting the same unit test code to work on multiple versions of R in a Travis-CI build. It seems RNGkind(sample.kind="Rounding?) does not work prior to version 3.6 so I resorted to using version dependent construction of the argument list to set.seed() in do.call().
    >> 
    >> I better solution will be greatly appreciated.
    >> 
    >> #' Work around for unit tests using sample()
    >> #'
    >> #' @param seed argument to \code{set.seed}
    >> set_seed <- function(seed = 1) {
    >> version <- as.integer(R.Version()$major) + (as.numeric(R.Version()$minor) / 10.0)
    >> if (version >= 3.6) {
    >> args <- list(seed, sample.kind = "Rounding")
    >> } else {
    >> args <- list(seed)
    >> }
    >> suppressWarnings(do.call(set.seed, args))
    >> }
    >> 
    >> Mark
    >> 
    >> R. Mark Sharp, Ph.D.
    >> Data Scientist and Biomedical Statistical Consultant
    >> 7526 Meadow Green St.
    >> San Antonio, TX 78251
    >> mobile: 210-218-2868
    >> rmsharp at me.com
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >>> On May 9, 2019, at 12:45 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
    >>> 
    >>> On 09/05/2019 12:43 p.m., Ulrike Gr?mping wrote:
    >>>> Hmmmh, but does that also apply if the sample.kind has been set to the
    >>>> old version? I.e., would
    >>>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
    >>>> val <- 10
    >>>> set.seed(val)
    >>>> discard <- sample(1000, 100)
    >>>> rnorm(36)
    >>>> produce the same normal random numbers in 3.5.3 and 3.6.0? I would have
    >>>> expected it to, but it seems to produce the same normal random numbers
    >>>> as R version 3.6.0 in the previous version of the test code without the
    >>>> RNGkind call.
    >>> I'm not seeing that, but I'm not using the exact versions you tested. If I run your code in  "R version 3.5.2 (2018-12-20)" and "R Under development (unstable) (2019-05-02 r76454)" I get this output from both:
    >>> 
    >>>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
    >>>> val <- 10
    >>>> set.seed(val)
    >>>> discard <- sample(1000, 100)
    >>>> rnorm(36)
    >>> [1] -0.4006375 -0.3345566  1.3679540  2.1377671  0.5058193  0.7863424 -0.9022119  0.5328970 -0.6458943  0.2909875 -1.2375945
    >>> [12] -0.4561763 -0.8303227  0.3401156  1.0663764  1.2161258  0.7356907 -0.4812086  0.5627448 -1.2463197  0.3809222 -1.4304273
    >>> [23] -1.0484455 -0.2185036 -1.4899362  1.1727063 -1.4798270 -0.4303878 -1.0516386  1.5225863  0.5928281 -0.2226615  0.7128943
    >>> [34]  0.7166008  0.4402419  0.1588306
    >>> 
    >>> Okay, I just installed 3.6.0, and I get the same values there.  I don't see a Mac binary for 3.5.3, so I can't test that one.
    >>> 
    >>> Duncan Murdoch
    >>> 
    >>> ______________________________________________
    >>> R-package-devel at r-project.org mailing list
    >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


    > -- 
    > ##############################################
    > ## Prof. Ulrike Groemping
    > ## FB II
    > ## Beuth University of Applied Sciences Berlin
    > ##############################################
    > ## prof.beuth-hochschule.de/groemping
    > ## Phone: +49(0)30 4504 5127
    > ## Fax:   +49(0)30 4504 66 5127
    > ## Home office: +49(0)30 394 04 863
    > ##############################################

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From w@ngz1 @end|ng |rom uth@c@@@edu  Fri May 10 15:36:25 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Fri, 10 May 2019 13:36:25 +0000
Subject: [R-pkg-devel] R CMD check ERROR (strange to me)
In-Reply-To: <20190510091203.0bb953f6@parabola>
References: <3d72a40d9a3842d8b3718596f91d5fca@EX-MCD-1.win.uthscsa.edu>
 <f2b7b2e54728459f9a34b4f4590cd7e0@EX-MCD-1.win.uthscsa.edu>
 <20190510091203.0bb953f6@parabola>
Message-ID: <fb387c74f089464b94e21ebcbdbbc428@EX-MCD-1.win.uthscsa.edu>

00install.out

** testing if installed package can be loaded from temporary location
 ** checking absolute paths in shared objects and dynamic libraries
 mv: cannot move '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/00LOCK-cts/00new/cts' to '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts': File exists
 ERROR:   moving to final location failed
 * removing '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts'

-----Original Message-----
From: Ivan Krylov <krylov.r00t at gmail.com> 
Sent: Friday, May 10, 2019 1:12 AM
To: Wang, Zhu <wangz1 at uthscsa.edu>
Cc: R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R CMD check ERROR (strange to me)

On Thu, 9 May 2019 23:19:46 +0000
"Wang, Zhu" <wangz1 at uthscsa.edu> wrote:

> I have encountered some strange error (see 00install.out).

It seems to have been stripped by the attachment filter, and there are no compilation errors on my system. Can you include the relevant lines from 00install.out inline?

--
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri May 10 16:27:37 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 10 May 2019 10:27:37 -0400
Subject: [R-pkg-devel] 
 Change in normal random numbers between R 3.5.3 and R 3.6.0
In-Reply-To: <23765.29898.458360.210015@stat.math.ethz.ch>
References: <317ee5bb-f247-cb18-772f-dca7243a0daa@beuth-hochschule.de>
 <b4beff10-a163-8f59-13f8-eba262a745d2@beuth-hochschule.de>
 <781fdde6-8154-372e-9804-a68c56205067@gmail.com>
 <9e2ba306-a830-8897-f714-9bf422b876e5@beuth-hochschule.de>
 <70b02f6d-4a5a-9119-9c5d-cfef64996772@gmail.com>
 <39E23D9F-5025-4A1B-B0CE-6F92C26E62D4@me.com>
 <8e78d48f-8486-4305-262b-7c6bb2879b5c@beuth-hochschule.de>
 <23765.29898.458360.210015@stat.math.ethz.ch>
Message-ID: <0c319540-7204-2357-4a5e-d86fb53d1534@gmail.com>

On 10/05/2019 8:55 a.m., Martin Maechler wrote:
>>>>>> Ulrike Gr?mping
>>>>>>      on Fri, 10 May 2019 06:39:39 +0200 writes:
> 
>      > Mark,
>      > I used
> 
>      > if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
> 
>      > And that works. Actually, using rnorm afterwards also
>      > yields the same random numbers.
> 
> Yes, "of course",  'sample.kind' was only introduced into 3.6.0.
> We had always recommended
> 
>     RNGversion("3.5.0")
> 
> possibly wrapped in  suppressWarnings().
> That *does* work in old and new versions of R.
> 
> Note that in R >= 3.6.0 , e.g., inside your if(.) { ** }
> you could also use  set.seed(<n>, sample.kind="Rounding")

That's good advice.  There's a couple of other things I'd add:

  - Be sure to do this only in test code with saved results.  Functions 
should never need to do this, and you really don't want to leave that 
setting in place after an example.

  - At some point in the future (maybe in a year or so), update your 
package to depend on "R (>= 3.6.0)", remove the RNGversion() line and 
update saved test results.

Duncan Murdoch

> 
> Martin
> 
> 
>      > My question arose from the fact that I confused myself about the noLD output I was supposed to reproduce. Therefore, my problem should be entirely explained by Duncan Murdoch's initial explanation: the sample() change does not only lead to different results in discrete sampling but also to different results from random number calls for other functions (like rnorm)
> 
> *IFF* callled after sample() [etc].
> So yes, do call   RNGversion("3.5.0")
> before set.seed() before the first call to sample() / sample.int()
> or functions using those [or 'rwilcox()', see its help in R >= 3.6.0!].
> 
> Martin
> 
> 
>      > Best, Ulrike
> 
>      > Am 10.05.2019 um 04:58 schrieb R. Mark Sharp:
>      >> I was dealing with a similar issue but in the context of getting the same unit test code to work on multiple versions of R in a Travis-CI build. It seems RNGkind(sample.kind="Rounding?) does not work prior to version 3.6 so I resorted to using version dependent construction of the argument list to set.seed() in do.call().
>      >>
>      >> I better solution will be greatly appreciated.
>      >>
>      >> #' Work around for unit tests using sample()
>      >> #'
>      >> #' @param seed argument to \code{set.seed}
>      >> set_seed <- function(seed = 1) {
>      >> version <- as.integer(R.Version()$major) + (as.numeric(R.Version()$minor) / 10.0)
>      >> if (version >= 3.6) {
>      >> args <- list(seed, sample.kind = "Rounding")
>      >> } else {
>      >> args <- list(seed)
>      >> }
>      >> suppressWarnings(do.call(set.seed, args))
>      >> }
>      >>
>      >> Mark
>      >>
>      >> R. Mark Sharp, Ph.D.
>      >> Data Scientist and Biomedical Statistical Consultant
>      >> 7526 Meadow Green St.
>      >> San Antonio, TX 78251
>      >> mobile: 210-218-2868
>      >> rmsharp at me.com
>      >>
>      >>
>      >>
>      >>
>      >>
>      >>
>      >>
>      >>
>      >>
>      >>
>      >>
>      >>> On May 9, 2019, at 12:45 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>      >>>
>      >>> On 09/05/2019 12:43 p.m., Ulrike Gr?mping wrote:
>      >>>> Hmmmh, but does that also apply if the sample.kind has been set to the
>      >>>> old version? I.e., would
>      >>>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
>      >>>> val <- 10
>      >>>> set.seed(val)
>      >>>> discard <- sample(1000, 100)
>      >>>> rnorm(36)
>      >>>> produce the same normal random numbers in 3.5.3 and 3.6.0? I would have
>      >>>> expected it to, but it seems to produce the same normal random numbers
>      >>>> as R version 3.6.0 in the previous version of the test code without the
>      >>>> RNGkind call.
>      >>> I'm not seeing that, but I'm not using the exact versions you tested. If I run your code in  "R version 3.5.2 (2018-12-20)" and "R Under development (unstable) (2019-05-02 r76454)" I get this output from both:
>      >>>
>      >>>> if (getRversion()>="3.6.0") RNGkind(sample.kind="Rounding")
>      >>>> val <- 10
>      >>>> set.seed(val)
>      >>>> discard <- sample(1000, 100)
>      >>>> rnorm(36)
>      >>> [1] -0.4006375 -0.3345566  1.3679540  2.1377671  0.5058193  0.7863424 -0.9022119  0.5328970 -0.6458943  0.2909875 -1.2375945
>      >>> [12] -0.4561763 -0.8303227  0.3401156  1.0663764  1.2161258  0.7356907 -0.4812086  0.5627448 -1.2463197  0.3809222 -1.4304273
>      >>> [23] -1.0484455 -0.2185036 -1.4899362  1.1727063 -1.4798270 -0.4303878 -1.0516386  1.5225863  0.5928281 -0.2226615  0.7128943
>      >>> [34]  0.7166008  0.4402419  0.1588306
>      >>>
>      >>> Okay, I just installed 3.6.0, and I get the same values there.  I don't see a Mac binary for 3.5.3, so I can't test that one.
>      >>>
>      >>> Duncan Murdoch
>      >>>
>      >>> ______________________________________________
>      >>> R-package-devel at r-project.org mailing list
>      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
>      > --
>      > ##############################################
>      > ## Prof. Ulrike Groemping
>      > ## FB II
>      > ## Beuth University of Applied Sciences Berlin
>      > ##############################################
>      > ## prof.beuth-hochschule.de/groemping
>      > ## Phone: +49(0)30 4504 5127
>      > ## Fax:   +49(0)30 4504 66 5127
>      > ## Home office: +49(0)30 394 04 863
>      > ##############################################
> 
>      > ______________________________________________
>      > R-package-devel at r-project.org mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |uc@r @end|ng |rom |edor@project@org  Fri May 10 16:49:37 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 10 May 2019 16:49:37 +0200
Subject: [R-pkg-devel] R CMD check ERROR (strange to me)
In-Reply-To: <fb387c74f089464b94e21ebcbdbbc428@EX-MCD-1.win.uthscsa.edu>
References: <3d72a40d9a3842d8b3718596f91d5fca@EX-MCD-1.win.uthscsa.edu>
 <f2b7b2e54728459f9a34b4f4590cd7e0@EX-MCD-1.win.uthscsa.edu>
 <20190510091203.0bb953f6@parabola>
 <fb387c74f089464b94e21ebcbdbbc428@EX-MCD-1.win.uthscsa.edu>
Message-ID: <CALEXWq3F19MVKToVP1gxx0NeAyecue9kzjejw8VQMfO_U8BrdA@mail.gmail.com>

On Fri, 10 May 2019 at 15:42, Wang, Zhu <wangz1 at uthscsa.edu> wrote:
>
> 00install.out
>
> ** testing if installed package can be loaded from temporary location
>  ** checking absolute paths in shared objects and dynamic libraries
>  mv: cannot move '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/00LOCK-cts/00new/cts' to '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts': File exists
>  ERROR:   moving to final location failed
>  * removing '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts'

I believe this has something to do with the new staged installation.
Reported here:

https://stat.ethz.ch/pipermail/r-devel/2019-May/077736.html

Try to disable it with by setting the environment variable
R_INSTALL_STAGED=false

I?aki


From |uc@r @end|ng |rom |edor@project@org  Fri May 10 16:52:10 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 10 May 2019 16:52:10 +0200
Subject: [R-pkg-devel] "unable to verify current time" in R CMD check
In-Reply-To: <CACSCokcyibqBt6ZXF6j8RRQJz8_6bh+jzW1SSnv2m9PY2OJc_Q@mail.gmail.com>
References: <CACSCokcyibqBt6ZXF6j8RRQJz8_6bh+jzW1SSnv2m9PY2OJc_Q@mail.gmail.com>
Message-ID: <CALEXWq3R6aiLJWnO8NYBpVZET3b37yjwD2sjtVyuWE2c7D0-=A@mail.gmail.com>

On Fri, 10 May 2019 at 13:22, Juhee Lee <ljh988488 at gmail.com> wrote:
>
> Hi, I'm checking my package for CRAN.
>
> In fact, I already complete checking CMD in 3.5.3ver.
> but for the latest ver., 3.6.0, I get  '1 note' when checking CMD.
>
> I wonder how I can solve this note.
>
> > checking for future file timestamps ... NOTE
>   unable to verify current time

Where do you get this NOTE? On CRAN? On your computer? Did you try on
win-builder and/or r-hub?

I?aki


From |uc@r @end|ng |rom |edor@project@org  Fri May 10 16:55:31 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 10 May 2019 16:55:31 +0200
Subject: [R-pkg-devel] Problem with using parallel runtime system with R
In-Reply-To: <E753EEE8-9805-40C4-AF05-90C62674A48C@kaust.edu.sa>
References: <E753EEE8-9805-40C4-AF05-90C62674A48C@kaust.edu.sa>
Message-ID: <CALEXWq3dHvCsoHs6b4JX+oAiTqmOPbJf_pDok1yjbJ_vY=7CkQ@mail.gmail.com>

On Fri, 10 May 2019 at 13:48, Sameh M. Abdulah
<sameh.abdulah at kaust.edu.sa> wrote:
> Hi,
>
> I have a C package which includes the usage of the StarPU runtime system to allow running my code on different HW architectures. I included this to an R-package and I found that R is using only one core and all the thread
> initiated by the runtime system is assigned to a single core which impacted the performance.  I used  Sys.setenv(KMP_AFFINITY= "disabled") to disable the default affinity and this helps to allow the runtime system to use
> all available cores. However, even I gained speedup, the R package is still 5X slower than the C package. Could anyone help me to understand the problem better?

Is this package publicly available somewhere?

I?aki


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Fri May 10 17:06:34 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Fri, 10 May 2019 15:06:34 +0000
Subject: [R-pkg-devel] Problem with using parallel runtime system with R
In-Reply-To: <CALEXWq3dHvCsoHs6b4JX+oAiTqmOPbJf_pDok1yjbJ_vY=7CkQ@mail.gmail.com>
References: <E753EEE8-9805-40C4-AF05-90C62674A48C@kaust.edu.sa>,
 <CALEXWq3dHvCsoHs6b4JX+oAiTqmOPbJf_pDok1yjbJ_vY=7CkQ@mail.gmail.com>
Message-ID: <35CFF3BA962CA3B8.424326C3-D721-4820-B118-9CEE153BB0F3@mail.outlook.com>

Actually not yet. It is on Github but in a private repo. If it helps I can fork it for public access for now.

Sameh


Get Outlook for iOS<https://aka.ms/o0ukef>



On Fri, May 10, 2019 at 5:55 PM +0300, "I?aki Ucar" <iucar at fedoraproject.org<mailto:iucar at fedoraproject.org>> wrote:


On Fri, 10 May 2019 at 13:48, Sameh M. Abdulah
 wrote:
> Hi,
>
> I have a C package which includes the usage of the StarPU runtime system to allow running my code on different HW architectures. I included this to an R-package and I found that R is using only one core and all the thread
> initiated by the runtime system is assigned to a single core which impacted the performance.  I used  Sys.setenv(KMP_AFFINITY= "disabled") to disable the default affinity and this helps to allow the runtime system to use
> all available cores. However, even I gained speedup, the R package is still 5X slower than the C package. Could anyone help me to understand the problem better?

Is this package publicly available somewhere?

I?aki


	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Fri May 10 17:11:45 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 10 May 2019 17:11:45 +0200
Subject: [R-pkg-devel] Problem with using parallel runtime system with R
In-Reply-To: <35CFF3BA962CA3B8.424326C3-D721-4820-B118-9CEE153BB0F3@mail.outlook.com>
References: <E753EEE8-9805-40C4-AF05-90C62674A48C@kaust.edu.sa>
 <CALEXWq3dHvCsoHs6b4JX+oAiTqmOPbJf_pDok1yjbJ_vY=7CkQ@mail.gmail.com>
 <35CFF3BA962CA3B8.424326C3-D721-4820-B118-9CEE153BB0F3@mail.outlook.com>
Message-ID: <CALEXWq3z7EiHeai6R6KMyayKpn+PkyhQGiX6XpZLzoagxQeZoQ@mail.gmail.com>

On Fri, 10 May 2019 at 17:06, Sameh M. Abdulah
<sameh.abdulah at kaust.edu.sa> wrote:
>
> Actually not yet. It is on Github but in a private repo. If it helps I can fork it for public access for now.

Providing the code always improves your chances of getting help.
Otherwise, the information is probably too limited.

I?aki


From w@ngz1 @end|ng |rom uth@c@@@edu  Fri May 10 17:16:13 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Fri, 10 May 2019 15:16:13 +0000
Subject: [R-pkg-devel] R CMD check ERROR (strange to me)
In-Reply-To: <CALEXWq3F19MVKToVP1gxx0NeAyecue9kzjejw8VQMfO_U8BrdA@mail.gmail.com>
References: <3d72a40d9a3842d8b3718596f91d5fca@EX-MCD-1.win.uthscsa.edu>
 <f2b7b2e54728459f9a34b4f4590cd7e0@EX-MCD-1.win.uthscsa.edu>
 <20190510091203.0bb953f6@parabola>
 <fb387c74f089464b94e21ebcbdbbc428@EX-MCD-1.win.uthscsa.edu>
 <CALEXWq3F19MVKToVP1gxx0NeAyecue9kzjejw8VQMfO_U8BrdA@mail.gmail.com>
Message-ID: <80000d66428c47aebe029192c907f410@EX-MCD-1.win.uthscsa.edu>

Thanks I?aki for the tip that helps!

Best,

Zhu

-----Original Message-----
From: I?aki Ucar <iucar at fedoraproject.org> 
Sent: Friday, May 10, 2019 9:50 AM
To: Wang, Zhu <wangz1 at uthscsa.edu>
Cc: Ivan Krylov <krylov.r00t at gmail.com>; R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R CMD check ERROR (strange to me)

On Fri, 10 May 2019 at 15:42, Wang, Zhu <wangz1 at uthscsa.edu> wrote:
>
> 00install.out
>
> ** testing if installed package can be loaded from temporary location
>  ** checking absolute paths in shared objects and dynamic libraries
>  mv: cannot move '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/00LOCK-cts/00new/cts' to '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts': File exists
>  ERROR:   moving to final location failed
>  * removing '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts'

I believe this has something to do with the new staged installation.
Reported here:

https://stat.ethz.ch/pipermail/r-devel/2019-May/077736.html

Try to disable it with by setting the environment variable R_INSTALL_STAGED=false

I?aki

From edd @end|ng |rom deb|@n@org  Fri May 10 17:30:12 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 10 May 2019 10:30:12 -0500
Subject: [R-pkg-devel] R CMD check ERROR (strange to me)
In-Reply-To: <CALEXWq3F19MVKToVP1gxx0NeAyecue9kzjejw8VQMfO_U8BrdA@mail.gmail.com>
References: <3d72a40d9a3842d8b3718596f91d5fca@EX-MCD-1.win.uthscsa.edu>
 <f2b7b2e54728459f9a34b4f4590cd7e0@EX-MCD-1.win.uthscsa.edu>
 <20190510091203.0bb953f6@parabola>
 <fb387c74f089464b94e21ebcbdbbc428@EX-MCD-1.win.uthscsa.edu>
 <CALEXWq3F19MVKToVP1gxx0NeAyecue9kzjejw8VQMfO_U8BrdA@mail.gmail.com>
Message-ID: <23765.39172.688213.322738@rob.eddelbuettel.com>


On 10 May 2019 at 16:49, I?aki Ucar wrote:
| On Fri, 10 May 2019 at 15:42, Wang, Zhu <wangz1 at uthscsa.edu> wrote:
| >
| > 00install.out
| >
| > ** testing if installed package can be loaded from temporary location
| >  ** checking absolute paths in shared objects and dynamic libraries
| >  mv: cannot move '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/00LOCK-cts/00new/cts' to '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts': File exists
| >  ERROR:   moving to final location failed
| >  * removing '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts'
| 
| I believe this has something to do with the new staged installation.
| Reported here:
| 
| https://stat.ethz.ch/pipermail/r-devel/2019-May/077736.html
| 
| Try to disable it with by setting the environment variable
| R_INSTALL_STAGED=false

Are you sure it is not just a permissions issue?  Same thing happens when you
mix running R CMD check as you and/or as root (ie via a Docker container).

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |uc@r @end|ng |rom |edor@project@org  Fri May 10 17:32:53 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 10 May 2019 17:32:53 +0200
Subject: [R-pkg-devel] R CMD check ERROR (strange to me)
In-Reply-To: <23765.39172.688213.322738@rob.eddelbuettel.com>
References: <3d72a40d9a3842d8b3718596f91d5fca@EX-MCD-1.win.uthscsa.edu>
 <f2b7b2e54728459f9a34b4f4590cd7e0@EX-MCD-1.win.uthscsa.edu>
 <20190510091203.0bb953f6@parabola>
 <fb387c74f089464b94e21ebcbdbbc428@EX-MCD-1.win.uthscsa.edu>
 <CALEXWq3F19MVKToVP1gxx0NeAyecue9kzjejw8VQMfO_U8BrdA@mail.gmail.com>
 <23765.39172.688213.322738@rob.eddelbuettel.com>
Message-ID: <CALEXWq00+f3x5=0g7E+a==qBPusrVh56aV9JYhWcxJC-z0FOwg@mail.gmail.com>

On Fri, 10 May 2019 at 17:30, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 10 May 2019 at 16:49, I?aki Ucar wrote:
> | On Fri, 10 May 2019 at 15:42, Wang, Zhu <wangz1 at uthscsa.edu> wrote:
> | >
> | > 00install.out
> | >
> | > ** testing if installed package can be loaded from temporary location
> | >  ** checking absolute paths in shared objects and dynamic libraries
> | >  mv: cannot move '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/00LOCK-cts/00new/cts' to '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts': File exists
> | >  ERROR:   moving to final location failed
> | >  * removing '/media/sf_Documents/Zwang/Rpkg/cts.Rcheck/cts'
> |
> | I believe this has something to do with the new staged installation.
> | Reported here:
> |
> | https://stat.ethz.ch/pipermail/r-devel/2019-May/077736.html
> |
> | Try to disable it with by setting the environment variable
> | R_INSTALL_STAGED=false
>
> Are you sure it is not just a permissions issue?  Same thing happens when you
> mix running R CMD check as you and/or as root (ie via a Docker container).

Not completely sure, but /media/sf_* is the typical mount point of a
VirtualBox machine.

I?aki


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Fri May 10 17:37:57 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Fri, 10 May 2019 15:37:57 +0000
Subject: [R-pkg-devel] Problem with using parallel runtime system with R
In-Reply-To: <CALEXWq3z7EiHeai6R6KMyayKpn+PkyhQGiX6XpZLzoagxQeZoQ@mail.gmail.com>
References: <E753EEE8-9805-40C4-AF05-90C62674A48C@kaust.edu.sa>
 <CALEXWq3dHvCsoHs6b4JX+oAiTqmOPbJf_pDok1yjbJ_vY=7CkQ@mail.gmail.com>
 <35CFF3BA962CA3B8.424326C3-D721-4820-B118-9CEE153BB0F3@mail.outlook.com>
 <CALEXWq3z7EiHeai6R6KMyayKpn+PkyhQGiX6XpZLzoagxQeZoQ@mail.gmail.com>
Message-ID: <7EAB3395-3674-4842-8008-E349A26B0B61@kaust.edu.sa>

I will try to talk to my team to fork it for more investigation from your side.

However, this is the story.  We have a C package which uses a STARPU runtime system (http://starpu.gforge.inria.fr/doc/starpu.pdf) to facility the parallelization through a set of task-based parallel algorithms. Once you execute
Your program StarPU created several threads to parallelize your tasks based on a specific scheduling mechanism. 

In the case of R, R is used only one process and if I used the default behavior without any modification, all the StarPU threads are using the same physical core which is used by the default R process. We added
A simple modification which helps to well spawn the threads to the other available physical cores by disabling the KMP_AFFINITY (Sys.setenv(KMP_AFFINITY= "disabled")). However,
Even the performance is improved, the R package is about 5X slow up compared to the C version. The difference we found that In case of R different threads is controlled by R which means that we can see from top 
Command that R is using n threads on n cores. In the case of C package, StarPU is using these threads.  One more difference from htop command that the virtual memory usage of the R package is doubled which we cannot 
Understand or even know if it is related to the performance issue or not 



--Sameh



?On 5/10/19, 6:12 PM, "I?aki Ucar" <iucar at fedoraproject.org> wrote:

    On Fri, 10 May 2019 at 17:06, Sameh M. Abdulah
    <sameh.abdulah at kaust.edu.sa> wrote:
    >
    > Actually not yet. It is on Github but in a private repo. If it helps I can fork it for public access for now.
    
    Providing the code always improves your chances of getting help.
    Otherwise, the information is probably too limited.
    
    I?aki
    


From |uc@r @end|ng |rom |edor@project@org  Fri May 10 17:48:41 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 10 May 2019 17:48:41 +0200
Subject: [R-pkg-devel] Problem with using parallel runtime system with R
In-Reply-To: <7EAB3395-3674-4842-8008-E349A26B0B61@kaust.edu.sa>
References: <E753EEE8-9805-40C4-AF05-90C62674A48C@kaust.edu.sa>
 <CALEXWq3dHvCsoHs6b4JX+oAiTqmOPbJf_pDok1yjbJ_vY=7CkQ@mail.gmail.com>
 <35CFF3BA962CA3B8.424326C3-D721-4820-B118-9CEE153BB0F3@mail.outlook.com>
 <CALEXWq3z7EiHeai6R6KMyayKpn+PkyhQGiX6XpZLzoagxQeZoQ@mail.gmail.com>
 <7EAB3395-3674-4842-8008-E349A26B0B61@kaust.edu.sa>
Message-ID: <CALEXWq39LPsbrP_5eJjCwapqQ8Q5gEQLPUXcYcO18gG+e4k=xg@mail.gmail.com>

On Fri, 10 May 2019 at 17:38, Sameh M. Abdulah
<sameh.abdulah at kaust.edu.sa> wrote:
>
> I will try to talk to my team to fork it for more investigation from your side.

Disclaimer: I'm not saying that I'll have time to have a look. Just
that somebody might help if you provide more information, especially
the actual code, beyond stating that it is not working.

I?aki


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Fri May 10 17:53:30 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Fri, 10 May 2019 15:53:30 +0000
Subject: [R-pkg-devel] Problem with using parallel runtime system with R
In-Reply-To: <CALEXWq39LPsbrP_5eJjCwapqQ8Q5gEQLPUXcYcO18gG+e4k=xg@mail.gmail.com>
References: <E753EEE8-9805-40C4-AF05-90C62674A48C@kaust.edu.sa>
 <CALEXWq3dHvCsoHs6b4JX+oAiTqmOPbJf_pDok1yjbJ_vY=7CkQ@mail.gmail.com>
 <35CFF3BA962CA3B8.424326C3-D721-4820-B118-9CEE153BB0F3@mail.outlook.com>
 <CALEXWq3z7EiHeai6R6KMyayKpn+PkyhQGiX6XpZLzoagxQeZoQ@mail.gmail.com>
 <7EAB3395-3674-4842-8008-E349A26B0B61@kaust.edu.sa>,
 <CALEXWq39LPsbrP_5eJjCwapqQ8Q5gEQLPUXcYcO18gG+e4k=xg@mail.gmail.com>
Message-ID: <35CFF3BA962CA3B8.917BF78D-F010-4C52-9FD8-3798D71A862F@mail.outlook.com>

I meant for anyone who can help :).

?Sameh


Get Outlook for iOS<https://aka.ms/o0ukef>



On Fri, May 10, 2019 at 6:48 PM +0300, "I?aki Ucar" <iucar at fedoraproject.org<mailto:iucar at fedoraproject.org>> wrote:


On Fri, 10 May 2019 at 17:38, Sameh M. Abdulah
 wrote:
>
> I will try to talk to my team to fork it for more investigation from your side.

Disclaimer: I'm not saying that I'll have time to have a look. Just
that somebody might help if you provide more information, especially
the actual code, beyond stating that it is not working.

I?aki


	[[alternative HTML version deleted]]


From w@ngz1 @end|ng |rom uth@c@@@edu  Fri May 10 18:17:42 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Fri, 10 May 2019 16:17:42 +0000
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <20190506121422.7d661170@trisector>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
 <20190506121422.7d661170@trisector>
Message-ID: <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>

Thanks Ivan for the tip. Are there any examples or links for me to follow through more closely?

Thanks,

Zhu

-----Original Message-----
From: Ivan Krylov <krylov.r00t at gmail.com> 
Sent: Monday, May 6, 2019 4:14 AM
To: Wang, Zhu <wangz1 at uthscsa.edu>
Cc: R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] How to obtain intercept of intercept-only glm in Fortran?

On Sat, 4 May 2019 22:41:16 +0000
"Wang, Zhu" <wangz1 at uthscsa.edu> wrote:

> In an R package I would like to compute intercept for an 
> intercept-only GLM in a Fortran subroutine.

If all else fails, you could use R API [*] to call coef(glm.fit(...)), though it might require writing a C or C++ wrapper to avoid translating all function prototypes from Rinternals.h into Fortran 2003 C interoperability syntax.

--
Best regards,
Ivan

[*]:
https://cran.r-project.org/doc/manuals/R-exts.html#Evaluating-R-expressions-from-C


From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Fri May 10 22:32:35 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Fri, 10 May 2019 20:32:35 +0000
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
Message-ID: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>

Good afternoon ?

I am submitting an update to my package ?simstudy?, and the ran the rhub checks. I received a note from one of the four platforms (the other three passed). The Ubuntu Linux 16.04 objected to the compilation flags:

* checking compilation flags used ... NOTE
Compilation used the following non-portable flag(s):
  ?-Wdate-time? ?-Werror=format-security? ?-Wformat?

I did some searching and someone suggested I create a ?Makevars? in the ~/.R directory (which is different from my package directory). This is what I included in the Makevars file:

# Settings from /etc/R/Makeconf with "non-portable flag(s):"
# ?-Wdate-time? ?-Werror=format-security? ?-Wformat? replaced by -Wall -pedantic
# and without -fdebug-prefix-map=...
CFLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2 $(LTO)
CXXFLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2 $(LTO)
CXX98FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2
CXX11FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2
CXX14FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2

I ran devtools::check(), and it seemed to find the Makevars file. However, when I reran devtools::check_rhub(), I still received a NOTE. Does anyone have any advice on what I might not be getting right?

- Keith


Keith S. Goldfeld, DrPH
Assistant Professor

NYU Langone Health
Division of Biostatistics
Department of Population Health
180 Madison Avenue, # 551
New York, NY 10016

T 646-501-3650
M 646-423-9005
keith.goldfeld at nyumc.org<mailto:keith.goldfeld at nyumc.org>

Blog: ouR data generation<http://www.rdatagen.net/>

------------------------------------------------------------
This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
=================================

	[[alternative HTML version deleted]]


From r@||@@tubner @end|ng |rom d@q@n@@com  Fri May 10 22:41:08 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Fri, 10 May 2019 22:41:08 +0200
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
Message-ID: <9659f442-87f5-f1a9-d50a-4702d2c263ab@daqana.com>

On 10.05.19 22:32, Goldfeld, Keith wrote:
> I am submitting an update to my package ?simstudy?, and the ran the rhub checks. I received a note from one of the four platforms (the other three passed). The Ubuntu Linux 16.04 objected to the compilation flags:
> 
> * checking compilation flags used ... NOTE
> Compilation used the following non-portable flag(s):
>   ?-Wdate-time? ?-Werror=format-security? ?-Wformat?

You can ignore these messages, c.f. https://github.com/r-hub/rhub/issues/264

> I did some searching and someone suggested I create a ?Makevars? in the ~/.R directory (which is different from my package directory). This is what I included in the Makevars file:

You cannot remove these compiler flags in a package's Makevars file.
Either ignore the warning (that's what I am doing when using rhub), or
ask the rhub maintainer to add a suitable ~/.R/Makevars file.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190510/636db14a/attachment.sig>

From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Fri May 10 22:51:57 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Fri, 10 May 2019 20:51:57 +0000
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <9659f442-87f5-f1a9-d50a-4702d2c263ab@daqana.com>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
 <9659f442-87f5-f1a9-d50a-4702d2c263ab@daqana.com>
Message-ID: <d26fc038a1d34816be903b64c3bf5381@nyulangone.org>

That definitely makes it easy. Thanks.

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Ralf Stubner
Sent: Friday, May 10, 2019 4:41 PM
To: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Compilation used the "non-portable flag"

On 10.05.19 22:32, Goldfeld, Keith wrote:
> I am submitting an update to my package ?simstudy?, and the ran the rhub checks. I received a note from one of the four platforms (the other three passed). The Ubuntu Linux 16.04 objected to the compilation flags:
> 
> * checking compilation flags used ... NOTE Compilation used the 
> following non-portable flag(s):
>   ?-Wdate-time? ?-Werror=format-security? ?-Wformat?

You can ignore these messages, c.f. https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_r-2Dhub_rhub_issues_264&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wczPXS5KI6iyvPUM-ICDfxh8&m=Y22gFyc69PfyQYs7TnMqsYGg7I65FrV3X2JPEm6_gqM&s=pAEaTHOVB2wL09DSdHLlPHHV1rTEZlSeraj4ENBsUsk&e=

> I did some searching and someone suggested I create a ?Makevars? in the ~/.R directory (which is different from my package directory). This is what I included in the Makevars file:

You cannot remove these compiler flags in a package's Makevars file.
Either ignore the warning (that's what I am doing when using rhub), or ask the rhub maintainer to add a suitable ~/.R/Makevars file.

Greetings
Ralf

--
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


------------------------------------------------------------
This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
=================================

From edd @end|ng |rom deb|@n@org  Fri May 10 22:55:35 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 10 May 2019 15:55:35 -0500
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
Message-ID: <23765.58695.347117.495958@rob.eddelbuettel.com>


On 10 May 2019 at 20:32, Goldfeld, Keith wrote:
| Good afternoon ?
| 
| I am submitting an update to my package ?simstudy?, and the ran the rhub checks. I received a note from one of the four platforms (the other three passed). The Ubuntu Linux 16.04 objected to the compilation flags:
| 
| * checking compilation flags used ... NOTE
| Compilation used the following non-portable flag(s):
|   ?-Wdate-time? ?-Werror=format-security? ?-Wformat?
| 
| I did some searching and someone suggested I create a ?Makevars? in the ~/.R directory (which is different from my package directory). This is what I included in the Makevars file:
| 
| # Settings from /etc/R/Makeconf with "non-portable flag(s):"
| # ?-Wdate-time? ?-Werror=format-security? ?-Wformat? replaced by -Wall -pedantic
| # and without -fdebug-prefix-map=...
| CFLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2 $(LTO)
| CXXFLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2 $(LTO)
| CXX98FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2
| CXX11FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2
| CXX14FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2
| 
| I ran devtools::check(), and it seemed to find the Makevars file. However, when I reran devtools::check_rhub(), I still received a NOTE. Does anyone have any advice on what I might not be getting right?

"A change is gonna come."

This was arguably something I should have taken care of earlier.  The long
story is that

 - Debian (and thus Ubuntu) impose ?-Wdate-time -Werror=format-security
   -Wformat? for security reasons, and have for a few years
 - as an OS default these become active on Debian and Ubuntu when R is
   compiled (see /etc/R/Makeconf)
 - this confuses people, and what pushed me over the edge was that I had to
   explain it to one of my STAT 430 students a week or two ago

As discussed on r-sig-debian we currently have another good reason to update
our R 3.6.0-1 package, and I will add this too.  In the meantime try this on
local system (and I don't think you can influence the rhub build): just add

   _R_CHECK_COMPILATION_FLAGS_KNOWN_=-Wformat -Werror=format-security -Wdate-time

to any one of $RHOME/etc/Renviron, $RHOME/etc/Renviron.site (and those two
can be accessed via /etc/R/ for convenience), your ~/.Renviron, your working
directory's .Renviron (if any), your ~/.R/check.Renviron.

Or wait a couple of days.

Hope this helps,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kry|ov@r00t @end|ng |rom gm@||@com  Sat May 11 14:23:20 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 11 May 2019 15:23:20 +0300
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
 <20190506121422.7d661170@trisector>
 <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>
Message-ID: <20190510213646.4a340f0d@parabola>

On Fri, 10 May 2019 16:17:42 +0000
"Wang, Zhu" <wangz1 at uthscsa.edu> wrote:

> Are there any examples or links for me to follow through more closely?

Calling R functions from C++ is described at
<http://dirk.eddelbuettel.com/code/rcpp/Rcpp-quickref.pdf> and
elsewhere in Rcpp documentation. An example follows:

--------------8<--------------glmfit.cpp--------------8<--------------
#include <algorithm>
#include <Rcpp.h>
using namespace Rcpp;

extern "C" double intercept_glm(size_t n, const double * response) {
	// access functions from default environment
	Function glm_fit("glm.fit"), coef("coef");

	// intercept-only model: response ~ 1
	NumericVector x(n);
	x.fill(1);

	// I couldn't find a way to wrap a double* into a NumericVector
	// without copying anything, sorry; perhaps someone else
	// can offer a solution
	NumericVector y(n);
	std::copy_n(response, n, y.begin());

	// call the R function, convert the result back
	return as<double>(coef(glm_fit(x, y)));
}
--------------8<--------------glmfit.cpp--------------8<--------------

Since this function is extern "C" and uses only primitive C types, it
should be fairly easy to call from Fortran. (C is the lingua franca of
programming languages). Fortran-C interoperability is well described in
"Modern Fortran Explained" by Metcalf et al. Here is the Fortran side
of the code:

--------------8<--------------callglm.f90--------------8<--------------
subroutine callglm(ret)
use, intrinsic :: iso_c_binding, only: c_size_t, c_double
! using iso_c_binding here
! - to get correct type of ret when R calls the function
! - to convert variables before calling C function
implicit none
! using F77-style arguments to match expectations of .Fortran()
real(c_double), intent(out) :: ret
! toy data to compare against R code later
real :: y(10) = [10, 11, 20, 9, 10, 8, 11, 45, 2, 3]
 ! the interface block declares an extern "C" function
 interface
  ! double intercept_glm(size_t n, const double * response)
  function intercept_glm(n, response) bind(c)
   use, intrinsic :: iso_c_binding
   real(c_double) :: intercept_glm
   integer(c_size_t), value :: n
   real(c_double) :: response(*)
  end function
 end interface

 ! call the function as you would call any other function
 ret = intercept_glm(int(size(y), c_size_t), real(y, c_double))
end subroutine
--------------8<--------------callglm.f90--------------8<--------------

For a quick test, make sure that you have Rcpp installed and run:

# adjust R version and path if your library is elsewhere
PKG_CPPFLAGS='-g -I ~/R/x86_64-pc-linux-gnu-library/3.3/Rcpp/include' \
	R CMD SHLIB callglm.f90 glmfit.cpp
R
library(Rcpp)
dyn.load('callglm.so') # change extension if needed
.Fortran('callglm', ret=numeric(1))
# $ret
# [1] 12.9
coef(glm.fit(rep(1, 10), c(10, 11, 20, 9, 10, 8, 11, 45, 2, 3)))
# [1] 12.9

To use this in a package, place both files in the src/ subdirectory of
your package and add LinkingTo: Rcpp in the DESCRIPTION.

-- 
Best regards,
Ivan


From m|ch@e|@wey|@ndt @end|ng |rom gm@||@com  Sat May 11 15:01:12 2019
From: m|ch@e|@wey|@ndt @end|ng |rom gm@||@com (Michael Weylandt)
Date: Sat, 11 May 2019 08:01:12 -0500
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <20190510213646.4a340f0d@parabola>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
 <20190506121422.7d661170@trisector>
 <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>
 <20190510213646.4a340f0d@parabola>
Message-ID: <CAAmySGMETt9aD+RfmU6qCVhGHzqiE7q+yFk0iHVuvkT9oR9R=Q@mail.gmail.com>

This is very cool, but I wonder if it isn't over-kill for the larger
problem.

In general, calculating the coefficient of an intercept-only GLM is just
calculating (a transformation of) the MLE of a univariate exponential
family distribution. (Things may be a bit trickier if the GLM also involves
weights and offsets, not just an intercept, but I'm assuming it doesn't.)

OP: Can you clarify why you want to invoke R's entire GLM machinery as
opposed to just using the closed form solutions?

Michael

On Sat, May 11, 2019 at 7:23 AM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Fri, 10 May 2019 16:17:42 +0000
> "Wang, Zhu" <wangz1 at uthscsa.edu> wrote:
>
> > Are there any examples or links for me to follow through more closely?
>
> Calling R functions from C++ is described at
> <http://dirk.eddelbuettel.com/code/rcpp/Rcpp-quickref.pdf> and
> elsewhere in Rcpp documentation. An example follows:
>
> --------------8<--------------glmfit.cpp--------------8<--------------
> #include <algorithm>
> #include <Rcpp.h>
> using namespace Rcpp;
>
> extern "C" double intercept_glm(size_t n, const double * response) {
>         // access functions from default environment
>         Function glm_fit("glm.fit"), coef("coef");
>
>         // intercept-only model: response ~ 1
>         NumericVector x(n);
>         x.fill(1);
>
>         // I couldn't find a way to wrap a double* into a NumericVector
>         // without copying anything, sorry; perhaps someone else
>         // can offer a solution
>         NumericVector y(n);
>         std::copy_n(response, n, y.begin());
>
>         // call the R function, convert the result back
>         return as<double>(coef(glm_fit(x, y)));
> }
> --------------8<--------------glmfit.cpp--------------8<--------------
>
> Since this function is extern "C" and uses only primitive C types, it
> should be fairly easy to call from Fortran. (C is the lingua franca of
> programming languages). Fortran-C interoperability is well described in
> "Modern Fortran Explained" by Metcalf et al. Here is the Fortran side
> of the code:
>
> --------------8<--------------callglm.f90--------------8<--------------
> subroutine callglm(ret)
> use, intrinsic :: iso_c_binding, only: c_size_t, c_double
> ! using iso_c_binding here
> ! - to get correct type of ret when R calls the function
> ! - to convert variables before calling C function
> implicit none
> ! using F77-style arguments to match expectations of .Fortran()
> real(c_double), intent(out) :: ret
> ! toy data to compare against R code later
> real :: y(10) = [10, 11, 20, 9, 10, 8, 11, 45, 2, 3]
>  ! the interface block declares an extern "C" function
>  interface
>   ! double intercept_glm(size_t n, const double * response)
>   function intercept_glm(n, response) bind(c)
>    use, intrinsic :: iso_c_binding
>    real(c_double) :: intercept_glm
>    integer(c_size_t), value :: n
>    real(c_double) :: response(*)
>   end function
>  end interface
>
>  ! call the function as you would call any other function
>  ret = intercept_glm(int(size(y), c_size_t), real(y, c_double))
> end subroutine
> --------------8<--------------callglm.f90--------------8<--------------
>
> For a quick test, make sure that you have Rcpp installed and run:
>
> # adjust R version and path if your library is elsewhere
> PKG_CPPFLAGS='-g -I ~/R/x86_64-pc-linux-gnu-library/3.3/Rcpp/include' \
>         R CMD SHLIB callglm.f90 glmfit.cpp
> R
> library(Rcpp)
> dyn.load('callglm.so') # change extension if needed
> .Fortran('callglm', ret=numeric(1))
> # $ret
> # [1] 12.9
> coef(glm.fit(rep(1, 10), c(10, 11, 20, 9, 10, 8, 11, 45, 2, 3)))
> # [1] 12.9
>
> To use this in a package, place both files in the src/ subdirectory of
> your package and add LinkingTo: Rcpp in the DESCRIPTION.
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From w@ngz1 @end|ng |rom uth@c@@@edu  Sat May 11 15:28:41 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Sat, 11 May 2019 13:28:41 +0000
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <CAAmySGMETt9aD+RfmU6qCVhGHzqiE7q+yFk0iHVuvkT9oR9R=Q@mail.gmail.com>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
 <20190506121422.7d661170@trisector>
 <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>
 <20190510213646.4a340f0d@parabola>,
 <CAAmySGMETt9aD+RfmU6qCVhGHzqiE7q+yFk0iHVuvkT9oR9R=Q@mail.gmail.com>
Message-ID: <884E5EBF-D596-4588-B328-C38C18ED4BC1@uthscsa.edu>

Ivan's answer is very impressive.   

Michael,

I am open to whatever suggestions but I am not aware a simple closed-form solution for my original question.

Thanks,

Zhu

> On May 11, 2019, at 8:01 AM, Michael Weylandt <michael.weylandt at gmail.com> wrote:
> 
> This is very cool, but I wonder if it isn't over-kill for the larger
> problem.
> 
> In general, calculating the coefficient of an intercept-only GLM is just
> calculating (a transformation of) the MLE of a univariate exponential
> family distribution. (Things may be a bit trickier if the GLM also involves
> weights and offsets, not just an intercept, but I'm assuming it doesn't.)
> 
> OP: Can you clarify why you want to invoke R's entire GLM machinery as
> opposed to just using the closed form solutions?
> 
> Michael
> 
>> On Sat, May 11, 2019 at 7:23 AM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>> 
>> On Fri, 10 May 2019 16:17:42 +0000
>> "Wang, Zhu" <wangz1 at uthscsa.edu> wrote:
>> 
>>> Are there any examples or links for me to follow through more closely?
>> 
>> Calling R functions from C++ is described at
>> <http://dirk.eddelbuettel.com/code/rcpp/Rcpp-quickref.pdf> and
>> elsewhere in Rcpp documentation. An example follows:
>> 
>> --------------8<--------------glmfit.cpp--------------8<--------------
>> #include <algorithm>
>> #include <Rcpp.h>
>> using namespace Rcpp;
>> 
>> extern "C" double intercept_glm(size_t n, const double * response) {
>>        // access functions from default environment
>>        Function glm_fit("glm.fit"), coef("coef");
>> 
>>        // intercept-only model: response ~ 1
>>        NumericVector x(n);
>>        x.fill(1);
>> 
>>        // I couldn't find a way to wrap a double* into a NumericVector
>>        // without copying anything, sorry; perhaps someone else
>>        // can offer a solution
>>        NumericVector y(n);
>>        std::copy_n(response, n, y.begin());
>> 
>>        // call the R function, convert the result back
>>        return as<double>(coef(glm_fit(x, y)));
>> }
>> --------------8<--------------glmfit.cpp--------------8<--------------
>> 
>> Since this function is extern "C" and uses only primitive C types, it
>> should be fairly easy to call from Fortran. (C is the lingua franca of
>> programming languages). Fortran-C interoperability is well described in
>> "Modern Fortran Explained" by Metcalf et al. Here is the Fortran side
>> of the code:
>> 
>> --------------8<--------------callglm.f90--------------8<--------------
>> subroutine callglm(ret)
>> use, intrinsic :: iso_c_binding, only: c_size_t, c_double
>> ! using iso_c_binding here
>> ! - to get correct type of ret when R calls the function
>> ! - to convert variables before calling C function
>> implicit none
>> ! using F77-style arguments to match expectations of .Fortran()
>> real(c_double), intent(out) :: ret
>> ! toy data to compare against R code later
>> real :: y(10) = [10, 11, 20, 9, 10, 8, 11, 45, 2, 3]
>> ! the interface block declares an extern "C" function
>> interface
>>  ! double intercept_glm(size_t n, const double * response)
>>  function intercept_glm(n, response) bind(c)
>>   use, intrinsic :: iso_c_binding
>>   real(c_double) :: intercept_glm
>>   integer(c_size_t), value :: n
>>   real(c_double) :: response(*)
>>  end function
>> end interface
>> 
>> ! call the function as you would call any other function
>> ret = intercept_glm(int(size(y), c_size_t), real(y, c_double))
>> end subroutine
>> --------------8<--------------callglm.f90--------------8<--------------
>> 
>> For a quick test, make sure that you have Rcpp installed and run:
>> 
>> # adjust R version and path if your library is elsewhere
>> PKG_CPPFLAGS='-g -I ~/R/x86_64-pc-linux-gnu-library/3.3/Rcpp/include' \
>>        R CMD SHLIB callglm.f90 glmfit.cpp
>> R
>> library(Rcpp)
>> dyn.load('callglm.so') # change extension if needed
>> .Fortran('callglm', ret=numeric(1))
>> # $ret
>> # [1] 12.9
>> coef(glm.fit(rep(1, 10), c(10, 11, 20, 9, 10, 8, 11, 45, 2, 3)))
>> # [1] 12.9
>> 
>> To use this in a package, place both files in the src/ subdirectory of
>> your package and add LinkingTo: Rcpp in the DESCRIPTION.
>> 
>> --
>> Best regards,
>> Ivan
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m|ch@e|@wey|@ndt @end|ng |rom gm@||@com  Sat May 11 16:48:35 2019
From: m|ch@e|@wey|@ndt @end|ng |rom gm@||@com (Michael Weylandt)
Date: Sat, 11 May 2019 09:48:35 -0500
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <884E5EBF-D596-4588-B328-C38C18ED4BC1@uthscsa.edu>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
 <20190506121422.7d661170@trisector>
 <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>
 <20190510213646.4a340f0d@parabola>
 <CAAmySGMETt9aD+RfmU6qCVhGHzqiE7q+yFk0iHVuvkT9oR9R=Q@mail.gmail.com>
 <884E5EBF-D596-4588-B328-C38C18ED4BC1@uthscsa.edu>
Message-ID: <CAAmySGM54DYLPzv+UNrvNSQcK35Lt5CyfnSD08YWx3wcZ-Y11w@mail.gmail.com>

On Sat, May 11, 2019 at 8:28 AM Wang, Zhu <wangz1 at uthscsa.edu> wrote:

>
> I am open to whatever suggestions but I am not aware a simple closed-form
> solution for my original question.
>
>
It would help if you could clarify your original question a bit more, but
for at least the main three GLMs, there are closed form solutions, based on
means of y. Assuming canonical links,

- Gaussian: intercept = mean(y)
- Logistic: intercept = logit(mean(y))  [Note that you have problems here
if your data is all 0 or all 1]
- Poisson: intercept = log(mean(y)) [You have problems here if your data is
all 0]

(Check my math on these, but I'm pretty sure this is right.)

Like I said above, this gets trickier if you add observation weights or
offsets, but the same ideas work.

Stepping back to the statistical theory: GLMs predict the mean of y,
conditional on x. If x doesn't vary (intercept only model), then the GLM is
just predicting the mean of y and the MLE for the mean of y is exactly that
under standard GLM assumptions - the sample mean of y.

We then just have to use the link function and its inverse to transform to
and from the observation space (where mean(y) lives) and the linear
predictor space (where the intercept term naturally lives).

Michael

	[[alternative HTML version deleted]]


From w@ngz1 @end|ng |rom uth@c@@@edu  Sat May 11 18:10:40 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Sat, 11 May 2019 16:10:40 +0000
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <CAAmySGM54DYLPzv+UNrvNSQcK35Lt5CyfnSD08YWx3wcZ-Y11w@mail.gmail.com>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
 <20190506121422.7d661170@trisector>
 <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>
 <20190510213646.4a340f0d@parabola>
 <CAAmySGMETt9aD+RfmU6qCVhGHzqiE7q+yFk0iHVuvkT9oR9R=Q@mail.gmail.com>
 <884E5EBF-D596-4588-B328-C38C18ED4BC1@uthscsa.edu>,
 <CAAmySGM54DYLPzv+UNrvNSQcK35Lt5CyfnSD08YWx3wcZ-Y11w@mail.gmail.com>
Message-ID: <64718E0E-4E30-4439-A02A-07BB622504FD@uthscsa.edu>

Thanks Michael.

I also need an intercept-only negative binomial model with unknown scale parameter. So my thought was on borrowing some codes that already existed. I think Ivan's solution is an excellent one and can be extended to other scenarios.

Best,

Zhu

On May 11, 2019, at 9:48 AM, Michael Weylandt <michael.weylandt at gmail.com<mailto:michael.weylandt at gmail.com>> wrote:

On Sat, May 11, 2019 at 8:28 AM Wang, Zhu <wangz1 at uthscsa.edu<mailto:wangz1 at uthscsa.edu>> wrote:

I am open to whatever suggestions but I am not aware a simple closed-form solution for my original question.


It would help if you could clarify your original question a bit more, but for at least the main three GLMs, there are closed form solutions, based on means of y. Assuming canonical links,

- Gaussian: intercept = mean(y)
- Logistic: intercept = logit(mean(y))  [Note that you have problems here if your data is all 0 or all 1]
- Poisson: intercept = log(mean(y)) [You have problems here if your data is all 0]

(Check my math on these, but I'm pretty sure this is right.)

Like I said above, this gets trickier if you add observation weights or offsets, but the same ideas work.

Stepping back to the statistical theory: GLMs predict the mean of y, conditional on x. If x doesn't vary (intercept only model), then the GLM is just predicting the mean of y and the MLE for the mean of y is exactly that under standard GLM assumptions - the sample mean of y.

We then just have to use the link function and its inverse to transform to and from the observation space (where mean(y) lives) and the linear predictor space (where the intercept term naturally lives).

Michael

	[[alternative HTML version deleted]]


From c@g|||e@p|e @end|ng |rom gm@||@com  Mon May 13 09:22:23 2019
From: c@g|||e@p|e @end|ng |rom gm@||@com (Colin Gillespie)
Date: Mon, 13 May 2019 08:22:23 +0100
Subject: [R-pkg-devel] Registered S3 methods from standard package
Message-ID: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>

Dear All,

I'm developing a small package to make plotting methods a little bit
nicer looking:

https://github.com/jumpingrivers/prettyB/

The general idea is to replace plot.default() with an alternative
(matching all arguments) and export. This would allow users to simply
load the package and use base graphics functions as normal, but get a
pretty graph.

The general pattern I follow is:

https://github.com/jumpingrivers/prettyB/blob/master/R/plot.R#L23

which then includes S3method(plot,default) in my NAMESPACE file. When
building and checking the package I get

Registered S3 methods from standard package(s) overwritten by 'prettyB':
    method          from
    plot.default    graphics

which CRAN does not permit.

Question: Is it possible to achieve the functionality I'm after
(replacing the default plot.default() functions) while following the
CRAN rules?

Thanks

Colin


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Mon May 13 09:57:11 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 13 May 2019 07:57:11 +0000
Subject: [R-pkg-devel] Registered S3 methods from standard package
In-Reply-To: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>
References: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F71B3A7@MBXP02.ds.man.ac.uk>

> The general idea is to replace plot.default() with an alternative
(matching all arguments) and export. This would allow users to simply
load the package and use base graphics functions as normal, but get a
pretty graph.

Have you checked that this actually works? Many base R functions do some preparation and call directly plot.default(), so they both bypass the method and see graphics::plot.default, not yours, see e.g. plot.ts().


Georgi Boshnakov


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Colin Gillespie
Sent: 13 May 2019 08:22
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Registered S3 methods from standard package

Dear All,

I'm developing a small package to make plotting methods a little bit
nicer looking:

https://github.com/jumpingrivers/prettyB/

The general idea is to replace plot.default() with an alternative
(matching all arguments) and export. This would allow users to simply
load the package and use base graphics functions as normal, but get a
pretty graph.

The general pattern I follow is:

https://github.com/jumpingrivers/prettyB/blob/master/R/plot.R#L23

which then includes S3method(plot,default) in my NAMESPACE file. When
building and checking the package I get

Registered S3 methods from standard package(s) overwritten by 'prettyB':
    method          from
    plot.default    graphics

which CRAN does not permit.

Question: Is it possible to achieve the functionality I'm after
(replacing the default plot.default() functions) while following the
CRAN rules?

Thanks

Colin

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@g|||e@p|e @end|ng |rom gm@||@com  Mon May 13 10:05:21 2019
From: c@g|||e@p|e @end|ng |rom gm@||@com (Colin Gillespie)
Date: Mon, 13 May 2019 09:05:21 +0100
Subject: [R-pkg-devel] Registered S3 methods from standard package
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F71B3A7@MBXP02.ds.man.ac.uk>
References: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F71B3A7@MBXP02.ds.man.ac.uk>
Message-ID: <CADbDLZ=DdzW0v4c-_g8ttvGKqFho2afBg3VsBW7xXYkBt5=ikw@mail.gmail.com>

> Have you checked that this actually works? Many base R functions do some preparation and call directly plot.default(), so they both bypass the method and see graphics::plot.default, not yours, see e.g. plot.ts().

It doesn't work for all plot.XXX for the reasons you describe. But my
use case was a bit more modest than that, I just want to make the
standard plotting functions for numeric data a bit nicer.

devtools::install_github("jumpingrivers/prettyB")
library(prettyB)
plot(rnorm(10), rnorm(10), xlab ="x", main = "A title")

But, if a function just calls `plot()` again, everything works, e.g.
plot.lm is fine

plot(lm(1:10 ~ rnorm(10)), which = 1)

Thanks
>
>
> Georgi Boshnakov
>
>
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Colin Gillespie
> Sent: 13 May 2019 08:22
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] Registered S3 methods from standard package
>
> Dear All,
>
> I'm developing a small package to make plotting methods a little bit
> nicer looking:
>
> https://github.com/jumpingrivers/prettyB/
>
> The general idea is to replace plot.default() with an alternative
> (matching all arguments) and export. This would allow users to simply
> load the package and use base graphics functions as normal, but get a
> pretty graph.
>
> The general pattern I follow is:
>
> https://github.com/jumpingrivers/prettyB/blob/master/R/plot.R#L23
>
> which then includes S3method(plot,default) in my NAMESPACE file. When
> building and checking the package I get
>
> Registered S3 methods from standard package(s) overwritten by 'prettyB':
>     method          from
>     plot.default    graphics
>
> which CRAN does not permit.
>
> Question: Is it possible to achieve the functionality I'm after
> (replacing the default plot.default() functions) while following the
> CRAN rules?
>
> Thanks
>
> Colin
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @eb@meyer @end|ng |rom |@u@de  Mon May 13 10:56:54 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Mon, 13 May 2019 10:56:54 +0200
Subject: [R-pkg-devel] Registered S3 methods from standard package
In-Reply-To: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>
References: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>
Message-ID: <d565ada9-2d82-38f1-ea05-6ac9e754ab85@fau.de>

I think your package can be useful. However, I'm with CRAN here in that
I would not want my standard graphics output to be changed just because
some package ("prettyB") gets loaded, which could happen
*unintentionally* as a dependency (or a dependency of a dependency, ...)
of another package.

What about some kind of prettyB::enable_prettyB() function which does

> registerS3method("plot", "default", prettyB::plot.default, asNamespace("graphics"))

similar to delayed method registration (see, e.g.,
https://github.com/r-lib/vctrs/blob/master/R/register-s3.R), so that a
user needs to switch to "prettyB" graphics explicitly ?

Resetting to graphics::plot.default should be made possible as well.

The question remains whether registerS3method() can be used at all,
since the help says:

> Internal namespace support functions.  Not intended to be called
>      directly, and only visible because of the special nature of the
>      ?base? namespace.

Cheers,

	Sebastian


Am 13.05.19 um 09:22 schrieb Colin Gillespie:
> Dear All,
> 
> I'm developing a small package to make plotting methods a little bit
> nicer looking:
> 
> https://github.com/jumpingrivers/prettyB/
> 
> The general idea is to replace plot.default() with an alternative
> (matching all arguments) and export. This would allow users to simply
> load the package and use base graphics functions as normal, but get a
> pretty graph.
> 
> The general pattern I follow is:
> 
> https://github.com/jumpingrivers/prettyB/blob/master/R/plot.R#L23
> 
> which then includes S3method(plot,default) in my NAMESPACE file. When
> building and checking the package I get
> 
> Registered S3 methods from standard package(s) overwritten by 'prettyB':
>     method          from
>     plot.default    graphics
> 
> which CRAN does not permit.
> 
> Question: Is it possible to achieve the functionality I'm after
> (replacing the default plot.default() functions) while following the
> CRAN rules?
> 
> Thanks
> 
> Colin
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon May 13 12:38:42 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 13 May 2019 06:38:42 -0400
Subject: [R-pkg-devel] Registered S3 methods from standard package
In-Reply-To: <d565ada9-2d82-38f1-ea05-6ac9e754ab85@fau.de>
References: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>
 <d565ada9-2d82-38f1-ea05-6ac9e754ab85@fau.de>
Message-ID: <50456c51-dcc4-904f-32cc-0cbfd67b7f4f@gmail.com>

On 13/05/2019 4:56 a.m., Sebastian Meyer wrote:
> I think your package can be useful. However, I'm with CRAN here in that
> I would not want my standard graphics output to be changed just because
> some package ("prettyB") gets loaded, which could happen
> *unintentionally* as a dependency (or a dependency of a dependency, ...)
> of another package.
> 
> What about some kind of prettyB::enable_prettyB() function which does
> 
>> registerS3method("plot", "default", prettyB::plot.default, asNamespace("graphics"))
> 
> similar to delayed method registration (see, e.g.,
> https://github.com/r-lib/vctrs/blob/master/R/register-s3.R), so that a
> user needs to switch to "prettyB" graphics explicitly ?

Or more simply:  call the method prettyBplot.

Duncan Murdoch

> 
> Resetting to graphics::plot.default should be made possible as well.
> 
> The question remains whether registerS3method() can be used at all,
> since the help says:
> 
>> Internal namespace support functions.  Not intended to be called
>>       directly, and only visible because of the special nature of the
>>       ?base? namespace.
> 
> Cheers,
> 
> 	Sebastian
> 
> 
> Am 13.05.19 um 09:22 schrieb Colin Gillespie:
>> Dear All,
>>
>> I'm developing a small package to make plotting methods a little bit
>> nicer looking:
>>
>> https://github.com/jumpingrivers/prettyB/
>>
>> The general idea is to replace plot.default() with an alternative
>> (matching all arguments) and export. This would allow users to simply
>> load the package and use base graphics functions as normal, but get a
>> pretty graph.
>>
>> The general pattern I follow is:
>>
>> https://github.com/jumpingrivers/prettyB/blob/master/R/plot.R#L23
>>
>> which then includes S3method(plot,default) in my NAMESPACE file. When
>> building and checking the package I get
>>
>> Registered S3 methods from standard package(s) overwritten by 'prettyB':
>>      method          from
>>      plot.default    graphics
>>
>> which CRAN does not permit.
>>
>> Question: Is it possible to achieve the functionality I'm after
>> (replacing the default plot.default() functions) while following the
>> CRAN rules?
>>
>> Thanks
>>
>> Colin
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@g|||e@p|e @end|ng |rom gm@||@com  Mon May 13 13:26:50 2019
From: c@g|||e@p|e @end|ng |rom gm@||@com (Colin Gillespie)
Date: Mon, 13 May 2019 12:26:50 +0100
Subject: [R-pkg-devel] Registered S3 methods from standard package
In-Reply-To: <50456c51-dcc4-904f-32cc-0cbfd67b7f4f@gmail.com>
References: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>
 <d565ada9-2d82-38f1-ea05-6ac9e754ab85@fau.de>
 <50456c51-dcc4-904f-32cc-0cbfd67b7f4f@gmail.com>
Message-ID: <CADbDLZmqXiXKXQUe4wD7kZn-iAAA5NJP8Gu1vZK-rDz7ykQnFQ@mail.gmail.com>

Dr Colin Gillespie

>
> Or more simply:  call the method prettyBplot.

Rightly (but perhaps wrongly) I was trying for a simple method where
the plots just change. If prettyB loaded, the plots just look a little
nicer. If prettyB isn't available, then the plot function works as normal.

So two possible options are:

  * registerS3method - I suspect this isn't permitted.
  * Don't override plot.default(), but override other methods. E.g.
boxplot.list() and plot.numeric(). But is this going against the
spirit of the law?

Thanks

Colin

>
> Duncan Murdoch
>
> >
> > Resetting to graphics::plot.default should be made possible as well.
> >
> > The question remains whether registerS3method() can be used at all,
> > since the help says:
> >
> >> Internal namespace support functions.  Not intended to be called
> >>       directly, and only visible because of the special nature of the
> >>       ?base? namespace.
> >
> > Cheers,
> >
> >       Sebastian
> >
> >
> > Am 13.05.19 um 09:22 schrieb Colin Gillespie:
> >> Dear All,
> >>
> >> I'm developing a small package to make plotting methods a little bit
> >> nicer looking:
> >>
> >> https://github.com/jumpingrivers/prettyB/
> >>
> >> The general idea is to replace plot.default() with an alternative
> >> (matching all arguments) and export. This would allow users to simply
> >> load the package and use base graphics functions as normal, but get a
> >> pretty graph.
> >>
> >> The general pattern I follow is:
> >>
> >> https://github.com/jumpingrivers/prettyB/blob/master/R/plot.R#L23
> >>
> >> which then includes S3method(plot,default) in my NAMESPACE file. When
> >> building and checking the package I get
> >>
> >> Registered S3 methods from standard package(s) overwritten by 'prettyB':
> >>      method          from
> >>      plot.default    graphics
> >>
> >> which CRAN does not permit.
> >>
> >> Question: Is it possible to achieve the functionality I'm after
> >> (replacing the default plot.default() functions) while following the
> >> CRAN rules?
> >>
> >> Thanks
> >>
> >> Colin
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |jh988488 @end|ng |rom gm@||@com  Mon May 13 16:58:03 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Mon, 13 May 2019 23:58:03 +0900
Subject: [R-pkg-devel] "unable to verify current time" in R CMD check
In-Reply-To: <CALEXWq3R6aiLJWnO8NYBpVZET3b37yjwD2sjtVyuWE2c7D0-=A@mail.gmail.com>
References: <CACSCokcyibqBt6ZXF6j8RRQJz8_6bh+jzW1SSnv2m9PY2OJc_Q@mail.gmail.com>
 <CALEXWq3R6aiLJWnO8NYBpVZET3b37yjwD2sjtVyuWE2c7D0-=A@mail.gmail.com>
Message-ID: <CACSCokdtSZts_vTxDq0gSoXa36kLD4twrr2SJ+8-oHiaybqsPQ@mail.gmail.com>

Sorry for late to reply.

I didn't try it on win-builder and r-hub neither.
This NOTE came out on my personal computer.

I'll try it on them.

Thank you for your help.


On Fri, 10 May 2019 at 23:52, I?aki Ucar <iucar at fedoraproject.org> wrote:

> On Fri, 10 May 2019 at 13:22, Juhee Lee <ljh988488 at gmail.com> wrote:
> >
> > Hi, I'm checking my package for CRAN.
> >
> > In fact, I already complete checking CMD in 3.5.3ver.
> > but for the latest ver., 3.6.0, I get  '1 note' when checking CMD.
> >
> > I wonder how I can solve this note.
> >
> > > checking for future file timestamps ... NOTE
> >   unable to verify current time
>
> Where do you get this NOTE? On CRAN? On your computer? Did you try on
> win-builder and/or r-hub?
>
> I?aki
>

	[[alternative HTML version deleted]]


From p@ve| @end|ng |rom uow@edu@@u  Tue May 14 02:11:16 2019
From: p@ve| @end|ng |rom uow@edu@@u (Pavel Krivitsky)
Date: Tue, 14 May 2019 00:11:16 +0000
Subject: [R-pkg-devel] Three-argument S3method declaration does not seem to
 affect dispatching from inside the package.
Message-ID: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>

Dear All,

I've run into this while updating a package with unfortunately named
legacy functions. It seems like something that might be worth changing
in R, and I want to get a sense of whether this is a problem before
submitting a report to the Bugzilla.

It appears that the 3-argument form of S3method() in NAMESPACE controls
dispatching when the generic is called from outside the package that
defines it but not when it's called from inside the package that
defines it.

For example the attached minimal package has four R functions:

   gen <- function(object, ...)
     UseMethod("gen")

   .gen.formula <- function(object, ...){
     message("I am the S3method-declared method.")
   }

   gen.formula <- function(object, ...){
     message("I am the function with an unfortunate name.")
   }

   test_me <- function(){
     message("I am the tester. Which one will I call?")
     gen(a~b)
   }

and the following NAMESPACE:

   export(gen)
   S3method(gen, formula, .gen.formula)
   export(gen.formula)
   export(test_me)

Now,

   library(anRpackage)
   example(test_me)

results in the following:

   test_m> test_me
   function(){
     message("I am the tester. Which one will I call?")
     gen(a~b)
   }
   <bytecode: 0x562fb9d32d68>
   <environment: namespace:anRpackage>

   test_m> test_me() # Calls gen.formula()
   I am the tester. Which one will I call?
   I am the function with an unfortunate name.

   test_m> gen(a~b) # Calls .gen.formula()
   I am the S3method-declared method.

So, calling the same generic function with the same class results in
different dispatching behaviour depending on whether the call is from
within the package doing the export or from the outside.

This behaviour appears to be as documented ( 
https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Method-dispatching
), but it seems to me that if S3method() is allowed to give the name of
the method to be used, then it should should override the name-based
dispatching both inside and outside the package.

			Any thoughts?
			Pavel Krivitsky

-- 
Pavel Krivitsky
Lecturer in Statistics
National Institute of Applied Statistics Research Australia (NIASRA)
School of Mathematics and Applied Statistics | Building 39C Room 154
University of Wollongong NSW 2522 Australia
T +61 2 4221 3713
Web (NIASRA): http://niasra.uow.edu.au/index.html
Web (Personal): http://www.krivitsky.net/research
ORCID: 0000-0002-9101-3362

NOTICE: This email is intended for the addressee named and may contain
confidential information. If you are not the intended recipient, please
delete it and notify the sender. Please consider the environment before
printing this email.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: anRpackage_1.0.tar.gz
Type: application/x-compressed-tar
Size: 750 bytes
Desc: anRpackage_1.0.tar.gz
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190514/cb80a5b6/attachment.bin>

From |uc@r @end|ng |rom |edor@project@org  Tue May 14 11:33:00 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 14 May 2019 11:33:00 +0200
Subject: [R-pkg-devel] 
 Three-argument S3method declaration does not seem to
 affect dispatching from inside the package.
In-Reply-To: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>
References: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>
Message-ID: <CALEXWq058Wg0oskeaFAjPdptTEjVMWLFbUr+FeBwdKwP93T=Kw@mail.gmail.com>

CCing r-devel.

On Tue, 14 May 2019 at 02:11, Pavel Krivitsky <pavel at uow.edu.au> wrote:
>
> Dear All,
>
> I've run into this while updating a package with unfortunately named
> legacy functions. It seems like something that might be worth changing
> in R, and I want to get a sense of whether this is a problem before
> submitting a report to the Bugzilla.
>
> It appears that the 3-argument form of S3method() in NAMESPACE controls
> dispatching when the generic is called from outside the package that
> defines it but not when it's called from inside the package that
> defines it.
>
> For example the attached minimal package has four R functions:
>
>    gen <- function(object, ...)
>      UseMethod("gen")
>
>    .gen.formula <- function(object, ...){
>      message("I am the S3method-declared method.")
>    }
>
>    gen.formula <- function(object, ...){
>      message("I am the function with an unfortunate name.")
>    }
>
>    test_me <- function(){
>      message("I am the tester. Which one will I call?")
>      gen(a~b)
>    }
>
> and the following NAMESPACE:
>
>    export(gen)
>    S3method(gen, formula, .gen.formula)
>    export(gen.formula)
>    export(test_me)
>
> Now,
>
>    library(anRpackage)
>    example(test_me)
>
> results in the following:
>
>    test_m> test_me
>    function(){
>      message("I am the tester. Which one will I call?")
>      gen(a~b)
>    }
>    <bytecode: 0x562fb9d32d68>
>    <environment: namespace:anRpackage>
>
>    test_m> test_me() # Calls gen.formula()
>    I am the tester. Which one will I call?
>    I am the function with an unfortunate name.
>
>    test_m> gen(a~b) # Calls .gen.formula()
>    I am the S3method-declared method.
>
> So, calling the same generic function with the same class results in
> different dispatching behaviour depending on whether the call is from
> within the package doing the export or from the outside.

It does not depend on whether you export gen.formula() or not. When
you call gen() inside your package, the S3 dispatch mechanism finds a
method gen.formula defined in that environment (the package's
namespace), so it is called.

> This behaviour appears to be as documented (
> https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Method-dispatching
> ), but it seems to me that if S3method() is allowed to give the name of
> the method to be used, then it should should override the name-based
> dispatching both inside and outside the package.
>
> Any thoughts?

Note that disabling name-based dispatch implies two things: 1) the
inability to override your method by defining gen.formula in the
global environment, and 2) another package can break yours (i.e.,
internal calls to gen()) by registering an S3 method for gen() after
you. I don't think that's a good idea.

I?aki


From chr|@t|@n@pe|kert @end|ng |rom t-on||ne@de  Tue May 14 11:36:15 2019
From: chr|@t|@n@pe|kert @end|ng |rom t-on||ne@de (Christian Peikert)
Date: Tue, 14 May 2019 11:36:15 +0200
Subject: [R-pkg-devel] data.frame compression and no visible global function
Message-ID: <098c3721-dccb-cd45-5522-62f0ff1c1c2d@t-online.de>

Dear all,
I have tried to upload my R-package to CRAN but this package was sadly 
reject due to a Warning and a Note. I already know this warning/note but 
I could find out to solve this.

* checking data for ASCII and uncompressed saves ... WARNING
 ? Warning: large data files saved inefficiently:
 ??? ??? size ??? ??? ASCII ??? compress
 ? cellr_morgenstern_et_al_2017.rda??? ?? 544Kb??? TRUE??? ??? xz
 ? mcp_reimann_et_al_2017.rda?????? ??? ??? 154Kb??? TRUE??? ??? xz

These two data frames are required example datasets. I have used the 
following save function:

save(cellr_morgenstern_et_al_2017, 
file="cellr_morgenstern_et_al_2017.rda",compress='xz', 
compression_level=9 ,ascii = TRUE)
save(mcp_reimann_et_al_2017, 
file="mcp_reimann_et_al_2017.rda",compress='xz', compression_level=9 
,ascii = TRUE)


* checking R code for possible problems ... [40s] NOTE
runExample03: no visible global function definition for 'shinyClustPro'

shinyApp is a function defined in a source R file which is loaded by the 
source function. Because this is an example function, it should not be a 
?visible? function in the package.

appDir <- system.file("shiny-examples", "03", package = "clustpro")
moduleDir <- system.file("shiny_module", package = "clustpro") 
source(file.path(moduleDir,"module_shiny_clustpro.R"))
?.
?..
shinyClustPro(df_proteomics, data_columns = data_columns, info_columns = 
info_columns)

If anyone of you could help me with this problems that would be great.

Cheers,
Christian

P.S.:
Because I am moving followed by vacation for a week, I will not be able 
to reply to e-mails directly. Please answer also to 
friedel.drepper at biologie.uni-freiburg.de


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue May 14 12:13:27 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 14 May 2019 12:13:27 +0200
Subject: [R-pkg-devel] 
 data.frame compression and no visible global function
In-Reply-To: <098c3721-dccb-cd45-5522-62f0ff1c1c2d@t-online.de>
References: <098c3721-dccb-cd45-5522-62f0ff1c1c2d@t-online.de>
Message-ID: <6171a713-5732-5081-57b5-17f528e95cb4@statistik.tu-dortmund.de>



On 14.05.2019 11:36, Christian Peikert wrote:
> Dear all,
> I have tried to upload my R-package to CRAN but this package was sadly
> reject due to a Warning and a Note. I already know this warning/note but
> I could find out to solve this.
> 
> * checking data for ASCII and uncompressed saves ... WARNING
>   ? Warning: large data files saved inefficiently:
>   ??? ??? size ??? ??? ASCII ??? compress
>   ? cellr_morgenstern_et_al_2017.rda??? ?? 544Kb??? TRUE??? ??? xz
>   ? mcp_reimann_et_al_2017.rda?????? ??? ??? 154Kb??? TRUE??? ??? xz
> 
> These two data frames are required example datasets. I have used the
> following save function:
> 
> save(cellr_morgenstern_et_al_2017,
> file="cellr_morgenstern_et_al_2017.rda",compress='xz',
> compression_level=9 ,ascii = TRUE)
> save(mcp_reimann_et_al_2017,
> file="mcp_reimann_et_al_2017.rda",compress='xz', compression_level=9
> ,ascii = TRUE)

Do not use ascii=TRUE.


> 
> 
> * checking R code for possible problems ... [40s] NOTE
> runExample03: no visible global function definition for 'shinyClustPro'
> 
> shinyApp is a function defined in a source R file which is loaded by the
> source function. Because this is an example function, it should not be a
> ?visible? function in the package.
> 
> appDir <- system.file("shiny-examples", "03", package = "clustpro")
> moduleDir <- system.file("shiny_module", package = "clustpro")
> source(file.path(moduleDir,"module_shiny_clustpro.R"))
> ?.
> ?..
> shinyClustPro(df_proteomics, data_columns = data_columns, info_columns =
> info_columns)

If it is an example function that should not be visible, how does it 
make sense to call it then?

Best,
Uwe Ligges




> 
> If anyone of you could help me with this problems that would be great.
> 
> Cheers,
> Christian
> 
> P.S.:
> Because I am moving followed by vacation for a week, I will not be able
> to reply to e-mails directly. Please answer also to
> friedel.drepper at biologie.uni-freiburg.de
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |uc@r @end|ng |rom |edor@project@org  Tue May 14 12:17:57 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 14 May 2019 12:17:57 +0200
Subject: [R-pkg-devel] 
 data.frame compression and no visible global function
In-Reply-To: <098c3721-dccb-cd45-5522-62f0ff1c1c2d@t-online.de>
References: <098c3721-dccb-cd45-5522-62f0ff1c1c2d@t-online.de>
Message-ID: <CALEXWq3-ZFY0pLA=rtGmH1U3XNZMhhRS5H=K-ShThbZx9G+iyQ@mail.gmail.com>

On Tue, 14 May 2019 at 12:08, Christian Peikert
<christian.peikert at t-online.de> wrote:
>
> Dear all,
> I have tried to upload my R-package to CRAN but this package was sadly
> reject due to a Warning and a Note. I already know this warning/note but
> I could find out to solve this.
>
> * checking data for ASCII and uncompressed saves ... WARNING
>    Warning: large data files saved inefficiently:
>          size         ASCII     compress
>    cellr_morgenstern_et_al_2017.rda       544Kb    TRUE        xz
>    mcp_reimann_et_al_2017.rda               154Kb    TRUE        xz
>
> These two data frames are required example datasets. I have used the
> following save function:
>
> save(cellr_morgenstern_et_al_2017,
> file="cellr_morgenstern_et_al_2017.rda",compress='xz',
> compression_level=9 ,ascii = TRUE)
> save(mcp_reimann_et_al_2017,
> file="mcp_reimann_et_al_2017.rda",compress='xz', compression_level=9
> ,ascii = TRUE)

Try tools::resaveRdaFiles instead.

> * checking R code for possible problems ... [40s] NOTE
> runExample03: no visible global function definition for 'shinyClustPro'
>
> shinyApp is a function defined in a source R file which is loaded by the
> source function. Because this is an example function, it should not be a
> ?visible? function in the package.
>
> appDir <- system.file("shiny-examples", "03", package = "clustpro")
> moduleDir <- system.file("shiny_module", package = "clustpro")
> source(file.path(moduleDir,"module_shiny_clustpro.R"))
> ?.
> ?..
> shinyClustPro(df_proteomics, data_columns = data_columns, info_columns =
> info_columns)

You can add a simple shinyClustPro <- NULL before sourcing the file
(and therefore, that variable is rewritten). If showing that line
annoys you, put it inside a \dontshow{} block (but not sure if this
could raise another NOTE).

I?aki


From p@ve| @end|ng |rom uow@edu@@u  Tue May 14 12:31:40 2019
From: p@ve| @end|ng |rom uow@edu@@u (Pavel Krivitsky)
Date: Tue, 14 May 2019 10:31:40 +0000
Subject: [R-pkg-devel] 
 Three-argument S3method declaration does not seem to
 affect dispatching from inside the package.
In-Reply-To: <CALEXWq058Wg0oskeaFAjPdptTEjVMWLFbUr+FeBwdKwP93T=Kw@mail.gmail.com>
References: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>
 <CALEXWq058Wg0oskeaFAjPdptTEjVMWLFbUr+FeBwdKwP93T=Kw@mail.gmail.com>
Message-ID: <14d531d671791b51683b71ee0eece1c9a29c374d.camel@uow.edu.au>

Hi, I?aki,

Thanks for looking into this.

On Tue, 2019-05-14 at 11:33 +0200, I?aki Ucar wrote:
> > So, calling the same generic function with the same class results
> > in different dispatching behaviour depending on whether the call is
> > from within the package doing the export or from the outside.
> 
> It does not depend on whether you export gen.formula() or not. When
> you call gen() inside your package, the S3 dispatch mechanism finds a
> method gen.formula defined in that environment (the package's
> namespace), so it is called.

Indeed, this is the case. The issue is that when both are available and
exported, S3method takes precedence outside the package but function
name takes precedence inside the package.

> Note that disabling name-based dispatch implies two things: 1) the
> inability to override your method by defining gen.formula in the
> global environment, and 2) another package can break yours (i.e.,
> internal calls to gen()) by registering an S3 method for gen() after
> you.

That's a good point.

   > library(anRpackage)
   > gen(a~b)
   I am the S3method-declared method.
   > gen.formula <- function(object, ...){message("I am the externally declared method.")}
   > gen(a~b)
   I am the externally declared method.
   > test_me()
   I am the tester. Which one will I call?
   I am the function with an unfortunate name.

In that case, I think that the least surprising behaviour would
prioritise declarations and methods "nearer" to the caller over those
"farther" from the caller (where "caller" is the caller of the generic,
not the generic itself), and, within that, give precedence to S3method
declarations over function names.

That is, for a call from inside a package, the order of precedence
would be as follows:
   1. S3method() in that package's NAMESPACE.
   2. Appropriately named function?in that package (exported or not).
   3. Appropriately named function in calling environment (which may be
      GlobalEnv).
   4. S3method() in other loaded packages' NAMESPACEs.
   5. Appropriately named functions exported by other loaded packages'
      NAMESPACEs.

For a call from outside a package, the precedence is the same, but 1
and 2 are not relevant.

As far as I can tell, this is the current behaviour except for the
relative ordering of 1 and 2.

				Best,
				Pavel

-- 
Pavel Krivitsky
Lecturer in Statistics
National Institute of Applied Statistics Research Australia (NIASRA)
School of Mathematics and Applied Statistics | Building 39C Room 154
University of Wollongong NSW 2522 Australia
T +61 2 4221 3713
Web (NIASRA): http://niasra.uow.edu.au/index.html
Web (Personal): http://www.krivitsky.net/research
ORCID: 0000-0002-9101-3362

NOTICE: This email is intended for the addressee named and may contain
confidential information. If you are not the intended recipient, please
delete it and notify the sender. Please consider the environment before
printing this email.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: anRpackage_1.0.tar.gz
Type: application/x-compressed-tar
Size: 750 bytes
Desc: anRpackage_1.0.tar.gz
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190514/c7e72e56/attachment.bin>

From |uc@r @end|ng |rom |edor@project@org  Tue May 14 12:50:40 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 14 May 2019 12:50:40 +0200
Subject: [R-pkg-devel] 
 Three-argument S3method declaration does not seem to
 affect dispatching from inside the package.
In-Reply-To: <14d531d671791b51683b71ee0eece1c9a29c374d.camel@uow.edu.au>
References: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>
 <CALEXWq058Wg0oskeaFAjPdptTEjVMWLFbUr+FeBwdKwP93T=Kw@mail.gmail.com>
 <14d531d671791b51683b71ee0eece1c9a29c374d.camel@uow.edu.au>
Message-ID: <CALEXWq02kZdw79BWJiAtj-HXMnCeX_PRF_yFTT6DpNCn=MxPAw@mail.gmail.com>

On Tue, 14 May 2019 at 12:31, Pavel Krivitsky <pavel at uow.edu.au> wrote:
>
> > Note that disabling name-based dispatch implies two things: 1) the
> > inability to override your method by defining gen.formula in the
> > global environment, and 2) another package can break yours (i.e.,
> > internal calls to gen()) by registering an S3 method for gen() after
> > you.
>
> That's a good point.
>
>    > library(anRpackage)
>    > gen(a~b)
>    I am the S3method-declared method.
>    > gen.formula <- function(object, ...){message("I am the externally declared method.")}
>    > gen(a~b)
>    I am the externally declared method.
>    > test_me()
>    I am the tester. Which one will I call?
>    I am the function with an unfortunate name.
>
> In that case, I think that the least surprising behaviour would
> prioritise declarations and methods "nearer" to the caller over those
> "farther" from the caller (where "caller" is the caller of the generic,
> not the generic itself), and, within that, give precedence to S3method
> declarations over function names.

The thing is that, in R, "nearer" means "the calling environment" (and
then, other things). When you call test_me(), the calling environment
for gen() is the package namespace. When you call gen() directly, then
the calling environment is the global environment. So what happens
here follows the principle of least astonishment.

The issue here is that you are registering a non-standard name
(.gen.formula) for that generic and then defining what would be the
standard name (gen.formula) for... what purpose? IMHO, this is a bad
practice and should be avoided.

> That is, for a call from inside a package, the order of precedence
> would be as follows:
>    1. S3method() in that package's NAMESPACE.
>    2. Appropriately named function in that package (exported or not).
>    3. Appropriately named function in calling environment (which may be
>       GlobalEnv).
>    4. S3method() in other loaded packages' NAMESPACEs.
>    5. Appropriately named functions exported by other loaded packages'
>       NAMESPACEs.
>
> For a call from outside a package, the precedence is the same, but 1
> and 2 are not relevant.
>
> As far as I can tell, this is the current behaviour except for the
> relative ordering of 1 and 2.

Nope. Current behaviour (see details in ?UseMethod) is:

"To support this, UseMethod and NextMethod search for methods in two
places: in the environment in which the generic function is called,
and in the registration data base for the environment in which the
generic is defined".

Changing this would probably break a lot of things out there.

I?aki


From j|ox @end|ng |rom mcm@@ter@c@  Tue May 14 16:28:17 2019
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Tue, 14 May 2019 14:28:17 +0000
Subject: [R-pkg-devel] advice about errorCondition() function in the Rcmdr
 package
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC836BB2647@FHSDB2D11-2.csu.mcmaster.ca>

Dear list members,

I noticed that there's a name clash between errorCondition() in the Rcmdr package and the new function by the same name in the base package in R 3.6.0. errorCondition() has been in the Rcmdr package for many years and is used extensively -- literally dozens of times. It's exported because it's also used in Rcmdr plug-in packages. The function checks for errors, prints an error message, cleans up after the error, and restarts a dialog.

For the time-being, I've renamed the function as ErrorCondition() (with an uppercase "E") in the development version of the Rcmdr package, to be released in late summer, but have retained and deprecated errorCondition() because I expect that removing it will break most or even all Rcmdr plug-in packages, but I also suspect that masking base::errorCondition() can be problematic.

Can anyone suggest the best way to proceed?

Best,
 John

--------------------------------------
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: socialsciences.mcmaster.ca/jfox/


From h@w|ckh@m @end|ng |rom gm@||@com  Tue May 14 17:23:49 2019
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Tue, 14 May 2019 10:23:49 -0500
Subject: [R-pkg-devel] CRAN student assistants
Message-ID: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>

Hi all,

Several people on my team have received responses to their CRAN
submissions from new members of the CRAN team who appear to be student
assistants (judging from their job titles: "Studentischer
administrativer Mitarbeiter"). From the outside, they appear to be
exercising editorial control[^1] and conducting design reviews[^2].

CRAN is a critical piece of R community infrastructure, and I am sure
these students have been surrounded by the proper checks and balances,
but it's not obvious what their role is from the outside. I'd really
appreciate knowing a little more about them:

* Who are they?

* Are they paid employees or volunteers?

* What is their scope of work?

* How are they trained?

* If we believe that they have made a mistake, how do we request
  review from a senior CRAN member?

* They appear to be able to apply additional discretionary criteria
  that are not included in R CMD check or documented in the CRAN policies.
  Is this true? If so, what is the scope of these additional checks?

Hadley

[^1]: The devoid package was rejected because the student assistant
did not understand the purpose of the package.

[^2]: The gargle package was rejected because the student assistant
believed that the use of cat() was incorrect. It was not.

-- 
http://hadley.nz


From Jor|@@Mey@ @end|ng |rom ugent@be  Wed May 15 11:06:11 2019
From: Jor|@@Mey@ @end|ng |rom ugent@be (Joris Meys)
Date: Wed, 15 May 2019 11:06:11 +0200
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
Message-ID: <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>

Dear Hadley,

given you're on the list of R foundation members, I rest assured you have
other channels to ask about the identity of new CRAN staff directly to
those responsible. Their names and paychecks are of no interest to the
general dev world. I can understand CRAN doesn't want to make these names
public, in order to avoid thousands of beginning devs mailing them directly
with questions that should be answered elsewhere.

I'd like to take a moment to thank CRAN for extending their workforce.
Given the increased workload, this was long overdue. I'm fully confident
the responsible CRAN maintainers made a thorough selection of competent
people. They're not known for their laissez-faire attitude.

I further note that:

1) the devoid package is on CRAN.

2) Where cat() is used in gargle, message() is a better option for the
following reason:

> myfun <- function(){cat("Yes");message("No")}
> suppressMessages(myfun())
Yes

This is how I train my students, but you're entitled to your own opinion
obviously. When the opinion of a dev differs from CRAN however, it's up to
them to argue with CRAN about why their vision is correct. A third party
public complaint seems to be the norm lately, but in our region such things
are generally frowned upon, as it's considered basic politeness to solve
differences with the people directly.

Finally, I'd like to point out that one can easily use the argument "repos"
in install.packages() to install from a different repository. So there's
absolutely no problem to have your own repo where you hire the people and
make the rules. That might save you a few emails to the dev lists.

I hope your ongoing problems with CRAN get resolved soon.
All the best.

Joris

On Tue, May 14, 2019 at 5:26 PM Hadley Wickham <h.wickham at gmail.com> wrote:

> Hi all,
>
> Several people on my team have received responses to their CRAN
> submissions from new members of the CRAN team who appear to be student
> assistants (judging from their job titles: "Studentischer
> administrativer Mitarbeiter"). From the outside, they appear to be
> exercising editorial control[^1] and conducting design reviews[^2].
>
> CRAN is a critical piece of R community infrastructure, and I am sure
> these students have been surrounded by the proper checks and balances,
> but it's not obvious what their role is from the outside. I'd really
> appreciate knowing a little more about them:
>
> * Who are they?
>
> * Are they paid employees or volunteers?
>
> * What is their scope of work?
>
> * How are they trained?
>
> * If we believe that they have made a mistake, how do we request
>   review from a senior CRAN member?
>
> * They appear to be able to apply additional discretionary criteria
>   that are not included in R CMD check or documented in the CRAN policies.
>   Is this true? If so, what is the scope of these additional checks?
>
> Hadley
>
> [^1]: The devoid package was rejected because the student assistant
> did not understand the purpose of the package.
>
> [^2]: The gargle package was rejected because the student assistant
> believed that the use of cat() was incorrect. It was not.
>
> --
> http://hadley.nz
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Jor|@@Mey@ @end|ng |rom ugent@be  Wed May 15 11:45:15 2019
From: Jor|@@Mey@ @end|ng |rom ugent@be (Joris Meys)
Date: Wed, 15 May 2019 11:45:15 +0200
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
Message-ID: <CAO1zAVYThaLnojt_VuoraSYpQB7JBGtvAt8OBDixc551aurrmQ@mail.gmail.com>

Dear Hadley,

a follow up mail: You know who they are. Your organisation has the policy
to add all email correspondence with CRAN to the github repo.

https://github.com/r-lib/gargle/tree/master/cran-correspondence

That's how I now also found out who they are. One is a doctor. She has a
PhD. The mere fact you insinuate that this woman could be a student, is
disturbing. The other obtained an engineer degree in 2011, and is currently
obtaining a second one in Economics while working as a project assistant.
Also here I find it disturbing you question the competence of someone with
that experience, and who was selected by people known for their
thoroughness.

In light of this new information, I fail to understand why you even bother
asking for information you had already. I would appreciate if you would
stop gaslighting about CRAN and show those ladies the respect they deserve.

Kind regards
Joris

On Wed, May 15, 2019 at 11:06 AM Joris Meys <Joris.Meys at ugent.be> wrote:

> Dear Hadley,
>
> given you're on the list of R foundation members, I rest assured you have
> other channels to ask about the identity of new CRAN staff directly to
> those responsible. Their names and paychecks are of no interest to the
> general dev world. I can understand CRAN doesn't want to make these names
> public, in order to avoid thousands of beginning devs mailing them directly
> with questions that should be answered elsewhere.
>
> I'd like to take a moment to thank CRAN for extending their workforce.
> Given the increased workload, this was long overdue. I'm fully confident
> the responsible CRAN maintainers made a thorough selection of competent
> people. They're not known for their laissez-faire attitude.
>
> I further note that:
>
> 1) the devoid package is on CRAN.
>
> 2) Where cat() is used in gargle, message() is a better option for the
> following reason:
>
> > myfun <- function(){cat("Yes");message("No")}
> > suppressMessages(myfun())
> Yes
>
> This is how I train my students, but you're entitled to your own opinion
> obviously. When the opinion of a dev differs from CRAN however, it's up to
> them to argue with CRAN about why their vision is correct. A third party
> public complaint seems to be the norm lately, but in our region such things
> are generally frowned upon, as it's considered basic politeness to solve
> differences with the people directly.
>
> Finally, I'd like to point out that one can easily use the argument
> "repos" in install.packages() to install from a different repository. So
> there's absolutely no problem to have your own repo where you hire the
> people and make the rules. That might save you a few emails to the dev
> lists.
>
> I hope your ongoing problems with CRAN get resolved soon.
> All the best.
>
> Joris
>
> On Tue, May 14, 2019 at 5:26 PM Hadley Wickham <h.wickham at gmail.com>
> wrote:
>
>> Hi all,
>>
>> Several people on my team have received responses to their CRAN
>> submissions from new members of the CRAN team who appear to be student
>> assistants (judging from their job titles: "Studentischer
>> administrativer Mitarbeiter"). From the outside, they appear to be
>> exercising editorial control[^1] and conducting design reviews[^2].
>>
>> CRAN is a critical piece of R community infrastructure, and I am sure
>> these students have been surrounded by the proper checks and balances,
>> but it's not obvious what their role is from the outside. I'd really
>> appreciate knowing a little more about them:
>>
>> * Who are they?
>>
>> * Are they paid employees or volunteers?
>>
>> * What is their scope of work?
>>
>> * How are they trained?
>>
>> * If we believe that they have made a mistake, how do we request
>>   review from a senior CRAN member?
>>
>> * They appear to be able to apply additional discretionary criteria
>>   that are not included in R CMD check or documented in the CRAN policies.
>>   Is this true? If so, what is the scope of these additional checks?
>>
>> Hadley
>>
>> [^1]: The devoid package was rejected because the student assistant
>> did not understand the purpose of the package.
>>
>> [^2]: The gargle package was rejected because the student assistant
>> believed that the use of cat() was incorrect. It was not.
>>
>> --
>> http://hadley.nz
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Wed May 15 12:34:54 2019
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Wed, 15 May 2019 20:34:54 +1000
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAO1zAVYThaLnojt_VuoraSYpQB7JBGtvAt8OBDixc551aurrmQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <CAO1zAVYThaLnojt_VuoraSYpQB7JBGtvAt8OBDixc551aurrmQ@mail.gmail.com>
Message-ID: <CAJmOi+O71EZOwffed4sfsBiRe=Z2ZAfPVq9YABu06CUTkt+WLw@mail.gmail.com>

I can't speak for Hadley, but my read of his email was that CRAN has
appointed new staff and while extra staff are clearly justified, it
was unclear how they were appointed and whether they had equal
seniority and authority as existing members. Indeed, the fact they use
titles which are clearly junior would suggest that they may not be.
His citation of the initially rejected packages was, from my read, not
intended to obtain special treatment for those packages, but simply to
make transparent his perception.

His request for additional details about the new appointments did not
strike me as too concerning either. My take was that he was not
wanting to find out more about the individuals themselves but to
better understand the process by which the CRAN team is formed. I
would echo his desire to better understand the process. CRAN (as
opposed to an arbitrary CRAN-like repository) is, as you and Hadley
agree, widely well-regarded. But outsiders -- for example systems
administrators of enterprise networks who are new to R -- may ask R
users to conduct due diligence on CRAN before whitelisting packages.
Some basic knowledge about the vetting and appointment of the
gatekeepers may be crucial in these matters. Naturally, CRAN as a free
service has no obligation at all to disclose such information nor to
assist with others' navigation of IT systems. But one is entitled to
ask.

Of course, Hadley could find all this out for himself, but this would
not be helpful to me and other outsiders. And I think this is what
motivated him to post publicly.

CRAN administration is a highly specialized job involving judgement
and experience; and so a criticism over the handling of one or two
submissions by obviously new appointees is hardly a reflection of the
individuals' general competence. If Uwe can make such mistakes, I
hardly think an error or two by someone else is that damning!



On 15/05/2019, Joris Meys <Joris.Meys at ugent.be> wrote:
> Dear Hadley,
>
> a follow up mail: You know who they are. Your organisation has the policy
> to add all email correspondence with CRAN to the github repo.
>
> https://github.com/r-lib/gargle/tree/master/cran-correspondence
>
> That's how I now also found out who they are. One is a doctor. She has a
> PhD. The mere fact you insinuate that this woman could be a student, is
> disturbing. The other obtained an engineer degree in 2011, and is currently
> obtaining a second one in Economics while working as a project assistant.
> Also here I find it disturbing you question the competence of someone with
> that experience, and who was selected by people known for their
> thoroughness.
>
> In light of this new information, I fail to understand why you even bother
> asking for information you had already. I would appreciate if you would
> stop gaslighting about CRAN and show those ladies the respect they deserve.
>
> Kind regards
> Joris
>
> On Wed, May 15, 2019 at 11:06 AM Joris Meys <Joris.Meys at ugent.be> wrote:
>
>> Dear Hadley,
>>
>> given you're on the list of R foundation members, I rest assured you have
>> other channels to ask about the identity of new CRAN staff directly to
>> those responsible. Their names and paychecks are of no interest to the
>> general dev world. I can understand CRAN doesn't want to make these names
>> public, in order to avoid thousands of beginning devs mailing them
>> directly
>> with questions that should be answered elsewhere.
>>
>> I'd like to take a moment to thank CRAN for extending their workforce.
>> Given the increased workload, this was long overdue. I'm fully confident
>> the responsible CRAN maintainers made a thorough selection of competent
>> people. They're not known for their laissez-faire attitude.
>>
>> I further note that:
>>
>> 1) the devoid package is on CRAN.
>>
>> 2) Where cat() is used in gargle, message() is a better option for the
>> following reason:
>>
>> > myfun <- function(){cat("Yes");message("No")}
>> > suppressMessages(myfun())
>> Yes
>>
>> This is how I train my students, but you're entitled to your own opinion
>> obviously. When the opinion of a dev differs from CRAN however, it's up
>> to
>> them to argue with CRAN about why their vision is correct. A third party
>> public complaint seems to be the norm lately, but in our region such
>> things
>> are generally frowned upon, as it's considered basic politeness to solve
>> differences with the people directly.
>>
>> Finally, I'd like to point out that one can easily use the argument
>> "repos" in install.packages() to install from a different repository. So
>> there's absolutely no problem to have your own repo where you hire the
>> people and make the rules. That might save you a few emails to the dev
>> lists.
>>
>> I hope your ongoing problems with CRAN get resolved soon.
>> All the best.
>>
>> Joris
>>
>> On Tue, May 14, 2019 at 5:26 PM Hadley Wickham <h.wickham at gmail.com>
>> wrote:
>>
>>> Hi all,
>>>
>>> Several people on my team have received responses to their CRAN
>>> submissions from new members of the CRAN team who appear to be student
>>> assistants (judging from their job titles: "Studentischer
>>> administrativer Mitarbeiter"). From the outside, they appear to be
>>> exercising editorial control[^1] and conducting design reviews[^2].
>>>
>>> CRAN is a critical piece of R community infrastructure, and I am sure
>>> these students have been surrounded by the proper checks and balances,
>>> but it's not obvious what their role is from the outside. I'd really
>>> appreciate knowing a little more about them:
>>>
>>> * Who are they?
>>>
>>> * Are they paid employees or volunteers?
>>>
>>> * What is their scope of work?
>>>
>>> * How are they trained?
>>>
>>> * If we believe that they have made a mistake, how do we request
>>>   review from a senior CRAN member?
>>>
>>> * They appear to be able to apply additional discretionary criteria
>>>   that are not included in R CMD check or documented in the CRAN
>>> policies.
>>>   Is this true? If so, what is the scope of these additional checks?
>>>
>>> Hadley
>>>
>>> [^1]: The devoid package was rejected because the student assistant
>>> did not understand the purpose of the package.
>>>
>>> [^2]: The gargle package was rejected because the student assistant
>>> believed that the use of cat() was incorrect. It was not.
>>>
>>> --
>>> http://hadley.nz
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Department of Data Analysis and Mathematical Modelling
>> Ghent University
>> Coupure Links 653, B-9000 Gent (Belgium)
>>
>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>>
>> tel: +32 (0)9 264 61 79
>> -----------
>> Biowiskundedagen 2017-2018
>> http://www.biowiskundedagen.ugent.be/
>>
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed May 15 12:49:09 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 15 May 2019 11:49:09 +0100
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <23765.58695.347117.495958@rob.eddelbuettel.com>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
 <23765.58695.347117.495958@rob.eddelbuettel.com>
Message-ID: <CABtg=KnoMkMWv+cfpGT441CvWKLJ0rO81CznFeYPY1gTAnfAcQ@mail.gmail.com>

Thinking about this a bit more, I think this might be a bug in R CMD
check, actually.

I understand that these flags are not portable, and yes, they should
be reported if they are specified in the packages's Makevars* files.
But in this case they are coming from the Ubuntu system's Makevars
setup, and surely, they do work there. I would even say that it is
actually good practice to include them in the system setup.

I can probably provide a patch for this.

Best,
Gabor

On Fri, May 10, 2019 at 10:00 PM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 10 May 2019 at 20:32, Goldfeld, Keith wrote:
> | Good afternoon ?
> |
> | I am submitting an update to my package ?simstudy?, and the ran the rhub checks. I received a note from one of the four platforms (the other three passed). The Ubuntu Linux 16.04 objected to the compilation flags:
> |
> | * checking compilation flags used ... NOTE
> | Compilation used the following non-portable flag(s):
> |   ?-Wdate-time? ?-Werror=format-security? ?-Wformat?
> |
> | I did some searching and someone suggested I create a ?Makevars? in the ~/.R directory (which is different from my package directory). This is what I included in the Makevars file:
> |
> | # Settings from /etc/R/Makeconf with "non-portable flag(s):"
> | # ?-Wdate-time? ?-Werror=format-security? ?-Wformat? replaced by -Wall -pedantic
> | # and without -fdebug-prefix-map=...
> | CFLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2 $(LTO)
> | CXXFLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2 $(LTO)
> | CXX98FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2
> | CXX11FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2
> | CXX14FLAGS = -g -O2 -Wall -pedantic -fstack-protector-strong -D_FORTIFY_SOURCE=2
> |
> | I ran devtools::check(), and it seemed to find the Makevars file. However, when I reran devtools::check_rhub(), I still received a NOTE. Does anyone have any advice on what I might not be getting right?
>
> "A change is gonna come."
>
> This was arguably something I should have taken care of earlier.  The long
> story is that
>
>  - Debian (and thus Ubuntu) impose ?-Wdate-time -Werror=format-security
>    -Wformat? for security reasons, and have for a few years
>  - as an OS default these become active on Debian and Ubuntu when R is
>    compiled (see /etc/R/Makeconf)
>  - this confuses people, and what pushed me over the edge was that I had to
>    explain it to one of my STAT 430 students a week or two ago
>
> As discussed on r-sig-debian we currently have another good reason to update
> our R 3.6.0-1 package, and I will add this too.  In the meantime try this on
> local system (and I don't think you can influence the rhub build): just add
>
>    _R_CHECK_COMPILATION_FLAGS_KNOWN_=-Wformat -Werror=format-security -Wdate-time
>
> to any one of $RHOME/etc/Renviron, $RHOME/etc/Renviron.site (and those two
> can be accessed via /etc/R/ for convenience), your ~/.Renviron, your working
> directory's .Renviron (if any), your ~/.R/check.Renviron.
>
> Or wait a couple of days.
>
> Hope this helps,  Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@v|d@c@@terr@tt @end|ng |rom ed@@c@uk  Wed May 15 12:28:35 2019
From: d@v|d@c@@terr@tt @end|ng |rom ed@@c@uk (David C Sterratt)
Date: Wed, 15 May 2019 11:28:35 +0100
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAO1zAVYThaLnojt_VuoraSYpQB7JBGtvAt8OBDixc551aurrmQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <CAO1zAVYThaLnojt_VuoraSYpQB7JBGtvAt8OBDixc551aurrmQ@mail.gmail.com>
Message-ID: <eyuo944q90l.fsf@bonnington.inf.ed.ac.uk>

Dear all,

as a CRAN contributor, I am interested in answers to the questions
Hadley raises.

I very much appreciate the huge amount of work the CRAN team do. I get
the impression that hitherto much of it has been funded by "goodwill".
That's not sustainable and it definitely needs to be staffed
sufficiently.

As a contributor I've come to expect that I have to abide by the
submission guidelines, and that with every release of R the checks get
more stringent. This is a very good thing for the quality of code, even
if it makes me curse at the time!

I've also come to expect some comments on things like the formatting of
quotes in the package description.

I maintain one package (geometry) on a goodwill basis. It's not related
to my current work, and I get little academic credit for it. Unexpected
comments at the final stages of submission deplete goodwill. It would be
helpful to know what to expect, especially if standards are becoming
more stringent.

Best wishes,

David

On Wed 15 May 2019 at 09:45 GMT, Joris Meys <Joris.Meys at ugent.be> wrote:

> Dear Hadley,
>
> a follow up mail: You know who they are. Your organisation has the policy
> to add all email correspondence with CRAN to the github repo.
>
> https://github.com/r-lib/gargle/tree/master/cran-correspondence
>
> That's how I now also found out who they are. One is a doctor. She has a
> PhD. The mere fact you insinuate that this woman could be a student, is
> disturbing. The other obtained an engineer degree in 2011, and is currently
> obtaining a second one in Economics while working as a project assistant.
> Also here I find it disturbing you question the competence of someone with
> that experience, and who was selected by people known for their
> thoroughness.
>
> In light of this new information, I fail to understand why you even bother
> asking for information you had already. I would appreciate if you would
> stop gaslighting about CRAN and show those ladies the respect they deserve.
>
> Kind regards
> Joris
>
> On Wed, May 15, 2019 at 11:06 AM Joris Meys <Joris.Meys at ugent.be> wrote:
>
>> Dear Hadley,
>>
>> given you're on the list of R foundation members, I rest assured you have
>> other channels to ask about the identity of new CRAN staff directly to
>> those responsible. Their names and paychecks are of no interest to the
>> general dev world. I can understand CRAN doesn't want to make these names
>> public, in order to avoid thousands of beginning devs mailing them directly
>> with questions that should be answered elsewhere.
>>
>> I'd like to take a moment to thank CRAN for extending their workforce.
>> Given the increased workload, this was long overdue. I'm fully confident
>> the responsible CRAN maintainers made a thorough selection of competent
>> people. They're not known for their laissez-faire attitude.
>>
>> I further note that:
>>
>> 1) the devoid package is on CRAN.
>>
>> 2) Where cat() is used in gargle, message() is a better option for the
>> following reason:
>>
>> > myfun <- function(){cat("Yes");message("No")}
>> > suppressMessages(myfun())
>> Yes
>>
>> This is how I train my students, but you're entitled to your own opinion
>> obviously. When the opinion of a dev differs from CRAN however, it's up to
>> them to argue with CRAN about why their vision is correct. A third party
>> public complaint seems to be the norm lately, but in our region such things
>> are generally frowned upon, as it's considered basic politeness to solve
>> differences with the people directly.
>>
>> Finally, I'd like to point out that one can easily use the argument
>> "repos" in install.packages() to install from a different repository. So
>> there's absolutely no problem to have your own repo where you hire the
>> people and make the rules. That might save you a few emails to the dev
>> lists.
>>
>> I hope your ongoing problems with CRAN get resolved soon.
>> All the best.
>>
>> Joris
>>
>> On Tue, May 14, 2019 at 5:26 PM Hadley Wickham <h.wickham at gmail.com>
>> wrote:
>>
>>> Hi all,
>>>
>>> Several people on my team have received responses to their CRAN
>>> submissions from new members of the CRAN team who appear to be student
>>> assistants (judging from their job titles: "Studentischer
>>> administrativer Mitarbeiter"). From the outside, they appear to be
>>> exercising editorial control[^1] and conducting design reviews[^2].
>>>
>>> CRAN is a critical piece of R community infrastructure, and I am sure
>>> these students have been surrounded by the proper checks and balances,
>>> but it's not obvious what their role is from the outside. I'd really
>>> appreciate knowing a little more about them:
>>>
>>> * Who are they?
>>>
>>> * Are they paid employees or volunteers?
>>>
>>> * What is their scope of work?
>>>
>>> * How are they trained?
>>>
>>> * If we believe that they have made a mistake, how do we request
>>>   review from a senior CRAN member?
>>>
>>> * They appear to be able to apply additional discretionary criteria
>>>   that are not included in R CMD check or documented in the CRAN policies.
>>>   Is this true? If so, what is the scope of these additional checks?
>>>
>>> Hadley
>>>
>>> [^1]: The devoid package was rejected because the student assistant
>>> did not understand the purpose of the package.
>>>
>>> [^2]: The gargle package was rejected because the student assistant
>>> believed that the use of cat() was incorrect. It was not.
>>>
>>> --
>>> http://hadley.nz
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Department of Data Analysis and Mathematical Modelling
>> Ghent University
>> Coupure Links 653, B-9000 Gent (Belgium)
>>
>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>>
>> tel: +32 (0)9 264 61 79
>> -----------
>> Biowiskundedagen 2017-2018
>> http://www.biowiskundedagen.ugent.be/
>>
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>


--
David C Sterratt, Senior Research Associate
Institute for Adaptive and Neural Computation, School of Informatics
University of Edinburgh, 10 Crichton Street, Edinburgh EH8 9AB, Scotland, UK
http://homepages.inf.ed.ac.uk/sterratt - tel: +44 131 651 1739

-- 
The University of Edinburgh is a charitable body, registered in
Scotland, with registration number SC005336.


From edd @end|ng |rom deb|@n@org  Wed May 15 13:15:46 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 15 May 2019 06:15:46 -0500
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <CABtg=KnoMkMWv+cfpGT441CvWKLJ0rO81CznFeYPY1gTAnfAcQ@mail.gmail.com>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
 <23765.58695.347117.495958@rob.eddelbuettel.com>
 <CABtg=KnoMkMWv+cfpGT441CvWKLJ0rO81CznFeYPY1gTAnfAcQ@mail.gmail.com>
Message-ID: <23771.62690.32590.665372@rob.eddelbuettel.com>


On 15 May 2019 at 11:49, G?bor Cs?rdi wrote:
| Thinking about this a bit more, I think this might be a bug in R CMD
| check, actually.
| 
| I understand that these flags are not portable, and yes, they should
| be reported if they are specified in the packages's Makevars* files.
| But in this case they are coming from the Ubuntu system's Makevars
| setup, and surely, they do work there. I would even say that it is
| actually good practice to include them in the system setup.
| 
| I can probably provide a patch for this.

See discussions on r-sig-debian -- in essence I had the same thouht and this
has been taken care of now in R 3.6.0-2.  We add this to Renviron.site 

## edd May 2019
##
## Debian (and its derivatives) impose a set of compiler flags to prevent some known
## security issues with compiled code.  These flags then become defaults for R as well
## (see eg /etc/R/Makeconf) but nevertheless confuse R as warnings get triggers.  Users,
## on the other hand, are often stumped about these.  So with this variable we declare
## these options as known for the local checks on the machine this file is on.
##
## See Section 8 of the R Internals manual for many more options to customize tests.
_R_CHECK_COMPILATION_FLAGS_KNOWN_='-Wformat -Werror=format-security -Wdate-time'


It may eventually move to Renviron now that Kurt kindly fixed an Renviron parser
buglet with `=` assignments in r-devel

So please add the environment variable now on all Debian and Ubuntu flavours,
and/or upgrade to 3.6.0-2.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed May 15 13:41:16 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 15 May 2019 11:41:16 +0000
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
Message-ID: <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>

message() / warning() / stop() write to stderr whereas print() / cat() write (by default) to stdout. Even without being able to suppress messages, it is well-established practice (the story is that this is the reason why 'stderr' was introduced into unix, https://www.jstorimer.com/blogs/workingwithcode/7766119-when-to-use-stderr-instead-of-stdout ) to separate diagnostic messages from program output. I agree that gargle (in particular, and packages in general, given the theme of this mailing list) would be a better package if it used message() where it now uses cat().

Martin

?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys" <r-package-devel-bounces at r-project.org on behalf of Joris.Meys at ugent.be> wrote:

    2) Where cat() is used in gargle, message() is a better option for the
    following reason:
    
    > myfun <- function(){cat("Yes");message("No")}
    > suppressMessages(myfun())
    Yes
    
    

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed May 15 13:51:02 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 15 May 2019 13:51:02 +0200
Subject: [R-pkg-devel] 
 advice about errorCondition() function in the Rcmdr package
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC836BB2647@FHSDB2D11-2.csu.mcmaster.ca>
References: <ACD1644AA6C67E4FBD0C350625508EC836BB2647@FHSDB2D11-2.csu.mcmaster.ca>
Message-ID: <6a4ba7b7-5219-9c71-ec44-5286122393de@statistik.tu-dortmund.de>

Dear John,

I guess Rcmdr::errorCondition() will rarely be called by users (nor 
base::errorCondition), hence it should be quite safe if other packages 
import correctly into their namespace and use the version their 
maintainers import?

 From that point of view, there are no changes required in Rcmdr.

Best,
Uwe



On 14.05.2019 16:28, Fox, John wrote:
> Dear list members,
> 
> I noticed that there's a name clash between errorCondition() in the Rcmdr package and the new function by the same name in the base package in R 3.6.0. errorCondition() has been in the Rcmdr package for many years and is used extensively -- literally dozens of times. It's exported because it's also used in Rcmdr plug-in packages. The function checks for errors, prints an error message, cleans up after the error, and restarts a dialog.
> 
> For the time-being, I've renamed the function as ErrorCondition() (with an uppercase "E") in the development version of the Rcmdr package, to be released in late summer, but have retained and deprecated errorCondition() because I expect that removing it will break most or even all Rcmdr plug-in packages, but I also suspect that masking base::errorCondition() can be problematic.
> 
> Can anyone suggest the best way to proceed?
> 
> Best,
>   John
> 
> --------------------------------------
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> Web: socialsciences.mcmaster.ca/jfox/
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |uc@r @end|ng |rom |edor@project@org  Wed May 15 15:01:31 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 15 May 2019 15:01:31 +0200
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <23771.62690.32590.665372@rob.eddelbuettel.com>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
 <23765.58695.347117.495958@rob.eddelbuettel.com>
 <CABtg=KnoMkMWv+cfpGT441CvWKLJ0rO81CznFeYPY1gTAnfAcQ@mail.gmail.com>
 <23771.62690.32590.665372@rob.eddelbuettel.com>
Message-ID: <CALEXWq3uqZ4=+C4tmW5_Hht6b0sSwwHFVJ8Y_=te5k7NM=N0PQ@mail.gmail.com>

On Wed, 15 May 2019 at 13:16, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 15 May 2019 at 11:49, G?bor Cs?rdi wrote:
> | Thinking about this a bit more, I think this might be a bug in R CMD
> | check, actually.
> |
> | I understand that these flags are not portable, and yes, they should
> | be reported if they are specified in the packages's Makevars* files.
> | But in this case they are coming from the Ubuntu system's Makevars
> | setup, and surely, they do work there. I would even say that it is
> | actually good practice to include them in the system setup.
> |
> | I can probably provide a patch for this.
>
> See discussions on r-sig-debian -- in essence I had the same thouht and this
> has been taken care of now in R 3.6.0-2.  We add this to Renviron.site
>
> ## edd May 2019
> ##
> ## Debian (and its derivatives) impose a set of compiler flags to prevent some known
> ## security issues with compiled code.  These flags then become defaults for R as well
> ## (see eg /etc/R/Makeconf) but nevertheless confuse R as warnings get triggers.  Users,
> ## on the other hand, are often stumped about these.  So with this variable we declare
> ## these options as known for the local checks on the machine this file is on.
> ##
> ## See Section 8 of the R Internals manual for many more options to customize tests.
> _R_CHECK_COMPILATION_FLAGS_KNOWN_='-Wformat -Werror=format-security -Wdate-time'
>
>
> It may eventually move to Renviron now that Kurt kindly fixed an Renviron parser
> buglet with `=` assignments in r-devel
>
> So please add the environment variable now on all Debian and Ubuntu flavours,
> and/or upgrade to 3.6.0-2.

Fedora adds these flags too, plus -D_GLIBCXX_ASSERTIONS since Fedora 28, see:

https://stat.ethz.ch/pipermail/r-package-devel/2018q2/002754.html

This last one is particularly difficult to conceal, because the
resulting code includes calls to abort, for which R complains.

I?aki


From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Wed May 15 15:08:46 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Wed, 15 May 2019 13:08:46 +0000
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <CALEXWq3uqZ4=+C4tmW5_Hht6b0sSwwHFVJ8Y_=te5k7NM=N0PQ@mail.gmail.com>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
 <23765.58695.347117.495958@rob.eddelbuettel.com>
 <CABtg=KnoMkMWv+cfpGT441CvWKLJ0rO81CznFeYPY1gTAnfAcQ@mail.gmail.com>
 <23771.62690.32590.665372@rob.eddelbuettel.com>,
 <CALEXWq3uqZ4=+C4tmW5_Hht6b0sSwwHFVJ8Y_=te5k7NM=N0PQ@mail.gmail.com>
Message-ID: <7e3c6bfbc5f84b64ab39aa6eba3c3533@nyulangone.org>

Forgive me for not completely understanding the back and forth. Do I need to do anything on my end, or are these changes that are being made on the server side?


- Keith

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of I?aki Ucar <iucar at fedoraproject.org>
Sent: Wednesday, May 15, 2019 9:01:31 AM
To: Dirk Eddelbuettel
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Compilation used the "non-portable flag"

On Wed, 15 May 2019 at 13:16, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 15 May 2019 at 11:49, G?bor Cs?rdi wrote:
> | Thinking about this a bit more, I think this might be a bug in R CMD
> | check, actually.
> |
> | I understand that these flags are not portable, and yes, they should
> | be reported if they are specified in the packages's Makevars* files.
> | But in this case they are coming from the Ubuntu system's Makevars
> | setup, and surely, they do work there. I would even say that it is
> | actually good practice to include them in the system setup.
> |
> | I can probably provide a patch for this.
>
> See discussions on r-sig-debian -- in essence I had the same thouht and this
> has been taken care of now in R 3.6.0-2.  We add this to Renviron.site
>
> ## edd May 2019
> ##
> ## Debian (and its derivatives) impose a set of compiler flags to prevent some known
> ## security issues with compiled code.  These flags then become defaults for R as well
> ## (see eg /etc/R/Makeconf) but nevertheless confuse R as warnings get triggers.  Users,
> ## on the other hand, are often stumped about these.  So with this variable we declare
> ## these options as known for the local checks on the machine this file is on.
> ##
> ## See Section 8 of the R Internals manual for many more options to customize tests.
> _R_CHECK_COMPILATION_FLAGS_KNOWN_='-Wformat -Werror=format-security -Wdate-time'
>
>
> It may eventually move to Renviron now that Kurt kindly fixed an Renviron parser
> buglet with `=` assignments in r-devel
>
> So please add the environment variable now on all Debian and Ubuntu flavours,
> and/or upgrade to 3.6.0-2.

Fedora adds these flags too, plus -D_GLIBCXX_ASSERTIONS since Fedora 28, see:

https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_pipermail_r-2Dpackage-2Ddevel_2018q2_002754.html&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=CfJnEvpTss5ER8w_xXRZMDRvEhrseOVfAIu5aLZrY24&s=LjMY_8I7NS1NWWY4b4ijWmd8QV8E4pmF-TEqbB3dz8I&e=

This last one is particularly difficult to conceal, because the
resulting code includes calls to abort, for which R complains.

I?aki

______________________________________________
R-package-devel at r-project.org mailing list
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=CfJnEvpTss5ER8w_xXRZMDRvEhrseOVfAIu5aLZrY24&s=AH5qvmlvudRzUv7tgGCbKEP_Fi0gkNWLKehp-PlnUJ8&e=

------------------------------------------------------------
This email message, including any attachments, is for th...{{dropped:14}}


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed May 15 15:14:50 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 15 May 2019 14:14:50 +0100
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <7e3c6bfbc5f84b64ab39aa6eba3c3533@nyulangone.org>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
 <23765.58695.347117.495958@rob.eddelbuettel.com>
 <CABtg=KnoMkMWv+cfpGT441CvWKLJ0rO81CznFeYPY1gTAnfAcQ@mail.gmail.com>
 <23771.62690.32590.665372@rob.eddelbuettel.com>
 <CALEXWq3uqZ4=+C4tmW5_Hht6b0sSwwHFVJ8Y_=te5k7NM=N0PQ@mail.gmail.com>
 <7e3c6bfbc5f84b64ab39aa6eba3c3533@nyulangone.org>
Message-ID: <CABtg=Kk5bUGcVT3CK9Efw4O2VwLhJFwdHabRyhD_=a4=XUd3Hw@mail.gmail.com>

You don't need to do anything.

Gabor

On Wed, May 15, 2019 at 2:13 PM Goldfeld, Keith
<Keith.Goldfeld at nyulangone.org> wrote:
>
> Forgive me for not completely understanding the back and forth. Do I need to do anything on my end, or are these changes that are being made on the server side?
>
>
> - Keith
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of I?aki Ucar <iucar at fedoraproject.org>
> Sent: Wednesday, May 15, 2019 9:01:31 AM
> To: Dirk Eddelbuettel
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Compilation used the "non-portable flag"
>
> On Wed, 15 May 2019 at 13:16, Dirk Eddelbuettel <edd at debian.org> wrote:
> >
> >
> > On 15 May 2019 at 11:49, G?bor Cs?rdi wrote:
> > | Thinking about this a bit more, I think this might be a bug in R CMD
> > | check, actually.
> > |
> > | I understand that these flags are not portable, and yes, they should
> > | be reported if they are specified in the packages's Makevars* files.
> > | But in this case they are coming from the Ubuntu system's Makevars
> > | setup, and surely, they do work there. I would even say that it is
> > | actually good practice to include them in the system setup.
> > |
> > | I can probably provide a patch for this.
> >
> > See discussions on r-sig-debian -- in essence I had the same thouht and this
> > has been taken care of now in R 3.6.0-2.  We add this to Renviron.site
> >
> > ## edd May 2019
> > ##
> > ## Debian (and its derivatives) impose a set of compiler flags to prevent some known
> > ## security issues with compiled code.  These flags then become defaults for R as well
> > ## (see eg /etc/R/Makeconf) but nevertheless confuse R as warnings get triggers.  Users,
> > ## on the other hand, are often stumped about these.  So with this variable we declare
> > ## these options as known for the local checks on the machine this file is on.
> > ##
> > ## See Section 8 of the R Internals manual for many more options to customize tests.
> > _R_CHECK_COMPILATION_FLAGS_KNOWN_='-Wformat -Werror=format-security -Wdate-time'
> >
> >
> > It may eventually move to Renviron now that Kurt kindly fixed an Renviron parser
> > buglet with `=` assignments in r-devel
> >
> > So please add the environment variable now on all Debian and Ubuntu flavours,
> > and/or upgrade to 3.6.0-2.
>
> Fedora adds these flags too, plus -D_GLIBCXX_ASSERTIONS since Fedora 28, see:
>
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_pipermail_r-2Dpackage-2Ddevel_2018q2_002754.html&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=CfJnEvpTss5ER8w_xXRZMDRvEhrseOVfAIu5aLZrY24&s=LjMY_8I7NS1NWWY4b4ijWmd8QV8E4pmF-TEqbB3dz8I&e=
>
> This last one is particularly difficult to conceal, because the
> resulting code includes calls to abort, for which R complains.
>
> I?aki
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=CfJnEvpTss5ER8w_xXRZMDRvEhrseOVfAIu5aLZrY24&s=AH5qvmlvudRzUv7tgGCbKEP_Fi0gkNWLKehp-PlnUJ8&e=
>
> ------------------------------------------------------------
> This email message, including any attachments, is for ...{{dropped:6}}


From j@me@@|@he@ter @end|ng |rom gm@||@com  Wed May 15 15:41:19 2019
From: j@me@@|@he@ter @end|ng |rom gm@||@com (Jim Hester)
Date: Wed, 15 May 2019 09:41:19 -0400
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
Message-ID: <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>

I agree that `message()` is in an ideally preferred, precisely because
of the reasons Martin stated, it is easily controlled by the user.

Unfortunately, in the real world, the windows R gui console and
RStudio (which copied behavior) color messages, and anything on stderr
in fact, in red, which confuses most users who are trained to treat
messages in red as errors.

This also makes using colored output (where available) more
challenging when using `message()`.  You either have to accept the
text as red, or unconditionally change the text color to black or
similar, which can then be unreadable if the user is using a dark
color theme.

Jenny is an experienced package developer. She knew this tradeoff and
the use of `cat()` in gargle was deliberate choice in an imperfect
world. She did not make this decision out of ignorance of a better
way.

However there is no way for Jenny or any other package developers to
have a dialog during a CRAN submission, the communication is only in
one direction, if she resubmits explaining her rationale for the
choice she may not even have the same reviewer the next time.

Bioconductor seems to have a much better review process for
submissions, with real dialog between the reviewer and package author,
perhaps CRAN can learn from that process and improve the submission
experience in the future.

Jim

On Wed, May 15, 2019 at 7:41 AM Martin Morgan <mtmorgan.bioc at gmail.com> wrote:
>
> message() / warning() / stop() write to stderr whereas print() / cat() write (by default) to stdout. Even without being able to suppress messages, it is well-established practice (the story is that this is the reason why 'stderr' was introduced into unix, https://www.jstorimer.com/blogs/workingwithcode/7766119-when-to-use-stderr-instead-of-stdout ) to separate diagnostic messages from program output. I agree that gargle (in particular, and packages in general, given the theme of this mailing list) would be a better package if it used message() where it now uses cat().
>
> Martin
>
> ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys" <r-package-devel-bounces at r-project.org on behalf of Joris.Meys at ugent.be> wrote:
>
>     2) Where cat() is used in gargle, message() is a better option for the
>     following reason:
>
>     > myfun <- function(){cat("Yes");message("No")}
>     > suppressMessages(myfun())
>     Yes
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@me@@|@he@ter @end|ng |rom gm@||@com  Wed May 15 15:42:13 2019
From: j@me@@|@he@ter @end|ng |rom gm@||@com (Jim Hester)
Date: Wed, 15 May 2019 09:42:13 -0400
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
Message-ID: <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>

Sorry first sentence should read

I agree that `message()` is ideally preferred, precisely because
of the reasons Martin stated, it is easily controlled by the user.

On Wed, May 15, 2019 at 9:41 AM Jim Hester <james.f.hester at gmail.com> wrote:
>
> I agree that `message()` is in an ideally preferred, precisely because
> of the reasons Martin stated, it is easily controlled by the user.
>
> Unfortunately, in the real world, the windows R gui console and
> RStudio (which copied behavior) color messages, and anything on stderr
> in fact, in red, which confuses most users who are trained to treat
> messages in red as errors.
>
> This also makes using colored output (where available) more
> challenging when using `message()`.  You either have to accept the
> text as red, or unconditionally change the text color to black or
> similar, which can then be unreadable if the user is using a dark
> color theme.
>
> Jenny is an experienced package developer. She knew this tradeoff and
> the use of `cat()` in gargle was deliberate choice in an imperfect
> world. She did not make this decision out of ignorance of a better
> way.
>
> However there is no way for Jenny or any other package developers to
> have a dialog during a CRAN submission, the communication is only in
> one direction, if she resubmits explaining her rationale for the
> choice she may not even have the same reviewer the next time.
>
> Bioconductor seems to have a much better review process for
> submissions, with real dialog between the reviewer and package author,
> perhaps CRAN can learn from that process and improve the submission
> experience in the future.
>
> Jim
>
> On Wed, May 15, 2019 at 7:41 AM Martin Morgan <mtmorgan.bioc at gmail.com> wrote:
> >
> > message() / warning() / stop() write to stderr whereas print() / cat() write (by default) to stdout. Even without being able to suppress messages, it is well-established practice (the story is that this is the reason why 'stderr' was introduced into unix, https://www.jstorimer.com/blogs/workingwithcode/7766119-when-to-use-stderr-instead-of-stdout ) to separate diagnostic messages from program output. I agree that gargle (in particular, and packages in general, given the theme of this mailing list) would be a better package if it used message() where it now uses cat().
> >
> > Martin
> >
> > ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys" <r-package-devel-bounces at r-project.org on behalf of Joris.Meys at ugent.be> wrote:
> >
> >     2) Where cat() is used in gargle, message() is a better option for the
> >     following reason:
> >
> >     > myfun <- function(){cat("Yes");message("No")}
> >     > suppressMessages(myfun())
> >     Yes
> >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Wed May 15 15:43:14 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Wed, 15 May 2019 13:43:14 +0000
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <CABtg=Kk5bUGcVT3CK9Efw4O2VwLhJFwdHabRyhD_=a4=XUd3Hw@mail.gmail.com>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
 <23765.58695.347117.495958@rob.eddelbuettel.com>
 <CABtg=KnoMkMWv+cfpGT441CvWKLJ0rO81CznFeYPY1gTAnfAcQ@mail.gmail.com>
 <23771.62690.32590.665372@rob.eddelbuettel.com>
 <CALEXWq3uqZ4=+C4tmW5_Hht6b0sSwwHFVJ8Y_=te5k7NM=N0PQ@mail.gmail.com>
 <7e3c6bfbc5f84b64ab39aa6eba3c3533@nyulangone.org>,
 <CABtg=Kk5bUGcVT3CK9Efw4O2VwLhJFwdHabRyhD_=a4=XUd3Hw@mail.gmail.com>
Message-ID: <eef5b6817ef04727a308fb58e8ed40d2@nyulangone.org>


So - even though I am getting the same note:


Compilation used the following non-portable flag(s):


from Ubuntu Linux, I should go ahead and submit?


________________________________
From: G?bor Cs?rdi <csardi.gabor at gmail.com>
Sent: Wednesday, May 15, 2019 9:14:50 AM
To: Goldfeld, Keith
Cc: I?aki Ucar; Dirk Eddelbuettel; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Compilation used the "non-portable flag"

You don't need to do anything.

Gabor

On Wed, May 15, 2019 at 2:13 PM Goldfeld, Keith
<Keith.Goldfeld at nyulangone.org> wrote:
>
> Forgive me for not completely understanding the back and forth. Do I need to do anything on my end, or are these changes that are being made on the server side?
>
>
> - Keith
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of I?aki Ucar <iucar at fedoraproject.org>
> Sent: Wednesday, May 15, 2019 9:01:31 AM
> To: Dirk Eddelbuettel
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Compilation used the "non-portable flag"
>
> On Wed, 15 May 2019 at 13:16, Dirk Eddelbuettel <edd at debian.org> wrote:
> >
> >
> > On 15 May 2019 at 11:49, G?bor Cs?rdi wrote:
> > | Thinking about this a bit more, I think this might be a bug in R CMD
> > | check, actually.
> > |
> > | I understand that these flags are not portable, and yes, they should
> > | be reported if they are specified in the packages's Makevars* files.
> > | But in this case they are coming from the Ubuntu system's Makevars
> > | setup, and surely, they do work there. I would even say that it is
> > | actually good practice to include them in the system setup.
> > |
> > | I can probably provide a patch for this.
> >
> > See discussions on r-sig-debian -- in essence I had the same thouht and this
> > has been taken care of now in R 3.6.0-2.  We add this to Renviron.site
> >
> > ## edd May 2019
> > ##
> > ## Debian (and its derivatives) impose a set of compiler flags to prevent some known
> > ## security issues with compiled code.  These flags then become defaults for R as well
> > ## (see eg /etc/R/Makeconf) but nevertheless confuse R as warnings get triggers.  Users,
> > ## on the other hand, are often stumped about these.  So with this variable we declare
> > ## these options as known for the local checks on the machine this file is on.
> > ##
> > ## See Section 8 of the R Internals manual for many more options to customize tests.
> > _R_CHECK_COMPILATION_FLAGS_KNOWN_='-Wformat -Werror=format-security -Wdate-time'
> >
> >
> > It may eventually move to Renviron now that Kurt kindly fixed an Renviron parser
> > buglet with `=` assignments in r-devel
> >
> > So please add the environment variable now on all Debian and Ubuntu flavours,
> > and/or upgrade to 3.6.0-2.
>
> Fedora adds these flags too, plus -D_GLIBCXX_ASSERTIONS since Fedora 28, see:
>
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_pipermail_r-2Dpackage-2Ddevel_2018q2_002754.html&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=CfJnEvpTss5ER8w_xXRZMDRvEhrseOVfAIu5aLZrY24&s=LjMY_8I7NS1NWWY4b4ijWmd8QV8E4pmF-TEqbB3dz8I&e=
>
> This last one is particularly difficult to conceal, because the
> resulting code includes calls to abort, for which R complains.
>
> I?aki
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=CfJnEvpTss5ER8w_xXRZMDRvEhrseOVfAIu5aLZrY24&s=AH5qvmlvudRzUv7tgGCbKEP_Fi0gkNWLKehp-PlnUJ8&e=
>
> ------------------------------------------------------------
> This email message, including any attachments, is for ...{{dropped:25}}


From |uc@r @end|ng |rom |edor@project@org  Wed May 15 15:44:35 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 15 May 2019 15:44:35 +0200
Subject: [R-pkg-devel] Compilation used the "non-portable flag"
In-Reply-To: <eef5b6817ef04727a308fb58e8ed40d2@nyulangone.org>
References: <668E719B-3549-4ACB-939A-DD4D69CA0AF7@nyumc.org>
 <23765.58695.347117.495958@rob.eddelbuettel.com>
 <CABtg=KnoMkMWv+cfpGT441CvWKLJ0rO81CznFeYPY1gTAnfAcQ@mail.gmail.com>
 <23771.62690.32590.665372@rob.eddelbuettel.com>
 <CALEXWq3uqZ4=+C4tmW5_Hht6b0sSwwHFVJ8Y_=te5k7NM=N0PQ@mail.gmail.com>
 <7e3c6bfbc5f84b64ab39aa6eba3c3533@nyulangone.org>
 <CABtg=Kk5bUGcVT3CK9Efw4O2VwLhJFwdHabRyhD_=a4=XUd3Hw@mail.gmail.com>
 <eef5b6817ef04727a308fb58e8ed40d2@nyulangone.org>
Message-ID: <CALEXWq0qyGYm6x4sPwfYorJKyMhRvb63aCQdCYJ0wxFkxLS1gA@mail.gmail.com>

On Wed, 15 May 2019 at 15:43, Goldfeld, Keith
<Keith.Goldfeld at nyulangone.org> wrote:
> So - even though I am getting the same note:
>
> Compilation used the following non-portable flag(s):
>
> from Ubuntu Linux, I should go ahead and submit?

Definitely.

I?aki


From jmount @end|ng |rom w|n-vector@com  Wed May 15 16:13:59 2019
From: jmount @end|ng |rom w|n-vector@com (John Mount)
Date: Wed, 15 May 2019 07:13:59 -0700
Subject: [R-pkg-devel] CRAN student assistants
Message-ID: <D7F74760-A9E7-4710-A108-0F5AF5E5AFFC@win-vector.com>


Dialogue is not always getting what you demand in one step.  One form dialogue with CRAN is re-submitting with CRAN-correspondence stating what one wants.

Also, for a lot of applications being able to turn off messages is critical.

> Sorry first sentence should read
> 
> I agree that `message()` is ideally preferred, precisely because
> of the reasons Martin stated, it is easily controlled by the user.
> 
> On Wed, May 15, 2019 at 9:41 AM Jim Hester <james.f.hester using gmail.com <https://stat.ethz.ch/mailman/listinfo/r-package-devel>> wrote:
> >
> > I agree that `message()` is in an ideally preferred, precisely because
> > of the reasons Martin stated, it is easily controlled by the user.
> >
> > Unfortunately, in the real world, the windows R gui console and
> > RStudio (which copied behavior) color messages, and anything on stderr
> > in fact, in red, which confuses most users who are trained to treat
> > messages in red as errors.
> >
> > This also makes using colored output (where available) more
> > challenging when using `message()`.  You either have to accept the
> > text as red, or unconditionally change the text color to black or
> > similar, which can then be unreadable if the user is using a dark
> > color theme.
> >
> > Jenny is an experienced package developer. She knew this tradeoff and
> > the use of `cat()` in gargle was deliberate choice in an imperfect
> > world. She did not make this decision out of ignorance of a better
> > way.
> >
> > However there is no way for Jenny or any other package developers to
> > have a dialog during a CRAN submission, the communication is only in
> > one direction, if she resubmits explaining her rationale for the
> > choice she may not even have the same reviewer the next time.
> >
> > Bioconductor seems to have a much better review process for
> > submissions, with real dialog between the reviewer and package author,
> > perhaps CRAN can learn from that process and improve the submission
> > experience in the future.
> >
> > Jim

---------------
John Mount
http://www.win-vector.com/ <http://www.win-vector.com/> 
Our book: Practical Data Science with R https://www.manning.com/books/practical-data-science-with-r-second-edition <http://www.manning.com/zumel/>





	[[alternative HTML version deleted]]


From jenny@|@bry@n @end|ng |rom gm@||@com  Wed May 15 16:40:47 2019
From: jenny@|@bry@n @end|ng |rom gm@||@com (Jennifer Bryan)
Date: Wed, 15 May 2019 07:40:47 -0700
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
 <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
Message-ID: <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>

Hello,

Since this has turned into a worldwide code review, I will briefly address
that, then reiterate the point of the original message.

I am working on an initial release of a package. It reveals information to
a user, sometimes in a print method-y way, sometimes in more of a verbose /
debugging way that is under control of a documented option, which defaults
to "off" or "quiet". For now, I have chosen to send all of this output
through a single functions that, yes, uses cat(). I went this direction for
an initial release to keep the package simple and accumulate some user
experience. If the "debugging mode" proves to be useful, I will rework it,
possibly using UI functionality that I believe our group might release in
the future. Rest assured, I understand cat() vs message() and the various
tradeoffs. I made mine and it is my impression that package maintainers
have this level of freedom.

The real point is: the currenrt CRAN submission process is designed for
one-way communication and there's no guarantee of continuity of reviewer.
If this type of implementation review is going to happen, it seems that
many aspects of the process would need to change, to make sure these new
standards are applied consistently to every submission and that existing
package are brought up to current standards.

To clarify something for Joris, I am not aware of any special channel of
communication or influence between CRAN and the R Foundation (of which I am
also a member). I think this is an aspect of CRAN vs R Foundation (vs R
Core even) that is unclear to many. These entities operate quite
independently, except for the fact that specific people belong to more than
one. So RF members interact with CRAN the same way as any other of member
of the community.

-- Jenny

On Wed, May 15, 2019 at 6:43 AM Jim Hester <james.f.hester at gmail.com> wrote:

> Sorry first sentence should read
>
> I agree that `message()` is ideally preferred, precisely because
> of the reasons Martin stated, it is easily controlled by the user.
>
> On Wed, May 15, 2019 at 9:41 AM Jim Hester <james.f.hester at gmail.com>
> wrote:
> >
> > I agree that `message()` is in an ideally preferred, precisely because
> > of the reasons Martin stated, it is easily controlled by the user.
> >
> > Unfortunately, in the real world, the windows R gui console and
> > RStudio (which copied behavior) color messages, and anything on stderr
> > in fact, in red, which confuses most users who are trained to treat
> > messages in red as errors.
> >
> > This also makes using colored output (where available) more
> > challenging when using `message()`.  You either have to accept the
> > text as red, or unconditionally change the text color to black or
> > similar, which can then be unreadable if the user is using a dark
> > color theme.
> >
> > Jenny is an experienced package developer. She knew this tradeoff and
> > the use of `cat()` in gargle was deliberate choice in an imperfect
> > world. She did not make this decision out of ignorance of a better
> > way.
> >
> > However there is no way for Jenny or any other package developers to
> > have a dialog during a CRAN submission, the communication is only in
> > one direction, if she resubmits explaining her rationale for the
> > choice she may not even have the same reviewer the next time.
> >
> > Bioconductor seems to have a much better review process for
> > submissions, with real dialog between the reviewer and package author,
> > perhaps CRAN can learn from that process and improve the submission
> > experience in the future.
> >
> > Jim
> >
> > On Wed, May 15, 2019 at 7:41 AM Martin Morgan <mtmorgan.bioc at gmail.com>
> wrote:
> > >
> > > message() / warning() / stop() write to stderr whereas print() / cat()
> write (by default) to stdout. Even without being able to suppress messages,
> it is well-established practice (the story is that this is the reason why
> 'stderr' was introduced into unix,
> https://www.jstorimer.com/blogs/workingwithcode/7766119-when-to-use-stderr-instead-of-stdout
> ) to separate diagnostic messages from program output. I agree that gargle
> (in particular, and packages in general, given the theme of this mailing
> list) would be a better package if it used message() where it now uses
> cat().
> > >
> > > Martin
> > >
> > > ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys" <
> r-package-devel-bounces at r-project.org on behalf of Joris.Meys at ugent.be>
> wrote:
> > >
> > >     2) Where cat() is used in gargle, message() is a better option for
> the
> > >     following reason:
> > >
> > >     > myfun <- function(){cat("Yes");message("No")}
> > >     > suppressMessages(myfun())
> > >     Yes
> > >
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@rk@v@nder|oo @end|ng |rom gm@||@com  Wed May 15 17:49:51 2019
From: m@rk@v@nder|oo @end|ng |rom gm@||@com (Mark van der Loo)
Date: Wed, 15 May 2019 17:49:51 +0200
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
 <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
 <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
Message-ID: <CAOKDuOg7-HXOAc+gia7uzjs3+=80tJD=MTKf_EtJi-X11QASJg@mail.gmail.com>

For what it's worth,

I recently submitted a new package that was initially refused (with
comments) by CRAN. I updated number of them accordingly, but there were a
few that with good reasons I could not change. I explained this in the
comments when uploading a new version and it got accepted. So I don't see
the problem.

(The case here was a use of \dontrun{}. I had to switch an example off
because a warning was thrown which would upset R CMD check. But
demonstrating the warning was exactly the point of the example.)

All this aside. I think it is extremely unethical to publish privately sent
CRAN emails on GH, including personal details such as name and e-mail
address of the sender without their explicit consent.


Best,
Mark





On Wed, May 15, 2019 at 4:44 PM Jennifer Bryan <jenny.f.bryan at gmail.com>
wrote:

> Hello,
>
> Since this has turned into a worldwide code review, I will briefly address
> that, then reiterate the point of the original message.
>
> I am working on an initial release of a package. It reveals information to
> a user, sometimes in a print method-y way, sometimes in more of a verbose /
> debugging way that is under control of a documented option, which defaults
> to "off" or "quiet". For now, I have chosen to send all of this output
> through a single functions that, yes, uses cat(). I went this direction for
> an initial release to keep the package simple and accumulate some user
> experience. If the "debugging mode" proves to be useful, I will rework it,
> possibly using UI functionality that I believe our group might release in
> the future. Rest assured, I understand cat() vs message() and the various
> tradeoffs. I made mine and it is my impression that package maintainers
> have this level of freedom.
>
> The real point is: the currenrt CRAN submission process is designed for
> one-way communication and there's no guarantee of continuity of reviewer.
> If this type of implementation review is going to happen, it seems that
> many aspects of the process would need to change, to make sure these new
> standards are applied consistently to every submission and that existing
> package are brought up to current standards.
>
> To clarify something for Joris, I am not aware of any special channel of
> communication or influence between CRAN and the R Foundation (of which I am
> also a member). I think this is an aspect of CRAN vs R Foundation (vs R
> Core even) that is unclear to many. These entities operate quite
> independently, except for the fact that specific people belong to more than
> one. So RF members interact with CRAN the same way as any other of member
> of the community.
>
> -- Jenny
>
> On Wed, May 15, 2019 at 6:43 AM Jim Hester <james.f.hester at gmail.com>
> wrote:
>
> > Sorry first sentence should read
> >
> > I agree that `message()` is ideally preferred, precisely because
> > of the reasons Martin stated, it is easily controlled by the user.
> >
> > On Wed, May 15, 2019 at 9:41 AM Jim Hester <james.f.hester at gmail.com>
> > wrote:
> > >
> > > I agree that `message()` is in an ideally preferred, precisely because
> > > of the reasons Martin stated, it is easily controlled by the user.
> > >
> > > Unfortunately, in the real world, the windows R gui console and
> > > RStudio (which copied behavior) color messages, and anything on stderr
> > > in fact, in red, which confuses most users who are trained to treat
> > > messages in red as errors.
> > >
> > > This also makes using colored output (where available) more
> > > challenging when using `message()`.  You either have to accept the
> > > text as red, or unconditionally change the text color to black or
> > > similar, which can then be unreadable if the user is using a dark
> > > color theme.
> > >
> > > Jenny is an experienced package developer. She knew this tradeoff and
> > > the use of `cat()` in gargle was deliberate choice in an imperfect
> > > world. She did not make this decision out of ignorance of a better
> > > way.
> > >
> > > However there is no way for Jenny or any other package developers to
> > > have a dialog during a CRAN submission, the communication is only in
> > > one direction, if she resubmits explaining her rationale for the
> > > choice she may not even have the same reviewer the next time.
> > >
> > > Bioconductor seems to have a much better review process for
> > > submissions, with real dialog between the reviewer and package author,
> > > perhaps CRAN can learn from that process and improve the submission
> > > experience in the future.
> > >
> > > Jim
> > >
> > > On Wed, May 15, 2019 at 7:41 AM Martin Morgan <mtmorgan.bioc at gmail.com
> >
> > wrote:
> > > >
> > > > message() / warning() / stop() write to stderr whereas print() /
> cat()
> > write (by default) to stdout. Even without being able to suppress
> messages,
> > it is well-established practice (the story is that this is the reason why
> > 'stderr' was introduced into unix,
> >
> https://www.jstorimer.com/blogs/workingwithcode/7766119-when-to-use-stderr-instead-of-stdout
> > ) to separate diagnostic messages from program output. I agree that
> gargle
> > (in particular, and packages in general, given the theme of this mailing
> > list) would be a better package if it used message() where it now uses
> > cat().
> > > >
> > > > Martin
> > > >
> > > > ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys" <
> > r-package-devel-bounces at r-project.org on behalf of Joris.Meys at ugent.be>
> > wrote:
> > > >
> > > >     2) Where cat() is used in gargle, message() is a better option
> for
> > the
> > > >     following reason:
> > > >
> > > >     > myfun <- function(){cat("Yes");message("No")}
> > > >     > suppressMessages(myfun())
> > > >     Yes
> > > >
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May 15 18:15:09 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 15 May 2019 12:15:09 -0400
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
 <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
 <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
Message-ID: <54c35ca8-7080-9d6b-ba6b-3252235316b9@gmail.com>

On 15/05/2019 10:40 a.m., Jennifer Bryan wrote:
> Hello,
> 
> Since this has turned into a worldwide code review, I will briefly address
> that, then reiterate the point of the original message.
> 
> I am working on an initial release of a package. It reveals information to
> a user, sometimes in a print method-y way, sometimes in more of a verbose /
> debugging way that is under control of a documented option, which defaults
> to "off" or "quiet". For now, I have chosen to send all of this output
> through a single functions that, yes, uses cat(). I went this direction for
> an initial release to keep the package simple and accumulate some user
> experience. If the "debugging mode" proves to be useful, I will rework it,
> possibly using UI functionality that I believe our group might release in
> the future. Rest assured, I understand cat() vs message() and the various
> tradeoffs. I made mine and it is my impression that package maintainers
> have this level of freedom.
> 
> The real point is: the currenrt CRAN submission process is designed for
> one-way communication and there's no guarantee of continuity of reviewer.

I don't see how you and Jim can claim this is "one way" communication. 
You are supposed to write a message to accompany your submission, and 
you did receive a message from CRAN complaining about something you did. 
  That's two way communication.

Sometimes you'll correct whatever complaint they had, and sometimes 
you'll disagree.  In either case, you should be explaining your decision 
in your next submission message.

Yes, you might get another reviewer next time, but you can make that 
less of a problem (maybe less likely, I don't know current procedures) 
by quoting the complaint when you resubmit.

You'd like to have a discussion with the CRAN reviewer in between 
submissions.  That's not really feasible, given that there are hundreds 
of times as many of us package authors as there are of CRAN reviewers.

That's why we set up this mailing list:  if you don't understand a 
message you receive from CRAN, copy it here, and others (probably not 
CRAN reviewers) will try to explain what the complaint was about.  If 
you still disagree with CRAN's decision after a resubmission, you can 
also ask for advice here.

Duncan Murdoch

> If this type of implementation review is going to happen, it seems that
> many aspects of the process would need to change, to make sure these new
> standards are applied consistently to every submission and that existing
> package are brought up to current standards.
> 
> To clarify something for Joris, I am not aware of any special channel of
> communication or influence between CRAN and the R Foundation (of which I am
> also a member). I think this is an aspect of CRAN vs R Foundation (vs R
> Core even) that is unclear to many. These entities operate quite
> independently, except for the fact that specific people belong to more than
> one. So RF members interact with CRAN the same way as any other of member
> of the community.
> 
> -- Jenny
> 
> On Wed, May 15, 2019 at 6:43 AM Jim Hester <james.f.hester at gmail.com> wrote:
> 
>> Sorry first sentence should read
>>
>> I agree that `message()` is ideally preferred, precisely because
>> of the reasons Martin stated, it is easily controlled by the user.
>>
>> On Wed, May 15, 2019 at 9:41 AM Jim Hester <james.f.hester at gmail.com>
>> wrote:
>>>
>>> I agree that `message()` is in an ideally preferred, precisely because
>>> of the reasons Martin stated, it is easily controlled by the user.
>>>
>>> Unfortunately, in the real world, the windows R gui console and
>>> RStudio (which copied behavior) color messages, and anything on stderr
>>> in fact, in red, which confuses most users who are trained to treat
>>> messages in red as errors.
>>>
>>> This also makes using colored output (where available) more
>>> challenging when using `message()`.  You either have to accept the
>>> text as red, or unconditionally change the text color to black or
>>> similar, which can then be unreadable if the user is using a dark
>>> color theme.
>>>
>>> Jenny is an experienced package developer. She knew this tradeoff and
>>> the use of `cat()` in gargle was deliberate choice in an imperfect
>>> world. She did not make this decision out of ignorance of a better
>>> way.
>>>
>>> However there is no way for Jenny or any other package developers to
>>> have a dialog during a CRAN submission, the communication is only in
>>> one direction, if she resubmits explaining her rationale for the
>>> choice she may not even have the same reviewer the next time.
>>>
>>> Bioconductor seems to have a much better review process for
>>> submissions, with real dialog between the reviewer and package author,
>>> perhaps CRAN can learn from that process and improve the submission
>>> experience in the future.
>>>
>>> Jim
>>>
>>> On Wed, May 15, 2019 at 7:41 AM Martin Morgan <mtmorgan.bioc at gmail.com>
>> wrote:
>>>>
>>>> message() / warning() / stop() write to stderr whereas print() / cat()
>> write (by default) to stdout. Even without being able to suppress messages,
>> it is well-established practice (the story is that this is the reason why
>> 'stderr' was introduced into unix,
>> https://www.jstorimer.com/blogs/workingwithcode/7766119-when-to-use-stderr-instead-of-stdout
>> ) to separate diagnostic messages from program output. I agree that gargle
>> (in particular, and packages in general, given the theme of this mailing
>> list) would be a better package if it used message() where it now uses
>> cat().
>>>>
>>>> Martin
>>>>
>>>> ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys" <
>> r-package-devel-bounces at r-project.org on behalf of Joris.Meys at ugent.be>
>> wrote:
>>>>
>>>>      2) Where cat() is used in gargle, message() is a better option for
>> the
>>>>      following reason:
>>>>
>>>>      > myfun <- function(){cat("Yes");message("No")}
>>>>      > suppressMessages(myfun())
>>>>      Yes
>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From j|ox @end|ng |rom mcm@@ter@c@  Wed May 15 19:26:43 2019
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Wed, 15 May 2019 17:26:43 +0000
Subject: [R-pkg-devel] 
 advice about errorCondition() function in the Rcmdr package
In-Reply-To: <6a4ba7b7-5219-9c71-ec44-5286122393de@statistik.tu-dortmund.de>
References: <ACD1644AA6C67E4FBD0C350625508EC836BB2647@FHSDB2D11-2.csu.mcmaster.ca>
 <6a4ba7b7-5219-9c71-ec44-5286122393de@statistik.tu-dortmund.de>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC836BB446D@FHSDB2D11-2.csu.mcmaster.ca>

Dear Uwe,

> -----Original Message-----
> From: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de]
> Sent: Wednesday, May 15, 2019 7:51 AM
> To: Fox, John <jfox at mcmaster.ca>; R Package Development <r-package-
> devel at r-project.org>
> Subject: Re: [R-pkg-devel] advice about errorCondition() function in the Rcmdr
> package
> 
> Dear John,
> 
> I guess Rcmdr::errorCondition() will rarely be called by users

I think that here rarely == never!

> (nor
> base::errorCondition), hence it should be quite safe if other packages import
> correctly into their namespace and use the version their maintainers import?

Typically an Rcmdr plug-in package will import(Rcmdr) because it will use many functions exported by the Rcmdr package.

> 
>  From that point of view, there are no changes required in Rcmdr.

Ok -- thanks -- that makes sense.

Best,
 John

> 
> Best,
> Uwe
> 
> 
> 
> On 14.05.2019 16:28, Fox, John wrote:
> > Dear list members,
> >
> > I noticed that there's a name clash between errorCondition() in the Rcmdr
> package and the new function by the same name in the base package in R
> 3.6.0. errorCondition() has been in the Rcmdr package for many years and is
> used extensively -- literally dozens of times. It's exported because it's also
> used in Rcmdr plug-in packages. The function checks for errors, prints an error
> message, cleans up after the error, and restarts a dialog.
> >
> > For the time-being, I've renamed the function as ErrorCondition() (with an
> uppercase "E") in the development version of the Rcmdr package, to be
> released in late summer, but have retained and deprecated errorCondition()
> because I expect that removing it will break most or even all Rcmdr plug-in
> packages, but I also suspect that masking base::errorCondition() can be
> problematic.
> >
> > Can anyone suggest the best way to proceed?
> >
> > Best,
> >   John
> >
> > --------------------------------------
> > John Fox, Professor Emeritus
> > McMaster University
> > Hamilton, Ontario, Canada
> > Web: socialsciences.mcmaster.ca/jfox/
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >

From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Wed May 15 19:50:00 2019
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Wed, 15 May 2019 13:50:00 -0400
Subject: [R-pkg-devel] noLD error in CRAN checks in package 'HACSim'
Message-ID: <CAMVrHdAT4hkFKa22nyi4OZm1OwzBzMp=OY8Wy+kWjTBaS5nRSg@mail.gmail.com>

Hello,

My package has recently been posted to CRAN, however, there is an
additional issue of noLD on tests on x86_64 Linux with R-devel.

I haven't yet received an email from CRAN maintainers on resolving the
issue.

However, I would like to submit an updated package version with improved
documentation and thought that I could fix this error as well.

Any ideas on how to solve the below problem?

I suspect it has something to do with numerical precision of estimates.

-----

* checking examples ... ERROR
Running examples in ?HACSim-Ex.R? failed
The error most likely occurred in:

> ### Name: HAC.simrep
> ### Title: Run a simulation of haplotype accumulation curves for
> ###   hypothetical or real species
> ### Aliases: HAC.simrep
>
> ### ** Examples
>
>
>   ## Simulate hypothetical species ##
>
>   N <- 100 # total number of sampled individuals
>   Hstar <- 10 # total number of haplotypes
>   probs <- rep(1/Hstar, Hstar) # equal haplotype frequency distribution
>
>   HACSObj <- HACHypothetical(N = N, Hstar = Hstar , probs = probs,
+   filename = "output") # outputs a CSV file called "output.csv"
>
>   ## Simulate hypothetical species - subsampling ##
>   HACSObj <- HACHypothetical(N = N, Hstar = Hstar, probs = probs,
+   perms = 1000, p = 0.95, subsample = TRUE, prop = 0.25,
+   conf.level = 0.95, filename = "output")
>
>   ## Simulate hypothetical species and all paramaters changed - subsampling ##
>   HACSObj <- HACHypothetical(N = N, Hstar = Hstar, probs = probs,
+   perms = 10000, p = 0.90, subsample = TRUE, prop = 0.15, conf.level = 0.95,
+   filename = "output")
>
>   HAC.simrep(HACSObj) # runs a simulation

 Simulating haplotype accumulation...


  |
  |
  |   0%Error in HAC.sim(N = envr$N, Hstar = envr$Hstar, probs =
envr$probs, perms = envr$perms,  :
  probs must sum to 1
Calls: HAC.simrep -> HAC.sim
Execution halted
* checking PDF version of manual ... OK
* DONE

Status: 1 ERROR
See
  ?/data/gannet/ripley/R/packages/tests-noLD/HACSim.Rcheck/00check.log?
for details.


Thanks.


Cheers,

Jarrett

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed May 15 20:17:13 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 15 May 2019 20:17:13 +0200
Subject: [R-pkg-devel] noLD error in CRAN checks in package 'HACSim'
In-Reply-To: <CAMVrHdAT4hkFKa22nyi4OZm1OwzBzMp=OY8Wy+kWjTBaS5nRSg@mail.gmail.com>
References: <CAMVrHdAT4hkFKa22nyi4OZm1OwzBzMp=OY8Wy+kWjTBaS5nRSg@mail.gmail.com>
Message-ID: <a714354d-c92e-0740-0def-57892971c227@statistik.tu-dortmund.de>



On 15.05.2019 19:50, Jarrett Phillips wrote:
> Hello,
> 
> My package has recently been posted to CRAN, however, there is an
> additional issue of noLD on tests on x86_64 Linux with R-devel.
> 
> I haven't yet received an email from CRAN maintainers on resolving the
> issue.
> 
> However, I would like to submit an updated package version with improved
> documentation and thought that I could fix this error as well.
> 
> Any ideas on how to solve the below problem?
> 
> I suspect it has something to do with numerical precision of estimates.

Right, apparently there is some test that tries to confirm that "probs 
must sum to 1" and that is not exactly true on platforms without long 
doubles. You can test for that via all.equal(), perhaps you have to 
adjust the tolerance.

Best,
Uwe Ligges



> 
> -----
> 
> * checking examples ... ERROR
> Running examples in ?HACSim-Ex.R? failed
> The error most likely occurred in:
> 
>> ### Name: HAC.simrep
>> ### Title: Run a simulation of haplotype accumulation curves for
>> ###   hypothetical or real species
>> ### Aliases: HAC.simrep
>>
>> ### ** Examples
>>
>>
>>    ## Simulate hypothetical species ##
>>
>>    N <- 100 # total number of sampled individuals
>>    Hstar <- 10 # total number of haplotypes
>>    probs <- rep(1/Hstar, Hstar) # equal haplotype frequency distribution
>>
>>    HACSObj <- HACHypothetical(N = N, Hstar = Hstar , probs = probs,
> +   filename = "output") # outputs a CSV file called "output.csv"
>>
>>    ## Simulate hypothetical species - subsampling ##
>>    HACSObj <- HACHypothetical(N = N, Hstar = Hstar, probs = probs,
> +   perms = 1000, p = 0.95, subsample = TRUE, prop = 0.25,
> +   conf.level = 0.95, filename = "output")
>>
>>    ## Simulate hypothetical species and all paramaters changed - subsampling ##
>>    HACSObj <- HACHypothetical(N = N, Hstar = Hstar, probs = probs,
> +   perms = 10000, p = 0.90, subsample = TRUE, prop = 0.15, conf.level = 0.95,
> +   filename = "output")
>>
>>    HAC.simrep(HACSObj) # runs a simulation
> 
>   Simulating haplotype accumulation...
> 
> 
>    |
>    |
>    |   0%Error in HAC.sim(N = envr$N, Hstar = envr$Hstar, probs =
> envr$probs, perms = envr$perms,  :
>    probs must sum to 1
> Calls: HAC.simrep -> HAC.sim
> Execution halted
> * checking PDF version of manual ... OK
> * DONE
> 
> Status: 1 ERROR
> See
>    ?/data/gannet/ripley/R/packages/tests-noLD/HACSim.Rcheck/00check.log?
> for details.
> 
> 
> Thanks.
> 
> 
> Cheers,
> 
> Jarrett
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From b|erner @end|ng |rom mtho|yoke@edu  Wed May 15 23:09:55 2019
From: b|erner @end|ng |rom mtho|yoke@edu (Barbara Lerner)
Date: Wed, 15 May 2019 17:09:55 -0400
Subject: [R-pkg-devel] R CMD check works but with devtools::check() examples
 fail
Message-ID: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>

I have just upgraded to R 3.6.0 and when building and checking my 
package, R CMD check passes all the checks, including running the 
examples, but devtools::check reports a failure when running the 
examples.? I have also run the example successfully manually in RStudio. 
I would appreciate help in understanding what devtools::check is doing 
that R CMD check is not doing, or help in understanding the failure 
report that devtools::check provides.

Here are somewhat abbreviated outputs from each:


~/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite -> R CMD check .
* using log directory 
?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/..Rcheck?
* using R version 3.6.0 (2019-04-26)
* using platform: x86_64-apple-darwin15.6.0 (64-bit)
* using session charset: UTF-8
* checking for file ?./DESCRIPTION? ... OK
* this is package ?rdtLite? version ?1.0.3?
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... NOTE
Found the following hidden files and directories:
 ? .commit
 ? ..Rcheck
These were most likely included in error. See section ?Package
structure? in the ?Writing R Extensions? manual.
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?rdtLite? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... WARNING
Found the following directory with the name of a check directory:
 ? ./..Rcheck
Most likely, these were included erroneously.
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies 
... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking dependencies in R code ... NOTE
Namespace in Imports field not imported from: ?gtools?
 ? All declared Imports should be used.
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ... OK
* checking for unstated dependencies in ?tests? ... OK
* checking tests ...
 ? Running ?test-all.R?
 ?OK
* checking PDF version of manual ... OK
* DONE

Status: 1 WARNING, 2 NOTEs



~/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite -> Rscript -e 
"devtools::check()"
Updating rdtLite documentation
Warning: roxygen2 requires Encoding: UTF-8
Writing NAMESPACE
Loading rdtLite
Registered S3 methods overwritten by 'ggplot2':
 ? method???????? from
 ? [.quosures???? rlang
 ? c.quosures???? rlang
 ? print.quosures rlang
Writing NAMESPACE
?? Building ????????????????????????????????????????????????????????? 
rdtLite ??
Setting env vars:
? CFLAGS??? : -Wall -pedantic -fdiagnostics-color=always
? CXXFLAGS? : -Wall -pedantic -fdiagnostics-color=always
? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
????????????????????????????????????????????????????????????????????????????????
 ?? checking for file 
?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src?? checking 
for file 
?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/DESCRIPTION?
?? preparing ?rdtLite?:
?? checking DESCRIPTION meta-information ...
?? checking for LF line-endings in source and make files and shell scripts
?? checking for empty or unneeded directories
?? building ?rdtLite_1.0.3.tar.gz?

?? Checking ????????????????????????????????????????????????????????? 
rdtLite ??
Setting env vars:
? _R_CHECK_CRAN_INCOMING_REMOTE_: FALSE
? _R_CHECK_CRAN_INCOMING_?????? : FALSE
? _R_CHECK_FORCE_SUGGESTS_????? : FALSE
?? R CMD check 
?????????????????????????????????????????????????????????????????
?? using log directory 
?/private/var/folders/66/3lfdj29j1wb48v_s298qtbwm0000gn/T/Rtmpln2xE0/rdtLite.Rcheck?
?? using R version 3.6.0 (2019-04-26)
?? using platform: x86_64-apple-darwin15.6.0 (64-bit)
?? using session charset: UTF-8
?? using options ?--no-manual --as-cran?
?? checking for file ?rdtLite/DESCRIPTION?
?? this is package ?rdtLite? version ?1.0.3?
?? checking package namespace information ...
?? checking package dependencies (3.1s)
?? checking if this is a source package
?? checking if there is a namespace
?? checking for executable files (439ms)
N? checking for hidden files and directories
 ?? Found the following hidden files and directories:
 ???? .commit
 ?? These were most likely included in error. See section ?Package
 ?? structure? in the ?Writing R Extensions? manual.
?? checking for portable file names
?? checking for sufficient/correct file permissions
?? checking whether package ?rdtLite? can be installed (3s)
?? checking installed package size ...
?? checking package directory ...
?? checking for future file timestamps ...
?? checking DESCRIPTION meta-information ...
?? checking top-level files
?? checking for left-over files
?? checking index information
?? checking package subdirectories ...
?? checking R files for non-ASCII characters ...
?? checking R files for syntax errors ...
?? checking whether the package can be loaded ...
?? checking whether the package can be loaded with stated dependencies ...
?? checking whether the package can be unloaded cleanly ...
?? checking whether the namespace can be loaded with stated dependencies ...
?? checking whether the namespace can be unloaded cleanly ...
?? checking dependencies in R code (800ms)
?? checking S3 generic/method consistency (760ms)
?? checking replacement functions ...
?? checking foreign function calls (437ms)
?? checking R code for possible problems (5.5s)
?? checking Rd files ...
?? checking Rd metadata ...
?? checking Rd line widths ...
?? checking Rd cross-references ...
?? checking for missing documentation entries ...
?? checking for code/documentation mismatches (563ms)
?? checking Rd \usage sections (879ms)
?? checking Rd contents ...
?? checking for unstated dependencies in examples ...
E? checking examples (2s)
 ?? Running examples in ?rdtLite-Ex.R? failed
 ?? The error most likely occurred in:

 ?? > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
 ?? > ### Name: prov.json
 ?? > ### Title: Provenance Access Functions
 ?? > ### Aliases: prov.json prov.dir prov.visualize prov.summarize
 ?? >
 ?? > ### ** Examples
 ?? >
 ?? > prov.init()
 ?? > a <- 1
 ??? ----------- FAILURE REPORT --------------
 ??? --- failure: length > 1 in coercion to logical ---
 ??? --- srcref ---
 ?? :
 ??? --- package (from environment) ---
 ?? rdtLite
 ??? --- call from context ---
 ?? .ddg.proc.node("Operation", cmd at abbrev, cmd at abbrev, functions.called 
= cmd at functions.called,
 ?????? cmd = cmd)
 ??? --- call from argument ---
 ?? !is.null(functions.called) && !is.na(functions.called)
 ??? --- R stacktrace ---
 ?? where 1: .ddg.proc.node("Operation", cmd at abbrev, cmd at abbrev, 
functions.called = cmd at functions.called,
 ?????? cmd = cmd)
 ?? where 2: .ddg.parse.commands(as.expression(task), environ = .GlobalEnv,
 ?????? run.commands = FALSE)
 ?? where 3: (function (task, result, success, printed)
 ?? {
 ?????? .ddg.parse.commands(as.expression(task), environ = .GlobalEnv,
 ?????????? run.commands = FALSE)
 ?????? return(TRUE)
 ?? })(base::quote(a <- 1), 1, TRUE, FALSE)

 ??? --- value of length: 3 type: logical ---
 ?? [1] TRUE TRUE TRUE

 ? .... more lines omitted ...

 ??? ----------- END OF FAILURE REPORT --------------
 ?? Fatal error: length > 1 in coercion to logical
?? checking for unstated dependencies in ?tests? ...
?? checking tests ...
?? Running ?test-all.R? (685ms)


-- 
<http://www.getpostbox.com>Barbara Lerner
Professor
Computer Science Department
Mount Holyoke College

<http://www.getpostbox.com>

	[[alternative HTML version deleted]]


From hongoo| @end|ng |rom m|cro@o|t@com  Wed May 15 23:18:20 2019
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Wed, 15 May 2019 21:18:20 +0000
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAOKDuOg7-HXOAc+gia7uzjs3+=80tJD=MTKf_EtJi-X11QASJg@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
 <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
 <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
 <CAOKDuOg7-HXOAc+gia7uzjs3+=80tJD=MTKf_EtJi-X11QASJg@mail.gmail.com>
Message-ID: <SG2P15301MB00770F8284BA6AF6BD0C5D01A6090@SG2P15301MB0077.APCP153.PROD.OUTLOOK.COM>

I had a similar experience with a couple of my package updates needing changes. The background is that I have a family of packages for talking to Microsoft's Azure cloud service from R, and my examples are all marked \dontrun because they need an Azure subscription to work. This had previously been cleared with Uwe Ligges, but I guess the other CRAN reviewers weren't aware of this.
 
In both cases, replying to the CRAN email and cc'ing Uwe resolved the issue quickly and without fuss.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Mark van der Loo
Sent: Thursday, 16 May 2019 1:50 AM
To: Jennifer Bryan <jenny.f.bryan at gmail.com>
Cc: R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] CRAN student assistants

For what it's worth,

I recently submitted a new package that was initially refused (with
comments) by CRAN. I updated number of them accordingly, but there were a few that with good reasons I could not change. I explained this in the comments when uploading a new version and it got accepted. So I don't see the problem.

(The case here was a use of \dontrun{}. I had to switch an example off because a warning was thrown which would upset R CMD check. But demonstrating the warning was exactly the point of the example.)

All this aside. I think it is extremely unethical to publish privately sent CRAN emails on GH, including personal details such as name and e-mail address of the sender without their explicit consent.


Best,
Mark





On Wed, May 15, 2019 at 4:44 PM Jennifer Bryan <jenny.f.bryan at gmail.com>
wrote:

> Hello,
>
> Since this has turned into a worldwide code review, I will briefly 
> address that, then reiterate the point of the original message.
>
> I am working on an initial release of a package. It reveals 
> information to a user, sometimes in a print method-y way, sometimes in 
> more of a verbose / debugging way that is under control of a 
> documented option, which defaults to "off" or "quiet". For now, I have 
> chosen to send all of this output through a single functions that, 
> yes, uses cat(). I went this direction for an initial release to keep 
> the package simple and accumulate some user experience. If the 
> "debugging mode" proves to be useful, I will rework it, possibly using 
> UI functionality that I believe our group might release in the future. 
> Rest assured, I understand cat() vs message() and the various 
> tradeoffs. I made mine and it is my impression that package maintainers have this level of freedom.
>
> The real point is: the currenrt CRAN submission process is designed 
> for one-way communication and there's no guarantee of continuity of reviewer.
> If this type of implementation review is going to happen, it seems 
> that many aspects of the process would need to change, to make sure 
> these new standards are applied consistently to every submission and 
> that existing package are brought up to current standards.
>
> To clarify something for Joris, I am not aware of any special channel 
> of communication or influence between CRAN and the R Foundation (of 
> which I am also a member). I think this is an aspect of CRAN vs R 
> Foundation (vs R Core even) that is unclear to many. These entities 
> operate quite independently, except for the fact that specific people 
> belong to more than one. So RF members interact with CRAN the same way 
> as any other of member of the community.
>
> -- Jenny
>
> On Wed, May 15, 2019 at 6:43 AM Jim Hester <james.f.hester at gmail.com>
> wrote:
>
> > Sorry first sentence should read
> >
> > I agree that `message()` is ideally preferred, precisely because of 
> > the reasons Martin stated, it is easily controlled by the user.
> >
> > On Wed, May 15, 2019 at 9:41 AM Jim Hester 
> > <james.f.hester at gmail.com>
> > wrote:
> > >
> > > I agree that `message()` is in an ideally preferred, precisely 
> > > because of the reasons Martin stated, it is easily controlled by the user.
> > >
> > > Unfortunately, in the real world, the windows R gui console and 
> > > RStudio (which copied behavior) color messages, and anything on 
> > > stderr in fact, in red, which confuses most users who are trained 
> > > to treat messages in red as errors.
> > >
> > > This also makes using colored output (where available) more 
> > > challenging when using `message()`.  You either have to accept the 
> > > text as red, or unconditionally change the text color to black or 
> > > similar, which can then be unreadable if the user is using a dark 
> > > color theme.
> > >
> > > Jenny is an experienced package developer. She knew this tradeoff 
> > > and the use of `cat()` in gargle was deliberate choice in an 
> > > imperfect world. She did not make this decision out of ignorance 
> > > of a better way.
> > >
> > > However there is no way for Jenny or any other package developers 
> > > to have a dialog during a CRAN submission, the communication is 
> > > only in one direction, if she resubmits explaining her rationale 
> > > for the choice she may not even have the same reviewer the next time.
> > >
> > > Bioconductor seems to have a much better review process for 
> > > submissions, with real dialog between the reviewer and package 
> > > author, perhaps CRAN can learn from that process and improve the 
> > > submission experience in the future.
> > >
> > > Jim
> > >
> > > On Wed, May 15, 2019 at 7:41 AM Martin Morgan 
> > > <mtmorgan.bioc at gmail.com
> >
> > wrote:
> > > >
> > > > message() / warning() / stop() write to stderr whereas print() /
> cat()
> > write (by default) to stdout. Even without being able to suppress
> messages,
> > it is well-established practice (the story is that this is the 
> > reason why 'stderr' was introduced into unix,
> >
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.
> jstorimer.com%2Fblogs%2Fworkingwithcode%2F7766119-when-to-use-stderr-i
> nstead-of-stdout&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03
> dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sd
> ata=8%2F6BhGQWQqy7OOrjw4gaDRuYfPgYIdEoLEpTl6Q4hgQ%3D&amp;reserved=0
> > ) to separate diagnostic messages from program output. I agree that
> gargle
> > (in particular, and packages in general, given the theme of this 
> > mailing
> > list) would be a better package if it used message() where it now 
> > uses cat().
> > > >
> > > > Martin
> > > >
> > > > ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys" 
> > > > <
> > r-package-devel-bounces at r-project.org on behalf of 
> > Joris.Meys at ugent.be>
> > wrote:
> > > >
> > > >     2) Where cat() is used in gargle, message() is a better 
> > > > option
> for
> > the
> > > >     following reason:
> > > >
> > > >     > myfun <- function(){cat("Yes");message("No")}
> > > >     > suppressMessages(myfun())
> > > >     Yes
> > > >
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%
> > > > 2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=0
> > > > 1%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0
> > > > b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1
> > > > JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7
> > Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988
> > bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5J
> > v0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chon
> gooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f1
> 41af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BO
> ebJgbXT%2BLpOw%3D&amp;reserved=0
>

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0

From edd @end|ng |rom deb|@n@org  Thu May 16 04:31:30 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 15 May 2019 21:31:30 -0500
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
Message-ID: <23772.52098.604839.234070@rob.eddelbuettel.com>


Barbara,

On 15 May 2019 at 17:09, Barbara Lerner wrote:
| I have just upgraded to R 3.6.0 and when building and checking my 
| package, R CMD check passes all the checks, including running the 
| examples, but devtools::check reports a failure when running the 
| examples.? I have also run the example successfully manually in RStudio. 
| I would appreciate help in understanding what devtools::check is doing 
| that R CMD check is not doing, or help in understanding the failure 
| report that devtools::check provides.

I tend to not use devtools for this very potential confusion -- you are at
loss now as to what it does when you presumably simply want a convenient
wrapper for the test functions.

But it turns out that the most likely difference (using '--as-cran' or not)
is likely involved.  Try running

   R CMD check --as-cran rdtLite_1.0.3.tar.gz

and it should fail too.  At least it does for me (but I am cheap so I didn't
install the suggested packages from your interested-looking provenance
project).

Hope this helps,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From c@g|||e@p|e @end|ng |rom gm@||@com  Thu May 16 09:08:06 2019
From: c@g|||e@p|e @end|ng |rom gm@||@com (Colin Gillespie)
Date: Thu, 16 May 2019 08:08:06 +0100
Subject: [R-pkg-devel] Registered S3 methods from standard package
In-Reply-To: <CADbDLZmqXiXKXQUe4wD7kZn-iAAA5NJP8Gu1vZK-rDz7ykQnFQ@mail.gmail.com>
References: <CADbDLZkLdK7-ugPfkzAn5Mr33sSmG6fENA39RbNmrCZ-6P7smQ@mail.gmail.com>
 <d565ada9-2d82-38f1-ea05-6ac9e754ab85@fau.de>
 <50456c51-dcc4-904f-32cc-0cbfd67b7f4f@gmail.com>
 <CADbDLZmqXiXKXQUe4wD7kZn-iAAA5NJP8Gu1vZK-rDz7ykQnFQ@mail.gmail.com>
Message-ID: <CADbDLZ=_Cm2ihffOPJ3TryuotCf1+evmzhyBXiim-DvUV4-tUg@mail.gmail.com>

Hi All,

Just to close the thread for future readers.

CRAN forbid both plot.numeric() and plot.default(). Instead, I should
go down the route of pretty_plot and plot.prettyB

This means that plot(lm(1:10 ~ rnorm(10)) doesn't work and the plot()
function doesn't magically become nicer.

__But__ I do appreciate that overwriting plot.default() may cause
chaos for other package authors, so overall it's probably the correct
choice.

Thanks


colin

On Mon, 13 May 2019 at 12:26, Colin Gillespie <csgillespie at gmail.com> wrote:
>
> Dr Colin Gillespie
>
> >
> > Or more simply:  call the method prettyBplot.
>
> Rightly (but perhaps wrongly) I was trying for a simple method where
> the plots just change. If prettyB loaded, the plots just look a little
> nicer. If prettyB isn't available, then the plot function works as normal.
>
> So two possible options are:
>
>   * registerS3method - I suspect this isn't permitted.
>   * Don't override plot.default(), but override other methods. E.g.
> boxplot.list() and plot.numeric(). But is this going against the
> spirit of the law?
>
> Thanks
>
> Colin
>
> >
> > Duncan Murdoch
> >
> > >
> > > Resetting to graphics::plot.default should be made possible as well.
> > >
> > > The question remains whether registerS3method() can be used at all,
> > > since the help says:
> > >
> > >> Internal namespace support functions.  Not intended to be called
> > >>       directly, and only visible because of the special nature of the
> > >>       ?base? namespace.
> > >
> > > Cheers,
> > >
> > >       Sebastian
> > >
> > >
> > > Am 13.05.19 um 09:22 schrieb Colin Gillespie:
> > >> Dear All,
> > >>
> > >> I'm developing a small package to make plotting methods a little bit
> > >> nicer looking:
> > >>
> > >> https://github.com/jumpingrivers/prettyB/
> > >>
> > >> The general idea is to replace plot.default() with an alternative
> > >> (matching all arguments) and export. This would allow users to simply
> > >> load the package and use base graphics functions as normal, but get a
> > >> pretty graph.
> > >>
> > >> The general pattern I follow is:
> > >>
> > >> https://github.com/jumpingrivers/prettyB/blob/master/R/plot.R#L23
> > >>
> > >> which then includes S3method(plot,default) in my NAMESPACE file. When
> > >> building and checking the package I get
> > >>
> > >> Registered S3 methods from standard package(s) overwritten by 'prettyB':
> > >>      method          from
> > >>      plot.default    graphics
> > >>
> > >> which CRAN does not permit.
> > >>
> > >> Question: Is it possible to achieve the functionality I'm after
> > >> (replacing the default plot.default() functions) while following the
> > >> CRAN rules?
> > >>
> > >> Thanks
> > >>
> > >> Colin
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@ck @end|ng |rom j@ckw@@ey@com  Thu May 16 11:56:40 2019
From: j@ck @end|ng |rom j@ckw@@ey@com (Jack O. Wasey)
Date: Thu, 16 May 2019 05:56:40 -0400
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
Message-ID: <ae765e1d-2d8b-c4f8-24a9-0609d3ec5bfe@jackwasey.com>

Barbara,

On 5/15/19 5:09 PM, Barbara Lerner wrote:
> I have just upgraded to R 3.6.0 and when building and checking my
> package, R CMD check passes all the checks, including running the
> examples, but devtools::check reports a failure when running the
> examples.? I have also run the example successfully manually in RStudio.
> I would appreciate help in understanding what devtools::check is doing
> that R CMD check is not doing, or help in understanding the failure
> report that devtools::check provides.
> 
> Here are somewhat abbreviated outputs from each:
> 
> 
> ~/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite -> R CMD check .

Agree with Dirk, and also you are running R CMD check on the current 
directory, whereas Writing R Extensions recommends/insists on checking a 
tarball created using R CMD build:

"It is strongly recommended that the final checks are run on a tar 
archive prepared by R CMD build."

I've no idea how this might change checks (does it still look at 
.Rbuildignore?) but this might introduce additional problems.

Jack


> * using log directory
> ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/..Rcheck?
> * using R version 3.6.0 (2019-04-26)
> * using platform: x86_64-apple-darwin15.6.0 (64-bit)
> * using session charset: UTF-8
> * checking for file ?./DESCRIPTION? ... OK
> * this is package ?rdtLite? version ?1.0.3?
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... NOTE
> Found the following hidden files and directories:
>   ? .commit
>   ? ..Rcheck
> These were most likely included in error. See section ?Package
> structure? in the ?Writing R Extensions? manual.
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package ?rdtLite? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... WARNING
> Found the following directory with the name of a check directory:
>   ? ./..Rcheck
> Most likely, these were included erroneously.
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking dependencies in R code ... NOTE
> Namespace in Imports field not imported from: ?gtools?
>   ? All declared Imports should be used.
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ... OK
> * checking for unstated dependencies in ?tests? ... OK
> * checking tests ...
>   ? Running ?test-all.R?
>   ?OK
> * checking PDF version of manual ... OK
> * DONE
> 
> Status: 1 WARNING, 2 NOTEs
> 
> 
> 
> ~/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite -> Rscript -e
> "devtools::check()"
> Updating rdtLite documentation
> Warning: roxygen2 requires Encoding: UTF-8
> Writing NAMESPACE
> Loading rdtLite
> Registered S3 methods overwritten by 'ggplot2':
>   ? method???????? from
>   ? [.quosures???? rlang
>   ? c.quosures???? rlang
>   ? print.quosures rlang
> Writing NAMESPACE
> ?? Building ?????????????????????????????????????????????????????????
> rdtLite ??
> Setting env vars:
> ? CFLAGS??? : -Wall -pedantic -fdiagnostics-color=always
> ? CXXFLAGS? : -Wall -pedantic -fdiagnostics-color=always
> ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ????????????????????????????????????????????????????????????????????????????????
>   ?? checking for file
> ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src?? checking
> for file
> ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/DESCRIPTION?
> ?? preparing ?rdtLite?:
> ?? checking DESCRIPTION meta-information ...
> ?? checking for LF line-endings in source and make files and shell scripts
> ?? checking for empty or unneeded directories
> ?? building ?rdtLite_1.0.3.tar.gz?
> 
> ?? Checking ?????????????????????????????????????????????????????????
> rdtLite ??
> Setting env vars:
> ? _R_CHECK_CRAN_INCOMING_REMOTE_: FALSE
> ? _R_CHECK_CRAN_INCOMING_?????? : FALSE
> ? _R_CHECK_FORCE_SUGGESTS_????? : FALSE
> ?? R CMD check
> ?????????????????????????????????????????????????????????????????
> ?? using log directory
> ?/private/var/folders/66/3lfdj29j1wb48v_s298qtbwm0000gn/T/Rtmpln2xE0/rdtLite.Rcheck?
> ?? using R version 3.6.0 (2019-04-26)
> ?? using platform: x86_64-apple-darwin15.6.0 (64-bit)
> ?? using session charset: UTF-8
> ?? using options ?--no-manual --as-cran?
> ?? checking for file ?rdtLite/DESCRIPTION?
> ?? this is package ?rdtLite? version ?1.0.3?
> ?? checking package namespace information ...
> ?? checking package dependencies (3.1s)
> ?? checking if this is a source package
> ?? checking if there is a namespace
> ?? checking for executable files (439ms)
> N? checking for hidden files and directories
>   ?? Found the following hidden files and directories:
>   ???? .commit
>   ?? These were most likely included in error. See section ?Package
>   ?? structure? in the ?Writing R Extensions? manual.
> ?? checking for portable file names
> ?? checking for sufficient/correct file permissions
> ?? checking whether package ?rdtLite? can be installed (3s)
> ?? checking installed package size ...
> ?? checking package directory ...
> ?? checking for future file timestamps ...
> ?? checking DESCRIPTION meta-information ...
> ?? checking top-level files
> ?? checking for left-over files
> ?? checking index information
> ?? checking package subdirectories ...
> ?? checking R files for non-ASCII characters ...
> ?? checking R files for syntax errors ...
> ?? checking whether the package can be loaded ...
> ?? checking whether the package can be loaded with stated dependencies ...
> ?? checking whether the package can be unloaded cleanly ...
> ?? checking whether the namespace can be loaded with stated dependencies ...
> ?? checking whether the namespace can be unloaded cleanly ...
> ?? checking dependencies in R code (800ms)
> ?? checking S3 generic/method consistency (760ms)
> ?? checking replacement functions ...
> ?? checking foreign function calls (437ms)
> ?? checking R code for possible problems (5.5s)
> ?? checking Rd files ...
> ?? checking Rd metadata ...
> ?? checking Rd line widths ...
> ?? checking Rd cross-references ...
> ?? checking for missing documentation entries ...
> ?? checking for code/documentation mismatches (563ms)
> ?? checking Rd \usage sections (879ms)
> ?? checking Rd contents ...
> ?? checking for unstated dependencies in examples ...
> E? checking examples (2s)
>   ?? Running examples in ?rdtLite-Ex.R? failed
>   ?? The error most likely occurred in:
> 
>   ?? > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>   ?? > ### Name: prov.json
>   ?? > ### Title: Provenance Access Functions
>   ?? > ### Aliases: prov.json prov.dir prov.visualize prov.summarize
>   ?? >
>   ?? > ### ** Examples
>   ?? >
>   ?? > prov.init()
>   ?? > a <- 1
>   ??? ----------- FAILURE REPORT --------------
>   ??? --- failure: length > 1 in coercion to logical ---
>   ??? --- srcref ---
>   ?? :
>   ??? --- package (from environment) ---
>   ?? rdtLite
>   ??? --- call from context ---
>   ?? .ddg.proc.node("Operation", cmd at abbrev, cmd at abbrev, functions.called
> = cmd at functions.called,
>   ?????? cmd = cmd)
>   ??? --- call from argument ---
>   ?? !is.null(functions.called) && !is.na(functions.called)
>   ??? --- R stacktrace ---
>   ?? where 1: .ddg.proc.node("Operation", cmd at abbrev, cmd at abbrev,
> functions.called = cmd at functions.called,
>   ?????? cmd = cmd)
>   ?? where 2: .ddg.parse.commands(as.expression(task), environ = .GlobalEnv,
>   ?????? run.commands = FALSE)
>   ?? where 3: (function (task, result, success, printed)
>   ?? {
>   ?????? .ddg.parse.commands(as.expression(task), environ = .GlobalEnv,
>   ?????????? run.commands = FALSE)
>   ?????? return(TRUE)
>   ?? })(base::quote(a <- 1), 1, TRUE, FALSE)
> 
>   ??? --- value of length: 3 type: logical ---
>   ?? [1] TRUE TRUE TRUE
> 
>   ? .... more lines omitted ...
> 
>   ??? ----------- END OF FAILURE REPORT --------------
>   ?? Fatal error: length > 1 in coercion to logical
> ?? checking for unstated dependencies in ?tests? ...
> ?? checking tests ...
> ?? Running ?test-all.R? (685ms)
> 
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu May 16 12:08:04 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 16 May 2019 11:08:04 +0100
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <ae765e1d-2d8b-c4f8-24a9-0609d3ec5bfe@jackwasey.com>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
 <ae765e1d-2d8b-c4f8-24a9-0609d3ec5bfe@jackwasey.com>
Message-ID: <CABtg=K=RHQ-od8BJuWs5ZsRP_3ovzqR96MBu-jSzqWPy3v_5YA@mail.gmail.com>

On Thu, May 16, 2019 at 10:56 AM Jack O. Wasey <jack at jackwasey.com> wrote:
> Agree with Dirk, and also you are running R CMD check on the current
> directory,

Why do you think so? Don't the lines below the "-- Building" header
mean that devtools/rcmdcheck is building the package?

G.

[...]
> > ?? Building ?????????????????????????????????????????????????????????
> > rdtLite ??
> > Setting env vars:
> > ? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
> > ? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
> > ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ????????????????????????????????????????????????????????????????????????????????
> >      checking for file
> > ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src?  checking
> > for file
> > ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/DESCRIPTION?
> > ?  preparing ?rdtLite?:
> > ?  checking DESCRIPTION meta-information ...
> > ?  checking for LF line-endings in source and make files and shell scripts
> > ?  checking for empty or unneeded directories
> > ?  building ?rdtLite_1.0.3.tar.gz?
> >
> > ?? Checking ?????????????????????????????????????????????????????????
[...]

From j@ck @end|ng |rom j@ckw@@ey@com  Thu May 16 12:13:46 2019
From: j@ck @end|ng |rom j@ckw@@ey@com (Jack O. Wasey)
Date: Thu, 16 May 2019 06:13:46 -0400
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <CABtg=K=RHQ-od8BJuWs5ZsRP_3ovzqR96MBu-jSzqWPy3v_5YA@mail.gmail.com>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
 <ae765e1d-2d8b-c4f8-24a9-0609d3ec5bfe@jackwasey.com>
 <CABtg=K=RHQ-od8BJuWs5ZsRP_3ovzqR96MBu-jSzqWPy3v_5YA@mail.gmail.com>
Message-ID: <7048d141-1acd-7cd4-4d26-3049c62559d3@jackwasey.com>


> Why do you think so? Don't the lines below the "-- Building" header
> mean that devtools/rcmdcheck is building the package?

I saw (the last part of) this:

 > ~/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite -> R CMD check .

Sorry if I added some confusion: on closer inspection, it does look like 
this is R CMD check doing its normal thing.

> 
> G.
> 
> [...]
>>> ?? Building ?????????????????????????????????????????????????????????
>>> rdtLite ??
>>> Setting env vars:
>>> ? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
>>> ? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
>>> ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
>>> ????????????????????????????????????????????????????????????????????????????????
>>>       checking for file
>>> ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src?  checking
>>> for file
>>> ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/DESCRIPTION?
>>> ?  preparing ?rdtLite?:
>>> ?  checking DESCRIPTION meta-information ...
>>> ?  checking for LF line-endings in source and make files and shell scripts
>>> ?  checking for empty or unneeded directories
>>> ?  building ?rdtLite_1.0.3.tar.gz?
>>>
>>> ?? Checking ?????????????????????????????????????????????????????????
> [...]
>


From j@r|@ok@@nen @end|ng |rom ou|u@||  Thu May 16 12:18:31 2019
From: j@r|@ok@@nen @end|ng |rom ou|u@|| (Jari Oksanen)
Date: Thu, 16 May 2019 10:18:31 +0000
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <CABtg=K=RHQ-od8BJuWs5ZsRP_3ovzqR96MBu-jSzqWPy3v_5YA@mail.gmail.com>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
 <ae765e1d-2d8b-c4f8-24a9-0609d3ec5bfe@jackwasey.com>
 <CABtg=K=RHQ-od8BJuWs5ZsRP_3ovzqR96MBu-jSzqWPy3v_5YA@mail.gmail.com>
Message-ID: <18C0A307-6FEC-4D15-8A08-4BE18B3650F4@oulu.fi>

I think this is because the check systems set different environmental variables. I had the same problem in February, and found out that R 3.6.0 (then still to come) adds new environmental variable _R_CHECK_LENGTH_1_LOGIC2_. This *is* documented, but the documentation is well hidden in R-internals manual. It says (or said when I looked at this in early February):

_R_CHECK_LENGTH_1_LOGIC2_
Optionally check if either argument of the binary operators && and || has length greater than one. The format is the same as for _R_CHECK_LENGTH_1_CONDITION_. Default: unset (nothing is reported)

R has for ages wanted that condition if(A && B) should have length 1, but with this variable set, it also wants both A and B have length one (which is not the same thing). You need to find the place where this does not happen and fix that. If you look at the end of the error message, it even says in which case you have a length>1 component in your condition (it is given as length 3 in the diagnostic output).

I found this then because win-builder set this environmental variable, and there may be other build systems that do the same. You should fix the cases to avoid trouble.

Cheers, Jari Oksanen

On 16 May 2019, at 13:08, G?bor Cs?rdi <csardi.gabor at gmail.com<mailto:csardi.gabor at gmail.com>> wrote:

On Thu, May 16, 2019 at 10:56 AM Jack O. Wasey <jack at jackwasey.com<mailto:jack at jackwasey.com>> wrote:
Agree with Dirk, and also you are running R CMD check on the current
directory,

Why do you think so? Don't the lines below the "-- Building" header
mean that devtools/rcmdcheck is building the package?

G.

[...]
?? Building ?????????????????????????????????????????????????????????
rdtLite ??
Setting env vars:
? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
????????????????????????????????????????????????????????????????????????????????
    checking for file
?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src?  checking
for file
?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/DESCRIPTION?
?  preparing ?rdtLite?:
?  checking DESCRIPTION meta-information ...
?  checking for LF line-endings in source and make files and shell scripts
?  checking for empty or unneeded directories
?  building ?rdtLite_1.0.3.tar.gz?

?? Checking ?????????????????????????????????????????????????????????
[...]
______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu May 16 13:28:43 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 16 May 2019 07:28:43 -0400
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <ae765e1d-2d8b-c4f8-24a9-0609d3ec5bfe@jackwasey.com>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
 <ae765e1d-2d8b-c4f8-24a9-0609d3ec5bfe@jackwasey.com>
Message-ID: <50d38a40-c811-3b2e-6d03-4c80ff8f0b67@gmail.com>

On 16/05/2019 5:56 a.m., Jack O. Wasey wrote:
> Barbara,
> 
> On 5/15/19 5:09 PM, Barbara Lerner wrote:
>> I have just upgraded to R 3.6.0 and when building and checking my
>> package, R CMD check passes all the checks, including running the
>> examples, but devtools::check reports a failure when running the
>> examples.? I have also run the example successfully manually in RStudio.
>> I would appreciate help in understanding what devtools::check is doing
>> that R CMD check is not doing, or help in understanding the failure
>> report that devtools::check provides.
>>
>> Here are somewhat abbreviated outputs from each:
>>
>>
>> ~/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite -> R CMD check .
> 
> Agree with Dirk, and also you are running R CMD check on the current
> directory, whereas Writing R Extensions recommends/insists on checking a
> tarball created using R CMD build:
> 
> "It is strongly recommended that the final checks are run on a tar
> archive prepared by R CMD build."
> 
> I've no idea how this might change checks (does it still look at
> .Rbuildignore?) but this might introduce additional problems.

Running check on a directory instead of a tarball usually leads to some 
extra warnings, it typically doesn't suppress them.  (The extra warnings 
I've seen most recently are about files that would be excluded from the 
tarball.)

Duncan urdoch

> 
> Jack
> 
> 
>> * using log directory
>> ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/..Rcheck?
>> * using R version 3.6.0 (2019-04-26)
>> * using platform: x86_64-apple-darwin15.6.0 (64-bit)
>> * using session charset: UTF-8
>> * checking for file ?./DESCRIPTION? ... OK
>> * this is package ?rdtLite? version ?1.0.3?
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for executable files ... OK
>> * checking for hidden files and directories ... NOTE
>> Found the following hidden files and directories:
>>    ? .commit
>>    ? ..Rcheck
>> These were most likely included in error. See section ?Package
>> structure? in the ?Writing R Extensions? manual.
>> * checking for portable file names ... OK
>> * checking for sufficient/correct file permissions ... OK
>> * checking whether package ?rdtLite? can be installed ... OK
>> * checking installed package size ... OK
>> * checking package directory ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking for left-over files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... WARNING
>> Found the following directory with the name of a check directory:
>>    ? ./..Rcheck
>> Most likely, these were included erroneously.
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * checking whether the package can be loaded ... OK
>> * checking whether the package can be loaded with stated dependencies ... OK
>> * checking whether the package can be unloaded cleanly ... OK
>> * checking whether the namespace can be loaded with stated dependencies
>> ... OK
>> * checking whether the namespace can be unloaded cleanly ... OK
>> * checking dependencies in R code ... NOTE
>> Namespace in Imports field not imported from: ?gtools?
>>    ? All declared Imports should be used.
>> * checking S3 generic/method consistency ... OK
>> * checking replacement functions ... OK
>> * checking foreign function calls ... OK
>> * checking R code for possible problems ... OK
>> * checking Rd files ... OK
>> * checking Rd metadata ... OK
>> * checking Rd cross-references ... OK
>> * checking for missing documentation entries ... OK
>> * checking for code/documentation mismatches ... OK
>> * checking Rd \usage sections ... OK
>> * checking Rd contents ... OK
>> * checking for unstated dependencies in examples ... OK
>> * checking examples ... OK
>> * checking for unstated dependencies in ?tests? ... OK
>> * checking tests ...
>>    ? Running ?test-all.R?
>>    ?OK
>> * checking PDF version of manual ... OK
>> * DONE
>>
>> Status: 1 WARNING, 2 NOTEs
>>
>>
>>
>> ~/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite -> Rscript -e
>> "devtools::check()"
>> Updating rdtLite documentation
>> Warning: roxygen2 requires Encoding: UTF-8
>> Writing NAMESPACE
>> Loading rdtLite
>> Registered S3 methods overwritten by 'ggplot2':
>>    ? method???????? from
>>    ? [.quosures???? rlang
>>    ? c.quosures???? rlang
>>    ? print.quosures rlang
>> Writing NAMESPACE
>> ?? Building ?????????????????????????????????????????????????????????
>> rdtLite ??
>> Setting env vars:
>> ? CFLAGS??? : -Wall -pedantic -fdiagnostics-color=always
>> ? CXXFLAGS? : -Wall -pedantic -fdiagnostics-color=always
>> ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
>> ????????????????????????????????????????????????????????????????????????????????
>>    ?? checking for file
>> ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src?? checking
>> for file
>> ?/Users/blerner/git/rdtLite.check/rdtLite.Rcheck/00_pkg_src/rdtLite/DESCRIPTION?
>> ?? preparing ?rdtLite?:
>> ?? checking DESCRIPTION meta-information ...
>> ?? checking for LF line-endings in source and make files and shell scripts
>> ?? checking for empty or unneeded directories
>> ?? building ?rdtLite_1.0.3.tar.gz?
>>
>> ?? Checking ?????????????????????????????????????????????????????????
>> rdtLite ??
>> Setting env vars:
>> ? _R_CHECK_CRAN_INCOMING_REMOTE_: FALSE
>> ? _R_CHECK_CRAN_INCOMING_?????? : FALSE
>> ? _R_CHECK_FORCE_SUGGESTS_????? : FALSE
>> ?? R CMD check
>> ?????????????????????????????????????????????????????????????????
>> ?? using log directory
>> ?/private/var/folders/66/3lfdj29j1wb48v_s298qtbwm0000gn/T/Rtmpln2xE0/rdtLite.Rcheck?
>> ?? using R version 3.6.0 (2019-04-26)
>> ?? using platform: x86_64-apple-darwin15.6.0 (64-bit)
>> ?? using session charset: UTF-8
>> ?? using options ?--no-manual --as-cran?
>> ?? checking for file ?rdtLite/DESCRIPTION?
>> ?? this is package ?rdtLite? version ?1.0.3?
>> ?? checking package namespace information ...
>> ?? checking package dependencies (3.1s)
>> ?? checking if this is a source package
>> ?? checking if there is a namespace
>> ?? checking for executable files (439ms)
>> N? checking for hidden files and directories
>>    ?? Found the following hidden files and directories:
>>    ???? .commit
>>    ?? These were most likely included in error. See section ?Package
>>    ?? structure? in the ?Writing R Extensions? manual.
>> ?? checking for portable file names
>> ?? checking for sufficient/correct file permissions
>> ?? checking whether package ?rdtLite? can be installed (3s)
>> ?? checking installed package size ...
>> ?? checking package directory ...
>> ?? checking for future file timestamps ...
>> ?? checking DESCRIPTION meta-information ...
>> ?? checking top-level files
>> ?? checking for left-over files
>> ?? checking index information
>> ?? checking package subdirectories ...
>> ?? checking R files for non-ASCII characters ...
>> ?? checking R files for syntax errors ...
>> ?? checking whether the package can be loaded ...
>> ?? checking whether the package can be loaded with stated dependencies ...
>> ?? checking whether the package can be unloaded cleanly ...
>> ?? checking whether the namespace can be loaded with stated dependencies ...
>> ?? checking whether the namespace can be unloaded cleanly ...
>> ?? checking dependencies in R code (800ms)
>> ?? checking S3 generic/method consistency (760ms)
>> ?? checking replacement functions ...
>> ?? checking foreign function calls (437ms)
>> ?? checking R code for possible problems (5.5s)
>> ?? checking Rd files ...
>> ?? checking Rd metadata ...
>> ?? checking Rd line widths ...
>> ?? checking Rd cross-references ...
>> ?? checking for missing documentation entries ...
>> ?? checking for code/documentation mismatches (563ms)
>> ?? checking Rd \usage sections (879ms)
>> ?? checking Rd contents ...
>> ?? checking for unstated dependencies in examples ...
>> E? checking examples (2s)
>>    ?? Running examples in ?rdtLite-Ex.R? failed
>>    ?? The error most likely occurred in:
>>
>>    ?? > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>    ?? > ### Name: prov.json
>>    ?? > ### Title: Provenance Access Functions
>>    ?? > ### Aliases: prov.json prov.dir prov.visualize prov.summarize
>>    ?? >
>>    ?? > ### ** Examples
>>    ?? >
>>    ?? > prov.init()
>>    ?? > a <- 1
>>    ??? ----------- FAILURE REPORT --------------
>>    ??? --- failure: length > 1 in coercion to logical ---
>>    ??? --- srcref ---
>>    ?? :
>>    ??? --- package (from environment) ---
>>    ?? rdtLite
>>    ??? --- call from context ---
>>    ?? .ddg.proc.node("Operation", cmd at abbrev, cmd at abbrev, functions.called
>> = cmd at functions.called,
>>    ?????? cmd = cmd)
>>    ??? --- call from argument ---
>>    ?? !is.null(functions.called) && !is.na(functions.called)
>>    ??? --- R stacktrace ---
>>    ?? where 1: .ddg.proc.node("Operation", cmd at abbrev, cmd at abbrev,
>> functions.called = cmd at functions.called,
>>    ?????? cmd = cmd)
>>    ?? where 2: .ddg.parse.commands(as.expression(task), environ = .GlobalEnv,
>>    ?????? run.commands = FALSE)
>>    ?? where 3: (function (task, result, success, printed)
>>    ?? {
>>    ?????? .ddg.parse.commands(as.expression(task), environ = .GlobalEnv,
>>    ?????????? run.commands = FALSE)
>>    ?????? return(TRUE)
>>    ?? })(base::quote(a <- 1), 1, TRUE, FALSE)
>>
>>    ??? --- value of length: 3 type: logical ---
>>    ?? [1] TRUE TRUE TRUE
>>
>>    ? .... more lines omitted ...
>>
>>    ??? ----------- END OF FAILURE REPORT --------------
>>    ?? Fatal error: length > 1 in coercion to logical
>> ?? checking for unstated dependencies in ?tests? ...
>> ?? checking tests ...
>> ?? Running ?test-all.R? (685ms)
>>
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Thu May 16 15:31:19 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Thu, 16 May 2019 13:31:19 +0000
Subject: [R-pkg-devel] noL
Message-ID: <421f5f54d0d14e76b2f8c36bbeee6838@nyulangone.org>

Good morning -

I have one final issue that is preventing me from a successful
submission of my package simstudy to CRAN. In one of my examples, I sum
a vector of probabilities and check to make sure they sum to one.

I am getting an "noLD" error - so there is some issue with a long double. I
am a at a bit of a loss on how to go about fixing this (would rounding help),
but more importantly, how can I check this to make sure I have fixed it -
since I do not get an error on my local system (and it passes all other
checks.)

I've included the log from the noLD
(https://www.stats.ox.ac.uk/pub/bdr/noLD/simstudy.out) below.

- Keith


* checking examples ... ERROR
Running examples in ?simstudy-Ex.R? failed
The error most likely occurred in:

> ### Name: genCorOrdCat
> ### Title: Generate correlated ordinal categorical data
> ### Aliases: genCorOrdCat
>
> ### ** Examples
>
> #### Set definitions
>
> baseprobs <- matrix(c(0.2, 0.1, 0.1, 0.6,
+                       0.7, 0.2, 0.1, 0,
+                       0.5, 0.2, 0.3, 0,
+                       0.4, 0.2, 0.4, 0,
+                       0.6, 0.2, 0.2, 0),
+                     nrow = 5, byrow = TRUE)
>
> set.seed(333)
> dT <- genData(1000)
>
> dX <- genCorOrdCat(dT, adjVar = NULL, baseprobs = baseprobs,
+                    prefix = "q", rho = .125, corstr = "cs")
Error in genCorOrdCat(dT, adjVar = NULL, baseprobs = baseprobs, prefix = "q",  :
  Probabilities are not properly specified
Execution halted
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ?inst/doc? ... OK
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* DONE

Status: 1 ERROR
See
  ?/data/gannet/ripley/R/packages/tests-noLD/simstudy.Rcheck/00check.log?
for details.


------------------------------------------------------------
This email message, including any attachments, is for th...{{dropped:14}}


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu May 16 15:39:22 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 16 May 2019 06:39:22 -0700
Subject: [R-pkg-devel] noL
In-Reply-To: <421f5f54d0d14e76b2f8c36bbeee6838@nyulangone.org>
References: <421f5f54d0d14e76b2f8c36bbeee6838@nyulangone.org>
Message-ID: <141FCF84-6035-40CE-AABC-45BD488F3530@dcn.davis.ca.us>

It pays to read the archives before posting.... https://stat.ethz.ch/pipermail/r-package-devel/2019q2/003941.html

On May 16, 2019 6:31:19 AM PDT, "Goldfeld, Keith" <Keith.Goldfeld at nyulangone.org> wrote:
>Good morning -
>
>I have one final issue that is preventing me from a successful
>submission of my package simstudy to CRAN. In one of my examples, I sum
>a vector of probabilities and check to make sure they sum to one.
>
>I am getting an "noLD" error - so there is some issue with a long
>double. I
>am a at a bit of a loss on how to go about fixing this (would rounding
>help),
>but more importantly, how can I check this to make sure I have fixed it
>-
>since I do not get an error on my local system (and it passes all other
>checks.)
>
>I've included the log from the noLD
>(https://www.stats.ox.ac.uk/pub/bdr/noLD/simstudy.out) below.
>
>- Keith
>
>
>* checking examples ... ERROR
>Running examples in ?simstudy-Ex.R? failed
>The error most likely occurred in:
>
>> ### Name: genCorOrdCat
>> ### Title: Generate correlated ordinal categorical data
>> ### Aliases: genCorOrdCat
>>
>> ### ** Examples
>>
>> #### Set definitions
>>
>> baseprobs <- matrix(c(0.2, 0.1, 0.1, 0.6,
>+                       0.7, 0.2, 0.1, 0,
>+                       0.5, 0.2, 0.3, 0,
>+                       0.4, 0.2, 0.4, 0,
>+                       0.6, 0.2, 0.2, 0),
>+                     nrow = 5, byrow = TRUE)
>>
>> set.seed(333)
>> dT <- genData(1000)
>>
>> dX <- genCorOrdCat(dT, adjVar = NULL, baseprobs = baseprobs,
>+                    prefix = "q", rho = .125, corstr = "cs")
>Error in genCorOrdCat(dT, adjVar = NULL, baseprobs = baseprobs, prefix
>= "q",  :
>  Probabilities are not properly specified
>Execution halted
>* checking for unstated dependencies in vignettes ... OK
>* checking package vignettes in ?inst/doc? ... OK
>* checking re-building of vignette outputs ... OK
>* checking PDF version of manual ... OK
>* DONE
>
>Status: 1 ERROR
>See
>?/data/gannet/ripley/R/packages/tests-noLD/simstudy.Rcheck/00check.log?
>for details.
>
>
>------------------------------------------------------------
>This email message, including any attachments, is for\ ...{{dropped:6}}


From h@w|ckh@m @end|ng |rom gm@||@com  Thu May 16 16:55:26 2019
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Thu, 16 May 2019 09:55:26 -0500
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
Message-ID: <CABdHhvFRL9cCJwXZ3toW5vK9KM_Sd0YA=EMcTSSPsnY_mosafw@mail.gmail.com>

Hi all,

The thread seems to have drifted off topic. I really didn't want this
to devolve into a discussion about when cat() or message() is more
appropriate ? I have complete faith in Jenny Bryan's ability to
understand technical tradeoffs and pick the most appropriate given the
constraints. I am most interested in understanding what level of
discretion CRAN's "Studentischer administrativer Mitarbeiter" have to
critique the implementation of R packages, particularly for packages
that do not yield R CMD check problems or otherwise violate CRAN
policies.

I mean no disrespect towards the CRAN maintainers (whose tireless
efforts are a crucial part of making R the success that it is), but I
don't think it's unreasonable to enquire as to who is involved in a
crucial piece of open source community infrastructure, and, if
students are involved, what their scope of work is and how they are
trained and supervised.

I do recognise that my question "Who are they?" may have been
perceived as overly intrusive. To clarify: I don't want to know names
or other personally identifying information, but I would like to know
in general terms how many there are, and what backgrounds they have.
Similarly, I don't want to know how much they are paid, just whether
or not they are volunteers or employees.

Hadley

On Tue, May 14, 2019 at 10:23 AM Hadley Wickham <h.wickham at gmail.com> wrote:
>
> Hi all,
>
> Several people on my team have received responses to their CRAN
> submissions from new members of the CRAN team who appear to be student
> assistants (judging from their job titles: "Studentischer
> administrativer Mitarbeiter"). From the outside, they appear to be
> exercising editorial control[^1] and conducting design reviews[^2].
>
> CRAN is a critical piece of R community infrastructure, and I am sure
> these students have been surrounded by the proper checks and balances,
> but it's not obvious what their role is from the outside. I'd really
> appreciate knowing a little more about them:
>
> * Who are they?
>
> * Are they paid employees or volunteers?
>
> * What is their scope of work?
>
> * How are they trained?
>
> * If we believe that they have made a mistake, how do we request
>   review from a senior CRAN member?
>
> * They appear to be able to apply additional discretionary criteria
>   that are not included in R CMD check or documented in the CRAN policies.
>   Is this true? If so, what is the scope of these additional checks?
>
> Hadley
>
> [^1]: The devoid package was rejected because the student assistant
> did not understand the purpose of the package.
>
> [^2]: The gargle package was rejected because the student assistant
> believed that the use of cat() was incorrect. It was not.
>
> --
> http://hadley.nz



-- 
http://hadley.nz


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu May 16 17:10:47 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 16 May 2019 16:10:47 +0100
Subject: [R-pkg-devel] noL
In-Reply-To: <421f5f54d0d14e76b2f8c36bbeee6838@nyulangone.org>
References: <421f5f54d0d14e76b2f8c36bbeee6838@nyulangone.org>
Message-ID: <CABtg=K=P4ajSbGbnep-3XKDWzOe-8xiaTwm4gXo62cKOtNf0JQ@mail.gmail.com>

To make sure that you have fixed it, you need an R build without long
double support. If you don't want to do this yourself, R-hub now has a
platform without long doubles, so you can do:

rhub::check(platform = "debian-gcc-devel-nold")

You can also do it locally with rhub::local_check_linux() or grab the
Docker image from
https://cloud.docker.com/u/rhub/repository/docker/rhub/debian-gcc-devel-nold

Cheers,
Gabor

On Thu, May 16, 2019 at 2:31 PM Goldfeld, Keith
<Keith.Goldfeld at nyulangone.org> wrote:
>
> Good morning -
>
> I have one final issue that is preventing me from a successful
> submission of my package simstudy to CRAN. In one of my examples, I sum
> a vector of probabilities and check to make sure they sum to one.
>
> I am getting an "noLD" error - so there is some issue with a long double. I
> am a at a bit of a loss on how to go about fixing this (would rounding help),
> but more importantly, how can I check this to make sure I have fixed it -
> since I do not get an error on my local system (and it passes all other
> checks.)
>
> I've included the log from the noLD
> (https://www.stats.ox.ac.uk/pub/bdr/noLD/simstudy.out) below.
>
> - Keith
>
>
> * checking examples ... ERROR
> Running examples in ?simstudy-Ex.R? failed
> The error most likely occurred in:
>
> > ### Name: genCorOrdCat
> > ### Title: Generate correlated ordinal categorical data
> > ### Aliases: genCorOrdCat
> >
> > ### ** Examples
> >
> > #### Set definitions
> >
> > baseprobs <- matrix(c(0.2, 0.1, 0.1, 0.6,
> +                       0.7, 0.2, 0.1, 0,
> +                       0.5, 0.2, 0.3, 0,
> +                       0.4, 0.2, 0.4, 0,
> +                       0.6, 0.2, 0.2, 0),
> +                     nrow = 5, byrow = TRUE)
> >
> > set.seed(333)
> > dT <- genData(1000)
> >
> > dX <- genCorOrdCat(dT, adjVar = NULL, baseprobs = baseprobs,
> +                    prefix = "q", rho = .125, corstr = "cs")
> Error in genCorOrdCat(dT, adjVar = NULL, baseprobs = baseprobs, prefix = "q",  :
>   Probabilities are not properly specified
> Execution halted
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in ?inst/doc? ... OK
> * checking re-building of vignette outputs ... OK
> * checking PDF version of manual ... OK
> * DONE
>
> Status: 1 ERROR
> See
>   ?/data/gannet/ripley/R/packages/tests-noLD/simstudy.Rcheck/00check.log?
> for details.
>
>
> ------------------------------------------------------------
> This email message, including any attachments, is for ...{{dropped:6}}


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu May 16 17:14:24 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 16 May 2019 17:14:24 +0200
Subject: [R-pkg-devel] noL
In-Reply-To: <421f5f54d0d14e76b2f8c36bbeee6838@nyulangone.org>
References: <421f5f54d0d14e76b2f8c36bbeee6838@nyulangone.org>
Message-ID: <2eb718bb-aea2-dc05-fec4-9ccc5c9cfc7d@statistik.tu-dortmund.de>

 From https://www.stats.ox.ac.uk/pub/bdr/noLD/README.txt :
"tests on x86_64 Linux with R-devel configured --disable-long-double"
in order to mimick platforms without support for long doubles.


Best,
Uwe Ligges





On 16.05.2019 15:31, Goldfeld, Keith wrote:
> Good morning -
> 
> I have one final issue that is preventing me from a successful
> submission of my package simstudy to CRAN. In one of my examples, I sum
> a vector of probabilities and check to make sure they sum to one.
> 
> I am getting an "noLD" error - so there is some issue with a long double. I
> am a at a bit of a loss on how to go about fixing this (would rounding help),
> but more importantly, how can I check this to make sure I have fixed it -
> since I do not get an error on my local system (and it passes all other
> checks.)
> 
> I've included the log from the noLD
> (https://www.stats.ox.ac.uk/pub/bdr/noLD/simstudy.out) below.
> 
> - Keith
> 
> 
> * checking examples ... ERROR
> Running examples in ?simstudy-Ex.R? failed
> The error most likely occurred in:
> 
>> ### Name: genCorOrdCat
>> ### Title: Generate correlated ordinal categorical data
>> ### Aliases: genCorOrdCat
>>
>> ### ** Examples
>>
>> #### Set definitions
>>
>> baseprobs <- matrix(c(0.2, 0.1, 0.1, 0.6,
> +                       0.7, 0.2, 0.1, 0,
> +                       0.5, 0.2, 0.3, 0,
> +                       0.4, 0.2, 0.4, 0,
> +                       0.6, 0.2, 0.2, 0),
> +                     nrow = 5, byrow = TRUE)
>>
>> set.seed(333)
>> dT <- genData(1000)
>>
>> dX <- genCorOrdCat(dT, adjVar = NULL, baseprobs = baseprobs,
> +                    prefix = "q", rho = .125, corstr = "cs")
> Error in genCorOrdCat(dT, adjVar = NULL, baseprobs = baseprobs, prefix = "q",  :
>    Probabilities are not properly specified
> Execution halted
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in ?inst/doc? ... OK
> * checking re-building of vignette outputs ... OK
> * checking PDF version of manual ... OK
> * DONE
> 
> Status: 1 ERROR
> See
>    ?/data/gannet/ripley/R/packages/tests-noLD/simstudy.Rcheck/00check.log?
> for details.
> 
> 
> ------------------------------------------------------------
> This email message, including any attachments, is for ...{{dropped:8}}


From @|ej@ndrob@r@nek @end|ng |rom gm@||@com  Thu May 16 17:19:48 2019
From: @|ej@ndrob@r@nek @end|ng |rom gm@||@com (alejandro baranek)
Date: Thu, 16 May 2019 12:19:48 -0300
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CABdHhvFRL9cCJwXZ3toW5vK9KM_Sd0YA=EMcTSSPsnY_mosafw@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CABdHhvFRL9cCJwXZ3toW5vK9KM_Sd0YA=EMcTSSPsnY_mosafw@mail.gmail.com>
Message-ID: <CADJoD_bL4vfGiorwybp5MfD9znd0JwW7YiYthNUFz7HyHXnAGw@mail.gmail.com>

Hi!

Mi humble opinion:

I cannot evaluate the workload for CRAN maintainer, but it don't seem to be
reasonable that students can make objections with packages that "do not
yield R CMD check problems or otherwise violate CRAN policies."

Maybe CRAN maintainer team are giving review tasks for those students, for
increasing package evaluation skills. But a new protocol should be
implemented with this seamly new position, where students learning errors
doesn't obstruct the workflow of senior package developers with own QA
methods implemented, as a result of years efforts.

Is not bad new workforce helps with heavy duties: it's an excelent news.
But It cannot cause problems with tunned workflow/pipelines. Is the
internal CRAN process for package approval described somewhere?

Best, Ale.

On Thu, May 16, 2019 at 11:55 AM Hadley Wickham <h.wickham at gmail.com> wrote:

> Hi all,
>
> The thread seems to have drifted off topic. I really didn't want this
> to devolve into a discussion about when cat() or message() is more
> appropriate ? I have complete faith in Jenny Bryan's ability to
> understand technical tradeoffs and pick the most appropriate given the
> constraints. I am most interested in understanding what level of
> discretion CRAN's "Studentischer administrativer Mitarbeiter" have to
> critique the implementation of R packages, particularly for packages
> that do not yield R CMD check problems or otherwise violate CRAN
> policies.
>
> I mean no disrespect towards the CRAN maintainers (whose tireless
> efforts are a crucial part of making R the success that it is), but I
> don't think it's unreasonable to enquire as to who is involved in a
> crucial piece of open source community infrastructure, and, if
> students are involved, what their scope of work is and how they are
> trained and supervised.
>
> I do recognise that my question "Who are they?" may have been
> perceived as overly intrusive. To clarify: I don't want to know names
> or other personally identifying information, but I would like to know
> in general terms how many there are, and what backgrounds they have.
> Similarly, I don't want to know how much they are paid, just whether
> or not they are volunteers or employees.
>
> Hadley
>
> On Tue, May 14, 2019 at 10:23 AM Hadley Wickham <h.wickham at gmail.com>
> wrote:
> >
> > Hi all,
> >
> > Several people on my team have received responses to their CRAN
> > submissions from new members of the CRAN team who appear to be student
> > assistants (judging from their job titles: "Studentischer
> > administrativer Mitarbeiter"). From the outside, they appear to be
> > exercising editorial control[^1] and conducting design reviews[^2].
> >
> > CRAN is a critical piece of R community infrastructure, and I am sure
> > these students have been surrounded by the proper checks and balances,
> > but it's not obvious what their role is from the outside. I'd really
> > appreciate knowing a little more about them:
> >
> > * Who are they?
> >
> > * Are they paid employees or volunteers?
> >
> > * What is their scope of work?
> >
> > * How are they trained?
> >
> > * If we believe that they have made a mistake, how do we request
> >   review from a senior CRAN member?
> >
> > * They appear to be able to apply additional discretionary criteria
> >   that are not included in R CMD check or documented in the CRAN
> policies.
> >   Is this true? If so, what is the scope of these additional checks?
> >
> > Hadley
> >
> > [^1]: The devoid package was rejected because the student assistant
> > did not understand the purpose of the package.
> >
> > [^2]: The gargle package was rejected because the student assistant
> > believed that the use of cat() was incorrect. It was not.
> >
> > --
> > http://hadley.nz
>
>
>
> --
> http://hadley.nz
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
 alejandro baranek
@ken4rab <https://twitter.com/ken4rab>
qbotics <http://qbotics.tumblr.com/> | rpolyhedra
<https://qbotics.shinyapps.io/rpolyhedra-explorer/?_inputs_&polyhedron_color=%22%23FF0000FF%22&polyhedron_name=%22Triakis%20Tetrahedron%22&polyhedron_source=%22dmccooey%22&show_axes=false>
| surferinvaders <http://surferinvaders.tumblr.com> | algebraic-soundscapes
<http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
<http://imaginary.org/program/surfer-shuffle>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu May 16 19:06:48 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 16 May 2019 18:06:48 +0100
Subject: [R-pkg-devel] CRAN submission and the staged installation false
 positive check
Message-ID: <CABtg=KkGKSe_Cmejamkeaf8vTs9E+=uNZPjVHyODhhiEFcB9tg@mail.gmail.com>

Anyone had success releasing a package that is affected by the
"Non-staged installation was used" false positive bug?

This one:
https://cran.rstudio.com/web/checks/check_results_igraph.html
https://bugs.r-project.org/bugzilla/show_bug.cgi?id=17545

If yes, how did you do it? Thanks!
Gabor


From jenny@|@bry@n @end|ng |rom gm@||@com  Thu May 16 19:10:29 2019
From: jenny@|@bry@n @end|ng |rom gm@||@com (Jennifer Bryan)
Date: Thu, 16 May 2019 10:10:29 -0700
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <SG2P15301MB00770F8284BA6AF6BD0C5D01A6090@SG2P15301MB0077.APCP153.PROD.OUTLOOK.COM>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
 <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
 <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
 <CAOKDuOg7-HXOAc+gia7uzjs3+=80tJD=MTKf_EtJi-X11QASJg@mail.gmail.com>
 <SG2P15301MB00770F8284BA6AF6BD0C5D01A6090@SG2P15301MB0077.APCP153.PROD.OUTLOOK.COM>
Message-ID: <CANe9BHFReQrB6cQ=RaXC_iBPkh-kzAcJ=qD8POcjcn0kktvokw@mail.gmail.com>

Thanks for the excellent comparable package, Hong.

Today's rejection of gargle instructs me to use \donttest{} instead of
\dontrun{}. Most of the affected functions create, load, and/or refresh
service account tokens and OAuth2 credentials. I see that \dontrun{} is
used in AzureAuth, which does seem more appropriate and is what I did. My
impression is that \donttest{} code is still run under some circumstances.
Perhaps this is another good topic for discussion, now that we've worked
through cat() vs message().

It seems like you've also got a few functions without examples at all
(e.g., format_auth_header(), AzureR_dir()). How does this get through CRAN
review? When is that OK and when is it not?

I would simply like to understand the standards, so that I can impose them
on myself and go through fewer submissions. Maybe we could even automate
some of those checks. That would reduce workload all around.

I've taken your advice to reply via email with full explanation and cc
others at CRAN. Maybe this will also lead to speedy resolution with no fuss.

-- Jenny

On Wed, May 15, 2019 at 2:18 PM Hong Ooi <hongooi at microsoft.com> wrote:

> I had a similar experience with a couple of my package updates needing
> changes. The background is that I have a family of packages for talking to
> Microsoft's Azure cloud service from R, and my examples are all marked
> \dontrun because they need an Azure subscription to work. This had
> previously been cleared with Uwe Ligges, but I guess the other CRAN
> reviewers weren't aware of this.
>
> In both cases, replying to the CRAN email and cc'ing Uwe resolved the
> issue quickly and without fuss.
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf
> Of Mark van der Loo
> Sent: Thursday, 16 May 2019 1:50 AM
> To: Jennifer Bryan <jenny.f.bryan at gmail.com>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] CRAN student assistants
>
> For what it's worth,
>
> I recently submitted a new package that was initially refused (with
> comments) by CRAN. I updated number of them accordingly, but there were a
> few that with good reasons I could not change. I explained this in the
> comments when uploading a new version and it got accepted. So I don't see
> the problem.
>
> (The case here was a use of \dontrun{}. I had to switch an example off
> because a warning was thrown which would upset R CMD check. But
> demonstrating the warning was exactly the point of the example.)
>
> All this aside. I think it is extremely unethical to publish privately
> sent CRAN emails on GH, including personal details such as name and e-mail
> address of the sender without their explicit consent.
>
>
> Best,
> Mark
>
>
>
>
>
> On Wed, May 15, 2019 at 4:44 PM Jennifer Bryan <jenny.f.bryan at gmail.com>
> wrote:
>
> > Hello,
> >
> > Since this has turned into a worldwide code review, I will briefly
> > address that, then reiterate the point of the original message.
> >
> > I am working on an initial release of a package. It reveals
> > information to a user, sometimes in a print method-y way, sometimes in
> > more of a verbose / debugging way that is under control of a
> > documented option, which defaults to "off" or "quiet". For now, I have
> > chosen to send all of this output through a single functions that,
> > yes, uses cat(). I went this direction for an initial release to keep
> > the package simple and accumulate some user experience. If the
> > "debugging mode" proves to be useful, I will rework it, possibly using
> > UI functionality that I believe our group might release in the future.
> > Rest assured, I understand cat() vs message() and the various
> > tradeoffs. I made mine and it is my impression that package maintainers
> have this level of freedom.
> >
> > The real point is: the currenrt CRAN submission process is designed
> > for one-way communication and there's no guarantee of continuity of
> reviewer.
> > If this type of implementation review is going to happen, it seems
> > that many aspects of the process would need to change, to make sure
> > these new standards are applied consistently to every submission and
> > that existing package are brought up to current standards.
> >
> > To clarify something for Joris, I am not aware of any special channel
> > of communication or influence between CRAN and the R Foundation (of
> > which I am also a member). I think this is an aspect of CRAN vs R
> > Foundation (vs R Core even) that is unclear to many. These entities
> > operate quite independently, except for the fact that specific people
> > belong to more than one. So RF members interact with CRAN the same way
> > as any other of member of the community.
> >
> > -- Jenny
> >
> > On Wed, May 15, 2019 at 6:43 AM Jim Hester <james.f.hester at gmail.com>
> > wrote:
> >
> > > Sorry first sentence should read
> > >
> > > I agree that `message()` is ideally preferred, precisely because of
> > > the reasons Martin stated, it is easily controlled by the user.
> > >
> > > On Wed, May 15, 2019 at 9:41 AM Jim Hester
> > > <james.f.hester at gmail.com>
> > > wrote:
> > > >
> > > > I agree that `message()` is in an ideally preferred, precisely
> > > > because of the reasons Martin stated, it is easily controlled by the
> user.
> > > >
> > > > Unfortunately, in the real world, the windows R gui console and
> > > > RStudio (which copied behavior) color messages, and anything on
> > > > stderr in fact, in red, which confuses most users who are trained
> > > > to treat messages in red as errors.
> > > >
> > > > This also makes using colored output (where available) more
> > > > challenging when using `message()`.  You either have to accept the
> > > > text as red, or unconditionally change the text color to black or
> > > > similar, which can then be unreadable if the user is using a dark
> > > > color theme.
> > > >
> > > > Jenny is an experienced package developer. She knew this tradeoff
> > > > and the use of `cat()` in gargle was deliberate choice in an
> > > > imperfect world. She did not make this decision out of ignorance
> > > > of a better way.
> > > >
> > > > However there is no way for Jenny or any other package developers
> > > > to have a dialog during a CRAN submission, the communication is
> > > > only in one direction, if she resubmits explaining her rationale
> > > > for the choice she may not even have the same reviewer the next time.
> > > >
> > > > Bioconductor seems to have a much better review process for
> > > > submissions, with real dialog between the reviewer and package
> > > > author, perhaps CRAN can learn from that process and improve the
> > > > submission experience in the future.
> > > >
> > > > Jim
> > > >
> > > > On Wed, May 15, 2019 at 7:41 AM Martin Morgan
> > > > <mtmorgan.bioc at gmail.com
> > >
> > > wrote:
> > > > >
> > > > > message() / warning() / stop() write to stderr whereas print() /
> > cat()
> > > write (by default) to stdout. Even without being able to suppress
> > messages,
> > > it is well-established practice (the story is that this is the
> > > reason why 'stderr' was introduced into unix,
> > >
> > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.
> > jstorimer.com%2Fblogs%2Fworkingwithcode%2F7766119-when-to-use-stderr-i
> > nstead-of-stdout&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03
> > dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sd
> > ata=8%2F6BhGQWQqy7OOrjw4gaDRuYfPgYIdEoLEpTl6Q4hgQ%3D&amp;reserved=0
> > > ) to separate diagnostic messages from program output. I agree that
> > gargle
> > > (in particular, and packages in general, given the theme of this
> > > mailing
> > > list) would be a better package if it used message() where it now
> > > uses cat().
> > > > >
> > > > > Martin
> > > > >
> > > > > ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys"
> > > > > <
> > > r-package-devel-bounces at r-project.org on behalf of
> > > Joris.Meys at ugent.be>
> > > wrote:
> > > > >
> > > > >     2) Where cat() is used in gargle, message() is a better
> > > > > option
> > for
> > > the
> > > > >     following reason:
> > > > >
> > > > >     > myfun <- function(){cat("Yes");message("No")}
> > > > >     > suppressMessages(myfun())
> > > > >     Yes
> > > > >
> > > > >
> > > > > ______________________________________________
> > > > > R-package-devel at r-project.org mailing list
> > > > > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%
> > > > > 2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=0
> > > > > 1%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0
> > > > > b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1
> > > > > JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7
> > > Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988
> > > bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5J
> > > v0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> > .ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chon
> > gooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f1
> > 41af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BO
> > ebJgbXT%2BLpOw%3D&amp;reserved=0
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
>
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
>

	[[alternative HTML version deleted]]


From Jor|@@Mey@ @end|ng |rom ugent@be  Thu May 16 19:41:03 2019
From: Jor|@@Mey@ @end|ng |rom ugent@be (Joris Meys)
Date: Thu, 16 May 2019 19:41:03 +0200
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CABdHhvFRL9cCJwXZ3toW5vK9KM_Sd0YA=EMcTSSPsnY_mosafw@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CABdHhvFRL9cCJwXZ3toW5vK9KM_Sd0YA=EMcTSSPsnY_mosafw@mail.gmail.com>
Message-ID: <CAO1zAVa8dGBA8iN5acM022SO9kx4c4zQjb0cdWVe5phAbOSitQ@mail.gmail.com>

On Thu, May 16, 2019 at 4:59 PM Hadley Wickham <h.wickham at gmail.com> wrote:

> Hi all,
>
> I am most interested in understanding what level of
> discretion CRAN's "Studentischer administrativer Mitarbeiter" have to
> critique the implementation of R packages


Ing. is the german title for "Engineer". You made her name public in the
repositories of your own organisation. So at least have the decency to
google her before you question her competence in public. Your obvious lack
of understanding about the Austrian education system is no excuse for
questioning her competence.


> I mean no disrespect towards the CRAN maintainers
>

The respectful thing to do, is to discuss this IN PRIVATE with Dr. Ligges
at the next R foundation in case you really need to know. The unrespectful
thing to do, is to gaslight on a public mailing list to the point you make
others, like Alejandro, question the competence of CRAN maintainers.


>
> I do recognise that my question "Who are they?" may have been
> perceived as overly intrusive.


The word is "bewildering", as you know their names, and your organisation
shared personally identifying information (i.e. her email address which
includes the institute she WORKS for) on their github repo.


> To clarify: I don't want to know names
> or other personally identifying information, but I would like to know
> in general terms how many there are, and what backgrounds they have.
>

That's again something you can ask Dr. Ligges IN PRIVATE at the next R
foundation meeting, and not a subject for an open mailing list. And after
this exchange, I would totally understand if he refuses to answer that.


> Similarly, I don't want to know how much they are paid, just whether
> or not they are volunteers or employees.
>

The budgetary arrangements between a university and their _employee_ are of
no concern to the mailing list. Asking about such arrangements for an
employee that's not yours, is considered highly impolite in Europe.

RStudio has been very vocal on numerous occasions about standards they
hold. I would appreciate if the chief scientist of RStudio abides by those
standards.

Thank you.

-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From hongoo| @end|ng |rom m|cro@o|t@com  Thu May 16 21:06:37 2019
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Thu, 16 May 2019 19:06:37 +0000
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CANe9BHFReQrB6cQ=RaXC_iBPkh-kzAcJ=qD8POcjcn0kktvokw@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
 <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
 <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
 <CAOKDuOg7-HXOAc+gia7uzjs3+=80tJD=MTKf_EtJi-X11QASJg@mail.gmail.com>
 <SG2P15301MB00770F8284BA6AF6BD0C5D01A6090@SG2P15301MB0077.APCP153.PROD.OUTLOOK.COM>
 <CANe9BHFReQrB6cQ=RaXC_iBPkh-kzAcJ=qD8POcjcn0kktvokw@mail.gmail.com>
Message-ID: <SG2P15301MB0077CCEE8DD3F37F79CFDEF2A60A0@SG2P15301MB0077.APCP153.PROD.OUTLOOK.COM>

I don?t think they check _every_ help page for examples. My assumption would be that if the main functionality of the package is covered, then functions that are clearly ancillary, or whose usage is obvious, get a pass.

Another reason for cloud-related packages to mark things as \dontrun (as opposed to \donttest) would be if they deploy resources that have an associated cost. You probably don?t want to be charged 50 bucks, or whatever, for deploying a compute cluster just by running example().

From: Jennifer Bryan <jenny.f.bryan at gmail.com>
Sent: Friday, 17 May 2019 3:10 AM
To: Hong Ooi <hongooi at microsoft.com>
Cc: R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] CRAN student assistants

Thanks for the excellent comparable package, Hong.

Today's rejection of gargle instructs me to use \donttest{} instead of \dontrun{}. Most of the affected functions create, load, and/or refresh service account tokens and OAuth2 credentials. I see that \dontrun{} is used in AzureAuth, which does seem more appropriate and is what I did. My impression is that \donttest{} code is still run under some circumstances. Perhaps this is another good topic for discussion, now that we've worked through cat() vs message().

It seems like you've also got a few functions without examples at all (e.g., format_auth_header(), AzureR_dir()). How does this get through CRAN review? When is that OK and when is it not?

I would simply like to understand the standards, so that I can impose them on myself and go through fewer submissions. Maybe we could even automate some of those checks. That would reduce workload all around.

I've taken your advice to reply via email with full explanation and cc others at CRAN. Maybe this will also lead to speedy resolution with no fuss.

-- Jenny

On Wed, May 15, 2019 at 2:18 PM Hong Ooi <hongooi at microsoft.com<mailto:hongooi at microsoft.com>> wrote:
I had a similar experience with a couple of my package updates needing changes. The background is that I have a family of packages for talking to Microsoft's Azure cloud service from R, and my examples are all marked \dontrun because they need an Azure subscription to work. This had previously been cleared with Uwe Ligges, but I guess the other CRAN reviewers weren't aware of this.

In both cases, replying to the CRAN email and cc'ing Uwe resolved the issue quickly and without fuss.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org<mailto:r-package-devel-bounces at r-project.org>> On Behalf Of Mark van der Loo
Sent: Thursday, 16 May 2019 1:50 AM
To: Jennifer Bryan <jenny.f.bryan at gmail.com<mailto:jenny.f.bryan at gmail.com>>
Cc: R Package Development <r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
Subject: Re: [R-pkg-devel] CRAN student assistants

For what it's worth,

I recently submitted a new package that was initially refused (with
comments) by CRAN. I updated number of them accordingly, but there were a few that with good reasons I could not change. I explained this in the comments when uploading a new version and it got accepted. So I don't see the problem.

(The case here was a use of \dontrun{}. I had to switch an example off because a warning was thrown which would upset R CMD check. But demonstrating the warning was exactly the point of the example.)

All this aside. I think it is extremely unethical to publish privately sent CRAN emails on GH, including personal details such as name and e-mail address of the sender without their explicit consent.


Best,
Mark





On Wed, May 15, 2019 at 4:44 PM Jennifer Bryan <jenny.f.bryan at gmail.com<mailto:jenny.f.bryan at gmail.com>>
wrote:

> Hello,
>
> Since this has turned into a worldwide code review, I will briefly
> address that, then reiterate the point of the original message.
>
> I am working on an initial release of a package. It reveals
> information to a user, sometimes in a print method-y way, sometimes in
> more of a verbose / debugging way that is under control of a
> documented option, which defaults to "off" or "quiet". For now, I have
> chosen to send all of this output through a single functions that,
> yes, uses cat(). I went this direction for an initial release to keep
> the package simple and accumulate some user experience. If the
> "debugging mode" proves to be useful, I will rework it, possibly using
> UI functionality that I believe our group might release in the future.
> Rest assured, I understand cat() vs message() and the various
> tradeoffs. I made mine and it is my impression that package maintainers have this level of freedom.
>
> The real point is: the currenrt CRAN submission process is designed
> for one-way communication and there's no guarantee of continuity of reviewer.
> If this type of implementation review is going to happen, it seems
> that many aspects of the process would need to change, to make sure
> these new standards are applied consistently to every submission and
> that existing package are brought up to current standards.
>
> To clarify something for Joris, I am not aware of any special channel
> of communication or influence between CRAN and the R Foundation (of
> which I am also a member). I think this is an aspect of CRAN vs R
> Foundation (vs R Core even) that is unclear to many. These entities
> operate quite independently, except for the fact that specific people
> belong to more than one. So RF members interact with CRAN the same way
> as any other of member of the community.
>
> -- Jenny
>
> On Wed, May 15, 2019 at 6:43 AM Jim Hester <james.f.hester at gmail.com<mailto:james.f.hester at gmail.com>>
> wrote:
>
> > Sorry first sentence should read
> >
> > I agree that `message()` is ideally preferred, precisely because of
> > the reasons Martin stated, it is easily controlled by the user.
> >
> > On Wed, May 15, 2019 at 9:41 AM Jim Hester
> > <james.f.hester at gmail.com<mailto:james.f.hester at gmail.com>>
> > wrote:
> > >
> > > I agree that `message()` is in an ideally preferred, precisely
> > > because of the reasons Martin stated, it is easily controlled by the user.
> > >
> > > Unfortunately, in the real world, the windows R gui console and
> > > RStudio (which copied behavior) color messages, and anything on
> > > stderr in fact, in red, which confuses most users who are trained
> > > to treat messages in red as errors.
> > >
> > > This also makes using colored output (where available) more
> > > challenging when using `message()`.  You either have to accept the
> > > text as red, or unconditionally change the text color to black or
> > > similar, which can then be unreadable if the user is using a dark
> > > color theme.
> > >
> > > Jenny is an experienced package developer. She knew this tradeoff
> > > and the use of `cat()` in gargle was deliberate choice in an
> > > imperfect world. She did not make this decision out of ignorance
> > > of a better way.
> > >
> > > However there is no way for Jenny or any other package developers
> > > to have a dialog during a CRAN submission, the communication is
> > > only in one direction, if she resubmits explaining her rationale
> > > for the choice she may not even have the same reviewer the next time.
> > >
> > > Bioconductor seems to have a much better review process for
> > > submissions, with real dialog between the reviewer and package
> > > author, perhaps CRAN can learn from that process and improve the
> > > submission experience in the future.
> > >
> > > Jim
> > >
> > > On Wed, May 15, 2019 at 7:41 AM Martin Morgan
> > > <mtmorgan.bioc at gmail.com<mailto:mtmorgan.bioc at gmail.com>
> >
> > wrote:
> > > >
> > > > message() / warning() / stop() write to stderr whereas print() /
> cat()
> > write (by default) to stdout. Even without being able to suppress
> messages,
> > it is well-established practice (the story is that this is the
> > reason why 'stderr' was introduced into unix,
> >
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.
> jstorimer.com<https://nam06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fjstorimer.com&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812492914&sdata=QE2RboDg7ewRBLCrGNtjVOY7ashqSq6zkuFr0PVbOJE%3D&reserved=0>%2Fblogs%2Fworkingwithcode%2F7766119-when-to-use-stderr-i
> nstead-of-stdout&amp;data=01%7C01%7Chongooi%40microsoft.com<https://nam06.safelinks.protection.outlook.com/?url=http%3A%2F%2F40microsoft.com&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812502913&sdata=3pYd5bkHPUe6OCEbKJqTgf1E1hPN1mrk8Mm4A8HFuxw%3D&reserved=0>%7C6ab84a03
> dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sd
> ata=8%2F6BhGQWQqy7OOrjw4gaDRuYfPgYIdEoLEpTl6Q4hgQ%3D&amp;reserved=0
> > ) to separate diagnostic messages from program output. I agree that
> gargle
> > (in particular, and packages in general, given the theme of this
> > mailing
> > list) would be a better package if it used message() where it now
> > uses cat().
> > > >
> > > > Martin
> > > >
> > > > ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys"
> > > > <
> > r-package-devel-bounces at r-project.org<mailto:r-package-devel-bounces at r-project.org> on behalf of
> > Joris.Meys at ugent.be<mailto:Joris.Meys at ugent.be>>
> > wrote:
> > > >
> > > >     2) Where cat() is used in gargle, message() is a better
> > > > option
> for
> > the
> > > >     following reason:
> > > >
> > > >     > myfun <- function(){cat("Yes");message("No")}
> > > >     > suppressMessages(myfun())
> > > >     Yes
> > > >
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> > > > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%25>
> > > > 2Fstat.ethz.ch<https://nam06.safelinks.protection.outlook.com/?url=http%3A%2F%2F2Fstat.ethz.ch&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812502913&sdata=jE%2BQDu7dKhXEc85FDAcvkNvT%2Bgkog2fEIUcbADuuwjc%3D&reserved=0>%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=0
> > > > 1%7C01%7Chongooi%40microsoft.com<https://nam06.safelinks.protection.outlook.com/?url=http%3A%2F%2F40microsoft.com&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812512906&sdata=cKvVlByLzHzPzIef6vaZvh5qFsRrCnc%2Fa3RC61A6raI%3D&reserved=0>%7C6ab84a03dd6048a5160d08d6d94d0
> > > > b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1
> > > > JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at.ethz.ch<https://nam06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fat.ethz.ch&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812512906&sdata=eNbXlC5Zc58m07DVQCbU2p7E3gnLj8TeuCKE2GBjB%2B4%3D&reserved=0>%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7
> > Chongooi%40microsoft.com<https://nam06.safelinks.protection.outlook.com/?url=http%3A%2F%2F40microsoft.com&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812512906&sdata=cKvVlByLzHzPzIef6vaZvh5qFsRrCnc%2Fa3RC61A6raI%3D&reserved=0>%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988
> > bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5J
> > v0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch<https://nam06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fethz.ch&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812522901&sdata=6pIehcndENEMdd8%2FyTWNtD0vec5lC2sufm1KjgFhQX0%3D&reserved=0>%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chon
> gooi%40microsoft.com<https://nam06.safelinks.protection.outlook.com/?url=http%3A%2F%2F40microsoft.com&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812522901&sdata=4NLlVLB2qLm0Lt08DRv5mABLfncaZaDfanCjijtuhDI%3D&reserved=0>%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f1
> 41af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BO
> ebJgbXT%2BLpOw%3D&amp;reserved=0
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&data=02%7C01%7Chongooi%40microsoft.com%7C991f01a501964ef9e6da08d6da21834c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636936234812532893&sdata=u77oBbnued1bYd9a825nzbr4%2BTfF6hwDCaVkATv9tc8%3D&reserved=0>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu May 16 21:42:44 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 16 May 2019 15:42:44 -0400
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CANe9BHFReQrB6cQ=RaXC_iBPkh-kzAcJ=qD8POcjcn0kktvokw@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
 <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
 <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
 <CAOKDuOg7-HXOAc+gia7uzjs3+=80tJD=MTKf_EtJi-X11QASJg@mail.gmail.com>
 <SG2P15301MB00770F8284BA6AF6BD0C5D01A6090@SG2P15301MB0077.APCP153.PROD.OUTLOOK.COM>
 <CANe9BHFReQrB6cQ=RaXC_iBPkh-kzAcJ=qD8POcjcn0kktvokw@mail.gmail.com>
Message-ID: <af2d1213-513d-d619-3e0f-bbebd9ab4656@gmail.com>

On 16/05/2019 1:10 p.m., Jennifer Bryan wrote:
> Thanks for the excellent comparable package, Hong.
> 
> Today's rejection of gargle instructs me to use \donttest{} instead of
> \dontrun{}. Most of the affected functions create, load, and/or refresh
> service account tokens and OAuth2 credentials. I see that \dontrun{} is
> used in AzureAuth, which does seem more appropriate and is what I did. My
> impression is that \donttest{} code is still run under some circumstances.
> Perhaps this is another good topic for discussion, now that we've worked
> through cat() vs message().
> 
> It seems like you've also got a few functions without examples at all
> (e.g., format_auth_header(), AzureR_dir()). How does this get through CRAN
> review? When is that OK and when is it not?

I haven't been involved with CRAN for a couple of years, but for the 
year when I was, one thing that really, really pissed us off was a 
question like this.  Obviously it is better if all functions have 
examples.  When package authors tried to determine the absolute least 
work they could get away with it really wasted our time trying to decide 
which side of the line a particular package fell on.  We tried to be 
consistent, but clearly that would be impossible.

So the answer to your question is:  put excellent examples in all of 
your help pages, and don't try to find the minimally publishable package.


> I would simply like to understand the standards, so that I can impose them
> on myself and go through fewer submissions. Maybe we could even automate
> some of those checks. That would reduce workload all around.

Impose higher standards on yourself than you think are necessary, and 
your packages will be better and will be published faster.

Duncan Murdoch

> I've taken your advice to reply via email with full explanation and cc
> others at CRAN. Maybe this will also lead to speedy resolution with no fuss.
> 
> -- Jenny
> 
> On Wed, May 15, 2019 at 2:18 PM Hong Ooi <hongooi at microsoft.com> wrote:
> 
>> I had a similar experience with a couple of my package updates needing
>> changes. The background is that I have a family of packages for talking to
>> Microsoft's Azure cloud service from R, and my examples are all marked
>> \dontrun because they need an Azure subscription to work. This had
>> previously been cleared with Uwe Ligges, but I guess the other CRAN
>> reviewers weren't aware of this.
>>
>> In both cases, replying to the CRAN email and cc'ing Uwe resolved the
>> issue quickly and without fuss.
>>
>>
>> -----Original Message-----
>> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf
>> Of Mark van der Loo
>> Sent: Thursday, 16 May 2019 1:50 AM
>> To: Jennifer Bryan <jenny.f.bryan at gmail.com>
>> Cc: R Package Development <r-package-devel at r-project.org>
>> Subject: Re: [R-pkg-devel] CRAN student assistants
>>
>> For what it's worth,
>>
>> I recently submitted a new package that was initially refused (with
>> comments) by CRAN. I updated number of them accordingly, but there were a
>> few that with good reasons I could not change. I explained this in the
>> comments when uploading a new version and it got accepted. So I don't see
>> the problem.
>>
>> (The case here was a use of \dontrun{}. I had to switch an example off
>> because a warning was thrown which would upset R CMD check. But
>> demonstrating the warning was exactly the point of the example.)
>>
>> All this aside. I think it is extremely unethical to publish privately
>> sent CRAN emails on GH, including personal details such as name and e-mail
>> address of the sender without their explicit consent.
>>
>>
>> Best,
>> Mark
>>
>>
>>
>>
>>
>> On Wed, May 15, 2019 at 4:44 PM Jennifer Bryan <jenny.f.bryan at gmail.com>
>> wrote:
>>
>>> Hello,
>>>
>>> Since this has turned into a worldwide code review, I will briefly
>>> address that, then reiterate the point of the original message.
>>>
>>> I am working on an initial release of a package. It reveals
>>> information to a user, sometimes in a print method-y way, sometimes in
>>> more of a verbose / debugging way that is under control of a
>>> documented option, which defaults to "off" or "quiet". For now, I have
>>> chosen to send all of this output through a single functions that,
>>> yes, uses cat(). I went this direction for an initial release to keep
>>> the package simple and accumulate some user experience. If the
>>> "debugging mode" proves to be useful, I will rework it, possibly using
>>> UI functionality that I believe our group might release in the future.
>>> Rest assured, I understand cat() vs message() and the various
>>> tradeoffs. I made mine and it is my impression that package maintainers
>> have this level of freedom.
>>>
>>> The real point is: the currenrt CRAN submission process is designed
>>> for one-way communication and there's no guarantee of continuity of
>> reviewer.
>>> If this type of implementation review is going to happen, it seems
>>> that many aspects of the process would need to change, to make sure
>>> these new standards are applied consistently to every submission and
>>> that existing package are brought up to current standards.
>>>
>>> To clarify something for Joris, I am not aware of any special channel
>>> of communication or influence between CRAN and the R Foundation (of
>>> which I am also a member). I think this is an aspect of CRAN vs R
>>> Foundation (vs R Core even) that is unclear to many. These entities
>>> operate quite independently, except for the fact that specific people
>>> belong to more than one. So RF members interact with CRAN the same way
>>> as any other of member of the community.
>>>
>>> -- Jenny
>>>
>>> On Wed, May 15, 2019 at 6:43 AM Jim Hester <james.f.hester at gmail.com>
>>> wrote:
>>>
>>>> Sorry first sentence should read
>>>>
>>>> I agree that `message()` is ideally preferred, precisely because of
>>>> the reasons Martin stated, it is easily controlled by the user.
>>>>
>>>> On Wed, May 15, 2019 at 9:41 AM Jim Hester
>>>> <james.f.hester at gmail.com>
>>>> wrote:
>>>>>
>>>>> I agree that `message()` is in an ideally preferred, precisely
>>>>> because of the reasons Martin stated, it is easily controlled by the
>> user.
>>>>>
>>>>> Unfortunately, in the real world, the windows R gui console and
>>>>> RStudio (which copied behavior) color messages, and anything on
>>>>> stderr in fact, in red, which confuses most users who are trained
>>>>> to treat messages in red as errors.
>>>>>
>>>>> This also makes using colored output (where available) more
>>>>> challenging when using `message()`.  You either have to accept the
>>>>> text as red, or unconditionally change the text color to black or
>>>>> similar, which can then be unreadable if the user is using a dark
>>>>> color theme.
>>>>>
>>>>> Jenny is an experienced package developer. She knew this tradeoff
>>>>> and the use of `cat()` in gargle was deliberate choice in an
>>>>> imperfect world. She did not make this decision out of ignorance
>>>>> of a better way.
>>>>>
>>>>> However there is no way for Jenny or any other package developers
>>>>> to have a dialog during a CRAN submission, the communication is
>>>>> only in one direction, if she resubmits explaining her rationale
>>>>> for the choice she may not even have the same reviewer the next time.
>>>>>
>>>>> Bioconductor seems to have a much better review process for
>>>>> submissions, with real dialog between the reviewer and package
>>>>> author, perhaps CRAN can learn from that process and improve the
>>>>> submission experience in the future.
>>>>>
>>>>> Jim
>>>>>
>>>>> On Wed, May 15, 2019 at 7:41 AM Martin Morgan
>>>>> <mtmorgan.bioc at gmail.com
>>>>
>>>> wrote:
>>>>>>
>>>>>> message() / warning() / stop() write to stderr whereas print() /
>>> cat()
>>>> write (by default) to stdout. Even without being able to suppress
>>> messages,
>>>> it is well-established practice (the story is that this is the
>>>> reason why 'stderr' was introduced into unix,
>>>>
>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.
>>> jstorimer.com%2Fblogs%2Fworkingwithcode%2F7766119-when-to-use-stderr-i
>>> nstead-of-stdout&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03
>>> dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sd
>>> ata=8%2F6BhGQWQqy7OOrjw4gaDRuYfPgYIdEoLEpTl6Q4hgQ%3D&amp;reserved=0
>>>> ) to separate diagnostic messages from program output. I agree that
>>> gargle
>>>> (in particular, and packages in general, given the theme of this
>>>> mailing
>>>> list) would be a better package if it used message() where it now
>>>> uses cat().
>>>>>>
>>>>>> Martin
>>>>>>
>>>>>> ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys"
>>>>>> <
>>>> r-package-devel-bounces at r-project.org on behalf of
>>>> Joris.Meys at ugent.be>
>>>> wrote:
>>>>>>
>>>>>>      2) Where cat() is used in gargle, message() is a better
>>>>>> option
>>> for
>>>> the
>>>>>>      following reason:
>>>>>>
>>>>>>      > myfun <- function(){cat("Yes");message("No")}
>>>>>>      > suppressMessages(myfun())
>>>>>>      Yes
>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%
>>>>>> 2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=0
>>>>>> 1%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0
>>>>>> b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1
>>>>>> JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
>>>> at.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7
>>>> Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988
>>>> bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5J
>>>> v0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
>>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
>>> .ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chon
>>> gooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f1
>>> 41af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BO
>>> ebJgbXT%2BLpOw%3D&amp;reserved=0
>>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>>
>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@v|dhughjone@ @end|ng |rom gm@||@com  Thu May 16 22:05:09 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Thu, 16 May 2019 21:05:09 +0100
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAO1zAVa8dGBA8iN5acM022SO9kx4c4zQjb0cdWVe5phAbOSitQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CABdHhvFRL9cCJwXZ3toW5vK9KM_Sd0YA=EMcTSSPsnY_mosafw@mail.gmail.com>
 <CAO1zAVa8dGBA8iN5acM022SO9kx4c4zQjb0cdWVe5phAbOSitQ@mail.gmail.com>
Message-ID: <CAARY7kijAn2aWaWHxOA3MpxTEdvae_cAZtAaHqVZ9CG1j2B6-g@mail.gmail.com>

Joris,

I have no dog in this fight, but I think you should cool down a bit. Hadley
explained why he thought these people were students: it?s the adjective
studentische in the job description. I don?t think he meant, or implied,
any disrespect to the individuals concerned. He is entitled to ask in
public about CRAN?s process, which is of concern to everybody who deals
with CRAN. Lastly, accusations of ?gaslighting? are over the top, and
adding heat to this debate.

If you think it?s wrong to record  correspondence with CRAN in public, you
may have a point ? that is a separate topic. I would lean that CRAN
responses ought not to be considered confidential, but perhaps identifying
information should be shared with care. These are quite subtle issues, so
again, thoughtful discussion would be great.

David


On Thu, 16 May 2019 at 18:41, Joris Meys <Joris.Meys at ugent.be> wrote:

> On Thu, May 16, 2019 at 4:59 PM Hadley Wickham <h.wickham at gmail.com>
> wrote:
>
> > Hi all,
> >
> > I am most interested in understanding what level of
> > discretion CRAN's "Studentischer administrativer Mitarbeiter" have to
> > critique the implementation of R packages
>
>
> Ing. is the german title for "Engineer". You made her name public in the
> repositories of your own organisation. So at least have the decency to
> google her before you question her competence in public. Your obvious lack
> of understanding about the Austrian education system is no excuse for
> questioning her competence.
>
>
> > I mean no disrespect towards the CRAN maintainers
> >
>
> The respectful thing to do, is to discuss this IN PRIVATE with Dr. Ligges
> at the next R foundation in case you really need to know. The unrespectful
> thing to do, is to gaslight on a public mailing list to the point you make
> others, like Alejandro, question the competence of CRAN maintainers.
>
>
> >
> > I do recognise that my question "Who are they?" may have been
> > perceived as overly intrusive.
>
>
> The word is "bewildering", as you know their names, and your organisation
> shared personally identifying information (i.e. her email address which
> includes the institute she WORKS for) on their github repo.
>
>
> > To clarify: I don't want to know names
> > or other personally identifying information, but I would like to know
> > in general terms how many there are, and what backgrounds they have.
> >
>
> That's again something you can ask Dr. Ligges IN PRIVATE at the next R
> foundation meeting, and not a subject for an open mailing list. And after
> this exchange, I would totally understand if he refuses to answer that.
>
>
> > Similarly, I don't want to know how much they are paid, just whether
> > or not they are volunteers or employees.
> >
>
> The budgetary arrangements between a university and their _employee_ are of
> no concern to the mailing list. Asking about such arrangements for an
> employee that's not yours, is considered highly impolite in Europe.
>
> RStudio has been very vocal on numerous occasions about standards they
> hold. I would appreciate if the chief scientist of RStudio abides by those
> standards.
>
> Thank you.
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> <
> https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g
> >
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From pedro@@ph@|o @end|ng |rom he|@|nk|@||  Thu May 16 22:09:41 2019
From: pedro@@ph@|o @end|ng |rom he|@|nk|@|| (Pedro J. Aphalo)
Date: Thu, 16 May 2019 23:09:41 +0300
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <af2d1213-513d-d619-3e0f-bbebd9ab4656@gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CAO1zAVanghCAPnJb1Dtfzvgc4SCBrJO0yUerg-2wPJkcx=rRuQ@mail.gmail.com>
 <BN8PR05MB61961B3B144308E50D552312F9090@BN8PR05MB6196.namprd05.prod.outlook.com>
 <CAD6tx95rTx3YmKyuWBpZneWVm-tRe-FuG8x0Pq2bMCzTt_HLyQ@mail.gmail.com>
 <CAD6tx95p5UcNNCY_R3F_jY9XJtj0iRq+Q2sNJpw8N04RPPtnOw@mail.gmail.com>
 <CANe9BHHP65sFeSMaZQrU7E00mXtT+eCMRpomH344OXbggXV6GQ@mail.gmail.com>
 <CAOKDuOg7-HXOAc+gia7uzjs3+=80tJD=MTKf_EtJi-X11QASJg@mail.gmail.com>
 <SG2P15301MB00770F8284BA6AF6BD0C5D01A6090@SG2P15301MB0077.APCP153.PROD.OUTLOOK.COM>
 <CANe9BHFReQrB6cQ=RaXC_iBPkh-kzAcJ=qD8POcjcn0kktvokw@mail.gmail.com>
 <af2d1213-513d-d619-3e0f-bbebd9ab4656@gmail.com>
Message-ID: <52e6eeda-c3b7-7160-27f8-f637c200f606@helsinki.fi>

 From the other side of the fence, as an author and maintainer, I regret 
much more when both my own tests and CRAN's have failed to detect a 
problem than when I need to spend some effort to explain that something 
is a false positive. Considering the number of downloads from CRAN, a 
false negative test can cause grief and lost time to many users. A false 
positive causes some extra work only to the developer and CRAN 
maintainers, and I really appreciate the big effort that strict checks 
represents for them.

The other question that was implicit in the justification for the use of 
cat() is that the submission was "design in progress". I think the 
larger and more diverse the community of CRAN users becomes, the less 
justification there is for releasing packages at early stage of 
development through CRAN. Packages will evolve, but once they are in 
CRAN mostly by expanding functionality, rather than changes in design. 
Error handling and documentation should be good enough to ensure the 
package will not be wrongly used by accident. R and CRAN are no longer 
used mainly by statisticians and experts.

Best,

Pedro.

On 2019-05-16 22:42, Duncan Murdoch wrote:
> On 16/05/2019 1:10 p.m., Jennifer Bryan wrote:
>> Thanks for the excellent comparable package, Hong.
>>
>> Today's rejection of gargle instructs me to use \donttest{} instead of
>> \dontrun{}. Most of the affected functions create, load, and/or refresh
>> service account tokens and OAuth2 credentials. I see that \dontrun{} is
>> used in AzureAuth, which does seem more appropriate and is what I 
>> did. My
>> impression is that \donttest{} code is still run under some 
>> circumstances.
>> Perhaps this is another good topic for discussion, now that we've worked
>> through cat() vs message().
>>
>> It seems like you've also got a few functions without examples at all
>> (e.g., format_auth_header(), AzureR_dir()). How does this get through 
>> CRAN
>> review? When is that OK and when is it not?
>
> I haven't been involved with CRAN for a couple of years, but for the 
> year when I was, one thing that really, really pissed us off was a 
> question like this.? Obviously it is better if all functions have 
> examples.? When package authors tried to determine the absolute least 
> work they could get away with it really wasted our time trying to 
> decide which side of the line a particular package fell on.? We tried 
> to be consistent, but clearly that would be impossible.
>
> So the answer to your question is:? put excellent examples in all of 
> your help pages, and don't try to find the minimally publishable package.
>
>
>> I would simply like to understand the standards, so that I can impose 
>> them
>> on myself and go through fewer submissions. Maybe we could even automate
>> some of those checks. That would reduce workload all around.
>
> Impose higher standards on yourself than you think are necessary, and 
> your packages will be better and will be published faster.
>
> Duncan Murdoch
>
>> I've taken your advice to reply via email with full explanation and cc
>> others at CRAN. Maybe this will also lead to speedy resolution with 
>> no fuss.
>>
>> -- Jenny
>>
>> On Wed, May 15, 2019 at 2:18 PM Hong Ooi <hongooi at microsoft.com> wrote:
>>
>>> I had a similar experience with a couple of my package updates needing
>>> changes. The background is that I have a family of packages for 
>>> talking to
>>> Microsoft's Azure cloud service from R, and my examples are all marked
>>> \dontrun because they need an Azure subscription to work. This had
>>> previously been cleared with Uwe Ligges, but I guess the other CRAN
>>> reviewers weren't aware of this.
>>>
>>> In both cases, replying to the CRAN email and cc'ing Uwe resolved the
>>> issue quickly and without fuss.
>>>
>>>
>>> -----Original Message-----
>>> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf
>>> Of Mark van der Loo
>>> Sent: Thursday, 16 May 2019 1:50 AM
>>> To: Jennifer Bryan <jenny.f.bryan at gmail.com>
>>> Cc: R Package Development <r-package-devel at r-project.org>
>>> Subject: Re: [R-pkg-devel] CRAN student assistants
>>>
>>> For what it's worth,
>>>
>>> I recently submitted a new package that was initially refused (with
>>> comments) by CRAN. I updated number of them accordingly, but there 
>>> were a
>>> few that with good reasons I could not change. I explained this in the
>>> comments when uploading a new version and it got accepted. So I 
>>> don't see
>>> the problem.
>>>
>>> (The case here was a use of \dontrun{}. I had to switch an example off
>>> because a warning was thrown which would upset R CMD check. But
>>> demonstrating the warning was exactly the point of the example.)
>>>
>>> All this aside. I think it is extremely unethical to publish privately
>>> sent CRAN emails on GH, including personal details such as name and 
>>> e-mail
>>> address of the sender without their explicit consent.
>>>
>>>
>>> Best,
>>> Mark
>>>
>>>
>>>
>>>
>>>
>>> On Wed, May 15, 2019 at 4:44 PM Jennifer Bryan 
>>> <jenny.f.bryan at gmail.com>
>>> wrote:
>>>
>>>> Hello,
>>>>
>>>> Since this has turned into a worldwide code review, I will briefly
>>>> address that, then reiterate the point of the original message.
>>>>
>>>> I am working on an initial release of a package. It reveals
>>>> information to a user, sometimes in a print method-y way, sometimes in
>>>> more of a verbose / debugging way that is under control of a
>>>> documented option, which defaults to "off" or "quiet". For now, I have
>>>> chosen to send all of this output through a single functions that,
>>>> yes, uses cat(). I went this direction for an initial release to keep
>>>> the package simple and accumulate some user experience. If the
>>>> "debugging mode" proves to be useful, I will rework it, possibly using
>>>> UI functionality that I believe our group might release in the future.
>>>> Rest assured, I understand cat() vs message() and the various
>>>> tradeoffs. I made mine and it is my impression that package 
>>>> maintainers
>>> have this level of freedom.
>>>>
>>>> The real point is: the currenrt CRAN submission process is designed
>>>> for one-way communication and there's no guarantee of continuity of
>>> reviewer.
>>>> If this type of implementation review is going to happen, it seems
>>>> that many aspects of the process would need to change, to make sure
>>>> these new standards are applied consistently to every submission and
>>>> that existing package are brought up to current standards.
>>>>
>>>> To clarify something for Joris, I am not aware of any special channel
>>>> of communication or influence between CRAN and the R Foundation (of
>>>> which I am also a member). I think this is an aspect of CRAN vs R
>>>> Foundation (vs R Core even) that is unclear to many. These entities
>>>> operate quite independently, except for the fact that specific people
>>>> belong to more than one. So RF members interact with CRAN the same way
>>>> as any other of member of the community.
>>>>
>>>> -- Jenny
>>>>
>>>> On Wed, May 15, 2019 at 6:43 AM Jim Hester <james.f.hester at gmail.com>
>>>> wrote:
>>>>
>>>>> Sorry first sentence should read
>>>>>
>>>>> I agree that `message()` is ideally preferred, precisely because of
>>>>> the reasons Martin stated, it is easily controlled by the user.
>>>>>
>>>>> On Wed, May 15, 2019 at 9:41 AM Jim Hester
>>>>> <james.f.hester at gmail.com>
>>>>> wrote:
>>>>>>
>>>>>> I agree that `message()` is in an ideally preferred, precisely
>>>>>> because of the reasons Martin stated, it is easily controlled by the
>>> user.
>>>>>>
>>>>>> Unfortunately, in the real world, the windows R gui console and
>>>>>> RStudio (which copied behavior) color messages, and anything on
>>>>>> stderr in fact, in red, which confuses most users who are trained
>>>>>> to treat messages in red as errors.
>>>>>>
>>>>>> This also makes using colored output (where available) more
>>>>>> challenging when using `message()`.? You either have to accept the
>>>>>> text as red, or unconditionally change the text color to black or
>>>>>> similar, which can then be unreadable if the user is using a dark
>>>>>> color theme.
>>>>>>
>>>>>> Jenny is an experienced package developer. She knew this tradeoff
>>>>>> and the use of `cat()` in gargle was deliberate choice in an
>>>>>> imperfect world. She did not make this decision out of ignorance
>>>>>> of a better way.
>>>>>>
>>>>>> However there is no way for Jenny or any other package developers
>>>>>> to have a dialog during a CRAN submission, the communication is
>>>>>> only in one direction, if she resubmits explaining her rationale
>>>>>> for the choice she may not even have the same reviewer the next 
>>>>>> time.
>>>>>>
>>>>>> Bioconductor seems to have a much better review process for
>>>>>> submissions, with real dialog between the reviewer and package
>>>>>> author, perhaps CRAN can learn from that process and improve the
>>>>>> submission experience in the future.
>>>>>>
>>>>>> Jim
>>>>>>
>>>>>> On Wed, May 15, 2019 at 7:41 AM Martin Morgan
>>>>>> <mtmorgan.bioc at gmail.com
>>>>>
>>>>> wrote:
>>>>>>>
>>>>>>> message() / warning() / stop() write to stderr whereas print() /
>>>> cat()
>>>>> write (by default) to stdout. Even without being able to suppress
>>>> messages,
>>>>> it is well-established practice (the story is that this is the
>>>>> reason why 'stderr' was introduced into unix,
>>>>>
>>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.
>>>> jstorimer.com%2Fblogs%2Fworkingwithcode%2F7766119-when-to-use-stderr-i
>>>> nstead-of-stdout&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03
>>>> dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sd
>>>> ata=8%2F6BhGQWQqy7OOrjw4gaDRuYfPgYIdEoLEpTl6Q4hgQ%3D&amp;reserved=0
>>>>> ) to separate diagnostic messages from program output. I agree that
>>>> gargle
>>>>> (in particular, and packages in general, given the theme of this
>>>>> mailing
>>>>> list) would be a better package if it used message() where it now
>>>>> uses cat().
>>>>>>>
>>>>>>> Martin
>>>>>>>
>>>>>>> ?On 5/15/19, 5:04 AM, "R-package-devel on behalf of Joris Meys"
>>>>>>> <
>>>>> r-package-devel-bounces at r-project.org on behalf of
>>>>> Joris.Meys at ugent.be>
>>>>> wrote:
>>>>>>>
>>>>>>> ???? 2) Where cat() is used in gargle, message() is a better
>>>>>>> option
>>>> for
>>>>> the
>>>>>>> ???? following reason:
>>>>>>>
>>>>>>> ???? > myfun <- function(){cat("Yes");message("No")}
>>>>>>> ???? > suppressMessages(myfun())
>>>>>>> ???? Yes
>>>>>>>
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%
>>>>>>> 2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=0
>>>>>>> 1%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0
>>>>>>> b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1
>>>>>>> JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
>>>>> at.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7
>>>>> Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988
>>>>> bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5J
>>>>> v0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0
>>>>>
>>>>
>>>> ???????? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
>>>> .ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chon
>>>> gooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f1
>>>> 41af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BO
>>>> ebJgbXT%2BLpOw%3D&amp;reserved=0
>>>>
>>>
>>> ???????? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>>
>>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=01%7C01%7Chongooi%40microsoft.com%7C6ab84a03dd6048a5160d08d6d94d0b70%7C72f988bf86f141af91ab2d7cd011db47%7C1&amp;sdata=eiVhKOo%2F1JcZuYXyZKLQq2o5Jv0So%2BOebJgbXT%2BLpOw%3D&amp;reserved=0 
>>>
>>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
-- 
------------------------------------------------------------------------
Pedro J. Aphalo
University Lecturer, Principal Investigator
(Office 5605, Biocenter 3, Viikinkaari 1)

Department of Biosciences
Plant Biology
P.O. Box 65
00014 University of Helsinki
Finland

e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
Tel. (mobile) +358 50 4150623
Tel. (office) +358 2941 57897

------------------------------------------------------------------------
*Web sites and blogs*
Web site (research group): http://blogs.helsinki.fi/senpep-blog/
Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
Web site (using R in photobiology): http://www.r4photobiology.info/
------------------------------------------------------------------------
*Societies*
UV4Plants <http://www.uv4plants.org/> (communications officer), ESP 
<http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/> 
(member), BES <http://www.britishecologicalsociety.org/> (member), SPPS 
<http://www.spps.fi/> (member), SMS 
<http://www.metsatieteellinenseura.fi/english> (member), TUG 
<http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From @|ej@ndrob@r@nek @end|ng |rom gm@||@com  Thu May 16 22:38:06 2019
From: @|ej@ndrob@r@nek @end|ng |rom gm@||@com (alejandro baranek)
Date: Thu, 16 May 2019 17:38:06 -0300
Subject: [R-pkg-devel] CRAN student assistants
In-Reply-To: <CAO1zAVa8dGBA8iN5acM022SO9kx4c4zQjb0cdWVe5phAbOSitQ@mail.gmail.com>
References: <CABdHhvHb0NSf6s+=kP=jynZzrRzcb5wcaKaRV7jekg5+1TxGHQ@mail.gmail.com>
 <CABdHhvFRL9cCJwXZ3toW5vK9KM_Sd0YA=EMcTSSPsnY_mosafw@mail.gmail.com>
 <CAO1zAVa8dGBA8iN5acM022SO9kx4c4zQjb0cdWVe5phAbOSitQ@mail.gmail.com>
Message-ID: <CADJoD_b-dqWLVBkdcniLpRx8EztLjcOTr-qWVSFqRYQrTdiOvw@mail.gmail.com>

Joris:
I'm sorry about your feelings about my thoughts based on Hadley's related
experience.
I feel lucky to be learning from this community. I'm an R user for many
years, but only became a package developer recently and don't have the
background neither the history in the community for putting in doubt the
efforts the CRAN team make. I red some statistics, but don't have a clear
idea of the amount of work involved in CRAN maintenance. Don't even know
where to look for documentation about it.

If you tell me how can I do, I gladly can give feedback with some
observations IN PRIVATE about  experiences we had publishing in CRAN, for
improving the experience both for the developers and for the maintainers.
I'm sure the problem I want to describe is now solved, because the alarm
was set by CRAN maintainers. It is a very small issue,  by the way.

If there is a way for helping, I'm here.

I repeat, I feel lucky for finding a project (R) where I feel contained in
many of my *strange* curiosity inquires.

All the best, Ale.



On Thu, May 16, 2019 at 2:41 PM Joris Meys <Joris.Meys at ugent.be> wrote:

> On Thu, May 16, 2019 at 4:59 PM Hadley Wickham <h.wickham at gmail.com>
> wrote:
>
> > Hi all,
> >
> > I am most interested in understanding what level of
> > discretion CRAN's "Studentischer administrativer Mitarbeiter" have to
> > critique the implementation of R packages
>
>
> Ing. is the german title for "Engineer". You made her name public in the
> repositories of your own organisation. So at least have the decency to
> google her before you question her competence in public. Your obvious lack
> of understanding about the Austrian education system is no excuse for
> questioning her competence.
>
>
> > I mean no disrespect towards the CRAN maintainers
> >
>
> The respectful thing to do, is to discuss this IN PRIVATE with Dr. Ligges
> at the next R foundation in case you really need to know. The unrespectful
> thing to do, is to gaslight on a public mailing list to the point you make
> others, like Alejandro, question the competence of CRAN maintainers.
>
>
> >
> > I do recognise that my question "Who are they?" may have been
> > perceived as overly intrusive.
>
>
> The word is "bewildering", as you know their names, and your organisation
> shared personally identifying information (i.e. her email address which
> includes the institute she WORKS for) on their github repo.
>
>
> > To clarify: I don't want to know names
> > or other personally identifying information, but I would like to know
> > in general terms how many there are, and what backgrounds they have.
> >
>
> That's again something you can ask Dr. Ligges IN PRIVATE at the next R
> foundation meeting, and not a subject for an open mailing list. And after
> this exchange, I would totally understand if he refuses to answer that.
>
>
> > Similarly, I don't want to know how much they are paid, just whether
> > or not they are volunteers or employees.
> >
>
> The budgetary arrangements between a university and their _employee_ are of
> no concern to the mailing list. Asking about such arrangements for an
> employee that's not yours, is considered highly impolite in Europe.
>
> RStudio has been very vocal on numerous occasions about standards they
> hold. I would appreciate if the chief scientist of RStudio abides by those
> standards.
>
> Thank you.
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> <
> https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g
> >
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
 alejandro baranek
@ken4rab <https://twitter.com/ken4rab>
qbotics <http://qbotics.tumblr.com/> | rpolyhedra
<https://qbotics.shinyapps.io/rpolyhedra-explorer/?_inputs_&polyhedron_color=%22%23FF0000FF%22&polyhedron_name=%22Triakis%20Tetrahedron%22&polyhedron_source=%22dmccooey%22&show_axes=false>
| surferinvaders <http://surferinvaders.tumblr.com> | algebraic-soundscapes
<http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
<http://imaginary.org/program/surfer-shuffle>

	[[alternative HTML version deleted]]


From b|erner @end|ng |rom mtho|yoke@edu  Thu May 16 22:48:09 2019
From: b|erner @end|ng |rom mtho|yoke@edu (Barbara Lerner)
Date: Thu, 16 May 2019 16:48:09 -0400
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <23773.33637.287947.53764@rob.eddelbuettel.com>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
 <23772.52098.604839.234070@rob.eddelbuettel.com>
 <8969f674-e65f-cbe9-1365-e643082b8620@mtholyoke.edu>
 <23773.33637.287947.53764@rob.eddelbuettel.com>
Message-ID: <099bf9cc-5527-a326-903c-128998f89df5@mtholyoke.edu>

Hi Dirk,

This is very helpful, thank you!? The R Internals document gave me the 
clues that I need.

I am pretty certain that more things are being checked than before as 
problems are being reported with code that has not changed.? In 
particular, it is checking if logical expressions are returning a vector 
of length > 1.? I had is.null tests where I wanted to check if a 
variable was null.? Unfortunately, when the variable contained a vector, 
it was checking whether the members were null, which is not what I 
intended.? I understand the error reports now and can fix these.

Barbara

Dirk Eddelbuettel wrote on 5/16/19 11:36 AM:
> Hi Barbara
>
> Feel free to CC back to the list which dropped off.
>
> On 16 May 2019 at 10:56, Barbara Lerner wrote:
> | You are right --as-cran gives the same errors as devtools::check.? When
> | it comes to running the examples, what is done differently with the
> | as-cran flag?
>
> Coarse level answer: we are asked to --as-cran per CRAN Repo Policy
>
> Finer level answer: it sets a few more tests, does remote check etc pp which
> is why it is not default. The fuller details are in the R manuals 'Writing R
> Extensions' and (oddly) in Section 8 of 'R Internals' (bad title, makes it as
> if we mortals were not supposed to look there) which details _all_ of the
> _many_ environment variables that can be turned on and off.
>
>  From the top of my head, I am not sure why example would run/not run. That
> has not happened to me in 20+ years of writing / using / binary building
> packages.  But I did not have time to dig -- could use/don't use suggested
> packages, could be honor/disregards \dontrun{} or \donttest{} flags. You will
> know your package better -- with some some digging I am sure you will get to
> it.
>
> Best,  Dirk
>

-- 
<http://www.getpostbox.com>Barbara Lerner
Professor
Computer Science Department
Mount Holyoke College

<http://www.getpostbox.com>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu May 16 23:15:19 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 16 May 2019 16:15:19 -0500
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <099bf9cc-5527-a326-903c-128998f89df5@mtholyoke.edu>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
 <23772.52098.604839.234070@rob.eddelbuettel.com>
 <8969f674-e65f-cbe9-1365-e643082b8620@mtholyoke.edu>
 <23773.33637.287947.53764@rob.eddelbuettel.com>
 <099bf9cc-5527-a326-903c-128998f89df5@mtholyoke.edu>
Message-ID: <23773.53991.988954.115968@rob.eddelbuettel.com>


Hi Barbara,

On 16 May 2019 at 16:48, Barbara Lerner wrote:
| This is very helpful, thank you!? The R Internals document gave me the 
| clues that I need.

Great!
 
| I am pretty certain that more things are being checked than before as 
| problems are being reported with code that has not changed.? In 
| particular, it is checking if logical expressions are returning a vector 
| of length > 1.? I had is.null tests where I wanted to check if a 

Ah, yes, that is a new check which IIRC only became active with R 3.6.0.

| variable was null.? Unfortunately, when the variable contained a vector, 
| it was checking whether the members were null, which is not what I 
| intended.? I understand the error reports now and can fix these.

Nice.  Glad I could help.

Cheers, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Fri May 17 18:04:22 2019
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Fri, 17 May 2019 12:04:22 -0400
Subject: [R-pkg-devel] Check Results ERROR on Windows R release
Message-ID: <CAMVrHdBqP4B1PzPUFaugH=e98xTY6_ZBjLw0dBHLGPwVH6P6TA@mail.gmail.com>

Hello,

On submitting an update of my R package (HACSim), checks fail on
r-release-windows-ix86+x86_64
<https://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/HACSim-00check.html>

The updated package, in addition to improving on documentation, also fixes
a noLD error by replacing

if (sum(probs) == 1) {
   stop("probs must sum to 1")
}

with the less strict

if (!isTRUE(all.equal(1, sum(probs), tolerance =
.Machine$double.eps^0.25))) {
  stop("probs must sum to 1")
}

On viewing the check details, the following was noted:


** byte-compile and prepare package for lazy loading

Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()),
versionCheck = vI[[j]]) :
  there is no package called 'dplyr'
Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart
-> doWithOneRestart
Execution halted
ERROR: lazy loading failed for package 'HACSim'


I don't know why the dplyr package creeps in, as I don't list it in my
NAMESPACE file.

Any idea on what could be going on here?


Thanks.

Cheers,

Jarrett

	[[alternative HTML version deleted]]


From w|n@tonch@ng1 @end|ng |rom gm@||@com  Fri May 17 18:48:18 2019
From: w|n@tonch@ng1 @end|ng |rom gm@||@com (Winston Chang)
Date: Fri, 17 May 2019 11:48:18 -0500
Subject: [R-pkg-devel] Check Results ERROR on Windows R release
In-Reply-To: <CAMVrHdBqP4B1PzPUFaugH=e98xTY6_ZBjLw0dBHLGPwVH6P6TA@mail.gmail.com>
References: <CAMVrHdBqP4B1PzPUFaugH=e98xTY6_ZBjLw0dBHLGPwVH6P6TA@mail.gmail.com>
Message-ID: <CAFOpNVFp2X51aOOyRdibva1fHikco1QL8iutV0FmtUFsazeoGA@mail.gmail.com>

It looks like hacSIM imports pegas, which imports adegenet, which imports dplyr.

-Winston


On Fri, May 17, 2019 at 11:04 AM Jarrett Phillips
<phillipsjarrett1 at gmail.com> wrote:
>
> Hello,
>
> On submitting an update of my R package (HACSim), checks fail on
> r-release-windows-ix86+x86_64
> <https://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/HACSim-00check.html>
>
> The updated package, in addition to improving on documentation, also fixes
> a noLD error by replacing
>
> if (sum(probs) == 1) {
>    stop("probs must sum to 1")
> }
>
> with the less strict
>
> if (!isTRUE(all.equal(1, sum(probs), tolerance =
> .Machine$double.eps^0.25))) {
>   stop("probs must sum to 1")
> }
>
> On viewing the check details, the following was noted:
>
>
> ** byte-compile and prepare package for lazy loading
>
> Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()),
> versionCheck = vI[[j]]) :
>   there is no package called 'dplyr'
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart
> -> doWithOneRestart
> Execution halted
> ERROR: lazy loading failed for package 'HACSim'
>
>
> I don't know why the dplyr package creeps in, as I don't list it in my
> NAMESPACE file.
>
> Any idea on what could be going on here?
>
>
> Thanks.
>
> Cheers,
>
> Jarrett
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |uc@r @end|ng |rom |edor@project@org  Fri May 17 18:52:56 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 17 May 2019 18:52:56 +0200
Subject: [R-pkg-devel] Check Results ERROR on Windows R release
In-Reply-To: <CAMVrHdBqP4B1PzPUFaugH=e98xTY6_ZBjLw0dBHLGPwVH6P6TA@mail.gmail.com>
References: <CAMVrHdBqP4B1PzPUFaugH=e98xTY6_ZBjLw0dBHLGPwVH6P6TA@mail.gmail.com>
Message-ID: <CALEXWq3CSoRvdO7RtBM3fxmTx=o9ALrAxYiN75C1Lx6+FXmz1A@mail.gmail.com>

On Fri, 17 May 2019 at 18:05, Jarrett Phillips
<phillipsjarrett1 at gmail.com> wrote:
>
> Hello,
>
> On submitting an update of my R package (HACSim), checks fail on
> r-release-windows-ix86+x86_64
> <https://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/HACSim-00check.html>
>
> The updated package, in addition to improving on documentation, also fixes
> a noLD error by replacing
>
> if (sum(probs) == 1) {
>    stop("probs must sum to 1")
> }
>
> with the less strict
>
> if (!isTRUE(all.equal(1, sum(probs), tolerance =
> .Machine$double.eps^0.25))) {
>   stop("probs must sum to 1")
> }
>
> On viewing the check details, the following was noted:
>
>
> ** byte-compile and prepare package for lazy loading
>
> Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()),
> versionCheck = vI[[j]]) :
>   there is no package called 'dplyr'
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart
> -> doWithOneRestart
> Execution halted
> ERROR: lazy loading failed for package 'HACSim'
>
>
> I don't know why the dplyr package creeps in, as I don't list it in my
> NAMESPACE file.

Your package imports pegas, which depends on adegenet, which imports dplyr.

> Any idea on what could be going on here?

Probably just a glitch that will be solved the next time the check is triggered.

I?aki


From edd @end|ng |rom deb|@n@org  Fri May 17 22:55:38 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 17 May 2019 15:55:38 -0500
Subject: [R-pkg-devel] 
 R CMD check works but with devtools::check() examples fail
In-Reply-To: <1C3B0A3E-91B1-4272-A029-CEC39A727887@icloud.com>
References: <fe5951b0-b5d2-dcc1-78d1-efd445183cd4@mtholyoke.edu>
 <23772.52098.604839.234070@rob.eddelbuettel.com>
 <8969f674-e65f-cbe9-1365-e643082b8620@mtholyoke.edu>
 <23773.33637.287947.53764@rob.eddelbuettel.com>
 <099bf9cc-5527-a326-903c-128998f89df5@mtholyoke.edu>
 <23773.53991.988954.115968@rob.eddelbuettel.com>
 <1C3B0A3E-91B1-4272-A029-CEC39A727887@icloud.com>
Message-ID: <23775.8138.437077.979055@rob.eddelbuettel.com>


On 17 May 2019 at 08:33, Rainer Krug wrote:
| Interesting discussion - because I had similar issues.
| 
| @Dirk: You are developing packages fir ages - do you probably have a template make file you could share (as I assume, you use make) which is doing all these checks?

Nothing special -- just a few simple wrappers (generally written using
littler's r as I tend to live on Linux, should work from Rscript too) which I
call from shell: build.r to build, check.r to check, rcc.r to run (Gabor's
nice) rcmdcheck around the tarball (or directory or ...), install.r and
install2.r, update.r and so on. They are in the inst/examples/ directory of
source littler (and hence examples/ of installed littler).

The rule is that they are mostly skinny wrapper around the same functions R
uses when your call R CMD build or R CMD check, but saving me a few
keystrokes each time ... and cooperating better with TAB completion in bash.

So nothing magic.  Sorry :)

Dirk

PS It would be nice if R Core exported these functions:
     tools:::.build_packages
     tools:::.check_packages
   for us to use from packages.

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri May 17 23:19:49 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 17 May 2019 23:19:49 +0200
Subject: [R-pkg-devel] Check Results ERROR on Windows R release
In-Reply-To: <CALEXWq3CSoRvdO7RtBM3fxmTx=o9ALrAxYiN75C1Lx6+FXmz1A@mail.gmail.com>
References: <CAMVrHdBqP4B1PzPUFaugH=e98xTY6_ZBjLw0dBHLGPwVH6P6TA@mail.gmail.com>
 <CALEXWq3CSoRvdO7RtBM3fxmTx=o9ALrAxYiN75C1Lx6+FXmz1A@mail.gmail.com>
Message-ID: <006ddfb2-5067-1e89-62c3-6cfdca57c3c7@statistik.tu-dortmund.de>

Yes, looks like some race condition, just wait a day or two.

Best,
Uwe Ligges

On 17.05.2019 18:52, I?aki Ucar wrote:
> On Fri, 17 May 2019 at 18:05, Jarrett Phillips
> <phillipsjarrett1 at gmail.com> wrote:
>>
>> Hello,
>>
>> On submitting an update of my R package (HACSim), checks fail on
>> r-release-windows-ix86+x86_64
>> <https://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/HACSim-00check.html>
>>
>> The updated package, in addition to improving on documentation, also fixes
>> a noLD error by replacing
>>
>> if (sum(probs) == 1) {
>>     stop("probs must sum to 1")
>> }
>>
>> with the less strict
>>
>> if (!isTRUE(all.equal(1, sum(probs), tolerance =
>> .Machine$double.eps^0.25))) {
>>    stop("probs must sum to 1")
>> }
>>
>> On viewing the check details, the following was noted:
>>
>>
>> ** byte-compile and prepare package for lazy loading
>>
>> Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()),
>> versionCheck = vI[[j]]) :
>>    there is no package called 'dplyr'
>> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart
>> -> doWithOneRestart
>> Execution halted
>> ERROR: lazy loading failed for package 'HACSim'
>>
>>
>> I don't know why the dplyr package creeps in, as I don't list it in my
>> NAMESPACE file.
> 
> Your package imports pegas, which depends on adegenet, which imports dplyr.
> 
>> Any idea on what could be going on here?
> 
> Probably just a glitch that will be solved the next time the check is triggered.
> 
> I?aki
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@tr7320 @end|ng |rom un|@@ydney@edu@@u  Sat May 18 10:00:03 2019
From: d@tr7320 @end|ng |rom un|@@ydney@edu@@u (Dario Strbenac)
Date: Sat, 18 May 2019 08:00:03 +0000
Subject: [R-pkg-devel] Function Overloading of S4 Methods
In-Reply-To: <CAPm+3sBdCXWDkPbQJ2_kpB4=tG0zOMAZ4XGhoWOrwiL7ixZ9aA@mail.gmail.com>
References: <SYBPR01MB393171B878B900A46C041F92CD330@SYBPR01MB3931.ausprd01.prod.outlook.com>,
 <CAPm+3sBdCXWDkPbQJ2_kpB4=tG0zOMAZ4XGhoWOrwiL7ixZ9aA@mail.gmail.com>
Message-ID: <SYBPR01MB39313AC47C0DA886D711134ACD040@SYBPR01MB3931.ausprd01.prod.outlook.com>

Good day,

Your conclusion seems to be different to the details you discussed. Don't you intend to conclude that it's not possible with an S4 generic to define methods with different argument names which is different to a language such as C++?

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia

From ||nu@@|@chen @end|ng |rom gm@||@com  Sat May 18 11:28:17 2019
From: ||nu@@|@chen @end|ng |rom gm@||@com (Linus Chen)
Date: Sat, 18 May 2019 11:28:17 +0200
Subject: [R-pkg-devel] Function Overloading of S4 Methods
In-Reply-To: <SYBPR01MB39313AC47C0DA886D711134ACD040@SYBPR01MB3931.ausprd01.prod.outlook.com>
References: <SYBPR01MB393171B878B900A46C041F92CD330@SYBPR01MB3931.ausprd01.prod.outlook.com>
 <CAPm+3sBdCXWDkPbQJ2_kpB4=tG0zOMAZ4XGhoWOrwiL7ixZ9aA@mail.gmail.com>
 <SYBPR01MB39313AC47C0DA886D711134ACD040@SYBPR01MB3931.ausprd01.prod.outlook.com>
Message-ID: <CAPm+3sBkv8DcRru-PN4U8G7-xUhYBWikYUyeSedaK9X-d=7DQQ@mail.gmail.com>

Dear Dario,

I think differently, I think my examples show the resemblance between
the way of "dispatching" for S4 generic and that for C++ overloaded
function.
Both are dispatched ONLY through the type of arguments.

Again following your original example:
int larger(int x, int y);
char larger(char first, char second);
char larger(char x, char y){ # This will work!
if y>x y else x;
}
x = 'a' ; b='b';
larger(x,y);  # this will still call the second function.

The declaration "char largerChar(char first, char second);" does not
make any constraint on the name of argument...

Hope this helps.

Best,
Lei Chen

On Sat, May 18, 2019 at 10:00 AM Dario Strbenac
<dstr7320 at uni.sydney.edu.au> wrote:
>
> Good day,
>
> Your conclusion seems to be different to the details you discussed. Don't you intend to conclude that it's not possible with an S4 generic to define methods with different argument names which is different to a language such as C++?
>
> --------------------------------------
> Dario Strbenac
> University of Sydney
> Camperdown NSW 2050
> Australia
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Sat May 18 14:39:36 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Sat, 18 May 2019 12:39:36 +0000
Subject: [R-pkg-devel] Function Overloading of S4 Methods
In-Reply-To: <CAPm+3sBkv8DcRru-PN4U8G7-xUhYBWikYUyeSedaK9X-d=7DQQ@mail.gmail.com>
References: <SYBPR01MB393171B878B900A46C041F92CD330@SYBPR01MB3931.ausprd01.prod.outlook.com>
 <CAPm+3sBdCXWDkPbQJ2_kpB4=tG0zOMAZ4XGhoWOrwiL7ixZ9aA@mail.gmail.com>
 <SYBPR01MB39313AC47C0DA886D711134ACD040@SYBPR01MB3931.ausprd01.prod.outlook.com>
 <CAPm+3sBkv8DcRru-PN4U8G7-xUhYBWikYUyeSedaK9X-d=7DQQ@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F71BBFE@MBXP02.ds.man.ac.uk>


>Both are dispatched ONLY through the type of arguments.

Not quite. The dispatch may be by type but C++ identifies the arguments by position, while S4 applies R's dispatch rules
and respect the names, if present.  

Regarding your example from a previous email:

> ...You can write the previous function prototypes simply as
>
> int larger(int x, int y);
> char larger(char first, char second);

You can do this in C++ only because C++ doesn't care what you call the parameters. 
I don't know why you would want to do this (in C++ or R), it seems such a bad style even if possible.
In R you can define methods with different arguments, e.g. by declaring your function with a signature like:

larger <- function(x, y, first, second)

but then to use argument 'first' you need  to use it something like 'larger(first = whatever, ...)'. 


Georgi Boshnakov

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Linus Chen
Sent: 18 May 2019 10:28
To: Dario Strbenac
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Function Overloading of S4 Methods

Dear Dario,

I think differently, I think my examples show the resemblance between
the way of "dispatching" for S4 generic and that for C++ overloaded
function.
Both are dispatched ONLY through the type of arguments.

Again following your original example:
int larger(int x, int y);
char larger(char first, char second);
char larger(char x, char y){ # This will work!
if y>x y else x;
}
x = 'a' ; b='b';
larger(x,y);  # this will still call the second function.

The declaration "char largerChar(char first, char second);" does not
make any constraint on the name of argument...

Hope this helps.

Best,
Lei Chen

On Sat, May 18, 2019 at 10:00 AM Dario Strbenac
<dstr7320 at uni.sydney.edu.au> wrote:
>
> Good day,
>
> Your conclusion seems to be different to the details you discussed. Don't you intend to conclude that it's not possible with an S4 generic to define methods with different argument names which is different to a language such as C++?
>
> --------------------------------------
> Dario Strbenac
> University of Sydney
> Camperdown NSW 2050
> Australia
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat May 18 21:42:34 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 18 May 2019 12:42:34 -0700
Subject: R3.6.0 suppressing S3 overwrite messages
Message-ID: <C86A45F9-068A-4EA4-AF1C-5835B575E942@noaa.gov>

Hi All:

My memory is that this was discussed here,  but i can't find the emails, including in the archives ( i did find a similar query from Yihui on r-dev.).  Probably there,  I am just not seeing it.  In the package I am working on for submission,  when I load the package i get:

> Registered S3 methods overwritten by 'ggplot2':
>   method         from 
>   [.quosures     rlang
>   c.quosures     rlang
>   print.quosures rlang
> Registered S3 method overwritten by 'crul':
>   method                 from
>   as.character.form_file httr
> Registered S3 method overwritten by 'hoardr':
>   method           from
>   print.cache_info httr

Can these be suppressed?

Thanks,

-Roy

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat May 18 22:03:46 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 18 May 2019 16:03:46 -0400
Subject: [R-pkg-devel] R3.6.0 suppressing S3 overwrite messages
In-Reply-To: <mailman.3977.1224.1558208567.8508.r-package-devel@r-project.org>
References: <mailman.3977.1224.1558208567.8508.r-package-devel@r-project.org>
Message-ID: <43e0d406-238f-aa11-269d-fa2a61f93328@gmail.com>

On 18/05/2019 3:42 p.m., Roy Mendelssohn - NOAA Federal via 
R-package-devel wrote:
> 
> My memory is that this was discussed here,  but i can't find the emails, including in the archives ( i did find a similar query from Yihui on r-dev.).  Probably there,  I am just not seeing it.  In the package I am working on for submission,  when I load the package i get:


There was a thread about this on R-help, started by Rolf Turner on April 
29, subject "Message produced under R 3.6.0.".

Users can suppress those messages, but I don't think package writers 
can:  they indicate true bugs, and the packages mentioned (ggplot2, 
crul, hoardr in your case) need to be fixed to get rid of them.

Duncan Murdoch


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat May 18 22:05:23 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 18 May 2019 13:05:23 -0700
Subject: [R-pkg-devel] R3.6.0 suppressing S3 overwrite messages
In-Reply-To: <43e0d406-238f-aa11-269d-fa2a61f93328@gmail.com>
References: <mailman.3977.1224.1558208567.8508.r-package-devel@r-project.org>
 <43e0d406-238f-aa11-269d-fa2a61f93328@gmail.com>
Message-ID: <A15E687B-B031-48A3-A695-DC8C9C0E22C1@noaa.gov>

Thanks.  I thought I remembered seeing this discussed.  I was looking in the archives for this list,  not r-help.

-Roy


> On May 18, 2019, at 1:03 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 18/05/2019 3:42 p.m., Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>> My memory is that this was discussed here,  but i can't find the emails, including in the archives ( i did find a similar query from Yihui on r-dev.).  Probably there,  I am just not seeing it.  In the package I am working on for submission,  when I load the package i get:
> 
> 
> There was a thread about this on R-help, started by Rolf Turner on April 29, subject "Message produced under R 3.6.0.".
> 
> Users can suppress those messages, but I don't think package writers can:  they indicate true bugs, and the packages mentioned (ggplot2, crul, hoardr in your case) need to be fixed to get rid of them.
> 
> Duncan Murdoch
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat May 18 22:23:35 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 18 May 2019 16:23:35 -0400
Subject: [R-pkg-devel] R3.6.0 suppressing S3 overwrite messages
In-Reply-To: <43e0d406-238f-aa11-269d-fa2a61f93328@gmail.com>
References: <mailman.3977.1224.1558208567.8508.r-package-devel@r-project.org>
 <43e0d406-238f-aa11-269d-fa2a61f93328@gmail.com>
Message-ID: <4540ca14-cc0f-c168-c9d9-563775e03604@gmail.com>

On 18/05/2019 4:03 p.m., Duncan Murdoch wrote:
> On 18/05/2019 3:42 p.m., Roy Mendelssohn - NOAA Federal via
> R-package-devel wrote:
>>
>> My memory is that this was discussed here,  but i can't find the emails, including in the archives ( i did find a similar query from Yihui on r-dev.).  Probably there,  I am just not seeing it.  In the package I am working on for submission,  when I load the package i get:
> 
> 
> There was a thread about this on R-help, started by Rolf Turner on April
> 29, subject "Message produced under R 3.6.0.".
> 
> Users can suppress those messages, but I don't think package writers
> can:  they indicate true bugs, and the packages mentioned (ggplot2,
> crul, hoardr in your case) need to be fixed to get rid of them.

Sorry, that claim isn't correct.  For example, hoardr has a conflict 
with httr, but it's really a weakness of S3 that is causing this:  they 
both define things with class "cache_info", and the warning you're 
seeing is because both have print.cache_info methods.  However, the 
classes are unrelated.  I think the problem is that R can only have one 
print.cache_info method active, and you somehow got both hoardr and httr 
loaded at the same time.

Either one of them could work around this S3 limitation by changing the 
name of the class (e.g. to "hoardr_cache_info" or "httr_cache_info"), 
but I don't think it was fair of me to suggest some flaw in either of 
those packages for the collision.

Duncan Murdoch


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat May 18 22:34:16 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 18 May 2019 13:34:16 -0700
Subject: [R-pkg-devel] R3.6.0 suppressing S3 overwrite messages
In-Reply-To: <4540ca14-cc0f-c168-c9d9-563775e03604@gmail.com>
References: <mailman.3977.1224.1558208567.8508.r-package-devel@r-project.org>
 <43e0d406-238f-aa11-269d-fa2a61f93328@gmail.com>
 <4540ca14-cc0f-c168-c9d9-563775e03604@gmail.com>
Message-ID: <DD986E7E-DA3C-461C-9B83-74122D1789B2@noaa.gov>

Thanks again.  I use httr explicitly,  I believe hoardr is used by another package that I use.  I don't think the conflict will cause problems given how I am using them,  but your explanation clarifies what is going on for me to check on.

-Roy


> On May 18, 2019, at 1:23 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 18/05/2019 4:03 p.m., Duncan Murdoch wrote:
>> On 18/05/2019 3:42 p.m., Roy Mendelssohn - NOAA Federal via
>> R-package-devel wrote:
>>> 
>>> My memory is that this was discussed here,  but i can't find the emails, including in the archives ( i did find a similar query from Yihui on r-dev.).  Probably there,  I am just not seeing it.  In the package I am working on for submission,  when I load the package i get:
>> There was a thread about this on R-help, started by Rolf Turner on April
>> 29, subject "Message produced under R 3.6.0.".
>> Users can suppress those messages, but I don't think package writers
>> can:  they indicate true bugs, and the packages mentioned (ggplot2,
>> crul, hoardr in your case) need to be fixed to get rid of them.
> 
> Sorry, that claim isn't correct.  For example, hoardr has a conflict with httr, but it's really a weakness of S3 that is causing this:  they both define things with class "cache_info", and the warning you're seeing is because both have print.cache_info methods.  However, the classes are unrelated.  I think the problem is that R can only have one print.cache_info method active, and you somehow got both hoardr and httr loaded at the same time.
> 
> Either one of them could work around this S3 limitation by changing the name of the class (e.g. to "hoardr_cache_info" or "httr_cache_info"), but I don't think it was fair of me to suggest some flaw in either of those packages for the collision.
> 
> Duncan Murdoch

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From p@ve| @end|ng |rom uow@edu@@u  Sat May 18 23:34:29 2019
From: p@ve| @end|ng |rom uow@edu@@u (Pavel Krivitsky)
Date: Sat, 18 May 2019 21:34:29 +0000
Subject: [R-pkg-devel] 
 Three-argument S3method declaration does not seem to
 affect dispatching from inside the package.
In-Reply-To: <CALEXWq02kZdw79BWJiAtj-HXMnCeX_PRF_yFTT6DpNCn=MxPAw@mail.gmail.com>
References: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>
 <CALEXWq058Wg0oskeaFAjPdptTEjVMWLFbUr+FeBwdKwP93T=Kw@mail.gmail.com>
 <14d531d671791b51683b71ee0eece1c9a29c374d.camel@uow.edu.au>
 <CALEXWq02kZdw79BWJiAtj-HXMnCeX_PRF_yFTT6DpNCn=MxPAw@mail.gmail.com>
Message-ID: <8429787eb123a937ddb8770c80587d6e2ae05195.camel@uow.edu.au>

Hi, Inaki,

On Tue, 2019-05-14 at 12:50 +0200, I?aki Ucar wrote:
> The thing is that, in R, "nearer" means "the calling environment"
> (and then, other things). When you call test_me(), the calling
> environment for gen() is the package namespace. When you call gen()
> directly, thenthe calling environment is the global environment. So
> what happens here follows the principle of least astonishment.

I don't think that we disagree about which environment takes
precedence. The issue is whether *within a a given environment*,
registration or function naming should take precedence.

> The issue here is that you are registering a non-standard name
> (.gen.formula) for that generic and then defining what would be the
> standard name (gen.formula) for... what purpose? IMHO, this is a bad
> practice and should be avoided.

The situation initially arose when I wanted to soft-deprecate calling a
particular method by its full name in order to clean up the package's
namespace.

To use our working example, I wanted calls to gen.formula() to issue a
deprecation warning, but calls to gen(formula) not to. The simplest way
to do that that I could find was to create a function, say,
.gen.formula() that would implement the method and declare it as the S3
export, and modify gen.formula() to issue the warning before passing on
to .gen.formula(). Then, direct calls to gen.formula() would produce a
warning, but gen(formula) would by pass it.

> > That is, for a call from inside a package, the order of precedence
> > would be as follows:
> >    1. S3method() in that package's NAMESPACE.
> >    2. Appropriately named function in that package (exported or
> > not).
> >    3. Appropriately named function in calling environment (which
> > may be
> >       GlobalEnv).
> >    4. S3method() in other loaded packages' NAMESPACEs.
> >    5. Appropriately named functions exported by other loaded
> > packages'
> >       NAMESPACEs.
> > 
> > For a call from outside a package, the precedence is the same, but
> > 1 and 2 are not relevant.
> > 
> > As far as I can tell, this is the current behaviour except for the
> > relative ordering of 1 and 2.
> 
> Nope. Current behaviour (see details in ?UseMethod) is:
> 
> "To support this, UseMethod and NextMethod search for methods in two
> places: in the environment in which the generic function is called,
> and in the registration data base for the environment in which the
> generic is defined".

Can you be more specific where the sequence above contradicts the
current implementation (except for swapping 1 and 2)? As far as I can
tell, it's just a more concrete description of what's in the
documentation.

			Best Regards,
			Pavel

-- 
Pavel Krivitsky
Lecturer in Statistics
National Institute of Applied Statistics Research Australia (NIASRA)
School of Mathematics and Applied Statistics | Building 39C Room 154
University of Wollongong NSW 2522 Australia
T +61 2 4221 3713
Web (NIASRA): http://niasra.uow.edu.au/index.html
Web (Personal): http://www.krivitsky.net/research
ORCID: 0000-0002-9101-3362

NOTICE: This email is intended for the addressee named and may contain
confidential information. If you are not the intended recipient, please
delete it and notify the sender. Please consider the environment before
printing this email.

From |uc@r @end|ng |rom |edor@project@org  Sun May 19 16:59:07 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 19 May 2019 16:59:07 +0200
Subject: [R-pkg-devel] 
 Three-argument S3method declaration does not seem to
 affect dispatching from inside the package.
In-Reply-To: <8429787eb123a937ddb8770c80587d6e2ae05195.camel@uow.edu.au>
References: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>
 <CALEXWq058Wg0oskeaFAjPdptTEjVMWLFbUr+FeBwdKwP93T=Kw@mail.gmail.com>
 <14d531d671791b51683b71ee0eece1c9a29c374d.camel@uow.edu.au>
 <CALEXWq02kZdw79BWJiAtj-HXMnCeX_PRF_yFTT6DpNCn=MxPAw@mail.gmail.com>
 <8429787eb123a937ddb8770c80587d6e2ae05195.camel@uow.edu.au>
Message-ID: <CALEXWq0duRo9zX1f_TBytsEZgdfhtxvQ=kFKtnzZP-sZOp6iXQ@mail.gmail.com>

On Sat, 18 May 2019 at 23:34, Pavel Krivitsky <pavel at uow.edu.au> wrote:
>
> > The issue here is that you are registering a non-standard name
> > (.gen.formula) for that generic and then defining what would be the
> > standard name (gen.formula) for... what purpose? IMHO, this is a bad
> > practice and should be avoided.
>
> The situation initially arose when I wanted to soft-deprecate calling a
> particular method by its full name in order to clean up the package's
> namespace.
>
> To use our working example, I wanted calls to gen.formula() to issue a
> deprecation warning, but calls to gen(formula) not to. The simplest way
> to do that that I could find was to create a function, say,
> .gen.formula() that would implement the method and declare it as the S3
> export, and modify gen.formula() to issue the warning before passing on
> to .gen.formula(). Then, direct calls to gen.formula() would produce a
> warning, but gen(formula) would by pass it.

IMO the simplest way to do this is to check who the caller was:

foo <- function(x) UseMethod("foo")
foo.bar <- function(x) {
  sc <- sys.call(-1)
  if (is.null(sc) || sc[[1]] != "foo")
    .Deprecated(msg="Calling 'foo.bar' directly is deprecated")
}

x <- 1
class(x) <- "bar"

foo(x)      # silent
foo.bar(x)  # a warning is issued

> > > That is, for a call from inside a package, the order of precedence
> > > would be as follows:
> > >    1. S3method() in that package's NAMESPACE.
> > >    2. Appropriately named function in that package (exported or
> > > not).
> > >    3. Appropriately named function in calling environment (which
> > > may be
> > >       GlobalEnv).
> > >    4. S3method() in other loaded packages' NAMESPACEs.
> > >    5. Appropriately named functions exported by other loaded
> > > packages'
> > >       NAMESPACEs.
> > >
> > > For a call from outside a package, the precedence is the same, but
> > > 1 and 2 are not relevant.
> > >
> > > As far as I can tell, this is the current behaviour except for the
> > > relative ordering of 1 and 2.
> >
> > Nope. Current behaviour (see details in ?UseMethod) is:
> >
> > "To support this, UseMethod and NextMethod search for methods in two
> > places: in the environment in which the generic function is called,
> > and in the registration data base for the environment in which the
> > generic is defined".
>
> Can you be more specific where the sequence above contradicts the
> current implementation (except for swapping 1 and 2)? As far as I can
> tell, it's just a more concrete description of what's in the
> documentation.

The description in the documentation means that point 3) in your list
goes always first, which automatically implies 2) if the generic is
defined in the same package.

I?aki


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sun May 19 20:09:17 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sun, 19 May 2019 11:09:17 -0700
Subject: WInbuilder and rHub updating
Message-ID: <BF5B41DF-CDA0-47BC-AC05-B3B2F01CD32D@noaa.gov>

HI All:

I have a package I am developing that depends on a package that was just accepted and appears on CRAN.  Do Winbuilder and rHub update daily,  or if not,  what is the usual lag for new packages to appear on the test machines.  Or may generally,  is there a way to query what packages are available on either or both of these?  That would be the biggest help.

Thanks,

-Roy



**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From p@ve| @end|ng |rom uow@edu@@u  Sun May 19 23:23:45 2019
From: p@ve| @end|ng |rom uow@edu@@u (Pavel Krivitsky)
Date: Sun, 19 May 2019 21:23:45 +0000
Subject: [R-pkg-devel] 
 Three-argument S3method declaration does not seem to
 affect dispatching from inside the package.
In-Reply-To: <CALEXWq0duRo9zX1f_TBytsEZgdfhtxvQ=kFKtnzZP-sZOp6iXQ@mail.gmail.com>
References: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>
 <CALEXWq058Wg0oskeaFAjPdptTEjVMWLFbUr+FeBwdKwP93T=Kw@mail.gmail.com>
 <14d531d671791b51683b71ee0eece1c9a29c374d.camel@uow.edu.au>
 <CALEXWq02kZdw79BWJiAtj-HXMnCeX_PRF_yFTT6DpNCn=MxPAw@mail.gmail.com>
 <8429787eb123a937ddb8770c80587d6e2ae05195.camel@uow.edu.au>
 <CALEXWq0duRo9zX1f_TBytsEZgdfhtxvQ=kFKtnzZP-sZOp6iXQ@mail.gmail.com>
Message-ID: <133e2cf6d1a5a3597545997f441aca9502597632.camel@uow.edu.au>

Hi, Inaki,

On Sun, 2019-05-19 at 16:59 +0200, I?aki Ucar wrote:
> IMO the simplest way to do this is to check who the caller was:
> 
> foo <- function(x) UseMethod("foo")
> foo.bar <- function(x) {
>   sc <- sys.call(-1)
>   if (is.null(sc) || sc[[1]] != "foo")
>     .Deprecated(msg="Calling 'foo.bar' directly is deprecated")
> }
> 
> x <- 1
> class(x) <- "bar"
> 
> foo(x)      # silent
> foo.bar(x)  # a warning is issued

f <- getS3method("foo","bar")
f(x) # spurious warning

foo.baz <- function(x) NextMethod("foo")
class(x) <- c("baz","bar")
foo(x) # spurious warning

Believe me, I spent a lot of time trying to get this to work, and I
tried even more sophisticated call stack alchemy, but people kept
getting false positives and negatives. (Take a look at my attempt in
the statnet.common package.)

> The description in the documentation means that point 3) in your list
> goes always first, which automatically implies 2) if the generic is
> defined in the same package.

Are you sure which package defines the generic matters? I've just ran
some tests with two packages and moving the generic around doesn't seem
to affect things: the calling function determines whose method is used.

It seems to me like there is no contradiction after all, except that I
propose that the registered method should take precedence within a
namespace.

The only situation in which it would change R's behaviour would be when
a package/namespace contains a function foo.bar() AND a NAMESPACE
containing S3method(foo,bar,not.foo.bar) AND calls foo() on objects of
type bar from inside the package. It is extremely unlikely to break any
existing code.

				Best,
				Pavel

-- 
Pavel Krivitsky
Lecturer in Statistics
National Institute of Applied Statistics Research Australia (NIASRA)
School of Mathematics and Applied Statistics | Building 39C Room 154
University of Wollongong NSW 2522 Australia
T +61 2 4221 3713
Web (NIASRA): http://niasra.uow.edu.au/index.html
Web (Personal): http://www.krivitsky.net/research
ORCID: 0000-0002-9101-3362

NOTICE: This email is intended for the addressee named and may contain
confidential information. If you are not the intended recipient, please
delete it and notify the sender. Please consider the environment before
printing this email.

From |uc@r @end|ng |rom |edor@project@org  Mon May 20 01:45:06 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 20 May 2019 01:45:06 +0200
Subject: [R-pkg-devel] 
 Three-argument S3method declaration does not seem to
 affect dispatching from inside the package.
In-Reply-To: <133e2cf6d1a5a3597545997f441aca9502597632.camel@uow.edu.au>
References: <49d473a1bfa29f95d74f931ecfdc2a6b346ca6a2.camel@uow.edu.au>
 <CALEXWq058Wg0oskeaFAjPdptTEjVMWLFbUr+FeBwdKwP93T=Kw@mail.gmail.com>
 <14d531d671791b51683b71ee0eece1c9a29c374d.camel@uow.edu.au>
 <CALEXWq02kZdw79BWJiAtj-HXMnCeX_PRF_yFTT6DpNCn=MxPAw@mail.gmail.com>
 <8429787eb123a937ddb8770c80587d6e2ae05195.camel@uow.edu.au>
 <CALEXWq0duRo9zX1f_TBytsEZgdfhtxvQ=kFKtnzZP-sZOp6iXQ@mail.gmail.com>
 <133e2cf6d1a5a3597545997f441aca9502597632.camel@uow.edu.au>
Message-ID: <CALEXWq1UQBHAYt5Y7i+ja7o9Xwber-6QYmfpWk5eZ4Fux-q3Aw@mail.gmail.com>

On Sun, 19 May 2019 at 23:23, Pavel Krivitsky <pavel at uow.edu.au> wrote:
>
> Hi, Inaki,
>
> On Sun, 2019-05-19 at 16:59 +0200, I?aki Ucar wrote:
> > IMO the simplest way to do this is to check who the caller was:
> >
> > foo <- function(x) UseMethod("foo")
> > foo.bar <- function(x) {
> >   sc <- sys.call(-1)
> >   if (is.null(sc) || sc[[1]] != "foo")
> >     .Deprecated(msg="Calling 'foo.bar' directly is deprecated")
> > }
> >
> > x <- 1
> > class(x) <- "bar"
> >
> > foo(x)      # silent
> > foo.bar(x)  # a warning is issued
>
> f <- getS3method("foo","bar")
> f(x) # spurious warning
>
> foo.baz <- function(x) NextMethod("foo")
> class(x) <- c("baz","bar")
> foo(x) # spurious warning

Checking the enclosing environment and whether was called through
NextMethod respectively covers these cases too.

> > The description in the documentation means that point 3) in your list
> > goes always first, which automatically implies 2) if the generic is
> > defined in the same package.
>
> Are you sure which package defines the generic matters? I've just ran
> some tests with two packages and moving the generic around doesn't seem
> to affect things: the calling function determines whose method is used.

If package A defines generic foo and package B defines method foo.bar
without registering nor exporting it, then foo can't find foo.bar.

> It seems to me like there is no contradiction after all, except that I
> propose that the registered method should take precedence within a
> namespace.
>
> The only situation in which it would change R's behaviour would be when
> a package/namespace contains a function foo.bar() AND a NAMESPACE
> containing S3method(foo,bar,not.foo.bar) AND calls foo() on objects of
> type bar from inside the package. It is extremely unlikely to break any
> existing code.

To try to avoid changing current behaviour if foo.bar is found, R
would need to check whether the enclosing environment is identical to
the enclosing environment of the registered method, and in that case,
give precedence to the latter (which, BTW, is exactly what you need to
do to fix the first spurious warning above).

And still, funny things may happen. For example, pkgA defines generic
foo, exports foo.bar and registers other.foo.bar instead of foo.bar.
Following your proposal, if I load pkgA and call foo for an object of
class bar, other.foo.bar is called. Then I load pkgB, which registers
just another method for foo.bar, and call foo again. What happens is
that the registered method belongs now to pkgB, which is a different
namespace, so we got different precedence, and foo.bar is called
instead.

Exceptions leads us to inconsistencies like this. I can't speak for R
core, but I don't think that the use case is compelling enough to take
that path.

I?aki


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon May 20 12:19:06 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 20 May 2019 11:19:06 +0100
Subject: [R-pkg-devel] WInbuilder and rHub updating
In-Reply-To: <mailman.3984.1246.1558289368.8508.r-package-devel@r-project.org>
References: <mailman.3984.1246.1558289368.8508.r-package-devel@r-project.org>
Message-ID: <CABtg=Kk=Rr251vwme89OU2b-cWQ5uDW+cDfATeTuhTR-qpNndQ@mail.gmail.com>

Hi Roy,

R-hub installs everything on-demand, at build/check time, from CRAN,
and possibly other sources. So as soon as the package is on CRAN, it
is available on R-hub.

One glitch is that, even though the package is already on CRAN, it
might not have a binary build yet, and if it requires compilation,
then R-hub might not be able to build it. Should this happen, please
open an issue here: https://github.com/r-hub/rhub/issues

R-hub also supports packages from other sources, this is useful for
testing your package with non-CRAN dependencies. See this doc for
details:
https://cran.rstudio.com/web/packages/remotes/vignettes/dependencies.html

Best,
Gabor

On Sun, May 19, 2019 at 7:09 PM Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:
>
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> To: Roy Mendelssohn - NOAA Federal via R-package-devel <R-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Sun, 19 May 2019 11:09:17 -0700
> Subject: WInbuilder and rHub updating
> HI All:
>
> I have a package I am developing that depends on a package that was just accepted and appears on CRAN.  Do Winbuilder and rHub update daily,  or if not,  what is the usual lag for new packages to appear on the test machines.  Or may generally,  is there a way to query what packages are available on either or both of these?  That would be the biggest help.
>
> Thanks,
>
> -Roy
>
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
>
>
>
> ---------- Forwarded message ----------
> From: Roy Mendelssohn - NOAA Federal via R-package-devel <r-package-devel at r-project.org>
> To: Roy Mendelssohn - NOAA Federal via R-package-devel <R-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Sun, 19 May 2019 11:09:17 -0700
> Subject: [R-pkg-devel] WInbuilder and rHub updating
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m|ch@e|@wey|@ndt @end|ng |rom gm@||@com  Mon May 20 22:41:16 2019
From: m|ch@e|@wey|@ndt @end|ng |rom gm@||@com (Michael Weylandt)
Date: Mon, 20 May 2019 15:41:16 -0500
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <64718E0E-4E30-4439-A02A-07BB622504FD@uthscsa.edu>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
 <20190506121422.7d661170@trisector>
 <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>
 <20190510213646.4a340f0d@parabola>
 <CAAmySGMETt9aD+RfmU6qCVhGHzqiE7q+yFk0iHVuvkT9oR9R=Q@mail.gmail.com>
 <884E5EBF-D596-4588-B328-C38C18ED4BC1@uthscsa.edu>
 <CAAmySGM54DYLPzv+UNrvNSQcK35Lt5CyfnSD08YWx3wcZ-Y11w@mail.gmail.com>
 <64718E0E-4E30-4439-A02A-07BB622504FD@uthscsa.edu>
Message-ID: <CAAmySGOOZO3h8PVg=ZR+f5j22Ng3SmPXqBbVMHs3Jr6NAr7xOg@mail.gmail.com>

Negative binomial is a bit trickier since it's a two parameter family
without a closed-form MLE.

For the probability parameter, you can use the closed form MLE at
https://en.wikipedia.org/wiki/Negative_binomial_distribution#Maximum_likelihood_estimation

For the number of samples, you'll need to use an iterative method to
solve the score equation (see the above link).

It's probably easier to code this up yourself rather than calling into
R, but if you do call into R, I'd look into using the `fitdistr`
function instead of a full regression method, as demonstrated at
https://stat.ethz.ch/pipermail/r-help/2012-October/338458.html

Michael

On Sat, May 11, 2019 at 11:10 AM Wang, Zhu <wangz1 at uthscsa.edu> wrote:
>
> Thanks Michael.
>
> I also need an intercept-only negative binomial model with unknown scale parameter. So my thought was on borrowing some codes that already existed. I think Ivan's solution is an excellent one and can be extended to other scenarios.
>
> Best,
>
> Zhu
>
> On May 11, 2019, at 9:48 AM, Michael Weylandt <michael.weylandt at gmail.com> wrote:
>
> On Sat, May 11, 2019 at 8:28 AM Wang, Zhu <wangz1 at uthscsa.edu> wrote:
>>
>>
>> I am open to whatever suggestions but I am not aware a simple closed-form solution for my original question.
>>
>
> It would help if you could clarify your original question a bit more, but for at least the main three GLMs, there are closed form solutions, based on means of y. Assuming canonical links,
>
> - Gaussian: intercept = mean(y)
> - Logistic: intercept = logit(mean(y))  [Note that you have problems here if your data is all 0 or all 1]
> - Poisson: intercept = log(mean(y)) [You have problems here if your data is all 0]
>
> (Check my math on these, but I'm pretty sure this is right.)
>
> Like I said above, this gets trickier if you add observation weights or offsets, but the same ideas work.
>
> Stepping back to the statistical theory: GLMs predict the mean of y, conditional on x. If x doesn't vary (intercept only model), then the GLM is just predicting the mean of y and the MLE for the mean of y is exactly that under standard GLM assumptions - the sample mean of y.
>
> We then just have to use the link function and its inverse to transform to and from the observation space (where mean(y) lives) and the linear predictor space (where the intercept term naturally lives).
>
> Michael


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue May 21 13:47:20 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 21 May 2019 13:47:20 +0200
Subject: [R-pkg-devel] WInbuilder and rHub updating
In-Reply-To: <mailman.3984.1246.1558289368.8508.r-package-devel@r-project.org>
References: <mailman.3984.1246.1558289368.8508.r-package-devel@r-project.org>
Message-ID: <9ffa6a4e-6fc5-bc68-e5f5-d69c5709ab73@statistik.tu-dortmund.de>

For winbuilder and general incoming check services:

New packages on CRAN should be directly available for incoming checks, 
perhaps with some short technical delays of less than one hour.


For winbuilder on demand checks, there may be a lag of 2 days. Requests 
may be considered.

Best,
Uwe Ligges


On 19.05.2019 20:09, Roy Mendelssohn - NOAA Federal via R-package-devel 
wrote:
> 
> Subject:
> WInbuilder and rHub updating
> From:
> Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> Date:
> 19.05.2019, 20:09
> To:
> Roy Mendelssohn - NOAA Federal via R-package-devel 
> <R-package-devel at r-project.org>
> 
> To:
> Roy Mendelssohn - NOAA Federal via R-package-devel 
> <R-package-devel at r-project.org>
> 
> 
> HI All:
> 
> I have a package I am developing that depends on a package that was just accepted and appears on CRAN.  Do Winbuilder and rHub update daily,  or if not,  what is the usual lag for new packages to appear on the test machines.  Or may generally,  is there a way to query what packages are available on either or both of these?  That would be the biggest help.
> 
> Thanks,
> 
> -Roy
> 
> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From t@jendoub|14 @end|ng |rom |mper|@|@@c@uk  Tue May 21 11:40:44 2019
From: t@jendoub|14 @end|ng |rom |mper|@|@@c@uk (Jendoubi Bedhiafi, Takoua)
Date: Tue, 21 May 2019 09:40:44 +0000
Subject: [R-pkg-devel] Rstan invalid connection on winbuilder
Message-ID: <fth4677p383f-1wkrja5gi062-yrvj74p3q3zw-wrbivizacmdx-8ueneiob67uj-g05gxq-t2v9a0-fl47sf-t9nw4jtq7jbo-ym674x-jorkmqia467q-ai3i9n30vvnfnh4wnba956zh-kucojragegl1.1558431641870@email.android.com>


Dear all,

I am resubmitting a package to CRAN after some notes have been reported. The notes are now fixed and I checked the package again locally (OS X) and on winbuilder R 3.5.3 (old release).
A new error appears on the latter when building the vignette saying

Invalid connection
Execution halted

There was no such error on winbuilder builder when I first submitted my package.?
The package uses rstan 2.18.2 which is where the error comes from, I strongly suspect.

I am not able reproduce the error locally as the package passes all checks.

Any help will be much appreciated,
Many thanks

Takoua Jendoubi
Fellow imperial college london


From w@ngz1 @end|ng |rom uth@c@@@edu  Tue May 21 16:29:03 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Tue, 21 May 2019 14:29:03 +0000
Subject: [R-pkg-devel] How to obtain intercept of intercept-only glm in
 Fortran?
In-Reply-To: <CAAmySGOOZO3h8PVg=ZR+f5j22Ng3SmPXqBbVMHs3Jr6NAr7xOg@mail.gmail.com>
References: <a072cdd46e8442be9403bde817ae064e@EX-MCD-1.win.uthscsa.edu>
 <20190506121422.7d661170@trisector>
 <93248a5de13b41048a61272dd506cfd1@EX-MCD-1.win.uthscsa.edu>
 <20190510213646.4a340f0d@parabola>
 <CAAmySGMETt9aD+RfmU6qCVhGHzqiE7q+yFk0iHVuvkT9oR9R=Q@mail.gmail.com>
 <884E5EBF-D596-4588-B328-C38C18ED4BC1@uthscsa.edu>
 <CAAmySGM54DYLPzv+UNrvNSQcK35Lt5CyfnSD08YWx3wcZ-Y11w@mail.gmail.com>
 <64718E0E-4E30-4439-A02A-07BB622504FD@uthscsa.edu>
 <CAAmySGOOZO3h8PVg=ZR+f5j22Ng3SmPXqBbVMHs3Jr6NAr7xOg@mail.gmail.com>
Message-ID: <5ba4594bdc0a4ceaa84665919ed86872@EX-MCD-1.win.uthscsa.edu>

Thanks Michael. I agree that it is possible to simplify the codes.

Best,

Zhu 

-----Original Message-----
From: Michael Weylandt <michael.weylandt at gmail.com> 
Sent: Monday, May 20, 2019 3:41 PM
To: Wang, Zhu <wangz1 at uthscsa.edu>
Cc: Ivan Krylov <krylov.r00t at gmail.com>; R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] How to obtain intercept of intercept-only glm in Fortran?

Negative binomial is a bit trickier since it's a two parameter family without a closed-form MLE.

For the probability parameter, you can use the closed form MLE at https://en.wikipedia.org/wiki/Negative_binomial_distribution#Maximum_likelihood_estimation

For the number of samples, you'll need to use an iterative method to solve the score equation (see the above link).

It's probably easier to code this up yourself rather than calling into R, but if you do call into R, I'd look into using the `fitdistr` function instead of a full regression method, as demonstrated at https://stat.ethz.ch/pipermail/r-help/2012-October/338458.html

Michael

On Sat, May 11, 2019 at 11:10 AM Wang, Zhu <wangz1 at uthscsa.edu> wrote:
>
> Thanks Michael.
>
> I also need an intercept-only negative binomial model with unknown scale parameter. So my thought was on borrowing some codes that already existed. I think Ivan's solution is an excellent one and can be extended to other scenarios.
>
> Best,
>
> Zhu
>
> On May 11, 2019, at 9:48 AM, Michael Weylandt <michael.weylandt at gmail.com> wrote:
>
> On Sat, May 11, 2019 at 8:28 AM Wang, Zhu <wangz1 at uthscsa.edu> wrote:
>>
>>
>> I am open to whatever suggestions but I am not aware a simple closed-form solution for my original question.
>>
>
> It would help if you could clarify your original question a bit more, 
> but for at least the main three GLMs, there are closed form solutions, 
> based on means of y. Assuming canonical links,
>
> - Gaussian: intercept = mean(y)
> - Logistic: intercept = logit(mean(y))  [Note that you have problems 
> here if your data is all 0 or all 1]
> - Poisson: intercept = log(mean(y)) [You have problems here if your 
> data is all 0]
>
> (Check my math on these, but I'm pretty sure this is right.)
>
> Like I said above, this gets trickier if you add observation weights or offsets, but the same ideas work.
>
> Stepping back to the statistical theory: GLMs predict the mean of y, conditional on x. If x doesn't vary (intercept only model), then the GLM is just predicting the mean of y and the MLE for the mean of y is exactly that under standard GLM assumptions - the sample mean of y.
>
> We then just have to use the link function and its inverse to transform to and from the observation space (where mean(y) lives) and the linear predictor space (where the intercept term naturally lives).
>
> Michael

From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue May 21 16:46:11 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 21 May 2019 07:46:11 -0700
Subject: [R-pkg-devel] WInbuilder and rHub updating
In-Reply-To: <9ffa6a4e-6fc5-bc68-e5f5-d69c5709ab73@statistik.tu-dortmund.de>
References: <mailman.3984.1246.1558289368.8508.r-package-devel@r-project.org>
 <9ffa6a4e-6fc5-bc68-e5f5-d69c5709ab73@statistik.tu-dortmund.de>
Message-ID: <547326E9-59B7-46D2-B31A-D45C3BE84267@noaa.gov>

Thanks for the info.  No special requests.  Just no point in sending in a test until the package gets there.

-Roy

> On May 21, 2019, at 4:47 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> For winbuilder and general incoming check services:
> 
> New packages on CRAN should be directly available for incoming checks, perhaps with some short technical delays of less than one hour.
> 
> 
> For winbuilder on demand checks, there may be a lag of 2 days. Requests may be considered.
> 
> Best,
> Uwe Ligges
> 
> 
> On 19.05.2019 20:09, Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>> Subject:
>> WInbuilder and rHub updating
>> From:
>> Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
>> Date:
>> 19.05.2019, 20:09
>> To:
>> Roy Mendelssohn - NOAA Federal via R-package-devel <R-package-devel at r-project.org>
>> To:
>> Roy Mendelssohn - NOAA Federal via R-package-devel <R-package-devel at r-project.org>
>> HI All:
>> I have a package I am developing that depends on a package that was just accepted and appears on CRAN.  Do Winbuilder and rHub update daily,  or if not,  what is the usual lag for new packages to appear on the test machines.  Or may generally,  is there a way to query what packages are available on either or both of these?  That would be the biggest help.
>> Thanks,
>> -Roy
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue May 21 17:59:37 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 21 May 2019 17:59:37 +0200
Subject: [R-pkg-devel] Rstan invalid connection on winbuilder
In-Reply-To: <fth4677p383f-1wkrja5gi062-yrvj74p3q3zw-wrbivizacmdx-8ueneiob67uj-g05gxq-t2v9a0-fl47sf-t9nw4jtq7jbo-ym674x-jorkmqia467q-ai3i9n30vvnfnh4wnba956zh-kucojragegl1.1558431641870@email.android.com>
References: <fth4677p383f-1wkrja5gi062-yrvj74p3q3zw-wrbivizacmdx-8ueneiob67uj-g05gxq-t2v9a0-fl47sf-t9nw4jtq7jbo-ym674x-jorkmqia467q-ai3i9n30vvnfnh4wnba956zh-kucojragegl1.1558431641870@email.android.com>
Message-ID: <65b95f61-cc2a-a3ca-58c5-9a551091b7f6@statistik.tu-dortmund.de>

As the maintainer of winbuilder I am happy to help, but without the name 
of the package nor any reference to any check log and information 
whether this happened once or more than once, I really cannot help....

Best,
Uwe Ligges

On 21.05.2019 11:40, Jendoubi Bedhiafi, Takoua wrote:
> 
> Dear all,
> 
> I am resubmitting a package to CRAN after some notes have been reported. The notes are now fixed and I checked the package again locally (OS X) and on winbuilder R 3.5.3 (old release).
> A new error appears on the latter when building the vignette saying
> 
> Invalid connection
> Execution halted
> 
> There was no such error on winbuilder builder when I first submitted my package.
> The package uses rstan 2.18.2 which is where the error comes from, I strongly suspect.
> 
> I am not able reproduce the error locally as the package passes all checks.
> 
> Any help will be much appreciated,
> Many thanks
> 
> Takoua Jendoubi
> Fellow imperial college london
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu May 23 11:21:45 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 23 May 2019 11:21:45 +0200
Subject: [R-pkg-devel] CRAN submission and the staged installation false
 positive check
In-Reply-To: <CABtg=KkGKSe_Cmejamkeaf8vTs9E+=uNZPjVHyODhhiEFcB9tg@mail.gmail.com>
References: <CABtg=KkGKSe_Cmejamkeaf8vTs9E+=uNZPjVHyODhhiEFcB9tg@mail.gmail.com>
Message-ID: <d208f116-9fdf-a5bf-cf8e-95ea129fd77d@statistik.tu-dortmund.de>

The bug is identified and will be fixed shortly.

All maintainers affected by this bug may send me a message so that we 
can re-inspect your submissions.
These affected only maintainers with packages that need the 
--merge-multiarch flag.

Best,
Uwe Ligges





On 16.05.2019 19:06, G?bor Cs?rdi wrote:
> Anyone had success releasing a package that is affected by the
> "Non-staged installation was used" false positive bug?
> 
> This one:
> https://cran.rstudio.com/web/checks/check_results_igraph.html
> https://bugs.r-project.org/bugzilla/show_bug.cgi?id=17545
> 
> If yes, how did you do it? Thanks!
> Gabor
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu May 23 12:41:00 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 23 May 2019 06:41:00 -0400
Subject: [R-pkg-devel] CRAN submission and the staged installation false
 positive check
In-Reply-To: <d208f116-9fdf-a5bf-cf8e-95ea129fd77d@statistik.tu-dortmund.de>
References: <CABtg=KkGKSe_Cmejamkeaf8vTs9E+=uNZPjVHyODhhiEFcB9tg@mail.gmail.com>
 <d208f116-9fdf-a5bf-cf8e-95ea129fd77d@statistik.tu-dortmund.de>
Message-ID: <CABtg=KkmhepU7_Sz7fiio0aCJLS4dmP9+6xkn-xKH1HgLa5jeA@mail.gmail.com>

Great, thanks much!

Gabor

On Thu, May 23, 2019 at 5:21 AM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
> The bug is identified and will be fixed shortly.
>
> All maintainers affected by this bug may send me a message so that we
> can re-inspect your submissions.
> These affected only maintainers with packages that need the
> --merge-multiarch flag.
>
> Best,
> Uwe Ligges
>
>
>
>
>
> On 16.05.2019 19:06, G?bor Cs?rdi wrote:
> > Anyone had success releasing a package that is affected by the
> > "Non-staged installation was used" false positive bug?
> >
> > This one:
> > https://cran.rstudio.com/web/checks/check_results_igraph.html
> > https://bugs.r-project.org/bugzilla/show_bug.cgi?id=17545
> >
> > If yes, how did you do it? Thanks!
> > Gabor
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >


From emm@nue|@b|onde|1 @end|ng |rom gm@||@com  Sat May 25 00:41:10 2019
From: emm@nue|@b|onde|1 @end|ng |rom gm@||@com (Emmanuel Blondel (GMAIL))
Date: Sat, 25 May 2019 00:41:10 +0200
Subject: [R-pkg-devel] Advice on setAs - issue of "in method for 'coerce'
 with signature / no definition for classes
Message-ID: <ee7ebfd3-c4cc-fe56-603a-97e177459a4f@gmail.com>

Dear all, I write here as i'm in process to submit a revision of 
/geometa/ package to CRAN in which i've enabled some coercing methods 
between main metadata object ISOMetadata from geometa, and foreign 
metadata objects (from emld / ncdf4 packages)

I've received a "pre-test archived" notification, because of the 
folllowing warnings dealing with the coercing:

   Warning: in method for 'coerce' with signature '"ISOMetadata","emld"': no definition for classes "ISOMetadata", "emld"
   Warning: in method for 'coerce' with signature '"emld","ISOMetadata"': no definition for classes "emld", "ISOMetadata"
   Warning: in method for 'coerce' with signature '"ncdf4","ISOMetadata"': no definition for classes "ncdf4", "ISOMetadata"

Detail at: 
https://win-builder.r-project.org/incoming_pretest/geometa_0.5-0_20190524_153346/Windows/00check.log

I've found this thread that seems to discuss the same matter: 
https://github.com/r-spatial/sf/issues/129 . I'm facing the same 
situation where there is no good reason enough to add emld, ncdf4 as 
Imports, but rather to keep them as Suggests, as they are only used in 
these specific converters. In the doubt, i prefer asking here if there 
is some good practice to deal with these warnings, eventually to avoid 
it, or if this is considered by CRAN team as false positive.

Thanks a lot for your advice,

Best,
Emmanuel



	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Sun May 26 09:29:36 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Sun, 26 May 2019 07:29:36 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?q?Re=C2=A0=3A_Advice_on_setAs_-_issue_of_?=
 =?utf-8?q?=22in_method_for_=27coe?=
In-Reply-To: <ee7ebfd3-c4cc-fe56-603a-97e177459a4f@gmail.com>
References: <ee7ebfd3-c4cc-fe56-603a-97e177459a4f@gmail.com>
Message-ID: <937163812.9702365.1558855776197@mail.yahoo.com>

Hi,?I can give you an advise: try to use (ISO) official code for the geometries and put it as characters.
Sylvain?
Envoy? depuis Yahoo?Mail pour Android 
 
  Le sam., mai 25, 2019 ? 0:41, Emmanuel Blondel (GMAIL)<emmanuel.blondel1 at gmail.com> a ?crit :   Dear all, I write here as i'm in process to submit a revision of 
/geometa/ package to CRAN in which i've enabled some coercing methods 
between main metadata object ISOMetadata from geometa, and foreign 
metadata objects (from emld / ncdf4 packages)

I've received a "pre-test archived" notification, because of the 
folllowing warnings dealing with the coercing:

? Warning: in method for 'coerce' with signature '"ISOMetadata","emld"': no definition for classes "ISOMetadata", "emld"
? Warning: in method for 'coerce' with signature '"emld","ISOMetadata"': no definition for classes "emld", "ISOMetadata"
? Warning: in method for 'coerce' with signature '"ncdf4","ISOMetadata"': no definition for classes "ncdf4", "ISOMetadata"

Detail at: 
https://win-builder.r-project.org/incoming_pretest/geometa_0.5-0_20190524_153346/Windows/00check.log

I've found this thread that seems to discuss the same matter: 
https://github.com/r-spatial/sf/issues/129 . I'm facing the same 
situation where there is no good reason enough to add emld, ncdf4 as 
Imports, but rather to keep them as Suggests, as they are only used in 
these specific converters. In the doubt, i prefer asking here if there 
is some good practice to deal with these warnings, eventually to avoid 
it, or if this is considered by CRAN team as false positive.

Thanks a lot for your advice,

Best,
Emmanuel



??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
  

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Untitled
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190526/0832fece/attachment.ksh>

From mtmorg@n@b|oc @end|ng |rom gm@||@com  Sun May 26 10:13:33 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Sun, 26 May 2019 08:13:33 +0000
Subject: [R-pkg-devel] 
 Advice on setAs - issue of "in method for 'coerce'
 with signature / no definition for classes
In-Reply-To: <ee7ebfd3-c4cc-fe56-603a-97e177459a4f@gmail.com>
References: <ee7ebfd3-c4cc-fe56-603a-97e177459a4f@gmail.com>
Message-ID: <BN8PR05MB619669CCC80D067DB8A062F1F91C0@BN8PR05MB6196.namprd05.prod.outlook.com>

Since ncdf4 (and emld) both use S3 class systems, it is sufficient to simply declare

    setOldClass("ncdf4")

some time prior to using setAs() .

Martin

?On 5/24/19, 6:41 PM, "R-package-devel on behalf of Emmanuel Blondel (GMAIL)" <r-package-devel-bounces at r-project.org on behalf of emmanuel.blondel1 at gmail.com> wrote:

    Dear all, I write here as i'm in process to submit a revision of 
    /geometa/ package to CRAN in which i've enabled some coercing methods 
    between main metadata object ISOMetadata from geometa, and foreign 
    metadata objects (from emld / ncdf4 packages)
    
    I've received a "pre-test archived" notification, because of the 
    folllowing warnings dealing with the coercing:
    
       Warning: in method for 'coerce' with signature '"ISOMetadata","emld"': no definition for classes "ISOMetadata", "emld"
       Warning: in method for 'coerce' with signature '"emld","ISOMetadata"': no definition for classes "emld", "ISOMetadata"
       Warning: in method for 'coerce' with signature '"ncdf4","ISOMetadata"': no definition for classes "ncdf4", "ISOMetadata"
    
    Detail at: 
    https://win-builder.r-project.org/incoming_pretest/geometa_0.5-0_20190524_153346/Windows/00check.log
    
    I've found this thread that seems to discuss the same matter: 
    https://github.com/r-spatial/sf/issues/129 . I'm facing the same 
    situation where there is no good reason enough to add emld, ncdf4 as 
    Imports, but rather to keep them as Suggests, as they are only used in 
    these specific converters. In the doubt, i prefer asking here if there 
    is some good practice to deal with these warnings, eventually to avoid 
    it, or if this is considered by CRAN team as false positive.
    
    Thanks a lot for your advice,
    
    Best,
    Emmanuel
    
    
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From emm@nue|@b|onde|1 @end|ng |rom gm@||@com  Sun May 26 13:53:04 2019
From: emm@nue|@b|onde|1 @end|ng |rom gm@||@com (Emmanuel Blondel (GMAIL))
Date: Sun, 26 May 2019 13:53:04 +0200
Subject: [R-pkg-devel] 
 Advice on setAs - issue of "in method for 'coerce'
 with signature / no definition for classes
In-Reply-To: <BN8PR05MB619669CCC80D067DB8A062F1F91C0@BN8PR05MB6196.namprd05.prod.outlook.com>
References: <ee7ebfd3-c4cc-fe56-603a-97e177459a4f@gmail.com>
 <BN8PR05MB619669CCC80D067DB8A062F1F91C0@BN8PR05MB6196.namprd05.prod.outlook.com>
Message-ID: <4fc6291f-01c8-3484-9d7a-b4dd400bad72@gmail.com>

Thank

Thank you Martin for your help and for this solution, warnings 
disappeared with this, and i've re-submitted the package.

Best,
Emmanuel

Le 26/05/2019 ? 10:13, Martin Morgan a ?crit?:
> Since ncdf4 (and emld) both use S3 class systems, it is sufficient to simply declare
>
>      setOldClass("ncdf4")
>
> some time prior to using setAs() .
>
> Martin
>
> ?On 5/24/19, 6:41 PM, "R-package-devel on behalf of Emmanuel Blondel (GMAIL)" <r-package-devel-bounces at r-project.org on behalf of emmanuel.blondel1 at gmail.com> wrote:
>
>      Dear all, I write here as i'm in process to submit a revision of
>      /geometa/ package to CRAN in which i've enabled some coercing methods
>      between main metadata object ISOMetadata from geometa, and foreign
>      metadata objects (from emld / ncdf4 packages)
>      
>      I've received a "pre-test archived" notification, because of the
>      folllowing warnings dealing with the coercing:
>      
>         Warning: in method for 'coerce' with signature '"ISOMetadata","emld"': no definition for classes "ISOMetadata", "emld"
>         Warning: in method for 'coerce' with signature '"emld","ISOMetadata"': no definition for classes "emld", "ISOMetadata"
>         Warning: in method for 'coerce' with signature '"ncdf4","ISOMetadata"': no definition for classes "ncdf4", "ISOMetadata"
>      
>      Detail at:
>      https://win-builder.r-project.org/incoming_pretest/geometa_0.5-0_20190524_153346/Windows/00check.log
>      
>      I've found this thread that seems to discuss the same matter:
>      https://github.com/r-spatial/sf/issues/129 . I'm facing the same
>      situation where there is no good reason enough to add emld, ncdf4 as
>      Imports, but rather to keep them as Suggests, as they are only used in
>      these specific converters. In the doubt, i prefer asking here if there
>      is some good practice to deal with these warnings, eventually to avoid
>      it, or if this is considered by CRAN team as false positive.
>      
>      Thanks a lot for your advice,
>      
>      Best,
>      Emmanuel
>      
>      
>      
>      	[[alternative HTML version deleted]]
>      
>      ______________________________________________
>      R-package-devel at r-project.org mailing list
>      https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Sun May 26 15:30:52 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Sun, 26 May 2019 13:30:52 +0000
Subject: [R-pkg-devel] .Fortran opinion
Message-ID: <VI1PR06MB481315B26802EB2140E9A257D51C0@VI1PR06MB4813.eurprd06.prod.outlook.com>


Recently, users of my package rdwd have provided Fortran code for a nice extension of the package.
According to the following site, calling .Fortran() is no longer recommended:
https://github.com/wrathematics/Romp/blob/master/README.md#fortran

Since this is my first time using native code, I'd highly appreciate any thoughts on the following question:
How much additional work should I put into avoiding .Fortran() for long-term CRAN suitability?

Thanks ahead,
Berry

PS: In case you want a look at the (two very short) Fortran routines:
https://github.com/brry/rdwd/tree/master/src
and their call in R:
https://github.com/brry/rdwd/blob/master/R/readRadarFile.R#L119


	[[alternative HTML version deleted]]


From n|u|tz @end|ng |rom gm@||@com  Sun May 26 21:21:22 2019
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Sun, 26 May 2019 12:21:22 -0700
Subject: [R-pkg-devel] .Fortran opinion
In-Reply-To: <VI1PR06MB481315B26802EB2140E9A257D51C0@VI1PR06MB4813.eurprd06.prod.outlook.com>
References: <VI1PR06MB481315B26802EB2140E9A257D51C0@VI1PR06MB4813.eurprd06.prod.outlook.com>
Message-ID: <CAL9B2vcGyK-Vs_=47zZvR3OR=7pQFqQkkyoqS+1cjKcUVhkovw@mail.gmail.com>

I think the current best practice is to wrap the Fortran code in a C
helper, and invoke that using .Call - more information on that is available
in Hadley's book - http://adv-r.had.co.nz/C-interface.html

It shouldn't be too much work, maybe another 10-20 lines of code, most of
which could probably autogenerated using Rcpp if you wanted to take that
route.

On Sun, May 26, 2019 at 6:31 AM Berry Boessenkool <
berryboessenkool at hotmail.com> wrote:

>
> Recently, users of my package rdwd have provided Fortran code for a nice
> extension of the package.
> According to the following site, calling .Fortran() is no longer
> recommended:
> https://github.com/wrathematics/Romp/blob/master/README.md#fortran
>
> Since this is my first time using native code, I'd highly appreciate any
> thoughts on the following question:
> How much additional work should I put into avoiding .Fortran() for
> long-term CRAN suitability?
>
> Thanks ahead,
> Berry
>
> PS: In case you want a look at the (two very short) Fortran routines:
> https://github.com/brry/rdwd/tree/master/src
> and their call in R:
> https://github.com/brry/rdwd/blob/master/R/readRadarFile.R#L119
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Sun May 26 22:09:24 2019
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Sun, 26 May 2019 16:09:24 -0400
Subject: [R-pkg-devel] .Fortran opinion
In-Reply-To: <CAL9B2vcGyK-Vs_=47zZvR3OR=7pQFqQkkyoqS+1cjKcUVhkovw@mail.gmail.com>
References: <VI1PR06MB481315B26802EB2140E9A257D51C0@VI1PR06MB4813.eurprd06.prod.outlook.com>
 <CAL9B2vcGyK-Vs_=47zZvR3OR=7pQFqQkkyoqS+1cjKcUVhkovw@mail.gmail.com>
Message-ID: <CAL6gwnJbzV9_Ww+3YJNtANsn1Z+mYRkHuCHQ0zXYC1D4L0L0aw@mail.gmail.com>

If you read further in Drew's posts (which I highly recommend) he says
that C++/Rcpp isn't the best for wrapping Fortran calls, and that it
is faster and cleaner to use C. I have a relatively detailed blog post
on building packages with Fortran (or raw C) code; I hope you may find
it useful in your case [1].

Thanks,

Avi

[1] https://www.avrahamadler.com/2018/12/09/the-need-for-speed-part-1-building-an-r-package-with-fortran/

On Sun, May 26, 2019 at 3:22 PM Neal Fultz <nfultz at gmail.com> wrote:
>
> I think the current best practice is to wrap the Fortran code in a C
> helper, and invoke that using .Call - more information on that is available
> in Hadley's book - http://adv-r.had.co.nz/C-interface.html
>
> It shouldn't be too much work, maybe another 10-20 lines of code, most of
> which could probably autogenerated using Rcpp if you wanted to take that
> route.
>
> On Sun, May 26, 2019 at 6:31 AM Berry Boessenkool <
> berryboessenkool at hotmail.com> wrote:
>
> >
> > Recently, users of my package rdwd have provided Fortran code for a nice
> > extension of the package.
> > According to the following site, calling .Fortran() is no longer
> > recommended:
> > https://github.com/wrathematics/Romp/blob/master/README.md#fortran
> >
> > Since this is my first time using native code, I'd highly appreciate any
> > thoughts on the following question:
> > How much additional work should I put into avoiding .Fortran() for
> > long-term CRAN suitability?
> >
> > Thanks ahead,
> > Berry
> >
> > PS: In case you want a look at the (two very short) Fortran routines:
> > https://github.com/brry/rdwd/tree/master/src
> > and their call in R:
> > https://github.com/brry/rdwd/blob/master/R/readRadarFile.R#L119
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |jh988488 @end|ng |rom gm@||@com  Tue May 28 16:28:38 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Tue, 28 May 2019 23:28:38 +0900
Subject: [R-pkg-devel] Failed on win-builder
Message-ID: <CACSCokdS7-Wyb3ebkP5-Fqv_vK4y0JSfmc9aGxbpFywS1dM8_Q@mail.gmail.com>

Hello. I'm checking my package for CRAN.

I check my package on win-builder, then I got these NOTE and WARNING.

* checking sizes of PDF files under 'inst/doc' ... WARNING
  'gs+qpdf' made some significant size reductions:
     compacted 'vignette.ltx.pdf' from 496Kb to 246Kb
  consider running tools::compactPDF(gs_quality = "ebook") on these files
* checking installed files from 'inst/doc' ... NOTE
The following files should probably not be installed:
  'vignette.ltx.tex'

Consider the use of a .Rinstignore file: see 'Writing R Extensions',
or move the vignette sources from 'inst/doc' to 'vignettes'.


How can I solve these NOTE and WARNING?

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Tue May 28 16:38:40 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 28 May 2019 16:38:40 +0200
Subject: [R-pkg-devel] Failed on win-builder
In-Reply-To: <CACSCokdS7-Wyb3ebkP5-Fqv_vK4y0JSfmc9aGxbpFywS1dM8_Q@mail.gmail.com>
References: <CACSCokdS7-Wyb3ebkP5-Fqv_vK4y0JSfmc9aGxbpFywS1dM8_Q@mail.gmail.com>
Message-ID: <CALEXWq05y4gAcCGCKjh9XFXnvPHbDbk2pZpGERjOF7GioerN1w@mail.gmail.com>

On Tue, 28 May 2019 at 16:29, Juhee Lee <ljh988488 at gmail.com> wrote:
>
> Hello. I'm checking my package for CRAN.
>
> I check my package on win-builder, then I got these NOTE and WARNING.
>
> * checking sizes of PDF files under 'inst/doc' ... WARNING
>   'gs+qpdf' made some significant size reductions:
>      compacted 'vignette.ltx.pdf' from 496Kb to 246Kb
>   consider running tools::compactPDF(gs_quality = "ebook") on these files
> * checking installed files from 'inst/doc' ... NOTE
> The following files should probably not be installed:
>   'vignette.ltx.tex'
>
> Consider the use of a .Rinstignore file: see 'Writing R Extensions',
> or move the vignette sources from 'inst/doc' to 'vignettes'.
>
>
> How can I solve these NOTE and WARNING?

Well, doing exactly what the messages suggest, especially in the
second case. In the first case, the easiest way to fix it is to add
the following flag to the build command:

R CMD build --compact-vignettes="both" yourpackage

If you use devtools, there's a parameter to add this extra argument.

I?aki


From |jh988488 @end|ng |rom gm@||@com  Tue May 28 17:08:51 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Wed, 29 May 2019 00:08:51 +0900
Subject: [R-pkg-devel] Failed on win-builder
In-Reply-To: <CALEXWq05y4gAcCGCKjh9XFXnvPHbDbk2pZpGERjOF7GioerN1w@mail.gmail.com>
References: <CACSCokdS7-Wyb3ebkP5-Fqv_vK4y0JSfmc9aGxbpFywS1dM8_Q@mail.gmail.com>
 <CALEXWq05y4gAcCGCKjh9XFXnvPHbDbk2pZpGERjOF7GioerN1w@mail.gmail.com>
Message-ID: <CACSCokfoTnu=3-KaZdpfjY=vj5zTJ-7pdLhJrM6wSdH8S_R_yQ@mail.gmail.com>

In the first case, I've already done that. But I've got the same results.

Juhee


2019? 5? 28? (?) ?? 11:38, I?aki Ucar <iucar at fedoraproject.org>?? ??:

> On Tue, 28 May 2019 at 16:29, Juhee Lee <ljh988488 at gmail.com> wrote:
> >
> > Hello. I'm checking my package for CRAN.
> >
> > I check my package on win-builder, then I got these NOTE and WARNING.
> >
> > * checking sizes of PDF files under 'inst/doc' ... WARNING
> >   'gs+qpdf' made some significant size reductions:
> >      compacted 'vignette.ltx.pdf' from 496Kb to 246Kb
> >   consider running tools::compactPDF(gs_quality = "ebook") on these files
> > * checking installed files from 'inst/doc' ... NOTE
> > The following files should probably not be installed:
> >   'vignette.ltx.tex'
> >
> > Consider the use of a .Rinstignore file: see 'Writing R Extensions',
> > or move the vignette sources from 'inst/doc' to 'vignettes'.
> >
> >
> > How can I solve these NOTE and WARNING?
>
> Well, doing exactly what the messages suggest, especially in the
> second case. In the first case, the easiest way to fix it is to add
> the following flag to the build command:
>
> R CMD build --compact-vignettes="both" yourpackage
>
> If you use devtools, there's a parameter to add this extra argument.
>
> I?aki
>

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Tue May 28 17:13:07 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 28 May 2019 17:13:07 +0200
Subject: [R-pkg-devel] Failed on win-builder
In-Reply-To: <CACSCokfoTnu=3-KaZdpfjY=vj5zTJ-7pdLhJrM6wSdH8S_R_yQ@mail.gmail.com>
References: <CACSCokdS7-Wyb3ebkP5-Fqv_vK4y0JSfmc9aGxbpFywS1dM8_Q@mail.gmail.com>
 <CALEXWq05y4gAcCGCKjh9XFXnvPHbDbk2pZpGERjOF7GioerN1w@mail.gmail.com>
 <CACSCokfoTnu=3-KaZdpfjY=vj5zTJ-7pdLhJrM6wSdH8S_R_yQ@mail.gmail.com>
Message-ID: <CALEXWq2WMp__xNNiz64p2zmeNzvM4vRpMrHBSg3QJpH8-M6SUQ@mail.gmail.com>

On Tue, 28 May 2019 at 17:09, Juhee Lee <ljh988488 at gmail.com> wrote:
>
> In the first case, I've already done that. But I've got the same results.

Can you please paste the output from "R CMD build" here?

I?aki


From to||@@ch@| @end|ng |rom gm@||@com  Tue May 28 20:11:17 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Tue, 28 May 2019 21:11:17 +0300
Subject: [R-pkg-devel] Cran check on Solaris
Message-ID: <CAMfvGJNPb1cAv+Xdf2xroJuh9XfCx9Fek2U2rn+BAi8gXXDGuA@mail.gmail.com>

Dear all,

we have submitted the package volesti to CRAN and it is temporarily
accepted, because the check in solaris and
windows r-release-windows-ix86+x86_64 failed as you can see here
https://cran.r-project.org/web/checks/check_results_volesti.html

The check in solaris fails when the lpsolve library is linked with
volesti.so and the error is the following:
"ld: fatal: dlopen() of support library (-lstdc++) failed with error:
ld.so.1: ld: fatal: -lstdc++: open failed: No such file or directory"
I tried to fix the bug by using some flags in the makefile of lpsolve
library but nothing worked (I check it in rhub).

In windows the error is the following:
"Error: package or namespace load failed for 'Rcpp' in library.dynam(lib,
package, package.lib):

 DLL 'Rcpp' not found: maybe not installed for this architecture?"

But the check in rhub is successful for the same version of windows os.


Thanks in advance,

Apostolos Chalkis

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Tue May 28 20:50:32 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 28 May 2019 20:50:32 +0200
Subject: [R-pkg-devel] Cran check on Solaris
In-Reply-To: <CAMfvGJNPb1cAv+Xdf2xroJuh9XfCx9Fek2U2rn+BAi8gXXDGuA@mail.gmail.com>
References: <CAMfvGJNPb1cAv+Xdf2xroJuh9XfCx9Fek2U2rn+BAi8gXXDGuA@mail.gmail.com>
Message-ID: <CALEXWq0BqOXXTQdGaU3++vRy1VqyvfsM_6NRvhqwAJ+Aa34bSw@mail.gmail.com>

On Tue, 28 May 2019 at 20:12, ????? ?????? <tolis.chal at gmail.com> wrote:
>
> Dear all,
>
> we have submitted the package volesti to CRAN and it is temporarily
> accepted, because the check in solaris and
> windows r-release-windows-ix86+x86_64 failed as you can see here
> https://cran.r-project.org/web/checks/check_results_volesti.html
>
> The check in solaris fails when the lpsolve library is linked with
> volesti.so and the error is the following:
> "ld: fatal: dlopen() of support library (-lstdc++) failed with error:
> ld.so.1: ld: fatal: -lstdc++: open failed: No such file or directory"
> I tried to fix the bug by using some flags in the makefile of lpsolve
> library but nothing worked (I check it in rhub).
>
> In windows the error is the following:
> "Error: package or namespace load failed for 'Rcpp' in library.dynam(lib,
> package, package.lib):
>
>  DLL 'Rcpp' not found: maybe not installed for this architecture?"
>
> But the check in rhub is successful for the same version of windows os.

Don't worry about this second one. It's probably a temporal problem,
but surely not related to your package.

I?aki


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue May 28 20:57:48 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 28 May 2019 11:57:48 -0700
Subject: [R-pkg-devel] Cran check on Solaris
In-Reply-To: <CALEXWq0BqOXXTQdGaU3++vRy1VqyvfsM_6NRvhqwAJ+Aa34bSw@mail.gmail.com>
References: <CAMfvGJNPb1cAv+Xdf2xroJuh9XfCx9Fek2U2rn+BAi8gXXDGuA@mail.gmail.com>
 <CALEXWq0BqOXXTQdGaU3++vRy1VqyvfsM_6NRvhqwAJ+Aa34bSw@mail.gmail.com>
Message-ID: <1218494A-F1F6-4AA4-9C39-CD0466CA2FDB@noaa.gov>

I have been having similar problems with win-builder release for the last several days.  It appears that some of the needed DLLs are not there.  I have been reporting them to Uwe, and he is working through resolving the issues.  Part of it is the test fails on one DLL,  and then when that is repaired fails on another.

This is mostly a PSA as others may run into this.  If you do run into it,  it is probably worth at least reporting the specific error so it can be checked,  Besides Rcpp,  I have had issues with a number of the packages used by ggplot2,  as well as rlang and glue

-Roy

> On May 28, 2019, at 11:50 AM, I?aki Ucar <iucar at fedoraproject.org> wrote:
> 
> On Tue, 28 May 2019 at 20:12, ????? ?????? <tolis.chal at gmail.com> wrote:
>> 
>> Dear all,
>> 
>> we have submitted the package volesti to CRAN and it is temporarily
>> accepted, because the check in solaris and
>> windows r-release-windows-ix86+x86_64 failed as you can see here
>> https://cran.r-project.org/web/checks/check_results_volesti.html
>> 
>> The check in solaris fails when the lpsolve library is linked with
>> volesti.so and the error is the following:
>> "ld: fatal: dlopen() of support library (-lstdc++) failed with error:
>> ld.so.1: ld: fatal: -lstdc++: open failed: No such file or directory"
>> I tried to fix the bug by using some flags in the makefile of lpsolve
>> library but nothing worked (I check it in rhub).
>> 
>> In windows the error is the following:
>> "Error: package or namespace load failed for 'Rcpp' in library.dynam(lib,
>> package, package.lib):
>> 
>> DLL 'Rcpp' not found: maybe not installed for this architecture?"
>> 
>> But the check in rhub is successful for the same version of windows os.
> 
> Don't worry about this second one. It's probably a temporal problem,
> but surely not related to your package.
> 
> I?aki
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From to||@@ch@| @end|ng |rom gm@||@com  Tue May 28 21:16:49 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Tue, 28 May 2019 22:16:49 +0300
Subject: [R-pkg-devel] Cran check on Solaris
In-Reply-To: <1218494A-F1F6-4AA4-9C39-CD0466CA2FDB@noaa.gov>
References: <CAMfvGJNPb1cAv+Xdf2xroJuh9XfCx9Fek2U2rn+BAi8gXXDGuA@mail.gmail.com>
 <CALEXWq0BqOXXTQdGaU3++vRy1VqyvfsM_6NRvhqwAJ+Aa34bSw@mail.gmail.com>
 <1218494A-F1F6-4AA4-9C39-CD0466CA2FDB@noaa.gov>
Message-ID: <CAMfvGJNxF23Ek7QzDiuTWayj_V67h__j-2jBqYCx=-m0_6=ibw@mail.gmail.com>

Thank you very much for the direct response, but the Solaris error is still
there. They gave us a deadline to fix this. Do you have any idea of what
might be wrong?

Best,
Apostolos Chalkis

On Tue, May 28, 2019, 9:57 PM Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> I have been having similar problems with win-builder release for the last
> several days.  It appears that some of the needed DLLs are not there.  I
> have been reporting them to Uwe, and he is working through resolving the
> issues.  Part of it is the test fails on one DLL,  and then when that is
> repaired fails on another.
>
> This is mostly a PSA as others may run into this.  If you do run into it,
> it is probably worth at least reporting the specific error so it can be
> checked,  Besides Rcpp,  I have had issues with a number of the packages
> used by ggplot2,  as well as rlang and glue
>
> -Roy
>
> > On May 28, 2019, at 11:50 AM, I?aki Ucar <iucar at fedoraproject.org>
> wrote:
> >
> > On Tue, 28 May 2019 at 20:12, ????? ?????? <tolis.chal at gmail.com> wrote:
> >>
> >> Dear all,
> >>
> >> we have submitted the package volesti to CRAN and it is temporarily
> >> accepted, because the check in solaris and
> >> windows r-release-windows-ix86+x86_64 failed as you can see here
> >> https://cran.r-project.org/web/checks/check_results_volesti.html
> >>
> >> The check in solaris fails when the lpsolve library is linked with
> >> volesti.so and the error is the following:
> >> "ld: fatal: dlopen() of support library (-lstdc++) failed with error:
> >> ld.so.1: ld: fatal: -lstdc++: open failed: No such file or directory"
> >> I tried to fix the bug by using some flags in the makefile of lpsolve
> >> library but nothing worked (I check it in rhub).
> >>
> >> In windows the error is the following:
> >> "Error: package or namespace load failed for 'Rcpp' in
> library.dynam(lib,
> >> package, package.lib):
> >>
> >> DLL 'Rcpp' not found: maybe not installed for this architecture?"
> >>
> >> But the check in rhub is successful for the same version of windows os.
> >
> > Don't worry about this second one. It's probably a temporal problem,
> > but surely not related to your package.
> >
> > I?aki
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue May 28 21:36:06 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 28 May 2019 20:36:06 +0100
Subject: [R-pkg-devel] Cran check on Solaris
In-Reply-To: <CAMfvGJNxF23Ek7QzDiuTWayj_V67h__j-2jBqYCx=-m0_6=ibw@mail.gmail.com>
References: <CAMfvGJNPb1cAv+Xdf2xroJuh9XfCx9Fek2U2rn+BAi8gXXDGuA@mail.gmail.com>
 <CALEXWq0BqOXXTQdGaU3++vRy1VqyvfsM_6NRvhqwAJ+Aa34bSw@mail.gmail.com>
 <1218494A-F1F6-4AA4-9C39-CD0466CA2FDB@noaa.gov>
 <CAMfvGJNxF23Ek7QzDiuTWayj_V67h__j-2jBqYCx=-m0_6=ibw@mail.gmail.com>
Message-ID: <CABtg=K=8PNsx1FxbDEpnO-WHzX91OaK4qENWCU-2_sgoBcmZCQ@mail.gmail.com>

Does R-hub fail the same way as the CRAN Solaris machine?

If not, then you can open an issue at
https://github.com/r-hub/rhub/issues with the error message(s).

Gabor

On Tue, May 28, 2019 at 8:22 PM ????? ?????? <tolis.chal at gmail.com> wrote:
>
> Thank you very much for the direct response, but the Solaris error is still
> there. They gave us a deadline to fix this. Do you have any idea of what
> might be wrong?
>
> Best,
> Apostolos Chalkis
>
> On Tue, May 28, 2019, 9:57 PM Roy Mendelssohn - NOAA Federal <
> roy.mendelssohn at noaa.gov> wrote:
>
> > I have been having similar problems with win-builder release for the last
> > several days.  It appears that some of the needed DLLs are not there.  I
> > have been reporting them to Uwe, and he is working through resolving the
> > issues.  Part of it is the test fails on one DLL,  and then when that is
> > repaired fails on another.
> >
> > This is mostly a PSA as others may run into this.  If you do run into it,
> > it is probably worth at least reporting the specific error so it can be
> > checked,  Besides Rcpp,  I have had issues with a number of the packages
> > used by ggplot2,  as well as rlang and glue
> >
> > -Roy
> >
> > > On May 28, 2019, at 11:50 AM, I?aki Ucar <iucar at fedoraproject.org>
> > wrote:
> > >
> > > On Tue, 28 May 2019 at 20:12, ????? ?????? <tolis.chal at gmail.com> wrote:
> > >>
> > >> Dear all,
> > >>
> > >> we have submitted the package volesti to CRAN and it is temporarily
> > >> accepted, because the check in solaris and
> > >> windows r-release-windows-ix86+x86_64 failed as you can see here
> > >> https://cran.r-project.org/web/checks/check_results_volesti.html
> > >>
> > >> The check in solaris fails when the lpsolve library is linked with
> > >> volesti.so and the error is the following:
> > >> "ld: fatal: dlopen() of support library (-lstdc++) failed with error:
> > >> ld.so.1: ld: fatal: -lstdc++: open failed: No such file or directory"
> > >> I tried to fix the bug by using some flags in the makefile of lpsolve
> > >> library but nothing worked (I check it in rhub).
> > >>
> > >> In windows the error is the following:
> > >> "Error: package or namespace load failed for 'Rcpp' in
> > library.dynam(lib,
> > >> package, package.lib):
> > >>
> > >> DLL 'Rcpp' not found: maybe not installed for this architecture?"
> > >>
> > >> But the check in rhub is successful for the same version of windows os.
> > >
> > > Don't worry about this second one. It's probably a temporal problem,
> > > but surely not related to your package.
> > >
> > > I?aki
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > **********************
> > "The contents of this message do not reflect any position of the U.S.
> > Government or NOAA."
> > **********************
> > Roy Mendelssohn
> > Supervisory Operations Research Analyst
> > NOAA/NMFS
> > Environmental Research Division
> > Southwest Fisheries Science Center
> > ***Note new street address***
> > 110 McAllister Way
> > Santa Cruz, CA 95060
> > Phone: (831)-420-3666
> > Fax: (831) 420-3980
> > e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> >
> > "Old age and treachery will overcome youth and skill."
> > "From those who have been given much, much will be expected"
> > "the arc of the moral universe is long, but it bends toward justice" -MLK
> > Jr.
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From to||@@ch@| @end|ng |rom gm@||@com  Tue May 28 21:39:07 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Tue, 28 May 2019 22:39:07 +0300
Subject: [R-pkg-devel] Cran check on Solaris
In-Reply-To: <CABtg=K=8PNsx1FxbDEpnO-WHzX91OaK4qENWCU-2_sgoBcmZCQ@mail.gmail.com>
References: <CAMfvGJNPb1cAv+Xdf2xroJuh9XfCx9Fek2U2rn+BAi8gXXDGuA@mail.gmail.com>
 <CALEXWq0BqOXXTQdGaU3++vRy1VqyvfsM_6NRvhqwAJ+Aa34bSw@mail.gmail.com>
 <1218494A-F1F6-4AA4-9C39-CD0466CA2FDB@noaa.gov>
 <CAMfvGJNxF23Ek7QzDiuTWayj_V67h__j-2jBqYCx=-m0_6=ibw@mail.gmail.com>
 <CABtg=K=8PNsx1FxbDEpnO-WHzX91OaK4qENWCU-2_sgoBcmZCQ@mail.gmail.com>
Message-ID: <CAMfvGJN8BX52VkVK3cx_Zojiw0VTUL9h197ESatu4B9cGOu2_Q@mail.gmail.com>

Does R-hub fail the same way as the CRAN Solaris machine?
Yes it fails the same way.

Apostolos Chalkis


On Tue, May 28, 2019, 10:36 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> Does R-hub fail the same way as the CRAN Solaris machine?
>
> If not, then you can open an issue at
> https://github.com/r-hub/rhub/issues with the error message(s).
>
> Gabor
>
> On Tue, May 28, 2019 at 8:22 PM ????? ?????? <tolis.chal at gmail.com> wrote:
> >
> > Thank you very much for the direct response, but the Solaris error is
> still
> > there. They gave us a deadline to fix this. Do you have any idea of what
> > might be wrong?
> >
> > Best,
> > Apostolos Chalkis
> >
> > On Tue, May 28, 2019, 9:57 PM Roy Mendelssohn - NOAA Federal <
> > roy.mendelssohn at noaa.gov> wrote:
> >
> > > I have been having similar problems with win-builder release for the
> last
> > > several days.  It appears that some of the needed DLLs are not there.
> I
> > > have been reporting them to Uwe, and he is working through resolving
> the
> > > issues.  Part of it is the test fails on one DLL,  and then when that
> is
> > > repaired fails on another.
> > >
> > > This is mostly a PSA as others may run into this.  If you do run into
> it,
> > > it is probably worth at least reporting the specific error so it can be
> > > checked,  Besides Rcpp,  I have had issues with a number of the
> packages
> > > used by ggplot2,  as well as rlang and glue
> > >
> > > -Roy
> > >
> > > > On May 28, 2019, at 11:50 AM, I?aki Ucar <iucar at fedoraproject.org>
> > > wrote:
> > > >
> > > > On Tue, 28 May 2019 at 20:12, ????? ?????? <tolis.chal at gmail.com>
> wrote:
> > > >>
> > > >> Dear all,
> > > >>
> > > >> we have submitted the package volesti to CRAN and it is temporarily
> > > >> accepted, because the check in solaris and
> > > >> windows r-release-windows-ix86+x86_64 failed as you can see here
> > > >> https://cran.r-project.org/web/checks/check_results_volesti.html
> > > >>
> > > >> The check in solaris fails when the lpsolve library is linked with
> > > >> volesti.so and the error is the following:
> > > >> "ld: fatal: dlopen() of support library (-lstdc++) failed with
> error:
> > > >> ld.so.1: ld: fatal: -lstdc++: open failed: No such file or
> directory"
> > > >> I tried to fix the bug by using some flags in the makefile of
> lpsolve
> > > >> library but nothing worked (I check it in rhub).
> > > >>
> > > >> In windows the error is the following:
> > > >> "Error: package or namespace load failed for 'Rcpp' in
> > > library.dynam(lib,
> > > >> package, package.lib):
> > > >>
> > > >> DLL 'Rcpp' not found: maybe not installed for this architecture?"
> > > >>
> > > >> But the check in rhub is successful for the same version of windows
> os.
> > > >
> > > > Don't worry about this second one. It's probably a temporal problem,
> > > > but surely not related to your package.
> > > >
> > > > I?aki
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > > **********************
> > > "The contents of this message do not reflect any position of the U.S.
> > > Government or NOAA."
> > > **********************
> > > Roy Mendelssohn
> > > Supervisory Operations Research Analyst
> > > NOAA/NMFS
> > > Environmental Research Division
> > > Southwest Fisheries Science Center
> > > ***Note new street address***
> > > 110 McAllister Way
> > > Santa Cruz, CA 95060
> > > Phone: (831)-420-3666
> > > Fax: (831) 420-3980
> > > e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> > >
> > > "Old age and treachery will overcome youth and skill."
> > > "From those who have been given much, much will be expected"
> > > "the arc of the moral universe is long, but it bends toward justice"
> -MLK
> > > Jr.
> > >
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue May 28 23:28:43 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 28 May 2019 23:28:43 +0200
Subject: [R-pkg-devel] Cran check on Solaris
In-Reply-To: <1218494A-F1F6-4AA4-9C39-CD0466CA2FDB@noaa.gov>
References: <CAMfvGJNPb1cAv+Xdf2xroJuh9XfCx9Fek2U2rn+BAi8gXXDGuA@mail.gmail.com>
 <CALEXWq0BqOXXTQdGaU3++vRy1VqyvfsM_6NRvhqwAJ+Aa34bSw@mail.gmail.com>
 <1218494A-F1F6-4AA4-9C39-CD0466CA2FDB@noaa.gov>
Message-ID: <9825bf72-3d1c-c661-93d3-489d4265e27e@statistik.tu-dortmund.de>

Yes, soem hicc up caused som lost dlls on winbuilder. It is currently 
rebuilding the full set of CRAN packages and will finish within the next 
8 hours.

Best,
Uwe Ligges

On 28.05.2019 20:57, Roy Mendelssohn - NOAA Federal via R-package-devel 
wrote:
> I have been having similar problems with win-builder release for the last several days.  It appears that some of the needed DLLs are not there.  I have been reporting them to Uwe, and he is working through resolving the issues.  Part of it is the test fails on one DLL,  and then when that is repaired fails on another.
> 
> This is mostly a PSA as others may run into this.  If you do run into it,  it is probably worth at least reporting the specific error so it can be checked,  Besides Rcpp,  I have had issues with a number of the packages used by ggplot2,  as well as rlang and glue
> 
> -Roy
> 
>> On May 28, 2019, at 11:50 AM, I?aki Ucar <iucar at fedoraproject.org> wrote:
>>
>> On Tue, 28 May 2019 at 20:12, ????? ?????? <tolis.chal at gmail.com> wrote:
>>>
>>> Dear all,
>>>
>>> we have submitted the package volesti to CRAN and it is temporarily
>>> accepted, because the check in solaris and
>>> windows r-release-windows-ix86+x86_64 failed as you can see here
>>> https://cran.r-project.org/web/checks/check_results_volesti.html
>>>
>>> The check in solaris fails when the lpsolve library is linked with
>>> volesti.so and the error is the following:
>>> "ld: fatal: dlopen() of support library (-lstdc++) failed with error:
>>> ld.so.1: ld: fatal: -lstdc++: open failed: No such file or directory"
>>> I tried to fix the bug by using some flags in the makefile of lpsolve
>>> library but nothing worked (I check it in rhub).
>>>
>>> In windows the error is the following:
>>> "Error: package or namespace load failed for 'Rcpp' in library.dynam(lib,
>>> package, package.lib):
>>>
>>> DLL 'Rcpp' not found: maybe not installed for this architecture?"
>>>
>>> But the check in rhub is successful for the same version of windows os.
>>
>> Don't worry about this second one. It's probably a temporal problem,
>> but surely not related to your package.
>>
>> I?aki
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |uc@r @end|ng |rom |edor@project@org  Wed May 29 09:14:34 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 29 May 2019 09:14:34 +0200
Subject: [R-pkg-devel] Failed on win-builder
In-Reply-To: <CACSCokcjjfDjRBGgYDQb-6fU0nOQH9kWp7z_hPE+-+d5rjxhCg@mail.gmail.com>
References: <CACSCokdS7-Wyb3ebkP5-Fqv_vK4y0JSfmc9aGxbpFywS1dM8_Q@mail.gmail.com>
 <CALEXWq05y4gAcCGCKjh9XFXnvPHbDbk2pZpGERjOF7GioerN1w@mail.gmail.com>
 <CACSCokfoTnu=3-KaZdpfjY=vj5zTJ-7pdLhJrM6wSdH8S_R_yQ@mail.gmail.com>
 <CALEXWq2WMp__xNNiz64p2zmeNzvM4vRpMrHBSg3QJpH8-M6SUQ@mail.gmail.com>
 <CACSCokcjjfDjRBGgYDQb-6fU0nOQH9kWp7z_hPE+-+d5rjxhCg@mail.gmail.com>
Message-ID: <CALEXWq3SXpmQbHZg_w1yLZ8b-Nm2EjOqKO8hroXZdO-8hK_VFg@mail.gmail.com>

CC'ing the list again.

On Wed, 29 May 2019 at 02:46, Juhee Lee <ljh988488 at gmail.com> wrote:
>
> The output from R CMD build is here.
>
> > devtools::build(args = c('--compact-vignettes=both'))
> ?  checking for file 'D:\...\LARisk/DESCRIPTION' ...
> -  preparing 'LARisk': (838ms)
> ?  checking DESCRIPTION meta-information ...
> -  cleaning src
> -  installing the package to build vignettes (651ms)
> ?  creating vignettes (22.7s)
> -  compacting vignettes and other PDF files
> -  cleaning src (580ms)
> -  checking for LF line-endings in source and make files and shell scripts (843ms)
> -  checking for empty or unneeded directories
> -  building 'LARisk_0.1.1.tar.gz'

You need to install qpdf and ghostscript. And then, you should see a
line like "compacted vinette.pdf from size1 to size2" after
"compacting vignettes and other PDF files".

I?aki


From |uc@r @end|ng |rom |edor@project@org  Thu May 30 00:48:35 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 30 May 2019 00:48:35 +0200
Subject: [R-pkg-devel] [Rd] Making a package CITATION file from BibTeX
In-Reply-To: <D3161B69-D245-47A3-BBC0-030CA767EFC9@mrc-lmb.cam.ac.uk>
References: <D3161B69-D245-47A3-BBC0-030CA767EFC9@mrc-lmb.cam.ac.uk>
Message-ID: <CALEXWq3d+x6UqDv=iTL4FfuigNqWqj9yoNbdZXaUjSZHTPJCNg@mail.gmail.com>

I believe r-package-devel is the proper list for this. Now in CC.

On Thu, 30 May 2019 at 00:16, Dr Gregory Jefferis
<jefferis at mrc-lmb.cam.ac.uk> wrote:
>
> Dear Colleagues,
>
> I would like to provide a CITATION file for my package nat.nblast [1].
>
> I have the correct citation in BibTeX format [2]. How can I convert this
> BibTeX to the format needed by R for a package CITATION file (I have a
> lot of other packages needing citations ...).
>
> I think what I need is the opposite of RefManageR::toBiblatex [3]. This
> seems like it should be a common need, so I feel sure I must be missing
> something, but I can't seem to google up any hints.

There's a specific section in the manual about this (1.9 CITATION
files), and lots of examples out there. Here's one:

https://github.com/r-simmer/simmer/blob/master/inst/CITATION

I?aki


From je||er|@ @end|ng |rom mrc-|mb@c@m@@c@uk  Thu May 30 02:31:30 2019
From: je||er|@ @end|ng |rom mrc-|mb@c@m@@c@uk (Dr Gregory Jefferis)
Date: Thu, 30 May 2019 01:31:30 +0100
Subject: [R-pkg-devel] [Rd] Making a package CITATION file from BibTeX
In-Reply-To: <alpine.DEB.2.21.1905300038070.6310@paninaro>
References: <D3161B69-D245-47A3-BBC0-030CA767EFC9@mrc-lmb.cam.ac.uk>
 <alpine.DEB.2.21.1905300038070.6310@paninaro>
Message-ID: <59AB7C12-A77C-450A-B71F-FAA3F149A3CC@mrc-lmb.cam.ac.uk>

Dear Achim,

Thank you so much for taking the time to write out a perfect response to 
my question. I hope it will soon be available for others to google!

@Inaki: Thank you. You are quite right. I intended to write to 
r-package-devel. Achim's reply is still copied below for users of that 
list.

All the best,

Greg.

On 29 May 2019, at 23:46, Achim Zeileis wrote:

> On Thu, 30 May 2019, Dr Gregory Jefferis wrote:
>
>> Dear Colleagues,
>>
>> I would like to provide a CITATION file for my package nat.nblast 
>> [1].
>>
>> I have the correct citation in BibTeX format [2]. How can I convert 
>> this BibTeX to the format needed by R for a package CITATION file (I 
>> have a lot of other packages needing citations ...).
>
> (1) You can use read.bib() from the "bibtex" package to read the .bib 
> file containing the relevant reference.
>
> (2) This gives you a "bibentry" object that can be turned into the R 
> code generating it with format(..., style = "R") from the basic 
> "utils" package.
>
> (3) Then you can writeLines() this R code on the console or 
> writeLines(..., "CITATION") to a CITATION file.
>
> (4) Optionally you can also include a $header in your bibentry with a 
> short introductory sentence. Or if you have multiple references to go 
> into the same CITATION you might want to include a $header for each 
> and an $mheader for everything.
>
> A worked example is included below. Background information is given 
> in: https://doi.org/10.32614/RJ-2012-009
>
> Let's assume that your BibTeX entry [2] is the first entry in a file 
> called "my.bib". Then you can do:
>
> ## read first item from BibTeX as "bibentry" object
> b <- bibtex::read.bib("my.bib")[[1]]
>
> ## delete the bib key and add a header for the citation
> b$key <- NULL
> b$header <- "To cite nat.nblast in publications use:"
>
> ## turn the "bibentry" into the R code generating it
> b <- format(b, style = "R")
>
> ## write the R code to the console
> writeLines(b)
>
> bibentry(bibtype = "Article",
>          header = "To cite nat.nblast in publications use:",
>          author = c(person(given = "Marta",
>                            family = "Costa"),
>                     person(given = c("James", "D"),
>                            family = "Manton"),
>                     person(given = c("Aaron", "D"),
>                            family = "Ostrovsky"),
>                     person(given = "Steffen",
>                            family = "Prohaska"),
>                     person(given = c("Gregory", "S", "X", "E"),
>                            family = "Jefferis")),
>          doi = "10.1016/j.neuron.2016.06.012",
>          journal = "Neuron",
>          month = "Jul",
>          number = "2",
>          pages = "293-311",
>          title = "NBLAST: Rapid, Sensitive Comparison of Neuronal 
> Structure and Construction of Neuron Family Databases",
>          volume = "91",
>          year = "2016")
>
>
>> I think what I need is the opposite of RefManageR::toBiblatex [3]. 
>> This seems like it should be a common need, so I feel sure I must be 
>> missing something, but I can't seem to google up any hints.
>>
>> With many thanks,
>>
>> Greg Jefferis.
>>
>> [1] http://github.com/jefferislab/nat.nblast 
>> https://cran.r-project.org/package=nat.nblast
>> [2]
>>
>> @article{Costa:2016aa,
>> 	Author = {Costa, Marta and Manton, James D and Ostrovsky, Aaron D 
>> and Prohaska, Steffen and Jefferis, Gregory S X E},
>> 	Doi = {10.1016/j.neuron.2016.06.012},
>> 	Journal = {Neuron},
>> 	Month = {Jul},
>> 	Number = {2},
>> 	Pages = {293-311},
>> 	Title = {NBLAST: Rapid, Sensitive Comparison of Neuronal Structure 
>> and Construction of Neuron Family Databases},
>> 	Volume = {91},
>> 	Year = {2016}}
>>
>> [3] https://rdrr.io/github/ropensci/RefManageR/man/toBiblatex.html
>>
>>
>> --
>> Gregory Jefferis
>> Division of Neurobiology
>> MRC Laboratory of Molecular Biology
>> Francis Crick Avenue
>> Cambridge Biomedical Campus
>> Cambridge, CB2 OQH, UK
>>
>> http://www2.mrc-lmb.cam.ac.uk/group-leaders/h-to-m/g-jefferis
>> http://jefferislab.org
>> http://www.zoo.cam.ac.uk/departments/connectomics
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>


--
Gregory Jefferis, PhD                   Tel: +44 1223 267048
Division of Neurobiology
MRC Laboratory of Molecular Biology
Francis Crick Avenue
Cambridge Biomedical Campus
Cambridge, CB2 OQH, UK

http://www2.mrc-lmb.cam.ac.uk/group-leaders/h-to-m/g-jefferis
http://jefferislab.org
http://www.zoo.cam.ac.uk/departments/connectomics


From chr|@t|@n@henn|g @end|ng |rom un|bo@|t  Mon Jun  3 23:39:27 2019
From: chr|@t|@n@henn|g @end|ng |rom un|bo@|t (Christian Martin Hennig)
Date: Mon, 3 Jun 2019 21:39:27 +0000
Subject: [R-pkg-devel] Mysterious NOTE when checking package
In-Reply-To: <09f30ebe-b893-0629-5623-d2363697d04d@unibo.it>
References: <09f30ebe-b893-0629-5623-d2363697d04d@unibo.it>
Message-ID: <HE1PR0102MB266887B5089FCBEF70FBA362EA140@HE1PR0102MB2668.eurprd01.prod.exchangelabs.com>



Dear list members,

checking my updated version of prabclus with R-devel --as-cran I get a
mysterious note:

"* checking DESCRIPTION meta-information ... NOTE
Checking should be performed on sources prepared by ?R CMD build?."

(No further information is given on that one in 00check.log.)

But my source is in fact put together by R CMD build.

Can anybody tell me what could be wrong here and how to remove the note?

DESCRIPTION looks like this:

Package: prabclus
Title: Functions for Clustering and Testing of Presence-Absence,
Abundance and Multilocus Genetic Data
Version: 2.3-1
Date: 2019-06-03
Author: Christian Hennig <christian.hennig at unibo.it>,
         Bernhard Hausdorf <Hausdorf at zoologie.uni-hamburg.de>
Depends: R (>= 2.10), MASS, mclust
Suggests: spdep, spatialreg, bootstrap, maptools, foreign, mvtnorm
Description: Distance-based parametric bootstrap tests for clustering with
   spatial neighborhood information. Some distance measures,
   Clustering of presence-absence, abundance and multilocus genetical data
   for species delimitation, nearest neighbor
   based noise detection. Genetic distances between communities.
   Tests whether various distance-based regressions
   are equal. Try package?prabclus for on overview.
Maintainer: Christian Hennig <christian.hennig at unibo.it>
License: GPL
URL: https://www.unibo.it/sitoweb/christian.hennig/en/
Christian Martin Hennig ? University of Bologna ? Home Page<https://www.unibo.it/sitoweb/christian.hennig/en/>
www.unibo.it
I am at the University of Bologna since November 2018. My research interests are cluster analysis, multivariate data analysis incl. classification and data visualisation, robust statistics, foundations and philosophy of statistics, statistical modelling and applications.
I should maybe add that I ran the check on the proper tar.gz file produced by R CMD build, and apart from this NOTE and another one (which was far less mysterious) everything went through without issues.

Thanks,

Christian

--
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it
currently on leave from UCL; UCL email still works


	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Jun  4 06:08:30 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Mon, 3 Jun 2019 22:08:30 -0600
Subject: [R-pkg-devel] [FORGED]  Mysterious NOTE when checking package
In-Reply-To: <HE1PR0102MB266887B5089FCBEF70FBA362EA140@HE1PR0102MB2668.eurprd01.prod.exchangelabs.com>
References: <09f30ebe-b893-0629-5623-d2363697d04d@unibo.it>
 <HE1PR0102MB266887B5089FCBEF70FBA362EA140@HE1PR0102MB2668.eurprd01.prod.exchangelabs.com>
Message-ID: <da347648-55d3-3231-9221-411b9280e41e@auckland.ac.nz>


On 3/06/19 3:39 PM, Christian Martin Hennig wrote:

> 
> 
> Dear list members,
> 
> checking my updated version of prabclus with R-devel --as-cran I get a
> mysterious note:
> 
> "* checking DESCRIPTION meta-information ... NOTE
> Checking should be performed on sources prepared by ?R CMD build?."
> 
> (No further information is given on that one in 00check.log.)
> 
> But my source is in fact put together by R CMD build.
> 
> Can anybody tell me what could be wrong here and how to remove the note?
> 
> DESCRIPTION looks like this:
> 
> Package: prabclus
> Title: Functions for Clustering and Testing of Presence-Absence,
> Abundance and Multilocus Genetic Data
> Version: 2.3-1
> Date: 2019-06-03
> Author: Christian Hennig <christian.hennig at unibo.it>,
>           Bernhard Hausdorf <Hausdorf at zoologie.uni-hamburg.de>
> Depends: R (>= 2.10), MASS, mclust
> Suggests: spdep, spatialreg, bootstrap, maptools, foreign, mvtnorm
> Description: Distance-based parametric bootstrap tests for clustering with
>     spatial neighborhood information. Some distance measures,
>     Clustering of presence-absence, abundance and multilocus genetical data
>     for species delimitation, nearest neighbor
>     based noise detection. Genetic distances between communities.
>     Tests whether various distance-based regressions
>     are equal. Try package?prabclus for on overview.
> Maintainer: Christian Hennig <christian.hennig at unibo.it>
> License: GPL
> URL: https://www.unibo.it/sitoweb/christian.hennig/en/
> Christian Martin Hennig ? University of Bologna ? Home Page<https://www.unibo.it/sitoweb/christian.hennig/en/>
> www.unibo.it
> I am at the University of Bologna since November 2018. My research interests are cluster analysis, multivariate data analysis incl. classification and data visualisation, robust statistics, foundations and philosophy of statistics, statistical modelling and applications.
> I should maybe add that I ran the check on the proper tar.gz file produced by R CMD build, and apart from this NOTE and another one (which was far less mysterious) everything went through without issues.

Hard to tell from a distance, but it sounds to me like you must have done:

     R CMD check prabclus

The NOTE is telling you that you should have done

     R CMD check prabclus_2.3-1.tar.gz

(the latter being what "R CMD build prabclus" creates).

If you did in fact do "R CMD check prabclus_2.3-1.tar.gz" then I 
apologise for being patronising.  In this case I have no insight 
whatever as to what might be going wrong.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bernd@j@g|@ @end|ng |rom p@@teur@|r  Tue Jun  4 14:36:09 2019
From: bernd@j@g|@ @end|ng |rom p@@teur@|r (Bernd  JAGLA)
Date: Tue, 4 Jun 2019 12:36:09 +0000
Subject: [R-pkg-devel] note
Message-ID: <ff123ccd5cab489a9bff2cde2ef0f084@pasteur.fr>

Hi,


I am trying to submit a package with a shiny app to cran.

I get 2 notes that I don't know how to resolve. I would appreciate very much any suggestions/help.


Thanks a lot.


It seems the first note is on possibly misspelled words. I am using camel-case to "explain" the name of the app, the app's name itself is mostly capitalized, and the others are either names of objects or the title (Transcriptomics), which I believe should be capitalized... So, I don't really know how to overcome this.


With respect to the TRONCO license, I believe the reason for the message is that they included a custom file, but they are also using GPL3 (which I am required to use by my company) I don't see a solution...


Then, there are some global variables and things that are only defined under the inst directory. I came about the solution of putting the main part of my app /inst by finding similar solutions on google. I ran into a whole bunch of problems with putting everything under /R and I can create a package etc on GitHub and locally and install them through GitHub or locally. The only caveat is that I had to define these variables to pass the arguments as there are different environments involved... I think I chose the variable names in a way that shouldn't interfere with anything...


As you can imagine by now, this is the first package I am submitting and it is quite a daunting task, so I am very sorry to haven't understood by now all the documentation and I am still hoping that the approach I took is viable. ?


Thanks for taking the time to look into this.


Here is the log:

* using log directory 'd:/RCompile/CRANincoming/R-devel/SCHNAPPs.Rcheck'
* using R Under development (unstable) (2019-06-03 r76654)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'SCHNAPPs/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'SCHNAPPs' version '0.1.2'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Bernd Jagla <bernd.jagla at pasteur.fr>'

New submission

Possibly mis-spelled words in DESCRIPTION:
  APPlication (8:32)
  SCHNAPPs (8:45)
  SingleCellExperiment (11:5)
  Transcriptomics (4:9)
  sHiny (8:26)

Package has a FOSS license but eventually depends on the following
package which may restrict use:
  TRONCO

Size of tarball: 14400839 bytes
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking whether package 'SCHNAPPs' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking for future file timestamps ... OK
* checking 'build' directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* loading checks for arch 'i386'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* loading checks for arch 'x64'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... [10s] NOTE
schnapps: no visible global function definition for 'shinyApp'
schnapps: no visible binding for global variable 'scShinyUI'
schnapps: no visible binding for global variable 'scShinyServer'
schnapps: no visible global function definition for 'runApp'
Undefined global functions or variables:
  runApp scShinyServer scShinyUI shinyApp

Found the following assignments to the global environment:
File 'SCHNAPPs/R/schnapps-Main.R':
  assign(".SCHNAPPs_locContributionDir", localContributionDir,
    envir = globalenv())
  assign(".SCHNAPPs_defaultValueSingleGene", defaultValueSingleGene,
    envir = globalenv())
  assign(".SCHNAPPs_defaultValueMultiGenes", defaultValueMultiGenes,
    envir = globalenv())
  assign(".SCHNAPPs_defaultValueRegExGene", defaultValueRegExGene,
    envir = globalenv())
  assign(".SCHNAPPs_DEBUG", DEBUG, envir = globalenv())
  assign(".SCHNAPPs_DEBUGSAVE", DEBUGSAVE, envir = globalenv())
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking R/sysdata.rda ... OK
* checking installed files from 'inst/doc' ... OK
* checking files in 'vignettes' ... OK
* checking examples ... NONE
* checking for unstated dependencies in 'tests' ... OK
* checking tests ...
** running tests for arch 'i386' ... [4s] OK
  Running 'testthat.R' [3s]
** running tests for arch 'x64' ... [4s] OK
  Running 'testthat.R' [3s]
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in 'inst/doc' ... OK
* checking re-building of vignette outputs ... [9s] OK
* checking PDF version of manual ... OK
* DONE
Status: 2 NOTEs



	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun  4 20:07:20 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Jun 2019 14:07:20 -0400
Subject: [R-pkg-devel] note
In-Reply-To: <ff123ccd5cab489a9bff2cde2ef0f084@pasteur.fr>
References: <ff123ccd5cab489a9bff2cde2ef0f084@pasteur.fr>
Message-ID: <00d12067-99e2-c472-df28-bdec6bc841c4@gmail.com>

On 04/06/2019 8:36 a.m., Bernd  JAGLA wrote:
> Hi,
> 
> 
> I am trying to submit a package with a shiny app to cran.
> 
> I get 2 notes that I don't know how to resolve. I would appreciate very much any suggestions/help.
> 
> 
> Thanks a lot.
> 
> 
> It seems the first note is on possibly misspelled words. I am using camel-case to "explain" the name of the app, the app's name itself is mostly capitalized, and the others are either names of objects or the title (Transcriptomics), which I believe should be capitalized... So, I don't really know how to overcome this.

Explain in your submission note why you spelled things the way you did. 
Generally non-English words should be in single quotes; see 
https://cloud.r-project.org/web/packages/submission_checklist.html.  But 
"sHiny" looks wrong in any case if it is not quoted.
> 
> 
> With respect to the TRONCO license, I believe the reason for the message is that they included a custom file, but they are also using GPL3 (which I am required to use by my company) I don't see a solution...

TRONCO is a Bioconductor package, and isn't declaring its GPL-3 license 
in the format that CRAN wants.  Explain this in your submission note.
> 
> 
> Then, there are some global variables and things that are only defined under the inst directory. I came about the solution of putting the main part of my app /inst by finding similar solutions on google. I ran into a whole bunch of problems with putting everything under /R and I can create a package etc on GitHub and locally and install them through GitHub or locally. The only caveat is that I had to define these variables to pass the arguments as there are different environments involved... I think I chose the variable names in a way that shouldn't interfere with anything...

Don't create global variables. The global environment is off limits to 
you. You can have an environment in your package that contains those 
variables.  This one you'll have to change, not just explain like the 
others.

Duncan Murdoch
> 
> 
> As you can imagine by now, this is the first package I am submitting and it is quite a daunting task, so I am very sorry to haven't understood by now all the documentation and I am still hoping that the approach I took is viable. ?
> 
> 
> Thanks for taking the time to look into this.
> 
> 
> Here is the log:
> 
> * using log directory 'd:/RCompile/CRANincoming/R-devel/SCHNAPPs.Rcheck'
> * using R Under development (unstable) (2019-06-03 r76654)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'SCHNAPPs/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'SCHNAPPs' version '0.1.2'
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Bernd Jagla <bernd.jagla at pasteur.fr>'
> 
> New submission
> 
> Possibly mis-spelled words in DESCRIPTION:
>    APPlication (8:32)
>    SCHNAPPs (8:45)
>    SingleCellExperiment (11:5)
>    Transcriptomics (4:9)
>    sHiny (8:26)
> 
> Package has a FOSS license but eventually depends on the following
> package which may restrict use:
>    TRONCO
> 
> Size of tarball: 14400839 bytes
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking whether package 'SCHNAPPs' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking for future file timestamps ... OK
> * checking 'build' directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * loading checks for arch 'i386'
> ** checking whether the package can be loaded ... OK
> ** checking whether the package can be loaded with stated dependencies ... OK
> ** checking whether the package can be unloaded cleanly ... OK
> ** checking whether the namespace can be loaded with stated dependencies ... OK
> ** checking whether the namespace can be unloaded cleanly ... OK
> ** checking loading without being on the library search path ... OK
> ** checking use of S3 registration ... OK
> * loading checks for arch 'x64'
> ** checking whether the package can be loaded ... OK
> ** checking whether the package can be loaded with stated dependencies ... OK
> ** checking whether the package can be unloaded cleanly ... OK
> ** checking whether the namespace can be loaded with stated dependencies ... OK
> ** checking whether the namespace can be unloaded cleanly ... OK
> ** checking loading without being on the library search path ... OK
> ** checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... [10s] NOTE
> schnapps: no visible global function definition for 'shinyApp'
> schnapps: no visible binding for global variable 'scShinyUI'
> schnapps: no visible binding for global variable 'scShinyServer'
> schnapps: no visible global function definition for 'runApp'
> Undefined global functions or variables:
>    runApp scShinyServer scShinyUI shinyApp
> 
> Found the following assignments to the global environment:
> File 'SCHNAPPs/R/schnapps-Main.R':
>    assign(".SCHNAPPs_locContributionDir", localContributionDir,
>      envir = globalenv())
>    assign(".SCHNAPPs_defaultValueSingleGene", defaultValueSingleGene,
>      envir = globalenv())
>    assign(".SCHNAPPs_defaultValueMultiGenes", defaultValueMultiGenes,
>      envir = globalenv())
>    assign(".SCHNAPPs_defaultValueRegExGene", defaultValueRegExGene,
>      envir = globalenv())
>    assign(".SCHNAPPs_DEBUG", DEBUG, envir = globalenv())
>    assign(".SCHNAPPs_DEBUGSAVE", DEBUGSAVE, envir = globalenv())
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking R/sysdata.rda ... OK
> * checking installed files from 'inst/doc' ... OK
> * checking files in 'vignettes' ... OK
> * checking examples ... NONE
> * checking for unstated dependencies in 'tests' ... OK
> * checking tests ...
> ** running tests for arch 'i386' ... [4s] OK
>    Running 'testthat.R' [3s]
> ** running tests for arch 'x64' ... [4s] OK
>    Running 'testthat.R' [3s]
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in 'inst/doc' ... OK
> * checking re-building of vignette outputs ... [9s] OK
> * checking PDF version of manual ... OK
> * DONE
> Status: 2 NOTEs
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jun  4 21:29:02 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Jun 2019 12:29:02 -0700
Subject: [R-pkg-devel] note
In-Reply-To: <00d12067-99e2-c472-df28-bdec6bc841c4@gmail.com>
References: <ff123ccd5cab489a9bff2cde2ef0f084@pasteur.fr>
 <00d12067-99e2-c472-df28-bdec6bc841c4@gmail.com>
Message-ID: <4DF7034F-CD14-4A0B-BCD1-738C84E1921F@dcn.davis.ca.us>

Regarding the global variables... I found [1] illuminating, in particular the comments on the solution.

[1] https://stackoverflow.com/questions/41954302/where-to-create-package-environment-variables

On June 4, 2019 11:07:20 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 04/06/2019 8:36 a.m., Bernd  JAGLA wrote:
>> Hi,
>> 
>> 
>> I am trying to submit a package with a shiny app to cran.
>> 
>> I get 2 notes that I don't know how to resolve. I would appreciate
>very much any suggestions/help.
>> 
>> 
>> Thanks a lot.
>> 
>> 
>> It seems the first note is on possibly misspelled words. I am using
>camel-case to "explain" the name of the app, the app's name itself is
>mostly capitalized, and the others are either names of objects or the
>title (Transcriptomics), which I believe should be capitalized... So, I
>don't really know how to overcome this.
>
>Explain in your submission note why you spelled things the way you did.
>
>Generally non-English words should be in single quotes; see 
>https://cloud.r-project.org/web/packages/submission_checklist.html. 
>But 
>"sHiny" looks wrong in any case if it is not quoted.
>> 
>> 
>> With respect to the TRONCO license, I believe the reason for the
>message is that they included a custom file, but they are also using
>GPL3 (which I am required to use by my company) I don't see a
>solution...
>
>TRONCO is a Bioconductor package, and isn't declaring its GPL-3 license
>
>in the format that CRAN wants.  Explain this in your submission note.
>> 
>> 
>> Then, there are some global variables and things that are only
>defined under the inst directory. I came about the solution of putting
>the main part of my app /inst by finding similar solutions on google. I
>ran into a whole bunch of problems with putting everything under /R and
>I can create a package etc on GitHub and locally and install them
>through GitHub or locally. The only caveat is that I had to define
>these variables to pass the arguments as there are different
>environments involved... I think I chose the variable names in a way
>that shouldn't interfere with anything...
>
>Don't create global variables. The global environment is off limits to 
>you. You can have an environment in your package that contains those 
>variables.  This one you'll have to change, not just explain like the 
>others.
>
>Duncan Murdoch
>> 
>> 
>> As you can imagine by now, this is the first package I am submitting
>and it is quite a daunting task, so I am very sorry to haven't
>understood by now all the documentation and I am still hoping that the
>approach I took is viable. ?
>> 
>> 
>> Thanks for taking the time to look into this.
>> 
>> 
>> Here is the log:
>> 
>> * using log directory
>'d:/RCompile/CRANincoming/R-devel/SCHNAPPs.Rcheck'
>> * using R Under development (unstable) (2019-06-03 r76654)
>> * using platform: x86_64-w64-mingw32 (64-bit)
>> * using session charset: ISO8859-1
>> * checking for file 'SCHNAPPs/DESCRIPTION' ... OK
>> * checking extension type ... Package
>> * this is package 'SCHNAPPs' version '0.1.2'
>> * package encoding: UTF-8
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'Bernd Jagla <bernd.jagla at pasteur.fr>'
>> 
>> New submission
>> 
>> Possibly mis-spelled words in DESCRIPTION:
>>    APPlication (8:32)
>>    SCHNAPPs (8:45)
>>    SingleCellExperiment (11:5)
>>    Transcriptomics (4:9)
>>    sHiny (8:26)
>> 
>> Package has a FOSS license but eventually depends on the following
>> package which may restrict use:
>>    TRONCO
>> 
>> Size of tarball: 14400839 bytes
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking whether package 'SCHNAPPs' can be installed ... OK
>> * checking installed package size ... OK
>> * checking package directory ... OK
>> * checking for future file timestamps ... OK
>> * checking 'build' directory ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking for left-over files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... OK
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * loading checks for arch 'i386'
>> ** checking whether the package can be loaded ... OK
>> ** checking whether the package can be loaded with stated
>dependencies ... OK
>> ** checking whether the package can be unloaded cleanly ... OK
>> ** checking whether the namespace can be loaded with stated
>dependencies ... OK
>> ** checking whether the namespace can be unloaded cleanly ... OK
>> ** checking loading without being on the library search path ... OK
>> ** checking use of S3 registration ... OK
>> * loading checks for arch 'x64'
>> ** checking whether the package can be loaded ... OK
>> ** checking whether the package can be loaded with stated
>dependencies ... OK
>> ** checking whether the package can be unloaded cleanly ... OK
>> ** checking whether the namespace can be loaded with stated
>dependencies ... OK
>> ** checking whether the namespace can be unloaded cleanly ... OK
>> ** checking loading without being on the library search path ... OK
>> ** checking use of S3 registration ... OK
>> * checking dependencies in R code ... OK
>> * checking S3 generic/method consistency ... OK
>> * checking replacement functions ... OK
>> * checking foreign function calls ... OK
>> * checking R code for possible problems ... [10s] NOTE
>> schnapps: no visible global function definition for 'shinyApp'
>> schnapps: no visible binding for global variable 'scShinyUI'
>> schnapps: no visible binding for global variable 'scShinyServer'
>> schnapps: no visible global function definition for 'runApp'
>> Undefined global functions or variables:
>>    runApp scShinyServer scShinyUI shinyApp
>> 
>> Found the following assignments to the global environment:
>> File 'SCHNAPPs/R/schnapps-Main.R':
>>    assign(".SCHNAPPs_locContributionDir", localContributionDir,
>>      envir = globalenv())
>>    assign(".SCHNAPPs_defaultValueSingleGene", defaultValueSingleGene,
>>      envir = globalenv())
>>    assign(".SCHNAPPs_defaultValueMultiGenes", defaultValueMultiGenes,
>>      envir = globalenv())
>>    assign(".SCHNAPPs_defaultValueRegExGene", defaultValueRegExGene,
>>      envir = globalenv())
>>    assign(".SCHNAPPs_DEBUG", DEBUG, envir = globalenv())
>>    assign(".SCHNAPPs_DEBUGSAVE", DEBUGSAVE, envir = globalenv())
>> * checking Rd files ... OK
>> * checking Rd metadata ... OK
>> * checking Rd line widths ... OK
>> * checking Rd cross-references ... OK
>> * checking for missing documentation entries ... OK
>> * checking for code/documentation mismatches ... OK
>> * checking Rd \usage sections ... OK
>> * checking Rd contents ... OK
>> * checking for unstated dependencies in examples ... OK
>> * checking R/sysdata.rda ... OK
>> * checking installed files from 'inst/doc' ... OK
>> * checking files in 'vignettes' ... OK
>> * checking examples ... NONE
>> * checking for unstated dependencies in 'tests' ... OK
>> * checking tests ...
>> ** running tests for arch 'i386' ... [4s] OK
>>    Running 'testthat.R' [3s]
>> ** running tests for arch 'x64' ... [4s] OK
>>    Running 'testthat.R' [3s]
>> * checking for unstated dependencies in vignettes ... OK
>> * checking package vignettes in 'inst/doc' ... OK
>> * checking re-building of vignette outputs ... [9s] OK
>> * checking PDF version of manual ... OK
>> * DONE
>> Status: 2 NOTEs
>> 
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Jun  5 00:42:44 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 4 Jun 2019 16:42:44 -0600
Subject: [R-pkg-devel] Non-portable flags.
Message-ID: <0c72ff21-33f0-0f79-00b9-d9be87846e3e@auckland.ac.nz>


I am working on a revision of my Iso package (which hasn't been revised 
for quite a while) and have added in registration of Fortran routines 
that are called directly by .Fortran() in R functions.

When I do

     R CMD check --as-cran Iso_0.0-18.tar.gz

I get a "NOTE":

> Compilation used the following non-portable flag(s):
>   ?-Wdate-time? ?-Werror=format-security? ?-Wformat?

After experimenting with building a *.so file directly using SHLIB I 
discerned that the problem appears to arise from the compilation of the 
init.c file that I placed in "src" to effect the routine registration:

> gcc -std=gnu99 -I"/usr/share/R/include" -DNDEBUG     -fpic  -g -O2
> -fdebug-prefix-map=/build/r-base-VAQCff/r-base-3.6.0=.
> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
> -D_FORTIFY_SOURCE=2 -g  -c init.c -o init.o

I presume that I should do something about this note.  (Non-portability 
is indeed an egregious sin.)  How can I tell gcc not to use these flags?

Note that the NOTE does not arise unless I use the "--as-cran" flag.

Thanks for any insight.

cheers,

Rolf Turner

P.S. I am running Ubuntu 18.04.  Happy to supply any further details 
that might be relevant.

R. T.

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edd @end|ng |rom deb|@n@org  Wed Jun  5 00:51:50 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 4 Jun 2019 17:51:50 -0500
Subject: [R-pkg-devel] Non-portable flags.
In-Reply-To: <0c72ff21-33f0-0f79-00b9-d9be87846e3e@auckland.ac.nz>
References: <0c72ff21-33f0-0f79-00b9-d9be87846e3e@auckland.ac.nz>
Message-ID: <23798.62982.112262.315166@rob.eddelbuettel.com>


On 4 June 2019 at 16:42, Rolf Turner wrote:
| I am working on a revision of my Iso package (which hasn't been revised 
| for quite a while) and have added in registration of Fortran routines 
| that are called directly by .Fortran() in R functions.
| 
| When I do
| 
|      R CMD check --as-cran Iso_0.0-18.tar.gz
| 
| I get a "NOTE":
| 
| > Compilation used the following non-portable flag(s):
| >   ?-Wdate-time? ?-Werror=format-security? ?-Wformat?

[...]

| P.S. I am running Ubuntu 18.04.  Happy to supply any further details 
| that might be relevant.

Upgrade to 3.6.0-2 and it will be taken care of -- first bullet of second
entry in what follows in relevant. I should have taken care of that earlier.
In any event, this was discussed here or on r-sig-debian very recently.

  edd at rob:~$ zcat /usr/share/doc/r-base-core/changelog.Debian.gz | \
  head -17 r-base (3.6.0-2cosmic) cosmic; urgency=medium
  
    * Compilation for Ubuntu 18.10
    * debian/control Changed dependency to generic tcl-dev and tk-dev
  
   -- Michael Rutter <marutter at gmail.com>  Mon, 13 May 2019 00:41:33 +0000
  
  r-base (3.6.0-2) unstable; urgency=medium
  
    * debian/Renviron.site: Set variable _R_CHECK_COMPILATION_FLAGS_KNOWN_
      to white-list compiler flags pulled in Debian's gcc configuration
  
    * configure{,.ac}: Applied two upstream patches from this week to
      accommodate gfortran 8 changes related to C to Fortran calls
  
   -- Dirk Eddelbuettel <edd at debian.org>  Sat, 11 May 2019 13:58:42 -0500
  
  edd at rob:~$
  
(I am on 18.10 but Michael kindly provides builds for all relevant flavours,
including your 18.04.)

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Jun  5 01:35:38 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 4 Jun 2019 17:35:38 -0600
Subject: [R-pkg-devel] Non-portable flags.
In-Reply-To: <23798.62982.112262.315166@rob.eddelbuettel.com>
References: <0c72ff21-33f0-0f79-00b9-d9be87846e3e@auckland.ac.nz>
 <23798.62982.112262.315166@rob.eddelbuettel.com>
Message-ID: <fec4b726-ccea-a2ac-4bf0-ed8c9cf943ee@auckland.ac.nz>

On 4/06/19 4:51 PM, Dirk Eddelbuettel wrote:
> 
> On 4 June 2019 at 16:42, Rolf Turner wrote:
> | I am working on a revision of my Iso package (which hasn't been revised
> | for quite a while) and have added in registration of Fortran routines
> | that are called directly by .Fortran() in R functions.
> |
> | When I do
> |
> |      R CMD check --as-cran Iso_0.0-18.tar.gz
> |
> | I get a "NOTE":
> |
> | > Compilation used the following non-portable flag(s):
> | >   ?-Wdate-time? ?-Werror=format-security? ?-Wformat?
> 
> [...]
> 
> | P.S. I am running Ubuntu 18.04.  Happy to supply any further details
> | that might be relevant.
> 
> Upgrade to 3.6.0-2 and it will be taken care of -- first bullet of second
> entry in what follows in relevant. I should have taken care of that earlier.
> In any event, this was discussed here or on r-sig-debian very recently.
> 
>    edd at rob:~$ zcat /usr/share/doc/r-base-core/changelog.Debian.gz | \
>    head -17 r-base (3.6.0-2cosmic) cosmic; urgency=medium
>    
>      * Compilation for Ubuntu 18.10
>      * debian/control Changed dependency to generic tcl-dev and tk-dev
>    
>     -- Michael Rutter <marutter at gmail.com>  Mon, 13 May 2019 00:41:33 +0000
>    
>    r-base (3.6.0-2) unstable; urgency=medium
>    
>      * debian/Renviron.site: Set variable _R_CHECK_COMPILATION_FLAGS_KNOWN_
>        to white-list compiler flags pulled in Debian's gcc configuration
>    
>      * configure{,.ac}: Applied two upstream patches from this week to
>        accommodate gfortran 8 changes related to C to Fortran calls
>    
>     -- Dirk Eddelbuettel <edd at debian.org>  Sat, 11 May 2019 13:58:42 -0500
>    
>    edd at rob:~$
>    
> (I am on 18.10 but Michael kindly provides builds for all relevant flavours,
> including your 18.04.)
> 
> Dirk

Thanks Dirk.  I did an upgrade and the NOTE went away, so I guess that 
all is well.

I'm never sure about upgrading with "sudo apt whatever", so I was a bit 
apprehensive.  For the record I did:

     sudo apt update
     sudo apt upgrade r.base

The latter took quite a while; 15 or 20 minutes.  There's probably 
something simpler that I could have done, but when you don't know, you 
don't know.

There was no indication that I am now getting version 3.6.0-2; any 
enquires about the version that I can seem to make indicate version 
3.6.0; no "-2" in sight.  However, as I said above, it seems to have worked.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edd @end|ng |rom deb|@n@org  Wed Jun  5 03:54:58 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 4 Jun 2019 20:54:58 -0500
Subject: [R-pkg-devel] Non-portable flags.
In-Reply-To: <fec4b726-ccea-a2ac-4bf0-ed8c9cf943ee@auckland.ac.nz>
References: <0c72ff21-33f0-0f79-00b9-d9be87846e3e@auckland.ac.nz>
 <23798.62982.112262.315166@rob.eddelbuettel.com>
 <fec4b726-ccea-a2ac-4bf0-ed8c9cf943ee@auckland.ac.nz>
Message-ID: <23799.8434.987965.807984@rob.eddelbuettel.com>


On 4 June 2019 at 17:35, Rolf Turner wrote:
| Thanks Dirk.  I did an upgrade and the NOTE went away, so I guess that 
| all is well.

Yes.

| I'm never sure about upgrading with "sudo apt whatever", so I was a bit 
| apprehensive.  For the record I did:
| 
|      sudo apt update
|      sudo apt upgrade r.base

I have been doing 'wajig update; wajig dist-upgrade' thanks to Graham
Williams for probaly 15 years now. 'wajig' normalizes a few of the commands,
keeps state, and calls sudo for me.
 
| The latter took quite a while; 15 or 20 minutes.  There's probably 
| something simpler that I could have done, but when you don't know, you 
| don't know.

"The best time to plant a tree was 20 years ago. The second best time is now."
You can always learn about these commands. It pays you back with interest.
 
| There was no indication that I am now getting version 3.6.0-2; any 
| enquires about the version that I can seem to make indicate version 
| 3.6.0; no "-2" in sight.  However, as I said above, it seems to have worked.

Upstream version:  3.6.0.  What 'R --version' shows you.

Distro build: 3.6.0-2.  What eg 'dpkg -s r-base-core' or 'dpkg -k
r-base-core' shows you.

Two related but different systems.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From D@V|dotto @end|ng |rom uvt@n|  Wed Jun  5 13:13:08 2019
From: D@V|dotto @end|ng |rom uvt@n| (D. Vidotto)
Date: Wed, 5 Jun 2019 11:13:08 +0000
Subject: [R-pkg-devel] bayespca package - CRAN test
Message-ID: <1988379C6E433B4A890785DA27099C1F2B04B070@EXMBX101.campus.uvt.nl>

Dear members,

                Yesterday I submitted a package called 'bayespca' (version 0.0.2) to CRAN. Today, I received an e-mail saying that the package did not pass some test.
Thus, today I have been working on fixing these problems (original three notes). While I could fix almost all of them, there is still one problem left which I cannot fix. It is the following one:

* checking line endings in C/C++/Fortran sources/headers ... NOTE
Found the following sources/headers with CR or CRLF line endings:
  inst/include/aux_functions.h
  inst/include/elbo_functions.h
  inst/include/expectedvalues.h
  inst/include/updateElbo.h
  inst/include/updateExpected.h
  inst/include/vbalgorithm.h
Some Unix compilers require LF line endings.


How can I fix these? Why are my cpp files in the source folder correct, while these headers are not? Furthermore, when I run the R CMD check -as-cran on my machine (Windows), the test about line endings pass with no problems. May you help me telling me how I can modify the line endings of the above files?

Thank you in advance for your help.


With kind regards,

Davide Vidotto
Tilburg University


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun  5 14:05:31 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Jun 2019 08:05:31 -0400
Subject: [R-pkg-devel] bayespca package - CRAN test
In-Reply-To: <1988379C6E433B4A890785DA27099C1F2B04B070@EXMBX101.campus.uvt.nl>
References: <1988379C6E433B4A890785DA27099C1F2B04B070@EXMBX101.campus.uvt.nl>
Message-ID: <f548aa9a-ee3d-982d-0eff-65f74223824f@gmail.com>

On 05/06/2019 7:13 a.m., D. Vidotto wrote:
> Dear members,
> 
>                  Yesterday I submitted a package called 'bayespca' (version 0.0.2) to CRAN. Today, I received an e-mail saying that the package did not pass some test.
> Thus, today I have been working on fixing these problems (original three notes). While I could fix almost all of them, there is still one problem left which I cannot fix. It is the following one:
> 
> * checking line endings in C/C++/Fortran sources/headers ... NOTE
> Found the following sources/headers with CR or CRLF line endings:
>    inst/include/aux_functions.h
>    inst/include/elbo_functions.h
>    inst/include/expectedvalues.h
>    inst/include/updateElbo.h
>    inst/include/updateExpected.h
>    inst/include/vbalgorithm.h
> Some Unix compilers require LF line endings.
> 
> 
> How can I fix these? Why are my cpp files in the source folder correct, while these headers are not? Furthermore, when I run the R CMD check -as-cran on my machine (Windows), the test about line endings pass with no problems. May you help me telling me how I can modify the line endings of the above files?

I don't know why you are getting inconsistent test results, but one way 
to fix these is to open each file in your text editor, and save it with 
LF line endings.

If you are using RStudio, this is an option that's a little hard to 
find:  go to Tools | Project Options...  | Code editing | Line ending 
conversion, and choose "Posix (LF)".  Open and save each file, and it 
should be converted to the format that CRAN wants.

Duncan Murdoch


From |@muv|e @end|ng |rom gm@||@com  Wed Jun  5 14:27:09 2019
From: |@muv|e @end|ng |rom gm@||@com (=?UTF-8?Q?Facundo_Mu=c3=b1oz?=)
Date: Wed, 5 Jun 2019 14:27:09 +0200
Subject: [R-pkg-devel] bayespca package - CRAN test
In-Reply-To: <1988379C6E433B4A890785DA27099C1F2B04B070@EXMBX101.campus.uvt.nl>
References: <1988379C6E433B4A890785DA27099C1F2B04B070@EXMBX101.campus.uvt.nl>
Message-ID: <a064c0ff-1ff3-8adb-e04b-ae57c29efcb6@gmail.com>

If you have access to a linux box (or cygwin), there is this tool [1]
that lets you do something like

find . -name inst/include/*.h | xargs dos2unix

to fix all the line breaks in one shot.

There are also binaries for Windows so you should be able to do this
from your computer.

Best,

??? ?acu.-


[1] https://waterlan.home.xs4all.nl/dos2unix.html

On 6/5/19 1:13 PM, D. Vidotto wrote:
> Dear members,
>
>                 Yesterday I submitted a package called 'bayespca' (version 0.0.2) to CRAN. Today, I received an e-mail saying that the package did not pass some test.
> Thus, today I have been working on fixing these problems (original three notes). While I could fix almost all of them, there is still one problem left which I cannot fix. It is the following one:
>
> * checking line endings in C/C++/Fortran sources/headers ... NOTE
> Found the following sources/headers with CR or CRLF line endings:
>   inst/include/aux_functions.h
>   inst/include/elbo_functions.h
>   inst/include/expectedvalues.h
>   inst/include/updateElbo.h
>   inst/include/updateExpected.h
>   inst/include/vbalgorithm.h
> Some Unix compilers require LF line endings.
>
>
> How can I fix these? Why are my cpp files in the source folder correct, while these headers are not? Furthermore, when I run the R CMD check -as-cran on my machine (Windows), the test about line endings pass with no problems. May you help me telling me how I can modify the line endings of the above files?
>
> Thank you in advance for your help.
>
>
> With kind regards,
>
> Davide Vidotto
> Tilburg University
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From pro|jcn@@h @end|ng |rom gm@||@com  Thu Jun  6 15:03:16 2019
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Thu, 6 Jun 2019 09:03:16 -0400
Subject: [R-pkg-devel] try() in R CMD check --as-cran
Message-ID: <7938353e-0b58-9ea4-a49a-ee95866956f0@gmail.com>

After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.

To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
a routine designed to check the call to the user objective function. In particular,
one check is that the size of vectors is the same in expressions like (x - y)^2.
This works fine with R CMD check, but the --as-cran seems to have changed and it
pops an error, even when the call is inside try(). The irony that the routine in
question is intended to avoid problems like this is not lost on me.

I'm working on a small reproducible example, but it's not small enough yet.
In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
"R CMD check --as-cran" so I can work out why there is this difference, which seems
to be recent.

Can someone send/post a link? I plan to figure this out and provide feedback,
as I suspect it is going to affect others. However, it may be a few days or even
weeks if past experience is a guide.

JN


From ||nu@@|@chen @end|ng |rom gm@||@com  Fri Jun  7 00:29:24 2019
From: ||nu@@|@chen @end|ng |rom gm@||@com (Linus Chen)
Date: Fri, 7 Jun 2019 00:29:24 +0200
Subject: [R-pkg-devel] using package data in package code
Message-ID: <CAPm+3sB-ZW160uv9H9WDhUBiU2UpCWxKZa64JeZFmTg3vuKMoA@mail.gmail.com>

Dear all,

I am trying to understand the usage of package data.
Suppose I create an object and save it
    x <- 3
    save(x, 'sysdata.rda')
and then put it into mypac/data/ directoy.
And suppose in my packge code I have
    f <- function(x) x+1
Then, when the package has been built, installed, and loaded,
the user get access to mypac::f and mypac::x, and
    y <- mypac::f(mypac::x)
will give 4.

However, if I put the same code into the package, with the purpose to
create an object mypac::y, the package would not build, with the error
message: object 'x' not found.

So my question is: Is there a mechanism for the package data to be accessed by
the package code?
I have tried to look for answer in "Writing R Extensions",
and especially, I have read section 1.1.6 "Data in packages" carefully,
but no answer for my question...

In my real package, certainly x and f is non-trivial. Basically x is
kind of a look-up table.
The 'y' that I wish to provide with the package to the user is a S4 object.
And 'f', the function am using to create 'y', is itself a non-trivial
function defined in the package.

The work-around I can figure out are the following two:
1. put 'x' in a separate package, which 'mypac' will import.
    Then the package code "y <- f(x)".
    But it feels bad to have two packages for one integral set of information.

2. Do the whole thing in two pass, in the first round the package
contain only x anf f.
    Then, load the package, run y<-f(x), and add it to 'sysdata.rda'.
    But this way, the two-pass operation has to be repeated each time
the package is modified,
    even if the change does not affect 'x', and only affect 'f'.

So is there a more elegant way to deal with this?

I would be grateful to any hints, or useful links. Thank you!

Best regards,
Lei Chen


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jun  7 01:21:05 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 6 Jun 2019 19:21:05 -0400
Subject: [R-pkg-devel] using package data in package code
In-Reply-To: <CAPm+3sB-ZW160uv9H9WDhUBiU2UpCWxKZa64JeZFmTg3vuKMoA@mail.gmail.com>
References: <CAPm+3sB-ZW160uv9H9WDhUBiU2UpCWxKZa64JeZFmTg3vuKMoA@mail.gmail.com>
Message-ID: <070a1af0-b910-5f04-565b-971fa5061e0a@gmail.com>

On 06/06/2019 6:29 p.m., Linus Chen wrote:
> Dear all,
> 
> I am trying to understand the usage of package data.
> Suppose I create an object and save it
>      x <- 3
>      save(x, 'sysdata.rda')
> and then put it into mypac/data/ directoy.
> And suppose in my packge code I have
>      f <- function(x) x+1
> Then, when the package has been built, installed, and loaded,
> the user get access to mypac::f and mypac::x, and
>      y <- mypac::f(mypac::x)
> will give 4.
> 
> However, if I put the same code into the package, with the purpose to
> create an object mypac::y, the package would not build, with the error
> message: object 'x' not found.
> 
> So my question is: Is there a mechanism for the package data to be accessed by
> the package code?
> I have tried to look for answer in "Writing R Extensions",
> and especially, I have read section 1.1.6 "Data in packages" carefully,
> but no answer for my question...
> 
> In my real package, certainly x and f is non-trivial. Basically x is
> kind of a look-up table.
> The 'y' that I wish to provide with the package to the user is a S4 object.
> And 'f', the function am using to create 'y', is itself a non-trivial
> function defined in the package.
> 
> The work-around I can figure out are the following two:
> 1. put 'x' in a separate package, which 'mypac' will import.
>      Then the package code "y <- f(x)".
>      But it feels bad to have two packages for one integral set of information.
> 
> 2. Do the whole thing in two pass, in the first round the package
> contain only x anf f.
>      Then, load the package, run y<-f(x), and add it to 'sysdata.rda'.
>      But this way, the two-pass operation has to be repeated each time
> the package is modified,
>      even if the change does not affect 'x', and only affect 'f'.
> 
> So is there a more elegant way to deal with this?
> 
> I would be grateful to any hints, or useful links. Thank you!

There are lots of ways to do this, depending on your needs.  The 
simplest is just to include

   x <- 3

in one of your .R files in your package; then all functions in your 
package can see it, but users of your package can't (unless you export it).

If x is really huge, you might think this will waste memory every time 
your package is loaded.  However, objects in packages can be "lazy 
loaded", so the memory will only be used if x is ever referenced.  This 
is a little tricky for datasets, though it is the default if the object 
is a function.

For data, the sysdata.rda file is the easiest solution.  It's for data 
that is used by the functions in the package, not user-visible.  Just 
put x into that file in the package/R directory to make use of it.

You don't need a two-pass solution.  As long as the sysdata.rda file 
stays unmodified, x will be available for code in the package to use as 
it sees fit, without any special handling.  (If x is created from 
complicated source code that changes regularly, I'd go with one of my 
earlier suggestions.)

Duncan Murdoch


From k@@@e|@h|ngee @end|ng |rom re@e@rch@uw@@edu@@u  Fri Jun  7 06:35:33 2019
From: k@@@e|@h|ngee @end|ng |rom re@e@rch@uw@@edu@@u (Kassel Hingee)
Date: Fri, 7 Jun 2019 13:35:33 +0900
Subject: [R-pkg-devel] checks on CRAN notes 'examples_i386',
 but checks elsewhere do not
Message-ID: <CALdvo4_qBM2_di9dHuHZZYe8HOfthKdYmJOykFKZq2TuQXUdew@mail.gmail.com>

Hi All,

This is my first time submitting a package to CRAN, and posting here. I
hope I get everything right.

Checks ran by CRAN for Windows systems generated a note that I don't know
where to start to solve:

* checking for non-standard things in the check directory ... NOTE
Found the following files/directories:
  examples_i386 examples_x64 lacunaritycovariance-Ex_i386.Rout
  lacunaritycovariance-Ex_x64.Rout tests_i386 tests_x64


This note was not generated when I uploaded the package directly to
winbuilder in either release or development versions of R.
It also wasn't generated when I ran devtools::check() on my own (unix) computer.

The results of the CRAN check can be seen here for another few days:
https://win-builder.r-project.org/incoming_pretest/lacunaritycovariance_1.0-3_20190606_051128/
The check log containing the above note is here:
https://win-builder.r-project.org/incoming_pretest/lacunaritycovariance_1.0-3_20190606_051128/Windows/00check.log
The package source can bee seen here:
https://github.com/kasselhingee/lacunaritycovariance/tree/release

I haven't noticed a solution discussed earlier on this email list and
web searching gave me no joy. I am hoping you can help!

yours
Kassel

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Fri Jun  7 09:31:42 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 7 Jun 2019 07:31:42 +0000
Subject: [R-pkg-devel] checks on CRAN notes 'examples_i386',
 but checks elsewhere do not
In-Reply-To: <CALdvo4_qBM2_di9dHuHZZYe8HOfthKdYmJOykFKZq2TuQXUdew@mail.gmail.com>
References: <CALdvo4_qBM2_di9dHuHZZYe8HOfthKdYmJOykFKZq2TuQXUdew@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F71D144@MBXP02.ds.man.ac.uk>

It looks like you get the note when you run the check on the package directory, rather than on the tarball of the package. Undoubtedly, you submitted the tarball towinbuilder. develops::check also first builds the package and then does the flecks on the tarball.

If unwanted files do creep into the tarball, use file.Rbuildignore to tell the builder not to include them.


 Georgi Boshnakov 


________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Kassel Hingee [kassel.hingee at research.uwa.edu.au]
Sent: 07 June 2019 05:35
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] checks on CRAN notes 'examples_i386', but checks elsewhere do not

Hi All,

This is my first time submitting a package to CRAN, and posting here. I
hope I get everything right.

Checks ran by CRAN for Windows systems generated a note that I don't know
where to start to solve:

* checking for non-standard things in the check directory ... NOTE
Found the following files/directories:
  examples_i386 examples_x64 lacunaritycovariance-Ex_i386.Rout
  lacunaritycovariance-Ex_x64.Rout tests_i386 tests_x64


This note was not generated when I uploaded the package directly to
winbuilder in either release or development versions of R.
It also wasn't generated when I ran devtools::check() on my own (unix) computer.

The results of the CRAN check can be seen here for another few days:
https://win-builder.r-project.org/incoming_pretest/lacunaritycovariance_1.0-3_20190606_051128/
The check log containing the above note is here:
https://win-builder.r-project.org/incoming_pretest/lacunaritycovariance_1.0-3_20190606_051128/Windows/00check.log
The package source can bee seen here:
https://github.com/kasselhingee/lacunaritycovariance/tree/release

I haven't noticed a solution discussed earlier on this email list and
web searching gave me no joy. I am hoping you can help!

yours
Kassel

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jun  7 10:06:53 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 7 Jun 2019 10:06:53 +0200
Subject: [R-pkg-devel] checks on CRAN notes 'examples_i386',
 but checks elsewhere do not
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F71D144@MBXP02.ds.man.ac.uk>
References: <CALdvo4_qBM2_di9dHuHZZYe8HOfthKdYmJOykFKZq2TuQXUdew@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F71D144@MBXP02.ds.man.ac.uk>
Message-ID: <5dec0a8d-05c9-529a-86c0-7d185db68c35@statistik.tu-dortmund.de>

Or you have been there at the wrong time when we enabled a new check 
that was not able to correctly deal with check directories produced 
under bi-arch check siutuations. This is fixed for wionbuilder and wil 
be fixed in the R sources soon,
Uwe



On 07.06.2019 09:31, Georgi Boshnakov wrote:
> It looks like you get the note when you run the check on the package directory, rather than on the tarball of the package. Undoubtedly, you submitted the tarball towinbuilder. develops::check also first builds the package and then does the flecks on the tarball.
> 
> If unwanted files do creep into the tarball, use file.Rbuildignore to tell the builder not to include them.
> 
> 
>   Georgi Boshnakov
> 
> 
> ________________________________________
> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Kassel Hingee [kassel.hingee at research.uwa.edu.au]
> Sent: 07 June 2019 05:35
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] checks on CRAN notes 'examples_i386', but checks elsewhere do not
> 
> Hi All,
> 
> This is my first time submitting a package to CRAN, and posting here. I
> hope I get everything right.
> 
> Checks ran by CRAN for Windows systems generated a note that I don't know
> where to start to solve:
> 
> * checking for non-standard things in the check directory ... NOTE
> Found the following files/directories:
>    examples_i386 examples_x64 lacunaritycovariance-Ex_i386.Rout
>    lacunaritycovariance-Ex_x64.Rout tests_i386 tests_x64
> 
> 
> This note was not generated when I uploaded the package directly to
> winbuilder in either release or development versions of R.
> It also wasn't generated when I ran devtools::check() on my own (unix) computer.
> 
> The results of the CRAN check can be seen here for another few days:
> https://win-builder.r-project.org/incoming_pretest/lacunaritycovariance_1.0-3_20190606_051128/
> The check log containing the above note is here:
> https://win-builder.r-project.org/incoming_pretest/lacunaritycovariance_1.0-3_20190606_051128/Windows/00check.log
> The package source can bee seen here:
> https://github.com/kasselhingee/lacunaritycovariance/tree/release
> 
> I haven't noticed a solution discussed earlier on this email list and
> web searching gave me no joy. I am hoping you can help!
> 
> yours
> Kassel
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Fri Jun  7 10:33:31 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Fri, 7 Jun 2019 08:33:31 +0000
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <7938353e-0b58-9ea4-a49a-ee95866956f0@gmail.com>
References: <7938353e-0b58-9ea4-a49a-ee95866956f0@gmail.com>
Message-ID: <VI1PR06MB4813880F570BE8C7BE30EDD4D5100@VI1PR06MB4813.eurprd06.prod.outlook.com>


Not entirely sure if this is what you're looking for:
https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
It does contain --as-cran a few times and there's the change-history:
https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R

Regards,
Berry


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of J C Nash <profjcnash at gmail.com>
Sent: Thursday, June 6, 2019 15:03
To: List r-package-devel
Subject: [R-pkg-devel] try() in R CMD check --as-cran

After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.

To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
a routine designed to check the call to the user objective function. In particular,
one check is that the size of vectors is the same in expressions like (x - y)^2.
This works fine with R CMD check, but the --as-cran seems to have changed and it
pops an error, even when the call is inside try(). The irony that the routine in
question is intended to avoid problems like this is not lost on me.

I'm working on a small reproducible example, but it's not small enough yet.
In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
"R CMD check --as-cran" so I can work out why there is this difference, which seems
to be recent.

Can someone send/post a link? I plan to figure this out and provide feedback,
as I suspect it is going to affect others. However, it may be a few days or even
weeks if past experience is a guide.

JN

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jun  7 11:44:37 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 7 Jun 2019 11:44:37 +0200
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <VI1PR06MB4813880F570BE8C7BE30EDD4D5100@VI1PR06MB4813.eurprd06.prod.outlook.com>
References: <7938353e-0b58-9ea4-a49a-ee95866956f0@gmail.com>
 <VI1PR06MB4813880F570BE8C7BE30EDD4D5100@VI1PR06MB4813.eurprd06.prod.outlook.com>
Message-ID: <2ea25ec8-fd1d-68d8-ae81-217eca339447@statistik.tu-dortmund.de>

Right, what problem are you talking about? Can you tell us which check 
it is and what it actually complained about.
There is no check that looks at the sizes of x and y in exypressions 
such as
(x - y)^2.
as far as I know.

Best,
Uwe

On 07.06.2019 10:33, Berry Boessenkool wrote:
> 
> Not entirely sure if this is what you're looking for:
> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
> It does contain --as-cran a few times and there's the change-history:
> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
> 
> Regards,
> Berry
> 
> 
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of J C Nash <profjcnash at gmail.com>
> Sent: Thursday, June 6, 2019 15:03
> To: List r-package-devel
> Subject: [R-pkg-devel] try() in R CMD check --as-cran
> 
> After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.
> 
> To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
> a routine designed to check the call to the user objective function. In particular,
> one check is that the size of vectors is the same in expressions like (x - y)^2.
> This works fine with R CMD check, but the --as-cran seems to have changed and it
> pops an error, even when the call is inside try(). The irony that the routine in
> question is intended to avoid problems like this is not lost on me.
> 
> I'm working on a small reproducible example, but it's not small enough yet.
> In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
> "R CMD check --as-cran" so I can work out why there is this difference, which seems
> to be recent.
> 
> Can someone send/post a link? I plan to figure this out and provide feedback,
> as I suspect it is going to affect others. However, it may be a few days or even
> weeks if past experience is a guide.
> 
> JN
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||nu@@|@chen @end|ng |rom gm@||@com  Fri Jun  7 14:33:26 2019
From: ||nu@@|@chen @end|ng |rom gm@||@com (Linus Chen)
Date: Fri, 7 Jun 2019 14:33:26 +0200
Subject: [R-pkg-devel] using package data in package code
In-Reply-To: <070a1af0-b910-5f04-565b-971fa5061e0a@gmail.com>
References: <CAPm+3sB-ZW160uv9H9WDhUBiU2UpCWxKZa64JeZFmTg3vuKMoA@mail.gmail.com>
 <070a1af0-b910-5f04-565b-971fa5061e0a@gmail.com>
Message-ID: <CAPm+3sDPGVxrJSOAgjEzw285KBYiQv_Y_kiZ=QAbBraEMXWJDQ@mail.gmail.com>

Dear Duncan,

Thank you very much!

>
> For data, the sysdata.rda file is the easiest solution.  It's for data
> that is used by the functions in the package, not user-visible.  Just
> put x into that file in the package/R directory to make use of it.
>
> You don't need a two-pass solution.  As long as the sysdata.rda file
> stays unmodified, x will be available for code in the package to use as
> it sees fit, without any special handling.  (If x is created from
> complicated source code that changes regularly, I'd go with one of my
> earlier suggestions.)
>

This is exactly the approach I tried first. In my naive mind, this
looks to be the most
natural way, and I thought it SHOULD work. However, it did not work on
my computer...,
and that is why I started to invent ugly work-arounds...

Please see attached a minimal example to reproduce the error message:
object 'x' not found.

Thank you very much!
Lei

-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tgz
Type: application/x-gzip
Size: 737 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190607/780853c3/attachment.bin>

From pro|jcn@@h @end|ng |rom gm@||@com  Fri Jun  7 14:53:28 2019
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 7 Jun 2019 08:53:28 -0400
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
Message-ID: <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>

Sorry reply not quicker. For some reason I'm not getting anything in the thread I started!
I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca please.

I have prepared a tiny (2.8K) package at
http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz

R CMD check --> OK

R CMD check --as-cran --> 1 ERROR, 1 NOTE

The error is in an example:

> benbad<-function(x, y){
>    # y may be provided with different structures
>    f<-(x-y)^2
> } # very simple, but ...
> 
> y<-1:10
> x<-c(1)
> cat("test benbad() with y=1:10, x=c(1)\n")
> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
> print(tryfc01)
> print(fc01)

There's quite a lot of output, but it doesn't make much sense to me, as
it refers to code that I didn't write.

The function fchk is attempting to check if functions provided for
optimization do not violate some conditions e.g., character rather than
numeric etc.

JN


On 2019-06-07 8:44 a.m., J C Nash wrote:
> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
> Fri Jun 7 11:44:37 CEST 2019
> 
>     Previous message (by thread): [R-pkg-devel] try() in R CMD check --as-cran
>     Next message (by thread): [R-pkg-devel] using package data in package code
>     Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
> 
> Right, what problem are you talking about? Can you tell us which check
> it is and what it actually complained about.
> There is no check that looks at the sizes of x and y in exypressions
> such as
> (x - y)^2.
> as far as I know.
> 
> Best,
> Uwe
> 
> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>
>> Not entirely sure if this is what you're looking for:
>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>> It does contain --as-cran a few times and there's the change-history:
>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>
>> Regards,
>> Berry
>>
>>
>> ________________________________
>> From: R-package-devel <r-package-devel-bounces using r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>> Sent: Thursday, June 6, 2019 15:03
>> To: List r-package-devel
>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>
>> After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.
>>
>> To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
>> a routine designed to check the call to the user objective function. In particular,
>> one check is that the size of vectors is the same in expressions like (x - y)^2.
>> This works fine with R CMD check, but the --as-cran seems to have changed and it
>> pops an error, even when the call is inside try(). The irony that the routine in
>> question is intended to avoid problems like this is not lost on me.
>>
>> I'm working on a small reproducible example, but it's not small enough yet.
>> In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
>> "R CMD check --as-cran" so I can work out why there is this difference, which seems
>> to be recent.
>>
>> Can someone send/post a link? I plan to figure this out and provide feedback,
>> as I suspect it is going to affect others. However, it may be a few days or even
>> weeks if past experience is a guide.
>>
>> JN
>>
>> ______________________________________________
>> R-package-devel using r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel using r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From @eb@meyer @end|ng |rom |@u@de  Fri Jun  7 15:31:04 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 7 Jun 2019 15:31:04 +0200
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
Message-ID: <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>

The failure stated in the R CMD check failure report is:

>  --- failure: length > 1 in coercion to logical ---

This comes from --as-cran performing useful extra checks via setting the
environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:

> check if either argument of the binary operators && and || has length greater than one. 

(see https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)

The failure report also states the source of the failure:

>  --- call from context --- 
> fchk(x, benbad, trace = 3, y)
>  --- call from argument --- 
> is.infinite(fval) || is.na(fval)

The problem is that both is.infinite(fval) and is.na(fval) return
vectors of length 10 in your test case:

>  --- value of length: 10 type: logical ---
>  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE

The || operator works on length 1 Booleans. Since fval can be of length
greater than 1 at that point, the proper condition seems to be:

any(is.infinite(fval)) || any(is.na(fval))

Best regards,

	Sebastian


Am 07.06.19 um 14:53 schrieb J C Nash:
> Sorry reply not quicker. For some reason I'm not getting anything in the thread I started!
> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca please.
> 
> I have prepared a tiny (2.8K) package at
> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
> 
> R CMD check --> OK
> 
> R CMD check --as-cran --> 1 ERROR, 1 NOTE
> 
> The error is in an example:
> 
>> benbad<-function(x, y){
>>    # y may be provided with different structures
>>    f<-(x-y)^2
>> } # very simple, but ...
>>
>> y<-1:10
>> x<-c(1)
>> cat("test benbad() with y=1:10, x=c(1)\n")
>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>> print(tryfc01)
>> print(fc01)
> 
> There's quite a lot of output, but it doesn't make much sense to me, as
> it refers to code that I didn't write.
> 
> The function fchk is attempting to check if functions provided for
> optimization do not violate some conditions e.g., character rather than
> numeric etc.
> 
> JN
> 
> 
> On 2019-06-07 8:44 a.m., J C Nash wrote:
>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>> Fri Jun 7 11:44:37 CEST 2019
>>
>>     Previous message (by thread): [R-pkg-devel] try() in R CMD check --as-cran
>>     Next message (by thread): [R-pkg-devel] using package data in package code
>>     Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>
>> Right, what problem are you talking about? Can you tell us which check
>> it is and what it actually complained about.
>> There is no check that looks at the sizes of x and y in exypressions
>> such as
>> (x - y)^2.
>> as far as I know.
>>
>> Best,
>> Uwe
>>
>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>
>>> Not entirely sure if this is what you're looking for:
>>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>> It does contain --as-cran a few times and there's the change-history:
>>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>
>>> Regards,
>>> Berry
>>>
>>>
>>> ________________________________
>>> From: R-package-devel <r-package-devel-bounces using r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>> Sent: Thursday, June 6, 2019 15:03
>>> To: List r-package-devel
>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>
>>> After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.
>>>
>>> To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
>>> a routine designed to check the call to the user objective function. In particular,
>>> one check is that the size of vectors is the same in expressions like (x - y)^2.
>>> This works fine with R CMD check, but the --as-cran seems to have changed and it
>>> pops an error, even when the call is inside try(). The irony that the routine in
>>> question is intended to avoid problems like this is not lost on me.
>>>
>>> I'm working on a small reproducible example, but it's not small enough yet.
>>> In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
>>> "R CMD check --as-cran" so I can work out why there is this difference, which seems
>>> to be recent.
>>>
>>> Can someone send/post a link? I plan to figure this out and provide feedback,
>>> as I suspect it is going to affect others. However, it may be a few days or even
>>> weeks if past experience is a guide.
>>>
>>> JN
>>>
>>> ______________________________________________
>>> R-package-devel using r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel using r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pro|jcn@@h @end|ng |rom gm@||@com  Fri Jun  7 15:46:40 2019
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 7 Jun 2019 09:46:40 -0400
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
Message-ID: <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>

Should try() not stop those checks from forcing an error?

I recognize that this is the failure -- it is indeed the check I'm trying to
catch -- but I don't want tests of such checks to fail my package.

JN

On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
> The failure stated in the R CMD check failure report is:
> 
>>  --- failure: length > 1 in coercion to logical ---
> 
> This comes from --as-cran performing useful extra checks via setting the
> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
> 
>> check if either argument of the binary operators && and || has length greater than one. 
> 
> (see https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
> 
> The failure report also states the source of the failure:
> 
>>  --- call from context --- 
>> fchk(x, benbad, trace = 3, y)
>>  --- call from argument --- 
>> is.infinite(fval) || is.na(fval)
> 
> The problem is that both is.infinite(fval) and is.na(fval) return
> vectors of length 10 in your test case:
> 
>>  --- value of length: 10 type: logical ---
>>  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
> 
> The || operator works on length 1 Booleans. Since fval can be of length
> greater than 1 at that point, the proper condition seems to be:
> 
> any(is.infinite(fval)) || any(is.na(fval))
> 
> Best regards,
> 
> 	Sebastian
> 
> 
> Am 07.06.19 um 14:53 schrieb J C Nash:
>> Sorry reply not quicker. For some reason I'm not getting anything in the thread I started!
>> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca please.
>>
>> I have prepared a tiny (2.8K) package at
>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>
>> R CMD check --> OK
>>
>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>
>> The error is in an example:
>>
>>> benbad<-function(x, y){
>>>    # y may be provided with different structures
>>>    f<-(x-y)^2
>>> } # very simple, but ...
>>>
>>> y<-1:10
>>> x<-c(1)
>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>> print(tryfc01)
>>> print(fc01)
>>
>> There's quite a lot of output, but it doesn't make much sense to me, as
>> it refers to code that I didn't write.
>>
>> The function fchk is attempting to check if functions provided for
>> optimization do not violate some conditions e.g., character rather than
>> numeric etc.
>>
>> JN
>>
>>
>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>> Fri Jun 7 11:44:37 CEST 2019
>>>
>>>     Previous message (by thread): [R-pkg-devel] try() in R CMD check --as-cran
>>>     Next message (by thread): [R-pkg-devel] using package data in package code
>>>     Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>>
>>> Right, what problem are you talking about? Can you tell us which check
>>> it is and what it actually complained about.
>>> There is no check that looks at the sizes of x and y in exypressions
>>> such as
>>> (x - y)^2.
>>> as far as I know.
>>>
>>> Best,
>>> Uwe
>>>
>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>>
>>>> Not entirely sure if this is what you're looking for:
>>>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>>> It does contain --as-cran a few times and there's the change-history:
>>>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>>
>>>> Regards,
>>>> Berry
>>>>
>>>>
>>>> ________________________________
>>>> From: R-package-devel <r-package-devel-bounces using r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>>> Sent: Thursday, June 6, 2019 15:03
>>>> To: List r-package-devel
>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>>
>>>> After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.
>>>>
>>>> To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
>>>> a routine designed to check the call to the user objective function. In particular,
>>>> one check is that the size of vectors is the same in expressions like (x - y)^2.
>>>> This works fine with R CMD check, but the --as-cran seems to have changed and it
>>>> pops an error, even when the call is inside try(). The irony that the routine in
>>>> question is intended to avoid problems like this is not lost on me.
>>>>
>>>> I'm working on a small reproducible example, but it's not small enough yet.
>>>> In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
>>>> "R CMD check --as-cran" so I can work out why there is this difference, which seems
>>>> to be recent.
>>>>
>>>> Can someone send/post a link? I plan to figure this out and provide feedback,
>>>> as I suspect it is going to affect others. However, it may be a few days or even
>>>> weeks if past experience is a guide.
>>>>
>>>> JN
>>>>
>>>> ______________________________________________
>>>> R-package-devel using r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>> 	[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel using r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @ergue|@@oko| @end|ng |rom gm@||@com  Fri Jun  7 15:47:47 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Fri, 7 Jun 2019 15:47:47 +0200
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
Message-ID: <3661a7ff-ad0b-c191-85e3-1ca930ae0add@gmail.com>

On 07/06/2019 14:53, J C Nash wrote:
> Sorry reply not quicker. For some reason I'm not getting anything in the thread I started!
> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca please.
> 
> I have prepared a tiny (2.8K) package at
> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
> 
> R CMD check --> OK
> 
> R CMD check --as-cran --> 1 ERROR, 1 NOTE
> 
> The error is in an example:
> 
>> benbad<-function(x, y){
>>     # y may be provided with different structures
>>     f<-(x-y)^2
>> } # very simple, but ...
>>
>> y<-1:10
>> x<-c(1)
The faulty line in fchk() seems to be

if (is.infinite(fval) || is.na(fval)) { ... }

As fval is now allowed to be a vector, it conflicts with '||' operator 
which, as you know, expects scalar logical values. If you replace this 
line with something like:

if (any(is.infinite(fval) | is.na(fval))) { ... }
is gone even with --as-cran option used. In my opinion (even if nobody 
asks for it ;) ), it is fortunate that this option is picky enough about 
such kind of misuse of logical operators.

Best,
Serguei.

>> cat("test benbad() with y=1:10, x=c(1)\n")
>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>> print(tryfc01)
>> print(fc01)
> 
> There's quite a lot of output, but it doesn't make much sense to me, as
> it refers to code that I didn't write.
> 
> The function fchk is attempting to check if functions provided for
> optimization do not violate some conditions e.g., character rather than
> numeric etc.
> 
> JN
> 
> 
> On 2019-06-07 8:44 a.m., J C Nash wrote:
>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>> Fri Jun 7 11:44:37 CEST 2019
>>
>>      Previous message (by thread): [R-pkg-devel] try() in R CMD check --as-cran
>>      Next message (by thread): [R-pkg-devel] using package data in package code
>>      Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>
>> Right, what problem are you talking about? Can you tell us which check
>> it is and what it actually complained about.
>> There is no check that looks at the sizes of x and y in exypressions
>> such as
>> (x - y)^2.
>> as far as I know.
>>
>> Best,
>> Uwe
>>
>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>
>>> Not entirely sure if this is what you're looking for:
>>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>> It does contain --as-cran a few times and there's the change-history:
>>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>
>>> Regards,
>>> Berry
>>>
>>>
>>> ________________________________
>>> From: R-package-devel <r-package-devel-bounces using r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>> Sent: Thursday, June 6, 2019 15:03
>>> To: List r-package-devel
>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>
>>> After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.
>>>
>>> To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
>>> a routine designed to check the call to the user objective function. In particular,
>>> one check is that the size of vectors is the same in expressions like (x - y)^2.
>>> This works fine with R CMD check, but the --as-cran seems to have changed and it
>>> pops an error, even when the call is inside try(). The irony that the routine in
>>> question is intended to avoid problems like this is not lost on me.
>>>
>>> I'm working on a small reproducible example, but it's not small enough yet.
>>> In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
>>> "R CMD check --as-cran" so I can work out why there is this difference, which seems
>>> to be recent.
>>>
>>> Can someone send/post a link? I plan to figure this out and provide feedback,
>>> as I suspect it is going to affect others. However, it may be a few days or even
>>> weeks if past experience is a guide.
>>>
>>> JN
>>>
>>> ______________________________________________
>>> R-package-devel using r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel using r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @ergue|@@oko| @end|ng |rom gm@||@com  Fri Jun  7 15:51:29 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Fri, 7 Jun 2019 15:51:29 +0200
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
Message-ID: <26a11e9d-3a32-8e99-8219-c87cdea401dc@gmail.com>

On 07/06/2019 15:31, Sebastian Meyer wrote:
> The failure stated in the R CMD check failure report is:
> 
>>   --- failure: length > 1 in coercion to logical ---
> 
> This comes from --as-cran performing useful extra checks via setting the
> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
> 
>> check if either argument of the binary operators && and || has length greater than one.
> 
> (see https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
> 
> The failure report also states the source of the failure:
> 
>>   --- call from context ---
>> fchk(x, benbad, trace = 3, y)
>>   --- call from argument ---
>> is.infinite(fval) || is.na(fval)
> 
> The problem is that both is.infinite(fval) and is.na(fval) return
> vectors of length 10 in your test case:
> 
>>   --- value of length: 10 type: logical ---
>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
> 
> The || operator works on length 1 Booleans. Since fval can be of length
> greater than 1 at that point, the proper condition seems to be:
> 
> any(is.infinite(fval)) || any(is.na(fval))
a little typo here: it should be '|', not '||', right ?

Best,
Serguei.

> Am 07.06.19 um 14:53 schrieb J C Nash:
>> Sorry reply not quicker. For some reason I'm not getting anything in the thread I started!
>> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca please.
>>
>> I have prepared a tiny (2.8K) package at
>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>
>> R CMD check --> OK
>>
>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>
>> The error is in an example:
>>
>>> benbad<-function(x, y){
>>>     # y may be provided with different structures
>>>     f<-(x-y)^2
>>> } # very simple, but ...
>>>
>>> y<-1:10
>>> x<-c(1)
>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>> print(tryfc01)
>>> print(fc01)
>>
>> There's quite a lot of output, but it doesn't make much sense to me, as
>> it refers to code that I didn't write.
>>
>> The function fchk is attempting to check if functions provided for
>> optimization do not violate some conditions e.g., character rather than
>> numeric etc.
>>
>> JN
>>
>>
>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>> Fri Jun 7 11:44:37 CEST 2019
>>>
>>>      Previous message (by thread): [R-pkg-devel] try() in R CMD check --as-cran
>>>      Next message (by thread): [R-pkg-devel] using package data in package code
>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>>
>>> Right, what problem are you talking about? Can you tell us which check
>>> it is and what it actually complained about.
>>> There is no check that looks at the sizes of x and y in exypressions
>>> such as
>>> (x - y)^2.
>>> as far as I know.
>>>
>>> Best,
>>> Uwe
>>>
>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>>
>>>> Not entirely sure if this is what you're looking for:
>>>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>>> It does contain --as-cran a few times and there's the change-history:
>>>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>>
>>>> Regards,
>>>> Berry
>>>>
>>>>
>>>> ________________________________
>>>> From: R-package-devel <r-package-devel-bounces using r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>>> Sent: Thursday, June 6, 2019 15:03
>>>> To: List r-package-devel
>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>>
>>>> After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.
>>>>
>>>> To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
>>>> a routine designed to check the call to the user objective function. In particular,
>>>> one check is that the size of vectors is the same in expressions like (x - y)^2.
>>>> This works fine with R CMD check, but the --as-cran seems to have changed and it
>>>> pops an error, even when the call is inside try(). The irony that the routine in
>>>> question is intended to avoid problems like this is not lost on me.
>>>>
>>>> I'm working on a small reproducible example, but it's not small enough yet.
>>>> In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
>>>> "R CMD check --as-cran" so I can work out why there is this difference, which seems
>>>> to be recent.
>>>>
>>>> Can someone send/post a link? I plan to figure this out and provide feedback,
>>>> as I suspect it is going to affect others. However, it may be a few days or even
>>>> weeks if past experience is a guide.
>>>>
>>>> JN
>>>>
>>>> ______________________________________________
>>>> R-package-devel using r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>> 	[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel using r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jun  7 16:05:54 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 07 Jun 2019 07:05:54 -0700
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <26a11e9d-3a32-8e99-8219-c87cdea401dc@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <26a11e9d-3a32-8e99-8219-c87cdea401dc@gmail.com>
Message-ID: <1A3F080C-A1E3-4197-9AD4-6444DD35F7A2@dcn.davis.ca.us>

>> any(is.infinite(fval)) || any(is.na(fval))
>
>a little typo here: it should be '|', not '||', right ?

Since `any` collapses the vectors to length 1 either will work, but I would prefer `||`.

On June 7, 2019 6:51:29 AM PDT, Serguei Sokol <serguei.sokol at gmail.com> wrote:
>On 07/06/2019 15:31, Sebastian Meyer wrote:
>> The failure stated in the R CMD check failure report is:
>> 
>>>   --- failure: length > 1 in coercion to logical ---
>> 
>> This comes from --as-cran performing useful extra checks via setting
>the
>> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>> 
>>> check if either argument of the binary operators && and || has
>length greater than one.
>> 
>> (see
>https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>> 
>> The failure report also states the source of the failure:
>> 
>>>   --- call from context ---
>>> fchk(x, benbad, trace = 3, y)
>>>   --- call from argument ---
>>> is.infinite(fval) || is.na(fval)
>> 
>> The problem is that both is.infinite(fval) and is.na(fval) return
>> vectors of length 10 in your test case:
>> 
>>>   --- value of length: 10 type: logical ---
>>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>> 
>> The || operator works on length 1 Booleans. Since fval can be of
>length
>> greater than 1 at that point, the proper condition seems to be:
>> 
>> any(is.infinite(fval)) || any(is.na(fval))
>a little typo here: it should be '|', not '||', right ?
>
>Best,
>Serguei.
>
>> Am 07.06.19 um 14:53 schrieb J C Nash:
>>> Sorry reply not quicker. For some reason I'm not getting anything in
>the thread I started!
>>> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca
>please.
>>>
>>> I have prepared a tiny (2.8K) package at
>>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>>
>>> R CMD check --> OK
>>>
>>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>>
>>> The error is in an example:
>>>
>>>> benbad<-function(x, y){
>>>>     # y may be provided with different structures
>>>>     f<-(x-y)^2
>>>> } # very simple, but ...
>>>>
>>>> y<-1:10
>>>> x<-c(1)
>>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>>> print(tryfc01)
>>>> print(fc01)
>>>
>>> There's quite a lot of output, but it doesn't make much sense to me,
>as
>>> it refers to code that I didn't write.
>>>
>>> The function fchk is attempting to check if functions provided for
>>> optimization do not violate some conditions e.g., character rather
>than
>>> numeric etc.
>>>
>>> JN
>>>
>>>
>>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>>> Fri Jun 7 11:44:37 CEST 2019
>>>>
>>>>      Previous message (by thread): [R-pkg-devel] try() in R CMD
>check --as-cran
>>>>      Next message (by thread): [R-pkg-devel] using package data in
>package code
>>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>>>
>>>> Right, what problem are you talking about? Can you tell us which
>check
>>>> it is and what it actually complained about.
>>>> There is no check that looks at the sizes of x and y in
>exypressions
>>>> such as
>>>> (x - y)^2.
>>>> as far as I know.
>>>>
>>>> Best,
>>>> Uwe
>>>>
>>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>>>
>>>>> Not entirely sure if this is what you're looking for:
>>>>>
>https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>>>> It does contain --as-cran a few times and there's the
>change-history:
>>>>>
>https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>>>
>>>>> Regards,
>>>>> Berry
>>>>>
>>>>>
>>>>> ________________________________
>>>>> From: R-package-devel <r-package-devel-bounces using
>r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>>>> Sent: Thursday, June 6, 2019 15:03
>>>>> To: List r-package-devel
>>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>>>
>>>>> After making a small fix to my optimx package, I ran my usual R
>CMD check --as-cran.
>>>>>
>>>>> To my surprise, I got two ERRORs unrelated to the change. The
>errors popped up in
>>>>> a routine designed to check the call to the user objective
>function. In particular,
>>>>> one check is that the size of vectors is the same in expressions
>like (x - y)^2.
>>>>> This works fine with R CMD check, but the --as-cran seems to have
>changed and it
>>>>> pops an error, even when the call is inside try(). The irony that
>the routine in
>>>>> question is intended to avoid problems like this is not lost on
>me.
>>>>>
>>>>> I'm working on a small reproducible example, but it's not small
>enough yet.
>>>>> In the meantime, I'm looking for the source codes of the scripts
>for "R CMD check" and
>>>>> "R CMD check --as-cran" so I can work out why there is this
>difference, which seems
>>>>> to be recent.
>>>>>
>>>>> Can someone send/post a link? I plan to figure this out and
>provide feedback,
>>>>> as I suspect it is going to affect others. However, it may be a
>few days or even
>>>>> weeks if past experience is a guide.
>>>>>
>>>>> JN
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel using r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>> 	[[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel using r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From @ergue|@@oko| @end|ng |rom gm@||@com  Fri Jun  7 16:09:21 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Fri, 7 Jun 2019 16:09:21 +0200
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <1A3F080C-A1E3-4197-9AD4-6444DD35F7A2@dcn.davis.ca.us>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <26a11e9d-3a32-8e99-8219-c87cdea401dc@gmail.com>
 <1A3F080C-A1E3-4197-9AD4-6444DD35F7A2@dcn.davis.ca.us>
Message-ID: <5637ded3-7f4a-b407-6a4e-2f7f28505f81@gmail.com>

On 07/06/2019 16:05, Jeff Newmiller wrote:
>>> any(is.infinite(fval)) || any(is.na(fval))
>>
>> a little typo here: it should be '|', not '||', right ?
> 
> Since `any` collapses the vectors to length 1 either will work, but I would prefer `||`.
You are right, I missed the second 'any()' at the first glance. I read 
it as 'any(v1 || v2)'. My bad.

> 
> On June 7, 2019 6:51:29 AM PDT, Serguei Sokol <serguei.sokol at gmail.com> wrote:
>> On 07/06/2019 15:31, Sebastian Meyer wrote:
>>> The failure stated in the R CMD check failure report is:
>>>
>>>>    --- failure: length > 1 in coercion to logical ---
>>>
>>> This comes from --as-cran performing useful extra checks via setting
>> the
>>> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>>>
>>>> check if either argument of the binary operators && and || has
>> length greater than one.
>>>
>>> (see
>> https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>>>
>>> The failure report also states the source of the failure:
>>>
>>>>    --- call from context ---
>>>> fchk(x, benbad, trace = 3, y)
>>>>    --- call from argument ---
>>>> is.infinite(fval) || is.na(fval)
>>>
>>> The problem is that both is.infinite(fval) and is.na(fval) return
>>> vectors of length 10 in your test case:
>>>
>>>>    --- value of length: 10 type: logical ---
>>>>    [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> The || operator works on length 1 Booleans. Since fval can be of
>> length
>>> greater than 1 at that point, the proper condition seems to be:
>>>
>>> any(is.infinite(fval)) || any(is.na(fval))
>> a little typo here: it should be '|', not '||', right ?
>>
>> Best,
>> Serguei.
>>
>>> Am 07.06.19 um 14:53 schrieb J C Nash:
>>>> Sorry reply not quicker. For some reason I'm not getting anything in
>> the thread I started!
>>>> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca
>> please.
>>>>
>>>> I have prepared a tiny (2.8K) package at
>>>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>>>
>>>> R CMD check --> OK
>>>>
>>>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>>>
>>>> The error is in an example:
>>>>
>>>>> benbad<-function(x, y){
>>>>>      # y may be provided with different structures
>>>>>      f<-(x-y)^2
>>>>> } # very simple, but ...
>>>>>
>>>>> y<-1:10
>>>>> x<-c(1)
>>>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>>>> print(tryfc01)
>>>>> print(fc01)
>>>>
>>>> There's quite a lot of output, but it doesn't make much sense to me,
>> as
>>>> it refers to code that I didn't write.
>>>>
>>>> The function fchk is attempting to check if functions provided for
>>>> optimization do not violate some conditions e.g., character rather
>> than
>>>> numeric etc.
>>>>
>>>> JN
>>>>
>>>>
>>>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>>>> Fri Jun 7 11:44:37 CEST 2019
>>>>>
>>>>>       Previous message (by thread): [R-pkg-devel] try() in R CMD
>> check --as-cran
>>>>>       Next message (by thread): [R-pkg-devel] using package data in
>> package code
>>>>>       Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>>>>
>>>>> Right, what problem are you talking about? Can you tell us which
>> check
>>>>> it is and what it actually complained about.
>>>>> There is no check that looks at the sizes of x and y in
>> exypressions
>>>>> such as
>>>>> (x - y)^2.
>>>>> as far as I know.
>>>>>
>>>>> Best,
>>>>> Uwe
>>>>>
>>>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>>>>
>>>>>> Not entirely sure if this is what you're looking for:
>>>>>>
>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>>>>> It does contain --as-cran a few times and there's the
>> change-history:
>>>>>>
>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>>>>
>>>>>> Regards,
>>>>>> Berry
>>>>>>
>>>>>>
>>>>>> ________________________________
>>>>>> From: R-package-devel <r-package-devel-bounces using
>> r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>>>>> Sent: Thursday, June 6, 2019 15:03
>>>>>> To: List r-package-devel
>>>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>>>>
>>>>>> After making a small fix to my optimx package, I ran my usual R
>> CMD check --as-cran.
>>>>>>
>>>>>> To my surprise, I got two ERRORs unrelated to the change. The
>> errors popped up in
>>>>>> a routine designed to check the call to the user objective
>> function. In particular,
>>>>>> one check is that the size of vectors is the same in expressions
>> like (x - y)^2.
>>>>>> This works fine with R CMD check, but the --as-cran seems to have
>> changed and it
>>>>>> pops an error, even when the call is inside try(). The irony that
>> the routine in
>>>>>> question is intended to avoid problems like this is not lost on
>> me.
>>>>>>
>>>>>> I'm working on a small reproducible example, but it's not small
>> enough yet.
>>>>>> In the meantime, I'm looking for the source codes of the scripts
>> for "R CMD check" and
>>>>>> "R CMD check --as-cran" so I can work out why there is this
>> difference, which seems
>>>>>> to be recent.
>>>>>>
>>>>>> Can someone send/post a link? I plan to figure this out and
>> provide feedback,
>>>>>> as I suspect it is going to affect others. However, it may be a
>> few days or even
>>>>>> weeks if past experience is a guide.
>>>>>>
>>>>>> JN
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel using r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>> 	[[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel using r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pro|jcn@@h @end|ng |rom gm@||@com  Fri Jun  7 16:18:36 2019
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 7 Jun 2019 10:18:36 -0400
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <1A3F080C-A1E3-4197-9AD4-6444DD35F7A2@dcn.davis.ca.us>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <26a11e9d-3a32-8e99-8219-c87cdea401dc@gmail.com>
 <1A3F080C-A1E3-4197-9AD4-6444DD35F7A2@dcn.davis.ca.us>
Message-ID: <8b7494d9-521e-3c15-055c-5030b4a1b1b6@gmail.com>

Serguei picked up the glitch and Jeff sorted out the || vs | once any()
was used.

The test that caused the issue was not the one I was looking for,
but another case. However, I'd overlooked the possibility that
there could be different lengths, so || complained (as it should,
but didn't in regular R CMD check).

As an aside, the --as-cran check complains as follows:

The The Title field should be in title case. Current version is:
?A test of R CMD check --as-cran?
In title case that is:
?A Test of R CMD Check --as-Cran?

Thanks to all.

JN


On 2019-06-07 10:05 a.m., Jeff Newmiller wrote:
>>> any(is.infinite(fval)) || any(is.na(fval))
>>
>> a little typo here: it should be '|', not '||', right ?
> 
> Since `any` collapses the vectors to length 1 either will work, but I would prefer `||`.
> 
> On June 7, 2019 6:51:29 AM PDT, Serguei Sokol <serguei.sokol at gmail.com> wrote:
>> On 07/06/2019 15:31, Sebastian Meyer wrote:
>>> The failure stated in the R CMD check failure report is:
>>>
>>>>   --- failure: length > 1 in coercion to logical ---
>>>
>>> This comes from --as-cran performing useful extra checks via setting
>> the
>>> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>>>
>>>> check if either argument of the binary operators && and || has
>> length greater than one.
>>>
>>> (see
>> https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>>>
>>> The failure report also states the source of the failure:
>>>
>>>>   --- call from context ---
>>>> fchk(x, benbad, trace = 3, y)
>>>>   --- call from argument ---
>>>> is.infinite(fval) || is.na(fval)
>>>
>>> The problem is that both is.infinite(fval) and is.na(fval) return
>>> vectors of length 10 in your test case:
>>>
>>>>   --- value of length: 10 type: logical ---
>>>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> The || operator works on length 1 Booleans. Since fval can be of
>> length
>>> greater than 1 at that point, the proper condition seems to be:
>>>
>>> any(is.infinite(fval)) || any(is.na(fval))
>> a little typo here: it should be '|', not '||', right ?
>>
>> Best,
>> Serguei.
>>
>>> Am 07.06.19 um 14:53 schrieb J C Nash:
>>>> Sorry reply not quicker. For some reason I'm not getting anything in
>> the thread I started!
>>>> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca
>> please.
>>>>
>>>> I have prepared a tiny (2.8K) package at
>>>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>>>
>>>> R CMD check --> OK
>>>>
>>>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>>>
>>>> The error is in an example:
>>>>
>>>>> benbad<-function(x, y){
>>>>>     # y may be provided with different structures
>>>>>     f<-(x-y)^2
>>>>> } # very simple, but ...
>>>>>
>>>>> y<-1:10
>>>>> x<-c(1)
>>>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>>>> print(tryfc01)
>>>>> print(fc01)
>>>>
>>>> There's quite a lot of output, but it doesn't make much sense to me,
>> as
>>>> it refers to code that I didn't write.
>>>>
>>>> The function fchk is attempting to check if functions provided for
>>>> optimization do not violate some conditions e.g., character rather
>> than
>>>> numeric etc.
>>>>
>>>> JN
>>>>
>>>>
>>>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>>>> Fri Jun 7 11:44:37 CEST 2019
>>>>>
>>>>>      Previous message (by thread): [R-pkg-devel] try() in R CMD
>> check --as-cran
>>>>>      Next message (by thread): [R-pkg-devel] using package data in
>> package code
>>>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>>>>
>>>>> Right, what problem are you talking about? Can you tell us which
>> check
>>>>> it is and what it actually complained about.
>>>>> There is no check that looks at the sizes of x and y in
>> exypressions
>>>>> such as
>>>>> (x - y)^2.
>>>>> as far as I know.
>>>>>
>>>>> Best,
>>>>> Uwe
>>>>>
>>>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>>>>
>>>>>> Not entirely sure if this is what you're looking for:
>>>>>>
>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>>>>> It does contain --as-cran a few times and there's the
>> change-history:
>>>>>>
>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>>>>
>>>>>> Regards,
>>>>>> Berry
>>>>>>
>>>>>>
>>>>>> ________________________________
>>>>>> From: R-package-devel <r-package-devel-bounces using
>> r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>>>>> Sent: Thursday, June 6, 2019 15:03
>>>>>> To: List r-package-devel
>>>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>>>>
>>>>>> After making a small fix to my optimx package, I ran my usual R
>> CMD check --as-cran.
>>>>>>
>>>>>> To my surprise, I got two ERRORs unrelated to the change. The
>> errors popped up in
>>>>>> a routine designed to check the call to the user objective
>> function. In particular,
>>>>>> one check is that the size of vectors is the same in expressions
>> like (x - y)^2.
>>>>>> This works fine with R CMD check, but the --as-cran seems to have
>> changed and it
>>>>>> pops an error, even when the call is inside try(). The irony that
>> the routine in
>>>>>> question is intended to avoid problems like this is not lost on
>> me.
>>>>>>
>>>>>> I'm working on a small reproducible example, but it's not small
>> enough yet.
>>>>>> In the meantime, I'm looking for the source codes of the scripts
>> for "R CMD check" and
>>>>>> "R CMD check --as-cran" so I can work out why there is this
>> difference, which seems
>>>>>> to be recent.
>>>>>>
>>>>>> Can someone send/post a link? I plan to figure this out and
>> provide feedback,
>>>>>> as I suspect it is going to affect others. However, it may be a
>> few days or even
>>>>>> weeks if past experience is a guide.
>>>>>>
>>>>>> JN
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel using r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>> 	[[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel using r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jun  7 16:47:13 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 7 Jun 2019 10:47:13 -0400
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
Message-ID: <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>

On 07/06/2019 9:46 a.m., J C Nash wrote:
> Should try() not stop those checks from forcing an error?

try(stop("msg"))  will print the error message, but won't stop 
execution.  Presumably the printed message is what is causing you 
problems.  If you want to suppress that, use

try(stop("msg"), silent = TRUE)

Duncan Murdoch

> 
> I recognize that this is the failure -- it is indeed the check I'm trying to
> catch -- but I don't want tests of such checks to fail my package.
> 
> JN
> 
> On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
>> The failure stated in the R CMD check failure report is:
>>
>>>   --- failure: length > 1 in coercion to logical ---
>>
>> This comes from --as-cran performing useful extra checks via setting the
>> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>>
>>> check if either argument of the binary operators && and || has length greater than one.
>>
>> (see https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>>
>> The failure report also states the source of the failure:
>>
>>>   --- call from context ---
>>> fchk(x, benbad, trace = 3, y)
>>>   --- call from argument ---
>>> is.infinite(fval) || is.na(fval)
>>
>> The problem is that both is.infinite(fval) and is.na(fval) return
>> vectors of length 10 in your test case:
>>
>>>   --- value of length: 10 type: logical ---
>>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>
>> The || operator works on length 1 Booleans. Since fval can be of length
>> greater than 1 at that point, the proper condition seems to be:
>>
>> any(is.infinite(fval)) || any(is.na(fval))
>>
>> Best regards,
>>
>> 	Sebastian
>>
>>
>> Am 07.06.19 um 14:53 schrieb J C Nash:
>>> Sorry reply not quicker. For some reason I'm not getting anything in the thread I started!
>>> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca please.
>>>
>>> I have prepared a tiny (2.8K) package at
>>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>>
>>> R CMD check --> OK
>>>
>>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>>
>>> The error is in an example:
>>>
>>>> benbad<-function(x, y){
>>>>     # y may be provided with different structures
>>>>     f<-(x-y)^2
>>>> } # very simple, but ...
>>>>
>>>> y<-1:10
>>>> x<-c(1)
>>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>>> print(tryfc01)
>>>> print(fc01)
>>>
>>> There's quite a lot of output, but it doesn't make much sense to me, as
>>> it refers to code that I didn't write.
>>>
>>> The function fchk is attempting to check if functions provided for
>>> optimization do not violate some conditions e.g., character rather than
>>> numeric etc.
>>>
>>> JN
>>>
>>>
>>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>>> Fri Jun 7 11:44:37 CEST 2019
>>>>
>>>>      Previous message (by thread): [R-pkg-devel] try() in R CMD check --as-cran
>>>>      Next message (by thread): [R-pkg-devel] using package data in package code
>>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>>>
>>>> Right, what problem are you talking about? Can you tell us which check
>>>> it is and what it actually complained about.
>>>> There is no check that looks at the sizes of x and y in exypressions
>>>> such as
>>>> (x - y)^2.
>>>> as far as I know.
>>>>
>>>> Best,
>>>> Uwe
>>>>
>>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>>>
>>>>> Not entirely sure if this is what you're looking for:
>>>>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>>>> It does contain --as-cran a few times and there's the change-history:
>>>>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>>>
>>>>> Regards,
>>>>> Berry
>>>>>
>>>>>
>>>>> ________________________________
>>>>> From: R-package-devel <r-package-devel-bounces using r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>>>> Sent: Thursday, June 6, 2019 15:03
>>>>> To: List r-package-devel
>>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>>>
>>>>> After making a small fix to my optimx package, I ran my usual R CMD check --as-cran.
>>>>>
>>>>> To my surprise, I got two ERRORs unrelated to the change. The errors popped up in
>>>>> a routine designed to check the call to the user objective function. In particular,
>>>>> one check is that the size of vectors is the same in expressions like (x - y)^2.
>>>>> This works fine with R CMD check, but the --as-cran seems to have changed and it
>>>>> pops an error, even when the call is inside try(). The irony that the routine in
>>>>> question is intended to avoid problems like this is not lost on me.
>>>>>
>>>>> I'm working on a small reproducible example, but it's not small enough yet.
>>>>> In the meantime, I'm looking for the source codes of the scripts for "R CMD check" and
>>>>> "R CMD check --as-cran" so I can work out why there is this difference, which seems
>>>>> to be recent.
>>>>>
>>>>> Can someone send/post a link? I plan to figure this out and provide feedback,
>>>>> as I suspect it is going to affect others. However, it may be a few days or even
>>>>> weeks if past experience is a guide.
>>>>>
>>>>> JN
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel using r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>> 	[[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel using r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tke|tt @end|ng |rom gm@||@com  Fri Jun  7 17:13:38 2019
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Fri, 7 Jun 2019 10:13:38 -0500
Subject: [R-pkg-devel] Travis/appveyor with CXX14/17
Message-ID: <CANnL8gqqf1bnexTeXP9njTTbpXymOLWEkZriQFOZcT7QhD+w3w@mail.gmail.com>

I bumped a package to CXX14/17 and it failed on Travis/Appveyor while
checking fine locally. I assume I need to request different compilers or
something like that. Anyone have a quick recipe for that?

THK

	[[alternative HTML version deleted]]


From @ergue|@@oko| @end|ng |rom gm@||@com  Fri Jun  7 17:19:47 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Fri, 7 Jun 2019 17:19:47 +0200
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
Message-ID: <94219c52-3aae-dd05-ef0b-0b962866b1fc@gmail.com>

On 07/06/2019 16:47, Duncan Murdoch wrote:
> On 07/06/2019 9:46 a.m., J C Nash wrote:
>> Should try() not stop those checks from forcing an error?
> 
> try(stop("msg"))? will print the error message, but won't stop 
> execution.? Presumably the printed message is what is causing you 
> problems.? If you want to suppress that, use
> 
> try(stop("msg"), silent = TRUE)
By curiosity, I tried but to no avail. Moreover, I have tried to trigger 
a similar error in different place by adding to the John's example in 
man/fchk.Rd the following code:

#... the same before
} # very simple, but ...

print(Sys.getenv("_R_CHECK_LENGTH_1_LOGIC2_", unset="unset"))
a=1:3 || 1:3
cat("a=", a, "\n")
y<-1:10
#... the same after.

add failed again. This part of code works without any error signaling 
while fchk()'s situation continue to flag up an error. From 
fchk-Ex.Rout, we can see:
...
+ } # very simple, but ...
 >
 > print(Sys.getenv("_R_CHECK_LENGTH_1_LOGIC2_", unset="unset"))
[1] "package:_R_CHECK_PACKAGE_NAME_,abort,verbose"
 > a=1:3 || 1:3
 > cat("a=", a, "\n")
a= TRUE
 > y<-1:10
...
Function evaluation returns a vector not a scalar
  ----------- FAILURE REPORT --------------
  --- failure: length > 1 in coercion to logical ---
...

While in regular R session:
 > Sys.unsetenv("_R_CHECK_LENGTH_1_LOGIC2_")
 > (a=1:3 || 1:3)
[1] TRUE
 > Sys.setenv("_R_CHECK_LENGTH_1_LOGIC2_"="")
 > (a=1:3 || 1:3)
Error in 1:3 || 1:3 : 'length(x) = 3 > 1' in coercion to 'logical(1)'

So, to my mind, 'a=1:3 || 1:3' should be considered as an error in a 
check with "--as-cran" but for some reason is not.

Both fchk with modified example and corresponding fchk-Ex.Rout are enclosed.

Best,
Serguei.

> 
> Duncan Murdoch
> 
>>
>> I recognize that this is the failure -- it is indeed the check I'm 
>> trying to
>> catch -- but I don't want tests of such checks to fail my package.
>>
>> JN
>>
>> On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
>>> The failure stated in the R CMD check failure report is:
>>>
>>>> ? --- failure: length > 1 in coercion to logical ---
>>>
>>> This comes from --as-cran performing useful extra checks via setting the
>>> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>>>
>>>> check if either argument of the binary operators && and || has 
>>>> length greater than one.
>>>
>>> (see https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>>>
>>> The failure report also states the source of the failure:
>>>
>>>> ? --- call from context ---
>>>> fchk(x, benbad, trace = 3, y)
>>>> ? --- call from argument ---
>>>> is.infinite(fval) || is.na(fval)
>>>
>>> The problem is that both is.infinite(fval) and is.na(fval) return
>>> vectors of length 10 in your test case:
>>>
>>>> ? --- value of length: 10 type: logical ---
>>>> ? [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>>
>>> The || operator works on length 1 Booleans. Since fval can be of length
>>> greater than 1 at that point, the proper condition seems to be:
>>>
>>> any(is.infinite(fval)) || any(is.na(fval))
>>>
>>> Best regards,
>>>
>>> ????Sebastian
>>>
>>>
>>> Am 07.06.19 um 14:53 schrieb J C Nash:
>>>> Sorry reply not quicker. For some reason I'm not getting anything in 
>>>> the thread I started!
>>>> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca 
>>>> please.
>>>>
>>>> I have prepared a tiny (2.8K) package at
>>>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>>>
>>>> R CMD check --> OK
>>>>
>>>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>>>
>>>> The error is in an example:
>>>>
>>>>> benbad<-function(x, y){
>>>>> ??? # y may be provided with different structures
>>>>> ??? f<-(x-y)^2
>>>>> } # very simple, but ...
>>>>>
>>>>> y<-1:10
>>>>> x<-c(1)
>>>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>>>> print(tryfc01)
>>>>> print(fc01)
>>>>
>>>> There's quite a lot of output, but it doesn't make much sense to me, as
>>>> it refers to code that I didn't write.
>>>>
>>>> The function fchk is attempting to check if functions provided for
>>>> optimization do not violate some conditions e.g., character rather than
>>>> numeric etc.
>>>>
>>>> JN
>>>>
>>>>
>>>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>>>> Fri Jun 7 11:44:37 CEST 2019
>>>>>
>>>>> ???? Previous message (by thread): [R-pkg-devel] try() in R CMD 
>>>>> check --as-cran
>>>>> ???? Next message (by thread): [R-pkg-devel] using package data in 
>>>>> package code
>>>>> ???? Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
>>>>>
>>>>> Right, what problem are you talking about? Can you tell us which check
>>>>> it is and what it actually complained about.
>>>>> There is no check that looks at the sizes of x and y in exypressions
>>>>> such as
>>>>> (x - y)^2.
>>>>> as far as I know.
>>>>>
>>>>> Best,
>>>>> Uwe
>>>>>
>>>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>>>>
>>>>>> Not entirely sure if this is what you're looking for:
>>>>>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R 
>>>>>>
>>>>>> It does contain --as-cran a few times and there's the change-history:
>>>>>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R 
>>>>>>
>>>>>>
>>>>>> Regards,
>>>>>> Berry
>>>>>>
>>>>>>
>>>>>> ________________________________
>>>>>> From: R-package-devel <r-package-devel-bounces using 
>>>>>> r-project.org> on behalf of J C Nash <profjcnash using gmail.com>
>>>>>> Sent: Thursday, June 6, 2019 15:03
>>>>>> To: List r-package-devel
>>>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>>>>
>>>>>> After making a small fix to my optimx package, I ran my usual R 
>>>>>> CMD check --as-cran.
>>>>>>
>>>>>> To my surprise, I got two ERRORs unrelated to the change. The 
>>>>>> errors popped up in
>>>>>> a routine designed to check the call to the user objective 
>>>>>> function. In particular,
>>>>>> one check is that the size of vectors is the same in expressions 
>>>>>> like (x - y)^2.
>>>>>> This works fine with R CMD check, but the --as-cran seems to have 
>>>>>> changed and it
>>>>>> pops an error, even when the call is inside try(). The irony that 
>>>>>> the routine in
>>>>>> question is intended to avoid problems like this is not lost on me.
>>>>>>
>>>>>> I'm working on a small reproducible example, but it's not small 
>>>>>> enough yet.
>>>>>> In the meantime, I'm looking for the source codes of the scripts 
>>>>>> for "R CMD check" and
>>>>>> "R CMD check --as-cran" so I can work out why there is this 
>>>>>> difference, which seems
>>>>>> to be recent.
>>>>>>
>>>>>> Can someone send/post a link? I plan to figure this out and 
>>>>>> provide feedback,
>>>>>> as I suspect it is going to affect others. However, it may be a 
>>>>>> few days or even
>>>>>> weeks if past experience is a guide.
>>>>>>
>>>>>> JN
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel using r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>> ????[[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel using r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


-------------- next part --------------
A non-text attachment was scrubbed...
Name: fchk_2019-6.5-1.tar.gz
Type: application/gzip
Size: 2924 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190607/f4595eec/attachment.gz>

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: fchk-Ex.Rout
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190607/f4595eec/attachment.ksh>

From edd @end|ng |rom deb|@n@org  Fri Jun  7 18:09:04 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 7 Jun 2019 11:09:04 -0500
Subject: [R-pkg-devel] Travis/appveyor with CXX14/17
In-Reply-To: <CANnL8gqqf1bnexTeXP9njTTbpXymOLWEkZriQFOZcT7QhD+w3w@mail.gmail.com>
References: <CANnL8gqqf1bnexTeXP9njTTbpXymOLWEkZriQFOZcT7QhD+w3w@mail.gmail.com>
Message-ID: <23802.35872.393986.441014@rob.eddelbuettel.com>


On 7 June 2019 at 10:13, Tim Keitt wrote:
| I bumped a package to CXX14/17 and it failed on Travis/Appveyor while
| checking fine locally. I assume I need to request different compilers or

Correct.

Working with a seriously outdated base layer of Ubuntu is a key bug^Hfeature
of Travis.  Maddening, really.

| something like that. Anyone have a quick recipe for that?

Yes.  In fact, two different ways.

i)  If you use the old Travis set up which is more shell-script alike, then
    one way is to use a PPA for nighlies/more current gcc or clang
    versions. I used to do that some client packages that needed newer
    compilers. An older example is still here

    https://github.com/eddelbuettel/cpptoml/blob/master/.travis.yml

ii) Screw Travis and use the fact that you can now bring your own Docker
    container.  That is much preferable as you are in _complete_ control of
    the test environment. I switched a few packages to this, particularly
    when they needed additional libraries which I was building / providing
    via a PPA anyway. Two examples:

      https://github.com/eddelbuettel/rquantlib/blob/master/.travis.yml
      https://github.com/rcppmlpack/rcppmlpack2/blob/master/.travis.yml

    If you don't need extra libraries then something like this container have
    R, recent toolchain and support for PPAs. I have been meaning to blog
    about it with an example:

      https://hub.docker.com/r/rocker/r-apt

    Obviously you can also start from vanilla Rocker's r-base, or any other
    Debian container.  Again,  your control, possibly also your initial work.

    A scheme I found helpful in a few repos is to create

      docker/ci/Dockerfile     -- base layer for CI, used by Travis
      docker/run/Dockerfile    -- above plus the actual repo code

    where the latter one is a simple container for users of the package.

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From wdun|@p @end|ng |rom t|bco@com  Fri Jun  7 18:32:52 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 7 Jun 2019 09:32:52 -0700
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
Message-ID: <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>

The length-condition-not-equal-to-one checks will cause R to shutdown even
if the code in a tryCatch().

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Jun 7, 2019 at 7:47 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 07/06/2019 9:46 a.m., J C Nash wrote:
> > Should try() not stop those checks from forcing an error?
>
> try(stop("msg"))  will print the error message, but won't stop
> execution.  Presumably the printed message is what is causing you
> problems.  If you want to suppress that, use
>
> try(stop("msg"), silent = TRUE)
>
> Duncan Murdoch
>
> >
> > I recognize that this is the failure -- it is indeed the check I'm
> trying to
> > catch -- but I don't want tests of such checks to fail my package.
> >
> > JN
> >
> > On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
> >> The failure stated in the R CMD check failure report is:
> >>
> >>>   --- failure: length > 1 in coercion to logical ---
> >>
> >> This comes from --as-cran performing useful extra checks via setting the
> >> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
> >>
> >>> check if either argument of the binary operators && and || has length
> greater than one.
> >>
> >> (see https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools
> )
> >>
> >> The failure report also states the source of the failure:
> >>
> >>>   --- call from context ---
> >>> fchk(x, benbad, trace = 3, y)
> >>>   --- call from argument ---
> >>> is.infinite(fval) || is.na(fval)
> >>
> >> The problem is that both is.infinite(fval) and is.na(fval) return
> >> vectors of length 10 in your test case:
> >>
> >>>   --- value of length: 10 type: logical ---
> >>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
> >>
> >> The || operator works on length 1 Booleans. Since fval can be of length
> >> greater than 1 at that point, the proper condition seems to be:
> >>
> >> any(is.infinite(fval)) || any(is.na(fval))
> >>
> >> Best regards,
> >>
> >>      Sebastian
> >>
> >>
> >> Am 07.06.19 um 14:53 schrieb J C Nash:
> >>> Sorry reply not quicker. For some reason I'm not getting anything in
> the thread I started!
> >>> I found the responses in the archives. Perhaps cc: nashjc at uottawa.ca
> please.
> >>>
> >>> I have prepared a tiny (2.8K) package at
> >>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
> >>>
> >>> R CMD check --> OK
> >>>
> >>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
> >>>
> >>> The error is in an example:
> >>>
> >>>> benbad<-function(x, y){
> >>>>     # y may be provided with different structures
> >>>>     f<-(x-y)^2
> >>>> } # very simple, but ...
> >>>>
> >>>> y<-1:10
> >>>> x<-c(1)
> >>>> cat("test benbad() with y=1:10, x=c(1)\n")
> >>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
> >>>> print(tryfc01)
> >>>> print(fc01)
> >>>
> >>> There's quite a lot of output, but it doesn't make much sense to me, as
> >>> it refers to code that I didn't write.
> >>>
> >>> The function fchk is attempting to check if functions provided for
> >>> optimization do not violate some conditions e.g., character rather than
> >>> numeric etc.
> >>>
> >>> JN
> >>>
> >>>
> >>> On 2019-06-07 8:44 a.m., J C Nash wrote:
> >>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
> >>>> Fri Jun 7 11:44:37 CEST 2019
> >>>>
> >>>>      Previous message (by thread): [R-pkg-devel] try() in R CMD check
> --as-cran
> >>>>      Next message (by thread): [R-pkg-devel] using package data in
> package code
> >>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]
> >>>>
> >>>> Right, what problem are you talking about? Can you tell us which check
> >>>> it is and what it actually complained about.
> >>>> There is no check that looks at the sizes of x and y in exypressions
> >>>> such as
> >>>> (x - y)^2.
> >>>> as far as I know.
> >>>>
> >>>> Best,
> >>>> Uwe
> >>>>
> >>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
> >>>>>
> >>>>> Not entirely sure if this is what you're looking for:
> >>>>>
> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
> >>>>> It does contain --as-cran a few times and there's the change-history:
> >>>>>
> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
> >>>>>
> >>>>> Regards,
> >>>>> Berry
> >>>>>
> >>>>>
> >>>>> ________________________________
> >>>>> From: R-package-devel <r-package-devel-bounces using r-project.org>
> on behalf of J C Nash <profjcnash using gmail.com>
> >>>>> Sent: Thursday, June 6, 2019 15:03
> >>>>> To: List r-package-devel
> >>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
> >>>>>
> >>>>> After making a small fix to my optimx package, I ran my usual R CMD
> check --as-cran.
> >>>>>
> >>>>> To my surprise, I got two ERRORs unrelated to the change. The errors
> popped up in
> >>>>> a routine designed to check the call to the user objective function.
> In particular,
> >>>>> one check is that the size of vectors is the same in expressions
> like (x - y)^2.
> >>>>> This works fine with R CMD check, but the --as-cran seems to have
> changed and it
> >>>>> pops an error, even when the call is inside try(). The irony that
> the routine in
> >>>>> question is intended to avoid problems like this is not lost on me.
> >>>>>
> >>>>> I'm working on a small reproducible example, but it's not small
> enough yet.
> >>>>> In the meantime, I'm looking for the source codes of the scripts for
> "R CMD check" and
> >>>>> "R CMD check --as-cran" so I can work out why there is this
> difference, which seems
> >>>>> to be recent.
> >>>>>
> >>>>> Can someone send/post a link? I plan to figure this out and provide
> feedback,
> >>>>> as I suspect it is going to affect others. However, it may be a few
> days or even
> >>>>> weeks if past experience is a guide.
> >>>>>
> >>>>> JN
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-package-devel using r-project.org mailing list
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>
> >>>>>   [[alternative HTML version deleted]]
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-package-devel using r-project.org mailing list
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>
> >>>>
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jun  7 19:20:59 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 7 Jun 2019 13:20:59 -0400
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
 <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>
Message-ID: <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>

On 07/06/2019 12:32 p.m., William Dunlap wrote:
> The length-condition-not-equal-to-one checks will cause R to shutdown 
> even if the code in a tryCatch().

That's strange.  I'm unable to reproduce it with my tries, and John's 
package is no longer online.  Do you have an example I could look at?

Duncan Murdoch

> 
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com <http://tibco.com>
> 
> 
> On Fri, Jun 7, 2019 at 7:47 AM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 07/06/2019 9:46 a.m., J C Nash wrote:
>      > Should try() not stop those checks from forcing an error?
> 
>     try(stop("msg"))? will print the error message, but won't stop
>     execution.? Presumably the printed message is what is causing you
>     problems.? If you want to suppress that, use
> 
>     try(stop("msg"), silent = TRUE)
> 
>     Duncan Murdoch
> 
>      >
>      > I recognize that this is the failure -- it is indeed the check
>     I'm trying to
>      > catch -- but I don't want tests of such checks to fail my package.
>      >
>      > JN
>      >
>      > On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
>      >> The failure stated in the R CMD check failure report is:
>      >>
>      >>>? ?--- failure: length > 1 in coercion to logical ---
>      >>
>      >> This comes from --as-cran performing useful extra checks via
>     setting the
>      >> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>      >>
>      >>> check if either argument of the binary operators && and || has
>     length greater than one.
>      >>
>      >> (see
>     https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>      >>
>      >> The failure report also states the source of the failure:
>      >>
>      >>>? ?--- call from context ---
>      >>> fchk(x, benbad, trace = 3, y)
>      >>>? ?--- call from argument ---
>      >>> is.infinite(fval) || is.na <http://is.na>(fval)
>      >>
>      >> The problem is that both is.infinite(fval) and is.na
>     <http://is.na>(fval) return
>      >> vectors of length 10 in your test case:
>      >>
>      >>>? ?--- value of length: 10 type: logical ---
>      >>>? ?[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>      >>
>      >> The || operator works on length 1 Booleans. Since fval can be of
>     length
>      >> greater than 1 at that point, the proper condition seems to be:
>      >>
>      >> any(is.infinite(fval)) || any(is.na <http://is.na>(fval))
>      >>
>      >> Best regards,
>      >>
>      >>? ? ? Sebastian
>      >>
>      >>
>      >> Am 07.06.19 um 14:53 schrieb J C Nash:
>      >>> Sorry reply not quicker. For some reason I'm not getting
>     anything in the thread I started!
>      >>> I found the responses in the archives. Perhaps cc:
>     nashjc at uottawa.ca <mailto:nashjc at uottawa.ca> please.
>      >>>
>      >>> I have prepared a tiny (2.8K) package at
>      >>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>      >>>
>      >>> R CMD check --> OK
>      >>>
>      >>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>      >>>
>      >>> The error is in an example:
>      >>>
>      >>>> benbad<-function(x, y){
>      >>>>? ? ?# y may be provided with different structures
>      >>>>? ? ?f<-(x-y)^2
>      >>>> } # very simple, but ...
>      >>>>
>      >>>> y<-1:10
>      >>>> x<-c(1)
>      >>>> cat("test benbad() with y=1:10, x=c(1)\n")
>      >>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>      >>>> print(tryfc01)
>      >>>> print(fc01)
>      >>>
>      >>> There's quite a lot of output, but it doesn't make much sense
>     to me, as
>      >>> it refers to code that I didn't write.
>      >>>
>      >>> The function fchk is attempting to check if functions provided for
>      >>> optimization do not violate some conditions e.g., character
>     rather than
>      >>> numeric etc.
>      >>>
>      >>> JN
>      >>>
>      >>>
>      >>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>      >>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>      >>>> Fri Jun 7 11:44:37 CEST 2019
>      >>>>
>      >>>>? ? ? Previous message (by thread): [R-pkg-devel] try() in R
>     CMD check --as-cran
>      >>>>? ? ? Next message (by thread): [R-pkg-devel] using package
>     data in package code
>      >>>>? ? ? Messages sorted by: [ date ] [ thread ] [ subject ] [
>     author ]
>      >>>>
>      >>>> Right, what problem are you talking about? Can you tell us
>     which check
>      >>>> it is and what it actually complained about.
>      >>>> There is no check that looks at the sizes of x and y in
>     exypressions
>      >>>> such as
>      >>>> (x - y)^2.
>      >>>> as far as I know.
>      >>>>
>      >>>> Best,
>      >>>> Uwe
>      >>>>
>      >>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>      >>>>>
>      >>>>> Not entirely sure if this is what you're looking for:
>      >>>>>
>     https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>      >>>>> It does contain --as-cran a few times and there's the
>     change-history:
>      >>>>>
>     https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>      >>>>>
>      >>>>> Regards,
>      >>>>> Berry
>      >>>>>
>      >>>>>
>      >>>>> ________________________________
>      >>>>> From: R-package-devel <r-package-devel-bounces using
>     r-project.org <http://r-project.org>> on behalf of J C Nash
>     <profjcnash using gmail.com <http://gmail.com>>
>      >>>>> Sent: Thursday, June 6, 2019 15:03
>      >>>>> To: List r-package-devel
>      >>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>      >>>>>
>      >>>>> After making a small fix to my optimx package, I ran my usual
>     R CMD check --as-cran.
>      >>>>>
>      >>>>> To my surprise, I got two ERRORs unrelated to the change. The
>     errors popped up in
>      >>>>> a routine designed to check the call to the user objective
>     function. In particular,
>      >>>>> one check is that the size of vectors is the same in
>     expressions like (x - y)^2.
>      >>>>> This works fine with R CMD check, but the --as-cran seems to
>     have changed and it
>      >>>>> pops an error, even when the call is inside try(). The irony
>     that the routine in
>      >>>>> question is intended to avoid problems like this is not lost
>     on me.
>      >>>>>
>      >>>>> I'm working on a small reproducible example, but it's not
>     small enough yet.
>      >>>>> In the meantime, I'm looking for the source codes of the
>     scripts for "R CMD check" and
>      >>>>> "R CMD check --as-cran" so I can work out why there is this
>     difference, which seems
>      >>>>> to be recent.
>      >>>>>
>      >>>>> Can someone send/post a link? I plan to figure this out and
>     provide feedback,
>      >>>>> as I suspect it is going to affect others. However, it may be
>     a few days or even
>      >>>>> weeks if past experience is a guide.
>      >>>>>
>      >>>>> JN
>      >>>>>
>      >>>>> ______________________________________________
>      >>>>> R-package-devel using r-project.org <http://r-project.org>
>     mailing list
>      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>>>
>      >>>>>? ?[[alternative HTML version deleted]]
>      >>>>>
>      >>>>> ______________________________________________
>      >>>>> R-package-devel using r-project.org <http://r-project.org>
>     mailing list
>      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>>>
>      >>>>
>      >>>
>      >>> ______________________________________________
>      >>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Jun  7 19:49:49 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Fri, 7 Jun 2019 10:49:49 -0700
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
 <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>
 <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>
Message-ID: <CAFDcVCRG2B6c2eJa_gD9obzyUVXMy8AG3ADuA9CcVHpwZNMmoA@mail.gmail.com>

Duncan and others, see one of Serguei comments above.  Specifically,
`R CMD check --as-cran` will set

  _R_CHECK_LENGTH_1_LOGIC2_="package:_R_CHECK_PACKAGE_NAME_,abort,verbose"

which will (i) check those coding mistakes only in the package that is
checked but not any of its dependencies, (ii) it will abort R on such
errors, and (iii) print verbose output.  I think this type of R CMD
check behavior only exists for '_R_CHECK_LENGTH_1_LOGIC2_' checks.
This is in contrast to:

  _R_CHECK_LENGTH_1_LOGIC2_=TRUE

which will produce an ordinary error condition that can be captured.

Example:

Sys.setenv("_R_CHECK_LENGTH_1_LOGIC2_" = "TRUE")
res <- tryCatch(c(TRUE, TRUE) && FALSE, error = identity)
str(res)
## List of 2
##  $ message: chr "'length(x) = 2 > 1' in coercion to 'logical(1)'"
##  $ call   : language c(TRUE, TRUE) && FALSE
##  - attr(*, "class")= chr [1:3] "simpleError" "error" "condition"


Sys.setenv("_R_CHECK_LENGTH_1_LOGIC2_" = "abort,verbose")
res <- tryCatch(c(TRUE, TRUE) && FALSE, error = identity)

 ----------- FAILURE REPORT --------------
 --- failure: length > 1 in coercion to logical ---
 --- srcref ---
:
 --- package (from environment) ---
package:stats
 --- call from context ---
doTryCatch(return(expr), name, parentenv, handler)
 --- call from argument ---
c(TRUE, TRUE) && FALSE
 --- R stacktrace ---
where 1: doTryCatch(return(expr), name, parentenv, handler)
where 2: tryCatchOne(expr, names, parentenv, handlers[[1L]])
where 3: tryCatchList(expr, classes, parentenv, handlers)
where 4: tryCatch(c(TRUE, TRUE) && FALSE, error = identity)

 --- value of length: 2 type: logical ---
[1] TRUE TRUE
 --- function from context ---
function (expr, name, parentenv, handler)
{
    .Internal(.addCondHands(name, list(handler), parentenv, environment(),
        FALSE))
    expr
}
<bytecode: 0x559818c0ce70>
<environment: 0x55981a72abc0>
 --- function search by body ---
 ----------- END OF FAILURE REPORT --------------
Fatal error: length > 1 in coercion to logical

[here R terminates]

/Henrik

On Fri, Jun 7, 2019 at 10:26 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 07/06/2019 12:32 p.m., William Dunlap wrote:
> > The length-condition-not-equal-to-one checks will cause R to shutdown
> > even if the code in a tryCatch().
>
> That's strange.  I'm unable to reproduce it with my tries, and John's
> package is no longer online.  Do you have an example I could look at?
>
> Duncan Murdoch
>
> >
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com <http://tibco.com>
> >
> >
> > On Fri, Jun 7, 2019 at 7:47 AM Duncan Murdoch <murdoch.duncan at gmail.com
> > <mailto:murdoch.duncan at gmail.com>> wrote:
> >
> >     On 07/06/2019 9:46 a.m., J C Nash wrote:
> >      > Should try() not stop those checks from forcing an error?
> >
> >     try(stop("msg"))  will print the error message, but won't stop
> >     execution.  Presumably the printed message is what is causing you
> >     problems.  If you want to suppress that, use
> >
> >     try(stop("msg"), silent = TRUE)
> >
> >     Duncan Murdoch
> >
> >      >
> >      > I recognize that this is the failure -- it is indeed the check
> >     I'm trying to
> >      > catch -- but I don't want tests of such checks to fail my package.
> >      >
> >      > JN
> >      >
> >      > On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
> >      >> The failure stated in the R CMD check failure report is:
> >      >>
> >      >>>   --- failure: length > 1 in coercion to logical ---
> >      >>
> >      >> This comes from --as-cran performing useful extra checks via
> >     setting the
> >      >> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
> >      >>
> >      >>> check if either argument of the binary operators && and || has
> >     length greater than one.
> >      >>
> >      >> (see
> >     https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
> >      >>
> >      >> The failure report also states the source of the failure:
> >      >>
> >      >>>   --- call from context ---
> >      >>> fchk(x, benbad, trace = 3, y)
> >      >>>   --- call from argument ---
> >      >>> is.infinite(fval) || is.na <http://is.na>(fval)
> >      >>
> >      >> The problem is that both is.infinite(fval) and is.na
> >     <http://is.na>(fval) return
> >      >> vectors of length 10 in your test case:
> >      >>
> >      >>>   --- value of length: 10 type: logical ---
> >      >>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
> >      >>
> >      >> The || operator works on length 1 Booleans. Since fval can be of
> >     length
> >      >> greater than 1 at that point, the proper condition seems to be:
> >      >>
> >      >> any(is.infinite(fval)) || any(is.na <http://is.na>(fval))
> >      >>
> >      >> Best regards,
> >      >>
> >      >>      Sebastian
> >      >>
> >      >>
> >      >> Am 07.06.19 um 14:53 schrieb J C Nash:
> >      >>> Sorry reply not quicker. For some reason I'm not getting
> >     anything in the thread I started!
> >      >>> I found the responses in the archives. Perhaps cc:
> >     nashjc at uottawa.ca <mailto:nashjc at uottawa.ca> please.
> >      >>>
> >      >>> I have prepared a tiny (2.8K) package at
> >      >>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
> >      >>>
> >      >>> R CMD check --> OK
> >      >>>
> >      >>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
> >      >>>
> >      >>> The error is in an example:
> >      >>>
> >      >>>> benbad<-function(x, y){
> >      >>>>     # y may be provided with different structures
> >      >>>>     f<-(x-y)^2
> >      >>>> } # very simple, but ...
> >      >>>>
> >      >>>> y<-1:10
> >      >>>> x<-c(1)
> >      >>>> cat("test benbad() with y=1:10, x=c(1)\n")
> >      >>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
> >      >>>> print(tryfc01)
> >      >>>> print(fc01)
> >      >>>
> >      >>> There's quite a lot of output, but it doesn't make much sense
> >     to me, as
> >      >>> it refers to code that I didn't write.
> >      >>>
> >      >>> The function fchk is attempting to check if functions provided for
> >      >>> optimization do not violate some conditions e.g., character
> >     rather than
> >      >>> numeric etc.
> >      >>>
> >      >>> JN
> >      >>>
> >      >>>
> >      >>> On 2019-06-07 8:44 a.m., J C Nash wrote:
> >      >>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
> >      >>>> Fri Jun 7 11:44:37 CEST 2019
> >      >>>>
> >      >>>>      Previous message (by thread): [R-pkg-devel] try() in R
> >     CMD check --as-cran
> >      >>>>      Next message (by thread): [R-pkg-devel] using package
> >     data in package code
> >      >>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [
> >     author ]
> >      >>>>
> >      >>>> Right, what problem are you talking about? Can you tell us
> >     which check
> >      >>>> it is and what it actually complained about.
> >      >>>> There is no check that looks at the sizes of x and y in
> >     exypressions
> >      >>>> such as
> >      >>>> (x - y)^2.
> >      >>>> as far as I know.
> >      >>>>
> >      >>>> Best,
> >      >>>> Uwe
> >      >>>>
> >      >>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
> >      >>>>>
> >      >>>>> Not entirely sure if this is what you're looking for:
> >      >>>>>
> >     https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
> >      >>>>> It does contain --as-cran a few times and there's the
> >     change-history:
> >      >>>>>
> >     https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
> >      >>>>>
> >      >>>>> Regards,
> >      >>>>> Berry
> >      >>>>>
> >      >>>>>
> >      >>>>> ________________________________
> >      >>>>> From: R-package-devel <r-package-devel-bounces using
> >     r-project.org <http://r-project.org>> on behalf of J C Nash
> >     <profjcnash using gmail.com <http://gmail.com>>
> >      >>>>> Sent: Thursday, June 6, 2019 15:03
> >      >>>>> To: List r-package-devel
> >      >>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
> >      >>>>>
> >      >>>>> After making a small fix to my optimx package, I ran my usual
> >     R CMD check --as-cran.
> >      >>>>>
> >      >>>>> To my surprise, I got two ERRORs unrelated to the change. The
> >     errors popped up in
> >      >>>>> a routine designed to check the call to the user objective
> >     function. In particular,
> >      >>>>> one check is that the size of vectors is the same in
> >     expressions like (x - y)^2.
> >      >>>>> This works fine with R CMD check, but the --as-cran seems to
> >     have changed and it
> >      >>>>> pops an error, even when the call is inside try(). The irony
> >     that the routine in
> >      >>>>> question is intended to avoid problems like this is not lost
> >     on me.
> >      >>>>>
> >      >>>>> I'm working on a small reproducible example, but it's not
> >     small enough yet.
> >      >>>>> In the meantime, I'm looking for the source codes of the
> >     scripts for "R CMD check" and
> >      >>>>> "R CMD check --as-cran" so I can work out why there is this
> >     difference, which seems
> >      >>>>> to be recent.
> >      >>>>>
> >      >>>>> Can someone send/post a link? I plan to figure this out and
> >     provide feedback,
> >      >>>>> as I suspect it is going to affect others. However, it may be
> >     a few days or even
> >      >>>>> weeks if past experience is a guide.
> >      >>>>>
> >      >>>>> JN
> >      >>>>>
> >      >>>>> ______________________________________________
> >      >>>>> R-package-devel using r-project.org <http://r-project.org>
> >     mailing list
> >      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >>>>>
> >      >>>>>   [[alternative HTML version deleted]]
> >      >>>>>
> >      >>>>> ______________________________________________
> >      >>>>> R-package-devel using r-project.org <http://r-project.org>
> >     mailing list
> >      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >>>>>
> >      >>>>
> >      >>>
> >      >>> ______________________________________________
> >      >>> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >>>
> >      >>
> >      >> ______________________________________________
> >      >> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >>
> >      >
> >      > ______________________________________________
> >      > R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >
> >
> >     ______________________________________________
> >     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> >     mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From wdun|@p @end|ng |rom t|bco@com  Fri Jun  7 19:53:08 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 7 Jun 2019 10:53:08 -0700
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
 <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>
 <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>
Message-ID: <CAF8bMcZ_bMxci-TMLCcBrgJu94jTPQc+bOCEiMXiZkBK46x5NQ@mail.gmail.com>

I've attached a package, ppp_0.1.tar.gz, which probably will not get
through to R-help, that illustrates this.
It contains one function which, by default, triggers a condition-length>1
issue:
   f <- function(x = 1:3)
   {
       if (x > 1) {
           x <- -x
       }
       stop("this function always gives an error")
   }
and the help file example is
   try(f())

Then
   env _R_CHECK_LENGTH_1_CONDITION_=abort,verbose R-3.6.0 CMD check
--as-cran ppp_0.1.tar.gz
results in
* checking examples ... ERROR
Running examples in ?ppp-Ex.R? failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: f
> ### Title: Cause an error
> ### Aliases: f
> ### Keywords: error
>
> ### ** Examples
>
> try(f())
 ----------- FAILURE REPORT --------------
 --- failure: the condition has length > 1 ---
 --- srcref ---
:
 --- package (from environment) ---
ppp
 --- call from context ---
f()
 --- call from argument ---
if (x > 1) {
    x <- -x
}
 --- R stacktrace ---
where 1: f()
where 2: doTryCatch(return(expr), name, parentenv, handler)
where 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
where 4: tryCatchList(expr, classes, parentenv, handlers)
where 5: tryCatch(expr, error = function(e) {
    call <- conditionCall(e)
    if (!is.null(call)) {
        if (identical(call[[1L]], quote(doTryCatch)))
            call <- sys.call(-4L)
        dcall <- deparse(call)[1L]
        prefix <- paste("Error in", dcall, ": ")
        LONG <- 75L
        sm <- strsplit(conditionMessage(e), "\n")[[1L]]
        w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")
        if (is.na(w))
            w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],
                type = "b")
        if (w > LONG)
            prefix <- paste0(prefix, "\n  ")
    }
    else prefix <- "Error : "
    msg <- paste0(prefix, conditionMessage(e), "\n")
    .Internal(seterrmessage(msg[1L]))
    if (!silent && isTRUE(getOption("show.error.messages"))) {
        cat(msg, file = outFile)
        .Internal(printDeferredWarnings())
    }
    invisible(structure(msg, class = "try-error", condition = e))
})
where 6: try(f())

 --- value of length: 3 type: logical ---
[1] FALSE  TRUE  TRUE
 --- function from context ---
function (x = 1:3)
{
    if (x > 1) {
        x <- -x
    }
    stop("this function always gives an error")
}
<bytecode: 0x4f413d0>
<environment: namespace:ppp>
 --- function search by body ---
Function f in namespace ppp has this body.
 ----------- END OF FAILURE REPORT --------------
Fatal error: the condition has length > 1
* checking PDF version of manual ... OK
* DONE

Status: 1 ERROR, 1 NOTE
See
  ?/tmp/bill/ppp.Rcheck/00check.log?
for details.
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Jun 7, 2019 at 10:21 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 07/06/2019 12:32 p.m., William Dunlap wrote:
> > The length-condition-not-equal-to-one checks will cause R to shutdown
> > even if the code in a tryCatch().
>
> That's strange.  I'm unable to reproduce it with my tries, and John's
> package is no longer online.  Do you have an example I could look at?
>
> Duncan Murdoch
>
> >
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com <http://tibco.com>
> >
> >
> > On Fri, Jun 7, 2019 at 7:47 AM Duncan Murdoch <murdoch.duncan at gmail.com
> > <mailto:murdoch.duncan at gmail.com>> wrote:
> >
> >     On 07/06/2019 9:46 a.m., J C Nash wrote:
> >      > Should try() not stop those checks from forcing an error?
> >
> >     try(stop("msg"))  will print the error message, but won't stop
> >     execution.  Presumably the printed message is what is causing you
> >     problems.  If you want to suppress that, use
> >
> >     try(stop("msg"), silent = TRUE)
> >
> >     Duncan Murdoch
> >
> >      >
> >      > I recognize that this is the failure -- it is indeed the check
> >     I'm trying to
> >      > catch -- but I don't want tests of such checks to fail my package.
> >      >
> >      > JN
> >      >
> >      > On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
> >      >> The failure stated in the R CMD check failure report is:
> >      >>
> >      >>>   --- failure: length > 1 in coercion to logical ---
> >      >>
> >      >> This comes from --as-cran performing useful extra checks via
> >     setting the
> >      >> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
> >      >>
> >      >>> check if either argument of the binary operators && and || has
> >     length greater than one.
> >      >>
> >      >> (see
> >     https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
> >      >>
> >      >> The failure report also states the source of the failure:
> >      >>
> >      >>>   --- call from context ---
> >      >>> fchk(x, benbad, trace = 3, y)
> >      >>>   --- call from argument ---
> >      >>> is.infinite(fval) || is.na <http://is.na>(fval)
> >      >>
> >      >> The problem is that both is.infinite(fval) and is.na
> >     <http://is.na>(fval) return
> >      >> vectors of length 10 in your test case:
> >      >>
> >      >>>   --- value of length: 10 type: logical ---
> >      >>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
> FALSE
> >      >>
> >      >> The || operator works on length 1 Booleans. Since fval can be of
> >     length
> >      >> greater than 1 at that point, the proper condition seems to be:
> >      >>
> >      >> any(is.infinite(fval)) || any(is.na <http://is.na>(fval))
> >      >>
> >      >> Best regards,
> >      >>
> >      >>      Sebastian
> >      >>
> >      >>
> >      >> Am 07.06.19 um 14:53 schrieb J C Nash:
> >      >>> Sorry reply not quicker. For some reason I'm not getting
> >     anything in the thread I started!
> >      >>> I found the responses in the archives. Perhaps cc:
> >     nashjc at uottawa.ca <mailto:nashjc at uottawa.ca> please.
> >      >>>
> >      >>> I have prepared a tiny (2.8K) package at
> >      >>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
> >      >>>
> >      >>> R CMD check --> OK
> >      >>>
> >      >>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
> >      >>>
> >      >>> The error is in an example:
> >      >>>
> >      >>>> benbad<-function(x, y){
> >      >>>>     # y may be provided with different structures
> >      >>>>     f<-(x-y)^2
> >      >>>> } # very simple, but ...
> >      >>>>
> >      >>>> y<-1:10
> >      >>>> x<-c(1)
> >      >>>> cat("test benbad() with y=1:10, x=c(1)\n")
> >      >>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
> >      >>>> print(tryfc01)
> >      >>>> print(fc01)
> >      >>>
> >      >>> There's quite a lot of output, but it doesn't make much sense
> >     to me, as
> >      >>> it refers to code that I didn't write.
> >      >>>
> >      >>> The function fchk is attempting to check if functions provided
> for
> >      >>> optimization do not violate some conditions e.g., character
> >     rather than
> >      >>> numeric etc.
> >      >>>
> >      >>> JN
> >      >>>
> >      >>>
> >      >>> On 2019-06-07 8:44 a.m., J C Nash wrote:
> >      >>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
> >      >>>> Fri Jun 7 11:44:37 CEST 2019
> >      >>>>
> >      >>>>      Previous message (by thread): [R-pkg-devel] try() in R
> >     CMD check --as-cran
> >      >>>>      Next message (by thread): [R-pkg-devel] using package
> >     data in package code
> >      >>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [
> >     author ]
> >      >>>>
> >      >>>> Right, what problem are you talking about? Can you tell us
> >     which check
> >      >>>> it is and what it actually complained about.
> >      >>>> There is no check that looks at the sizes of x and y in
> >     exypressions
> >      >>>> such as
> >      >>>> (x - y)^2.
> >      >>>> as far as I know.
> >      >>>>
> >      >>>> Best,
> >      >>>> Uwe
> >      >>>>
> >      >>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
> >      >>>>>
> >      >>>>> Not entirely sure if this is what you're looking for:
> >      >>>>>
> >
> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
> >      >>>>> It does contain --as-cran a few times and there's the
> >     change-history:
> >      >>>>>
> >
> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
> >      >>>>>
> >      >>>>> Regards,
> >      >>>>> Berry
> >      >>>>>
> >      >>>>>
> >      >>>>> ________________________________
> >      >>>>> From: R-package-devel <r-package-devel-bounces using
> >     r-project.org <http://r-project.org>> on behalf of J C Nash
> >     <profjcnash using gmail.com <http://gmail.com>>
> >      >>>>> Sent: Thursday, June 6, 2019 15:03
> >      >>>>> To: List r-package-devel
> >      >>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
> >      >>>>>
> >      >>>>> After making a small fix to my optimx package, I ran my usual
> >     R CMD check --as-cran.
> >      >>>>>
> >      >>>>> To my surprise, I got two ERRORs unrelated to the change. The
> >     errors popped up in
> >      >>>>> a routine designed to check the call to the user objective
> >     function. In particular,
> >      >>>>> one check is that the size of vectors is the same in
> >     expressions like (x - y)^2.
> >      >>>>> This works fine with R CMD check, but the --as-cran seems to
> >     have changed and it
> >      >>>>> pops an error, even when the call is inside try(). The irony
> >     that the routine in
> >      >>>>> question is intended to avoid problems like this is not lost
> >     on me.
> >      >>>>>
> >      >>>>> I'm working on a small reproducible example, but it's not
> >     small enough yet.
> >      >>>>> In the meantime, I'm looking for the source codes of the
> >     scripts for "R CMD check" and
> >      >>>>> "R CMD check --as-cran" so I can work out why there is this
> >     difference, which seems
> >      >>>>> to be recent.
> >      >>>>>
> >      >>>>> Can someone send/post a link? I plan to figure this out and
> >     provide feedback,
> >      >>>>> as I suspect it is going to affect others. However, it may be
> >     a few days or even
> >      >>>>> weeks if past experience is a guide.
> >      >>>>>
> >      >>>>> JN
> >      >>>>>
> >      >>>>> ______________________________________________
> >      >>>>> R-package-devel using r-project.org <http://r-project.org>
> >     mailing list
> >      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >>>>>
> >      >>>>>   [[alternative HTML version deleted]]
> >      >>>>>
> >      >>>>> ______________________________________________
> >      >>>>> R-package-devel using r-project.org <http://r-project.org>
> >     mailing list
> >      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >>>>>
> >      >>>>
> >      >>>
> >      >>> ______________________________________________
> >      >>> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >>>
> >      >>
> >      >> ______________________________________________
> >      >> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >>
> >      >
> >      > ______________________________________________
> >      > R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >
> >
> >     ______________________________________________
> >     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> >     mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ppp_0.1.tar.gz
Type: application/x-gzip
Size: 687 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190607/5ed94344/attachment.bin>

From pro|jcn@@h @end|ng |rom gm@||@com  Fri Jun  7 19:56:59 2019
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 7 Jun 2019 13:56:59 -0400
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <CAF8bMcZ_bMxci-TMLCcBrgJu94jTPQc+bOCEiMXiZkBK46x5NQ@mail.gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
 <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>
 <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>
 <CAF8bMcZ_bMxci-TMLCcBrgJu94jTPQc+bOCEiMXiZkBK46x5NQ@mail.gmail.com>
Message-ID: <6afd0d2e-53a8-95c8-6df5-22794348a223@gmail.com>

I've put my tiny package back up, but it likely is doing same
thing as Bill Dunlap's. I took it off as a cleanup when I thought
the issue resolved.

http://web.ncf.ca/fh448/jfiles/fchk_2019-6.5.tar.gz

Seems I've disturbed the ant's nest.

JN



On 2019-06-07 1:53 p.m., William Dunlap wrote:
> I've attached a package, ppp_0.1.tar.gz, which probably will not get through to R-help, that illustrates this.
> It contains one function which, by default, triggers a condition-length>1 issue:
> ? ?f <- function(x = 1:3)
> ? ?{
> ? ? ? ?if (x > 1) {
> ? ? ? ? ? ?x <- -x
> ? ? ? ?}
> ? ? ? ?stop("this function always gives an error")
> ? ?}
> and the help file example is
> ? ?try(f())
> 
> Then?
> ? ?env _R_CHECK_LENGTH_1_CONDITION_=abort,verbose R-3.6.0 CMD check --as-cran ppp_0.1.tar.gz
> results in
> * checking examples ... ERROR
> Running examples in ?ppp-Ex.R? failed
> The error most likely occurred in:
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ### Name: f
>> ### Title: Cause an error
>> ### Aliases: f
>> ### Keywords: error
>>
>> ### ** Examples
>>
>> try(f())
> ?----------- FAILURE REPORT --------------
> ?--- failure: the condition has length > 1 ---
> ?--- srcref ---
> :
> ?--- package (from environment) ---
> ppp
> ?--- call from context ---
> f()
> ?--- call from argument ---
> if (x > 1) {
> ? ? x <- -x
> }
> ?--- R stacktrace ---
> where 1: f()
> where 2: doTryCatch(return(expr), name, parentenv, handler)
> where 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> where 4: tryCatchList(expr, classes, parentenv, handlers)
> where 5: tryCatch(expr, error = function(e) {
> ? ? call <- conditionCall(e)
> ? ? if (!is.null(call)) {
> ? ? ? ? if (identical(call[[1L]], quote(doTryCatch)))
> ? ? ? ? ? ? call <- sys.call(-4L)
> ? ? ? ? dcall <- deparse(call)[1L]
> ? ? ? ? prefix <- paste("Error in", dcall, ": ")
> ? ? ? ? LONG <- 75L
> ? ? ? ? sm <- strsplit(conditionMessage(e), "\n")[[1L]]
> ? ? ? ? w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")
> ? ? ? ? if (is.na <http://is.na>(w))
> ? ? ? ? ? ? w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],
> ? ? ? ? ? ? ? ? type = "b")
> ? ? ? ? if (w > LONG)
> ? ? ? ? ? ? prefix <- paste0(prefix, "\n ?")
> ? ? }
> ? ? else prefix <- "Error : "
> ? ? msg <- paste0(prefix, conditionMessage(e), "\n")
> ? ? .Internal(seterrmessage(msg[1L]))
> ? ? if (!silent && isTRUE(getOption("show.error.messages"))) {
> ? ? ? ? cat(msg, file = outFile)
> ? ? ? ? .Internal(printDeferredWarnings())
> ? ? }
> ? ? invisible(structure(msg, class = "try-error", condition = e))
> })
> where 6: try(f())
> 
> ?--- value of length: 3 type: logical ---
> [1] FALSE ?TRUE ?TRUE
> ?--- function from context ---
> function (x = 1:3)
> {
> ? ? if (x > 1) {
> ? ? ? ? x <- -x
> ? ? }
> ? ? stop("this function always gives an error")
> }
> <bytecode: 0x4f413d0>
> <environment: namespace:ppp>
> ?--- function search by body ---
> Function f in namespace ppp has this body.
> ?----------- END OF FAILURE REPORT --------------
> Fatal error: the condition has length > 1
> * checking PDF version of manual ... OK
> * DONE
> 
> Status: 1 ERROR, 1 NOTE
> See
> ? ?/tmp/bill/ppp.Rcheck/00check.log?
> for details.
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com <http://tibco.com>
> 
> 
> On Fri, Jun 7, 2019 at 10:21 AM Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 07/06/2019 12:32 p.m., William Dunlap wrote:
>     > The length-condition-not-equal-to-one checks will cause R to shutdown
>     > even if the code in a tryCatch().
> 
>     That's strange.? I'm unable to reproduce it with my tries, and John's
>     package is no longer online.? Do you have an example I could look at?
> 
>     Duncan Murdoch
> 
>     >
>     > Bill Dunlap
>     > TIBCO Software
>     > wdunlap tibco.com <http://tibco.com> <http://tibco.com>
>     >
>     >
>     > On Fri, Jun 7, 2019 at 7:47 AM Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>     > <mailto:murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>> wrote:
>     >
>     >? ? ?On 07/06/2019 9:46 a.m., J C Nash wrote:
>     >? ? ? > Should try() not stop those checks from forcing an error?
>     >
>     >? ? ?try(stop("msg"))? will print the error message, but won't stop
>     >? ? ?execution.? Presumably the printed message is what is causing you
>     >? ? ?problems.? If you want to suppress that, use
>     >
>     >? ? ?try(stop("msg"), silent = TRUE)
>     >
>     >? ? ?Duncan Murdoch
>     >
>     >? ? ? >
>     >? ? ? > I recognize that this is the failure -- it is indeed the check
>     >? ? ?I'm trying to
>     >? ? ? > catch -- but I don't want tests of such checks to fail my package.
>     >? ? ? >
>     >? ? ? > JN
>     >? ? ? >
>     >? ? ? > On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
>     >? ? ? >> The failure stated in the R CMD check failure report is:
>     >? ? ? >>
>     >? ? ? >>>? ?--- failure: length > 1 in coercion to logical ---
>     >? ? ? >>
>     >? ? ? >> This comes from --as-cran performing useful extra checks via
>     >? ? ?setting the
>     >? ? ? >> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>     >? ? ? >>
>     >? ? ? >>> check if either argument of the binary operators && and || has
>     >? ? ?length greater than one.
>     >? ? ? >>
>     >? ? ? >> (see
>     >? ? ?https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>     >? ? ? >>
>     >? ? ? >> The failure report also states the source of the failure:
>     >? ? ? >>
>     >? ? ? >>>? ?--- call from context ---
>     >? ? ? >>> fchk(x, benbad, trace = 3, y)
>     >? ? ? >>>? ?--- call from argument ---
>     >? ? ? >>> is.infinite(fval) || is.na <http://is.na> <http://is.na>(fval)
>     >? ? ? >>
>     >? ? ? >> The problem is that both is.infinite(fval) and is.na <http://is.na>
>     >? ? ?<http://is.na>(fval) return
>     >? ? ? >> vectors of length 10 in your test case:
>     >? ? ? >>
>     >? ? ? >>>? ?--- value of length: 10 type: logical ---
>     >? ? ? >>>? ?[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>     >? ? ? >>
>     >? ? ? >> The || operator works on length 1 Booleans. Since fval can be of
>     >? ? ?length
>     >? ? ? >> greater than 1 at that point, the proper condition seems to be:
>     >? ? ? >>
>     >? ? ? >> any(is.infinite(fval)) || any(is.na <http://is.na> <http://is.na>(fval))
>     >? ? ? >>
>     >? ? ? >> Best regards,
>     >? ? ? >>
>     >? ? ? >>? ? ? Sebastian
>     >? ? ? >>
>     >? ? ? >>
>     >? ? ? >> Am 07.06.19 um 14:53 schrieb J C Nash:
>     >? ? ? >>> Sorry reply not quicker. For some reason I'm not getting
>     >? ? ?anything in the thread I started!
>     >? ? ? >>> I found the responses in the archives. Perhaps cc:
>     >? ? ?nashjc at uottawa.ca <mailto:nashjc at uottawa.ca> <mailto:nashjc at uottawa.ca <mailto:nashjc at uottawa.ca>> please.
>     >? ? ? >>>
>     >? ? ? >>> I have prepared a tiny (2.8K) package at
>     >? ? ? >>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>     >? ? ? >>>
>     >? ? ? >>> R CMD check --> OK
>     >? ? ? >>>
>     >? ? ? >>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>     >? ? ? >>>
>     >? ? ? >>> The error is in an example:
>     >? ? ? >>>
>     >? ? ? >>>> benbad<-function(x, y){
>     >? ? ? >>>>? ? ?# y may be provided with different structures
>     >? ? ? >>>>? ? ?f<-(x-y)^2
>     >? ? ? >>>> } # very simple, but ...
>     >? ? ? >>>>
>     >? ? ? >>>> y<-1:10
>     >? ? ? >>>> x<-c(1)
>     >? ? ? >>>> cat("test benbad() with y=1:10, x=c(1)\n")
>     >? ? ? >>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>     >? ? ? >>>> print(tryfc01)
>     >? ? ? >>>> print(fc01)
>     >? ? ? >>>
>     >? ? ? >>> There's quite a lot of output, but it doesn't make much sense
>     >? ? ?to me, as
>     >? ? ? >>> it refers to code that I didn't write.
>     >? ? ? >>>
>     >? ? ? >>> The function fchk is attempting to check if functions provided for
>     >? ? ? >>> optimization do not violate some conditions e.g., character
>     >? ? ?rather than
>     >? ? ? >>> numeric etc.
>     >? ? ? >>>
>     >? ? ? >>> JN
>     >? ? ? >>>
>     >? ? ? >>>
>     >? ? ? >>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>     >? ? ? >>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>     >? ? ? >>>> Fri Jun 7 11:44:37 CEST 2019
>     >? ? ? >>>>
>     >? ? ? >>>>? ? ? Previous message (by thread): [R-pkg-devel] try() in R
>     >? ? ?CMD check --as-cran
>     >? ? ? >>>>? ? ? Next message (by thread): [R-pkg-devel] using package
>     >? ? ?data in package code
>     >? ? ? >>>>? ? ? Messages sorted by: [ date ] [ thread ] [ subject ] [
>     >? ? ?author ]
>     >? ? ? >>>>
>     >? ? ? >>>> Right, what problem are you talking about? Can you tell us
>     >? ? ?which check
>     >? ? ? >>>> it is and what it actually complained about.
>     >? ? ? >>>> There is no check that looks at the sizes of x and y in
>     >? ? ?exypressions
>     >? ? ? >>>> such as
>     >? ? ? >>>> (x - y)^2.
>     >? ? ? >>>> as far as I know.
>     >? ? ? >>>>
>     >? ? ? >>>> Best,
>     >? ? ? >>>> Uwe
>     >? ? ? >>>>
>     >? ? ? >>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>     >? ? ? >>>>>
>     >? ? ? >>>>> Not entirely sure if this is what you're looking for:
>     >? ? ? >>>>>
>     >? ? ?https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>     >? ? ? >>>>> It does contain --as-cran a few times and there's the
>     >? ? ?change-history:
>     >? ? ? >>>>>
>     >? ? ?https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>     >? ? ? >>>>>
>     >? ? ? >>>>> Regards,
>     >? ? ? >>>>> Berry
>     >? ? ? >>>>>
>     >? ? ? >>>>>
>     >? ? ? >>>>> ________________________________
>     >? ? ? >>>>> From: R-package-devel <r-package-devel-bounces using
>     >? ? ?r-project.org <http://r-project.org> <http://r-project.org>> on behalf of J C Nash
>     >? ? ?<profjcnash using gmail.com <http://gmail.com> <http://gmail.com>>
>     >? ? ? >>>>> Sent: Thursday, June 6, 2019 15:03
>     >? ? ? >>>>> To: List r-package-devel
>     >? ? ? >>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>     >? ? ? >>>>>
>     >? ? ? >>>>> After making a small fix to my optimx package, I ran my usual
>     >? ? ?R CMD check --as-cran.
>     >? ? ? >>>>>
>     >? ? ? >>>>> To my surprise, I got two ERRORs unrelated to the change. The
>     >? ? ?errors popped up in
>     >? ? ? >>>>> a routine designed to check the call to the user objective
>     >? ? ?function. In particular,
>     >? ? ? >>>>> one check is that the size of vectors is the same in
>     >? ? ?expressions like (x - y)^2.
>     >? ? ? >>>>> This works fine with R CMD check, but the --as-cran seems to
>     >? ? ?have changed and it
>     >? ? ? >>>>> pops an error, even when the call is inside try(). The irony
>     >? ? ?that the routine in
>     >? ? ? >>>>> question is intended to avoid problems like this is not lost
>     >? ? ?on me.
>     >? ? ? >>>>>
>     >? ? ? >>>>> I'm working on a small reproducible example, but it's not
>     >? ? ?small enough yet.
>     >? ? ? >>>>> In the meantime, I'm looking for the source codes of the
>     >? ? ?scripts for "R CMD check" and
>     >? ? ? >>>>> "R CMD check --as-cran" so I can work out why there is this
>     >? ? ?difference, which seems
>     >? ? ? >>>>> to be recent.
>     >? ? ? >>>>>
>     >? ? ? >>>>> Can someone send/post a link? I plan to figure this out and
>     >? ? ?provide feedback,
>     >? ? ? >>>>> as I suspect it is going to affect others. However, it may be
>     >? ? ?a few days or even
>     >? ? ? >>>>> weeks if past experience is a guide.
>     >? ? ? >>>>>
>     >? ? ? >>>>> JN
>     >? ? ? >>>>>
>     >? ? ? >>>>> ______________________________________________
>     >? ? ? >>>>> R-package-devel using r-project.org <http://r-project.org> <http://r-project.org>
>     >? ? ?mailing list
>     >? ? ? >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >? ? ? >>>>>
>     >? ? ? >>>>>? ?[[alternative HTML version deleted]]
>     >? ? ? >>>>>
>     >? ? ? >>>>> ______________________________________________
>     >? ? ? >>>>> R-package-devel using r-project.org <http://r-project.org> <http://r-project.org>
>     >? ? ?mailing list
>     >? ? ? >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >? ? ? >>>>>
>     >? ? ? >>>>
>     >? ? ? >>>
>     >? ? ? >>> ______________________________________________
>     >? ? ? >>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     >? ? ?<mailto:R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>> mailing list
>     >? ? ? >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >? ? ? >>>
>     >? ? ? >>
>     >? ? ? >> ______________________________________________
>     >? ? ? >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     >? ? ?<mailto:R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>> mailing list
>     >? ? ? >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >? ? ? >>
>     >? ? ? >
>     >? ? ? > ______________________________________________
>     >? ? ? > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     >? ? ?<mailto:R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>> mailing list
>     >? ? ? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >? ? ? >
>     >
>     >? ? ?______________________________________________
>     >? ? ?R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> <mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>>
>     >? ? ?mailing list
>     >? ? ?https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >
>


From |uke-t|erney @end|ng |rom u|ow@@edu  Fri Jun  7 20:51:56 2019
From: |uke-t|erney @end|ng |rom u|ow@@edu (Tierney, Luke)
Date: Fri, 7 Jun 2019 18:51:56 +0000
Subject: [R-pkg-devel] [External] Re:  try() in R CMD check --as-cran
In-Reply-To: <CAF8bMcZ_bMxci-TMLCcBrgJu94jTPQc+bOCEiMXiZkBK46x5NQ@mail.gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
 <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>
 <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>
 <CAF8bMcZ_bMxci-TMLCcBrgJu94jTPQc+bOCEiMXiZkBK46x5NQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.21.1906071346460.3079@luke-Latitude-7480>

A simplified version without a package:

Sys.setenv("_R_CHECK_LENGTH_1_LOGIC2_"="abort,verbose")
tryCatch(1:3 || 1, error = identity)

Running this aborts the session since it calls R_Suicide without first
signaling a condition to try any available handlers. Should be easy to
change, but I don't know if there are any downsides for the CRAN
workflow. I'll look into it.

Best,

luke


On Fri, 7 Jun 2019, William Dunlap wrote:

> I've attached a package, ppp_0.1.tar.gz, which probably will not get
> through to R-help, that illustrates this.
> It contains one function which, by default, triggers a condition-length>1
> issue:
>   f <- function(x = 1:3)
>   {
>       if (x > 1) {
>           x <- -x
>       }
>       stop("this function always gives an error")
>   }
> and the help file example is
>   try(f())
>
> Then
>   env _R_CHECK_LENGTH_1_CONDITION_=abort,verbose R-3.6.0 CMD check
> --as-cran ppp_0.1.tar.gz
> results in
> * checking examples ... ERROR
> Running examples in ?ppp-Ex.R? failed
> The error most likely occurred in:
>
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ### Name: f
>> ### Title: Cause an error
>> ### Aliases: f
>> ### Keywords: error
>>
>> ### ** Examples
>>
>> try(f())
> ----------- FAILURE REPORT --------------
> --- failure: the condition has length > 1 ---
> --- srcref ---
> :
> --- package (from environment) ---
> ppp
> --- call from context ---
> f()
> --- call from argument ---
> if (x > 1) {
>    x <- -x
> }
> --- R stacktrace ---
> where 1: f()
> where 2: doTryCatch(return(expr), name, parentenv, handler)
> where 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> where 4: tryCatchList(expr, classes, parentenv, handlers)
> where 5: tryCatch(expr, error = function(e) {
>    call <- conditionCall(e)
>    if (!is.null(call)) {
>        if (identical(call[[1L]], quote(doTryCatch)))
>            call <- sys.call(-4L)
>        dcall <- deparse(call)[1L]
>        prefix <- paste("Error in", dcall, ": ")
>        LONG <- 75L
>        sm <- strsplit(conditionMessage(e), "\n")[[1L]]
>        w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")
>        if (is.na(w))
>            w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],
>                type = "b")
>        if (w > LONG)
>            prefix <- paste0(prefix, "\n  ")
>    }
>    else prefix <- "Error : "
>    msg <- paste0(prefix, conditionMessage(e), "\n")
>    .Internal(seterrmessage(msg[1L]))
>    if (!silent && isTRUE(getOption("show.error.messages"))) {
>        cat(msg, file = outFile)
>        .Internal(printDeferredWarnings())
>    }
>    invisible(structure(msg, class = "try-error", condition = e))
> })
> where 6: try(f())
>
> --- value of length: 3 type: logical ---
> [1] FALSE  TRUE  TRUE
> --- function from context ---
> function (x = 1:3)
> {
>    if (x > 1) {
>        x <- -x
>    }
>    stop("this function always gives an error")
> }
> <bytecode: 0x4f413d0>
> <environment: namespace:ppp>
> --- function search by body ---
> Function f in namespace ppp has this body.
> ----------- END OF FAILURE REPORT --------------
> Fatal error: the condition has length > 1
> * checking PDF version of manual ... OK
> * DONE
>
> Status: 1 ERROR, 1 NOTE
> See
>  ?/tmp/bill/ppp.Rcheck/00check.log?
> for details.
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Fri, Jun 7, 2019 at 10:21 AM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
>> On 07/06/2019 12:32 p.m., William Dunlap wrote:
>>> The length-condition-not-equal-to-one checks will cause R to shutdown
>>> even if the code in a tryCatch().
>>
>> That's strange.  I'm unable to reproduce it with my tries, and John's
>> package is no longer online.  Do you have an example I could look at?
>>
>> Duncan Murdoch
>>
>>>
>>> Bill Dunlap
>>> TIBCO Software
>>> wdunlap tibco.com <http://tibco.com>
>>>
>>>
>>> On Fri, Jun 7, 2019 at 7:47 AM Duncan Murdoch <murdoch.duncan at gmail.com
>>> <mailto:murdoch.duncan at gmail.com>> wrote:
>>>
>>>     On 07/06/2019 9:46 a.m., J C Nash wrote:
>>>     > Should try() not stop those checks from forcing an error?
>>>
>>>     try(stop("msg"))  will print the error message, but won't stop
>>>     execution.  Presumably the printed message is what is causing you
>>>     problems.  If you want to suppress that, use
>>>
>>>     try(stop("msg"), silent = TRUE)
>>>
>>>     Duncan Murdoch
>>>
>>>     >
>>>     > I recognize that this is the failure -- it is indeed the check
>>>     I'm trying to
>>>     > catch -- but I don't want tests of such checks to fail my package.
>>>     >
>>>     > JN
>>>     >
>>>     > On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
>>>     >> The failure stated in the R CMD check failure report is:
>>>     >>
>>>     >>>   --- failure: length > 1 in coercion to logical ---
>>>     >>
>>>     >> This comes from --as-cran performing useful extra checks via
>>>     setting the
>>>     >> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>>>     >>
>>>     >>> check if either argument of the binary operators && and || has
>>>     length greater than one.
>>>     >>
>>>     >> (see
>>>     https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>>>     >>
>>>     >> The failure report also states the source of the failure:
>>>     >>
>>>     >>>   --- call from context ---
>>>     >>> fchk(x, benbad, trace = 3, y)
>>>     >>>   --- call from argument ---
>>>     >>> is.infinite(fval) || is.na <http://is.na>(fval)
>>>     >>
>>>     >> The problem is that both is.infinite(fval) and is.na
>>>     <http://is.na>(fval) return
>>>     >> vectors of length 10 in your test case:
>>>     >>
>>>     >>>   --- value of length: 10 type: logical ---
>>>     >>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>> FALSE
>>>     >>
>>>     >> The || operator works on length 1 Booleans. Since fval can be of
>>>     length
>>>     >> greater than 1 at that point, the proper condition seems to be:
>>>     >>
>>>     >> any(is.infinite(fval)) || any(is.na <http://is.na>(fval))
>>>     >>
>>>     >> Best regards,
>>>     >>
>>>     >>      Sebastian
>>>     >>
>>>     >>
>>>     >> Am 07.06.19 um 14:53 schrieb J C Nash:
>>>     >>> Sorry reply not quicker. For some reason I'm not getting
>>>     anything in the thread I started!
>>>     >>> I found the responses in the archives. Perhaps cc:
>>>     nashjc at uottawa.ca <mailto:nashjc at uottawa.ca> please.
>>>     >>>
>>>     >>> I have prepared a tiny (2.8K) package at
>>>     >>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>>     >>>
>>>     >>> R CMD check --> OK
>>>     >>>
>>>     >>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>>     >>>
>>>     >>> The error is in an example:
>>>     >>>
>>>     >>>> benbad<-function(x, y){
>>>     >>>>     # y may be provided with different structures
>>>     >>>>     f<-(x-y)^2
>>>     >>>> } # very simple, but ...
>>>     >>>>
>>>     >>>> y<-1:10
>>>     >>>> x<-c(1)
>>>     >>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>>     >>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>>     >>>> print(tryfc01)
>>>     >>>> print(fc01)
>>>     >>>
>>>     >>> There's quite a lot of output, but it doesn't make much sense
>>>     to me, as
>>>     >>> it refers to code that I didn't write.
>>>     >>>
>>>     >>> The function fchk is attempting to check if functions provided
>> for
>>>     >>> optimization do not violate some conditions e.g., character
>>>     rather than
>>>     >>> numeric etc.
>>>     >>>
>>>     >>> JN
>>>     >>>
>>>     >>>
>>>     >>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>>     >>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>>     >>>> Fri Jun 7 11:44:37 CEST 2019
>>>     >>>>
>>>     >>>>      Previous message (by thread): [R-pkg-devel] try() in R
>>>     CMD check --as-cran
>>>     >>>>      Next message (by thread): [R-pkg-devel] using package
>>>     data in package code
>>>     >>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [
>>>     author ]
>>>     >>>>
>>>     >>>> Right, what problem are you talking about? Can you tell us
>>>     which check
>>>     >>>> it is and what it actually complained about.
>>>     >>>> There is no check that looks at the sizes of x and y in
>>>     exypressions
>>>     >>>> such as
>>>     >>>> (x - y)^2.
>>>     >>>> as far as I know.
>>>     >>>>
>>>     >>>> Best,
>>>     >>>> Uwe
>>>     >>>>
>>>     >>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>     >>>>>
>>>     >>>>> Not entirely sure if this is what you're looking for:
>>>     >>>>>
>>>
>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>>     >>>>> It does contain --as-cran a few times and there's the
>>>     change-history:
>>>     >>>>>
>>>
>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>     >>>>>
>>>     >>>>> Regards,
>>>     >>>>> Berry
>>>     >>>>>
>>>     >>>>>
>>>     >>>>> ________________________________
>>>     >>>>> From: R-package-devel <r-package-devel-bounces using
>>>     r-project.org <http://r-project.org>> on behalf of J C Nash
>>>     <profjcnash using gmail.com <http://gmail.com>>
>>>     >>>>> Sent: Thursday, June 6, 2019 15:03
>>>     >>>>> To: List r-package-devel
>>>     >>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>     >>>>>
>>>     >>>>> After making a small fix to my optimx package, I ran my usual
>>>     R CMD check --as-cran.
>>>     >>>>>
>>>     >>>>> To my surprise, I got two ERRORs unrelated to the change. The
>>>     errors popped up in
>>>     >>>>> a routine designed to check the call to the user objective
>>>     function. In particular,
>>>     >>>>> one check is that the size of vectors is the same in
>>>     expressions like (x - y)^2.
>>>     >>>>> This works fine with R CMD check, but the --as-cran seems to
>>>     have changed and it
>>>     >>>>> pops an error, even when the call is inside try(). The irony
>>>     that the routine in
>>>     >>>>> question is intended to avoid problems like this is not lost
>>>     on me.
>>>     >>>>>
>>>     >>>>> I'm working on a small reproducible example, but it's not
>>>     small enough yet.
>>>     >>>>> In the meantime, I'm looking for the source codes of the
>>>     scripts for "R CMD check" and
>>>     >>>>> "R CMD check --as-cran" so I can work out why there is this
>>>     difference, which seems
>>>     >>>>> to be recent.
>>>     >>>>>
>>>     >>>>> Can someone send/post a link? I plan to figure this out and
>>>     provide feedback,
>>>     >>>>> as I suspect it is going to affect others. However, it may be
>>>     a few days or even
>>>     >>>>> weeks if past experience is a guide.
>>>     >>>>>
>>>     >>>>> JN
>>>     >>>>>
>>>     >>>>> ______________________________________________
>>>     >>>>> R-package-devel using r-project.org <http://r-project.org>
>>>     mailing list
>>>     >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>     >>>>>
>>>     >>>>>   [[alternative HTML version deleted]]
>>>     >>>>>
>>>     >>>>> ______________________________________________
>>>     >>>>> R-package-devel using r-project.org <http://r-project.org>
>>>     mailing list
>>>     >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>     >>>>>
>>>     >>>>
>>>     >>>
>>>     >>> ______________________________________________
>>>     >>> R-package-devel at r-project.org
>>>     <mailto:R-package-devel at r-project.org> mailing list
>>>     >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>     >>>
>>>     >>
>>>     >> ______________________________________________
>>>     >> R-package-devel at r-project.org
>>>     <mailto:R-package-devel at r-project.org> mailing list
>>>     >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>     >>
>>>     >
>>>     > ______________________________________________
>>>     > R-package-devel at r-project.org
>>>     <mailto:R-package-devel at r-project.org> mailing list
>>>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>     >
>>>
>>>     ______________________________________________
>>>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>>     mailing list
>>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jun  7 20:55:41 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 7 Jun 2019 14:55:41 -0400
Subject: [R-pkg-devel] try() in R CMD check --as-cran
In-Reply-To: <CAF8bMcZ_bMxci-TMLCcBrgJu94jTPQc+bOCEiMXiZkBK46x5NQ@mail.gmail.com>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
 <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>
 <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>
 <CAF8bMcZ_bMxci-TMLCcBrgJu94jTPQc+bOCEiMXiZkBK46x5NQ@mail.gmail.com>
Message-ID: <6df4b704-06ea-75d6-0ac9-5a05644273e7@gmail.com>

On 07/06/2019 1:53 p.m., William Dunlap wrote:
> I've attached a package, ppp_0.1.tar.gz, which probably will not get 
> through to R-help, that illustrates this.
> It contains one function which, by default, triggers a 
> condition-length>1 issue:
>  ? ?f <- function(x = 1:3)
>  ? ?{
>  ? ? ? ?if (x > 1) {
>  ? ? ? ? ? ?x <- -x
>  ? ? ? ?}
>  ? ? ? ?stop("this function always gives an error")
>  ? ?}
> and the help file example is
>  ? ?try(f())
> 
> Then
>  ? ?env _R_CHECK_LENGTH_1_CONDITION_=abort,verbose R-3.6.0 CMD check 
> --as-cran ppp_0.1.tar.gz
> results in
> * checking examples ... ERROR
> Running examples in ?ppp-Ex.R? failed
> The error most likely occurred in:

Thanks, I see that now.  I'm still not seeing it without the explicit 
setting of the environment variable, i.e. --as-cran isn't setting it on 
the versions I'm using (3.6.0 and R-devel).

Duncan Murdoch


From tke|tt @end|ng |rom gm@||@com  Sat Jun  8 02:24:12 2019
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Fri, 7 Jun 2019 19:24:12 -0500
Subject: [R-pkg-devel] Travis/appveyor with CXX14/17
In-Reply-To: <23802.35872.393986.441014@rob.eddelbuettel.com>
References: <CANnL8gqqf1bnexTeXP9njTTbpXymOLWEkZriQFOZcT7QhD+w3w@mail.gmail.com>
 <23802.35872.393986.441014@rob.eddelbuettel.com>
Message-ID: <CANnL8goU6xiwAvGuoPG2+9FXc2w5AcfbkhQrCZ4CVe6c075zMg@mail.gmail.com>

On Fri, Jun 7, 2019 at 11:09 AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 7 June 2019 at 10:13, Tim Keitt wrote:
> | I bumped a package to CXX14/17 and it failed on Travis/Appveyor while
> | checking fine locally. I assume I need to request different compilers or
>
> Correct.
>
> Working with a seriously outdated base layer of Ubuntu is a key
> bug^Hfeature
> of Travis.  Maddening, really.
>
> | something like that. Anyone have a quick recipe for that?
>
> Yes.  In fact, two different ways.
>
> i)  If you use the old Travis set up which is more shell-script alike, then
>     one way is to use a PPA for nighlies/more current gcc or clang
>     versions. I used to do that some client packages that needed newer
>     compilers. An older example is still here
>
>     https://github.com/eddelbuettel/cpptoml/blob/master/.travis.yml
>
> ii) Screw Travis and use the fact that you can now bring your own Docker
>     container.  That is much preferable as you are in _complete_ control of
>     the test environment. I switched a few packages to this, particularly
>     when they needed additional libraries which I was building / providing
>     via a PPA anyway. Two examples:
>
>       https://github.com/eddelbuettel/rquantlib/blob/master/.travis.yml
>       https://github.com/rcppmlpack/rcppmlpack2/blob/master/.travis.yml
>
>     If you don't need extra libraries then something like this container
> have
>     R, recent toolchain and support for PPAs. I have been meaning to blog
>     about it with an example:
>
>       https://hub.docker.com/r/rocker/r-apt
>
>     Obviously you can also start from vanilla Rocker's r-base, or any other
>     Debian container.  Again,  your control, possibly also your initial
> work.
>
>     A scheme I found helpful in a few repos is to create
>
>       docker/ci/Dockerfile     -- base layer for CI, used by Travis
>       docker/run/Dockerfile    -- above plus the actual repo code
>
>     where the latter one is a simple container for users of the package.
>

That's super helpful. Thanks.

THK


>
> Hth, Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From k@@@e|@h|ngee @end|ng |rom re@e@rch@uw@@edu@@u  Sat Jun  8 05:06:09 2019
From: k@@@e|@h|ngee @end|ng |rom re@e@rch@uw@@edu@@u (Kassel Hingee)
Date: Sat, 8 Jun 2019 12:06:09 +0900
Subject: [R-pkg-devel] checks on CRAN notes 'examples_i386',
 but checks elsewhere do not
In-Reply-To: <5dec0a8d-05c9-529a-86c0-7d185db68c35@statistik.tu-dortmund.de>
References: <CALdvo4_qBM2_di9dHuHZZYe8HOfthKdYmJOykFKZq2TuQXUdew@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F71D144@MBXP02.ds.man.ac.uk>
 <5dec0a8d-05c9-529a-86c0-7d185db68c35@statistik.tu-dortmund.de>
Message-ID: <CALdvo4_r09WgiQ4x=vRuyf2XKYOz3fuid5uC5-H_m+B2cEGWCQ@mail.gmail.com>

Thank you Georgi and Uwe! I've made doubly sure that "examples_and_tests"
isn't in my tarball and I've uploaded again to CRAN.

yours
Kassel

On Fri, 7 Jun 2019 at 17:07, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> Or you have been there at the wrong time when we enabled a new check
> that was not able to correctly deal with check directories produced
> under bi-arch check siutuations. This is fixed for wionbuilder and wil
> be fixed in the R sources soon,
> Uwe
>
>
>
> On 07.06.2019 09:31, Georgi Boshnakov wrote:
> > It looks like you get the note when you run the check on the package
> directory, rather than on the tarball of the package. Undoubtedly, you
> submitted the tarball towinbuilder. develops::check also first builds the
> package and then does the flecks on the tarball.
> >
> > If unwanted files do creep into the tarball, use file.Rbuildignore to
> tell the builder not to include them.
> >
> >
> >   Georgi Boshnakov
> >
> >
> > ________________________________________
> > From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf
> of Kassel Hingee [kassel.hingee at research.uwa.edu.au]
> > Sent: 07 June 2019 05:35
> > To: r-package-devel at r-project.org
> > Subject: [R-pkg-devel] checks on CRAN notes 'examples_i386', but checks
> elsewhere do not
> >
> > Hi All,
> >
> > This is my first time submitting a package to CRAN, and posting here. I
> > hope I get everything right.
> >
> > Checks ran by CRAN for Windows systems generated a note that I don't know
> > where to start to solve:
> >
> > * checking for non-standard things in the check directory ... NOTE
> > Found the following files/directories:
> >    examples_i386 examples_x64 lacunaritycovariance-Ex_i386.Rout
> >    lacunaritycovariance-Ex_x64.Rout tests_i386 tests_x64
> >
> >
> > This note was not generated when I uploaded the package directly to
> > winbuilder in either release or development versions of R.
> > It also wasn't generated when I ran devtools::check() on my own (unix)
> computer.
> >
> > The results of the CRAN check can be seen here for another few days:
> >
> https://win-builder.r-project.org/incoming_pretest/lacunaritycovariance_1.0-3_20190606_051128/
> > The check log containing the above note is here:
> >
> https://win-builder.r-project.org/incoming_pretest/lacunaritycovariance_1.0-3_20190606_051128/Windows/00check.log
> > The package source can bee seen here:
> > https://github.com/kasselhingee/lacunaritycovariance/tree/release
> >
> > I haven't noticed a solution discussed earlier on this email list and
> > web searching gave me no joy. I am hoping you can help!
> >
> > yours
> > Kassel
> >
> >          [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From r|ox@||27 @end|ng |rom gm@||@com  Mon Jun 10 07:21:25 2019
From: r|ox@||27 @end|ng |rom gm@||@com (Rob Foxall)
Date: Mon, 10 Jun 2019 13:21:25 +0800
Subject: [R-pkg-devel] R CMD build: "Error in if (any(update))"
Message-ID: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>

Hi,

(Re-posting here as per advice from r-help)

I've got an R package that I periodically create in what I assume is
an old-fashioned way:

Within R: use "package.skeleton"
Outside of R: update e.g. .rd files as appropriate
Command window: run the following commands
R CMD build packageName
R CMD check packageName
R CMD INSTALL --build packageName

I am now getting an error on the R CMD build stage. Initially I had
wanted to remove a package dependency (by not passing some functions
to package.skeleton and editing my NAMESPACE and DESCRIPTION file
appropriately), but on getting the error I tried to revert everything
back to my last successful build (Feb 2019), however, the error
persisted:
R CMD build packageName
* checking for file 'packageName/DESCRIPTION' ... OK
* preparing 'packageName' :
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* looking to see if a 'data/datalist' file should be added
Error in if (any(update)) { : missing value where TRUE/FALSE needed
Execution halted

I am guessing that the error could be due to any of the last three
lines that don't have an "OK", but I am completely stuck as to how to
narrow it down further, and Dr. Google has already failed me.

Using R version 3.6.0, R tools version 3.5.0.4 (I don't recall if had
different versions previous time I built this package in Feb 2019).
Attempt to reproduce error with dummy package failed (i.e. no issues
with R CMD build).

Cheers,
Rob.


From edd @end|ng |rom deb|@n@org  Mon Jun 10 15:58:31 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 10 Jun 2019 08:58:31 -0500
Subject: [R-pkg-devel] R CMD build: "Error in if (any(update))"
In-Reply-To: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>
References: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>
Message-ID: <23806.25095.141578.788858@rob.eddelbuettel.com>


On 10 June 2019 at 13:21, Rob Foxall wrote:
| I've got an R package that I periodically create in what I assume is
| an old-fashioned way:
| 
| Within R: use "package.skeleton"
| Outside of R: update e.g. .rd files as appropriate
| Command window: run the following commands
| R CMD build packageName
| R CMD check packageName

Close. This should check the .tar.gz produced by the preceding command:

  R CMD check packageName_a.b.c.tar.gz     # where a.b.c is current version

| R CMD INSTALL --build packageName

Not sure you need --build; it creates a binary for redistribution but only 
for system that match your system closely.  I would recommend

  R CMD INSTALL packageName_a.b.c.tar.gz

instead.

| I am now getting an error on the R CMD build stage. Initially I had
| wanted to remove a package dependency (by not passing some functions
| to package.skeleton and editing my NAMESPACE and DESCRIPTION file
| appropriately), but on getting the error I tried to revert everything
| back to my last successful build (Feb 2019), however, the error
| persisted:
| R CMD build packageName
| * checking for file 'packageName/DESCRIPTION' ... OK
| * preparing 'packageName' :
| * checking DESCRIPTION meta-information ... OK
| * checking for LF line-endings in source and make files
| * checking for empty or unneeded directories
| * looking to see if a 'data/datalist' file should be added
| Error in if (any(update)) { : missing value where TRUE/FALSE needed
| Execution halted
| 
| I am guessing that the error could be due to any of the last three
| lines that don't have an "OK", but I am completely stuck as to how to
| narrow it down further, and Dr. Google has already failed me.

I would think it has to do with your package sources, and a possible change
in R 3.6.0.  Checks get better over time so it may set off a flag for
something that passed before.

But we can't really tell without access to your code.

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From wdun|@p @end|ng |rom t|bco@com  Mon Jun 10 18:00:21 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Mon, 10 Jun 2019 09:00:21 -0700
Subject: [R-pkg-devel] R CMD build: "Error in if (any(update))"
In-Reply-To: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>
References: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>
Message-ID: <CAF8bMcaY+tAF-iTGyg6EDKc-+sAu-_eEo0xrFtZiQbkyUB_UWw@mail.gmail.com>

You might be able to find where the error occurred by putting the following
lines in ~/.Rprofile

cat("~/.Rprofile: setting alternate error handler\n")
options(
    error=quote({
        dump.frames()
        writeLines(c("Stack trace", paste0("  ",names(last.dump))))}))

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Mon, Jun 10, 2019 at 6:38 AM Rob Foxall <rfoxall27 at gmail.com> wrote:

> Hi,
>
> (Re-posting here as per advice from r-help)
>
> I've got an R package that I periodically create in what I assume is
> an old-fashioned way:
>
> Within R: use "package.skeleton"
> Outside of R: update e.g. .rd files as appropriate
> Command window: run the following commands
> R CMD build packageName
> R CMD check packageName
> R CMD INSTALL --build packageName
>
> I am now getting an error on the R CMD build stage. Initially I had
> wanted to remove a package dependency (by not passing some functions
> to package.skeleton and editing my NAMESPACE and DESCRIPTION file
> appropriately), but on getting the error I tried to revert everything
> back to my last successful build (Feb 2019), however, the error
> persisted:
> R CMD build packageName
> * checking for file 'packageName/DESCRIPTION' ... OK
> * preparing 'packageName' :
> * checking DESCRIPTION meta-information ... OK
> * checking for LF line-endings in source and make files
> * checking for empty or unneeded directories
> * looking to see if a 'data/datalist' file should be added
> Error in if (any(update)) { : missing value where TRUE/FALSE needed
> Execution halted
>
> I am guessing that the error could be due to any of the last three
> lines that don't have an "OK", but I am completely stuck as to how to
> narrow it down further, and Dr. Google has already failed me.
>
> Using R version 3.6.0, R tools version 3.5.0.4 (I don't recall if had
> different versions previous time I built this package in Feb 2019).
> Attempt to reproduce error with dummy package failed (i.e. no issues
> with R CMD build).
>
> Cheers,
> Rob.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r|ox@||27 @end|ng |rom gm@||@com  Wed Jun 12 03:31:12 2019
From: r|ox@||27 @end|ng |rom gm@||@com (Rob Foxall)
Date: Wed, 12 Jun 2019 09:31:12 +0800
Subject: [R-pkg-devel] R CMD build: "Error in if (any(update))"
In-Reply-To: <CAF8bMcaY+tAF-iTGyg6EDKc-+sAu-_eEo0xrFtZiQbkyUB_UWw@mail.gmail.com>
References: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>
 <CAF8bMcaY+tAF-iTGyg6EDKc-+sAu-_eEo0xrFtZiQbkyUB_UWw@mail.gmail.com>
Message-ID: <CAGmx+tqhCv-c_yb+PPbYFFrF4fh7pU0w-MuWzG1Ruoui0BGSZg@mail.gmail.com>

Thanks for the replies. I am still stuck, although agree it is most
likely due to change to R version 3.6.0. I did however manage to
create a dummy package that now does re-create the same error, this
required the inclusion of a data object. The R CMD build error occurs
regardless of whether there is a sysdata.rda in the R subdirectory,
and whether there is a datalist in the data subdirectory. Apologies
for the lengthy "code" that follows:

In R:
myCol <- rgb(0.9,0.5,0.5)
myPlot <- function(x){
   plot(x, col = myCol)
   return(NULL)
}
package.skeleton(name = "myPackage", list = c("myPlot", "myCol"))

"Optionally" in R:
save(list = c("myCol"), file = "sysdata.rda")

my DESCRIPTION file:
Package: myPackage
Type: Package
Title: Test Package
Version: 1.0
Date: 2019-06-11
Author: Rob Foxall <rob.foxall at test.com.au>
Maintainer: Rob Foxall <rob.foxall at test.com.au>
Description: To test making a package
License: GPL-2
LazyLoad: yes

my NAMESPACE file:
exportPattern("^[[:alpha:]]+")

contents of myPackage directory:
directories "data", "man", "R", files "DESCRIPTION", "NAMESPACE",
"Read-and-delete-me"
contents of data subdirectory:
myCol.rda, (optionally) datalist
contents of man subdirectory:
myCol.Rd, myPackage-package.Rd, myPlot.Rd
contents of R subdirectory:
myPlot.R, ("optionally") sysdata.rda

The ".Rd" files:
myCol.Rd:
\name{myCol}
%
\alias{myCol}
%
\docType{data}
%
\title{A colour}
%
\description{It's a colour}
%
\usage{data(myCol)}
%
\format{
It is a colour, defined by:
rgb(red=0.9,green=0.5,blue=0.5)
}
%
\details{
Other, standard colours are available via sensible names. See \code{colours}. }
%
\source{See Me}
%
\references{Albers, J. (1975) \emph{Interaction of Colour}. Yale
University Press}
%
\examples{
myPlot(3)
}
%
\keyword{sysdata}

myPackage-package.Rd:
\name{myPackage-package}
%
\alias{myPackage-package}
%
\alias{myPackage}
%
\docType{package}
%
\title{Test package}
%
\description{Testing making a package}
%
\details{
\tabular{ll}{
Package: \tab myPackage\cr
Type: \tab Package\cr
Version: \tab 1.0\cr
Date: \tab 2019-06-11\cr
License: \tab GPL-2\cr
LazyLoad: \tab yes\cr
}
%
Test package, dummy plot with dummy colour
}
%
\author{
Rob Foxall <rob.foxall at test.com>
Maintainer:  <rob.foxall at test.com>
}
%
\references{N.A.J. Hastings, Brian Peacock, Merran Evans (2000)
\emph{Statistical Distributions} John Wiley & Sons Inc}
%
\keyword{package}
%
\seealso{\code{\link{plot}}}
%
\examples{
myplot(3)
}

myPlot.Rd
\name{myPlot}
%
\alias{myPlot}
%- Also NEED an '\alias' for EACH other topic documented here.
\title{Do a plot of a number}
%
\description{Plots a number with a set colour}
%
\usage{myPlot(x)}
%
\arguments{
  \item{x}{A number}
}
%
\details{Plots a number with a colour.}
%
\value{Returns null}
%
\author{Rob Foxall}
%
\note{There is no note}
%
\seealso{\code{\link{plot}}}
%
\examples{myPlot(3)}
%
\keyword{KPI}


On Tue, Jun 11, 2019 at 12:00 AM William Dunlap <wdunlap at tibco.com> wrote:
>
> You might be able to find where the error occurred by putting the following lines in ~/.Rprofile
>
> cat("~/.Rprofile: setting alternate error handler\n")
> options(
>     error=quote({
>         dump.frames()
>         writeLines(c("Stack trace", paste0("  ",names(last.dump))))}))
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Mon, Jun 10, 2019 at 6:38 AM Rob Foxall <rfoxall27 at gmail.com> wrote:
>>
>> Hi,
>>
>> (Re-posting here as per advice from r-help)
>>
>> I've got an R package that I periodically create in what I assume is
>> an old-fashioned way:
>>
>> Within R: use "package.skeleton"
>> Outside of R: update e.g. .rd files as appropriate
>> Command window: run the following commands
>> R CMD build packageName
>> R CMD check packageName
>> R CMD INSTALL --build packageName
>>
>> I am now getting an error on the R CMD build stage. Initially I had
>> wanted to remove a package dependency (by not passing some functions
>> to package.skeleton and editing my NAMESPACE and DESCRIPTION file
>> appropriately), but on getting the error I tried to revert everything
>> back to my last successful build (Feb 2019), however, the error
>> persisted:
>> R CMD build packageName
>> * checking for file 'packageName/DESCRIPTION' ... OK
>> * preparing 'packageName' :
>> * checking DESCRIPTION meta-information ... OK
>> * checking for LF line-endings in source and make files
>> * checking for empty or unneeded directories
>> * looking to see if a 'data/datalist' file should be added
>> Error in if (any(update)) { : missing value where TRUE/FALSE needed
>> Execution halted
>>
>> I am guessing that the error could be due to any of the last three
>> lines that don't have an "OK", but I am completely stuck as to how to
>> narrow it down further, and Dr. Google has already failed me.
>>
>> Using R version 3.6.0, R tools version 3.5.0.4 (I don't recall if had
>> different versions previous time I built this package in Feb 2019).
>> Attempt to reproduce error with dummy package failed (i.e. no issues
>> with R CMD build).
>>
>> Cheers,
>> Rob.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r|ox@||27 @end|ng |rom gm@||@com  Wed Jun 12 08:23:07 2019
From: r|ox@||27 @end|ng |rom gm@||@com (Rob Foxall)
Date: Wed, 12 Jun 2019 14:23:07 +0800
Subject: [R-pkg-devel] R CMD build: "Error in if (any(update))"
In-Reply-To: <CAARY7kiGRQ4iucVevuJxCJAeNfkdvL+N8h+7t30DjznG5w5DEw@mail.gmail.com>
References: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>
 <CAF8bMcaY+tAF-iTGyg6EDKc-+sAu-_eEo0xrFtZiQbkyUB_UWw@mail.gmail.com>
 <CAGmx+tqhCv-c_yb+PPbYFFrF4fh7pU0w-MuWzG1Ruoui0BGSZg@mail.gmail.com>
 <CAARY7kiGRQ4iucVevuJxCJAeNfkdvL+N8h+7t30DjznG5w5DEw@mail.gmail.com>
Message-ID: <CAGmx+toATVC8wRDHa8X0ECrCiyJCkZ88ntBg3GAAS1+-6EzfgQ@mail.gmail.com>

Thanks. I ran in R:
devtools::build("myPackage")
That gave me a warning:
     NB: this package now depends on R (>= 3.5.0)
     WARNING: Added dependency on R >= 3.5.0 because serialized
objects in  serialize/load version 3 cannot be read in older versions
of R.
     File(s) containing such objects: 'myPackage/R/sysdata.rda'
'myPackage/data/myCol.rda'
But it didn't error. I then added the dependency to R >= 3.5.0 to my
DESCRIPTION file, and rerunning devtools::build now executed without
error or warning. However, in the command window "R CMD build
myPackage" still gives same error.
Then in R I ran:
devtools::check("myPackage")
It gave me a genuine error ("myplot" instead of "myPlot" in my
myPackage-package.rda file), and a couple of warnings. All of which I
fixed, and re-running the check gave me 0 errors/warnings/notes.
In the command window, "R CMD build myPackage" still gives the same error.

On Wed, Jun 12, 2019 at 12:46 PM David Hugh-Jones
<davidhughjones at gmail.com> wrote:
>
> If you use devtools::check, I think it runs in the original R process, so you might be able to debug the error using eg options(error=recover).
>
> On Wed, 12 Jun 2019 at 02:31, Rob Foxall <rfoxall27 at gmail.com> wrote:
>>
>> Thanks for the replies. I am still stuck, although agree it is most
>> likely due to change to R version 3.6.0. I did however manage to
>> create a dummy package that now does re-create the same error, this
>> required the inclusion of a data object. The R CMD build error occurs
>> regardless of whether there is a sysdata.rda in the R subdirectory,
>> and whether there is a datalist in the data subdirectory. Apologies
>> for the lengthy "code" that follows:
>>
>> In R:
>> myCol <- rgb(0.9,0.5,0.5)
>> myPlot <- function(x){
>>    plot(x, col = myCol)
>>    return(NULL)
>> }
>> package.skeleton(name = "myPackage", list = c("myPlot", "myCol"))
>>
>> "Optionally" in R:
>> save(list = c("myCol"), file = "sysdata.rda")
>>
>> my DESCRIPTION file:
>> Package: myPackage
>> Type: Package
>> Title: Test Package
>> Version: 1.0
>> Date: 2019-06-11
>> Author: Rob Foxall <rob.foxall at test.com.au>
>> Maintainer: Rob Foxall <rob.foxall at test.com.au>
>> Description: To test making a package
>> License: GPL-2
>> LazyLoad: yes
>>
>> my NAMESPACE file:
>> exportPattern("^[[:alpha:]]+")
>>
>> contents of myPackage directory:
>> directories "data", "man", "R", files "DESCRIPTION", "NAMESPACE",
>> "Read-and-delete-me"
>> contents of data subdirectory:
>> myCol.rda, (optionally) datalist
>> contents of man subdirectory:
>> myCol.Rd, myPackage-package.Rd, myPlot.Rd
>> contents of R subdirectory:
>> myPlot.R, ("optionally") sysdata.rda
>>
>> The ".Rd" files:
>> myCol.Rd:
>> \name{myCol}
>> %
>> \alias{myCol}
>> %
>> \docType{data}
>> %
>> \title{A colour}
>> %
>> \description{It's a colour}
>> %
>> \usage{data(myCol)}
>> %
>> \format{
>> It is a colour, defined by:
>> rgb(red=0.9,green=0.5,blue=0.5)
>> }
>> %
>> \details{
>> Other, standard colours are available via sensible names. See \code{colours}. }
>> %
>> \source{See Me}
>> %
>> \references{Albers, J. (1975) \emph{Interaction of Colour}. Yale
>> University Press}
>> %
>> \examples{
>> myPlot(3)
>> }
>> %
>> \keyword{sysdata}
>>
>> myPackage-package.Rd:
>> \name{myPackage-package}
>> %
>> \alias{myPackage-package}
>> %
>> \alias{myPackage}
>> %
>> \docType{package}
>> %
>> \title{Test package}
>> %
>> \description{Testing making a package}
>> %
>> \details{
>> \tabular{ll}{
>> Package: \tab myPackage\cr
>> Type: \tab Package\cr
>> Version: \tab 1.0\cr
>> Date: \tab 2019-06-11\cr
>> License: \tab GPL-2\cr
>> LazyLoad: \tab yes\cr
>> }
>> %
>> Test package, dummy plot with dummy colour
>> }
>> %
>> \author{
>> Rob Foxall <rob.foxall at test.com>
>> Maintainer:  <rob.foxall at test.com>
>> }
>> %
>> \references{N.A.J. Hastings, Brian Peacock, Merran Evans (2000)
>> \emph{Statistical Distributions} John Wiley & Sons Inc}
>> %
>> \keyword{package}
>> %
>> \seealso{\code{\link{plot}}}
>> %
>> \examples{
>> myplot(3)
>> }
>>
>> myPlot.Rd
>> \name{myPlot}
>> %
>> \alias{myPlot}
>> %- Also NEED an '\alias' for EACH other topic documented here.
>> \title{Do a plot of a number}
>> %
>> \description{Plots a number with a set colour}
>> %
>> \usage{myPlot(x)}
>> %
>> \arguments{
>>   \item{x}{A number}
>> }
>> %
>> \details{Plots a number with a colour.}
>> %
>> \value{Returns null}
>> %
>> \author{Rob Foxall}
>> %
>> \note{There is no note}
>> %
>> \seealso{\code{\link{plot}}}
>> %
>> \examples{myPlot(3)}
>> %
>> \keyword{KPI}
>>
>>
>> On Tue, Jun 11, 2019 at 12:00 AM William Dunlap <wdunlap at tibco.com> wrote:
>> >
>> > You might be able to find where the error occurred by putting the following lines in ~/.Rprofile
>> >
>> > cat("~/.Rprofile: setting alternate error handler\n")
>> > options(
>> >     error=quote({
>> >         dump.frames()
>> >         writeLines(c("Stack trace", paste0("  ",names(last.dump))))}))
>> >
>> > Bill Dunlap
>> > TIBCO Software
>> > wdunlap tibco.com
>> >
>> >
>> > On Mon, Jun 10, 2019 at 6:38 AM Rob Foxall <rfoxall27 at gmail.com> wrote:
>> >>
>> >> Hi,
>> >>
>> >> (Re-posting here as per advice from r-help)
>> >>
>> >> I've got an R package that I periodically create in what I assume is
>> >> an old-fashioned way:
>> >>
>> >> Within R: use "package.skeleton"
>> >> Outside of R: update e.g. .rd files as appropriate
>> >> Command window: run the following commands
>> >> R CMD build packageName
>> >> R CMD check packageName
>> >> R CMD INSTALL --build packageName
>> >>
>> >> I am now getting an error on the R CMD build stage. Initially I had
>> >> wanted to remove a package dependency (by not passing some functions
>> >> to package.skeleton and editing my NAMESPACE and DESCRIPTION file
>> >> appropriately), but on getting the error I tried to revert everything
>> >> back to my last successful build (Feb 2019), however, the error
>> >> persisted:
>> >> R CMD build packageName
>> >> * checking for file 'packageName/DESCRIPTION' ... OK
>> >> * preparing 'packageName' :
>> >> * checking DESCRIPTION meta-information ... OK
>> >> * checking for LF line-endings in source and make files
>> >> * checking for empty or unneeded directories
>> >> * looking to see if a 'data/datalist' file should be added
>> >> Error in if (any(update)) { : missing value where TRUE/FALSE needed
>> >> Execution halted
>> >>
>> >> I am guessing that the error could be due to any of the last three
>> >> lines that don't have an "OK", but I am completely stuck as to how to
>> >> narrow it down further, and Dr. Google has already failed me.
>> >>
>> >> Using R version 3.6.0, R tools version 3.5.0.4 (I don't recall if had
>> >> different versions previous time I built this package in Feb 2019).
>> >> Attempt to reproduce error with dummy package failed (i.e. no issues
>> >> with R CMD build).
>> >>
>> >> Cheers,
>> >> Rob.
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Sent from Gmail Mobile


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jun 12 10:29:42 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 12 Jun 2019 10:29:42 +0200
Subject: [R-pkg-devel] R CMD build: "Error in if (any(update))"
In-Reply-To: <CAGmx+toATVC8wRDHa8X0ECrCiyJCkZ88ntBg3GAAS1+-6EzfgQ@mail.gmail.com>
References: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>
 <CAF8bMcaY+tAF-iTGyg6EDKc-+sAu-_eEo0xrFtZiQbkyUB_UWw@mail.gmail.com>
 <CAGmx+tqhCv-c_yb+PPbYFFrF4fh7pU0w-MuWzG1Ruoui0BGSZg@mail.gmail.com>
 <CAARY7kiGRQ4iucVevuJxCJAeNfkdvL+N8h+7t30DjznG5w5DEw@mail.gmail.com>
 <CAGmx+toATVC8wRDHa8X0ECrCiyJCkZ88ntBg3GAAS1+-6EzfgQ@mail.gmail.com>
Message-ID: <1d7da0a4-e4c7-476d-b9fb-43394fcfaeac@statistik.tu-dortmund.de>

Too many layers of complexity for me, can you take the package sources 
and zat /or zip) them for me and send them? Then I'll take a look.
Best,
Uwe Ligges

On 12.06.2019 08:23, Rob Foxall wrote:
> Thanks. I ran in R:
> devtools::build("myPackage")
> That gave me a warning:
>       NB: this package now depends on R (>= 3.5.0)
>       WARNING: Added dependency on R >= 3.5.0 because serialized
> objects in  serialize/load version 3 cannot be read in older versions
> of R.
>       File(s) containing such objects: 'myPackage/R/sysdata.rda'
> 'myPackage/data/myCol.rda'
> But it didn't error. I then added the dependency to R >= 3.5.0 to my
> DESCRIPTION file, and rerunning devtools::build now executed without
> error or warning. However, in the command window "R CMD build
> myPackage" still gives same error.
> Then in R I ran:
> devtools::check("myPackage")
> It gave me a genuine error ("myplot" instead of "myPlot" in my
> myPackage-package.rda file), and a couple of warnings. All of which I
> fixed, and re-running the check gave me 0 errors/warnings/notes.
> In the command window, "R CMD build myPackage" still gives the same error.
> 
> On Wed, Jun 12, 2019 at 12:46 PM David Hugh-Jones
> <davidhughjones at gmail.com> wrote:
>>
>> If you use devtools::check, I think it runs in the original R process, so you might be able to debug the error using eg options(error=recover).
>>
>> On Wed, 12 Jun 2019 at 02:31, Rob Foxall <rfoxall27 at gmail.com> wrote:
>>>
>>> Thanks for the replies. I am still stuck, although agree it is most
>>> likely due to change to R version 3.6.0. I did however manage to
>>> create a dummy package that now does re-create the same error, this
>>> required the inclusion of a data object. The R CMD build error occurs
>>> regardless of whether there is a sysdata.rda in the R subdirectory,
>>> and whether there is a datalist in the data subdirectory. Apologies
>>> for the lengthy "code" that follows:
>>>
>>> In R:
>>> myCol <- rgb(0.9,0.5,0.5)
>>> myPlot <- function(x){
>>>     plot(x, col = myCol)
>>>     return(NULL)
>>> }
>>> package.skeleton(name = "myPackage", list = c("myPlot", "myCol"))
>>>
>>> "Optionally" in R:
>>> save(list = c("myCol"), file = "sysdata.rda")
>>>
>>> my DESCRIPTION file:
>>> Package: myPackage
>>> Type: Package
>>> Title: Test Package
>>> Version: 1.0
>>> Date: 2019-06-11
>>> Author: Rob Foxall <rob.foxall at test.com.au>
>>> Maintainer: Rob Foxall <rob.foxall at test.com.au>
>>> Description: To test making a package
>>> License: GPL-2
>>> LazyLoad: yes
>>>
>>> my NAMESPACE file:
>>> exportPattern("^[[:alpha:]]+")
>>>
>>> contents of myPackage directory:
>>> directories "data", "man", "R", files "DESCRIPTION", "NAMESPACE",
>>> "Read-and-delete-me"
>>> contents of data subdirectory:
>>> myCol.rda, (optionally) datalist
>>> contents of man subdirectory:
>>> myCol.Rd, myPackage-package.Rd, myPlot.Rd
>>> contents of R subdirectory:
>>> myPlot.R, ("optionally") sysdata.rda
>>>
>>> The ".Rd" files:
>>> myCol.Rd:
>>> \name{myCol}
>>> %
>>> \alias{myCol}
>>> %
>>> \docType{data}
>>> %
>>> \title{A colour}
>>> %
>>> \description{It's a colour}
>>> %
>>> \usage{data(myCol)}
>>> %
>>> \format{
>>> It is a colour, defined by:
>>> rgb(red=0.9,green=0.5,blue=0.5)
>>> }
>>> %
>>> \details{
>>> Other, standard colours are available via sensible names. See \code{colours}. }
>>> %
>>> \source{See Me}
>>> %
>>> \references{Albers, J. (1975) \emph{Interaction of Colour}. Yale
>>> University Press}
>>> %
>>> \examples{
>>> myPlot(3)
>>> }
>>> %
>>> \keyword{sysdata}
>>>
>>> myPackage-package.Rd:
>>> \name{myPackage-package}
>>> %
>>> \alias{myPackage-package}
>>> %
>>> \alias{myPackage}
>>> %
>>> \docType{package}
>>> %
>>> \title{Test package}
>>> %
>>> \description{Testing making a package}
>>> %
>>> \details{
>>> \tabular{ll}{
>>> Package: \tab myPackage\cr
>>> Type: \tab Package\cr
>>> Version: \tab 1.0\cr
>>> Date: \tab 2019-06-11\cr
>>> License: \tab GPL-2\cr
>>> LazyLoad: \tab yes\cr
>>> }
>>> %
>>> Test package, dummy plot with dummy colour
>>> }
>>> %
>>> \author{
>>> Rob Foxall <rob.foxall at test.com>
>>> Maintainer:  <rob.foxall at test.com>
>>> }
>>> %
>>> \references{N.A.J. Hastings, Brian Peacock, Merran Evans (2000)
>>> \emph{Statistical Distributions} John Wiley & Sons Inc}
>>> %
>>> \keyword{package}
>>> %
>>> \seealso{\code{\link{plot}}}
>>> %
>>> \examples{
>>> myplot(3)
>>> }
>>>
>>> myPlot.Rd
>>> \name{myPlot}
>>> %
>>> \alias{myPlot}
>>> %- Also NEED an '\alias' for EACH other topic documented here.
>>> \title{Do a plot of a number}
>>> %
>>> \description{Plots a number with a set colour}
>>> %
>>> \usage{myPlot(x)}
>>> %
>>> \arguments{
>>>    \item{x}{A number}
>>> }
>>> %
>>> \details{Plots a number with a colour.}
>>> %
>>> \value{Returns null}
>>> %
>>> \author{Rob Foxall}
>>> %
>>> \note{There is no note}
>>> %
>>> \seealso{\code{\link{plot}}}
>>> %
>>> \examples{myPlot(3)}
>>> %
>>> \keyword{KPI}
>>>
>>>
>>> On Tue, Jun 11, 2019 at 12:00 AM William Dunlap <wdunlap at tibco.com> wrote:
>>>>
>>>> You might be able to find where the error occurred by putting the following lines in ~/.Rprofile
>>>>
>>>> cat("~/.Rprofile: setting alternate error handler\n")
>>>> options(
>>>>      error=quote({
>>>>          dump.frames()
>>>>          writeLines(c("Stack trace", paste0("  ",names(last.dump))))}))
>>>>
>>>> Bill Dunlap
>>>> TIBCO Software
>>>> wdunlap tibco.com
>>>>
>>>>
>>>> On Mon, Jun 10, 2019 at 6:38 AM Rob Foxall <rfoxall27 at gmail.com> wrote:
>>>>>
>>>>> Hi,
>>>>>
>>>>> (Re-posting here as per advice from r-help)
>>>>>
>>>>> I've got an R package that I periodically create in what I assume is
>>>>> an old-fashioned way:
>>>>>
>>>>> Within R: use "package.skeleton"
>>>>> Outside of R: update e.g. .rd files as appropriate
>>>>> Command window: run the following commands
>>>>> R CMD build packageName
>>>>> R CMD check packageName
>>>>> R CMD INSTALL --build packageName
>>>>>
>>>>> I am now getting an error on the R CMD build stage. Initially I had
>>>>> wanted to remove a package dependency (by not passing some functions
>>>>> to package.skeleton and editing my NAMESPACE and DESCRIPTION file
>>>>> appropriately), but on getting the error I tried to revert everything
>>>>> back to my last successful build (Feb 2019), however, the error
>>>>> persisted:
>>>>> R CMD build packageName
>>>>> * checking for file 'packageName/DESCRIPTION' ... OK
>>>>> * preparing 'packageName' :
>>>>> * checking DESCRIPTION meta-information ... OK
>>>>> * checking for LF line-endings in source and make files
>>>>> * checking for empty or unneeded directories
>>>>> * looking to see if a 'data/datalist' file should be added
>>>>> Error in if (any(update)) { : missing value where TRUE/FALSE needed
>>>>> Execution halted
>>>>>
>>>>> I am guessing that the error could be due to any of the last three
>>>>> lines that don't have an "OK", but I am completely stuck as to how to
>>>>> narrow it down further, and Dr. Google has already failed me.
>>>>>
>>>>> Using R version 3.6.0, R tools version 3.5.0.4 (I don't recall if had
>>>>> different versions previous time I built this package in Feb 2019).
>>>>> Attempt to reproduce error with dummy package failed (i.e. no issues
>>>>> with R CMD build).
>>>>>
>>>>> Cheers,
>>>>> Rob.
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> --
>> Sent from Gmail Mobile
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From r|ox@||27 @end|ng |rom gm@||@com  Wed Jun 12 15:31:06 2019
From: r|ox@||27 @end|ng |rom gm@||@com (Rob Foxall)
Date: Wed, 12 Jun 2019 21:31:06 +0800
Subject: [R-pkg-devel] R CMD build: "Error in if (any(update))"
In-Reply-To: <6f1d544b-e05f-2d51-065d-d9699dc2a2e7@statistik.tu-dortmund.de>
References: <CAGmx+tqZ7PFwfHkNFUxteX5va-1pPVy5Fn9N5TiFXBu3Mrq+Rg@mail.gmail.com>
 <CAF8bMcaY+tAF-iTGyg6EDKc-+sAu-_eEo0xrFtZiQbkyUB_UWw@mail.gmail.com>
 <CAGmx+tqhCv-c_yb+PPbYFFrF4fh7pU0w-MuWzG1Ruoui0BGSZg@mail.gmail.com>
 <CAARY7kiGRQ4iucVevuJxCJAeNfkdvL+N8h+7t30DjznG5w5DEw@mail.gmail.com>
 <CAGmx+toATVC8wRDHa8X0ECrCiyJCkZ88ntBg3GAAS1+-6EzfgQ@mail.gmail.com>
 <1d7da0a4-e4c7-476d-b9fb-43394fcfaeac@statistik.tu-dortmund.de>
 <CAGmx+toZDJiSLTdiDaHr+fO3egDSrD3KESNAzATKt_tGC9hg-Q@mail.gmail.com>
 <6f1d544b-e05f-2d51-065d-d9699dc2a2e7@statistik.tu-dortmund.de>
Message-ID: <CAGmx+tpLbB=ev2daUc8A+Hzdj9bapkbO6BS8GvZXW0+T_FQrEQ@mail.gmail.com>

Thanks so much for looking into this. You were right, my path that I
had been too lazy to update was pointing at an older installation of R
that I had been too lazy to uninstall.

On Wed, Jun 12, 2019 at 6:41 PM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
> So this is likely caused by your setup as I simply get
>
> $ R CMD build myPackage
> * checking for file 'myPackage/DESCRIPTION' ... OK * preparing 'myPackage':
> * checking DESCRIPTION meta-information ... OK
> * checking for LF line-endings in source and make files and shell scripts
> * checking for empty or unneeded directories
> * looking to see if a 'data/datalist' file should be added
> * building 'myPackage_1.0.tar.gz'
>
>
> Best,
> Uwe Ligges
>
>
>
>
>
>
> On 12.06.2019 10:54, Rob Foxall wrote:
> > Thank you, that is very kind. zip attached. As best as I can see the
> > summary is that there are no issues building/checking when done
> > internally in R session using devtools; but running command window "R
> > CMD build myPackage" fails.
> >
> > Cheers,
> > Rob.
> >
> > On Wed, Jun 12, 2019 at 4:29 PM Uwe Ligges
> > <ligges at statistik.tu-dortmund.de> wrote:
> >>
> >> Too many layers of complexity for me, can you take the package sources
> >> and zat /or zip) them for me and send them? Then I'll take a look.
> >> Best,
> >> Uwe Ligges
> >>
> >> On 12.06.2019 08:23, Rob Foxall wrote:
> >>> Thanks. I ran in R:
> >>> devtools::build("myPackage")
> >>> That gave me a warning:
> >>>        NB: this package now depends on R (>= 3.5.0)
> >>>        WARNING: Added dependency on R >= 3.5.0 because serialized
> >>> objects in  serialize/load version 3 cannot be read in older versions
> >>> of R.
> >>>        File(s) containing such objects: 'myPackage/R/sysdata.rda'
> >>> 'myPackage/data/myCol.rda'
> >>> But it didn't error. I then added the dependency to R >= 3.5.0 to my
> >>> DESCRIPTION file, and rerunning devtools::build now executed without
> >>> error or warning. However, in the command window "R CMD build
> >>> myPackage" still gives same error.
> >>> Then in R I ran:
> >>> devtools::check("myPackage")
> >>> It gave me a genuine error ("myplot" instead of "myPlot" in my
> >>> myPackage-package.rda file), and a couple of warnings. All of which I
> >>> fixed, and re-running the check gave me 0 errors/warnings/notes.
> >>> In the command window, "R CMD build myPackage" still gives the same error.
> >>>
> >>> On Wed, Jun 12, 2019 at 12:46 PM David Hugh-Jones
> >>> <davidhughjones at gmail.com> wrote:
> >>>>
> >>>> If you use devtools::check, I think it runs in the original R process, so you might be able to debug the error using eg options(error=recover).
> >>>>
> >>>> On Wed, 12 Jun 2019 at 02:31, Rob Foxall <rfoxall27 at gmail.com> wrote:
> >>>>>
> >>>>> Thanks for the replies. I am still stuck, although agree it is most
> >>>>> likely due to change to R version 3.6.0. I did however manage to
> >>>>> create a dummy package that now does re-create the same error, this
> >>>>> required the inclusion of a data object. The R CMD build error occurs
> >>>>> regardless of whether there is a sysdata.rda in the R subdirectory,
> >>>>> and whether there is a datalist in the data subdirectory. Apologies
> >>>>> for the lengthy "code" that follows:
> >>>>>
> >>>>> In R:
> >>>>> myCol <- rgb(0.9,0.5,0.5)
> >>>>> myPlot <- function(x){
> >>>>>      plot(x, col = myCol)
> >>>>>      return(NULL)
> >>>>> }
> >>>>> package.skeleton(name = "myPackage", list = c("myPlot", "myCol"))
> >>>>>
> >>>>> "Optionally" in R:
> >>>>> save(list = c("myCol"), file = "sysdata.rda")
> >>>>>
> >>>>> my DESCRIPTION file:
> >>>>> Package: myPackage
> >>>>> Type: Package
> >>>>> Title: Test Package
> >>>>> Version: 1.0
> >>>>> Date: 2019-06-11
> >>>>> Author: Rob Foxall <rob.foxall at test.com.au>
> >>>>> Maintainer: Rob Foxall <rob.foxall at test.com.au>
> >>>>> Description: To test making a package
> >>>>> License: GPL-2
> >>>>> LazyLoad: yes
> >>>>>
> >>>>> my NAMESPACE file:
> >>>>> exportPattern("^[[:alpha:]]+")
> >>>>>
> >>>>> contents of myPackage directory:
> >>>>> directories "data", "man", "R", files "DESCRIPTION", "NAMESPACE",
> >>>>> "Read-and-delete-me"
> >>>>> contents of data subdirectory:
> >>>>> myCol.rda, (optionally) datalist
> >>>>> contents of man subdirectory:
> >>>>> myCol.Rd, myPackage-package.Rd, myPlot.Rd
> >>>>> contents of R subdirectory:
> >>>>> myPlot.R, ("optionally") sysdata.rda
> >>>>>
> >>>>> The ".Rd" files:
> >>>>> myCol.Rd:
> >>>>> \name{myCol}
> >>>>> %
> >>>>> \alias{myCol}
> >>>>> %
> >>>>> \docType{data}
> >>>>> %
> >>>>> \title{A colour}
> >>>>> %
> >>>>> \description{It's a colour}
> >>>>> %
> >>>>> \usage{data(myCol)}
> >>>>> %
> >>>>> \format{
> >>>>> It is a colour, defined by:
> >>>>> rgb(red=0.9,green=0.5,blue=0.5)
> >>>>> }
> >>>>> %
> >>>>> \details{
> >>>>> Other, standard colours are available via sensible names. See \code{colours}. }
> >>>>> %
> >>>>> \source{See Me}
> >>>>> %
> >>>>> \references{Albers, J. (1975) \emph{Interaction of Colour}. Yale
> >>>>> University Press}
> >>>>> %
> >>>>> \examples{
> >>>>> myPlot(3)
> >>>>> }
> >>>>> %
> >>>>> \keyword{sysdata}
> >>>>>
> >>>>> myPackage-package.Rd:
> >>>>> \name{myPackage-package}
> >>>>> %
> >>>>> \alias{myPackage-package}
> >>>>> %
> >>>>> \alias{myPackage}
> >>>>> %
> >>>>> \docType{package}
> >>>>> %
> >>>>> \title{Test package}
> >>>>> %
> >>>>> \description{Testing making a package}
> >>>>> %
> >>>>> \details{
> >>>>> \tabular{ll}{
> >>>>> Package: \tab myPackage\cr
> >>>>> Type: \tab Package\cr
> >>>>> Version: \tab 1.0\cr
> >>>>> Date: \tab 2019-06-11\cr
> >>>>> License: \tab GPL-2\cr
> >>>>> LazyLoad: \tab yes\cr
> >>>>> }
> >>>>> %
> >>>>> Test package, dummy plot with dummy colour
> >>>>> }
> >>>>> %
> >>>>> \author{
> >>>>> Rob Foxall <rob.foxall at test.com>
> >>>>> Maintainer:  <rob.foxall at test.com>
> >>>>> }
> >>>>> %
> >>>>> \references{N.A.J. Hastings, Brian Peacock, Merran Evans (2000)
> >>>>> \emph{Statistical Distributions} John Wiley & Sons Inc}
> >>>>> %
> >>>>> \keyword{package}
> >>>>> %
> >>>>> \seealso{\code{\link{plot}}}
> >>>>> %
> >>>>> \examples{
> >>>>> myplot(3)
> >>>>> }
> >>>>>
> >>>>> myPlot.Rd
> >>>>> \name{myPlot}
> >>>>> %
> >>>>> \alias{myPlot}
> >>>>> %- Also NEED an '\alias' for EACH other topic documented here.
> >>>>> \title{Do a plot of a number}
> >>>>> %
> >>>>> \description{Plots a number with a set colour}
> >>>>> %
> >>>>> \usage{myPlot(x)}
> >>>>> %
> >>>>> \arguments{
> >>>>>     \item{x}{A number}
> >>>>> }
> >>>>> %
> >>>>> \details{Plots a number with a colour.}
> >>>>> %
> >>>>> \value{Returns null}
> >>>>> %
> >>>>> \author{Rob Foxall}
> >>>>> %
> >>>>> \note{There is no note}
> >>>>> %
> >>>>> \seealso{\code{\link{plot}}}
> >>>>> %
> >>>>> \examples{myPlot(3)}
> >>>>> %
> >>>>> \keyword{KPI}
> >>>>>
> >>>>>
> >>>>> On Tue, Jun 11, 2019 at 12:00 AM William Dunlap <wdunlap at tibco.com> wrote:
> >>>>>>
> >>>>>> You might be able to find where the error occurred by putting the following lines in ~/.Rprofile
> >>>>>>
> >>>>>> cat("~/.Rprofile: setting alternate error handler\n")
> >>>>>> options(
> >>>>>>       error=quote({
> >>>>>>           dump.frames()
> >>>>>>           writeLines(c("Stack trace", paste0("  ",names(last.dump))))}))
> >>>>>>
> >>>>>> Bill Dunlap
> >>>>>> TIBCO Software
> >>>>>> wdunlap tibco.com
> >>>>>>
> >>>>>>
> >>>>>> On Mon, Jun 10, 2019 at 6:38 AM Rob Foxall <rfoxall27 at gmail.com> wrote:
> >>>>>>>
> >>>>>>> Hi,
> >>>>>>>
> >>>>>>> (Re-posting here as per advice from r-help)
> >>>>>>>
> >>>>>>> I've got an R package that I periodically create in what I assume is
> >>>>>>> an old-fashioned way:
> >>>>>>>
> >>>>>>> Within R: use "package.skeleton"
> >>>>>>> Outside of R: update e.g. .rd files as appropriate
> >>>>>>> Command window: run the following commands
> >>>>>>> R CMD build packageName
> >>>>>>> R CMD check packageName
> >>>>>>> R CMD INSTALL --build packageName
> >>>>>>>
> >>>>>>> I am now getting an error on the R CMD build stage. Initially I had
> >>>>>>> wanted to remove a package dependency (by not passing some functions
> >>>>>>> to package.skeleton and editing my NAMESPACE and DESCRIPTION file
> >>>>>>> appropriately), but on getting the error I tried to revert everything
> >>>>>>> back to my last successful build (Feb 2019), however, the error
> >>>>>>> persisted:
> >>>>>>> R CMD build packageName
> >>>>>>> * checking for file 'packageName/DESCRIPTION' ... OK
> >>>>>>> * preparing 'packageName' :
> >>>>>>> * checking DESCRIPTION meta-information ... OK
> >>>>>>> * checking for LF line-endings in source and make files
> >>>>>>> * checking for empty or unneeded directories
> >>>>>>> * looking to see if a 'data/datalist' file should be added
> >>>>>>> Error in if (any(update)) { : missing value where TRUE/FALSE needed
> >>>>>>> Execution halted
> >>>>>>>
> >>>>>>> I am guessing that the error could be due to any of the last three
> >>>>>>> lines that don't have an "OK", but I am completely stuck as to how to
> >>>>>>> narrow it down further, and Dr. Google has already failed me.
> >>>>>>>
> >>>>>>> Using R version 3.6.0, R tools version 3.5.0.4 (I don't recall if had
> >>>>>>> different versions previous time I built this package in Feb 2019).
> >>>>>>> Attempt to reproduce error with dummy package failed (i.e. no issues
> >>>>>>> with R CMD build).
> >>>>>>>
> >>>>>>> Cheers,
> >>>>>>> Rob.
> >>>>>>>
> >>>>>>> ______________________________________________
> >>>>>>> R-package-devel at r-project.org mailing list
> >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-package-devel at r-project.org mailing list
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>
> >>>> --
> >>>> Sent from Gmail Mobile
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>


From d@v|dhughjone@ @end|ng |rom gm@||@com  Wed Jun 12 22:57:42 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Wed, 12 Jun 2019 21:57:42 +0100
Subject: [R-pkg-devel] Another CRAN-only bug
Message-ID: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>

Hi all,

Not for the first time, my package has a bug that isn't found on rhub,
travis, appveyor, or my local machine, but is found on CRAN. This time it's
Windows-only, so I can't even download a Docker image and investigate that
way.

TBH I am not very enthused by having to treat CRAN servers as "ground
truth", when there seems no way to reliably reproduce their configuration,
figure out what versions of packages are used, etc. Am I missing something?
Is another world possible?

Anyway, the error is at:
https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/
and it seems to relate to the openxlsx package, which is on 4.1.0.1 since
May 28 - presumably long enough for the latest version to be available on
win-builder. Any ideas would be welcome....

David

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Wed Jun 12 23:45:19 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 12 Jun 2019 23:45:19 +0200
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
Message-ID: <CALEXWq277T0YbMJhgG-gisMtmoe==3vaK3Vpiu-5=-aq93VrUQ@mail.gmail.com>

On Wed, 12 Jun 2019 at 22:58, David Hugh-Jones <davidhughjones at gmail.com> wrote:
>
> Hi all,
>
> Not for the first time, my package has a bug that isn't found on rhub,
> travis, appveyor, or my local machine, but is found on CRAN. This time it's
> Windows-only, so I can't even download a Docker image and investigate that
> way.
>
> TBH I am not very enthused by having to treat CRAN servers as "ground
> truth", when there seems no way to reliably reproduce their configuration,
> figure out what versions of packages are used, etc. Am I missing something?
> Is another world possible?
>
> Anyway, the error is at:
> https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/
> and it seems to relate to the openxlsx package, which is on 4.1.0.1 since
> May 28 - presumably long enough for the latest version to be available on
> win-builder. Any ideas would be welcome....

I see that you are writing and then reading a file, but you are not
using the session's temporary directory, and that's a source of
problems.

I?aki


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun 13 00:26:40 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 12 Jun 2019 18:26:40 -0400
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
Message-ID: <3c50e4e1-eb6e-fe31-abb6-33cb475c3682@gmail.com>

On 12/06/2019 4:57 p.m., David Hugh-Jones wrote:
> Hi all,
> 
> Not for the first time, my package has a bug that isn't found on rhub,
> travis, appveyor, or my local machine, but is found on CRAN. This time it's
> Windows-only, so I can't even download a Docker image and investigate that
> way.
> 
> TBH I am not very enthused by having to treat CRAN servers as "ground
> truth", when there seems no way to reliably reproduce their configuration,
> figure out what versions of packages are used, etc. Am I missing something?
> Is another world possible?

Nothing is forcing you to release your package on CRAN.  The only 
advantage to doing so is that they maintain high standards, which means 
people trust them.

Just put your package on Github, and anyone can use it, no matter how 
bad it is.

Duncan Murdoch

> 
> Anyway, the error is at:
> https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/
> and it seems to relate to the openxlsx package, which is on 4.1.0.1 since
> May 28 - presumably long enough for the latest version to be available on
> win-builder. Any ideas would be welcome....
> 
> David
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@v|dhughjone@ @end|ng |rom gm@||@com  Thu Jun 13 06:59:52 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Thu, 13 Jun 2019 05:59:52 +0100
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <3c50e4e1-eb6e-fe31-abb6-33cb475c3682@gmail.com>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
 <3c50e4e1-eb6e-fe31-abb6-33cb475c3682@gmail.com>
Message-ID: <CAARY7kiBnR3Qy4C2U5+ZWvdcv3ECh=r5-UMi9WsSS1FxX5Lk6w@mail.gmail.com>

Hi Duncan,

Of course I appreciate the value of a centralised repository, and I
acknowledge the hard work that goes into maintaining it. That does not mean
that it should be beyond criticism. I wrote out of frustration, but also
because I hope things could be better.

David



On Wed, 12 Jun 2019 at 23:26, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 12/06/2019 4:57 p.m., David Hugh-Jones wrote:
> > Hi all,
> >
> > Not for the first time, my package has a bug that isn't found on rhub,
> > travis, appveyor, or my local machine, but is found on CRAN. This time
> it's
> > Windows-only, so I can't even download a Docker image and investigate
> that
> > way.
> >
> > TBH I am not very enthused by having to treat CRAN servers as "ground
> > truth", when there seems no way to reliably reproduce their
> configuration,
> > figure out what versions of packages are used, etc. Am I missing
> something?
> > Is another world possible?
>
> Nothing is forcing you to release your package on CRAN.  The only
> advantage to doing so is that they maintain high standards, which means
> people trust them.
>
> Just put your package on Github, and anyone can use it, no matter how
> bad it is.
>
> Duncan Murdoch
>
> >
> > Anyway, the error is at:
> >
> https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/
> > and it seems to relate to the openxlsx package, which is on 4.1.0.1 since
> > May 28 - presumably long enough for the latest version to be available on
> > win-builder. Any ideas would be welcome....
> >
> > David
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> --
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jun 13 09:39:18 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 13 Jun 2019 09:39:18 +0200
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <CAARY7kiBnR3Qy4C2U5+ZWvdcv3ECh=r5-UMi9WsSS1FxX5Lk6w@mail.gmail.com>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
 <3c50e4e1-eb6e-fe31-abb6-33cb475c3682@gmail.com>
 <CAARY7kiBnR3Qy4C2U5+ZWvdcv3ECh=r5-UMi9WsSS1FxX5Lk6w@mail.gmail.com>
Message-ID: <34acfb75-3ac8-b83a-05a1-fea49b07bcc4@statistik.tu-dortmund.de>

You can assume that CRAN packages are available within a day for on 
demand checks and even at once for CRAN incoming checks on winbuilder.

Nevertheless, I have no idea where the problem comes from given the 
standard test mechanisms are not use and hence output does not show what 
the actual test was.

Best,
Uwe Ligges




On 13.06.2019 06:59, David Hugh-Jones wrote:
> Hi Duncan,
> 
> Of course I appreciate the value of a centralised repository, and I
> acknowledge the hard work that goes into maintaining it. That does not mean
> that it should be beyond criticism. I wrote out of frustration, but also
> because I hope things could be better.
> 
> David
> 
> 
> 
> On Wed, 12 Jun 2019 at 23:26, Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
> 
>> On 12/06/2019 4:57 p.m., David Hugh-Jones wrote:
>>> Hi all,
>>>
>>> Not for the first time, my package has a bug that isn't found on rhub,
>>> travis, appveyor, or my local machine, but is found on CRAN. This time
>> it's
>>> Windows-only, so I can't even download a Docker image and investigate
>> that
>>> way.
>>>
>>> TBH I am not very enthused by having to treat CRAN servers as "ground
>>> truth", when there seems no way to reliably reproduce their
>> configuration,
>>> figure out what versions of packages are used, etc. Am I missing
>> something?
>>> Is another world possible?
>>
>> Nothing is forcing you to release your package on CRAN.  The only
>> advantage to doing so is that they maintain high standards, which means
>> people trust them.
>>
>> Just put your package on Github, and anyone can use it, no matter how
>> bad it is.
>>
>> Duncan Murdoch
>>
>>>
>>> Anyway, the error is at:
>>>
>> https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/
>>> and it seems to relate to the openxlsx package, which is on 4.1.0.1 since
>>> May 28 - presumably long enough for the latest version to be available on
>>> win-builder. Any ideas would be welcome....
>>>
>>> David
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> --
> Sent from Gmail Mobile
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tngthom@@ng @end|ng |rom gm@||@com  Thu Jun 13 01:36:55 2019
From: tngthom@@ng @end|ng |rom gm@||@com (Thomas Ng)
Date: Wed, 12 Jun 2019 16:36:55 -0700
Subject: [R-pkg-devel] Inquiry about outdated perl on win-build
Message-ID: <CAO_EXcwS4y8Z1bgLeY=U8RtNZaVZgQHkE9SWOxtP+a+8shxgoA@mail.gmail.com>

Hey all,

I am trying to submit my R package to CRAN. I have previously tested on
win-builder but was unsuccessful to pass without ERROR due to the window
system still runs on outdated version of perl - 5.8.8 (13 years ago).

My package contains a fatpacked perl script that relies on a self contained
CPAN module which calls for a more later version of Perl - 5.14 (a version
came 9 years ago). This later version allows more freedom and tools to
express regex.

What should I do about this?

Thanks,
Thomas

	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Thu Jun 13 10:40:57 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Thu, 13 Jun 2019 09:40:57 +0100
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <34acfb75-3ac8-b83a-05a1-fea49b07bcc4@statistik.tu-dortmund.de>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
 <3c50e4e1-eb6e-fe31-abb6-33cb475c3682@gmail.com>
 <CAARY7kiBnR3Qy4C2U5+ZWvdcv3ECh=r5-UMi9WsSS1FxX5Lk6w@mail.gmail.com>
 <34acfb75-3ac8-b83a-05a1-fea49b07bcc4@statistik.tu-dortmund.de>
Message-ID: <CAARY7khazPROjeHPFcC9jhZWzeFfzwdn_n0A3Uw2S5nyK_SweQ@mail.gmail.com>

 Well, the test that fails is this one:
https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/tests_x64/testthat/test-openxlsx.R


The last line fails here:

  hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2],
add_colnames = TRUE)
  wb <- as_Workbook(hx)
  expect_error(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx",
overwrite = TRUE),
        regexp = NA) # openxlsx may emit messages
  dfr <- openxlsx::read.xlsx("test-xlsx.xlsx")
  expect_equivalent(class(dfr[[1]]), "numeric")
  expect_equivalent(class(dfr[[2]]), "numeric")
  expect_equivalent(class(dfr[[3]]), "character")
  expect_equal(dfr[[1]], 1:2 + 0.5)

Putting to one side the issue of testthat?s putative faults, I am happy to
debug this myself, but how can I reproduce the platform to do it on?

David

On Thu, 13 Jun 2019 at 08:39, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> You can assume that CRAN packages are available within a day for on
> demand checks and even at once for CRAN incoming checks on winbuilder.
>
> Nevertheless, I have no idea where the problem comes from given the
> standard test mechanisms are not use and hence output does not show what
> the actual test was.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 13.06.2019 06:59, David Hugh-Jones wrote:
> > Hi Duncan,
> >
> > Of course I appreciate the value of a centralised repository, and I
> > acknowledge the hard work that goes into maintaining it. That does not
> mean
> > that it should be beyond criticism. I wrote out of frustration, but also
> > because I hope things could be better.
> >
> > David
> >
> >
> >
> > On Wed, 12 Jun 2019 at 23:26, Duncan Murdoch <murdoch.duncan at gmail.com>
> > wrote:
> >
> >> On 12/06/2019 4:57 p.m., David Hugh-Jones wrote:
> >>> Hi all,
> >>>
> >>> Not for the first time, my package has a bug that isn't found on rhub,
> >>> travis, appveyor, or my local machine, but is found on CRAN. This time
> >> it's
> >>> Windows-only, so I can't even download a Docker image and investigate
> >> that
> >>> way.
> >>>
> >>> TBH I am not very enthused by having to treat CRAN servers as "ground
> >>> truth", when there seems no way to reliably reproduce their
> >> configuration,
> >>> figure out what versions of packages are used, etc. Am I missing
> >> something?
> >>> Is another world possible?
> >>
> >> Nothing is forcing you to release your package on CRAN.  The only
> >> advantage to doing so is that they maintain high standards, which means
> >> people trust them.
> >>
> >> Just put your package on Github, and anyone can use it, no matter how
> >> bad it is.
> >>
> >> Duncan Murdoch
> >>
> >>>
> >>> Anyway, the error is at:
> >>>
> >>
> https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/
> >>> and it seems to relate to the openxlsx package, which is on 4.1.0.1
> since
> >>> May 28 - presumably long enough for the latest version to be available
> on
> >>> win-builder. Any ideas would be welcome....
> >>>
> >>> David
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >> --
> > Sent from Gmail Mobile
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Thu Jun 13 11:54:17 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 13 Jun 2019 11:54:17 +0200
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <CAARY7khazPROjeHPFcC9jhZWzeFfzwdn_n0A3Uw2S5nyK_SweQ@mail.gmail.com>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
 <3c50e4e1-eb6e-fe31-abb6-33cb475c3682@gmail.com>
 <CAARY7kiBnR3Qy4C2U5+ZWvdcv3ECh=r5-UMi9WsSS1FxX5Lk6w@mail.gmail.com>
 <34acfb75-3ac8-b83a-05a1-fea49b07bcc4@statistik.tu-dortmund.de>
 <CAARY7khazPROjeHPFcC9jhZWzeFfzwdn_n0A3Uw2S5nyK_SweQ@mail.gmail.com>
Message-ID: <CALEXWq2k9+-XVOeCQ4D949PSVdB5ZpDcSJS1_m3tRurx4GybZg@mail.gmail.com>

On Thu, 13 Jun 2019 at 10:41, David Hugh-Jones <davidhughjones at gmail.com> wrote:
>
>  Well, the test that fails is this one:
> https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/tests_x64/testthat/test-openxlsx.R
>
>
> The last line fails here:
>
>   hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2],
> add_colnames = TRUE)
>   wb <- as_Workbook(hx)
>   expect_error(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx",
> overwrite = TRUE),
>         regexp = NA) # openxlsx may emit messages
>   dfr <- openxlsx::read.xlsx("test-xlsx.xlsx")
>   expect_equivalent(class(dfr[[1]]), "numeric")
>   expect_equivalent(class(dfr[[2]]), "numeric")
>   expect_equivalent(class(dfr[[3]]), "character")
>   expect_equal(dfr[[1]], 1:2 + 0.5)
>
> Putting to one side the issue of testthat?s putative faults, I am happy to
> debug this myself, but how can I reproduce the platform to do it on?

According to the errors,

-- 1. Failure: Data written in appropriate format (@test-openxlsx.R#107)  ------
dfr[[1]] not equal to 1:2 + 0.5.
2/2 mismatches (average diff: 0.5)
[1] 1 - 1.5 == -0.5
[2] 2 - 2.5 == -0.5

-- 2. Failure: Data written in appropriate format (@test-openxlsx.R#108)  ------
dfr[[2]] not equal to -1:-2 + 0.5.
2/2 mismatches (average diff: 0.5)
[1]  0 - -0.5 == 0.5
[2] -1 - -1.5 == 0.5

your values are being casted to integers at some point. There are 4
places in the test where this may have happened:

- huxtable()
- as_Workbook()
- openxlsx::saveWorkbook()
- openxlsx::read.xlsx()

I?aki


From d@v|dhughjone@ @end|ng |rom gm@||@com  Thu Jun 13 12:33:28 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Thu, 13 Jun 2019 11:33:28 +0100
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <CALEXWq2k9+-XVOeCQ4D949PSVdB5ZpDcSJS1_m3tRurx4GybZg@mail.gmail.com>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
 <3c50e4e1-eb6e-fe31-abb6-33cb475c3682@gmail.com>
 <CAARY7kiBnR3Qy4C2U5+ZWvdcv3ECh=r5-UMi9WsSS1FxX5Lk6w@mail.gmail.com>
 <34acfb75-3ac8-b83a-05a1-fea49b07bcc4@statistik.tu-dortmund.de>
 <CAARY7khazPROjeHPFcC9jhZWzeFfzwdn_n0A3Uw2S5nyK_SweQ@mail.gmail.com>
 <CALEXWq2k9+-XVOeCQ4D949PSVdB5ZpDcSJS1_m3tRurx4GybZg@mail.gmail.com>
Message-ID: <CAARY7kjbS9csuB8ah99K=k=ggAY3+KUba-Pbhe9Uex0yHKVq0A@mail.gmail.com>

That is true. But the test doesn?t fail on my machine, or several others,
so I still wonder how I am going to debug it.

On Thu, 13 Jun 2019 at 10:54, I?aki Ucar <iucar at fedoraproject.org> wrote:

> On Thu, 13 Jun 2019 at 10:41, David Hugh-Jones <davidhughjones at gmail.com>
> wrote:
> >
> >  Well, the test that fails is this one:
> >
> https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/tests_x64/testthat/test-openxlsx.R
> >
> >
> > The last line fails here:
> >
> >   hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2],
> > add_colnames = TRUE)
> >   wb <- as_Workbook(hx)
> >   expect_error(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx",
> > overwrite = TRUE),
> >         regexp = NA) # openxlsx may emit messages
> >   dfr <- openxlsx::read.xlsx("test-xlsx.xlsx")
> >   expect_equivalent(class(dfr[[1]]), "numeric")
> >   expect_equivalent(class(dfr[[2]]), "numeric")
> >   expect_equivalent(class(dfr[[3]]), "character")
> >   expect_equal(dfr[[1]], 1:2 + 0.5)
> >
> > Putting to one side the issue of testthat?s putative faults, I am happy
> to
> > debug this myself, but how can I reproduce the platform to do it on?
>
> According to the errors,
>
> -- 1. Failure: Data written in appropriate format (@test-openxlsx.R#107)
> ------
> dfr[[1]] not equal to 1:2 + 0.5.
> 2/2 mismatches (average diff: 0.5)
> [1] 1 - 1.5 == -0.5
> [2] 2 - 2.5 == -0.5
>
> -- 2. Failure: Data written in appropriate format (@test-openxlsx.R#108)
> ------
> dfr[[2]] not equal to -1:-2 + 0.5.
> 2/2 mismatches (average diff: 0.5)
> [1]  0 - -0.5 == 0.5
> [2] -1 - -1.5 == 0.5
>
> your values are being casted to integers at some point. There are 4
> places in the test where this may have happened:
>
> - huxtable()
> - as_Workbook()
> - openxlsx::saveWorkbook()
> - openxlsx::read.xlsx()
>
> I?aki
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jun 13 14:12:55 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 13 Jun 2019 14:12:55 +0200
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <CAARY7khazPROjeHPFcC9jhZWzeFfzwdn_n0A3Uw2S5nyK_SweQ@mail.gmail.com>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
 <3c50e4e1-eb6e-fe31-abb6-33cb475c3682@gmail.com>
 <CAARY7kiBnR3Qy4C2U5+ZWvdcv3ECh=r5-UMi9WsSS1FxX5Lk6w@mail.gmail.com>
 <34acfb75-3ac8-b83a-05a1-fea49b07bcc4@statistik.tu-dortmund.de>
 <CAARY7khazPROjeHPFcC9jhZWzeFfzwdn_n0A3Uw2S5nyK_SweQ@mail.gmail.com>
Message-ID: <a78de997-6530-df1a-dfc1-5f5be71636fe@statistik.tu-dortmund.de>

Use winbuilder.

Best,
Uwe Ligges

On 13.06.2019 10:40, David Hugh-Jones wrote:
>  ?Well, the test that fails is this one:
> https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/tests_x64/testthat/test-openxlsx.R
> 
> 
> The last line fails here:
> 
>    hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2], add_colnames = TRUE)
>    wb <- as_Workbook(hx)
>    expect_error(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx", overwrite = TRUE),
>          regexp = NA) # openxlsx may emit messages
>    dfr <- openxlsx::read.xlsx("test-xlsx.xlsx")
>    expect_equivalent(class(dfr[[1]]), "numeric")
>    expect_equivalent(class(dfr[[2]]), "numeric")
>    expect_equivalent(class(dfr[[3]]), "character")
>    expect_equal(dfr[[1]], 1:2 + 0.5)
> 
> Putting to one side the issue of testthat?s putative faults, I am happy 
> to debug this myself, but how can I reproduce the platform to do it on?
> 
> David
> 
> On Thu, 13 Jun 2019 at 08:39, Uwe Ligges 
> <ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
>     You can assume that CRAN packages are available within a day for on
>     demand checks and even at once for CRAN incoming checks on winbuilder.
> 
>     Nevertheless, I have no idea where the problem comes from given the
>     standard test mechanisms are not use and hence output does not show
>     what
>     the actual test was.
> 
>     Best,
>     Uwe Ligges
> 
> 
> 
> 
>     On 13.06.2019 06:59, David Hugh-Jones wrote:
>      > Hi Duncan,
>      >
>      > Of course I appreciate the value of a centralised repository, and I
>      > acknowledge the hard work that goes into maintaining it. That
>     does not mean
>      > that it should be beyond criticism. I wrote out of frustration,
>     but also
>      > because I hope things could be better.
>      >
>      > David
>      >
>      >
>      >
>      > On Wed, 12 Jun 2019 at 23:26, Duncan Murdoch
>     <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
>      > wrote:
>      >
>      >> On 12/06/2019 4:57 p.m., David Hugh-Jones wrote:
>      >>> Hi all,
>      >>>
>      >>> Not for the first time, my package has a bug that isn't found
>     on rhub,
>      >>> travis, appveyor, or my local machine, but is found on CRAN.
>     This time
>      >> it's
>      >>> Windows-only, so I can't even download a Docker image and
>     investigate
>      >> that
>      >>> way.
>      >>>
>      >>> TBH I am not very enthused by having to treat CRAN servers as
>     "ground
>      >>> truth", when there seems no way to reliably reproduce their
>      >> configuration,
>      >>> figure out what versions of packages are used, etc. Am I missing
>      >> something?
>      >>> Is another world possible?
>      >>
>      >> Nothing is forcing you to release your package on CRAN.? The only
>      >> advantage to doing so is that they maintain high standards,
>     which means
>      >> people trust them.
>      >>
>      >> Just put your package on Github, and anyone can use it, no
>     matter how
>      >> bad it is.
>      >>
>      >> Duncan Murdoch
>      >>
>      >>>
>      >>> Anyway, the error is at:
>      >>>
>      >>
>     https://win-builder.r-project.org/incoming_pretest/huxtable_4.6.0_20190612_195453/Windows/examples_and_tests/
>      >>> and it seems to relate to the openxlsx package, which is on
>     4.1.0.1 since
>      >>> May 28 - presumably long enough for the latest version to be
>     available on
>      >>> win-builder. Any ideas would be welcome....
>      >>>
>      >>> David
>      >>>
>      >>>? ? ? ? [[alternative HTML version deleted]]
>      >>>
>      >>> ______________________________________________
>      >>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>
>      >>
>      >> --
>      > Sent from Gmail Mobile
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
> 
> -- 
> Sent from Gmail Mobile


From edd @end|ng |rom deb|@n@org  Thu Jun 13 14:37:05 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 13 Jun 2019 07:37:05 -0500
Subject: [R-pkg-devel] Another CRAN-only bug
In-Reply-To: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
References: <CAARY7kjbuXMtKOBaYnsbepMRWdUuU4ZoLez46H3RZu4JEXHXVA@mail.gmail.com>
Message-ID: <23810.17265.118481.973235@rob.eddelbuettel.com>


On 12 June 2019 at 21:57, David Hugh-Jones wrote:
| Not for the first time, my package has a bug that isn't found on rhub,
| travis, appveyor, or my local machine, but is found on CRAN. This time it's
| Windows-only, so I can't even download a Docker image and investigate that
| way.

Two options for Windows that mostly work:

 - rhub
 - win-builder

Both are well-known resources, you may want to look into those.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From gruen@t@eud| @end|ng |rom zed@t@|u-ber||n@de  Fri Jun 14 11:04:12 2019
From: gruen@t@eud| @end|ng |rom zed@t@|u-ber||n@de (Michael Gruenstaeudl)
Date: Fri, 14 Jun 2019 11:04:12 +0200
Subject: [R-pkg-devel] Installing conda dependecy onAttach
Message-ID: <1cbcb677-099f-6f43-5ab3-903f0be539ff@zedat.fu-berlin.de>

Assume an R package (`myRpackage`) that has a conda package 
(`condaDependecy`) as a system requirement. The file `DESCRIPTION` of 
the R package would read like:

     Package: myRpackage
     ...
     SystemRequirements: condaDependecy (>= 0.1)
     ...

How can I ensure the automatic installation of this condaDependecy (i.e. 
`conda install condaDependency`) upon installing the R package itself 
(i.e. `install.packages("myRpackage")`), assuming that myRpackage is 
listed on CRAN?

I would prefer a method less "clunky" as

     .onAttach = function(libname = find.package("myRpackage"), pkgname 
= "myRpackage") {
         system("conda install -y condaDependency")
     }


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jun 14 11:55:09 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 14 Jun 2019 05:55:09 -0400
Subject: [R-pkg-devel] Installing conda dependecy onAttach
In-Reply-To: <1cbcb677-099f-6f43-5ab3-903f0be539ff@zedat.fu-berlin.de>
References: <1cbcb677-099f-6f43-5ab3-903f0be539ff@zedat.fu-berlin.de>
Message-ID: <aef76c83-2908-cb09-c919-5fa1a10f86b0@gmail.com>

On 14/06/2019 5:04 a.m., Michael Gruenstaeudl wrote:
> Assume an R package (`myRpackage`) that has a conda package
> (`condaDependecy`) as a system requirement. The file `DESCRIPTION` of
> the R package would read like:
> 
>       Package: myRpackage
>       ...
>       SystemRequirements: condaDependecy (>= 0.1)
>       ...
> 
> How can I ensure the automatic installation of this condaDependecy (i.e.
> `conda install condaDependency`) upon installing the R package itself
> (i.e. `install.packages("myRpackage")`), assuming that myRpackage is
> listed on CRAN?

You can't do that in a CRAN package.  You're not allowed to modify the 
user's system.

What you can do is include a function to install the dependency, and in 
your .onLoad (not .onAttach, which should rarely be used) try to detect 
if it is present.  If it is not, you can print a message telling the 
user what to do, and fail the load with a call to stop().

Duncan Murdoch

> 
> I would prefer a method less "clunky" as
> 
>       .onAttach = function(libname = find.package("myRpackage"), pkgname
> = "myRpackage") {
>           system("conda install -y condaDependency")
>       }
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Jun 14 16:01:24 2019
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 14 Jun 2019 16:01:24 +0200
Subject: [R-pkg-devel] [External] Re: try() in R CMD check --as-cran
In-Reply-To: <alpine.DEB.2.21.1906071346460.3079@luke-Latitude-7480>
References: <bc6d6df1-33ef-5e1d-94b3-cac5ae29c31d@gmail.com>
 <515cde10-7917-273b-2818-460e86f4e4a0@gmail.com>
 <22ff3a24-1479-4ead-502e-075bddd9739a@fau.de>
 <0ab16d9d-2fcd-4fff-4838-93cb09cfe5bc@gmail.com>
 <a396aff6-28d6-caa8-095c-04685f4cab98@gmail.com>
 <CAF8bMca-sbnd555P_hH_nmT7Edes2EBsvDs8UM7015fSCyj8iw@mail.gmail.com>
 <84a834a0-a75e-cd39-3659-04fc8699db6e@gmail.com>
 <CAF8bMcZ_bMxci-TMLCcBrgJu94jTPQc+bOCEiMXiZkBK46x5NQ@mail.gmail.com>
 <alpine.DEB.2.21.1906071346460.3079@luke-Latitude-7480>
Message-ID: <267bc62e-5261-17b3-4915-791fd7bec337@gmail.com>

The advantage of "abort" (R_Suicide) over the default (R error) is that 
it cannot be caught accidentally, so that one can detect more errors, 
and it may be easier to find where the error happened. To make the 
default behavior less surprising/more user friendly, and to allow 
intentional catching of these errors, the default for R CMD check 
--as-cran was changed in R-devel so that the normal R error is thrown, 
and the documentation in R Internals updated accordingly. One thus has 
to set the variable explicitly to get the stricter checks.

Best
Tomas

On 6/7/19 8:51 PM, Tierney, Luke wrote:
> A simplified version without a package:
>
> Sys.setenv("_R_CHECK_LENGTH_1_LOGIC2_"="abort,verbose")
> tryCatch(1:3 || 1, error = identity)
>
> Running this aborts the session since it calls R_Suicide without first
> signaling a condition to try any available handlers. Should be easy to
> change, but I don't know if there are any downsides for the CRAN
> workflow. I'll look into it.
>
> Best,
>
> luke
>
>
> On Fri, 7 Jun 2019, William Dunlap wrote:
>
>> I've attached a package, ppp_0.1.tar.gz, which probably will not get
>> through to R-help, that illustrates this.
>> It contains one function which, by default, triggers a condition-length>1
>> issue:
>>    f <- function(x = 1:3)
>>    {
>>        if (x > 1) {
>>            x <- -x
>>        }
>>        stop("this function always gives an error")
>>    }
>> and the help file example is
>>    try(f())
>>
>> Then
>>    env _R_CHECK_LENGTH_1_CONDITION_=abort,verbose R-3.6.0 CMD check
>> --as-cran ppp_0.1.tar.gz
>> results in
>> * checking examples ... ERROR
>> Running examples in ?ppp-Ex.R? failed
>> The error most likely occurred in:
>>
>>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>> ### Name: f
>>> ### Title: Cause an error
>>> ### Aliases: f
>>> ### Keywords: error
>>>
>>> ### ** Examples
>>>
>>> try(f())
>> ----------- FAILURE REPORT --------------
>> --- failure: the condition has length > 1 ---
>> --- srcref ---
>> :
>> --- package (from environment) ---
>> ppp
>> --- call from context ---
>> f()
>> --- call from argument ---
>> if (x > 1) {
>>     x <- -x
>> }
>> --- R stacktrace ---
>> where 1: f()
>> where 2: doTryCatch(return(expr), name, parentenv, handler)
>> where 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>> where 4: tryCatchList(expr, classes, parentenv, handlers)
>> where 5: tryCatch(expr, error = function(e) {
>>     call <- conditionCall(e)
>>     if (!is.null(call)) {
>>         if (identical(call[[1L]], quote(doTryCatch)))
>>             call <- sys.call(-4L)
>>         dcall <- deparse(call)[1L]
>>         prefix <- paste("Error in", dcall, ": ")
>>         LONG <- 75L
>>         sm <- strsplit(conditionMessage(e), "\n")[[1L]]
>>         w <- 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")
>>         if (is.na(w))
>>             w <- 14L + nchar(dcall, type = "b") + nchar(sm[1L],
>>                 type = "b")
>>         if (w > LONG)
>>             prefix <- paste0(prefix, "\n  ")
>>     }
>>     else prefix <- "Error : "
>>     msg <- paste0(prefix, conditionMessage(e), "\n")
>>     .Internal(seterrmessage(msg[1L]))
>>     if (!silent && isTRUE(getOption("show.error.messages"))) {
>>         cat(msg, file = outFile)
>>         .Internal(printDeferredWarnings())
>>     }
>>     invisible(structure(msg, class = "try-error", condition = e))
>> })
>> where 6: try(f())
>>
>> --- value of length: 3 type: logical ---
>> [1] FALSE  TRUE  TRUE
>> --- function from context ---
>> function (x = 1:3)
>> {
>>     if (x > 1) {
>>         x <- -x
>>     }
>>     stop("this function always gives an error")
>> }
>> <bytecode: 0x4f413d0>
>> <environment: namespace:ppp>
>> --- function search by body ---
>> Function f in namespace ppp has this body.
>> ----------- END OF FAILURE REPORT --------------
>> Fatal error: the condition has length > 1
>> * checking PDF version of manual ... OK
>> * DONE
>>
>> Status: 1 ERROR, 1 NOTE
>> See
>>   ?/tmp/bill/ppp.Rcheck/00check.log?
>> for details.
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>>
>> On Fri, Jun 7, 2019 at 10:21 AM Duncan Murdoch <murdoch.duncan at gmail.com>
>> wrote:
>>
>>> On 07/06/2019 12:32 p.m., William Dunlap wrote:
>>>> The length-condition-not-equal-to-one checks will cause R to shutdown
>>>> even if the code in a tryCatch().
>>> That's strange.  I'm unable to reproduce it with my tries, and John's
>>> package is no longer online.  Do you have an example I could look at?
>>>
>>> Duncan Murdoch
>>>
>>>> Bill Dunlap
>>>> TIBCO Software
>>>> wdunlap tibco.com <http://tibco.com>
>>>>
>>>>
>>>> On Fri, Jun 7, 2019 at 7:47 AM Duncan Murdoch <murdoch.duncan at gmail.com
>>>> <mailto:murdoch.duncan at gmail.com>> wrote:
>>>>
>>>>      On 07/06/2019 9:46 a.m., J C Nash wrote:
>>>>      > Should try() not stop those checks from forcing an error?
>>>>
>>>>      try(stop("msg"))  will print the error message, but won't stop
>>>>      execution.  Presumably the printed message is what is causing you
>>>>      problems.  If you want to suppress that, use
>>>>
>>>>      try(stop("msg"), silent = TRUE)
>>>>
>>>>      Duncan Murdoch
>>>>
>>>>      >
>>>>      > I recognize that this is the failure -- it is indeed the check
>>>>      I'm trying to
>>>>      > catch -- but I don't want tests of such checks to fail my package.
>>>>      >
>>>>      > JN
>>>>      >
>>>>      > On 2019-06-07 9:31 a.m., Sebastian Meyer wrote:
>>>>      >> The failure stated in the R CMD check failure report is:
>>>>      >>
>>>>      >>>   --- failure: length > 1 in coercion to logical ---
>>>>      >>
>>>>      >> This comes from --as-cran performing useful extra checks via
>>>>      setting the
>>>>      >> environment variable _R_CHECK_LENGTH_1_LOGIC2_, which means:
>>>>      >>
>>>>      >>> check if either argument of the binary operators && and || has
>>>>      length greater than one.
>>>>      >>
>>>>      >> (see
>>>>      https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Tools)
>>>>      >>
>>>>      >> The failure report also states the source of the failure:
>>>>      >>
>>>>      >>>   --- call from context ---
>>>>      >>> fchk(x, benbad, trace = 3, y)
>>>>      >>>   --- call from argument ---
>>>>      >>> is.infinite(fval) || is.na <http://is.na>(fval)
>>>>      >>
>>>>      >> The problem is that both is.infinite(fval) and is.na
>>>>      <http://is.na>(fval) return
>>>>      >> vectors of length 10 in your test case:
>>>>      >>
>>>>      >>>   --- value of length: 10 type: logical ---
>>>>      >>>   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
>>> FALSE
>>>>      >>
>>>>      >> The || operator works on length 1 Booleans. Since fval can be of
>>>>      length
>>>>      >> greater than 1 at that point, the proper condition seems to be:
>>>>      >>
>>>>      >> any(is.infinite(fval)) || any(is.na <http://is.na>(fval))
>>>>      >>
>>>>      >> Best regards,
>>>>      >>
>>>>      >>      Sebastian
>>>>      >>
>>>>      >>
>>>>      >> Am 07.06.19 um 14:53 schrieb J C Nash:
>>>>      >>> Sorry reply not quicker. For some reason I'm not getting
>>>>      anything in the thread I started!
>>>>      >>> I found the responses in the archives. Perhaps cc:
>>>>      nashjc at uottawa.ca <mailto:nashjc at uottawa.ca> please.
>>>>      >>>
>>>>      >>> I have prepared a tiny (2.8K) package at
>>>>      >>> http://web.ncf.ca/nashjc/jfiles/fchk_2019-6.5.tar.gz
>>>>      >>>
>>>>      >>> R CMD check --> OK
>>>>      >>>
>>>>      >>> R CMD check --as-cran --> 1 ERROR, 1 NOTE
>>>>      >>>
>>>>      >>> The error is in an example:
>>>>      >>>
>>>>      >>>> benbad<-function(x, y){
>>>>      >>>>     # y may be provided with different structures
>>>>      >>>>     f<-(x-y)^2
>>>>      >>>> } # very simple, but ...
>>>>      >>>>
>>>>      >>>> y<-1:10
>>>>      >>>> x<-c(1)
>>>>      >>>> cat("test benbad() with y=1:10, x=c(1)\n")
>>>>      >>>> tryfc01 <- try(fc01<-fchk(x, benbad, trace=3, y))
>>>>      >>>> print(tryfc01)
>>>>      >>>> print(fc01)
>>>>      >>>
>>>>      >>> There's quite a lot of output, but it doesn't make much sense
>>>>      to me, as
>>>>      >>> it refers to code that I didn't write.
>>>>      >>>
>>>>      >>> The function fchk is attempting to check if functions provided
>>> for
>>>>      >>> optimization do not violate some conditions e.g., character
>>>>      rather than
>>>>      >>> numeric etc.
>>>>      >>>
>>>>      >>> JN
>>>>      >>>
>>>>      >>>
>>>>      >>> On 2019-06-07 8:44 a.m., J C Nash wrote:
>>>>      >>>> Uwe Ligges ||gge@ @end|ng |rom @t at t|@t|k at tu-dortmund@de
>>>>      >>>> Fri Jun 7 11:44:37 CEST 2019
>>>>      >>>>
>>>>      >>>>      Previous message (by thread): [R-pkg-devel] try() in R
>>>>      CMD check --as-cran
>>>>      >>>>      Next message (by thread): [R-pkg-devel] using package
>>>>      data in package code
>>>>      >>>>      Messages sorted by: [ date ] [ thread ] [ subject ] [
>>>>      author ]
>>>>      >>>>
>>>>      >>>> Right, what problem are you talking about? Can you tell us
>>>>      which check
>>>>      >>>> it is and what it actually complained about.
>>>>      >>>> There is no check that looks at the sizes of x and y in
>>>>      exypressions
>>>>      >>>> such as
>>>>      >>>> (x - y)^2.
>>>>      >>>> as far as I know.
>>>>      >>>>
>>>>      >>>> Best,
>>>>      >>>> Uwe
>>>>      >>>>
>>>>      >>>> On 07.06.2019 10:33, Berry Boessenkool wrote:
>>>>      >>>>>
>>>>      >>>>> Not entirely sure if this is what you're looking for:
>>>>      >>>>>
>>>>
>>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R
>>>>      >>>>> It does contain --as-cran a few times and there's the
>>>>      change-history:
>>>>      >>>>>
>>>>
>>> https://github.com/wch/r-source/commits/trunk/src/library/tools/R/check.R
>>>>      >>>>>
>>>>      >>>>> Regards,
>>>>      >>>>> Berry
>>>>      >>>>>
>>>>      >>>>>
>>>>      >>>>> ________________________________
>>>>      >>>>> From: R-package-devel <r-package-devel-bounces using
>>>>      r-project.org <http://r-project.org>> on behalf of J C Nash
>>>>      <profjcnash using gmail.com <http://gmail.com>>
>>>>      >>>>> Sent: Thursday, June 6, 2019 15:03
>>>>      >>>>> To: List r-package-devel
>>>>      >>>>> Subject: [R-pkg-devel] try() in R CMD check --as-cran
>>>>      >>>>>
>>>>      >>>>> After making a small fix to my optimx package, I ran my usual
>>>>      R CMD check --as-cran.
>>>>      >>>>>
>>>>      >>>>> To my surprise, I got two ERRORs unrelated to the change. The
>>>>      errors popped up in
>>>>      >>>>> a routine designed to check the call to the user objective
>>>>      function. In particular,
>>>>      >>>>> one check is that the size of vectors is the same in
>>>>      expressions like (x - y)^2.
>>>>      >>>>> This works fine with R CMD check, but the --as-cran seems to
>>>>      have changed and it
>>>>      >>>>> pops an error, even when the call is inside try(). The irony
>>>>      that the routine in
>>>>      >>>>> question is intended to avoid problems like this is not lost
>>>>      on me.
>>>>      >>>>>
>>>>      >>>>> I'm working on a small reproducible example, but it's not
>>>>      small enough yet.
>>>>      >>>>> In the meantime, I'm looking for the source codes of the
>>>>      scripts for "R CMD check" and
>>>>      >>>>> "R CMD check --as-cran" so I can work out why there is this
>>>>      difference, which seems
>>>>      >>>>> to be recent.
>>>>      >>>>>
>>>>      >>>>> Can someone send/post a link? I plan to figure this out and
>>>>      provide feedback,
>>>>      >>>>> as I suspect it is going to affect others. However, it may be
>>>>      a few days or even
>>>>      >>>>> weeks if past experience is a guide.
>>>>      >>>>>
>>>>      >>>>> JN
>>>>      >>>>>
>>>>      >>>>> ______________________________________________
>>>>      >>>>> R-package-devel using r-project.org <http://r-project.org>
>>>>      mailing list
>>>>      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>      >>>>>
>>>>      >>>>>   [[alternative HTML version deleted]]
>>>>      >>>>>
>>>>      >>>>> ______________________________________________
>>>>      >>>>> R-package-devel using r-project.org <http://r-project.org>
>>>>      mailing list
>>>>      >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>      >>>>>
>>>>      >>>>
>>>>      >>>
>>>>      >>> ______________________________________________
>>>>      >>> R-package-devel at r-project.org
>>>>      <mailto:R-package-devel at r-project.org> mailing list
>>>>      >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>      >>>
>>>>      >>
>>>>      >> ______________________________________________
>>>>      >> R-package-devel at r-project.org
>>>>      <mailto:R-package-devel at r-project.org> mailing list
>>>>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>      >>
>>>>      >
>>>>      > ______________________________________________
>>>>      > R-package-devel at r-project.org
>>>>      <mailto:R-package-devel at r-project.org> mailing list
>>>>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>      >
>>>>
>>>>      ______________________________________________
>>>>      R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>>>      mailing list
>>>>      https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>


From tr@ver@c @end|ng |rom gm@||@com  Sat Jun 15 10:37:53 2019
From: tr@ver@c @end|ng |rom gm@||@com (Travers Ching)
Date: Sat, 15 Jun 2019 01:37:53 -0700
Subject: [R-pkg-devel] How do I tell which alt-rep methods need to be
 implemented?
Message-ID: <CAPLMX9GhRnKDuX884fg7GtZy4ci8b2991ux3LFjOE9aOY=DKdA@mail.gmail.com>

Greetings,

I have a package with alt-rep strings and I just learned from a bug report
that the "set_elt" method is required based on an interaction with another
package.

Error: "ALTSTRING classes must provide a Set_elt".

Previously, I thought this function wasn't necessary to implement, based on
my reading of the tutorial by Romain Francois.  I searched for
documentation and looked at the header file, but I couldn't determine which
methods are required.  Could someone point me in the right direction?

Best,
Travers

	[[alternative HTML version deleted]]


From h@|@|eh@k@m@r| @end|ng |rom un|v-evry@|r  Sun Jun 16 16:10:34 2019
From: h@|@|eh@k@m@r| @end|ng |rom un|v-evry@|r (halaleh kamari)
Date: Sun, 16 Jun 2019 16:10:34 +0200 (CEST)
Subject: [R-pkg-devel] package submission errors gsl
Message-ID: <438619228.2452052.1560694234858.JavaMail.zimbra@univ-evry.fr>

Hi, 
I'm trying to submit my first package to cran. I got an email saying that my package does not pass the incoming checks automatically. 
In fact I got 1 ERROR which is related to the RcppGSL package that I use in my package. 
The relevant problem is: 

Flavor: r-devel-windows-ix86+x86_64 
Check: whether package can be installed, Result: ERROR 
Installation failed. 

Flavor: r-devel-linux-x86_64-debian-gcc 
Check: whether package can be installed, Result: ERROR 
Installation failed. 

and for each platform I got the following error: 

g++-8: error: /usr/local/lib/libgsl.a: No such file or directory 

g++.exe: error: /usr/local/lib/libgsl.a: No such file or directory 

I add the script ./src/Makevars to precise the path of the gsl libraries and headers, it works without error on my MacBook. 
my Makevars file: 
CXX=clang++ 
PKG_CPPFLAGS = -I/usr/local/include/gsl 
PKG_LIBS = $(GSL_LIBS) $(BLAS_LIBS) $(FLIBS) /usr/local/lib/libgsl.a 

I think I have to make a configure script looking for gsl. After the web searching I haven't find any article that explains how to do that. I am hoping you can help. 

Thanks a lot, 

Halaleh 


	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Sun Jun 16 17:41:17 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 16 Jun 2019 17:41:17 +0200
Subject: [R-pkg-devel] package submission errors gsl
In-Reply-To: <438619228.2452052.1560694234858.JavaMail.zimbra@univ-evry.fr>
References: <438619228.2452052.1560694234858.JavaMail.zimbra@univ-evry.fr>
Message-ID: <CALEXWq1rHo-savH7Sa7MRn=MTsRUG1=3Q5i0jb3RGGWAk+J-cg@mail.gmail.com>

On Sun, 16 Jun 2019 at 17:25, halaleh kamari
<halaleh.kamari at univ-evry.fr> wrote:
>
> Hi,
> I'm trying to submit my first package to cran. I got an email saying that my package does not pass the incoming checks automatically.
> In fact I got 1 ERROR which is related to the RcppGSL package that I use in my package.
> The relevant problem is:
>
> Flavor: r-devel-windows-ix86+x86_64
> Check: whether package can be installed, Result: ERROR
> Installation failed.
>
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: whether package can be installed, Result: ERROR
> Installation failed.
>
> and for each platform I got the following error:
>
> g++-8: error: /usr/local/lib/libgsl.a: No such file or directory
>
> g++.exe: error: /usr/local/lib/libgsl.a: No such file or directory
>
> I add the script ./src/Makevars to precise the path of the gsl libraries and headers, it works without error on my MacBook.
> my Makevars file:
> CXX=clang++

Don't specify the compiler in the package's Makevars file.

> PKG_CPPFLAGS = -I/usr/local/include/gsl
> PKG_LIBS = $(GSL_LIBS) $(BLAS_LIBS) $(FLIBS) /usr/local/lib/libgsl.a
>
> I think I have to make a configure script looking for gsl. After the web searching I haven't find any article that explains how to do that. I am hoping you can help.

RcppGSL's intro vignette documents how to link to it. Also there are
others packages on CRAN linking to it (RcppZiggurat, for example), so
you can inspect what they do.

I?aki


From m@rt@@k@r@@@ @end|ng |rom gm@||@com  Mon Jun 17 11:12:14 2019
From: m@rt@@k@r@@@ @end|ng |rom gm@||@com (=?UTF-8?B?TWFydGEgS2FyYcWb?=)
Date: Mon, 17 Jun 2019 11:12:14 +0200
Subject: [R-pkg-devel] Unsure how to fix 'Package required but not
 available: 'dvmisc'' (which is CRAN pkg) error
Message-ID: <CADVZz_o=bLCU+w=Qh1y9xJkqRS8Z2-uamSENa1KzWSuM2HpaMA@mail.gmail.com>

Dear all,

I am trying to submit update to my R package `adept` (GitHub code link
<https://github.com/martakarass/adept>) and I got pre-test error on Windows
(error check log link
<https://win-builder.r-project.org/incoming_pretest/adept_1.1.2_20190616_162134/Windows/00check.log>
)

   - Error says: "Package required but not available: 'dvmisc'"

Note:

   - `dvmisc` is a R package available on CRAN (link
   <https://cran.r-project.org/web/packages/dvmisc/index.html>)
   - My `adept` package has `dvmisc` package listed in DESCRIPTION file (
   link <https://github.com/martakarass/adept/blob/master/DESCRIPTION>)
   - My `adept` package does pass AppVeyor tests on R versions release,
   devel (link <https://ci.appveyor.com/project/martakarass/adept>)

 Please kindly advice how I may fix the error to make it CRAN-submittable.

Thank you,
Marta Karas

	[[alternative HTML version deleted]]


From h@|@|eh@k@m@r| @end|ng |rom un|v-evry@|r  Mon Jun 17 12:03:56 2019
From: h@|@|eh@k@m@r| @end|ng |rom un|v-evry@|r (halaleh kamari)
Date: Mon, 17 Jun 2019 12:03:56 +0200 (CEST)
Subject: [R-pkg-devel] package submission errors gsl
In-Reply-To: <CALEXWq1rHo-savH7Sa7MRn=MTsRUG1=3Q5i0jb3RGGWAk+J-cg@mail.gmail.com>
References: <438619228.2452052.1560694234858.JavaMail.zimbra@univ-evry.fr>
 <CALEXWq1rHo-savH7Sa7MRn=MTsRUG1=3Q5i0jb3RGGWAk+J-cg@mail.gmail.com>
Message-ID: <378508462.159167.1560765836625.JavaMail.zimbra@univ-evry.fr>

Thanks a lot.

----- Mail original -----
De: "I?aki Ucar" <iucar at fedoraproject.org>
?: "halaleh kamari" <halaleh.kamari at univ-evry.fr>
Cc: "r-package-devel" <r-package-devel at r-project.org>
Envoy?: Dimanche 16 Juin 2019 17:41:17
Objet: Re: [R-pkg-devel] package submission errors gsl

On Sun, 16 Jun 2019 at 17:25, halaleh kamari
<halaleh.kamari at univ-evry.fr> wrote:
>
> Hi,
> I'm trying to submit my first package to cran. I got an email saying that my package does not pass the incoming checks automatically.
> In fact I got 1 ERROR which is related to the RcppGSL package that I use in my package.
> The relevant problem is:
>
> Flavor: r-devel-windows-ix86+x86_64
> Check: whether package can be installed, Result: ERROR
> Installation failed.
>
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: whether package can be installed, Result: ERROR
> Installation failed.
>
> and for each platform I got the following error:
>
> g++-8: error: /usr/local/lib/libgsl.a: No such file or directory
>
> g++.exe: error: /usr/local/lib/libgsl.a: No such file or directory
>
> I add the script ./src/Makevars to precise the path of the gsl libraries and headers, it works without error on my MacBook.
> my Makevars file:
> CXX=clang++

Don't specify the compiler in the package's Makevars file.

> PKG_CPPFLAGS = -I/usr/local/include/gsl
> PKG_LIBS = $(GSL_LIBS) $(BLAS_LIBS) $(FLIBS) /usr/local/lib/libgsl.a
>
> I think I have to make a configure script looking for gsl. After the web searching I haven't find any article that explains how to do that. I am hoping you can help.

RcppGSL's intro vignette documents how to link to it. Also there are
others packages on CRAN linking to it (RcppZiggurat, for example), so
you can inspect what they do.

I?aki


From |uc@r @end|ng |rom |edor@project@org  Mon Jun 17 12:13:42 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 17 Jun 2019 12:13:42 +0200
Subject: [R-pkg-devel] Unsure how to fix 'Package required but not
 available: 'dvmisc'' (which is CRAN pkg) error
In-Reply-To: <CADVZz_o=bLCU+w=Qh1y9xJkqRS8Z2-uamSENa1KzWSuM2HpaMA@mail.gmail.com>
References: <CADVZz_o=bLCU+w=Qh1y9xJkqRS8Z2-uamSENa1KzWSuM2HpaMA@mail.gmail.com>
Message-ID: <CALEXWq1gpMG6a6dgJsWn0sT=K6RrYFOUoAH_XuGevUa01x7jJw@mail.gmail.com>

On Mon, 17 Jun 2019 at 11:13, Marta Kara? <marta.karass at gmail.com> wrote:
>
> Dear all,
>
> I am trying to submit update to my R package `adept` (GitHub code link
> <https://github.com/martakarass/adept>) and I got pre-test error on Windows
> (error check log link
> <https://win-builder.r-project.org/incoming_pretest/adept_1.1.2_20190616_162134/Windows/00check.log>
> )
>
>    - Error says: "Package required but not available: 'dvmisc'"
>
> Note:
>
>    - `dvmisc` is a R package available on CRAN (link
>    <https://cran.r-project.org/web/packages/dvmisc/index.html>)
>    - My `adept` package has `dvmisc` package listed in DESCRIPTION file (
>    link <https://github.com/martakarass/adept/blob/master/DESCRIPTION>)
>    - My `adept` package does pass AppVeyor tests on R versions release,
>    devel (link <https://ci.appveyor.com/project/martakarass/adept>)
>
>  Please kindly advice how I may fix the error to make it CRAN-submittable.

This is probably a race condition, sometimes happens. Just try again.

I?aki


From m@rt@@k@r@@@ @end|ng |rom gm@||@com  Mon Jun 17 12:18:21 2019
From: m@rt@@k@r@@@ @end|ng |rom gm@||@com (=?UTF-8?B?TWFydGEgS2FyYcWb?=)
Date: Mon, 17 Jun 2019 12:18:21 +0200
Subject: [R-pkg-devel] Unsure how to fix 'Package required but not
 available: 'dvmisc'' (which is CRAN pkg) error
In-Reply-To: <CALEXWq1gpMG6a6dgJsWn0sT=K6RrYFOUoAH_XuGevUa01x7jJw@mail.gmail.com>
References: <CADVZz_o=bLCU+w=Qh1y9xJkqRS8Z2-uamSENa1KzWSuM2HpaMA@mail.gmail.com>
 <CALEXWq1gpMG6a6dgJsWn0sT=K6RrYFOUoAH_XuGevUa01x7jJw@mail.gmail.com>
Message-ID: <CADVZz_pdm0dyJY41TWtCALq5WSGDTEhH0UTYXnArT1GJPQ+x7A@mail.gmail.com>

Hi I?aki,

Thank you a lot for answering! Just to clarify, you basically suggest
resubmitting without any change (except from adding relevant note
in cran-comments.md)?

Marta

On Mon, Jun 17, 2019 at 12:13 PM I?aki Ucar <iucar at fedoraproject.org> wrote:

> On Mon, 17 Jun 2019 at 11:13, Marta Kara? <marta.karass at gmail.com> wrote:
> >
> > Dear all,
> >
> > I am trying to submit update to my R package `adept` (GitHub code link
> > <https://github.com/martakarass/adept>) and I got pre-test error on
> Windows
> > (error check log link
> > <
> https://win-builder.r-project.org/incoming_pretest/adept_1.1.2_20190616_162134/Windows/00check.log
> >
> > )
> >
> >    - Error says: "Package required but not available: 'dvmisc'"
> >
> > Note:
> >
> >    - `dvmisc` is a R package available on CRAN (link
> >    <https://cran.r-project.org/web/packages/dvmisc/index.html>)
> >    - My `adept` package has `dvmisc` package listed in DESCRIPTION file (
> >    link <https://github.com/martakarass/adept/blob/master/DESCRIPTION>)
> >    - My `adept` package does pass AppVeyor tests on R versions release,
> >    devel (link <https://ci.appveyor.com/project/martakarass/adept>)
> >
> >  Please kindly advice how I may fix the error to make it
> CRAN-submittable.
>
> This is probably a race condition, sometimes happens. Just try again.
>
> I?aki
>

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Mon Jun 17 12:21:25 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 17 Jun 2019 12:21:25 +0200
Subject: [R-pkg-devel] Unsure how to fix 'Package required but not
 available: 'dvmisc'' (which is CRAN pkg) error
In-Reply-To: <CADVZz_pdm0dyJY41TWtCALq5WSGDTEhH0UTYXnArT1GJPQ+x7A@mail.gmail.com>
References: <CADVZz_o=bLCU+w=Qh1y9xJkqRS8Z2-uamSENa1KzWSuM2HpaMA@mail.gmail.com>
 <CALEXWq1gpMG6a6dgJsWn0sT=K6RrYFOUoAH_XuGevUa01x7jJw@mail.gmail.com>
 <CADVZz_pdm0dyJY41TWtCALq5WSGDTEhH0UTYXnArT1GJPQ+x7A@mail.gmail.com>
Message-ID: <CALEXWq0xsjV-X6vNPLzOt77-Y1vcUhLvzF5k8-2vY9chtXRu_w@mail.gmail.com>

On Mon, 17 Jun 2019 at 12:18, Marta Kara? <marta.karass at gmail.com> wrote:
>
> Hi I?aki,
>
> Thank you a lot for answering! Just to clarify, you basically suggest resubmitting without any change (except from adding relevant note in cran-comments.md)?

Yes, that's correct.

I?aki


From w@ngz1 @end|ng |rom uth@c@@@edu  Mon Jun 17 22:56:56 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Mon, 17 Jun 2019 20:56:56 +0000
Subject: [R-pkg-devel] R CMD check Rcpp_1.0.1.tar.gz error
Message-ID: <aa14e479b0f34be6b05cd4388f9daf33@EX-MCD-1.win.uthscsa.edu>

Dear all,

For some reason, I couldn't install Rcpp https://cran.r-project.org/web/packages/Rcpp/index.html, and R CMD check generated the error message below. I also attached Makeconf file referred below.

Thanks for your attention.

Zhu Wang

installing *source* package 'Rcpp' ...
 ** package 'Rcpp' successfully unpacked and MD5 sums checked
 ** using non-staged installation
 ** libs
 g++ -std=gnu++11 -I"/usr/share/R/include" -DNDEBUG -I../inst/include/    -fpic  "-g -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes -Wno-deprecated-declarations -Wno-parentheses" -c Date.cpp -  o Date.o
 g++: error: unrecognized debug output level ' -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes -Wno-deprecated-declarations -Wno-parentheses'
 /usr/lib/R/etc/Makeconf:176: recipe for target 'Date.o' failed
 make: *** [Date.o] Error 1
 ERROR: compilation failed for package 'Rcpp'
 
sessionInfo()
## R version 3.6.0 (2019-04-26)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 18.04.2 LTS

From bbo|ker @end|ng |rom gm@||@com  Mon Jun 17 23:02:57 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 18 Jun 2019 07:02:57 +1000
Subject: [R-pkg-devel] R CMD check Rcpp_1.0.1.tar.gz error
In-Reply-To: <aa14e479b0f34be6b05cd4388f9daf33@EX-MCD-1.win.uthscsa.edu>
References: <aa14e479b0f34be6b05cd4388f9daf33@EX-MCD-1.win.uthscsa.edu>
Message-ID: <CABghstQb_tLO5M9gYYONKqoFemgC5zW2tO219ByD9G4A8TtzWQ@mail.gmail.com>

This looks like it's caused by the quotation marks around the compiler
flags ("-g ... "), but I couldn't tell you how they got there or how to get
rid of them ...

On Tue, Jun 18, 2019, 6:57 AM Wang, Zhu <wangz1 at uthscsa.edu> wrote:

> Dear all,
>
> For some reason, I couldn't install Rcpp
> https://cran.r-project.org/web/packages/Rcpp/index.html, and R CMD check
> generated the error message below. I also attached Makeconf file referred
> below.
>
> Thanks for your attention.
>
> Zhu Wang
>
> installing *source* package 'Rcpp' ...
>  ** package 'Rcpp' successfully unpacked and MD5 sums checked
>  ** using non-staged installation
>  ** libs
>  g++ -std=gnu++11 -I"/usr/share/R/include" -DNDEBUG -I../inst/include/
> -fpic  "-g -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes
> -Wno-deprecated-declarations -Wno-parentheses" -c Date.cpp -  o Date.o
>  g++: error: unrecognized debug output level ' -O2 -Wall -pedantic
> -mtune=native -Wno-ignored-attributes -Wno-deprecated-declarations
> -Wno-parentheses'
>  /usr/lib/R/etc/Makeconf:176: recipe for target 'Date.o' failed
>  make: *** [Date.o] Error 1
>  ERROR: compilation failed for package 'Rcpp'
>
> sessionInfo()
> ## R version 3.6.0 (2019-04-26)
> ## Platform: x86_64-pc-linux-gnu (64-bit)
> ## Running under: Ubuntu 18.04.2 LTS
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From w@ngz1 @end|ng |rom uth@c@@@edu  Mon Jun 17 23:15:13 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Mon, 17 Jun 2019 21:15:13 +0000
Subject: [R-pkg-devel] R CMD check Rcpp_1.0.1.tar.gz error
In-Reply-To: <CABghstQb_tLO5M9gYYONKqoFemgC5zW2tO219ByD9G4A8TtzWQ@mail.gmail.com>
References: <aa14e479b0f34be6b05cd4388f9daf33@EX-MCD-1.win.uthscsa.edu>
 <CABghstQb_tLO5M9gYYONKqoFemgC5zW2tO219ByD9G4A8TtzWQ@mail.gmail.com>
Message-ID: <d3145a994df7409cbcb1376d3858157a@EX-MCD-1.win.uthscsa.edu>

Indeed it is from .R/Makevars. Thanks!

From: Ben Bolker <bbolker at gmail.com>
Sent: Monday, June 17, 2019 4:03 PM
To: Wang, Zhu <wangz1 at uthscsa.edu>
Cc: R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R CMD check Rcpp_1.0.1.tar.gz error

This looks like it's caused by the quotation marks around the compiler flags ("-g ... "), but I couldn't tell you how they got there or how to get rid of them ...

On Tue, Jun 18, 2019, 6:57 AM Wang, Zhu <wangz1 at uthscsa.edu<mailto:wangz1 at uthscsa.edu>> wrote:
Dear all,

For some reason, I couldn't install Rcpp https://cran.r-project.org/web/packages/Rcpp/index.html, and R CMD check generated the error message below. I also attached Makeconf file referred below.

Thanks for your attention.

Zhu Wang

installing *source* package 'Rcpp' ...
 ** package 'Rcpp' successfully unpacked and MD5 sums checked
 ** using non-staged installation
 ** libs
 g++ -std=gnu++11 -I"/usr/share/R/include" -DNDEBUG -I../inst/include/    -fpic  "-g -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes -Wno-deprecated-declarations -Wno-parentheses" -c Date.cpp -  o Date.o
 g++: error: unrecognized debug output level ' -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes -Wno-deprecated-declarations -Wno-parentheses'
 /usr/lib/R/etc/Makeconf:176: recipe for target 'Date.o' failed
 make: *** [Date.o] Error 1
 ERROR: compilation failed for package 'Rcpp'

sessionInfo()
## R version 3.6.0 (2019-04-26)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 18.04.2 LTS
______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Jun 17 23:38:27 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 17 Jun 2019 16:38:27 -0500
Subject: [R-pkg-devel] R CMD check Rcpp_1.0.1.tar.gz error
In-Reply-To: <aa14e479b0f34be6b05cd4388f9daf33@EX-MCD-1.win.uthscsa.edu>
References: <aa14e479b0f34be6b05cd4388f9daf33@EX-MCD-1.win.uthscsa.edu>
Message-ID: <23816.2131.523576.184206@rob.eddelbuettel.com>


Howdy,

There is a dedicated list for Rcpp we recommend users use...

On 17 June 2019 at 20:56, Wang, Zhu wrote:
| installing *source* package 'Rcpp' ...
|  ** package 'Rcpp' successfully unpacked and MD5 sums checked
|  ** using non-staged installation
|  ** libs
|  g++ -std=gnu++11 -I"/usr/share/R/include" -DNDEBUG -I../inst/include/    -fpic  "-g -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes -Wno-deprecated-declarations -Wno-parentheses" -c Date.cpp -  o Date.o
|  g++: error: unrecognized debug output level ' -O2 -Wall -pedantic -mtune=native -Wno-ignored-attributes -Wno-deprecated-declarations -Wno-parentheses'

The compiler tells you here that it is unhappy. As Ben already suggested I would
remove this -- maybe comment it out in your ~/.R/Makeconf or rename that file
and then try again.

| ## Running under: Ubuntu 18.04.2 LTS

Also, you can get prebuilt versions of over 4000 CRAN packages, including Rcpp,
from the Rutter PPA. See this post and earlier posts in the r^4 series:
  http://dirk.eddelbuettel.com/blog/2019/06/09#022_rocker_and_ppas
And the current-when-18.04-was-made version of Rcpp is also available for you.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @ergue|@@oko| @end|ng |rom gm@||@com  Tue Jun 18 11:51:05 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Tue, 18 Jun 2019 11:51:05 +0200
Subject: [R-pkg-devel] .Rd, LaTeX and Unicode
Message-ID: <b9ac9810-fdbb-c900-8b47-e391f59108f3@gmail.com>

Hi,

I am preparing a package where I would like to use UTF characters in .Rd 
files. When the LaTeX comes to play, I got well known errors e.g.:
! Package inputenc Error: Unicode character ? (U+2202)
(inputenc)??????????????? not set up for use with LaTeX.

It is coherent with what is said on this page 
https://developer.r-project.org/Encodings_and_R.html :
"Since LaTeX cannot handle Unicode we would have to convert the encoding 
of latex help files or use Lambda (and tell it they were in UTF-8)."

But LaTeX can support UTF8 as shown with this small example:

\documentclass{article}
\usepackage[mathletters]{ucs}
\usepackage[utf8x]{inputenc}

\begin{document}
 ??? The vorticity ? is defined as $? = ? ? u$.
\end{document}

I can compile it with my LaTeX without problem. May be you too?
So my suggestion would be to place these two lines somewhere in LaTeX 
header generated by R doc system:
\usepackage[mathletters]{ucs}
\usepackage[utf8x]{inputenc}

Note "utf8x" and not just "utf8" which is crucial for this example.
With a hope that it would fix unicode errors from LaTeX.

Best,
Serguei.


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Tue Jun 18 12:03:41 2019
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Tue, 18 Jun 2019 20:03:41 +1000
Subject: [R-pkg-devel] .Rd, LaTeX and Unicode
In-Reply-To: <b9ac9810-fdbb-c900-8b47-e391f59108f3@gmail.com>
References: <b9ac9810-fdbb-c900-8b47-e391f59108f3@gmail.com>
Message-ID: <CAJmOi+PtUERWq5ebVPSVaR9C_mr7ttROqkpfostiSuMWLoJ3_g@mail.gmail.com>

utf8x is deprecated

https://tex.stackexchange.com/questions/13067/utf8x-vs-utf8-inputenc#13070



On Tue, 18 Jun 2019 at 7:52 pm, Serguei Sokol <serguei.sokol at gmail.com>
wrote:

> Hi,
>
> I am preparing a package where I would like to use UTF characters in .Rd
> files. When the LaTeX comes to play, I got well known errors e.g.:
> ! Package inputenc Error: Unicode character ? (U+2202)
> (inputenc)                not set up for use with LaTeX.
>
> It is coherent with what is said on this page
> https://developer.r-project.org/Encodings_and_R.html :
> "Since LaTeX cannot handle Unicode we would have to convert the encoding
> of latex help files or use Lambda (and tell it they were in UTF-8)."
>
> But LaTeX can support UTF8 as shown with this small example:
>
> \documentclass{article}
> \usepackage[mathletters]{ucs}
> \usepackage[utf8x]{inputenc}
>
> \begin{document}
>      The vorticity ? is defined as $? = ? ? u$.
> \end{document}
>
> I can compile it with my LaTeX without problem. May be you too?
> So my suggestion would be to place these two lines somewhere in LaTeX
> header generated by R doc system:
> \usepackage[mathletters]{ucs}
> \usepackage[utf8x]{inputenc}
>
> Note "utf8x" and not just "utf8" which is crucial for this example.
> With a hope that it would fix unicode errors from LaTeX.
>
> Best,
> Serguei.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Jun 18 16:01:23 2019
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 18 Jun 2019 16:01:23 +0200
Subject: [R-pkg-devel] .Rd, LaTeX and Unicode
In-Reply-To: <CAJmOi+PtUERWq5ebVPSVaR9C_mr7ttROqkpfostiSuMWLoJ3_g@mail.gmail.com>
References: <b9ac9810-fdbb-c900-8b47-e391f59108f3@gmail.com>
 <CAJmOi+PtUERWq5ebVPSVaR9C_mr7ttROqkpfostiSuMWLoJ3_g@mail.gmail.com>
Message-ID: <23816.61107.717531.154581@stat.math.ethz.ch>

>>>>> Hugh Parsonage 
>>>>>     on Tue, 18 Jun 2019 20:03:41 +1000 writes:

    > utf8x is deprecated
    > https://tex.stackexchange.com/questions/13067/utf8x-vs-utf8-inputenc#13070

Hmm... interestingly, I've tried quite a few versions of the
above which started in 2011, but had been updated in April 2016 :
   https://tex.stackexchange.com/a/203804/7228
from where it seems that

     	\usepackage[T1]{fontenc}
	\usepackage[utf8]{inputenc}

should be sufficient.  Further, note that from
  https://tex.stackexchange.com/a/238135/7228 
the {ucs} package should no longer be needed since ca. 2013,
hence your \usepackage[mathletters]{ucs}  would not be needed either.

HOWEVER:  After losing at least half an hour now, trying many
variants I found that the only version that works correctly for
me (with a teTeX / TeXlive version of 2018) is the version
Serguei Sokol proposes (below), including the use of the 'utf8x'
option *and* the 'ucs' package ...

which is pretty surprising after having read the
tex.statexchange threads ...

    > On Tue, 18 Jun 2019 at 7:52 pm, Serguei Sokol <serguei.sokol at gmail.com>
    > wrote:

    >> Hi,
    >> 
    >> I am preparing a package where I would like to use UTF characters in .Rd
    >> files. When the LaTeX comes to play, I got well known errors e.g.:
    >> ! Package inputenc Error: Unicode character ? (U+2202)
    >> (inputenc)                not set up for use with LaTeX.
    >> 
    >> It is coherent with what is said on this page
    >> https://developer.r-project.org/Encodings_and_R.html :
    >> "Since LaTeX cannot handle Unicode we would have to convert the encoding
    >> of latex help files or use Lambda (and tell it they were in UTF-8)."

That whole document has been very important and crucial, written
by Prof Brian Ripley  who had worked a *LOT* to bring unicode to R,
-- but it has been written 2004-2005  and indeed, I think it is
probably fair to say that the above sentence no longer applies
to current LaTeX engines (including "simple" pdflatex)... though really,
I'm not the expert here, but I think it's a good point in time
to reconsider how much UTF8 should be allowed/supported in *.Rd files.

One problem: This is (slightly) the wrong mailing list; this would have
been a perfect topic for 'R-devel' (discussing about new
features etc for R) instead....
( but we'd rather keep it here for now.)

Martin Maechler
ETH Zurich and R Core Team



    >> But LaTeX can support UTF8 as shown with this small example:

 \documentclass{article}
 \usepackage[mathletters]{ucs}
 \usepackage[utf8x]{inputenc}
 
 \begin{document}
 The vorticity ? is defined as $? = ? ? u$.
 \end{document}

    >> I can compile it with my LaTeX without problem. May be you too?
    >> So my suggestion would be to place these two lines somewhere in LaTeX
    >> header generated by R doc system:
    >> \usepackage[mathletters]{ucs}
    >> \usepackage[utf8x]{inputenc}
    >> 
    >> Note "utf8x" and not just "utf8" which is crucial for this example.
    >> With a hope that it would fix unicode errors from LaTeX.
    >> 
    >> Best,
    >> Serguei.


From zk@mv@r @end|ng |rom gm@||@com  Tue Jun 18 16:33:43 2019
From: zk@mv@r @end|ng |rom gm@||@com (Zhian Kamvar)
Date: Tue, 18 Jun 2019 15:33:43 +0100
Subject: [R-pkg-devel] R package manual failing only on
 R-devel-linux-x86_64-debian-gcc
Message-ID: <CAPsXksJB972dc=8syW7Dm9Dt82th+v-DRjX1Lngnn71RLKqN6g@mail.gmail.com>

Hello,

I'm having a really strange problem that I cannot reproduce locally (Ubuntu
bionic) or on Rhub. I've run into an issue where the R package manual is
failing only on this platform with ancient LaTeX runes that I struggle to
decipher [0]

> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! pdfTeX error (ext4): \pdfendlink ended up in different nesting level than \pd
> fstartlink.
> \AtBegShi at Output ...ipout \box \AtBeginShipoutBox
>                                                   \fi \fi
> l.186 \item \code
> !  ==> Fatal error occurred, no output PDF file produced!
> * checking PDF version of manual without hyperrefs or index ... OK
> * checking for non-standard things in the check directory ... NOTE
> Found the following files/directories:
>   ?poppr-manual.tex?
>
>
The only information I could find on the error was a question with answers
that were more questions: https://stackoverflow.com/q/2765229/2752888

Uwe Ligges was kind enough to trigger a second build to see if this was an
anomaly, but the same incantation appeared again. I've tried building this
on Rhub debian-devel-gcc, but could not reproduce the error [1] and no
other platform does this.

Has anyone seen this before?

Thanks,
Zhian

[0]:
https://win-builder.r-project.org/incoming_pretest/poppr_2.8.3_20190618_151346/Debian/00check.log
[1]:
https://builder.r-hub.io/status/original/poppr_2.8.3.tar.gz-130d92cdeb2c4c46b94d8cc13b8921b9

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jun 18 16:47:37 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 18 Jun 2019 15:47:37 +0100
Subject: [R-pkg-devel] R package manual failing only on
 R-devel-linux-x86_64-debian-gcc
In-Reply-To: <CAPsXksJB972dc=8syW7Dm9Dt82th+v-DRjX1Lngnn71RLKqN6g@mail.gmail.com>
References: <CAPsXksJB972dc=8syW7Dm9Dt82th+v-DRjX1Lngnn71RLKqN6g@mail.gmail.com>
Message-ID: <CABtg=KmX33_Fx=KDcjKe_fHMZon9bSbbqWWRAgrxk+mL-GTLPA@mail.gmail.com>

You can build the PDF manual locally with

R CMD Rd2pdf --no-clean .

and then look at line 186 in the poppr-manual.tex file to see where
there error is coming from.
You can also try R-hub's windows builder, to see if you can reproduce it there.

Gabor

On Tue, Jun 18, 2019 at 3:37 PM Zhian Kamvar <zkamvar at gmail.com> wrote:
>
> Hello,
>
> I'm having a really strange problem that I cannot reproduce locally (Ubuntu
> bionic) or on Rhub. I've run into an issue where the R package manual is
> failing only on this platform with ancient LaTeX runes that I struggle to
> decipher [0]
>
> > * checking PDF version of manual ... WARNING
> > LaTeX errors when creating PDF version.
> > This typically indicates Rd problems.
> > LaTeX errors found:
> > ! pdfTeX error (ext4): \pdfendlink ended up in different nesting level than \pd
> > fstartlink.
> > \AtBegShi at Output ...ipout \box \AtBeginShipoutBox
> >                                                   \fi \fi
> > l.186 \item \code
> > !  ==> Fatal error occurred, no output PDF file produced!
> > * checking PDF version of manual without hyperrefs or index ... OK
> > * checking for non-standard things in the check directory ... NOTE
> > Found the following files/directories:
> >   ?poppr-manual.tex?
> >
> >
> The only information I could find on the error was a question with answers
> that were more questions: https://stackoverflow.com/q/2765229/2752888
>
> Uwe Ligges was kind enough to trigger a second build to see if this was an
> anomaly, but the same incantation appeared again. I've tried building this
> on Rhub debian-devel-gcc, but could not reproduce the error [1] and no
> other platform does this.
>
> Has anyone seen this before?
>
> Thanks,
> Zhian
>
> [0]:
> https://win-builder.r-project.org/incoming_pretest/poppr_2.8.3_20190618_151346/Debian/00check.log
> [1]:
> https://builder.r-hub.io/status/original/poppr_2.8.3.tar.gz-130d92cdeb2c4c46b94d8cc13b8921b9
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Tue Jun 18 17:00:34 2019
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Wed, 19 Jun 2019 01:00:34 +1000
Subject: [R-pkg-devel] R package manual failing only on
 R-devel-linux-x86_64-debian-gcc
In-Reply-To: <CAPsXksJB972dc=8syW7Dm9Dt82th+v-DRjX1Lngnn71RLKqN6g@mail.gmail.com>
References: <CAPsXksJB972dc=8syW7Dm9Dt82th+v-DRjX1Lngnn71RLKqN6g@mail.gmail.com>
Message-ID: <CAJmOi+NURsPk_Z3NdF=PU1XgJNgTbYQAShtqmc-XEHk5aqw4zw@mail.gmail.com>

Unfortunately this error is caused by a hyperlink straddling a page, so
it?s difficult to solve uniformly.

The LaTeX error message provides a clue as to where the hyperlink might be
(near an \item near a \code) but no exact location.

My advice would be to look where you have hyperlinks (including cross
references) in your documentation and either reword the documentation or
omit hyperlinks until you can produce a full pdf manual. Then, examine
where the hyperlink might have straddled two pages and more surgically
reword that paragraph/list to enable the original intent to be typeset.

The hyperlink may also occur in a bibliography where you may have to make
more drastic omissions or additions in order for compilation to succeed.

On Wed, 19 Jun 2019 at 12:37 am, Zhian Kamvar <zkamvar at gmail.com> wrote:

> Hello,
>
> I'm having a really strange problem that I cannot reproduce locally (Ubuntu
> bionic) or on Rhub. I've run into an issue where the R package manual is
> failing only on this platform with ancient LaTeX runes that I struggle to
> decipher [0]
>
> > * checking PDF version of manual ... WARNING
> > LaTeX errors when creating PDF version.
> > This typically indicates Rd problems.
> > LaTeX errors found:
> > ! pdfTeX error (ext4): \pdfendlink ended up in different nesting level
> than \pd
> > fstartlink.
> > \AtBegShi at Output ...ipout \box \AtBeginShipoutBox
> >                                                   \fi \fi
> > l.186 \item \code
> > !  ==> Fatal error occurred, no output PDF file produced!
> > * checking PDF version of manual without hyperrefs or index ... OK
> > * checking for non-standard things in the check directory ... NOTE
> > Found the following files/directories:
> >   ?poppr-manual.tex?
> >
> >
> The only information I could find on the error was a question with answers
> that were more questions: https://stackoverflow.com/q/2765229/2752888
>
> Uwe Ligges was kind enough to trigger a second build to see if this was an
> anomaly, but the same incantation appeared again. I've tried building this
> on Rhub debian-devel-gcc, but could not reproduce the error [1] and no
> other platform does this.
>
> Has anyone seen this before?
>
> Thanks,
> Zhian
>
> [0]:
>
> https://win-builder.r-project.org/incoming_pretest/poppr_2.8.3_20190618_151346/Debian/00check.log
> [1]:
>
> https://builder.r-hub.io/status/original/poppr_2.8.3.tar.gz-130d92cdeb2c4c46b94d8cc13b8921b9
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Jun 18 17:10:12 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 18 Jun 2019 15:10:12 +0000
Subject: [R-pkg-devel] .Rd, LaTeX and Unicode
In-Reply-To: <23816.61107.717531.154581@stat.math.ethz.ch>
References: <b9ac9810-fdbb-c900-8b47-e391f59108f3@gmail.com>
 <CAJmOi+PtUERWq5ebVPSVaR9C_mr7ttROqkpfostiSuMWLoJ3_g@mail.gmail.com>
 <23816.61107.717531.154581@stat.math.ethz.ch>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F71FA65@MBXP02.ds.man.ac.uk>


Since April 2018 'utf8' is the default input encoding in LaTeX, see
http://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/doc/ltnews.pdf and they added some symbols in December.


Georgi Boshnakov






-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Martin Maechler
Sent: 18 June 2019 15:01
To: serguei.sokol at gmail.com; Hugh Parsonage
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] .Rd, LaTeX and Unicode

>>>>> Hugh Parsonage 
>>>>>     on Tue, 18 Jun 2019 20:03:41 +1000 writes:

    > utf8x is deprecated
    > https://tex.stackexchange.com/questions/13067/utf8x-vs-utf8-inputenc#13070

Hmm... interestingly, I've tried quite a few versions of the
above which started in 2011, but had been updated in April 2016 :
   https://tex.stackexchange.com/a/203804/7228
from where it seems that

     	\usepackage[T1]{fontenc}
	\usepackage[utf8]{inputenc}

should be sufficient.  Further, note that from
  https://tex.stackexchange.com/a/238135/7228 
the {ucs} package should no longer be needed since ca. 2013,
hence your \usepackage[mathletters]{ucs}  would not be needed either.

HOWEVER:  After losing at least half an hour now, trying many
variants I found that the only version that works correctly for
me (with a teTeX / TeXlive version of 2018) is the version
Serguei Sokol proposes (below), including the use of the 'utf8x'
option *and* the 'ucs' package ...

which is pretty surprising after having read the
tex.statexchange threads ...

    > On Tue, 18 Jun 2019 at 7:52 pm, Serguei Sokol <serguei.sokol at gmail.com>
    > wrote:

    >> Hi,
    >> 
    >> I am preparing a package where I would like to use UTF characters in .Rd
    >> files. When the LaTeX comes to play, I got well known errors e.g.:
    >> ! Package inputenc Error: Unicode character ? (U+2202)
    >> (inputenc)                not set up for use with LaTeX.
    >> 
    >> It is coherent with what is said on this page
    >> https://developer.r-project.org/Encodings_and_R.html :
    >> "Since LaTeX cannot handle Unicode we would have to convert the encoding
    >> of latex help files or use Lambda (and tell it they were in UTF-8)."

That whole document has been very important and crucial, written
by Prof Brian Ripley  who had worked a *LOT* to bring unicode to R,
-- but it has been written 2004-2005  and indeed, I think it is
probably fair to say that the above sentence no longer applies
to current LaTeX engines (including "simple" pdflatex)... though really,
I'm not the expert here, but I think it's a good point in time
to reconsider how much UTF8 should be allowed/supported in *.Rd files.

One problem: This is (slightly) the wrong mailing list; this would have
been a perfect topic for 'R-devel' (discussing about new
features etc for R) instead....
( but we'd rather keep it here for now.)

Martin Maechler
ETH Zurich and R Core Team



    >> But LaTeX can support UTF8 as shown with this small example:

 \documentclass{article}
 \usepackage[mathletters]{ucs}
 \usepackage[utf8x]{inputenc}
 
 \begin{document}
 The vorticity ? is defined as $? = ? ? u$.
 \end{document}

    >> I can compile it with my LaTeX without problem. May be you too?
    >> So my suggestion would be to place these two lines somewhere in LaTeX
    >> header generated by R doc system:
    >> \usepackage[mathletters]{ucs}
    >> \usepackage[utf8x]{inputenc}
    >> 
    >> Note "utf8x" and not just "utf8" which is crucial for this example.
    >> With a hope that it would fix unicode errors from LaTeX.
    >> 
    >> Best,
    >> Serguei.

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From zk@mv@r @end|ng |rom gm@||@com  Tue Jun 18 17:22:18 2019
From: zk@mv@r @end|ng |rom gm@||@com (Zhian Kamvar)
Date: Tue, 18 Jun 2019 16:22:18 +0100
Subject: [R-pkg-devel] R package manual failing only on
 R-devel-linux-x86_64-debian-gcc
In-Reply-To: <CAJmOi+NURsPk_Z3NdF=PU1XgJNgTbYQAShtqmc-XEHk5aqw4zw@mail.gmail.com>
References: <CAPsXksJB972dc=8syW7Dm9Dt82th+v-DRjX1Lngnn71RLKqN6g@mail.gmail.com>
 <CAJmOi+NURsPk_Z3NdF=PU1XgJNgTbYQAShtqmc-XEHk5aqw4zw@mail.gmail.com>
Message-ID: <CAPsXksJHJUiwZ0H1=fsdekboyFvgEvuHTHg79OjTqP458PdUKw@mail.gmail.com>

Thank you for the the insights, Gabor and Hugh! Line 186 happens to be a
\begin{itemize} in the package documentation section (which is chock-full
of links), I didn't change that, but I did expand the DESCRIPTION, so I
guess it makes sense that one of those links have slid down and gotten
stuck between the pages.

Now if only I had a reliable way of reproducing the error -_-

Thank you both for the quick responses!
Zhian

On Tue, Jun 18, 2019 at 4:00 PM Hugh Parsonage <hugh.parsonage at gmail.com>
wrote:

> Unfortunately this error is caused by a hyperlink straddling a page, so
> it?s difficult to solve uniformly.
>
> The LaTeX error message provides a clue as to where the hyperlink might be
> (near an \item near a \code) but no exact location.
>
> My advice would be to look where you have hyperlinks (including cross
> references) in your documentation and either reword the documentation or
> omit hyperlinks until you can produce a full pdf manual. Then, examine
> where the hyperlink might have straddled two pages and more surgically
> reword that paragraph/list to enable the original intent to be typeset.
>
> The hyperlink may also occur in a bibliography where you may have to make
> more drastic omissions or additions in order for compilation to succeed.
>
> On Wed, 19 Jun 2019 at 12:37 am, Zhian Kamvar <zkamvar at gmail.com> wrote:
>
>> Hello,
>>
>> I'm having a really strange problem that I cannot reproduce locally
>> (Ubuntu
>> bionic) or on Rhub. I've run into an issue where the R package manual is
>> failing only on this platform with ancient LaTeX runes that I struggle to
>> decipher [0]
>>
>> > * checking PDF version of manual ... WARNING
>> > LaTeX errors when creating PDF version.
>> > This typically indicates Rd problems.
>> > LaTeX errors found:
>> > ! pdfTeX error (ext4): \pdfendlink ended up in different nesting level
>> than \pd
>> > fstartlink.
>> > \AtBegShi at Output ...ipout \box \AtBeginShipoutBox
>> >                                                   \fi \fi
>> > l.186 \item \code
>> > !  ==> Fatal error occurred, no output PDF file produced!
>> > * checking PDF version of manual without hyperrefs or index ... OK
>> > * checking for non-standard things in the check directory ... NOTE
>> > Found the following files/directories:
>> >   ?poppr-manual.tex?
>> >
>> >
>> The only information I could find on the error was a question with answers
>> that were more questions: https://stackoverflow.com/q/2765229/2752888
>>
>> Uwe Ligges was kind enough to trigger a second build to see if this was an
>> anomaly, but the same incantation appeared again. I've tried building this
>> on Rhub debian-devel-gcc, but could not reproduce the error [1] and no
>> other platform does this.
>>
>> Has anyone seen this before?
>>
>> Thanks,
>> Zhian
>>
>> [0]:
>>
>> https://win-builder.r-project.org/incoming_pretest/poppr_2.8.3_20190618_151346/Debian/00check.log
>> [1]:
>>
>> https://builder.r-hub.io/status/original/poppr_2.8.3.tar.gz-130d92cdeb2c4c46b94d8cc13b8921b9
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From zk@mv@r @end|ng |rom gm@||@com  Tue Jun 18 17:26:13 2019
From: zk@mv@r @end|ng |rom gm@||@com (Zhian Kamvar)
Date: Tue, 18 Jun 2019 16:26:13 +0100
Subject: [R-pkg-devel] R package manual failing only on
 R-devel-linux-x86_64-debian-gcc
In-Reply-To: <CAPsXksJHJUiwZ0H1=fsdekboyFvgEvuHTHg79OjTqP458PdUKw@mail.gmail.com>
References: <CAPsXksJB972dc=8syW7Dm9Dt82th+v-DRjX1Lngnn71RLKqN6g@mail.gmail.com>
 <CAJmOi+NURsPk_Z3NdF=PU1XgJNgTbYQAShtqmc-XEHk5aqw4zw@mail.gmail.com>
 <CAPsXksJHJUiwZ0H1=fsdekboyFvgEvuHTHg79OjTqP458PdUKw@mail.gmail.com>
Message-ID: <CAPsXksL5LbZy0h0y2+M77DJKzthD6BWWMjZn5nxtp8BHTfvLPA@mail.gmail.com>

For the curious, an update from Uwe Ligges:

Kurt Hornik found:
>
> <
> https://tex.stackexchange.com/questions/1522/pdfendlink-ended-up-in-different-nesting-level-than-pdfstartlink
> >
>
> and you shoudl be able to reproduce via
>
>    R_PAPERSIZE=a4 R CMD Rd2pdf /path/to/poppr
>
> Suggestion:
>
> Add a blank line before
>
>    Examples of analyses are available in a primer written by Niklaus
> J. Gr?nwald, Zhian N. Kamvar, and Sydney E.  Everhart at
> \url{http://grunwaldlab.github.io/Population_Genetics_in_R}.}
>


Zhian

On Tue, Jun 18, 2019 at 4:22 PM Zhian Kamvar <zkamvar at gmail.com> wrote:

> Thank you for the the insights, Gabor and Hugh! Line 186 happens to be a
> \begin{itemize} in the package documentation section (which is chock-full
> of links), I didn't change that, but I did expand the DESCRIPTION, so I
> guess it makes sense that one of those links have slid down and gotten
> stuck between the pages.
>
> Now if only I had a reliable way of reproducing the error -_-
>
> Thank you both for the quick responses!
> Zhian
>
> On Tue, Jun 18, 2019 at 4:00 PM Hugh Parsonage <hugh.parsonage at gmail.com>
> wrote:
>
>> Unfortunately this error is caused by a hyperlink straddling a page, so
>> it?s difficult to solve uniformly.
>>
>> The LaTeX error message provides a clue as to where the hyperlink might
>> be (near an \item near a \code) but no exact location.
>>
>> My advice would be to look where you have hyperlinks (including cross
>> references) in your documentation and either reword the documentation or
>> omit hyperlinks until you can produce a full pdf manual. Then, examine
>> where the hyperlink might have straddled two pages and more surgically
>> reword that paragraph/list to enable the original intent to be typeset.
>>
>> The hyperlink may also occur in a bibliography where you may have to make
>> more drastic omissions or additions in order for compilation to succeed.
>>
>> On Wed, 19 Jun 2019 at 12:37 am, Zhian Kamvar <zkamvar at gmail.com> wrote:
>>
>>> Hello,
>>>
>>> I'm having a really strange problem that I cannot reproduce locally
>>> (Ubuntu
>>> bionic) or on Rhub. I've run into an issue where the R package manual is
>>> failing only on this platform with ancient LaTeX runes that I struggle to
>>> decipher [0]
>>>
>>> > * checking PDF version of manual ... WARNING
>>> > LaTeX errors when creating PDF version.
>>> > This typically indicates Rd problems.
>>> > LaTeX errors found:
>>> > ! pdfTeX error (ext4): \pdfendlink ended up in different nesting level
>>> than \pd
>>> > fstartlink.
>>> > \AtBegShi at Output ...ipout \box \AtBeginShipoutBox
>>> >                                                   \fi \fi
>>> > l.186 \item \code
>>> > !  ==> Fatal error occurred, no output PDF file produced!
>>> > * checking PDF version of manual without hyperrefs or index ... OK
>>> > * checking for non-standard things in the check directory ... NOTE
>>> > Found the following files/directories:
>>> >   ?poppr-manual.tex?
>>> >
>>> >
>>> The only information I could find on the error was a question with
>>> answers
>>> that were more questions: https://stackoverflow.com/q/2765229/2752888
>>>
>>> Uwe Ligges was kind enough to trigger a second build to see if this was
>>> an
>>> anomaly, but the same incantation appeared again. I've tried building
>>> this
>>> on Rhub debian-devel-gcc, but could not reproduce the error [1] and no
>>> other platform does this.
>>>
>>> Has anyone seen this before?
>>>
>>> Thanks,
>>> Zhian
>>>
>>> [0]:
>>>
>>> https://win-builder.r-project.org/incoming_pretest/poppr_2.8.3_20190618_151346/Debian/00check.log
>>> [1]:
>>>
>>> https://builder.r-hub.io/status/original/poppr_2.8.3.tar.gz-130d92cdeb2c4c46b94d8cc13b8921b9
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>

	[[alternative HTML version deleted]]


From @ergue|@@oko| @end|ng |rom gm@||@com  Wed Jun 19 10:50:33 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Wed, 19 Jun 2019 10:50:33 +0200
Subject: [R-pkg-devel] .Rd, LaTeX and Unicode
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F71FA65@MBXP02.ds.man.ac.uk>
References: <b9ac9810-fdbb-c900-8b47-e391f59108f3@gmail.com>
 <CAJmOi+PtUERWq5ebVPSVaR9C_mr7ttROqkpfostiSuMWLoJ3_g@mail.gmail.com>
 <23816.61107.717531.154581@stat.math.ethz.ch>
 <438D2EC9EAFE5946B2D5864670EA468E018F71FA65@MBXP02.ds.man.ac.uk>
Message-ID: <3e74b5b1-02ce-5709-f71d-6e6f3954c447@gmail.com>

On 18/06/2019 17:10, Georgi Boshnakov wrote:
> 
> Since April 2018 'utf8' is the default input encoding in LaTeX, see
> http://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/doc/ltnews.pdf and they added some symbols in December.
Interesting ... but still not sufficient. I have a fairly recent latex 
system:
$ latex --version
pdfTeX 3.14159265-2.6-1.40.19 (TeX Live 2018/Mageia)

but unfortunately utf8 alone (and even including
\usepackage[mathletters]{ucs}) cannot compile utf8 math expressions.

I have also tried a full scale test on a tex file obtained with
$ R CMD Rd2pdf --no-clean pkgname
where I replaced

\usepackage[utf8]{inputenc}

by

\usepackage[mathletters]{ucs}
\usepackage[utf8x]{inputenc}

and it did not compile either. In addition, I had to replace every 
occurrence of

\inputencoding{utf8}

by

\inputencoding{utf8x}

after what pdflatex worked like a charm.

Serguei.

> 
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Martin Maechler
> Sent: 18 June 2019 15:01
> To: serguei.sokol at gmail.com; Hugh Parsonage
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] .Rd, LaTeX and Unicode
> 
>>>>>> Hugh Parsonage
>>>>>>      on Tue, 18 Jun 2019 20:03:41 +1000 writes:
> 
>      > utf8x is deprecated
>      > https://tex.stackexchange.com/questions/13067/utf8x-vs-utf8-inputenc#13070
> 
> Hmm... interestingly, I've tried quite a few versions of the
> above which started in 2011, but had been updated in April 2016 :
>     https://tex.stackexchange.com/a/203804/7228
> from where it seems that
> 
>       	\usepackage[T1]{fontenc}
> 	\usepackage[utf8]{inputenc}
> 
> should be sufficient.  Further, note that from
>    https://tex.stackexchange.com/a/238135/7228
> the {ucs} package should no longer be needed since ca. 2013,
> hence your \usepackage[mathletters]{ucs}  would not be needed either.
> 
> HOWEVER:  After losing at least half an hour now, trying many
> variants I found that the only version that works correctly for
> me (with a teTeX / TeXlive version of 2018) is the version
> Serguei Sokol proposes (below), including the use of the 'utf8x'
> option *and* the 'ucs' package ...
> 
> which is pretty surprising after having read the
> tex.statexchange threads ...
> 
>      > On Tue, 18 Jun 2019 at 7:52 pm, Serguei Sokol <serguei.sokol at gmail.com>
>      > wrote:
> 
>      >> Hi,
>      >>
>      >> I am preparing a package where I would like to use UTF characters in .Rd
>      >> files. When the LaTeX comes to play, I got well known errors e.g.:
>      >> ! Package inputenc Error: Unicode character ? (U+2202)
>      >> (inputenc)                not set up for use with LaTeX.
>      >>
>      >> It is coherent with what is said on this page
>      >> https://developer.r-project.org/Encodings_and_R.html :
>      >> "Since LaTeX cannot handle Unicode we would have to convert the encoding
>      >> of latex help files or use Lambda (and tell it they were in UTF-8)."
> 
> That whole document has been very important and crucial, written
> by Prof Brian Ripley  who had worked a *LOT* to bring unicode to R,
> -- but it has been written 2004-2005  and indeed, I think it is
> probably fair to say that the above sentence no longer applies
> to current LaTeX engines (including "simple" pdflatex)... though really,
> I'm not the expert here, but I think it's a good point in time
> to reconsider how much UTF8 should be allowed/supported in *.Rd files.
> 
> One problem: This is (slightly) the wrong mailing list; this would have
> been a perfect topic for 'R-devel' (discussing about new
> features etc for R) instead....
> ( but we'd rather keep it here for now.)
> 
> Martin Maechler
> ETH Zurich and R Core Team
> 
> 
> 
>      >> But LaTeX can support UTF8 as shown with this small example:
> 
>   \documentclass{article}
>   \usepackage[mathletters]{ucs}
>   \usepackage[utf8x]{inputenc}
>   
>   \begin{document}
>   The vorticity ? is defined as $? = ? ? u$.
>   \end{document}
> 
>      >> I can compile it with my LaTeX without problem. May be you too?
>      >> So my suggestion would be to place these two lines somewhere in LaTeX
>      >> header generated by R doc system:
>      >> \usepackage[mathletters]{ucs}
>      >> \usepackage[utf8x]{inputenc}
>      >>
>      >> Note "utf8x" and not just "utf8" which is crucial for this example.
>      >> With a hope that it would fix unicode errors from LaTeX.
>      >>
>      >> Best,
>      >> Serguei.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Wed Jun 19 11:59:51 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Wed, 19 Jun 2019 09:59:51 +0000
Subject: [R-pkg-devel] .Rd, LaTeX and Unicode
In-Reply-To: <3e74b5b1-02ce-5709-f71d-6e6f3954c447@gmail.com>
References: <b9ac9810-fdbb-c900-8b47-e391f59108f3@gmail.com>
 <CAJmOi+PtUERWq5ebVPSVaR9C_mr7ttROqkpfostiSuMWLoJ3_g@mail.gmail.com>
 <23816.61107.717531.154581@stat.math.ethz.ch>
 <438D2EC9EAFE5946B2D5864670EA468E018F71FA65@MBXP02.ds.man.ac.uk>
 <3e74b5b1-02ce-5709-f71d-6e6f3954c447@gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F71FB2F@MBXP02.ds.man.ac.uk>

Sorry, I failed to clarify that the link to ltnews.pdf was the point of my message. In some ways it is definitive from the LaTeX team. 

My understanding is that option 'mathletters' is not the default in ucs, since it produces math Greek and Hebrew letters also in text mode. 

Georgi Boshnakov


-----Original Message-----
From: Serguei Sokol [mailto:serguei.sokol at gmail.com] 
Sent: 19 June 2019 09:51
To: Georgi Boshnakov; Martin Maechler; Hugh Parsonage
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] .Rd, LaTeX and Unicode

On 18/06/2019 17:10, Georgi Boshnakov wrote:
> 
> Since April 2018 'utf8' is the default input encoding in LaTeX, see
> http://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/doc/ltnews.pdf and they added some symbols in December.
Interesting ... but still not sufficient. I have a fairly recent latex 
system:
$ latex --version
pdfTeX 3.14159265-2.6-1.40.19 (TeX Live 2018/Mageia)

but unfortunately utf8 alone (and even including
\usepackage[mathletters]{ucs}) cannot compile utf8 math expressions.

I have also tried a full scale test on a tex file obtained with
$ R CMD Rd2pdf --no-clean pkgname
where I replaced

\usepackage[utf8]{inputenc}

by

\usepackage[mathletters]{ucs}
\usepackage[utf8x]{inputenc}

and it did not compile either. In addition, I had to replace every 
occurrence of

\inputencoding{utf8}

by

\inputencoding{utf8x}

after what pdflatex worked like a charm.

Serguei.

> 
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Martin Maechler
> Sent: 18 June 2019 15:01
> To: serguei.sokol at gmail.com; Hugh Parsonage
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] .Rd, LaTeX and Unicode
> 
>>>>>> Hugh Parsonage
>>>>>>      on Tue, 18 Jun 2019 20:03:41 +1000 writes:
> 
>      > utf8x is deprecated
>      > https://tex.stackexchange.com/questions/13067/utf8x-vs-utf8-inputenc#13070
> 
> Hmm... interestingly, I've tried quite a few versions of the
> above which started in 2011, but had been updated in April 2016 :
>     https://tex.stackexchange.com/a/203804/7228
> from where it seems that
> 
>       	\usepackage[T1]{fontenc}
> 	\usepackage[utf8]{inputenc}
> 
> should be sufficient.  Further, note that from
>    https://tex.stackexchange.com/a/238135/7228
> the {ucs} package should no longer be needed since ca. 2013,
> hence your \usepackage[mathletters]{ucs}  would not be needed either.
> 
> HOWEVER:  After losing at least half an hour now, trying many
> variants I found that the only version that works correctly for
> me (with a teTeX / TeXlive version of 2018) is the version
> Serguei Sokol proposes (below), including the use of the 'utf8x'
> option *and* the 'ucs' package ...
> 
> which is pretty surprising after having read the
> tex.statexchange threads ...
> 
>      > On Tue, 18 Jun 2019 at 7:52 pm, Serguei Sokol <serguei.sokol at gmail.com>
>      > wrote:
> 
>      >> Hi,
>      >>
>      >> I am preparing a package where I would like to use UTF characters in .Rd
>      >> files. When the LaTeX comes to play, I got well known errors e.g.:
>      >> ! Package inputenc Error: Unicode character ? (U+2202)
>      >> (inputenc)                not set up for use with LaTeX.
>      >>
>      >> It is coherent with what is said on this page
>      >> https://developer.r-project.org/Encodings_and_R.html :
>      >> "Since LaTeX cannot handle Unicode we would have to convert the encoding
>      >> of latex help files or use Lambda (and tell it they were in UTF-8)."
> 
> That whole document has been very important and crucial, written
> by Prof Brian Ripley  who had worked a *LOT* to bring unicode to R,
> -- but it has been written 2004-2005  and indeed, I think it is
> probably fair to say that the above sentence no longer applies
> to current LaTeX engines (including "simple" pdflatex)... though really,
> I'm not the expert here, but I think it's a good point in time
> to reconsider how much UTF8 should be allowed/supported in *.Rd files.
> 
> One problem: This is (slightly) the wrong mailing list; this would have
> been a perfect topic for 'R-devel' (discussing about new
> features etc for R) instead....
> ( but we'd rather keep it here for now.)
> 
> Martin Maechler
> ETH Zurich and R Core Team
> 
> 
> 
>      >> But LaTeX can support UTF8 as shown with this small example:
> 
>   \documentclass{article}
>   \usepackage[mathletters]{ucs}
>   \usepackage[utf8x]{inputenc}
>   
>   \begin{document}
>   The vorticity ? is defined as $? = ? ? u$.
>   \end{document}
> 
>      >> I can compile it with my LaTeX without problem. May be you too?
>      >> So my suggestion would be to place these two lines somewhere in LaTeX
>      >> header generated by R doc system:
>      >> \usepackage[mathletters]{ucs}
>      >> \usepackage[utf8x]{inputenc}
>      >>
>      >> Note "utf8x" and not just "utf8" which is crucial for this example.
>      >> With a hope that it would fix unicode errors from LaTeX.
>      >>
>      >> Best,
>      >> Serguei.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From m@rk@p@dgh@m @end|ng |rom em@||@com  Wed Jun 19 12:45:51 2019
From: m@rk@p@dgh@m @end|ng |rom em@||@com (mark padgham)
Date: Wed, 19 Jun 2019 12:45:51 +0200
Subject: [R-pkg-devel] Link compiled C object to internal package file
Message-ID: <58c9dc14-b4a6-e453-5329-86bfbb1dc33e@email.com>

Dear All,

I'm developing a package which primarily relies on C code that itself
has to call an external text file representing a dictionary or lookup
table. The location of this file is defined in a C macro, the file
itself packaged in "./inst/dict/<myfile.txt>" and so currently called as
"#define mylocation './dict/<myfile.txt>'". I can load the package and
all works well, yet the tests fail because the compiled object
("./src/<myobject.so>") can not find this file **in tests only**. My
primary request would then be advice for where best to place such files
that need to be called directly by compiled objects, and how to direct
the compiled object to such files? Failing that, advice on why such
attempts at linking compiled objects to external files might fail only
during tests, yet work otherwise, would be appreciated.

Other important info: Yes, the external dictionary file **must** be
linked directly from the compiled object, not at run time. This means
that no R-based solutions can be implemented, and so the problem can
only be solved in this case through figuring out how to direct a
compiled object to connect to an additional package-internal file.

Thanks in advance,

mark


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun 19 14:10:33 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 19 Jun 2019 07:10:33 -0500
Subject: [R-pkg-devel] Link compiled C object to internal package file
In-Reply-To: <58c9dc14-b4a6-e453-5329-86bfbb1dc33e@email.com>
References: <58c9dc14-b4a6-e453-5329-86bfbb1dc33e@email.com>
Message-ID: <1ED60619-DD6F-4879-8515-69D4862FD726@dcn.davis.ca.us>

What do you mean by

"call an external text file"

? Text files are data... do you want to open it and read it? Are you familiar with the system.file() function?


On June 19, 2019 5:45:51 AM CDT, mark padgham <mark.padgham at email.com> wrote:
>Dear All,
>
>I'm developing a package which primarily relies on C code that itself
>has to call an external text file representing a dictionary or lookup
>table. The location of this file is defined in a C macro, the file
>itself packaged in "./inst/dict/<myfile.txt>" and so currently called
>as
>"#define mylocation './dict/<myfile.txt>'". I can load the package and
>all works well, yet the tests fail because the compiled object
>("./src/<myobject.so>") can not find this file **in tests only**. My
>primary request would then be advice for where best to place such files
>that need to be called directly by compiled objects, and how to direct
>the compiled object to such files? Failing that, advice on why such
>attempts at linking compiled objects to external files might fail only
>during tests, yet work otherwise, would be appreciated.
>
>Other important info: Yes, the external dictionary file **must** be
>linked directly from the compiled object, not at run time. This means
>that no R-based solutions can be implemented, and so the problem can
>only be solved in this case through figuring out how to direct a
>compiled object to connect to an additional package-internal file.
>
>Thanks in advance,
>
>mark
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From m@rk@p@dgh@m @end|ng |rom em@||@com  Wed Jun 19 16:48:15 2019
From: m@rk@p@dgh@m @end|ng |rom em@||@com (mark padgham)
Date: Wed, 19 Jun 2019 16:48:15 +0200
Subject: [R-pkg-devel] Link compiled C object to internal package file
In-Reply-To: <1ED60619-DD6F-4879-8515-69D4862FD726@dcn.davis.ca.us>
References: <58c9dc14-b4a6-e453-5329-86bfbb1dc33e@email.com>
 <1ED60619-DD6F-4879-8515-69D4862FD726@dcn.davis.ca.us>
Message-ID: <0f27d33c-29aa-bea8-9a76-ad6b7483a889@email.com>

Yeah, but that would require completely rewriting the C code to accept a
variable for something that is used hundreds of times as a simple macro.
(Most of that C code is an old library bundled with the package, so not
my work in that regard.) It would still be enormously easier to robustly
provide a relative location within the compiled source object to direct
it to the file ... but how?


On 19/06/2019 14:10, Jeff Newmiller wrote:
> What do you mean by
>
> "call an external text file"
>
> ? Text files are data... do you want to open it and read it? Are you familiar with the system.file() function?
>
>
> On June 19, 2019 5:45:51 AM CDT, mark padgham <mark.padgham at email.com> wrote:
>> Dear All,
>>
>> I'm developing a package which primarily relies on C code that itself
>> has to call an external text file representing a dictionary or lookup
>> table. The location of this file is defined in a C macro, the file
>> itself packaged in "./inst/dict/<myfile.txt>" and so currently called
>> as
>> "#define mylocation './dict/<myfile.txt>'". I can load the package and
>> all works well, yet the tests fail because the compiled object
>> ("./src/<myobject.so>") can not find this file **in tests only**. My
>> primary request would then be advice for where best to place such files
>> that need to be called directly by compiled objects, and how to direct
>> the compiled object to such files? Failing that, advice on why such
>> attempts at linking compiled objects to external files might fail only
>> during tests, yet work otherwise, would be appreciated.
>>
>> Other important info: Yes, the external dictionary file **must** be
>> linked directly from the compiled object, not at run time. This means
>> that no R-based solutions can be implemented, and so the problem can
>> only be solved in this case through figuring out how to direct a
>> compiled object to connect to an additional package-internal file.
>>
>> Thanks in advance,
>>
>> mark
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |uc@r @end|ng |rom |edor@project@org  Wed Jun 19 17:21:37 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 19 Jun 2019 17:21:37 +0200
Subject: [R-pkg-devel] Link compiled C object to internal package file
In-Reply-To: <0f27d33c-29aa-bea8-9a76-ad6b7483a889@email.com>
References: <58c9dc14-b4a6-e453-5329-86bfbb1dc33e@email.com>
 <1ED60619-DD6F-4879-8515-69D4862FD726@dcn.davis.ca.us>
 <0f27d33c-29aa-bea8-9a76-ad6b7483a889@email.com>
Message-ID: <CALEXWq2QSzJH3ibtk0-gXzNvmt0-kvg6HJS15bQjE32iu3M2uA@mail.gmail.com>

On Wed, 19 Jun 2019 at 16:47, mark padgham <mark.padgham at email.com> wrote:
>
> Yeah, but that would require completely rewriting the C code to accept a
> variable for something that is used hundreds of times as a simple macro.
> (Most of that C code is an old library bundled with the package, so not
> my work in that regard.) It would still be enormously easier to robustly
> provide a relative location within the compiled source object to direct
> it to the file ... but how?

I assume you have something like

#define MYMACRO "path/to/file"

and this MYMACRO is used here and there in the internal library.
Instead, you can set

#define MYMACRO getPath()

and this getPath function is defined somewhere and uses R's C API to
find that file and return the path (does someone know whether the
functionality of system.file() is directly accessible from C?).

I?aki


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Jun 19 17:46:25 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 19 Jun 2019 15:46:25 +0000
Subject: [R-pkg-devel] Link compiled C object to internal package file
In-Reply-To: <0f27d33c-29aa-bea8-9a76-ad6b7483a889@email.com>
References: <58c9dc14-b4a6-e453-5329-86bfbb1dc33e@email.com>
 <1ED60619-DD6F-4879-8515-69D4862FD726@dcn.davis.ca.us>
 <0f27d33c-29aa-bea8-9a76-ad6b7483a889@email.com>
Message-ID: <BN8PR05MB61963CB6AEBC948C30254D51F9E50@BN8PR05MB6196.namprd05.prod.outlook.com>

Section 1.2 of 'Writing R Extensions' says

Another example is when a package installs support files that are required at run time, and their location is substituted into an R data structure at installation time. The names of the top-level library directory (i.e., specifiable via the ?-l? argument) and the directory of the package itself are made available to the installation scripts via the two shell/environment variables R_LIBRARY_DIR and R_PACKAGE_DIR. Additionally, the name of the package (e.g. ?survival? or ?MASS?) being installed is available from the environment variable R_PACKAGE_NAME. (Currently the value of R_PACKAGE_DIR is always ${R_LIBRARY_DIR}/${R_PACKAGE_NAME}, but this used not to be the case when versioned installs were allowed. Its main use is in configure.win scripts for the installation path of external software?s DLLs.) Note that the value of R_PACKAGE_DIR may contain spaces and other shell-unfriendly characters, and so should be quoted in makefiles and configure scripts

which sounds approximately similar to your situation and suggests using the full path to the installed file R_PACKAGE_DIR/dict/<myfile.ext>.

It's not really clear what your two use cases are below, specifically the unique circumstances of 'in tests only'. I would guess that a relative path would not work, in general, because the path would be relative to the current working directory, which of course changes, rather than relative to the path of the shared object...

Martin Morgan

?On 6/19/19, 10:46 AM, "R-package-devel on behalf of mark padgham" <r-package-devel-bounces at r-project.org on behalf of mark.padgham at email.com> wrote:

    Yeah, but that would require completely rewriting the C code to accept a
    variable for something that is used hundreds of times as a simple macro.
    (Most of that C code is an old library bundled with the package, so not
    my work in that regard.) It would still be enormously easier to robustly
    provide a relative location within the compiled source object to direct
    it to the file ... but how?
    
    
    On 19/06/2019 14:10, Jeff Newmiller wrote:
    > What do you mean by
    >
    > "call an external text file"
    >
    > ? Text files are data... do you want to open it and read it? Are you familiar with the system.file() function?
    >
    >
    > On June 19, 2019 5:45:51 AM CDT, mark padgham <mark.padgham at email.com> wrote:
    >> Dear All,
    >>
    >> I'm developing a package which primarily relies on C code that itself
    >> has to call an external text file representing a dictionary or lookup
    >> table. The location of this file is defined in a C macro, the file
    >> itself packaged in "./inst/dict/<myfile.txt>" and so currently called
    >> as
    >> "#define mylocation './dict/<myfile.txt>'". I can load the package and
    >> all works well, yet the tests fail because the compiled object
    >> ("./src/<myobject.so>") can not find this file **in tests only**. My
    >> primary request would then be advice for where best to place such files
    >> that need to be called directly by compiled objects, and how to direct
    >> the compiled object to such files? Failing that, advice on why such
    >> attempts at linking compiled objects to external files might fail only
    >> during tests, yet work otherwise, would be appreciated.
    >>
    >> Other important info: Yes, the external dictionary file **must** be
    >> linked directly from the compiled object, not at run time. This means
    >> that no R-based solutions can be implemented, and so the problem can
    >> only be solved in this case through figuring out how to direct a
    >> compiled object to connect to an additional package-internal file.
    >>
    >> Thanks in advance,
    >>
    >> mark
    >>
    >> ______________________________________________
    >> R-package-devel at r-project.org mailing list
    >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Wed Jun 19 18:41:21 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Wed, 19 Jun 2019 16:41:21 +0000
Subject: [R-pkg-devel] CRAN NOTE: SHLIB_OPENMP_*FLAGS in Makefiles
In-Reply-To: <82fdd1586b934a888a8cedae0f9cc03e@sfu.ca>
References: <6a9606a8ec5e45b6938b7648a5553507@sfu.ca>,
 <630777baf5b64c0bb4456e809b725e02@sfu.ca>,
 <923af2ace4b543d2a0507ebcec3764b8@sfu.ca>,
 <f16f0609b242480bb12cd448c8b017b2@sfu.ca>,
 <137676ae8c594f9093ee1ab4de1c46f4@sfu.ca>,
 <a8b5a99c63f44c9d881aa4a1c059411c@sfu.ca>,
 <82fdd1586b934a888a8cedae0f9cc03e@sfu.ca>
Message-ID: <ec1115f17832431fbb29cfb95b39a8e5@sfu.ca>



Hi,



I got the following NOTES after submitting my R package to CRAN for the first time.


"

Flavor: r-devel-windows-ix86+x86_64
Check: use of SHLIB_OPENMP_*FLAGS in Makefiles, Result: NOTE
    src/Makevars.win: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but not in PKG_LIBS
    src/Makevars.win: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but linking is by C++
  Use of these macros is discussed in sect 1.2.1.1 of 'Writing R
  Extensions'. The macros for different languages may differ so the
  matching macro must be used in PKG_CXXFLAGS (etc) and match that used
  in PKG_LIBS (except for Fortran: see the manual).

Flavor: r-devel-linux-x86_64-debian-gcc
Check: use of SHLIB_OPENMP_*FLAGS in Makefiles, Result: NOTE
    src/Makevars: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but not in PKG_LIBS
    src/Makevars: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but linking is by C++
    src/Makevars.win: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but not in PKG_LIBS
    src/Makevars.win: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but linking is by C++
  Use of these macros is discussed in sect 1.2.1.1 of 'Writing R
  Extensions'. The macros for different languages may differ so the
  matching macro must be used in PKG_CXXFLAGS (etc) and match that used
  in PKG_LIBS (except for Fortran: see the manual).


"


I am using 'RcppArmadillo' for C++ coding. I am still not sure how to fix these above problems even though I went through the 'Writing R Extensions' document.  Could somebody help me fix these issues?


Thank you in advance!


Charith.

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Wed Jun 19 19:09:08 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 19 Jun 2019 12:09:08 -0500
Subject: [R-pkg-devel] CRAN NOTE: SHLIB_OPENMP_*FLAGS in Makefiles
In-Reply-To: <ec1115f17832431fbb29cfb95b39a8e5@sfu.ca>
References: <6a9606a8ec5e45b6938b7648a5553507@sfu.ca>
 <630777baf5b64c0bb4456e809b725e02@sfu.ca>
 <923af2ace4b543d2a0507ebcec3764b8@sfu.ca>
 <f16f0609b242480bb12cd448c8b017b2@sfu.ca>
 <137676ae8c594f9093ee1ab4de1c46f4@sfu.ca>
 <a8b5a99c63f44c9d881aa4a1c059411c@sfu.ca>
 <82fdd1586b934a888a8cedae0f9cc03e@sfu.ca>
 <ec1115f17832431fbb29cfb95b39a8e5@sfu.ca>
Message-ID: <23818.27700.451412.9578@rob.eddelbuettel.com>


Hi Charith,

On 19 June 2019 at 16:41, Charith Karunarathna wrote:
| I got the following NOTES after submitting my R package to CRAN for the first time.
| "
| Flavor: r-devel-windows-ix86+x86_64
| Check: use of SHLIB_OPENMP_*FLAGS in Makefiles, Result: NOTE
|     src/Makevars.win: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but not in PKG_LIBS
|     src/Makevars.win: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but linking is by C++
|   Use of these macros is discussed in sect 1.2.1.1 of 'Writing R
|   Extensions'. The macros for different languages may differ so the
|   matching macro must be used in PKG_CXXFLAGS (etc) and match that used
|   in PKG_LIBS (except for Fortran: see the manual).
| 
| Flavor: r-devel-linux-x86_64-debian-gcc
| Check: use of SHLIB_OPENMP_*FLAGS in Makefiles, Result: NOTE
|     src/Makevars: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but not in PKG_LIBS
|     src/Makevars: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but linking is by C++
|     src/Makevars.win: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but not in PKG_LIBS
|     src/Makevars.win: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but linking is by C++
|   Use of these macros is discussed in sect 1.2.1.1 of 'Writing R
|   Extensions'. The macros for different languages may differ so the
|   matching macro must be used in PKG_CXXFLAGS (etc) and match that used
|   in PKG_LIBS (except for Fortran: see the manual).
| "
| I am using 'RcppArmadillo' for C++ coding. I am still not sure how to fix these above problems even though I went through the 'Writing R Extensions' document.  Could somebody help me fix these issues?

See this post from April 15 here on this list
  https://stat.ethz.ch/pipermail/r-package-devel/2019q2/003762.html
and my reply to it
  https://stat.ethz.ch/pipermail/r-package-devel/2019q2/003764.html

There is also a dedicated list for Rcpp* questions which may have
been more on-topic.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |uc@r @end|ng |rom |edor@project@org  Wed Jun 19 19:11:04 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 19 Jun 2019 19:11:04 +0200
Subject: [R-pkg-devel] CRAN NOTE: SHLIB_OPENMP_*FLAGS in Makefiles
In-Reply-To: <ec1115f17832431fbb29cfb95b39a8e5@sfu.ca>
References: <6a9606a8ec5e45b6938b7648a5553507@sfu.ca>
 <630777baf5b64c0bb4456e809b725e02@sfu.ca>
 <923af2ace4b543d2a0507ebcec3764b8@sfu.ca>
 <f16f0609b242480bb12cd448c8b017b2@sfu.ca>
 <137676ae8c594f9093ee1ab4de1c46f4@sfu.ca>
 <a8b5a99c63f44c9d881aa4a1c059411c@sfu.ca>
 <82fdd1586b934a888a8cedae0f9cc03e@sfu.ca>
 <ec1115f17832431fbb29cfb95b39a8e5@sfu.ca>
Message-ID: <CALEXWq26MR0QtvF77uAxsjY_nU7CpeMeTVRf5RzYGqQnV-eBwg@mail.gmail.com>

On Wed, 19 Jun 2019 at 19:03, Charith Karunarathna
<charith_karunarathna at sfu.ca> wrote:
>
> Hi,
>
> I got the following NOTES after submitting my R package to CRAN for the first time.
>
> "
> Flavor: r-devel-windows-ix86+x86_64
> Check: use of SHLIB_OPENMP_*FLAGS in Makefiles, Result: NOTE
>     src/Makevars.win: SHLIB_OPENMP_CXXFLAGS is included in PKG_CXXFLAGS but not in PKG_LIBS

So you have

PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)

and you are missing

PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS)

>     src/Makevars.win: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but linking is by C++

Remove these from PKG_LIBS, you are compiling C++ code. CFLAGS -> C,
CXXFLAGS -> C++.

I?aki


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Jun 20 00:49:50 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 20 Jun 2019 10:49:50 +1200
Subject: [R-pkg-devel] [FORGED] Re:  .Rd, LaTeX and Unicode
In-Reply-To: <3e74b5b1-02ce-5709-f71d-6e6f3954c447@gmail.com>
References: <b9ac9810-fdbb-c900-8b47-e391f59108f3@gmail.com>
 <CAJmOi+PtUERWq5ebVPSVaR9C_mr7ttROqkpfostiSuMWLoJ3_g@mail.gmail.com>
 <23816.61107.717531.154581@stat.math.ethz.ch>
 <438D2EC9EAFE5946B2D5864670EA468E018F71FA65@MBXP02.ds.man.ac.uk>
 <3e74b5b1-02ce-5709-f71d-6e6f3954c447@gmail.com>
Message-ID: <1aedcb2a-b8ab-11ca-7db2-43af774cccfa@auckland.ac.nz>


I may well be toadally out to luntch here (if so please excuse the added 
noise) but perhaps the following may be of some help or relevance.

In a package that I wrote, I wanted to include the ? symbol in *.Rda 
file.  After a lot of thrashing about (and seeking advice from younger 
and wiser heads) I used this strategy:

* I put "\encoding{UTF-8}" at the very start of the *.Rda file
   (before the \name{ } command

* I made use of the ? symbol via the syntax:

     \enc{Wei?}{Weiss}

Again I apologise if this is completely off the point.

cheers,

Rolf


On 19/06/19 8:50 PM, Serguei Sokol wrote:
> On 18/06/2019 17:10, Georgi Boshnakov wrote:
>>
>> Since April 2018 'utf8' is the default input encoding in LaTeX, see
>> http://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/doc/ltnews.pdf 
>> and they added some symbols in December.
> Interesting ... but still not sufficient. I have a fairly recent latex 
> system:
> $ latex --version
> pdfTeX 3.14159265-2.6-1.40.19 (TeX Live 2018/Mageia)
> 
> but unfortunately utf8 alone (and even including
> \usepackage[mathletters]{ucs}) cannot compile utf8 math expressions.
> 
> I have also tried a full scale test on a tex file obtained with
> $ R CMD Rd2pdf --no-clean pkgname
> where I replaced
> 
> \usepackage[utf8]{inputenc}
> 
> by
> 
> \usepackage[mathletters]{ucs}
> \usepackage[utf8x]{inputenc}
> 
> and it did not compile either. In addition, I had to replace every 
> occurrence of
> 
> \inputencoding{utf8}
> 
> by
> 
> \inputencoding{utf8x}
> 
> after what pdflatex worked like a charm.
> 
> Serguei.
> 
>>
>> -----Original Message-----
>> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] 
>> On Behalf Of Martin Maechler
>> Sent: 18 June 2019 15:01
>> To: serguei.sokol at gmail.com; Hugh Parsonage
>> Cc: r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] .Rd, LaTeX and Unicode
>>
>>>>>>> Hugh Parsonage
>>>>>>> ???? on Tue, 18 Jun 2019 20:03:41 +1000 writes:
>>
>> ???? > utf8x is deprecated
>> ???? > 
>> https://tex.stackexchange.com/questions/13067/utf8x-vs-utf8-inputenc#13070 
>>
>>
>> Hmm... interestingly, I've tried quite a few versions of the
>> above which started in 2011, but had been updated in April 2016 :
>> ??? https://tex.stackexchange.com/a/203804/7228
>> from where it seems that
>>
>> ????????? \usepackage[T1]{fontenc}
>> ????\usepackage[utf8]{inputenc}
>>
>> should be sufficient.? Further, note that from
>> ?? https://tex.stackexchange.com/a/238135/7228
>> the {ucs} package should no longer be needed since ca. 2013,
>> hence your \usepackage[mathletters]{ucs}? would not be needed either.
>>
>> HOWEVER:? After losing at least half an hour now, trying many
>> variants I found that the only version that works correctly for
>> me (with a teTeX / TeXlive version of 2018) is the version
>> Serguei Sokol proposes (below), including the use of the 'utf8x'
>> option *and* the 'ucs' package ...
>>
>> which is pretty surprising after having read the
>> tex.statexchange threads ...
>>
>> ???? > On Tue, 18 Jun 2019 at 7:52 pm, Serguei Sokol 
>> <serguei.sokol at gmail.com>
>> ???? > wrote:
>>
>> ???? >> Hi,
>> ???? >>
>> ???? >> I am preparing a package where I would like to use UTF 
>> characters in .Rd
>> ???? >> files. When the LaTeX comes to play, I got well known errors 
>> e.g.:
>> ???? >> ! Package inputenc Error: Unicode character ? (U+2202)
>> ???? >> (inputenc)??????????????? not set up for use with LaTeX.
>> ???? >>
>> ???? >> It is coherent with what is said on this page
>> ???? >> https://developer.r-project.org/Encodings_and_R.html :
>> ???? >> "Since LaTeX cannot handle Unicode we would have to convert 
>> the encoding
>> ???? >> of latex help files or use Lambda (and tell it they were in 
>> UTF-8)."
>>
>> That whole document has been very important and crucial, written
>> by Prof Brian Ripley? who had worked a *LOT* to bring unicode to R,
>> -- but it has been written 2004-2005? and indeed, I think it is
>> probably fair to say that the above sentence no longer applies
>> to current LaTeX engines (including "simple" pdflatex)... though really,
>> I'm not the expert here, but I think it's a good point in time
>> to reconsider how much UTF8 should be allowed/supported in *.Rd files.
>>
>> One problem: This is (slightly) the wrong mailing list; this would have
>> been a perfect topic for 'R-devel' (discussing about new
>> features etc for R) instead....
>> ( but we'd rather keep it here for now.)
>>
>> Martin Maechler
>> ETH Zurich and R Core Team
>>
>>
>>
>> ???? >> But LaTeX can support UTF8 as shown with this small example:
>>
>> ? \documentclass{article}
>> ? \usepackage[mathletters]{ucs}
>> ? \usepackage[utf8x]{inputenc}
>> ? \begin{document}
>> ? The vorticity ? is defined as $? = ? ? u$.
>> ? \end{document}
>>
>> ???? >> I can compile it with my LaTeX without problem. May be you too?
>> ???? >> So my suggestion would be to place these two lines somewhere 
>> in LaTeX
>> ???? >> header generated by R doc system:
>> ???? >> \usepackage[mathletters]{ucs}
>> ???? >> \usepackage[utf8x]{inputenc}
>> ???? >>
>> ???? >> Note "utf8x" and not just "utf8" which is crucial for this 
>> example.
>> ???? >> With a hope that it would fix unicode errors from LaTeX.
>> ???? >>
>> ???? >> Best,
>> ???? >> Serguei


From boo@ @end|ng |rom nc@u@edu  Thu Jun 20 17:49:39 2019
From: boo@ @end|ng |rom nc@u@edu (Dennis Boos)
Date: Thu, 20 Jun 2019 11:49:39 -0400
Subject: [R-pkg-devel] access is denied
Message-ID: <6f879035-a6bf-3d6d-dece-d7e988d2f05c@ncsu.edu>

Developers,

I recently was successful getting a package into CRAN with your help.? 
But now I'm working on a second package and am stuck immediately.? Here 
is what I have done.

1. Created the base package using http://r-pkgs.had.co.nz/package.html 
to get started.
2. Then

> library(devtools) > document() Updating fsr documentation First time 
using roxygen2. Upgrading automatically... Error in 
normalizePath(path.expand(path), winslash, mustWork) : 
path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr": 
Access is denied In addition: Warning messages: 1: In 
normalizePath(path.expand(path), winslash, mustWork) : 
path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr": 
Access is denied 2: In normalizePath(path.expand(path), winslash, 
mustWork) : 
path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr/DESCRIPTION": 
Access is denied


What am I missing?? I didn't have this problem before.? I have 
re-downloaded RStudio and Rtools, but get the same results.

Dennis

-- 
Dennis Boos, Assoc. Head    email: dennis_boos at ncsu.edu
Department of Statistics    Phone: 919-515-1918
NC State University         Fax: 919-515-1169
Raleigh, NC 27695-8203      http://www4.stat.ncsu.edu/~boos

Aim for kindness, tolerance, and humility.
The rest of life will then fall into place.


	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu Jun 20 18:26:42 2019
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 20 Jun 2019 18:26:42 +0200
Subject: [R-pkg-devel] access is denied
In-Reply-To: <6f879035-a6bf-3d6d-dece-d7e988d2f05c@ncsu.edu>
References: <6f879035-a6bf-3d6d-dece-d7e988d2f05c@ncsu.edu>
Message-ID: <6a8afec7-1361-0dd6-4904-99b78b10c417@gmail.com>

If you have not already done so, I'd check the package directory (and 
its parent) is not opened in any application, including Windows 
Explorer, including current working directory in any command prompt. I'd 
also make sure the package is not loaded in any R session. The error 
message may be caused by that the file or directory is locked.

Best
Tomas

On 6/20/19 5:49 PM, Dennis Boos wrote:
> Developers,
>
> I recently was successful getting a package into CRAN with your help.
> But now I'm working on a second package and am stuck immediately.? Here
> is what I have done.
>
> 1. Created the base package using http://r-pkgs.had.co.nz/package.html
> to get started.
> 2. Then
>
>> library(devtools) > document() Updating fsr documentation First time
> using roxygen2. Upgrading automatically... Error in
> normalizePath(path.expand(path), winslash, mustWork) :
> path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr":
> Access is denied In addition: Warning messages: 1: In
> normalizePath(path.expand(path), winslash, mustWork) :
> path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr":
> Access is denied 2: In normalizePath(path.expand(path), winslash,
> mustWork) :
> path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr/DESCRIPTION":
> Access is denied
>
>
> What am I missing?? I didn't have this problem before.? I have
> re-downloaded RStudio and Rtools, but get the same results.
>
> Dennis
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jun 20 19:19:52 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 20 Jun 2019 12:19:52 -0500
Subject: [R-pkg-devel] access is denied
In-Reply-To: <6a8afec7-1361-0dd6-4904-99b78b10c417@gmail.com>
References: <6f879035-a6bf-3d6d-dece-d7e988d2f05c@ncsu.edu>
 <6a8afec7-1361-0dd6-4904-99b78b10c417@gmail.com>
Message-ID: <99B72DC1-BC19-4241-AFC5-FD7BD20DCE93@dcn.davis.ca.us>

I have not had much luck doing package development on network drives. Try using a local drive.

On June 20, 2019 11:26:42 AM CDT, Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
>If you have not already done so, I'd check the package directory (and 
>its parent) is not opened in any application, including Windows 
>Explorer, including current working directory in any command prompt.
>I'd 
>also make sure the package is not loaded in any R session. The error 
>message may be caused by that the file or directory is locked.
>
>Best
>Tomas
>
>On 6/20/19 5:49 PM, Dennis Boos wrote:
>> Developers,
>>
>> I recently was successful getting a package into CRAN with your help.
>> But now I'm working on a second package and am stuck immediately.?
>Here
>> is what I have done.
>>
>> 1. Created the base package using
>http://r-pkgs.had.co.nz/package.html
>> to get started.
>> 2. Then
>>
>>> library(devtools) > document() Updating fsr documentation First time
>> using roxygen2. Upgrading automatically... Error in
>> normalizePath(path.expand(path), winslash, mustWork) :
>>
>path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr":
>> Access is denied In addition: Warning messages: 1: In
>> normalizePath(path.expand(path), winslash, mustWork) :
>>
>path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr":
>> Access is denied 2: In normalizePath(path.expand(path), winslash,
>> mustWork) :
>>
>path[1]="\\wolftech.ad.ncsu.edu\cos\stat\Redirect\boos\Documents\srcis\fsr.package\fsr/DESCRIPTION":
>> Access is denied
>>
>>
>> What am I missing?? I didn't have this problem before.? I have
>> re-downloaded RStudio and Rtools, but get the same results.
>>
>> Dennis
>>
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From m@rk@p@dgh@m @end|ng |rom em@||@com  Fri Jun 21 11:18:05 2019
From: m@rk@p@dgh@m @end|ng |rom em@||@com (mark padgham)
Date: Fri, 21 Jun 2019 11:18:05 +0200
Subject: [R-pkg-devel] Link compiled C object to internal package file
In-Reply-To: <BN8PR05MB61963CB6AEBC948C30254D51F9E50@BN8PR05MB6196.namprd05.prod.outlook.com>
References: <58c9dc14-b4a6-e453-5329-86bfbb1dc33e@email.com>
 <1ED60619-DD6F-4879-8515-69D4862FD726@dcn.davis.ca.us>
 <0f27d33c-29aa-bea8-9a76-ad6b7483a889@email.com>
 <BN8PR05MB61963CB6AEBC948C30254D51F9E50@BN8PR05MB6196.namprd05.prod.outlook.com>
Message-ID: <7cee3726-ceb2-614f-d30f-b14c8dfb57d2@email.com>

Dear All,

Thanks for the input - it was sufficient for me to figure out a
solution, which I'll briefly describe here for future reference. This
draws primarily on the section of Writing R Extensions quoted by Martin
Morgan below, giving rise to the idea of combining environmental
variables, and the idea of I?aki Ucar (not posted to list) of defining
functional macros. Then it's quite simple:

1. Use system.file to set environmental variable on package load giving
full path to desired file.

2. Define macro as `#define MY_FILE_PATH getPath()`

3. Define the `getPath()` function as simply `char * getenv
("MY_FILE_PATH");`.

4. Insert `MY_FILE_PATH` macro for every desired reference to locally
packaged file.

Works perfectly! Thanks again,

mark


On 19/06/2019 17:46, Martin Morgan wrote:
> Section 1.2 of 'Writing R Extensions' says
>
> Another example is when a package installs support files that are required at run time, and their location is substituted into an R data structure at installation time. The names of the top-level library directory (i.e., specifiable via the ?-l? argument) and the directory of the package itself are made available to the installation scripts via the two shell/environment variables R_LIBRARY_DIR and R_PACKAGE_DIR. Additionally, the name of the package (e.g. ?survival? or ?MASS?) being installed is available from the environment variable R_PACKAGE_NAME. (Currently the value of R_PACKAGE_DIR is always ${R_LIBRARY_DIR}/${R_PACKAGE_NAME}, but this used not to be the case when versioned installs were allowed. Its main use is in configure.win scripts for the installation path of external software?s DLLs.) Note that the value of R_PACKAGE_DIR may contain spaces and other shell-unfriendly characters, and so should be quoted in makefiles and configure scripts
>
> which sounds approximately similar to your situation and suggests using the full path to the installed file R_PACKAGE_DIR/dict/<myfile.ext>.
>
> It's not really clear what your two use cases are below, specifically the unique circumstances of 'in tests only'. I would guess that a relative path would not work, in general, because the path would be relative to the current working directory, which of course changes, rather than relative to the path of the shared object...
>
> Martin Morgan
>
> ?On 6/19/19, 10:46 AM, "R-package-devel on behalf of mark padgham" <r-package-devel-bounces at r-project.org on behalf of mark.padgham at email.com> wrote:
>
>      Yeah, but that would require completely rewriting the C code to accept a
>      variable for something that is used hundreds of times as a simple macro.
>      (Most of that C code is an old library bundled with the package, so not
>      my work in that regard.) It would still be enormously easier to robustly
>      provide a relative location within the compiled source object to direct
>      it to the file ... but how?
>
>
>      On 19/06/2019 14:10, Jeff Newmiller wrote:
>      > What do you mean by
>      >
>      > "call an external text file"
>      >
>      > ? Text files are data... do you want to open it and read it? Are you familiar with the system.file() function?
>      >
>      >
>      > On June 19, 2019 5:45:51 AM CDT, mark padgham <mark.padgham at email.com> wrote:
>      >> Dear All,
>      >>
>      >> I'm developing a package which primarily relies on C code that itself
>      >> has to call an external text file representing a dictionary or lookup
>      >> table. The location of this file is defined in a C macro, the file
>      >> itself packaged in "./inst/dict/<myfile.txt>" and so currently called
>      >> as
>      >> "#define mylocation './dict/<myfile.txt>'". I can load the package and
>      >> all works well, yet the tests fail because the compiled object
>      >> ("./src/<myobject.so>") can not find this file **in tests only**. My
>      >> primary request would then be advice for where best to place such files
>      >> that need to be called directly by compiled objects, and how to direct
>      >> the compiled object to such files? Failing that, advice on why such
>      >> attempts at linking compiled objects to external files might fail only
>      >> during tests, yet work otherwise, would be appreciated.
>      >>
>      >> Other important info: Yes, the external dictionary file **must** be
>      >> linked directly from the compiled object, not at run time. This means
>      >> that no R-based solutions can be implemented, and so the problem can
>      >> only be solved in this case through figuring out how to direct a
>      >> compiled object to connect to an additional package-internal file.
>      >>
>      >> Thanks in advance,
>      >>
>      >> mark
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>      ______________________________________________
>      R-package-devel at r-project.org mailing list
>      https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @|expgh@ye@ @end|ng |rom gm@||@com  Sun Jun 23 23:32:07 2019
From: @|expgh@ye@ @end|ng |rom gm@||@com (Alex Hayes)
Date: Sun, 23 Jun 2019 16:32:07 -0500
Subject: [R-pkg-devel] Proposal: allow amsmath commands in function
 documentation
Message-ID: <CAN00JzZjG6YB0Gqj2ZXznrRYqw9s755ZHt71jLxcjq0ksg4kbQ@mail.gmail.com>

Hey all,

I would like to propose a change to function documentation in packages.
Currently, we can only use basic TeX in function documentation. It would be
nice to be able to use commands from the amsmath and amsfonts LaTeX
packages as well.

Recently I've been running into circumstances where the restriction to
basic TeX results in sub-par documentation. Allowing amsmath and amsfonts
commands will have two advantages:

1. Improved clarity of function documentation in the pdf manual
2. Consistent notation in function documentation and vignettes

For example, at the moment, I have a package that refers to the real
numbers as \mathbb R in the vignette, but just as R in the function
documentation. It would be nice to use \mathbb R in both settings.

Lastly, most web documentation (i.e. MathJax, pkgdown) supports amsmath and
amsfonts commands, so improvements made to function documentation will
appear both in the pdf manual, and in package websites maintained by
individual package authors.

Regards,
Alex

	[[alternative HTML version deleted]]


From mu@che|||j2 @end|ng |rom gm@||@com  Tue Jun 25 23:42:10 2019
From: mu@che|||j2 @end|ng |rom gm@||@com (John Muschelli)
Date: Tue, 25 Jun 2019 17:42:10 -0400
Subject: [R-pkg-devel] Maintainer a Group
Message-ID: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>

Dear Package Devs,
Does anyone have any thoughts on whether a maintainer can be an
organization/group instead of a person for CRAN?  I don't see there being
an issue as long as the "maintainer" is responsive and fixes issues.  Just
figured I'd ask before trying this for some packages.

Best,
John

	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Tue Jun 25 23:48:03 2019
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Tue, 25 Jun 2019 21:48:03 +0000
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
Message-ID: <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>

Hi John,

"Writing R Extensions" is quite explicit about this:

For a CRAN package it should be a person, not a mailing list and not a corporate entity

Best,
Max

On Jun 25, 2019 3:45 PM, John Muschelli <muschellij2 at gmail.com> wrote:
Dear Package Devs,
Does anyone have any thoughts on whether a maintainer can be an
organization/group instead of a person for CRAN?  I don't see there being
an issue as long as the "maintainer" is responsive and fixes issues.  Just
figured I'd ask before trying this for some packages.

Best,
John

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From mu@che|||j2 @end|ng |rom gm@||@com  Tue Jun 25 23:52:13 2019
From: mu@che|||j2 @end|ng |rom gm@||@com (John Muschelli)
Date: Tue, 25 Jun 2019 17:52:13 -0400
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
Message-ID: <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>

So a single email is not a mailing list and it's a research group, so not
really a corporate entity.  I don't see WHY explicitly this isn't allowed.
I understand that this decision has been made with a lot of thought in
mind, though.  This would make it much easier for research groups to not
orphan packages because the maintainer/student leaves and we can't really
centralize our code bases.

Best,
John


On Tue, Jun 25, 2019 at 5:48 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
wrote:

> Hi John,
>
> "Writing R Extensions" is quite explicit about this:
>
> For a CRAN package it should be a *person*, not a mailing list and not a
> corporate entity
>
> Best,
> Max
>
> On Jun 25, 2019 3:45 PM, John Muschelli <muschellij2 at gmail.com> wrote:
> Dear Package Devs,
> Does anyone have any thoughts on whether a maintainer can be an
> organization/group instead of a person for CRAN?  I don't see there being
> an issue as long as the "maintainer" is responsive and fixes issues.  Just
> figured I'd ask before trying this for some packages.
>
> Best,
> John
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jun 25 23:59:26 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 25 Jun 2019 23:59:26 +0200
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
 <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
Message-ID: <f5f935d5-287a-bd4a-7b40-b326c4757c8f@statistik.tu-dortmund.de>

The CRAN team has very bad experiences in the past when various people 
of research groups reponded with non coordinated answers. Hence the 
decision was made that we only want to talk to a dedicated maintainer 
who is responsible for the submission. And we want to know who that is.

Best,
Uwe Ligges



On 25.06.2019 23:52, John Muschelli wrote:
> So a single email is not a mailing list and it's a research group, so not
> really a corporate entity.  I don't see WHY explicitly this isn't allowed.
> I understand that this decision has been made with a lot of thought in
> mind, though.  This would make it much easier for research groups to not
> orphan packages because the maintainer/student leaves and we can't really
> centralize our code bases.
> 
> Best,
> John
> 
> 
> On Tue, Jun 25, 2019 at 5:48 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
> wrote:
> 
>> Hi John,
>>
>> "Writing R Extensions" is quite explicit about this:
>>
>> For a CRAN package it should be a *person*, not a mailing list and not a
>> corporate entity
>>
>> Best,
>> Max
>>
>> On Jun 25, 2019 3:45 PM, John Muschelli <muschellij2 at gmail.com> wrote:
>> Dear Package Devs,
>> Does anyone have any thoughts on whether a maintainer can be an
>> organization/group instead of a person for CRAN?  I don't see there being
>> an issue as long as the "maintainer" is responsive and fixes issues.  Just
>> figured I'd ask before trying this for some packages.
>>
>> Best,
>> John
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From mu@che|||j2 @end|ng |rom gm@||@com  Wed Jun 26 00:00:15 2019
From: mu@che|||j2 @end|ng |rom gm@||@com (John Muschelli)
Date: Tue, 25 Jun 2019 18:00:15 -0400
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <f5f935d5-287a-bd4a-7b40-b326c4757c8f@statistik.tu-dortmund.de>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
 <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
 <f5f935d5-287a-bd4a-7b40-b326c4757c8f@statistik.tu-dortmund.de>
Message-ID: <CAFsq6G82QDTVP-piBD0LgZzQ5UGDa53bzid8PJG8=G7LESKAeg@mail.gmail.com>

Understood, thanks for the clarification.  Is it acceptable to have gmail
tagged emails such as muschellij2+fslr at gmail.com for different packages
(such as fslr)?

Best,
John


On Tue, Jun 25, 2019 at 5:59 PM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> The CRAN team has very bad experiences in the past when various people
> of research groups reponded with non coordinated answers. Hence the
> decision was made that we only want to talk to a dedicated maintainer
> who is responsible for the submission. And we want to know who that is.
>
> Best,
> Uwe Ligges
>
>
>
> On 25.06.2019 23:52, John Muschelli wrote:
> > So a single email is not a mailing list and it's a research group, so not
> > really a corporate entity.  I don't see WHY explicitly this isn't
> allowed.
> > I understand that this decision has been made with a lot of thought in
> > mind, though.  This would make it much easier for research groups to not
> > orphan packages because the maintainer/student leaves and we can't really
> > centralize our code bases.
> >
> > Best,
> > John
> >
> >
> > On Tue, Jun 25, 2019 at 5:48 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
> > wrote:
> >
> >> Hi John,
> >>
> >> "Writing R Extensions" is quite explicit about this:
> >>
> >> For a CRAN package it should be a *person*, not a mailing list and not a
> >> corporate entity
> >>
> >> Best,
> >> Max
> >>
> >> On Jun 25, 2019 3:45 PM, John Muschelli <muschellij2 at gmail.com> wrote:
> >> Dear Package Devs,
> >> Does anyone have any thoughts on whether a maintainer can be an
> >> organization/group instead of a person for CRAN?  I don't see there
> being
> >> an issue as long as the "maintainer" is responsive and fixes issues.
> Just
> >> figured I'd ask before trying this for some packages.
> >>
> >> Best,
> >> John
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jun 26 00:02:31 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 26 Jun 2019 00:02:31 +0200
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <CAFsq6G82QDTVP-piBD0LgZzQ5UGDa53bzid8PJG8=G7LESKAeg@mail.gmail.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
 <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
 <f5f935d5-287a-bd4a-7b40-b326c4757c8f@statistik.tu-dortmund.de>
 <CAFsq6G82QDTVP-piBD0LgZzQ5UGDa53bzid8PJG8=G7LESKAeg@mail.gmail.com>
Message-ID: <e0bb79d9-2d12-6fde-a71f-e76ac40fef73@statistik.tu-dortmund.de>

Yes, it is.

Best,
Uwe Ligges

On 26.06.2019 00:00, John Muschelli wrote:
> Understood, thanks for the clarification.? Is it acceptable to have 
> gmail tagged emails such as muschellij2+fslr at gmail.com 
> <mailto:muschellij2%2Bfslr at gmail.com> for different packages (such as fslr)?
> 
> Best,
> John
> 
> 
> On Tue, Jun 25, 2019 at 5:59 PM Uwe Ligges 
> <ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
>     The CRAN team has very bad experiences in the past when various people
>     of research groups reponded with non coordinated answers. Hence the
>     decision was made that we only want to talk to a dedicated maintainer
>     who is responsible for the submission. And we want to know who that is.
> 
>     Best,
>     Uwe Ligges
> 
> 
> 
>     On 25.06.2019 23:52, John Muschelli wrote:
>      > So a single email is not a mailing list and it's a research
>     group, so not
>      > really a corporate entity.? I don't see WHY explicitly this isn't
>     allowed.
>      > I understand that this decision has been made with a lot of
>     thought in
>      > mind, though.? This would make it much easier for research groups
>     to not
>      > orphan packages because the maintainer/student leaves and we
>     can't really
>      > centralize our code bases.
>      >
>      > Best,
>      > John
>      >
>      >
>      > On Tue, Jun 25, 2019 at 5:48 PM Max Turgeon
>     <Max.Turgeon at umanitoba.ca <mailto:Max.Turgeon at umanitoba.ca>>
>      > wrote:
>      >
>      >> Hi John,
>      >>
>      >> "Writing R Extensions" is quite explicit about this:
>      >>
>      >> For a CRAN package it should be a *person*, not a mailing list
>     and not a
>      >> corporate entity
>      >>
>      >> Best,
>      >> Max
>      >>
>      >> On Jun 25, 2019 3:45 PM, John Muschelli <muschellij2 at gmail.com
>     <mailto:muschellij2 at gmail.com>> wrote:
>      >> Dear Package Devs,
>      >> Does anyone have any thoughts on whether a maintainer can be an
>      >> organization/group instead of a person for CRAN?? I don't see
>     there being
>      >> an issue as long as the "maintainer" is responsive and fixes
>     issues.? Just
>      >> figured I'd ask before trying this for some packages.
>      >>
>      >> Best,
>      >> John
>      >>
>      >>? ? ? ? ? [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jun 26 00:15:31 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 25 Jun 2019 18:15:31 -0400
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
 <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
Message-ID: <10aa29fb-a75a-219e-857a-000abe32fe8c@gmail.com>

On 25/06/2019 5:52 p.m., John Muschelli wrote:
> So a single email is not a mailing list and it's a research group, so not
> really a corporate entity.  I don't see WHY explicitly this isn't allowed.
> I understand that this decision has been made with a lot of thought in
> mind, though.  This would make it much easier for research groups to not
> orphan packages because the maintainer/student leaves and we can't really
> centralize our code bases.

Pick one member of the group to be the maintainer. Don't choose someone 
who is likely to leave, choose a responsible person who is likely to be 
around a long time. If that person does leave, being responsible, 
they'll pass the role to someone else in the group.  If they don't, 
another member of the group can volunteer to CRAN to take over as 
maintainer after the package is orphaned because the original maintainer 
is not responding to CRAN requests.

On the other hand, if you were allowed to choose the group email as 
maintainer, requests from CRAN could be ignored, because everyone might 
assume it's someone else's responsibility to respond.

Duncan Murdoch


From mu@che|||j2 @end|ng |rom gm@||@com  Wed Jun 26 01:31:22 2019
From: mu@che|||j2 @end|ng |rom gm@||@com (John Muschelli)
Date: Tue, 25 Jun 2019 19:31:22 -0400
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <10aa29fb-a75a-219e-857a-000abe32fe8c@gmail.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
 <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
 <10aa29fb-a75a-219e-857a-000abe32fe8c@gmail.com>
Message-ID: <CAFsq6G--gPZWoWqETtkTHNdd=qGzF4mgh+8xKsvR7gH8c-pcVw@mail.gmail.com>

Duncan, I agree, but most likely to stay around is the PI, as much of the
work is students and post docs, who?s least likely to respond.   Even with
a responsible person, not easy for them to pass on as it?s not their job or
any easy thing to ask if it wasn?t the PI.  Also making a post doc or
student as the lead for multiple packages wouldn?t be appropriate or solve
the issue.  The group email would have a priority Of the ?true? maintainer
plus other helpers.  Just figured we?d get the confirmation before moving
forward.

On Tue, Jun 25, 2019 at 6:15 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 25/06/2019 5:52 p.m., John Muschelli wrote:
> > So a single email is not a mailing list and it's a research group, so not
> > really a corporate entity.  I don't see WHY explicitly this isn't
> allowed.
> > I understand that this decision has been made with a lot of thought in
> > mind, though.  This would make it much easier for research groups to not
> > orphan packages because the maintainer/student leaves and we can't really
> > centralize our code bases.
>
> Pick one member of the group to be the maintainer. Don't choose someone
> who is likely to leave, choose a responsible person who is likely to be
> around a long time. If that person does leave, being responsible,
> they'll pass the role to someone else in the group.  If they don't,
> another member of the group can volunteer to CRAN to take over as
> maintainer after the package is orphaned because the original maintainer
> is not responding to CRAN requests.
>
> On the other hand, if you were allowed to choose the group email as
> maintainer, requests from CRAN could be ignored, because everyone might
> assume it's someone else's responsibility to respond.
>
> Duncan Murdoch
>
-- 
John

	[[alternative HTML version deleted]]


From d@tr7320 @end|ng |rom un|@@ydney@edu@@u  Wed Jun 26 03:00:10 2019
From: d@tr7320 @end|ng |rom un|@@ydney@edu@@u (Dario Strbenac)
Date: Wed, 26 Jun 2019 01:00:10 +0000
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <CAFsq6G--gPZWoWqETtkTHNdd=qGzF4mgh+8xKsvR7gH8c-pcVw@mail.gmail.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
 <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
 <10aa29fb-a75a-219e-857a-000abe32fe8c@gmail.com>,
 <CAFsq6G--gPZWoWqETtkTHNdd=qGzF4mgh+8xKsvR7gH8c-pcVw@mail.gmail.com>
Message-ID: <SY2PR01MB2729A46CE8F1BF807E81F473CDE20@SY2PR01MB2729.ausprd01.prod.outlook.com>

Good day,

What about the CRAN package Rmixmod? Its contact address is a mailing list and its status is Orphaned. It seems that the mailing list e-mail address was not detected during review of the recently updated version. I hope that this can systematically be prevented in other package submissions.

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jun 26 13:54:19 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 26 Jun 2019 13:54:19 +0200
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <SY2PR01MB2729A46CE8F1BF807E81F473CDE20@SY2PR01MB2729.ausprd01.prod.outlook.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
 <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
 <10aa29fb-a75a-219e-857a-000abe32fe8c@gmail.com>
 <CAFsq6G--gPZWoWqETtkTHNdd=qGzF4mgh+8xKsvR7gH8c-pcVw@mail.gmail.com>
 <SY2PR01MB2729A46CE8F1BF807E81F473CDE20@SY2PR01MB2729.ausprd01.prod.outlook.com>
Message-ID: <4db731a1-1645-4bdf-0b35-b26506365eb7@statistik.tu-dortmund.de>

Thanks, a good example for the case at hand, where it again does not 
help that there is a mailing list, but apparently nobody feels 
responsible and the CRAN team had to fix the package twice already.

Best,
Uwe Ligges

On 26.06.2019 03:00, Dario Strbenac wrote:
> Good day,
> 
> What about the CRAN package Rmixmod? Its contact address is a mailing list and its status is Orphaned. It seems that the mailing list e-mail address was not detected during review of the recently updated version. I hope that this can systematically be prevented in other package submissions.
> 
> --------------------------------------
> Dario Strbenac
> University of Sydney
> Camperdown NSW 2050
> Australia
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From Jor|@@Mey@ @end|ng |rom ugent@be  Wed Jun 26 14:11:37 2019
From: Jor|@@Mey@ @end|ng |rom ugent@be (Joris Meys)
Date: Wed, 26 Jun 2019 14:11:37 +0200
Subject: [R-pkg-devel] Maintainer a Group
In-Reply-To: <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
References: <CAFsq6G-xdJZ3_58M78hBgGhjEdw87mXLx+vxSs7Ryq2EQ3ZPUA@mail.gmail.com>
 <ed16c6ed-d0c5-4e52-a6c4-4d115d99c212@email.android.com>
 <CAFsq6G-_0r=KJaMqzS-exNQSLJnudqem0PwobSkeYxKjHUD2kg@mail.gmail.com>
Message-ID: <CAO1zAVa+CCbgNS3SAQ+F7whLo-8ut=bV1fSvgU6UUXLmQrwsUA@mail.gmail.com>

FWIW, at our department I'm the designated "maintainer" for most of the
packages developed here. While I worked on quite a few of them, I'm not
involved in all. We chose to do it this way exactly for the reasons
mentioned in this thread, and out of respect for the wishes of CRAN. I'm
not a researcher myself but officially "technical staff" (i.e. I have a
fixed position at the uni and I'm not a professor). That makes me the
"natural" responsible for following up on our packages.

That said, people leaving the research department shouldn't be that much of
a problem, as long as there's some system to keep track of packages
developed. When that's in place, the package can be designated to another
member of the research group and the information on CRAN can easily be
updated. I don't think CRAN would object to that :-) It just requires the
research group to stay aware of previous work. And that can sometimes be a
challenge in itself...

Cheers
Joris

On Tue, Jun 25, 2019 at 11:55 PM John Muschelli <muschellij2 at gmail.com>
wrote:

> So a single email is not a mailing list and it's a research group, so not
> really a corporate entity.  I don't see WHY explicitly this isn't allowed.
> I understand that this decision has been made with a lot of thought in
> mind, though.  This would make it much easier for research groups to not
> orphan packages because the maintainer/student leaves and we can't really
> centralize our code bases.
>
> Best,
> John
>
>
> On Tue, Jun 25, 2019 at 5:48 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
> wrote:
>
> > Hi John,
> >
> > "Writing R Extensions" is quite explicit about this:
> >
> > For a CRAN package it should be a *person*, not a mailing list and not a
> > corporate entity
> >
> > Best,
> > Max
> >
> > On Jun 25, 2019 3:45 PM, John Muschelli <muschellij2 at gmail.com> wrote:
> > Dear Package Devs,
> > Does anyone have any thoughts on whether a maintainer can be an
> > organization/group instead of a person for CRAN?  I don't see there being
> > an issue as long as the "maintainer" is responsive and fixes issues.
> Just
> > figured I'd ask before trying this for some packages.
> >
> > Best,
> > John
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From ru@@e||-|enth @end|ng |rom u|ow@@edu  Wed Jun 26 20:54:52 2019
From: ru@@e||-|enth @end|ng |rom u|ow@@edu (Lenth, Russell V)
Date: Wed, 26 Jun 2019 18:54:52 +0000
Subject: [R-pkg-devel] pandoc version used in winbuilder
Message-ID: <DM6PR04MB43801E7F4A7EC66781448FC8F1E20@DM6PR04MB4380.namprd04.prod.outlook.com>

All,

How does one tell what version of pandoc is being used by winbuilder (and probably other related CRAN-submission processes)?

I have a package with several HTML vignettes, for which I use a custom style. I had decided to add the pandoc option '-strip-comments' to my script (my vignettes have quite a few HTML comments that are used for indexing and are not needed after the vignettes are built). When I built the package and submitted it for checking to winbuilder (for the development version of R), the result was that each vignette failed to rebuild, with a message that pandoc.exe has no option -strip-comments. However, that option has been available since pandoc version 2.0; and its latest version is 2.7.3.

This is not a big deal for my package, so I just removed that option and then all was OK. But still, why are we having to rely on a relatively ancient version of pandoc?

Thanks

Russ

Russell V. Lenth  -  Professor Emeritus
Department of Statistics and Actuarial Science
The University of Iowa  -  Iowa City, IA 52242  USA
Voice (319)335-0712 (Dept. office)  -  FAX (319)335-3017



	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun 27 15:51:51 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 27 Jun 2019 09:51:51 -0400
Subject: [R-pkg-devel] pandoc version used in winbuilder
In-Reply-To: <DM6PR04MB43801E7F4A7EC66781448FC8F1E20@DM6PR04MB4380.namprd04.prod.outlook.com>
References: <DM6PR04MB43801E7F4A7EC66781448FC8F1E20@DM6PR04MB4380.namprd04.prod.outlook.com>
Message-ID: <feabfe4e-5cac-4bc7-aae3-36227a82bb51@gmail.com>

On 26/06/2019 2:54 p.m., Lenth, Russell V wrote:
> All,
> 
> How does one tell what version of pandoc is being used by winbuilder (and probably other related CRAN-submission processes)?

The function rmarkdown::pandoc_version() will tell you.
> 
> I have a package with several HTML vignettes, for which I use a custom style. I had decided to add the pandoc option '-strip-comments' to my script (my vignettes have quite a few HTML comments that are used for indexing and are not needed after the vignettes are built). When I built the package and submitted it for checking to winbuilder (for the development version of R), the result was that each vignette failed to rebuild, with a message that pandoc.exe has no option -strip-comments. However, that option has been available since pandoc version 2.0; and its latest version is 2.7.3.
> 
> This is not a big deal for my package, so I just removed that option and then all was OK. But still, why are we having to rely on a relatively ancient version of pandoc?

It takes work to install a new version, and presumably nobody has done 
that work.  Pandoc is not easy to build, so some CRAN machines don't 
have it at all.

Your DESCRIPTION file should list it in SystemRequirements with the 
required version number.  I'd suggest using a reasonably low number if 
you want CRAN to accept and build your package.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun 27 16:06:33 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 27 Jun 2019 10:06:33 -0400
Subject: [R-pkg-devel] pandoc version used in winbuilder
In-Reply-To: <feabfe4e-5cac-4bc7-aae3-36227a82bb51@gmail.com>
References: <DM6PR04MB43801E7F4A7EC66781448FC8F1E20@DM6PR04MB4380.namprd04.prod.outlook.com>
 <feabfe4e-5cac-4bc7-aae3-36227a82bb51@gmail.com>
Message-ID: <4b9033ff-87b5-9238-c7cf-c345acc10739@gmail.com>

On 27/06/2019 9:51 a.m., Duncan Murdoch wrote:
> On 26/06/2019 2:54 p.m., Lenth, Russell V wrote:
>> All,
>>
>> How does one tell what version of pandoc is being used by winbuilder (and probably other related CRAN-submission processes)?
> 
> The function rmarkdown::pandoc_version() will tell you.
>>
>> I have a package with several HTML vignettes, for which I use a custom style. I had decided to add the pandoc option '-strip-comments' to my script (my vignettes have quite a few HTML comments that are used for indexing and are not needed after the vignettes are built). When I built the package and submitted it for checking to winbuilder (for the development version of R), the result was that each vignette failed to rebuild, with a message that pandoc.exe has no option -strip-comments. However, that option has been available since pandoc version 2.0; and its latest version is 2.7.3.
>>
>> This is not a big deal for my package, so I just removed that option and then all was OK. But still, why are we having to rely on a relatively ancient version of pandoc?
> 
> It takes work to install a new version, and presumably nobody has done
> that work.  Pandoc is not easy to build, so some CRAN machines don't
> have it at all.
> 
> Your DESCRIPTION file should list it in SystemRequirements with the
> required version number.  I'd suggest using a reasonably low number if
> you want CRAN to accept and build your package.

By the way, I just looked through a fairly recent copy of CRAN, and only 
3 packages asked for pandoc >= 2.0.  So that's a reason it's been a low 
priority to install it.

Duncan Murdoch


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Jun 27 16:33:04 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 27 Jun 2019 15:33:04 +0100
Subject: [R-pkg-devel] pandoc version used in winbuilder
In-Reply-To: <feabfe4e-5cac-4bc7-aae3-36227a82bb51@gmail.com>
References: <DM6PR04MB43801E7F4A7EC66781448FC8F1E20@DM6PR04MB4380.namprd04.prod.outlook.com>
 <feabfe4e-5cac-4bc7-aae3-36227a82bb51@gmail.com>
Message-ID: <CABtg=K=QH+81YfVKMiQRk_G=A1OADF9Wz11qjPMpQAjxYC+Yww@mail.gmail.com>

On Thu, Jun 27, 2019 at 2:52 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:
[...]

>
> It takes work to install a new version, and presumably nobody has done
> that work.  Pandoc is not easy to build, so some CRAN machines don't
> have it at all.
>

Pandoc is indeed not easy to build. Luckily, we don't have to build it
ourselves. R-hub has fully static self-contained binaries for 1.x:
https://files.r-hub.io/pandoc/
https://github.com/r-hub/pandoc-builders#static-binaries

and there are official static binaries and installers for 2.x:
https://github.com/jgm/pandoc/releases

Gabor

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun 27 17:36:45 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 27 Jun 2019 11:36:45 -0400
Subject: [R-pkg-devel] pandoc version used in winbuilder
In-Reply-To: <CABtg=K=QH+81YfVKMiQRk_G=A1OADF9Wz11qjPMpQAjxYC+Yww@mail.gmail.com>
References: <DM6PR04MB43801E7F4A7EC66781448FC8F1E20@DM6PR04MB4380.namprd04.prod.outlook.com>
 <feabfe4e-5cac-4bc7-aae3-36227a82bb51@gmail.com>
 <CABtg=K=QH+81YfVKMiQRk_G=A1OADF9Wz11qjPMpQAjxYC+Yww@mail.gmail.com>
Message-ID: <6e1ec5e8-4d74-e302-5402-12c59e5f18a8@gmail.com>

On 27/06/2019 10:33 a.m., G?bor Cs?rdi wrote:
> On Thu, Jun 27, 2019 at 2:52 PM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> [...]
> 
> 
>     It takes work to install a new version, and presumably nobody has done
>     that work.? Pandoc is not easy to build, so some CRAN machines don't
>     have it at all.
> 
> 
> Pandoc is indeed not easy to build. Luckily, we don't have to build it 
> ourselves. R-hub has fully static self-contained binaries for 1.x:
> https://files.r-hub.io/pandoc/
> https://github.com/r-hub/pandoc-builders#static-binaries
> 
> and there are official static binaries and installers for 2.x:
> https://github.com/jgm/pandoc/releases

I don't see Solaris builds there -- as far as I know that's the flavour 
of CRAN machine that's missing it.  rgl gets a warning about CRAN being 
unable to build the vignettes because of that.

Duncan Murdoch


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Jun 27 17:57:26 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 27 Jun 2019 16:57:26 +0100
Subject: [R-pkg-devel] pandoc version used in winbuilder
In-Reply-To: <6e1ec5e8-4d74-e302-5402-12c59e5f18a8@gmail.com>
References: <DM6PR04MB43801E7F4A7EC66781448FC8F1E20@DM6PR04MB4380.namprd04.prod.outlook.com>
 <feabfe4e-5cac-4bc7-aae3-36227a82bb51@gmail.com>
 <CABtg=K=QH+81YfVKMiQRk_G=A1OADF9Wz11qjPMpQAjxYC+Yww@mail.gmail.com>
 <6e1ec5e8-4d74-e302-5402-12c59e5f18a8@gmail.com>
Message-ID: <CABtg=K=8oGzE9gMR7ZhU2qiYkaxspWeuZyAJ053WNS+zxnV-9Q@mail.gmail.com>

On Thu, Jun 27, 2019 at 4:36 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> I don't see Solaris builds there -- as far as I know that's the flavour
> of CRAN machine that's missing it.  rgl gets a warning about CRAN being
> unable to build the vignettes because of that.
>

I am not sure if pandoc supports Solaris, I would think not. OpenCSW does
not have any Haskell compiler AFAICT.

I would think that having pandoc on Solaris is not super important. R can
still run all the vignette code without pandoc, only the creation of the
actual vignette, e.g. the markdown to HTML conversion is skipped. This step
does involve any R or R packages code, and it can also be tested on other
platforms.

Gabor

	[[alternative HTML version deleted]]


From ru@@e||-|enth @end|ng |rom u|ow@@edu  Thu Jun 27 18:29:47 2019
From: ru@@e||-|enth @end|ng |rom u|ow@@edu (Lenth, Russell V)
Date: Thu, 27 Jun 2019 16:29:47 +0000
Subject: [R-pkg-devel] [External] Re:  pandoc version used in winbuilder
In-Reply-To: <4b9033ff-87b5-9238-c7cf-c345acc10739@gmail.com>
References: <DM6PR04MB43801E7F4A7EC66781448FC8F1E20@DM6PR04MB4380.namprd04.prod.outlook.com>
 <feabfe4e-5cac-4bc7-aae3-36227a82bb51@gmail.com>
 <4b9033ff-87b5-9238-c7cf-c345acc10739@gmail.com>
Message-ID: <DM6PR04MB4380BEB1D43AA69882E51024F1FD0@DM6PR04MB4380.namprd04.prod.outlook.com>

Thanks. By the way, just for clarity, I do know that the option I wanted was --strip-comments, with two hyphens. When I posted this, apparently '--' got changed to a dash by auto-incorrect.

RL

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Thursday, June 27, 2019 9:07 AM
To: Lenth, Russell V <russell-lenth at uiowa.edu>; r-package-devel at r-project.org
Subject: [External] Re: [R-pkg-devel] pandoc version used in winbuilder

On 27/06/2019 9:51 a.m., Duncan Murdoch wrote:
> On 26/06/2019 2:54 p.m., Lenth, Russell V wrote:
>> All,
>>
>> How does one tell what version of pandoc is being used by winbuilder (and probably other related CRAN-submission processes)?
> 
> The function rmarkdown::pandoc_version() will tell you.
>>
>> I have a package with several HTML vignettes, for which I use a custom style. I had decided to add the pandoc option '-strip-comments' to my script (my vignettes have quite a few HTML comments that are used for indexing and are not needed after the vignettes are built). When I built the package and submitted it for checking to winbuilder (for the development version of R), the result was that each vignette failed to rebuild, with a message that pandoc.exe has no option -strip-comments. However, that option has been available since pandoc version 2.0; and its latest version is 2.7.3.
>>
>> This is not a big deal for my package, so I just removed that option and then all was OK. But still, why are we having to rely on a relatively ancient version of pandoc?
> 
> It takes work to install a new version, and presumably nobody has done 
> that work.  Pandoc is not easy to build, so some CRAN machines don't 
> have it at all.
> 
> Your DESCRIPTION file should list it in SystemRequirements with the 
> required version number.  I'd suggest using a reasonably low number if 
> you want CRAN to accept and build your package.

By the way, I just looked through a fairly recent copy of CRAN, and only
3 packages asked for pandoc >= 2.0.  So that's a reason it's been a low priority to install it.

Duncan Murdoch

From chr|@t|@n@henn|g @end|ng |rom un|bo@|t  Fri Jun 28 13:10:01 2019
From: chr|@t|@n@henn|g @end|ng |rom un|bo@|t (Christian Martin Hennig)
Date: Fri, 28 Jun 2019 11:10:01 +0000
Subject: [R-pkg-devel] Warning: replacing previous import ...
Message-ID: <f4ee9fb8-af29-c367-7f88-353bbd1947f6@unibo.it>

Dear list,

I'm maintainer of the fpc package and got an email that I need to 
replace a warning that has come up. The warning is:

"Warning: replacing previous import ?mclust::dmvnorm? by 
?mvtnorm::dmvnorm? when loading ?fpc?"

Back story: A few month ago I was contacted by the maintainer of mclust 
that they now incorporate their own dmvnorm function. As dmvnorm is used 
in my package, he suggested to replace all dmvnorm by mvtnorm::dmvnorm, 
which I did. Initially this was accepted without warning by CRAN.

I don't really understand what I should do about the warning. Isn't 
mvtnorm::dmvnorm the way to do this, if I want to go on using mvtnorm's 
dmvnorm function? All "dmvnorm" occurrences in my package are now 
mvtnorm::dmvnorm as intended and requested. Both mclust and mvtnorm are 
imported. The only (probably somewhat stupid) idea I have is to list the 
import of? mvtnorm before mclust in NAMESPACE (currently mclust is 
imported forst), but this seems silly to me - what if I wanted to use 
both mvtnorm::dmvnorm and mclust::dmvnorm?

Any hint?

Thanks,

Christian

-- 
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it
currently on leave from UCL; UCL email still works


From r@||@@tubner @end|ng |rom gm@||@com  Fri Jun 28 13:23:09 2019
From: r@||@@tubner @end|ng |rom gm@||@com (Ralf Stubner)
Date: Fri, 28 Jun 2019 13:23:09 +0200
Subject: [R-pkg-devel] Warning: replacing previous import ...
In-Reply-To: <f4ee9fb8-af29-c367-7f88-353bbd1947f6@unibo.it>
References: <f4ee9fb8-af29-c367-7f88-353bbd1947f6@unibo.it>
Message-ID: <CAFQwRQwKXTLhmXe00wBBQLAFYa_C=y_EH2V-n36oZzFc=y-u4Q@mail.gmail.com>

Hi Christian,

in your NAMESPACE you import both mvtnorm and mclust completely. The
warning should go away if you change this to importFrom(...) with only
the methods you actually need, in particular dmvnorm either from
mvtnorm or from mclust. Alternatively, you could leave out the imports
and always use the fully qualified names. This makes it easy to use
both mvtnorm::dmvnorm and mclust::dmvnorm in the same package.

cheerio
ralf

On Fri, Jun 28, 2019 at 1:10 PM Christian Martin Hennig
<christian.hennig at unibo.it> wrote:
>
> Dear list,
>
> I'm maintainer of the fpc package and got an email that I need to
> replace a warning that has come up. The warning is:
>
> "Warning: replacing previous import ?mclust::dmvnorm? by
> ?mvtnorm::dmvnorm? when loading ?fpc?"
>
> Back story: A few month ago I was contacted by the maintainer of mclust
> that they now incorporate their own dmvnorm function. As dmvnorm is used
> in my package, he suggested to replace all dmvnorm by mvtnorm::dmvnorm,
> which I did. Initially this was accepted without warning by CRAN.
>
> I don't really understand what I should do about the warning. Isn't
> mvtnorm::dmvnorm the way to do this, if I want to go on using mvtnorm's
> dmvnorm function? All "dmvnorm" occurrences in my package are now
> mvtnorm::dmvnorm as intended and requested. Both mclust and mvtnorm are
> imported. The only (probably somewhat stupid) idea I have is to list the
> import of  mvtnorm before mclust in NAMESPACE (currently mclust is
> imported forst), but this seems silly to me - what if I wanted to use
> both mvtnorm::dmvnorm and mclust::dmvnorm?
>
> Any hint?
>
> Thanks,
>
> Christian
>
> --
> Christian Hennig
> Dipartimento di Scienze Statistiche "Paolo Fortunati",
> Universita di Bologna, phone +39 05120 98163
> christian.hennig at unibo.it
> currently on leave from UCL; UCL email still works
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||or|@n@o@w@|d @end|ng |rom gm@||@com  Fri Jun 28 10:16:57 2019
From: ||or|@n@o@w@|d @end|ng |rom gm@||@com (Florian Oswald)
Date: Fri, 28 Jun 2019 10:16:57 +0200
Subject: [R-pkg-devel] implications of staged install for data processing
 packages
Message-ID: <CAKezR-xf1ahaY4f5VCfJTg4OGqbDysJPeHcpX+QVyB5rPGMt9A@mail.gmail.com>

Hi all

I ran into trouble with the changes starting to come in with R3.6 stemming
from the new staged installation, which checks and errors on hard coded
paths in R code. I understand there is an opt out, but still want to know.
here's the blog post:
https://developer.r-project.org/Blog/public/2019/02/14/staged-install/

I have several packages which look like that:

   1. large messy dataset stored on disk as `filename`, maybe a csv.
   2. R package has a function `clean(filename)` which reads the data and
   brings it into useable form
   3. R package does analysis
   4. R package exports results

`filename` is hard coded. What is the proper way to do this instead? Should
I store the inital raw data inside the R package in `/inst`? These things
are typically very large, so I like to decouple the raw data from the
package (easier to share).

thanks for any suggestions!

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Fri Jun 28 17:10:50 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 28 Jun 2019 15:10:50 +0000
Subject: [R-pkg-devel] 
 implications of staged install for data processing packages
In-Reply-To: <CAKezR-xf1ahaY4f5VCfJTg4OGqbDysJPeHcpX+QVyB5rPGMt9A@mail.gmail.com>
References: <CAKezR-xf1ahaY4f5VCfJTg4OGqbDysJPeHcpX+QVyB5rPGMt9A@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F720553@MBXP02.ds.man.ac.uk>

You need to give details what exactly gets you into trouble and about your use case, since any advice would be conditional on making assumptions about that. It is usually a bad a idea to have a function working on a hardcoded full filename. You will thank yourself later if you at least make it argument to your function(s). It can have for default value the one that is currently hardcoded. 

Please note that your use case does not seem inherently related to staged installation.
"Hardcoded" in the context of staged installation does not refer to any hardcoded path
but to those paths that contain the temporary installation directory. Such paths can be obtained, 
for example, with calls to system.path(), as illustrated by Tomas. 

Georgi Boshnakov



-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Florian Oswald
Sent: 28 June 2019 09:17
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] implications of staged install for data processing packages

Hi all

I ran into trouble with the changes starting to come in with R3.6 stemming
from the new staged installation, which checks and errors on hard coded
paths in R code. I understand there is an opt out, but still want to know.
here's the blog post:
https://developer.r-project.org/Blog/public/2019/02/14/staged-install/

I have several packages which look like that:

   1. large messy dataset stored on disk as `filename`, maybe a csv.
   2. R package has a function `clean(filename)` which reads the data and
   brings it into useable form
   3. R package does analysis
   4. R package exports results

`filename` is hard coded. What is the proper way to do this instead? Should
I store the inital raw data inside the R package in `/inst`? These things
are typically very large, so I like to decouple the raw data from the
package (easier to share).

thanks for any suggestions!

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||or|@n@o@w@|d @end|ng |rom gm@||@com  Fri Jun 28 17:16:41 2019
From: ||or|@n@o@w@|d @end|ng |rom gm@||@com (Florian Oswald)
Date: Fri, 28 Jun 2019 17:16:41 +0200
Subject: [R-pkg-devel] 
 implications of staged install for data processing packages
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F720553@MBXP02.ds.man.ac.uk>
References: <CAKezR-xf1ahaY4f5VCfJTg4OGqbDysJPeHcpX+QVyB5rPGMt9A@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F720553@MBXP02.ds.man.ac.uk>
Message-ID: <CAKezR-yiozuTTCZ6+H45Z6RmfKghAG=DGVULFJ4n+cnX_T-=7A@mail.gmail.com>

oh ok i see: so i will always be able to do

clean(path = "~/data.csv")

for example? in that case I completely misunderstood this and there must
indeed be some system.file call buried somewhere. will check. thanks!

Florian

On Fri, 28 Jun 2019 at 17:11, Georgi Boshnakov <
georgi.boshnakov at manchester.ac.uk> wrote:

> You need to give details what exactly gets you into trouble and about your
> use case, since any advice would be conditional on making assumptions about
> that. It is usually a bad a idea to have a function working on a hardcoded
> full filename. You will thank yourself later if you at least make it
> argument to your function(s). It can have for default value the one that is
> currently hardcoded.
>
> Please note that your use case does not seem inherently related to staged
> installation.
> "Hardcoded" in the context of staged installation does not refer to any
> hardcoded path
> but to those paths that contain the temporary installation directory. Such
> paths can be obtained,
> for example, with calls to system.path(), as illustrated by Tomas.
>
> Georgi Boshnakov
>
>
>
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
> Behalf Of Florian Oswald
> Sent: 28 June 2019 09:17
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] implications of staged install for data processing
> packages
>
> Hi all
>
> I ran into trouble with the changes starting to come in with R3.6 stemming
> from the new staged installation, which checks and errors on hard coded
> paths in R code. I understand there is an opt out, but still want to know.
> here's the blog post:
> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/
>
> I have several packages which look like that:
>
>    1. large messy dataset stored on disk as `filename`, maybe a csv.
>    2. R package has a function `clean(filename)` which reads the data and
>    brings it into useable form
>    3. R package does analysis
>    4. R package exports results
>
> `filename` is hard coded. What is the proper way to do this instead? Should
> I store the inital raw data inside the R package in `/inst`? These things
> are typically very large, so I like to decouple the raw data from the
> package (easier to share).
>
> thanks for any suggestions!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Jun 28 17:43:57 2019
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 28 Jun 2019 17:43:57 +0200
Subject: [R-pkg-devel] 
 implications of staged install for data processing packages
In-Reply-To: <CAKezR-yiozuTTCZ6+H45Z6RmfKghAG=DGVULFJ4n+cnX_T-=7A@mail.gmail.com>
References: <CAKezR-xf1ahaY4f5VCfJTg4OGqbDysJPeHcpX+QVyB5rPGMt9A@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F720553@MBXP02.ds.man.ac.uk>
 <CAKezR-yiozuTTCZ6+H45Z6RmfKghAG=DGVULFJ4n+cnX_T-=7A@mail.gmail.com>
Message-ID: <e5aceba1-eb98-2391-9dd6-0f296ce4390d@gmail.com>

On 6/28/19 5:16 PM, Florian Oswald wrote:
> oh ok i see: so i will always be able to do
>
> clean(path = "~/data.csv")
>
> for example? in that case I completely misunderstood this and there must
> indeed be some system.file call buried somewhere. will check. thanks!

In case it is hard to find manually, there is a script at 
https://github.com/kalibera/rstagedinst (described also in the blog post 
about staged install), which finds variables holding hard-coded paths to 
the temporary installation directory. Please give a reproducible example 
(e.g. the package, output from the script, output from the installation 
with the error, etc) if you needed more help.

Best
Tomas

>
> Florian
>
> On Fri, 28 Jun 2019 at 17:11, Georgi Boshnakov <
> georgi.boshnakov at manchester.ac.uk> wrote:
>
>> You need to give details what exactly gets you into trouble and about your
>> use case, since any advice would be conditional on making assumptions about
>> that. It is usually a bad a idea to have a function working on a hardcoded
>> full filename. You will thank yourself later if you at least make it
>> argument to your function(s). It can have for default value the one that is
>> currently hardcoded.
>>
>> Please note that your use case does not seem inherently related to staged
>> installation.
>> "Hardcoded" in the context of staged installation does not refer to any
>> hardcoded path
>> but to those paths that contain the temporary installation directory. Such
>> paths can be obtained,
>> for example, with calls to system.path(), as illustrated by Tomas.
>>
>> Georgi Boshnakov
>>
>>
>>
>> -----Original Message-----
>> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
>> Behalf Of Florian Oswald
>> Sent: 28 June 2019 09:17
>> To: r-package-devel at r-project.org
>> Subject: [R-pkg-devel] implications of staged install for data processing
>> packages
>>
>> Hi all
>>
>> I ran into trouble with the changes starting to come in with R3.6 stemming
>> from the new staged installation, which checks and errors on hard coded
>> paths in R code. I understand there is an opt out, but still want to know.
>> here's the blog post:
>> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/
>>
>> I have several packages which look like that:
>>
>>     1. large messy dataset stored on disk as `filename`, maybe a csv.
>>     2. R package has a function `clean(filename)` which reads the data and
>>     brings it into useable form
>>     3. R package does analysis
>>     4. R package exports results
>>
>> `filename` is hard coded. What is the proper way to do this instead? Should
>> I store the inital raw data inside the R package in `/inst`? These things
>> are typically very large, so I like to decouple the raw data from the
>> package (easier to share).
>>
>> thanks for any suggestions!
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||or|@n@o@w@|d @end|ng |rom gm@||@com  Fri Jun 28 17:54:29 2019
From: ||or|@n@o@w@|d @end|ng |rom gm@||@com (Florian Oswald)
Date: Fri, 28 Jun 2019 17:54:29 +0200
Subject: [R-pkg-devel] 
 implications of staged install for data processing packages
In-Reply-To: <e5aceba1-eb98-2391-9dd6-0f296ce4390d@gmail.com>
References: <CAKezR-xf1ahaY4f5VCfJTg4OGqbDysJPeHcpX+QVyB5rPGMt9A@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F720553@MBXP02.ds.man.ac.uk>
 <CAKezR-yiozuTTCZ6+H45Z6RmfKghAG=DGVULFJ4n+cnX_T-=7A@mail.gmail.com>
 <e5aceba1-eb98-2391-9dd6-0f296ce4390d@gmail.com>
Message-ID: <CAKezR-ySZ76uWT6VHXGGg-a1HOLdXXfuSOGy0_JMHm9W5GAmGw@mail.gmail.com>

brilliant! thanks a lot, and yes, will come back with more in case I'm
stuck.

F

On Fri, 28 Jun 2019 at 17:44, Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> On 6/28/19 5:16 PM, Florian Oswald wrote:
> > oh ok i see: so i will always be able to do
> >
> > clean(path = "~/data.csv")
> >
> > for example? in that case I completely misunderstood this and there must
> > indeed be some system.file call buried somewhere. will check. thanks!
>
> In case it is hard to find manually, there is a script at
> https://github.com/kalibera/rstagedinst (described also in the blog post
> about staged install), which finds variables holding hard-coded paths to
> the temporary installation directory. Please give a reproducible example
> (e.g. the package, output from the script, output from the installation
> with the error, etc) if you needed more help.
>
> Best
> Tomas
>
> >
> > Florian
> >
> > On Fri, 28 Jun 2019 at 17:11, Georgi Boshnakov <
> > georgi.boshnakov at manchester.ac.uk> wrote:
> >
> >> You need to give details what exactly gets you into trouble and about
> your
> >> use case, since any advice would be conditional on making assumptions
> about
> >> that. It is usually a bad a idea to have a function working on a
> hardcoded
> >> full filename. You will thank yourself later if you at least make it
> >> argument to your function(s). It can have for default value the one
> that is
> >> currently hardcoded.
> >>
> >> Please note that your use case does not seem inherently related to
> staged
> >> installation.
> >> "Hardcoded" in the context of staged installation does not refer to any
> >> hardcoded path
> >> but to those paths that contain the temporary installation directory.
> Such
> >> paths can be obtained,
> >> for example, with calls to system.path(), as illustrated by Tomas.
> >>
> >> Georgi Boshnakov
> >>
> >>
> >>
> >> -----Original Message-----
> >> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
> >> Behalf Of Florian Oswald
> >> Sent: 28 June 2019 09:17
> >> To: r-package-devel at r-project.org
> >> Subject: [R-pkg-devel] implications of staged install for data
> processing
> >> packages
> >>
> >> Hi all
> >>
> >> I ran into trouble with the changes starting to come in with R3.6
> stemming
> >> from the new staged installation, which checks and errors on hard coded
> >> paths in R code. I understand there is an opt out, but still want to
> know.
> >> here's the blog post:
> >> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/
> >>
> >> I have several packages which look like that:
> >>
> >>     1. large messy dataset stored on disk as `filename`, maybe a csv.
> >>     2. R package has a function `clean(filename)` which reads the data
> and
> >>     brings it into useable form
> >>     3. R package does analysis
> >>     4. R package exports results
> >>
> >> `filename` is hard coded. What is the proper way to do this instead?
> Should
> >> I store the inital raw data inside the R package in `/inst`? These
> things
> >> are typically very large, so I like to decouple the raw data from the
> >> package (easier to share).
> >>
> >> thanks for any suggestions!
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>

	[[alternative HTML version deleted]]


From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Sun Jun 30 01:14:30 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Sat, 29 Jun 2019 23:14:30 +0000
Subject: [R-pkg-devel] Warning Message on Vignettes
Message-ID: <d6847d5368f34587abe6c2f4f93b4b6f@sfu.ca>

Hi,

I am getting following two warnings when I submit my R package (perfectphyloR) to CRAN.

Warning 1: * checking files in 'vignettes' ... WARNING
             Files in the 'vignettes' directory but no files in 'inst/doc':
             'perfectphyloR.html', 'perfectphyloR.html.asis'

Warning 2: * checking package vignettes in 'inst/doc' ... WARNING
             dir.exists(dir) is not TRUE
             Package vignette without corresponding single PDF/HTML:
             'perfectphyloR.html.asis'

I want to make my vignette as a static html vignette (not the PDF). Therefore, I followed this documentation, https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf

After including my html vignette (perfectphyloR.html) into the directory 'vignette', I created a file called "perfectphyloR.html.asis" and that file includes following lines:

%\VignetteIndexEntry{R packages: perfectphyloR}
%\VignetteEngine{R.rsp::asis}
%\VignetteKeyword{HTML}
%\VignetteKeyword{vignette}
%\VignetteKeyword{package}

So, I am wondering something is wrong with my .asis file or I am doing any other mistake. Could you help me fix this issue?

Thank you in advance!

Regards,

Charith.




	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 30 13:19:54 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 30 Jun 2019 07:19:54 -0400
Subject: [R-pkg-devel] Warning Message on Vignettes
In-Reply-To: <d6847d5368f34587abe6c2f4f93b4b6f@sfu.ca>
References: <d6847d5368f34587abe6c2f4f93b4b6f@sfu.ca>
Message-ID: <cb626a21-7cd5-5bac-f282-93912c9d3f9d@gmail.com>

On 29/06/2019 7:14 p.m., Charith Karunarathna wrote:
> Hi,
> 
> I am getting following two warnings when I submit my R package (perfectphyloR) to CRAN.
> 
> Warning 1: * checking files in 'vignettes' ... WARNING
>               Files in the 'vignettes' directory but no files in 'inst/doc':
>               'perfectphyloR.html', 'perfectphyloR.html.asis'
> 
> Warning 2: * checking package vignettes in 'inst/doc' ... WARNING
>               dir.exists(dir) is not TRUE
>               Package vignette without corresponding single PDF/HTML:
>               'perfectphyloR.html.asis'
> 
> I want to make my vignette as a static html vignette (not the PDF). Therefore, I followed this documentation, https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf
> 
> After including my html vignette (perfectphyloR.html) into the directory 'vignette', I created a file called "perfectphyloR.html.asis" and that file includes following lines:
> 
> %\VignetteIndexEntry{R packages: perfectphyloR}
> %\VignetteEngine{R.rsp::asis}
> %\VignetteKeyword{HTML}
> %\VignetteKeyword{vignette}
> %\VignetteKeyword{package}
> 
> So, I am wondering something is wrong with my .asis file or I am doing any other mistake. Could you help me fix this issue?

Did you also make the necessary changes in the DESCRIPTION file to tell 
R that R.rsp is handling your vignettes?

Duncan Murdoch


