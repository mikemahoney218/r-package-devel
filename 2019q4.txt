From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Oct  1 00:03:00 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 30 Sep 2019 22:03:00 +0000
Subject: [R-pkg-devel] Require <package>-package.Rd?
In-Reply-To: <CABdHhvF1iugQgnd+k1Cau5q2DymJ7pWQ9MSVJ60vpfLveZB4kg@mail.gmail.com>
References: <581a012f01524e6b887582a574fc0a7b@UM-MAIL3214.unimaas.nl>
 <438D2EC9EAFE5946B2D5864670EA468E01CC77C076@MBXP01.ds.man.ac.uk>
 <CABdHhvF1iugQgnd+k1Cau5q2DymJ7pWQ9MSVJ60vpfLveZB4kg@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E01CC77C88A@MBXP01.ds.man.ac.uk>

Sorry, in the sequence of emails the context was probably lost, package ? package was a side note.
I was referring to (what I believe is a fact) that  <package>-package.Rd is not treated by pkgdown as an 
overall package description but package.Rd is and I think that the recommendation by devtools-related 
tools is to use package.Rd for this purpose.   There are probably subtleties with aliases,  as well.
In my experience pkgdown, doesn't treat specially package-package.Rd (i.e., it puts the topic in alphabetical order with the rest of the index), which has nudged  me to create yaml files (a good practice!) which I otherwise would not have done.

I was not criticising this, only pointing out the difference. I think it is unfortunate but it is not  a big issue and I also see
the point of avoiding a '-' in such a crucial name. On the other hand, some packages have a main function with the same name as the package, and it may or may not be appropriate package.Rd to serve as a doc for both the function and the overall description of such a package.

Georgi




-----Original Message-----
From: Hadley Wickham [mailto:h.wickham at gmail.com] 
Sent: 30 September 2019 21:17
To: Georgi Boshnakov
Cc: Viechtbauer, Wolfgang (SP); r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Require <package>-package.Rd?

On Tue, Sep 24, 2019 at 8:07 AM Georgi Boshnakov
<georgi.boshnakov at manchester.ac.uk> wrote:
>
> It is worth noting that
>
> help(package="<package>")
>
> shows  file <package>-package.Rd, while
>
> help(<package>)
>
> shows topic "package".
>
> Topic <package>-package.Rd is also printed at the top of the pdf manual, while package.Rd follows the alphabetical ordering of the remaining topics. It is unfortunate that Hadley Wickham's tools (at least 'pkgdown') recommend and use <package>.Rd, instead of <package>-package.Rd as overall package description.

I'm not sure what lead you to that believe, but we definitely support
(and have supported for years) package?<package>.  See, e.g.
https://usethis.r-lib.org/reference/use_package_doc.html

Hadley

-- 
http://hadley.nz

From @gutreuter @end|ng |rom gm@||@com  Tue Oct  1 15:26:07 2019
From: @gutreuter @end|ng |rom gm@||@com (Steve Gutreuter)
Date: Tue, 1 Oct 2019 09:26:07 -0400
Subject: [R-pkg-devel] 
 Building fails with 'mypackage/DESCRIPTION' does not exist
In-Reply-To: <CAF8bMcYstPfGTHXPi79H5YkER=QLwnS29GTmfRMwrMmum+9P2Q@mail.gmail.com>
References: <CAP2ZeLtnuQsxzybnxZ5SgAB4M2UpmiPPuxj9X9wBgtRJWNGnkg@mail.gmail.com>
 <CAF8bMcYstPfGTHXPi79H5YkER=QLwnS29GTmfRMwrMmum+9P2Q@mail.gmail.com>
Message-ID: <03cafaa5-04c0-1a71-16e2-37ae58b8335b@gmail.com>

First, thank you Bill Dunlap, Peter Dalgaard and Max Turgeon,

I edited (incompletely) the initial posting and failed to change screenr 
to mypackage.? However that was not the source of the problem.
Windows sysadmins cannot be convinced that paths containing white space 
are pure evil, but that is also not the problem because building also 
fails on a Linux Mint box that uses only sane file/directory names.
Default installation from GitHub (sgutreuter/screenr) succeeds because 
the version in Master is OK.? The version in branch fixROC fails.

I think that the root of the problem is that the Rd files are not being 
created in /man.? Roxygen2::roxygenize() is failing *silently* (another 
source of frustration).? So I suspect the problem lies somewhere in the 
comments for one or more of the functions.? I am trying to identify 
where from a diff, as Bill suggested.

Best regards,
Steve


On 9/30/19 5:30 PM, William Dunlap wrote:
> Will the package build if you back out the "minor changes"?? If so, 
> what were the minor changes (show diff output)?
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com <http://tibco.com>
>
>
> On Mon, Sep 30, 2019 at 12:24 PM Steve Gutreuter <sgutreuter at gmail.com 
> <mailto:sgutreuter at gmail.com>> wrote:
>
>     I have a package which will no longer build after minor changes.? The
>     problem occurs under both Windows 10 and Linux Mint.? For example,
>     from a
>     Windows terminal I do:
>
>     C:\Users\xyz\OneDrive - ORG\Computing\Devel> R CMD build screenr
>
>     and I get:
>
>     * checking for file 'mypackage/DESCRIPTION' ... OK
>     * preparing 'mypackage':
>     * checking DESCRIPTION meta-information ... OK
>     * installing the package to process help pages
>     * saving partial Rd database
>     ?Error in .read_description(ldpath) :
>     ? ?file 'mypackage/DESCRIPTION' does not exist
>     ?Execution halted
>
>     So the first and third lines of output contradict the error
>     message, and of
>     course mypackage/DESCRIPTION does exist.? I suspect the problem
>     has nothing
>     to do with the DESCRIPTION file, but have not found way to
>     identify the
>     actual problem in searches on StackOverflow and elsewhere. My .R
>     files in
>     mypackage/R contain Roxygen comments, and curiously
>     devtools::document()
>     adds nothing to mypackage/man.
>
>     Any suggestions about how to debug or solve this problem?
>
>     Thanks!
>     Steve
>
>     ? ? ? ? [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Steve Gutreuter


	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Oct  1 15:36:55 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 1 Oct 2019 14:36:55 +0100
Subject: [R-pkg-devel] 
 Building fails with 'mypackage/DESCRIPTION' does not exist
In-Reply-To: <03cafaa5-04c0-1a71-16e2-37ae58b8335b@gmail.com>
References: <CAP2ZeLtnuQsxzybnxZ5SgAB4M2UpmiPPuxj9X9wBgtRJWNGnkg@mail.gmail.com>
 <CAF8bMcYstPfGTHXPi79H5YkER=QLwnS29GTmfRMwrMmum+9P2Q@mail.gmail.com>
 <03cafaa5-04c0-1a71-16e2-37ae58b8335b@gmail.com>
Message-ID: <CABtg=K=h589gWvcrMV_Dshkb+ANw4UH16A7YT_Z3z07cavR5QA@mail.gmail.com>

Your ignore file changes make R (and roxygen) ignore all source files:
https://github.com/sgutreuter/screenr/commit/3eaa9280221aa9885b6c35a758a46fbb2fdb1e46#diff-bc92b187c74649b3e0a039784ff93b39

Undo the `#*` line.

Gabor

On Tue, Oct 1, 2019 at 2:26 PM Steve Gutreuter <sgutreuter at gmail.com> wrote:
>
> First, thank you Bill Dunlap, Peter Dalgaard and Max Turgeon,
>
> I edited (incompletely) the initial posting and failed to change screenr
> to mypackage.  However that was not the source of the problem.
> Windows sysadmins cannot be convinced that paths containing white space
> are pure evil, but that is also not the problem because building also
> fails on a Linux Mint box that uses only sane file/directory names.
> Default installation from GitHub (sgutreuter/screenr) succeeds because
> the version in Master is OK.  The version in branch fixROC fails.
>
> I think that the root of the problem is that the Rd files are not being
> created in /man.  Roxygen2::roxygenize() is failing *silently* (another
> source of frustration).  So I suspect the problem lies somewhere in the
> comments for one or more of the functions.  I am trying to identify
> where from a diff, as Bill suggested.
>
> Best regards,
> Steve
>
>
> On 9/30/19 5:30 PM, William Dunlap wrote:
> > Will the package build if you back out the "minor changes"?  If so,
> > what were the minor changes (show diff output)?
> >
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com <http://tibco.com>
> >
> >
> > On Mon, Sep 30, 2019 at 12:24 PM Steve Gutreuter <sgutreuter at gmail.com
> > <mailto:sgutreuter at gmail.com>> wrote:
> >
> >     I have a package which will no longer build after minor changes.  The
> >     problem occurs under both Windows 10 and Linux Mint.  For example,
> >     from a
> >     Windows terminal I do:
> >
> >     C:\Users\xyz\OneDrive - ORG\Computing\Devel> R CMD build screenr
> >
> >     and I get:
> >
> >     * checking for file 'mypackage/DESCRIPTION' ... OK
> >     * preparing 'mypackage':
> >     * checking DESCRIPTION meta-information ... OK
> >     * installing the package to process help pages
> >     * saving partial Rd database
> >      Error in .read_description(ldpath) :
> >        file 'mypackage/DESCRIPTION' does not exist
> >      Execution halted
> >
> >     So the first and third lines of output contradict the error
> >     message, and of
> >     course mypackage/DESCRIPTION does exist.  I suspect the problem
> >     has nothing
> >     to do with the DESCRIPTION file, but have not found way to
> >     identify the
> >     actual problem in searches on StackOverflow and elsewhere. My .R
> >     files in
> >     mypackage/R contain Roxygen comments, and curiously
> >     devtools::document()
> >     adds nothing to mypackage/man.
> >
> >     Any suggestions about how to debug or solve this problem?
> >
> >     Thanks!
> >     Steve
> >
> >             [[alternative HTML version deleted]]
> >
> >     ______________________________________________
> >     R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> --
> Steve Gutreuter
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @gutreuter @end|ng |rom gm@||@com  Tue Oct  1 15:53:42 2019
From: @gutreuter @end|ng |rom gm@||@com (Steve Gutreuter)
Date: Tue, 1 Oct 2019 09:53:42 -0400
Subject: [R-pkg-devel] 
 Building fails with 'mypackage/DESCRIPTION' does not exist
In-Reply-To: <CABtg=K=h589gWvcrMV_Dshkb+ANw4UH16A7YT_Z3z07cavR5QA@mail.gmail.com>
References: <CAP2ZeLtnuQsxzybnxZ5SgAB4M2UpmiPPuxj9X9wBgtRJWNGnkg@mail.gmail.com>
 <CAF8bMcYstPfGTHXPi79H5YkER=QLwnS29GTmfRMwrMmum+9P2Q@mail.gmail.com>
 <03cafaa5-04c0-1a71-16e2-37ae58b8335b@gmail.com>
 <CABtg=K=h589gWvcrMV_Dshkb+ANw4UH16A7YT_Z3z07cavR5QA@mail.gmail.com>
Message-ID: <18100008-3e0a-14ea-437a-969ff1d8aecd@gmail.com>

Thank you G?bor!? That was the problem, and I learned from it.


On 10/1/19 9:36 AM, G?bor Cs?rdi wrote:
> Your ignore file changes make R (and roxygen) ignore all source files:
> https://github.com/sgutreuter/screenr/commit/3eaa9280221aa9885b6c35a758a46fbb2fdb1e46#diff-bc92b187c74649b3e0a039784ff93b39
>
> Undo the `#*` line.
>
> Gabor
>
> On Tue, Oct 1, 2019 at 2:26 PM Steve Gutreuter <sgutreuter at gmail.com> wrote:
>> First, thank you Bill Dunlap, Peter Dalgaard and Max Turgeon,
>>
>> I edited (incompletely) the initial posting and failed to change screenr
>> to mypackage.  However that was not the source of the problem.
>> Windows sysadmins cannot be convinced that paths containing white space
>> are pure evil, but that is also not the problem because building also
>> fails on a Linux Mint box that uses only sane file/directory names.
>> Default installation from GitHub (sgutreuter/screenr) succeeds because
>> the version in Master is OK.  The version in branch fixROC fails.
>>
>> I think that the root of the problem is that the Rd files are not being
>> created in /man.  Roxygen2::roxygenize() is failing *silently* (another
>> source of frustration).  So I suspect the problem lies somewhere in the
>> comments for one or more of the functions.  I am trying to identify
>> where from a diff, as Bill suggested.
>>
>> Best regards,
>> Steve
>>
>>
>> On 9/30/19 5:30 PM, William Dunlap wrote:
>>> Will the package build if you back out the "minor changes"?  If so,
>>> what were the minor changes (show diff output)?
>>>
>>> Bill Dunlap
>>> TIBCO Software
>>> wdunlap tibco.com <http://tibco.com>
>>>
>>>
>>> On Mon, Sep 30, 2019 at 12:24 PM Steve Gutreuter <sgutreuter at gmail.com
>>> <mailto:sgutreuter at gmail.com>> wrote:
>>>
>>>      I have a package which will no longer build after minor changes.  The
>>>      problem occurs under both Windows 10 and Linux Mint.  For example,
>>>      from a
>>>      Windows terminal I do:
>>>
>>>      C:\Users\xyz\OneDrive - ORG\Computing\Devel> R CMD build screenr
>>>
>>>      and I get:
>>>
>>>      * checking for file 'mypackage/DESCRIPTION' ... OK
>>>      * preparing 'mypackage':
>>>      * checking DESCRIPTION meta-information ... OK
>>>      * installing the package to process help pages
>>>      * saving partial Rd database
>>>       Error in .read_description(ldpath) :
>>>         file 'mypackage/DESCRIPTION' does not exist
>>>       Execution halted
>>>
>>>      So the first and third lines of output contradict the error
>>>      message, and of
>>>      course mypackage/DESCRIPTION does exist.  I suspect the problem
>>>      has nothing
>>>      to do with the DESCRIPTION file, but have not found way to
>>>      identify the
>>>      actual problem in searches on StackOverflow and elsewhere. My .R
>>>      files in
>>>      mypackage/R contain Roxygen comments, and curiously
>>>      devtools::document()
>>>      adds nothing to mypackage/man.
>>>
>>>      Any suggestions about how to debug or solve this problem?
>>>
>>>      Thanks!
>>>      Steve
>>>
>>>              [[alternative HTML version deleted]]
>>>
>>>      ______________________________________________
>>>      R-package-devel at r-project.org
>>>      <mailto:R-package-devel at r-project.org> mailing list
>>>      https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>> --
>> Steve Gutreuter
>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Steve Gutreuter


	[[alternative HTML version deleted]]


From j@me@@|@he@ter @end|ng |rom gm@||@com  Tue Oct  1 19:37:09 2019
From: j@me@@|@he@ter @end|ng |rom gm@||@com (Jim Hester)
Date: Tue, 1 Oct 2019 13:37:09 -0400
Subject: [R-pkg-devel] CRAN policies with regards to runnable examples
Message-ID: <CAD6tx94ckRYeLY5Uv7wz7-O7O5Zy5oRmBeJ-bAt3h3Y4S-Z6-Q@mail.gmail.com>

CRAN reviewers have somewhat recently been requesting that new
submissions have runnable examples. This is in general a good
recommendation, but the reviewers seem to apply this policy
unconditionally, and there are certain classes of packages where this
is either extremely cumbersome or impossible to do.

Two in particular are packages which wrap web APIs and packages
containing shiny applications. Even the most robust APIs will
inevitably have network failures, causing spurious failures on CRAN's
machines, and often the APIs require credentials to access, which
won't be available on the build machines. Shiny applications block the
R process and require user interaction in a browser to function, they
cannot really be run non-interactively.

In these cases it seems appropriate to put examples in a `\dontrun{}`
or `\donttest{}` block, and this is what is suggested by writing R
extensions. However CRAN reviewers have refused to accept packages
taking this approach.

If these workarounds are not acceptable what _does_ CRAN want package
authors to do in these cases?

Jim


From mthrun @end|ng |rom M@them@t|k@Un|-M@rburg@de  Tue Oct  1 19:48:19 2019
From: mthrun @end|ng |rom M@them@t|k@Un|-M@rburg@de (Dr. rer. nat. Michael Thrun)
Date: Tue, 1 Oct 2019 19:48:19 +0200
Subject: [R-pkg-devel] CRAN policies with regards to runnable examples
In-Reply-To: <CAD6tx94ckRYeLY5Uv7wz7-O7O5Zy5oRmBeJ-bAt3h3Y4S-Z6-Q@mail.gmail.com>
References: <CAD6tx94ckRYeLY5Uv7wz7-O7O5Zy5oRmBeJ-bAt3h3Y4S-Z6-Q@mail.gmail.com>
Message-ID: <BDC8AB46-D432-4D3F-8532-7C0149FD6FF3@mathematik.uni-marburg.de>

Hello Jim,
thank you for asking this question. I would also like to have a standard solution for this problem.

Best Regards
Michael


Michael Thrun
Postdoctoral Scholar
Databionics AG,
Mathematics and Computer Science

Philipps-Universit?t Marburg
Hans-Meerwein-Stra?e 6, 04A28
D-35032 Marburg

Phone +49 6421/ 28 23922
www.uni-marburg.de/fb12/datenbionik/

> On 1. Oct 2019, at 19:37, Jim Hester <james.f.hester at gmail.com> wrote:
> 
> CRAN reviewers have somewhat recently been requesting that new
> submissions have runnable examples. This is in general a good
> recommendation, but the reviewers seem to apply this policy
> unconditionally, and there are certain classes of packages where this
> is either extremely cumbersome or impossible to do.
> 
> Two in particular are packages which wrap web APIs and packages
> containing shiny applications. Even the most robust APIs will
> inevitably have network failures, causing spurious failures on CRAN's
> machines, and often the APIs require credentials to access, which
> won't be available on the build machines. Shiny applications block the
> R process and require user interaction in a browser to function, they
> cannot really be run non-interactively.
> 
> In these cases it seems appropriate to put examples in a `\dontrun{}`
> or `\donttest{}` block, and this is what is suggested by writing R
> extensions. However CRAN reviewers have refused to accept packages
> taking this approach.
> 
> If these workarounds are not acceptable what _does_ CRAN want package
> authors to do in these cases?
> 
> Jim
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From hongoo| @end|ng |rom m|cro@o|t@com  Wed Oct  2 05:30:56 2019
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Wed, 2 Oct 2019 03:30:56 +0000
Subject: [R-pkg-devel] CRAN policies with regards to runnable examples
In-Reply-To: <CAD6tx94ckRYeLY5Uv7wz7-O7O5Zy5oRmBeJ-bAt3h3Y4S-Z6-Q@mail.gmail.com>
References: <CAD6tx94ckRYeLY5Uv7wz7-O7O5Zy5oRmBeJ-bAt3h3Y4S-Z6-Q@mail.gmail.com>
Message-ID: <KL1P15301MB00557D627CC0250DA4807311A69C0@KL1P15301MB0055.APCP153.PROD.OUTLOOK.COM>

Hm, up to now my AzureR packages haven't met with any issues, and they are basically API wrappers.

I did have one reviewer ask for runnable examples when I submitted one package, but replying and pointing out the issues you mention cleared things up. I did cc Uwe Ligges in the reply, who approved the other packages in the first place -- the other reviewer probably just wasn't aware that I'd cleared things with Uwe previously.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Jim Hester
Sent: Wednesday, 2 October 2019 3:37 AM
To: R Package Development <r-package-devel at r-project.org>
Subject: [R-pkg-devel] CRAN policies with regards to runnable examples

CRAN reviewers have somewhat recently been requesting that new submissions have runnable examples. This is in general a good recommendation, but the reviewers seem to apply this policy unconditionally, and there are certain classes of packages where this is either extremely cumbersome or impossible to do.

Two in particular are packages which wrap web APIs and packages containing shiny applications. Even the most robust APIs will inevitably have network failures, causing spurious failures on CRAN's machines, and often the APIs require credentials to access, which won't be available on the build machines. Shiny applications block the R process and require user interaction in a browser to function, they cannot really be run non-interactively.

In these cases it seems appropriate to put examples in a `\dontrun{}` or `\donttest{}` block, and this is what is suggested by writing R extensions. However CRAN reviewers have refused to accept packages taking this approach.

If these workarounds are not acceptable what _does_ CRAN want package authors to do in these cases?

Jim

______________________________________________
R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C1ac67369474848bf7cdc08d746960dd9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C637055482613833043&amp;sdata=quC7BH5vtm3I7dWq%2Fhi6FtN54DxrUzO0Z1K9TRc%2FE3c%3D&amp;reserved=0


From m@rk@v@nder|oo @end|ng |rom gm@||@com  Wed Oct  2 08:35:27 2019
From: m@rk@v@nder|oo @end|ng |rom gm@||@com (Mark van der Loo)
Date: Wed, 2 Oct 2019 08:35:27 +0200
Subject: [R-pkg-devel] CRAN policies with regards to runnable examples
In-Reply-To: <KL1P15301MB00557D627CC0250DA4807311A69C0@KL1P15301MB0055.APCP153.PROD.OUTLOOK.COM>
References: <CAD6tx94ckRYeLY5Uv7wz7-O7O5Zy5oRmBeJ-bAt3h3Y4S-Z6-Q@mail.gmail.com>
 <KL1P15301MB00557D627CC0250DA4807311A69C0@KL1P15301MB0055.APCP153.PROD.OUTLOOK.COM>
Message-ID: <CAOKDuOieAN56xUqWqCCMDUANdWPAHbKZT9f5K_bwY2i0AFangg@mail.gmail.com>

My experience is somewhat similar to that of Hong Ooi.

An initial submission got refused. During resubmission I explained the
necessity of \dontrun{} in certain cases and it was accepted. So the basic
policy here is 'comply or explain'.

>From now on, when I need to place a \dontrun{} anywhere, I will at initial
submission already use the 'Optional Comment' box to document why each
\dontrun{} is necessary. Based on my earlier experiences, this seems
reasonable and also the fastest way to publication.

Best,
Mark







On Wed, Oct 2, 2019 at 5:31 AM Hong Ooi via R-package-devel <
r-package-devel at r-project.org> wrote:

> Hm, up to now my AzureR packages haven't met with any issues, and they are
> basically API wrappers.
>
> I did have one reviewer ask for runnable examples when I submitted one
> package, but replying and pointing out the issues you mention cleared
> things up. I did cc Uwe Ligges in the reply, who approved the other
> packages in the first place -- the other reviewer probably just wasn't
> aware that I'd cleared things with Uwe previously.
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf
> Of Jim Hester
> Sent: Wednesday, 2 October 2019 3:37 AM
> To: R Package Development <r-package-devel at r-project.org>
> Subject: [R-pkg-devel] CRAN policies with regards to runnable examples
>
> CRAN reviewers have somewhat recently been requesting that new submissions
> have runnable examples. This is in general a good recommendation, but the
> reviewers seem to apply this policy unconditionally, and there are certain
> classes of packages where this is either extremely cumbersome or impossible
> to do.
>
> Two in particular are packages which wrap web APIs and packages containing
> shiny applications. Even the most robust APIs will inevitably have network
> failures, causing spurious failures on CRAN's machines, and often the APIs
> require credentials to access, which won't be available on the build
> machines. Shiny applications block the R process and require user
> interaction in a browser to function, they cannot really be run
> non-interactively.
>
> In these cases it seems appropriate to put examples in a `\dontrun{}` or
> `\donttest{}` block, and this is what is suggested by writing R extensions.
> However CRAN reviewers have refused to accept packages taking this approach.
>
> If these workarounds are not acceptable what _does_ CRAN want package
> authors to do in these cases?
>
> Jim
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
>
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C1ac67369474848bf7cdc08d746960dd9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C637055482613833043&amp;sdata=quC7BH5vtm3I7dWq%2Fhi6FtN54DxrUzO0Z1K9TRc%2FE3c%3D&amp;reserved=0
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |jh988488 @end|ng |rom gm@||@com  Wed Oct  2 14:34:22 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Wed, 2 Oct 2019 21:34:22 +0900
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
Message-ID: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>

Dear all.

I checked my package on win-builder, and got this message:

* checking sizes of PDF files under 'inst/doc' ... WARNING
  'gs+qpdf' made some significant size reductions:
     compacted 'vignette.pdf' from 541Kb to 234Kb
  consider running tools::compactPDF(gs_quality = "ebook") on these files


But, I run R CMD build --compact-vignettes="gs+qpdf", and

I installed gs and qpdf on my system.

How can I solve this problem?


Best regards


Juhee Lee.

---------------------------------------

> Sys.which(Sys.getenv("R_GSCMD"))
C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
   "C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
> Sys.which(Sys.getenv("R_QPDF"))
C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
   "C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
> sessionInfo()
R version 3.6.1 (2019-07-05)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18362)

Matrix products: default

locale:
[1] LC_COLLATE=Korean_Korea.949  LC_CTYPE=Korean_Korea.949
LC_MONETARY=Korean_Korea.949
[4] LC_NUMERIC=C                 LC_TIME=Korean_Korea.949

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] LARisk_0.1.1

loaded via a namespace (and not attached):
[1] compiler_3.6.1 tools_3.6.1    Rcpp_1.0.2

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct  2 15:09:27 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 2 Oct 2019 09:09:27 -0400
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
Message-ID: <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>

On 02/10/2019 8:34 a.m., Juhee Lee wrote:
> Dear all.
> 
> I checked my package on win-builder, and got this message:
> 
> * checking sizes of PDF files under 'inst/doc' ... WARNING
>    'gs+qpdf' made some significant size reductions:
>       compacted 'vignette.pdf' from 541Kb to 234Kb
>    consider running tools::compactPDF(gs_quality = "ebook") on these files
> 
> 
> But, I run R CMD build --compact-vignettes="gs+qpdf", and
> 
> I installed gs and qpdf on my system.
> 
> How can I solve this problem?

Is vignette.pdf in inst/doc before calling R CMD build?  Is it rebuilt 
by R CMD build?

Duncan Murdoch

> 
> 
> Best regards
> 
> 
> Juhee Lee.
> 
> ---------------------------------------
> 
>> Sys.which(Sys.getenv("R_GSCMD"))
> C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
>     "C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
>> Sys.which(Sys.getenv("R_QPDF"))
> C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
>     "C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
>> sessionInfo()
> R version 3.6.1 (2019-07-05)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 18362)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=Korean_Korea.949  LC_CTYPE=Korean_Korea.949
> LC_MONETARY=Korean_Korea.949
> [4] LC_NUMERIC=C                 LC_TIME=Korean_Korea.949
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] LARisk_0.1.1
> 
> loaded via a namespace (and not attached):
> [1] compiler_3.6.1 tools_3.6.1    Rcpp_1.0.2
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Oct  2 16:40:19 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 2 Oct 2019 16:40:19 +0200
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
 <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
Message-ID: <eb0e2d2d-637f-c9bd-a0e1-f74efb3fbaee@statistik.tu-dortmund.de>



On 02.10.2019 15:09, Duncan Murdoch wrote:
> On 02/10/2019 8:34 a.m., Juhee Lee wrote:
>> Dear all.
>>
>> I checked my package on win-builder, and got this message:
>>
>> * checking sizes of PDF files under 'inst/doc' ... WARNING
>> ?? 'gs+qpdf' made some significant size reductions:
>> ????? compacted 'vignette.pdf' from 541Kb to 234Kb
>> ?? consider running tools::compactPDF(gs_quality = "ebook") on these 
>> files
>>
>>
>> But, I run R CMD build --compact-vignettes="gs+qpdf", and
>>
>> I installed gs and qpdf on my system.
>>
>> How can I solve this problem?
> 
> Is vignette.pdf in inst/doc before calling R CMD build?? Is it rebuilt 
> by R CMD build?

... and are ghostscript and qpdf on your PATH so that R picks it up?

Best,
Uwe Ligges

> 
> Duncan Murdoch
> 
>>
>>
>> Best regards
>>
>>
>> Juhee Lee.
>>
>> ---------------------------------------
>>
>>> Sys.which(Sys.getenv("R_GSCMD"))
>> C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
>> ??? "C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
>>> Sys.which(Sys.getenv("R_QPDF"))
>> C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
>> ??? "C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
>>> sessionInfo()
>> R version 3.6.1 (2019-07-05)
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>> Running under: Windows 10 x64 (build 18362)
>>
>> Matrix products: default
>>
>> locale:
>> [1] LC_COLLATE=Korean_Korea.949? LC_CTYPE=Korean_Korea.949
>> LC_MONETARY=Korean_Korea.949
>> [4] LC_NUMERIC=C???????????????? LC_TIME=Korean_Korea.949
>>
>> attached base packages:
>> [1] stats???? graphics? grDevices utils???? datasets? methods?? base
>>
>> other attached packages:
>> [1] LARisk_0.1.1
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_3.6.1 tools_3.6.1??? Rcpp_1.0.2
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dr|ver @end|ng |rom mp|b-ber||n@mpg@de  Thu Oct  3 12:10:57 2019
From: dr|ver @end|ng |rom mp|b-ber||n@mpg@de (Driver, Charles)
Date: Thu, 3 Oct 2019 10:10:57 +0000
Subject: [R-pkg-devel] Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
Message-ID: <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>

I have a function that outputs / compiles some latex. To do this I use Sys.which('pdflatex') and if nothing is found, prompt the user whether to install tinytex package. So, normally I understand the use of 'Suggests' in the package description to be for when there are only certain functions / tests that require the package. In this case, the package requirement is also conditional on other software (ie a tex distribution) not being found, otherwise it is unnecessary. There are no tests or examples that depend on the package. Should tinytex be in the 'Suggests' list?


Cheers,

Charles

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Thu Oct  3 14:27:41 2019
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 3 Oct 2019 13:27:41 +0100
Subject: [R-pkg-devel] 
 Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
 <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
Message-ID: <2d2d7dbd-cbd5-37e4-b830-c496fb30f19e@dewey.myzen.co.uk>

Dear Charles

If your package prints a message to the user suggesting how to get a 
Latex installation then I do not think you need to do anything else. 
After all they could install Latex some other way if they pleased or try 
to work out why the installation they thought they had is not working.

Michael

On 03/10/2019 11:10, Driver, Charles wrote:
> I have a function that outputs / compiles some latex. To do this I use Sys.which('pdflatex') and if nothing is found, prompt the user whether to install tinytex package. So, normally I understand the use of 'Suggests' in the package description to be for when there are only certain functions / tests that require the package. In this case, the package requirement is also conditional on other software (ie a tex distribution) not being found, otherwise it is unnecessary. There are no tests or examples that depend on the package. Should tinytex be in the 'Suggests' list?
> 
> 
> Cheers,
> 
> Charles
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ---
> This email has been checked for viruses by AVG.
> https://www.avg.com
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From |jh988488 @end|ng |rom gm@||@com  Thu Oct  3 15:00:07 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Thu, 3 Oct 2019 22:00:07 +0900
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
 <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
Message-ID: <CACSCokeari0GJW0ys0ZV0NzBrcc-tZ9iKofZzzGSp9roHRPO+Q@mail.gmail.com>

Maybe "vignette.pdf" is rebuilt by R CMD build.

Juhee Lee

2019? 10? 2? (?) ?? 10:09, Duncan Murdoch <murdoch.duncan at gmail.com>?? ??:

> On 02/10/2019 8:34 a.m., Juhee Lee wrote:
> > Dear all.
> >
> > I checked my package on win-builder, and got this message:
> >
> > * checking sizes of PDF files under 'inst/doc' ... WARNING
> >    'gs+qpdf' made some significant size reductions:
> >       compacted 'vignette.pdf' from 541Kb to 234Kb
> >    consider running tools::compactPDF(gs_quality = "ebook") on these
> files
> >
> >
> > But, I run R CMD build --compact-vignettes="gs+qpdf", and
> >
> > I installed gs and qpdf on my system.
> >
> > How can I solve this problem?
>
> Is vignette.pdf in inst/doc before calling R CMD build?  Is it rebuilt
> by R CMD build?
>
> Duncan Murdoch
>
> >
> >
> > Best regards
> >
> >
> > Juhee Lee.
> >
> > ---------------------------------------
> >
> >> Sys.which(Sys.getenv("R_GSCMD"))
> > C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
> >     "C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
> >> Sys.which(Sys.getenv("R_QPDF"))
> > C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
> >     "C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
> >> sessionInfo()
> > R version 3.6.1 (2019-07-05)
> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> > Running under: Windows 10 x64 (build 18362)
> >
> > Matrix products: default
> >
> > locale:
> > [1] LC_COLLATE=Korean_Korea.949  LC_CTYPE=Korean_Korea.949
> > LC_MONETARY=Korean_Korea.949
> > [4] LC_NUMERIC=C                 LC_TIME=Korean_Korea.949
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > other attached packages:
> > [1] LARisk_0.1.1
> >
> > loaded via a namespace (and not attached):
> > [1] compiler_3.6.1 tools_3.6.1    Rcpp_1.0.2
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From |jh988488 @end|ng |rom gm@||@com  Thu Oct  3 15:09:15 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Thu, 3 Oct 2019 22:09:15 +0900
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <eb0e2d2d-637f-c9bd-a0e1-f74efb3fbaee@statistik.tu-dortmund.de>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
 <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
 <eb0e2d2d-637f-c9bd-a0e1-f74efb3fbaee@statistik.tu-dortmund.de>
Message-ID: <CACSCokckDx3J-1k11MdEVWBFkEFvx5DkVsSgRW8z1-Gp3ESwbQ@mail.gmail.com>

If what you say is the PATH of a system variable, there are in it.

And in R console, I can get this result:
   > Sys.getenv("R_GSCMD")
  [1] "C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe"
  > Sys.getenv("R_QPDF")
  [1] "C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe"


Juhee Lee

2019? 10? 2? (?) ?? 11:40, Uwe Ligges <ligges at statistik.tu-dortmund.de>??
??:

>
>
> On 02.10.2019 15:09, Duncan Murdoch wrote:
> > On 02/10/2019 8:34 a.m., Juhee Lee wrote:
> >> Dear all.
> >>
> >> I checked my package on win-builder, and got this message:
> >>
> >> * checking sizes of PDF files under 'inst/doc' ... WARNING
> >>    'gs+qpdf' made some significant size reductions:
> >>       compacted 'vignette.pdf' from 541Kb to 234Kb
> >>    consider running tools::compactPDF(gs_quality = "ebook") on these
> >> files
> >>
> >>
> >> But, I run R CMD build --compact-vignettes="gs+qpdf", and
> >>
> >> I installed gs and qpdf on my system.
> >>
> >> How can I solve this problem?
> >
> > Is vignette.pdf in inst/doc before calling R CMD build?  Is it rebuilt
> > by R CMD build?
>
> ... and are ghostscript and qpdf on your PATH so that R picks it up?
>
> Best,
> Uwe Ligges
>
> >
> > Duncan Murdoch
> >
> >>
> >>
> >> Best regards
> >>
> >>
> >> Juhee Lee.
> >>
> >> ---------------------------------------
> >>
> >>> Sys.which(Sys.getenv("R_GSCMD"))
> >> C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
> >>     "C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
> >>> Sys.which(Sys.getenv("R_QPDF"))
> >> C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
> >>     "C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
> >>> sessionInfo()
> >> R version 3.6.1 (2019-07-05)
> >> Platform: x86_64-w64-mingw32/x64 (64-bit)
> >> Running under: Windows 10 x64 (build 18362)
> >>
> >> Matrix products: default
> >>
> >> locale:
> >> [1] LC_COLLATE=Korean_Korea.949  LC_CTYPE=Korean_Korea.949
> >> LC_MONETARY=Korean_Korea.949
> >> [4] LC_NUMERIC=C                 LC_TIME=Korean_Korea.949
> >>
> >> attached base packages:
> >> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>
> >> other attached packages:
> >> [1] LARisk_0.1.1
> >>
> >> loaded via a namespace (and not attached):
> >> [1] compiler_3.6.1 tools_3.6.1    Rcpp_1.0.2
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Oct  3 15:11:31 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 3 Oct 2019 08:11:31 -0500
Subject: [R-pkg-devel] 
 Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
 <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
Message-ID: <23957.62339.668405.255194@rob.eddelbuettel.com>


Charles,

On 3 October 2019 at 10:10, Driver, Charles wrote:
| I have a function that outputs / compiles some latex. To do this I use Sys.which('pdflatex') and if nothing is found, prompt the user whether to install tinytex package. So, normally I understand the use of 'Suggests' in the package description to be for when there are only certain functions / tests that require the package. In this case, the package requirement is also conditional on other software (ie a tex distribution) not being found, otherwise it is unnecessary. There are no tests or examples that depend on the package. Should tinytex be in the 'Suggests' list?

A few suggestions:

 - IIRC CRAN Policy asks you to not have interactive prompts, and clearly
   prohibits messing with the system.  So no to the prompt to install.

 - CRAN and R have a perfectly working dependency system [1] so just use
   'Suggests: tinytex' and _then please condition your code on whether it is
   present_. [2]

 - Maybe add line breaks to your post?  ;-)

Dirk

[1] I continue to argue, as recently as yesterday in private mail with a
junior dev, that people misuse / misunderstand Depends and Suggests.
[2] Because if you don't your Suggests: really is a Depends:.

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From j|ox @end|ng |rom mcm@@ter@c@  Thu Oct  3 15:56:40 2019
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Thu, 3 Oct 2019 13:56:40 +0000
Subject: [R-pkg-devel] 
 Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <13559_1570108726_x93DH7Ub011687_23957.62339.668405.255194@rob.eddelbuettel.com>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
 <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
 <13559_1570108726_x93DH7Ub011687_23957.62339.668405.255194@rob.eddelbuettel.com>
Message-ID: <C9593D7B-0C33-4B86-82EB-42C78DD5EA54@mcmaster.ca>

Dear Dirk,

> On Oct 3, 2019, at 9:11 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> Charles,
> 
> On 3 October 2019 at 10:10, Driver, Charles wrote:
> | I have a function that outputs / compiles some latex. To do this I use Sys.which('pdflatex') and if nothing is found, prompt the user whether to install tinytex package. So, normally I understand the use of 'Suggests' in the package description to be for when there are only certain functions / tests that require the package. In this case, the package requirement is also conditional on other software (ie a tex distribution) not being found, otherwise it is unnecessary. There are no tests or examples that depend on the package. Should tinytex be in the 'Suggests' list?
> 
> A few suggestions:
> 
> - IIRC CRAN Policy asks you to not have interactive prompts, and clearly
>   prohibits messing with the system.  So no to the prompt to install.

Can you point to where in the CRAN policies this behaviour is prohibited?

The closest I can see is: "Packages should not write in the user?s home filespace (including clipboards), nor anywhere else on the file system apart from the R session?s temporary directory ... " But then, "Limited exceptions may be allowed in interactive sessions if the package obtains confirmation from the user."

Moreover, the tinytex package does precisely these kinds of things, including installing LaTeX.

Best,
 John


> 
> - CRAN and R have a perfectly working dependency system [1] so just use
>   'Suggests: tinytex' and _then please condition your code on whether it is
>   present_. [2]
> 
> - Maybe add line breaks to your post?  ;-)
> 
> Dirk
> 
> [1] I continue to argue, as recently as yesterday in private mail with a
> junior dev, that people misuse / misunderstand Depends and Suggests.
> [2] Because if you don't your Suggests: really is a Depends:.
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Thu Oct  3 16:20:40 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 3 Oct 2019 09:20:40 -0500
Subject: [R-pkg-devel] 
 Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <C9593D7B-0C33-4B86-82EB-42C78DD5EA54@mcmaster.ca>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
 <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
 <13559_1570108726_x93DH7Ub011687_23957.62339.668405.255194@rob.eddelbuettel.com>
 <C9593D7B-0C33-4B86-82EB-42C78DD5EA54@mcmaster.ca>
Message-ID: <23958.952.396652.443672@rob.eddelbuettel.com>


Hi John,

On 3 October 2019 at 13:56, Fox, John wrote:
| > On Oct 3, 2019, at 9:11 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
| > On 3 October 2019 at 10:10, Driver, Charles wrote:
| > | I have a function that outputs / compiles some latex. To do this I use Sys.which('pdflatex') and if nothing is found, prompt the user whether to install tinytex package. So, normally I understand the use of 'Suggests' in the package description to be for when there are only certain functions / tests that require the package. In this case, the package requirement is also conditional on other software (ie a tex distribution) not being found, otherwise it is unnecessary. There are no tests or examples that depend on the package. Should tinytex be in the 'Suggests' list?
| > 
| > A few suggestions:
| > 
| > - IIRC CRAN Policy asks you to not have interactive prompts, and clearly
| >   prohibits messing with the system.  So no to the prompt to install.
| 
| Can you point to where in the CRAN policies this behaviour is prohibited?

Well I hedged my bet with "IIRC". Interactive prompts are neither explicitly
allowed, nor disallowed, but the larger paragraph you quote from gives some
hints.  Now, turning from the 'letter of the law' to the 'spirit of the law',
how many packages have you checked in the 25+ years of using R? How often
would you have wanted an interactive prompt?  I just ran reverse depends for
both Rcpp and RcppArmadillo in the last 48 hours so that is 2000+ packages --
and I am rather glad I didn't face prompts for any one of those 2000+.

| The closest I can see is: "Packages should not write in the user?s home filespace (including clipboards), nor anywhere else on the file system apart from the R session?s temporary directory ... " But then, "Limited exceptions may be allowed in interactive sessions if the package obtains confirmation from the user."
| 
| Moreover, the tinytex package does precisely these kinds of things, including installing LaTeX.

And tinytex is something I keep finding problematic as it creates an
obfuscation layer. There was a recent (purely latex-side) bug I fixed in one
of my packages after an alert from CRAN.  But the additional tinytex layer
made the latex-side error incomprehensible to misleading to the point where
the CRAN maintainer was mislead (as I was later).  Running plain tex is
better. I so wish tinytex would let me opt out and render directly via
tools::texi2pdf but sadly I have no such option.  I understand that tinytex
seems to help on some platforms without working infrastruture; I have always
had working (and extensible) texlive around due to the OS/distro I use.

Anyway, this is going off-topic.  It might be nice for R to offer a query
whether 'is tex available?' just how capabilities() and extSoftVersion()
gives hint on some other optional capabilities (which are arguably closer to
its core).

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct  3 16:44:33 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 3 Oct 2019 10:44:33 -0400
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <CACSCokeari0GJW0ys0ZV0NzBrcc-tZ9iKofZzzGSp9roHRPO+Q@mail.gmail.com>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
 <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
 <CACSCokeari0GJW0ys0ZV0NzBrcc-tZ9iKofZzzGSp9roHRPO+Q@mail.gmail.com>
Message-ID: <977d7af6-909b-eab8-2757-77ec501691c0@gmail.com>

On 03/10/2019 9:00 a.m., Juhee Lee wrote:
> Maybe "vignette.pdf" is rebuilt by R CMD build.

Can't you tell by looking at what is printed?  You should see

* installing the package to build vignettes
* creating vignettes ... OK

(You can save this output to a file by adding the option --log to the R 
CMD build call).

Duncan Murdoch

> 
> Juhee Lee
> 
> 2019? 10? 2? (?) ?? 10:09, Duncan Murdoch 
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>?? ??:
> 
>     On 02/10/2019 8:34 a.m., Juhee Lee wrote:
>      > Dear all.
>      >
>      > I checked my package on win-builder, and got this message:
>      >
>      > * checking sizes of PDF files under 'inst/doc' ... WARNING
>      >? ? 'gs+qpdf' made some significant size reductions:
>      >? ? ? ?compacted 'vignette.pdf' from 541Kb to 234Kb
>      >? ? consider running tools::compactPDF(gs_quality = "ebook") on
>     these files
>      >
>      >
>      > But, I run R CMD build --compact-vignettes="gs+qpdf", and
>      >
>      > I installed gs and qpdf on my system.
>      >
>      > How can I solve this problem?
> 
>     Is vignette.pdf in inst/doc before calling R CMD build?? Is it rebuilt
>     by R CMD build?
> 
>     Duncan Murdoch
> 
>      >
>      >
>      > Best regards
>      >
>      >
>      > Juhee Lee.
>      >
>      > ---------------------------------------
>      >
>      >> Sys.which(Sys.getenv("R_GSCMD"))
>      > C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
>      >? ? ?"C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
>      >> Sys.which(Sys.getenv("R_QPDF"))
>      > C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
>      >? ? ?"C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
>      >> sessionInfo()
>      > R version 3.6.1 (2019-07-05)
>      > Platform: x86_64-w64-mingw32/x64 (64-bit)
>      > Running under: Windows 10 x64 (build 18362)
>      >
>      > Matrix products: default
>      >
>      > locale:
>      > [1] LC_COLLATE=Korean_Korea.949? LC_CTYPE=Korean_Korea.949
>      > LC_MONETARY=Korean_Korea.949
>      > [4] LC_NUMERIC=C? ? ? ? ? ? ? ? ?LC_TIME=Korean_Korea.949
>      >
>      > attached base packages:
>      > [1] stats? ? ?graphics? grDevices utils? ? ?datasets? methods? ?base
>      >
>      > other attached packages:
>      > [1] LARisk_0.1.1
>      >
>      > loaded via a namespace (and not attached):
>      > [1] compiler_3.6.1 tools_3.6.1? ? Rcpp_1.0.2
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>


From j|ox @end|ng |rom mcm@@ter@c@  Thu Oct  3 17:26:56 2019
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Thu, 3 Oct 2019 15:26:56 +0000
Subject: [R-pkg-devel] 
 Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <23958.952.396652.443672@rob.eddelbuettel.com>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
 <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
 <13559_1570108726_x93DH7Ub011687_23957.62339.668405.255194@rob.eddelbuettel.com>
 <C9593D7B-0C33-4B86-82EB-42C78DD5EA54@mcmaster.ca>
 <23958.952.396652.443672@rob.eddelbuettel.com>
Message-ID: <14D503E7-A80A-424B-8638-E61C95774A98@mcmaster.ca>

Hi Dirk,

> On Oct 3, 2019, at 10:20 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> Hi John,
> 
> On 3 October 2019 at 13:56, Fox, John wrote:
> | > On Oct 3, 2019, at 9:11 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> | > On 3 October 2019 at 10:10, Driver, Charles wrote:
> | > | I have a function that outputs / compiles some latex. To do this I use Sys.which('pdflatex') and if nothing is found, prompt the user whether to install tinytex package. So, normally I understand the use of 'Suggests' in the package description to be for when there are only certain functions / tests that require the package. In this case, the package requirement is also conditional on other software (ie a tex distribution) not being found, otherwise it is unnecessary. There are no tests or examples that depend on the package. Should tinytex be in the 'Suggests' list?
> | > 
> | > A few suggestions:
> | > 
> | > - IIRC CRAN Policy asks you to not have interactive prompts, and clearly
> | >   prohibits messing with the system.  So no to the prompt to install.
> | 
> | Can you point to where in the CRAN policies this behaviour is prohibited?
> 
> Well I hedged my bet with "IIRC". 

Yes, I noticed that, but didn't want people to be potentially misled since you didn't "RC"  ;)

> Interactive prompts are neither explicitly
> allowed, nor disallowed, but the larger paragraph you quote from gives some
> hints.  Now, turning from the 'letter of the law' to the 'spirit of the law',
> how many packages have you checked in the 25+ years of using R?

As it turns out, a lot, but I'm sure vastly fewer than you. The car package, e.g., has many reverse dependencies that I check before a new version of the package goes to CRAN.

> How often
> would you have wanted an interactive prompt?  

Well, never of course, but shouldn't interactive prompts only appear in interactive sessions -- e.g., enclosed in if (interactive()) {} in an example?

Moreover, I wasn't trying to argue that one *should* necessarily do this, just point out that one can in certain circumstances without violating CRAN policies. In the original context of this thread, a simple error message indicating that LaTeX is absent probably would suffice.

Best,
 John

> I just ran reverse depends for
> both Rcpp and RcppArmadillo in the last 48 hours so that is 2000+ packages --
> and I am rather glad I didn't face prompts for any one of those 2000+.
> 
> | The closest I can see is: "Packages should not write in the user?s home filespace (including clipboards), nor anywhere else on the file system apart from the R session?s temporary directory ... " But then, "Limited exceptions may be allowed in interactive sessions if the package obtains confirmation from the user."
> | 
> | Moreover, the tinytex package does precisely these kinds of things, including installing LaTeX.
> 
> And tinytex is something I keep finding problematic as it creates an
> obfuscation layer. There was a recent (purely latex-side) bug I fixed in one
> of my packages after an alert from CRAN.  But the additional tinytex layer
> made the latex-side error incomprehensible to misleading to the point where
> the CRAN maintainer was mislead (as I was later).  Running plain tex is
> better. I so wish tinytex would let me opt out and render directly via
> tools::texi2pdf but sadly I have no such option.  I understand that tinytex
> seems to help on some platforms without working infrastruture; I have always
> had working (and extensible) texlive around due to the OS/distro I use.
> 
> Anyway, this is going off-topic.  It might be nice for R to offer a query
> whether 'is tex available?' just how capabilities() and extSoftVersion()
> gives hint on some other optional capabilities (which are arguably closer to
> its core).
> 
> Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Thu Oct  3 17:45:20 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 3 Oct 2019 10:45:20 -0500
Subject: [R-pkg-devel] 
 Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <14D503E7-A80A-424B-8638-E61C95774A98@mcmaster.ca>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
 <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
 <13559_1570108726_x93DH7Ub011687_23957.62339.668405.255194@rob.eddelbuettel.com>
 <C9593D7B-0C33-4B86-82EB-42C78DD5EA54@mcmaster.ca>
 <23958.952.396652.443672@rob.eddelbuettel.com>
 <14D503E7-A80A-424B-8638-E61C95774A98@mcmaster.ca>
Message-ID: <23958.6032.42430.877294@rob.eddelbuettel.com>


John,

On 3 October 2019 at 15:26, Fox, John wrote:
| In the original context of this thread, a simple error message indicating that LaTeX is absent probably would suffice.

Yes, I agree. Hence this earlier comment of mine you choose not to reply to:

| > Anyway, this is going off-topic.  It might be nice for R to offer a query
| > whether 'is tex available?' just how capabilities() and extSoftVersion()
| > gives hint on some other optional capabilities (which are arguably closer to
| > its core).

That still holds because it's actually complicated -- pdflatex is a default,
but some styles require xelatex for other fonts, and there are other front
ends such as lualatex and so on.

R knows what it is doing. So if you (or Charles) look at tools::texi2dvi
(which is called by tools::texi2pdf) then you see it already tries quite a
few things to find a suitable latex drivers. Other (though IIRC not base R)
use latexmk. And the long and the short of it is that Charles probably just
wanted a Suggests: for tinytex followed by an if (requireNamespace("tinytex"))

But then "kids these days" don't care as they go from Rmd to html. Which may
be another reason not to prompt for 'pdflatex'.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From dr|ver @end|ng |rom mp|b-ber||n@mpg@de  Thu Oct  3 23:38:40 2019
From: dr|ver @end|ng |rom mp|b-ber||n@mpg@de (Driver, Charles)
Date: Thu, 3 Oct 2019 21:38:40 +0000
Subject: [R-pkg-devel] 
 Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <23958.6032.42430.877294@rob.eddelbuettel.com>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
 <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
 <13559_1570108726_x93DH7Ub011687_23957.62339.668405.255194@rob.eddelbuettel.com>
 <C9593D7B-0C33-4B86-82EB-42C78DD5EA54@mcmaster.ca>
 <23958.952.396652.443672@rob.eddelbuettel.com>
 <14D503E7-A80A-424B-8638-E61C95774A98@mcmaster.ca>,
 <23958.6032.42430.877294@rob.eddelbuettel.com>
Message-ID: <1157fd61dd0e46c08cc36191ee9ca657@mpib-berlin.mpg.de>

Thanks for the thoughts all. In some ideal world I agree a simple message and leave it up to the user would be cleanest, in a world where I / others already have to deal with random compiler problems and other excitement in the middle of teaching workshops, I can see the benefits of an optional 'take care of it for me please' step.


I don't really see why this should be problematic / unappealing, if only asked during interactive sessions.


Since texi2dvi does more advanced checking than my simple Sys.which('pdflatex') , it sounds like I should rely on an error from that as cause for the message / prompt.


html / Mathjax was quite a pain for the matrix notation, so the kids are still stuck with latex in this case :)


While the answer seems to be 'include it in Suggests', it's still not 100% clear to me from the answers so far.  The more I think on it the more I think it doesn't really make sense, since all the code in my package can run without tinytex, and it is preferable to not install tinytex unless the compile error occurs and the user desires the install.


The code would look something like this -- if the general scope is actually violating CRAN policies then sure, it doesn't matter anyway, but so far I don't see that that's the case:


hastex <- !Sys.which('pdflatex') %in% ''
a=try(tools::texi2pdf(file=paste0(filename,'.tex'),quiet=FALSE, clean=TRUE))
if('try-error' %in% class(a) && !hastex) {
  message('Could not compile tex -- do you want to install tinytex? Will require a manual restart of R.')
  dotiny <- readline('Y/N?')
  if(dotiny %in% c('Y','y') && !requireNamespace('tinytex') ){
    install.packages('tinytex')
    requireNamespace('tinytex') #can perhaps leave this line out?
    tinytex::install_tinytex()
  }
}




Cheers,

Charles


________________________________
From: Dirk Eddelbuettel <edd at debian.org>
Sent: Thursday, October 3, 2019 5:45:20 PM
To: Fox, John
Cc: Dirk Eddelbuettel; Driver, Charles; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Appropriate usage of 'Suggests' -- package installed conditional on other software not found


John,

On 3 October 2019 at 15:26, Fox, John wrote:
| In the original context of this thread, a simple error message indicating that LaTeX is absent probably would suffice.

Yes, I agree. Hence this earlier comment of mine you choose not to reply to:

| > Anyway, this is going off-topic.  It might be nice for R to offer a query
| > whether 'is tex available?' just how capabilities() and extSoftVersion()
| > gives hint on some other optional capabilities (which are arguably closer to
| > its core).

That still holds because it's actually complicated -- pdflatex is a default,
but some styles require xelatex for other fonts, and there are other front
ends such as lualatex and so on.

R knows what it is doing. So if you (or Charles) look at tools::texi2dvi
(which is called by tools::texi2pdf) then you see it already tries quite a
few things to find a suitable latex drivers. Other (though IIRC not base R)
use latexmk. And the long and the short of it is that Charles probably just
wanted a Suggests: for tinytex followed by an if (requireNamespace("tinytex"))

But then "kids these days" don't care as they go from Rmd to html. Which may
be another reason not to prompt for 'pdflatex'.

Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Oct  4 00:28:57 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 3 Oct 2019 17:28:57 -0500
Subject: [R-pkg-devel] 
 Appropriate usage of 'Suggests' -- package installed
 conditional on other software not found
In-Reply-To: <1157fd61dd0e46c08cc36191ee9ca657@mpib-berlin.mpg.de>
References: <mailman.4491.5.1570096802.59165.r-package-devel@r-project.org>
 <3f5d5cbf64194e56a2705b94ee00bdd2@mpib-berlin.mpg.de>
 <13559_1570108726_x93DH7Ub011687_23957.62339.668405.255194@rob.eddelbuettel.com>
 <C9593D7B-0C33-4B86-82EB-42C78DD5EA54@mcmaster.ca>
 <23958.952.396652.443672@rob.eddelbuettel.com>
 <14D503E7-A80A-424B-8638-E61C95774A98@mcmaster.ca>
 <23958.6032.42430.877294@rob.eddelbuettel.com>
 <1157fd61dd0e46c08cc36191ee9ca657@mpib-berlin.mpg.de>
Message-ID: <23958.30249.296717.743136@rob.eddelbuettel.com>


On 3 October 2019 at 21:38, Driver, Charles wrote:
| Since texi2dvi does more advanced checking than my simple Sys.which('pdflatex') , it sounds like I should rely on an error from that as cause for the message / prompt.

Right.

The corrolary is that if texi2dvi fails, simply installing tinytex may not
help you either. AFAIK tinytex was primarily aimed at complementing an
existing texlive / miktex installation by noticing if any, and then which,
latex styles or fonts were missing and to then add them for the user -- which
is a good idea in principle.  I don't think it can act as a wholesale "oh you
have no (la)tex at all let's fix that in one command" magic potion.  Maybe it
does -- I just don't know as I tend to install texlive from my distro.
 
| html / Mathjax was quite a pain for the matrix notation, so the kids are still stuck with latex in this case :)

:)  
 
| While the answer seems to be 'include it in Suggests', it's still not 100% clear to me from the answers so far.  The more I think on it the more I think it doesn't really make sense, since all the code in my package can run without tinytex, and it is preferable to not install tinytex unless the compile error occurs and the user desires the install.

I still get back to the basic point of (la)tex simply being optional in the
context of an R installation which is your real issue so ...
 
| The code would look something like this -- if the general scope is actually violating CRAN policies then sure, it doesn't matter anyway, but so far I don't see that that's the case:
| 
| hastex <- !Sys.which('pdflatex') %in% ''
| a=try(tools::texi2pdf(file=paste0(filename,'.tex'),quiet=FALSE, clean=TRUE))
| if('try-error' %in% class(a) && !hastex) {
|   message('Could not compile tex -- do you want to install tinytex? Will require a manual restart of R.')
|   dotiny <- readline('Y/N?')
|   if(dotiny %in% c('Y','y') && !requireNamespace('tinytex') ){
|     install.packages('tinytex')
|     requireNamespace('tinytex') #can perhaps leave this line out?
|     tinytex::install_tinytex()
|   }
| }

... while the diagnostics are right and well done, I am not sure the
suggested fix is all that helpful.  

Cheers, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From rm@h@rp @end|ng |rom me@com  Sat Oct  5 23:52:16 2019
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Sat, 5 Oct 2019 16:52:16 -0500
Subject: [R-pkg-devel] checking CRAN incoming feasibility NOTE
Message-ID: <7B25BBF0-896C-4F64-B87D-7C3EFB83A2DB@me.com>

I getting ready to submit a package to CRAN for the first time. I have run cran_prep <- check_for_cran() using the rhub package. I understand that as a new package it will generate a NOTE. As a novice, I do not know what is to be expected within that NOTE and want to make sure the NOTEs I have received are satisfactory. I have not found an example of a minimal first submission NOTE. Below is what I am getting from the above test on rhub. I have three test environments but only two NOTEs. Do these results indicate a problem to be addressed?

> cran_prep$cran_summary()
For a CRAN submission we recommend that you fix all NOTEs, WARNINGs and ERRORs.
## Test environments
- R-hub windows-x86_64-devel (r-devel)
- R-hub ubuntu-gcc-release (r-release)
- R-hub fedora-clang-devel (r-devel)

## R CMD check results
? On windows-x86_64-devel (r-devel), ubuntu-gcc-release (r-release)
  checking CRAN incoming feasibility ... NOTE
  Maintainer: 'R. Mark Sharp <rmsharp at me.com>'
  
  New submission
  
  License components with restrictions and base license permitting such:
    MIT + file LICENSE
  File 'LICENSE':
    Copyright 2017-2019 R. Mark Sharp
    
    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
    
    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
    
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

? On fedora-clang-devel (r-devel)
  checking CRAN incoming feasibility ...NB: need Internet access to use CRAN incoming checks
   NOTE
  Maintainer: ?R. Mark Sharp <rmsharp at me.com>?
  
  License components with restrictions and base license permitting such:
    MIT + file LICENSE
  File 'LICENSE':
    Copyright 2017-2019 R. Mark Sharp
    
    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
    
    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
    
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

0 errors ? | 0 warnings ? | 2 notes ?
> 
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sun Oct  6 00:10:58 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 5 Oct 2019 15:10:58 -0700
Subject: [R-pkg-devel] checking CRAN incoming feasibility NOTE
In-Reply-To: <7B25BBF0-896C-4F64-B87D-7C3EFB83A2DB@me.com>
References: <7B25BBF0-896C-4F64-B87D-7C3EFB83A2DB@me.com>
Message-ID: <9041E08C-9A37-4C01-8EDA-B433D508B8C7@noaa.gov>

use this::use_cran_comments()

There is a place to put that it is a new submission

I would recommend also testing using:

devtools::check_win_release()
devtools::check_win_devel()

You should only have the one note that it is a new  submission.  When you submit,  you may or may not get a note that it was rejected by the automatic checker. Sit tight, someone from CRAN will see that it is a new submission.  A new submission is given a much more thorough review,  so it can take a coupe days or more for CRAN to get back to you.  You can check the status of CRAN submissions at:

https://cransays.itsalocke.com/articles/dashboard.html

HTH,

-Roy


> On Oct 5, 2019, at 2:52 PM, R. Mark Sharp <rmsharp at me.com> wrote:
> 
> I getting ready to submit a package to CRAN for the first time. I have run cran_prep <- check_for_cran() using the rhub package. I understand that as a new package it will generate a NOTE. As a novice, I do not know what is to be expected within that NOTE and want to make sure the NOTEs I have received are satisfactory. I have not found an example of a minimal first submission NOTE. Below is what I am getting from the above test on rhub. I have three test environments but only two NOTEs. Do these results indicate a problem to be addressed?
> 
>> cran_prep$cran_summary()
> For a CRAN submission we recommend that you fix all NOTEs, WARNINGs and ERRORs.
> ## Test environments
> - R-hub windows-x86_64-devel (r-devel)
> - R-hub ubuntu-gcc-release (r-release)
> - R-hub fedora-clang-devel (r-devel)
> 
> ## R CMD check results
> ? On windows-x86_64-devel (r-devel), ubuntu-gcc-release (r-release)
>  checking CRAN incoming feasibility ... NOTE
>  Maintainer: 'R. Mark Sharp <rmsharp at me.com>'
> 
>  New submission
> 
>  License components with restrictions and base license permitting such:
>    MIT + file LICENSE
>  File 'LICENSE':
>    Copyright 2017-2019 R. Mark Sharp
> 
>    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
> 
>    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
> 
>    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
> 
> ? On fedora-clang-devel (r-devel)
>  checking CRAN incoming feasibility ...NB: need Internet access to use CRAN incoming checks
>   NOTE
>  Maintainer: ?R. Mark Sharp <rmsharp at me.com>?
> 
>  License components with restrictions and base license permitting such:
>    MIT + file LICENSE
>  File 'LICENSE':
>    Copyright 2017-2019 R. Mark Sharp
> 
>    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
> 
>    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
> 
>    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
> 
> 0 errors ? | 0 warnings ? | 2 notes ?
>> 
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From rm@h@rp @end|ng |rom me@com  Sun Oct  6 01:58:39 2019
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Sat, 5 Oct 2019 18:58:39 -0500
Subject: [R-pkg-devel] checking CRAN incoming feasibility NOTE
In-Reply-To: <9041E08C-9A37-4C01-8EDA-B433D508B8C7@noaa.gov>
References: <7B25BBF0-896C-4F64-B87D-7C3EFB83A2DB@me.com>
 <9041E08C-9A37-4C01-8EDA-B433D508B8C7@noaa.gov>
Message-ID: <3173C68C-24C4-48B7-BA02-D52497AD874D@me.com>

Roy, 

Thank you for your guidance and advice.

I ran usethis::use_cran_comments() shown below. 
> usethis::use_cran_comments()
? Setting active project to '/Users/msharp/Documents/Development/R/r_workspace/library/nprcmanager'
? Writing 'cran-comments.md'
? Adding '^cran-comments\\.md$' to '.Rbuildignore'
? Modify 'cran-comments.md?

The text of ?cran-comments.md? follows and also makes me think it was a clean inspection:
## Test environments
* local OS X install, R 3.6.1
* ubuntu 14.04 (on travis-ci), R 3.6.1
* win-builder (devel and release)

## R CMD check results

0 errors | 0 warnings | 1 note

* This is a new release.


R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com


> On Oct 5, 2019, at 5:10 PM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> use this::use_cran_comments()
> 
> There is a place to put that it is a new submission
> 
> I would recommend also testing using:
> 
> devtools::check_win_release()
> devtools::check_win_devel()
> 
> You should only have the one note that it is a new  submission.  When you submit,  you may or may not get a note that it was rejected by the automatic checker. Sit tight, someone from CRAN will see that it is a new submission.  A new submission is given a much more thorough review,  so it can take a coupe days or more for CRAN to get back to you.  You can check the status of CRAN submissions at:
> 
> https://cransays.itsalocke.com/articles/dashboard.html
> 
> HTH,
> 
> -Roy
> 
> 
>> On Oct 5, 2019, at 2:52 PM, R. Mark Sharp <rmsharp at me.com> wrote:
>> 
>> I getting ready to submit a package to CRAN for the first time. I have run cran_prep <- check_for_cran() using the rhub package. I understand that as a new package it will generate a NOTE. As a novice, I do not know what is to be expected within that NOTE and want to make sure the NOTEs I have received are satisfactory. I have not found an example of a minimal first submission NOTE. Below is what I am getting from the above test on rhub. I have three test environments but only two NOTEs. Do these results indicate a problem to be addressed?
>> 
>>> cran_prep$cran_summary()
>> For a CRAN submission we recommend that you fix all NOTEs, WARNINGs and ERRORs.
>> ## Test environments
>> - R-hub windows-x86_64-devel (r-devel)
>> - R-hub ubuntu-gcc-release (r-release)
>> - R-hub fedora-clang-devel (r-devel)
>> 
>> ## R CMD check results
>> ? On windows-x86_64-devel (r-devel), ubuntu-gcc-release (r-release)
>> checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'R. Mark Sharp <rmsharp at me.com>'
>> 
>> New submission
>> 
>> License components with restrictions and base license permitting such:
>>   MIT + file LICENSE
>> File 'LICENSE':
>>   Copyright 2017-2019 R. Mark Sharp
>> 
>>   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
>> 
>>   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
>> 
>>   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
>> 
>> ? On fedora-clang-devel (r-devel)
>> checking CRAN incoming feasibility ...NB: need Internet access to use CRAN incoming checks
>>  NOTE
>> Maintainer: ?R. Mark Sharp <rmsharp at me.com>?
>> 
>> License components with restrictions and base license permitting such:
>>   MIT + file LICENSE
>> File 'LICENSE':
>>   Copyright 2017-2019 R. Mark Sharp
>> 
>>   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
>> 
>>   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
>> 
>>   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
>> 
>> 0 errors ? | 0 warnings ? | 2 notes ?
>>> 
>> R. Mark Sharp, Ph.D.
>> Data Scientist and Biomedical Statistical Consultant
>> 7526 Meadow Green St.
>> San Antonio, TX 78251
>> mobile: 210-218-2868
>> rmsharp at me.com
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Oct  6 09:02:22 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 6 Oct 2019 10:02:22 +0300
Subject: [R-pkg-devel] checking CRAN incoming feasibility NOTE
In-Reply-To: <7B25BBF0-896C-4F64-B87D-7C3EFB83A2DB@me.com>
References: <7B25BBF0-896C-4F64-B87D-7C3EFB83A2DB@me.com>
Message-ID: <20191006100222.574bf47c@parabola>

On Sat, 5 Oct 2019 16:52:16 -0500
"R. Mark Sharp" <rmsharp at me.com> wrote:

> MIT + file LICENSE
>   File 'LICENSE':
>     Copyright 2017-2019 R. Mark Sharp
>     
>     Permission is hereby granted, <...>

Note that for packages licensed under MIT license, the LICENSE file
should only contain the lines:

>> YEAR: 2019
>> COPYRIGHT HOLDER: R. Mark Sharp

and not the actual text of MIT license. See [*] for more info.

-- 
Best regards,
Ivan

[*] https://www.r-project.org/Licenses/MIT


From |jh988488 @end|ng |rom gm@||@com  Sun Oct  6 09:07:01 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Sun, 6 Oct 2019 16:07:01 +0900
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <977d7af6-909b-eab8-2757-77ec501691c0@gmail.com>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
 <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
 <CACSCokeari0GJW0ys0ZV0NzBrcc-tZ9iKofZzzGSp9roHRPO+Q@mail.gmail.com>
 <977d7af6-909b-eab8-2757-77ec501691c0@gmail.com>
Message-ID: <CACSCokdVitbh=ApXTt1+UDs_ujO_WgWA+fUSL8cNk6unFhkT2A@mail.gmail.com>

I can see this result :

* checking for file 'D:\Works\LAR\package\LARisk/DESCRIPTION' ... OK
* preparing 'LARisk':
* checking DESCRIPTION meta-information ... OK
* cleaning src
* installing the package to build vignettes
* creating vignettes ... OK
* compacting vignettes and other PDF files
* cleaning src
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* building 'LARisk_0.1.1.tar.gz'


Is this the thing you tell me?

Juhee Lee

2019? 10? 3? (?) ?? 11:44, Duncan Murdoch <murdoch.duncan at gmail.com>?? ??:

> On 03/10/2019 9:00 a.m., Juhee Lee wrote:
> > Maybe "vignette.pdf" is rebuilt by R CMD build.
>
> Can't you tell by looking at what is printed?  You should see
>
> * installing the package to build vignettes
> * creating vignettes ... OK
>
> (You can save this output to a file by adding the option --log to the R
> CMD build call).
>
> Duncan Murdoch
>
> >
> > Juhee Lee
> >
> > 2019? 10? 2? (?) ?? 10:09, Duncan Murdoch
> > <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>?? ??:
> >
> >     On 02/10/2019 8:34 a.m., Juhee Lee wrote:
> >      > Dear all.
> >      >
> >      > I checked my package on win-builder, and got this message:
> >      >
> >      > * checking sizes of PDF files under 'inst/doc' ... WARNING
> >      >    'gs+qpdf' made some significant size reductions:
> >      >       compacted 'vignette.pdf' from 541Kb to 234Kb
> >      >    consider running tools::compactPDF(gs_quality = "ebook") on
> >     these files
> >      >
> >      >
> >      > But, I run R CMD build --compact-vignettes="gs+qpdf", and
> >      >
> >      > I installed gs and qpdf on my system.
> >      >
> >      > How can I solve this problem?
> >
> >     Is vignette.pdf in inst/doc before calling R CMD build?  Is it
> rebuilt
> >     by R CMD build?
> >
> >     Duncan Murdoch
> >
> >      >
> >      >
> >      > Best regards
> >      >
> >      >
> >      > Juhee Lee.
> >      >
> >      > ---------------------------------------
> >      >
> >      >> Sys.which(Sys.getenv("R_GSCMD"))
> >      > C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
> >      >     "C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
> >      >> Sys.which(Sys.getenv("R_QPDF"))
> >      > C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
> >      >     "C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
> >      >> sessionInfo()
> >      > R version 3.6.1 (2019-07-05)
> >      > Platform: x86_64-w64-mingw32/x64 (64-bit)
> >      > Running under: Windows 10 x64 (build 18362)
> >      >
> >      > Matrix products: default
> >      >
> >      > locale:
> >      > [1] LC_COLLATE=Korean_Korea.949  LC_CTYPE=Korean_Korea.949
> >      > LC_MONETARY=Korean_Korea.949
> >      > [4] LC_NUMERIC=C                 LC_TIME=Korean_Korea.949
> >      >
> >      > attached base packages:
> >      > [1] stats     graphics  grDevices utils     datasets  methods
>  base
> >      >
> >      > other attached packages:
> >      > [1] LARisk_0.1.1
> >      >
> >      > loaded via a namespace (and not attached):
> >      > [1] compiler_3.6.1 tools_3.6.1    Rcpp_1.0.2
> >      >
> >      >       [[alternative HTML version deleted]]
> >      >
> >      > ______________________________________________
> >      > R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >
> >
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Oct  6 13:57:55 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 6 Oct 2019 07:57:55 -0400
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <CACSCokdVitbh=ApXTt1+UDs_ujO_WgWA+fUSL8cNk6unFhkT2A@mail.gmail.com>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
 <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
 <CACSCokeari0GJW0ys0ZV0NzBrcc-tZ9iKofZzzGSp9roHRPO+Q@mail.gmail.com>
 <977d7af6-909b-eab8-2757-77ec501691c0@gmail.com>
 <CACSCokdVitbh=ApXTt1+UDs_ujO_WgWA+fUSL8cNk6unFhkT2A@mail.gmail.com>
Message-ID: <335cdf51-0015-26c2-11de-341f9fe88683@gmail.com>

On 06/10/2019 3:07 a.m., Juhee Lee wrote:
> I can see this result :
> 
> * checking for file 'D:\Works\LAR\package\LARisk/DESCRIPTION' ... OK
> * preparing 'LARisk':
> * checking DESCRIPTION meta-information ... OK
> * cleaning src
> * installing the package to build vignettes
> * creating vignettes ... OK
> * compacting vignettes and other PDF files
> * cleaning src
> * checking for LF line-endings in source and make files and shell scripts
> * checking for empty or unneeded directories
> * building 'LARisk_0.1.1.tar.gz'
> 
> 
> Is this the thing?you tell me?

Yes, that looks fine.  If you are submitting the LARisk_0.1.1.tar.gz 
file created by that sequence then I don't see why you would have gotten 
the warning you did.

Duncan Murdoch

> 
> Juhee Lee
> 
> 2019? 10? 3? (?) ?? 11:44, Duncan Murdoch 
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>?? ??:
> 
>     On 03/10/2019 9:00 a.m., Juhee Lee wrote:
>      > Maybe "vignette.pdf" is rebuilt by R CMD build.
> 
>     Can't you tell by looking at what is printed?? You should see
> 
>     * installing the package to build vignettes
>     * creating vignettes ... OK
> 
>     (You can save this output to a file by adding the option --log to the R
>     CMD build call).
> 
>     Duncan Murdoch
> 
>      >
>      > Juhee Lee
>      >
>      > 2019? 10? 2? (?) ?? 10:09, Duncan Murdoch
>      > <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>     <mailto:murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>>
>     ?? ??:
>      >
>      >? ? ?On 02/10/2019 8:34 a.m., Juhee Lee wrote:
>      >? ? ? > Dear all.
>      >? ? ? >
>      >? ? ? > I checked my package on win-builder, and got this message:
>      >? ? ? >
>      >? ? ? > * checking sizes of PDF files under 'inst/doc' ... WARNING
>      >? ? ? >? ? 'gs+qpdf' made some significant size reductions:
>      >? ? ? >? ? ? ?compacted 'vignette.pdf' from 541Kb to 234Kb
>      >? ? ? >? ? consider running tools::compactPDF(gs_quality = "ebook") on
>      >? ? ?these files
>      >? ? ? >
>      >? ? ? >
>      >? ? ? > But, I run R CMD build --compact-vignettes="gs+qpdf", and
>      >? ? ? >
>      >? ? ? > I installed gs and qpdf on my system.
>      >? ? ? >
>      >? ? ? > How can I solve this problem?
>      >
>      >? ? ?Is vignette.pdf in inst/doc before calling R CMD build?? Is
>     it rebuilt
>      >? ? ?by R CMD build?
>      >
>      >? ? ?Duncan Murdoch
>      >
>      >? ? ? >
>      >? ? ? >
>      >? ? ? > Best regards
>      >? ? ? >
>      >? ? ? >
>      >? ? ? > Juhee Lee.
>      >? ? ? >
>      >? ? ? > ---------------------------------------
>      >? ? ? >
>      >? ? ? >> Sys.which(Sys.getenv("R_GSCMD"))
>      >? ? ? > C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
>      >? ? ? >? ? ?"C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
>      >? ? ? >> Sys.which(Sys.getenv("R_QPDF"))
>      >? ? ? > C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
>      >? ? ? >? ? ?"C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
>      >? ? ? >> sessionInfo()
>      >? ? ? > R version 3.6.1 (2019-07-05)
>      >? ? ? > Platform: x86_64-w64-mingw32/x64 (64-bit)
>      >? ? ? > Running under: Windows 10 x64 (build 18362)
>      >? ? ? >
>      >? ? ? > Matrix products: default
>      >? ? ? >
>      >? ? ? > locale:
>      >? ? ? > [1] LC_COLLATE=Korean_Korea.949? LC_CTYPE=Korean_Korea.949
>      >? ? ? > LC_MONETARY=Korean_Korea.949
>      >? ? ? > [4] LC_NUMERIC=C? ? ? ? ? ? ? ? ?LC_TIME=Korean_Korea.949
>      >? ? ? >
>      >? ? ? > attached base packages:
>      >? ? ? > [1] stats? ? ?graphics? grDevices utils? ? ?datasets 
>     methods? ?base
>      >? ? ? >
>      >? ? ? > other attached packages:
>      >? ? ? > [1] LARisk_0.1.1
>      >? ? ? >
>      >? ? ? > loaded via a namespace (and not attached):
>      >? ? ? > [1] compiler_3.6.1 tools_3.6.1? ? Rcpp_1.0.2
>      >? ? ? >
>      >? ? ? >? ? ? ?[[alternative HTML version deleted]]
>      >? ? ? >
>      >? ? ? > ______________________________________________
>      >? ? ? > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>
>      >? ? ?<mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>> mailing list
>      >? ? ? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >? ? ? >
>      >
>


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Mon Oct  7 13:42:36 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Mon, 7 Oct 2019 11:42:36 +0000
Subject: [R-pkg-devel] missing wget, cmake, pkg-config,..etc
Message-ID: <64CBA5AA-B76B-40FF-8836-56D5F643F354@kaust.edu.sa>

Hi,


I am using some tools through my package installation such as wget, cmake, pkg-config.  The users complain that the installation failed because of missing such tools on their system. They need to install them separately before installation my package. Is this normal, or I need to include something on my package to prevent this from happening.



--Sameh


	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Oct  7 14:29:50 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 7 Oct 2019 07:29:50 -0500
Subject: [R-pkg-devel] missing wget, cmake, pkg-config,..etc
In-Reply-To: <64CBA5AA-B76B-40FF-8836-56D5F643F354@kaust.edu.sa>
References: <64CBA5AA-B76B-40FF-8836-56D5F643F354@kaust.edu.sa>
Message-ID: <23963.12222.821263.540084@rob.eddelbuettel.com>


On 7 October 2019 at 11:42, Sameh M. Abdulah wrote:
| I am using some tools through my package installation such as wget, cmake, pkg-config.  The users complain that the installation failed because of missing such tools on their system. They need to install them separately before installation my package. Is this normal, or I need to include something on my package to prevent this from happening.

R is an application, not an operating system.

It has no control over this. As such you are asking in the wrong place --
especially as R *is* cross-platform and not all such tools and helpers are
(well, were) easily available everywhere.

So yes, if your package requires it, and the user does not have it, you have
to guide the user through this via testing and maybe a helpful message.  Many
of use have written configure.ac code to test for these things. The easiest
solution is, of course, to not have exotic depends in the first place.

And no, it is generally not the role of your R package to supply wget, cmake,
pkg-config, ... to the system. You can note in the SystemRequirements: field
of your DESCRIPTION file (and also the free-form Description:) if something
unusual is required.

And sometimes you just can't. I too have two projects / packages not on CRAN
as I (still) cannot assume its required libraries to be present on all
OSs. Getting libraries installed is hard, and we have to be careful to not
stress the CRAN maintainers too much over this.  Shipping _your_ package or
application as a Docker container can be an alternative too.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Mon Oct  7 16:24:03 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Mon, 7 Oct 2019 14:24:03 +0000
Subject: [R-pkg-devel] missing wget, cmake, pkg-config,..etc
In-Reply-To: <23963.12222.821263.540084@rob.eddelbuettel.com>
References: <64CBA5AA-B76B-40FF-8836-56D5F643F354@kaust.edu.sa>
 <23963.12222.821263.540084@rob.eddelbuettel.com>
Message-ID: <999250AD-B596-4408-B9A3-BDF5E282E7E6@kaust.edu.sa>

Thanks Dirk, this is what I thought too.


--Sameh


?On 10/7/19, 3:29 PM, "Dirk Eddelbuettel" <edd at debian.org> wrote:

    
    On 7 October 2019 at 11:42, Sameh M. Abdulah wrote:
    | I am using some tools through my package installation such as wget, cmake, pkg-config.  The users complain that the installation failed because of missing such tools on their system. They need to install them separately before installation my package. Is this normal, or I need to include something on my package to prevent this from happening.
    
    R is an application, not an operating system.
    
    It has no control over this. As such you are asking in the wrong place --
    especially as R *is* cross-platform and not all such tools and helpers are
    (well, were) easily available everywhere.
    
    So yes, if your package requires it, and the user does not have it, you have
    to guide the user through this via testing and maybe a helpful message.  Many
    of use have written configure.ac code to test for these things. The easiest
    solution is, of course, to not have exotic depends in the first place.
    
    And no, it is generally not the role of your R package to supply wget, cmake,
    pkg-config, ... to the system. You can note in the SystemRequirements: field
    of your DESCRIPTION file (and also the free-form Description:) if something
    unusual is required.
    
    And sometimes you just can't. I too have two projects / packages not on CRAN
    as I (still) cannot assume its required libraries to be present on all
    OSs. Getting libraries installed is hard, and we have to be careful to not
    stress the CRAN maintainers too much over this.  Shipping _your_ package or
    application as a Docker container can be an alternative too.
    
    Dirk
    
    -- 
    http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
    


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Wed Oct  9 12:16:20 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Wed, 9 Oct 2019 10:16:20 +0000
Subject: [R-pkg-devel] Problem uploading my package to CRAN
Message-ID: <CF3CD3FB-8EBA-470D-9CD0-48E52112B0DE@kaust.edu.sa>

Dear All,


I have a problem uploading my package to CRAN for more than a month now even my package can be downloaded and installed successfully from GitHub. The problem happens when loading the package after the installation where R complains that some functions are not defined.


  /srv/hornik/tmp/CRAN/mypackge.Rcheck/mypackge/lib/libcoreblas.so: undefined symbol: LAPACKE_slarfb_work

This is the linking line



-lpthread -lm -lrt -lgsl -lgslcblas -lnlopt -lm /srv/hornik/tmp/CRAN/mypackge.Rcheck/mypackge/lib/libopenblas.so -lhicma -lchameleon -lstarsh -lstarpu-1.2 -lchameleon_starpu -lhqr -lcoreblas -lhwloc


These functions are existing on /srv/hornik/tmp/CRAN/mypackge.Rcheck/mypackge/lib/libopenblas.so library.   Could anyone help in solving this?  I can provide the check.log URL for my package on CRAN if needed.




--Sameh

	[[alternative HTML version deleted]]


From |jh988488 @end|ng |rom gm@||@com  Thu Oct 10 15:41:16 2019
From: |jh988488 @end|ng |rom gm@||@com (Juhee Lee)
Date: Thu, 10 Oct 2019 22:41:16 +0900
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <335cdf51-0015-26c2-11de-341f9fe88683@gmail.com>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
 <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
 <CACSCokeari0GJW0ys0ZV0NzBrcc-tZ9iKofZzzGSp9roHRPO+Q@mail.gmail.com>
 <977d7af6-909b-eab8-2757-77ec501691c0@gmail.com>
 <CACSCokdVitbh=ApXTt1+UDs_ujO_WgWA+fUSL8cNk6unFhkT2A@mail.gmail.com>
 <335cdf51-0015-26c2-11de-341f9fe88683@gmail.com>
Message-ID: <CACSCokd3U0q8odFHzqHm76F5pSzDemu-kTkCQcybVhgO4gSzJQ@mail.gmail.com>

Then, is there no way I can fix it?


Thank you.

Juhee Lee


2019? 10? 6? (?) ?? 8:57, Duncan Murdoch <murdoch.duncan at gmail.com>?? ??:

> On 06/10/2019 3:07 a.m., Juhee Lee wrote:
> > I can see this result :
> >
> > * checking for file 'D:\Works\LAR\package\LARisk/DESCRIPTION' ... OK
> > * preparing 'LARisk':
> > * checking DESCRIPTION meta-information ... OK
> > * cleaning src
> > * installing the package to build vignettes
> > * creating vignettes ... OK
> > * compacting vignettes and other PDF files
> > * cleaning src
> > * checking for LF line-endings in source and make files and shell scripts
> > * checking for empty or unneeded directories
> > * building 'LARisk_0.1.1.tar.gz'
> >
> >
> > Is this the thing you tell me?
>
> Yes, that looks fine.  If you are submitting the LARisk_0.1.1.tar.gz
> file created by that sequence then I don't see why you would have gotten
> the warning you did.
>
> Duncan Murdoch
>
> >
> > Juhee Lee
> >
> > 2019? 10? 3? (?) ?? 11:44, Duncan Murdoch
> > <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>?? ??:
> >
> >     On 03/10/2019 9:00 a.m., Juhee Lee wrote:
> >      > Maybe "vignette.pdf" is rebuilt by R CMD build.
> >
> >     Can't you tell by looking at what is printed?  You should see
> >
> >     * installing the package to build vignettes
> >     * creating vignettes ... OK
> >
> >     (You can save this output to a file by adding the option --log to
> the R
> >     CMD build call).
> >
> >     Duncan Murdoch
> >
> >      >
> >      > Juhee Lee
> >      >
> >      > 2019? 10? 2? (?) ?? 10:09, Duncan Murdoch
> >      > <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
> >     <mailto:murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>>
> >     ?? ??:
> >      >
> >      >     On 02/10/2019 8:34 a.m., Juhee Lee wrote:
> >      >      > Dear all.
> >      >      >
> >      >      > I checked my package on win-builder, and got this message:
> >      >      >
> >      >      > * checking sizes of PDF files under 'inst/doc' ... WARNING
> >      >      >    'gs+qpdf' made some significant size reductions:
> >      >      >       compacted 'vignette.pdf' from 541Kb to 234Kb
> >      >      >    consider running tools::compactPDF(gs_quality =
> "ebook") on
> >      >     these files
> >      >      >
> >      >      >
> >      >      > But, I run R CMD build --compact-vignettes="gs+qpdf", and
> >      >      >
> >      >      > I installed gs and qpdf on my system.
> >      >      >
> >      >      > How can I solve this problem?
> >      >
> >      >     Is vignette.pdf in inst/doc before calling R CMD build?  Is
> >     it rebuilt
> >      >     by R CMD build?
> >      >
> >      >     Duncan Murdoch
> >      >
> >      >      >
> >      >      >
> >      >      > Best regards
> >      >      >
> >      >      >
> >      >      > Juhee Lee.
> >      >      >
> >      >      > ---------------------------------------
> >      >      >
> >      >      >> Sys.which(Sys.getenv("R_GSCMD"))
> >      >      > C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
> >      >      >     "C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
> >      >      >> Sys.which(Sys.getenv("R_QPDF"))
> >      >      > C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
> >      >      >     "C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
> >      >      >> sessionInfo()
> >      >      > R version 3.6.1 (2019-07-05)
> >      >      > Platform: x86_64-w64-mingw32/x64 (64-bit)
> >      >      > Running under: Windows 10 x64 (build 18362)
> >      >      >
> >      >      > Matrix products: default
> >      >      >
> >      >      > locale:
> >      >      > [1] LC_COLLATE=Korean_Korea.949  LC_CTYPE=Korean_Korea.949
> >      >      > LC_MONETARY=Korean_Korea.949
> >      >      > [4] LC_NUMERIC=C                 LC_TIME=Korean_Korea.949
> >      >      >
> >      >      > attached base packages:
> >      >      > [1] stats     graphics  grDevices utils     datasets
> >     methods   base
> >      >      >
> >      >      > other attached packages:
> >      >      > [1] LARisk_0.1.1
> >      >      >
> >      >      > loaded via a namespace (and not attached):
> >      >      > [1] compiler_3.6.1 tools_3.6.1    Rcpp_1.0.2
> >      >      >
> >      >      >       [[alternative HTML version deleted]]
> >      >      >
> >      >      > ______________________________________________
> >      >      > R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org>
> >      >     <mailto:R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org>> mailing list
> >      >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >      >
> >      >
> >
>
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Oct 10 15:44:33 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 10 Oct 2019 15:44:33 +0200
Subject: [R-pkg-devel] consider running tools::compactPDF(gs_quality =
 "ebook")
In-Reply-To: <CACSCokd3U0q8odFHzqHm76F5pSzDemu-kTkCQcybVhgO4gSzJQ@mail.gmail.com>
References: <CACSCokfDYPH-J3Mo7aut0tCzvFGUDUyycOiYv+LE6ypF9W2MPQ@mail.gmail.com>
 <0c672833-1660-cad0-b563-8a50893fbd13@gmail.com>
 <CACSCokeari0GJW0ys0ZV0NzBrcc-tZ9iKofZzzGSp9roHRPO+Q@mail.gmail.com>
 <977d7af6-909b-eab8-2757-77ec501691c0@gmail.com>
 <CACSCokdVitbh=ApXTt1+UDs_ujO_WgWA+fUSL8cNk6unFhkT2A@mail.gmail.com>
 <335cdf51-0015-26c2-11de-341f9fe88683@gmail.com>
 <CACSCokd3U0q8odFHzqHm76F5pSzDemu-kTkCQcybVhgO4gSzJQ@mail.gmail.com>
Message-ID: <56536744-db2d-82b9-1eca-0939a3e6d18a@statistik.tu-dortmund.de>



On 10.10.2019 15:41, Juhee Lee wrote:
> Then, is there no way I can fix it?

Well we do not see any problems, so pls resubmit and the CRAN team will 
tell you what problems are still apparent.
Best,
Uwe Ligges

> 
> Thank you.
> 
> Juhee Lee
> 
> 
> 2019? 10? 6? (?) ?? 8:57, Duncan Murdoch <murdoch.duncan at gmail.com>?? ??:
> 
>> On 06/10/2019 3:07 a.m., Juhee Lee wrote:
>>> I can see this result :
>>>
>>> * checking for file 'D:\Works\LAR\package\LARisk/DESCRIPTION' ... OK
>>> * preparing 'LARisk':
>>> * checking DESCRIPTION meta-information ... OK
>>> * cleaning src
>>> * installing the package to build vignettes
>>> * creating vignettes ... OK
>>> * compacting vignettes and other PDF files
>>> * cleaning src
>>> * checking for LF line-endings in source and make files and shell scripts
>>> * checking for empty or unneeded directories
>>> * building 'LARisk_0.1.1.tar.gz'
>>>
>>>
>>> Is this the thing you tell me?
>>
>> Yes, that looks fine.  If you are submitting the LARisk_0.1.1.tar.gz
>> file created by that sequence then I don't see why you would have gotten
>> the warning you did.
>>
>> Duncan Murdoch
>>
>>>
>>> Juhee Lee
>>>
>>> 2019? 10? 3? (?) ?? 11:44, Duncan Murdoch
>>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>?? ??:
>>>
>>>      On 03/10/2019 9:00 a.m., Juhee Lee wrote:
>>>       > Maybe "vignette.pdf" is rebuilt by R CMD build.
>>>
>>>      Can't you tell by looking at what is printed?  You should see
>>>
>>>      * installing the package to build vignettes
>>>      * creating vignettes ... OK
>>>
>>>      (You can save this output to a file by adding the option --log to
>> the R
>>>      CMD build call).
>>>
>>>      Duncan Murdoch
>>>
>>>       >
>>>       > Juhee Lee
>>>       >
>>>       > 2019? 10? 2? (?) ?? 10:09, Duncan Murdoch
>>>       > <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>>>      <mailto:murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>>
>>>      ?? ??:
>>>       >
>>>       >     On 02/10/2019 8:34 a.m., Juhee Lee wrote:
>>>       >      > Dear all.
>>>       >      >
>>>       >      > I checked my package on win-builder, and got this message:
>>>       >      >
>>>       >      > * checking sizes of PDF files under 'inst/doc' ... WARNING
>>>       >      >    'gs+qpdf' made some significant size reductions:
>>>       >      >       compacted 'vignette.pdf' from 541Kb to 234Kb
>>>       >      >    consider running tools::compactPDF(gs_quality =
>> "ebook") on
>>>       >     these files
>>>       >      >
>>>       >      >
>>>       >      > But, I run R CMD build --compact-vignettes="gs+qpdf", and
>>>       >      >
>>>       >      > I installed gs and qpdf on my system.
>>>       >      >
>>>       >      > How can I solve this problem?
>>>       >
>>>       >     Is vignette.pdf in inst/doc before calling R CMD build?  Is
>>>      it rebuilt
>>>       >     by R CMD build?
>>>       >
>>>       >     Duncan Murdoch
>>>       >
>>>       >      >
>>>       >      >
>>>       >      > Best regards
>>>       >      >
>>>       >      >
>>>       >      > Juhee Lee.
>>>       >      >
>>>       >      > ---------------------------------------
>>>       >      >
>>>       >      >> Sys.which(Sys.getenv("R_GSCMD"))
>>>       >      > C:\\Program Files\\gs\\gs9.27\\bin\\gswin64c.exe
>>>       >      >     "C:\\PROGRA~1\\gs\\gs9.27\\bin\\gswin64c.exe"
>>>       >      >> Sys.which(Sys.getenv("R_QPDF"))
>>>       >      > C:\\Program Files\\qpdf-9.0.1\\bin\\qpdf.exe
>>>       >      >     "C:\\PROGRA~1\\QPDF-9~1.1\\bin\\qpdf.exe"
>>>       >      >> sessionInfo()
>>>       >      > R version 3.6.1 (2019-07-05)
>>>       >      > Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>       >      > Running under: Windows 10 x64 (build 18362)
>>>       >      >
>>>       >      > Matrix products: default
>>>       >      >
>>>       >      > locale:
>>>       >      > [1] LC_COLLATE=Korean_Korea.949  LC_CTYPE=Korean_Korea.949
>>>       >      > LC_MONETARY=Korean_Korea.949
>>>       >      > [4] LC_NUMERIC=C                 LC_TIME=Korean_Korea.949
>>>       >      >
>>>       >      > attached base packages:
>>>       >      > [1] stats     graphics  grDevices utils     datasets
>>>      methods   base
>>>       >      >
>>>       >      > other attached packages:
>>>       >      > [1] LARisk_0.1.1
>>>       >      >
>>>       >      > loaded via a namespace (and not attached):
>>>       >      > [1] compiler_3.6.1 tools_3.6.1    Rcpp_1.0.2
>>>       >      >
>>>       >      >       [[alternative HTML version deleted]]
>>>       >      >
>>>       >      > ______________________________________________
>>>       >      > R-package-devel at r-project.org
>>>      <mailto:R-package-devel at r-project.org>
>>>       >     <mailto:R-package-devel at r-project.org
>>>      <mailto:R-package-devel at r-project.org>> mailing list
>>>       >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>       >      >
>>>       >
>>>
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From neon|r@ @end|ng |rom gm@||@com  Thu Oct 10 17:14:54 2019
From: neon|r@ @end|ng |rom gm@||@com (neonira Arinoem)
Date: Thu, 10 Oct 2019 17:14:54 +0200
Subject: [R-pkg-devel] Seeking for best way to manage package transitive
 dependencies
Message-ID: <CAN--Dz1wc+L4Ws+uc3gEQnbGJsTDFtHFLuUrb2dd_ziP-P9Xzg@mail.gmail.com>

Suppose package B imports package A and package A imports package C.

Shall package B import package C, knowing that package B will use functions
from package A that are using functions from package C ?


Currently, package B imports package C. This leads to a note from CRAN
stating

Namespace in Imports field not imported from: ?lubridate?
  All declared Imports should be used.

Doing so, I expect package B user not to worry about needed package B
dependencies.

 What is the best way to to manage package transitive dependencies, in such
a case ?

Neonira.

	[[alternative HTML version deleted]]


From c@c@voeten @end|ng |rom hum@|e|denun|v@n|  Thu Oct 10 17:28:10 2019
From: c@c@voeten @end|ng |rom hum@|e|denun|v@n| (Cesko Voeten)
Date: Thu, 10 Oct 2019 17:28:10 +0200
Subject: [R-pkg-devel] Seeking for best way to manage package transitive
 dependencies
In-Reply-To: <CAN--Dz1wc+L4Ws+uc3gEQnbGJsTDFtHFLuUrb2dd_ziP-P9Xzg@mail.gmail.com>
References: <CAN--Dz1wc+L4Ws+uc3gEQnbGJsTDFtHFLuUrb2dd_ziP-P9Xzg@mail.gmail.com>
Message-ID: <54395863-bb08-4736-d982-ebe0dd936db6@hum.leidenuniv.nl>

Package B should import only the packages and functions that are used by package B. If package B does not use functions from package C, package B should not import package C. What package A does is package A's problem, not package B's. If package A requires package C, install.packages() will automatically install it when package C is being installed, just as package C is installed when package B is being installed.

I submit the following thought experiment: suppose that, at a later point in time, package A is re-written to not need package C. In this case, it would be incorrect for package B to still needlessly import package C.

Best,
Cesko

Op 10-10-2019 om 17:14 schreef neonira Arinoem:
> Suppose package B imports package A and package A imports package C.
> 
> Shall package B import package C, knowing that package B will use functions
> from package A that are using functions from package C ?
> 
> 
> Currently, package B imports package C. This leads to a note from CRAN
> stating
> 
> Namespace in Imports field not imported from: ?lubridate?
>    All declared Imports should be used.
> 
> Doing so, I expect package B user not to worry about needed package B
> dependencies.
> 
>   What is the best way to to manage package transitive dependencies, in such
> a case ?
> 
> Neonira.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @|ex@ndre@court|o| @end|ng |rom gm@||@com  Thu Oct 10 18:09:08 2019
From: @|ex@ndre@court|o| @end|ng |rom gm@||@com (Alexandre Courtiol)
Date: Thu, 10 Oct 2019 18:09:08 +0200
Subject: [R-pkg-devel] Seeking for best way to manage package transitive
 dependencies
In-Reply-To: <54395863-bb08-4736-d982-ebe0dd936db6@hum.leidenuniv.nl>
References: <CAN--Dz1wc+L4Ws+uc3gEQnbGJsTDFtHFLuUrb2dd_ziP-P9Xzg@mail.gmail.com>
 <54395863-bb08-4736-d982-ebe0dd936db6@hum.leidenuniv.nl>
Message-ID: <CAERMt4fendg7F9EmWBkfeLrJVPxcRzvoZYWoi86Wzq5D6NVcvw@mail.gmail.com>

I agree in general, but don't think that the situation is always so
straightforward.
A good example of the complexity is the case of reexported functions:
functions from other packages aimed at being used by users without the need
to load them from their original package.
For a concrete example, let's take the pipe (%>%): the pipe comes
originally from {magrittr} but is reexported by many other packages (e.g.
{dplyr}).
So if your package relies on {dplyr} and reexport the pipe too, then one
could argue that you simply need to import {dplyr} and not {magrittr}.
I am not so sure I would agree with this (but my heart is not settled on
the matter) for 2 reasons:
- first, if you to reexport the pipe, your documentation would (I think)
link to a documentation linking to a documentation...
- second, you would not give credit to the {magrittr} developers (yes, in
part the same people in that case, but that is not the point).
Looking at what RSudio people chose to do in that precise example, it seems
that packages directly refer to {magrittr}.
I think that in the end it is a matter of weighing the pros and cons, and
that may depend on the case.
Re-exports may be a special case but giving credit to the right developers
may be worth thinking about whatever the situation.
++
Alex




On Thu, 10 Oct 2019 at 17:28, Cesko Voeten <c.c.voeten at hum.leidenuniv.nl>
wrote:

> Package B should import only the packages and functions that are used by
> package B. If package B does not use functions from package C, package B
> should not import package C. What package A does is package A's problem,
> not package B's. If package A requires package C, install.packages() will
> automatically install it when package C is being installed, just as package
> C is installed when package B is being installed.
>
> I submit the following thought experiment: suppose that, at a later point
> in time, package A is re-written to not need package C. In this case, it
> would be incorrect for package B to still needlessly import package C.
>
> Best,
> Cesko
>
> Op 10-10-2019 om 17:14 schreef neonira Arinoem:
> > Suppose package B imports package A and package A imports package C.
> >
> > Shall package B import package C, knowing that package B will use
> functions
> > from package A that are using functions from package C ?
> >
> >
> > Currently, package B imports package C. This leads to a note from CRAN
> > stating
> >
> > Namespace in Imports field not imported from: ?lubridate?
> >    All declared Imports should be used.
> >
> > Doing so, I expect package B user not to worry about needed package B
> > dependencies.
> >
> >   What is the best way to to manage package transitive dependencies, in
> such
> > a case ?
> >
> > Neonira.
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Oct 10 18:17:47 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 10 Oct 2019 09:17:47 -0700
Subject: [R-pkg-devel] Seeking for best way to manage package transitive
 dependencies
In-Reply-To: <CAERMt4fendg7F9EmWBkfeLrJVPxcRzvoZYWoi86Wzq5D6NVcvw@mail.gmail.com>
References: <CAN--Dz1wc+L4Ws+uc3gEQnbGJsTDFtHFLuUrb2dd_ziP-P9Xzg@mail.gmail.com>
 <54395863-bb08-4736-d982-ebe0dd936db6@hum.leidenuniv.nl>
 <CAERMt4fendg7F9EmWBkfeLrJVPxcRzvoZYWoi86Wzq5D6NVcvw@mail.gmail.com>
Message-ID: <EE97ACEF-969D-4DA3-A2D1-E17C61659E93@dcn.davis.ca.us>

Seems quite clear to me. If dplyr chooses to re-implement pipes (e.g. based on [1]) then you should not be importing from magrittr unless you had a specific reason to, and if you do then you should not make assumptions about where the dplyr pipe came from.

[1] https://github.com/moodymudskipper/fastpipe

On October 10, 2019 9:09:08 AM PDT, Alexandre Courtiol <alexandre.courtiol at gmail.com> wrote:
>I agree in general, but don't think that the situation is always so
>straightforward.
>A good example of the complexity is the case of reexported functions:
>functions from other packages aimed at being used by users without the
>need
>to load them from their original package.
>For a concrete example, let's take the pipe (%>%): the pipe comes
>originally from {magrittr} but is reexported by many other packages
>(e.g.
>{dplyr}).
>So if your package relies on {dplyr} and reexport the pipe too, then
>one
>could argue that you simply need to import {dplyr} and not {magrittr}.
>I am not so sure I would agree with this (but my heart is not settled
>on
>the matter) for 2 reasons:
>- first, if you to reexport the pipe, your documentation would (I
>think)
>link to a documentation linking to a documentation...
>- second, you would not give credit to the {magrittr} developers (yes,
>in
>part the same people in that case, but that is not the point).
>Looking at what RSudio people chose to do in that precise example, it
>seems
>that packages directly refer to {magrittr}.
>I think that in the end it is a matter of weighing the pros and cons,
>and
>that may depend on the case.
>Re-exports may be a special case but giving credit to the right
>developers
>may be worth thinking about whatever the situation.
>++
>Alex
>
>
>
>
>On Thu, 10 Oct 2019 at 17:28, Cesko Voeten
><c.c.voeten at hum.leidenuniv.nl>
>wrote:
>
>> Package B should import only the packages and functions that are used
>by
>> package B. If package B does not use functions from package C,
>package B
>> should not import package C. What package A does is package A's
>problem,
>> not package B's. If package A requires package C, install.packages()
>will
>> automatically install it when package C is being installed, just as
>package
>> C is installed when package B is being installed.
>>
>> I submit the following thought experiment: suppose that, at a later
>point
>> in time, package A is re-written to not need package C. In this case,
>it
>> would be incorrect for package B to still needlessly import package
>C.
>>
>> Best,
>> Cesko
>>
>> Op 10-10-2019 om 17:14 schreef neonira Arinoem:
>> > Suppose package B imports package A and package A imports package
>C.
>> >
>> > Shall package B import package C, knowing that package B will use
>> functions
>> > from package A that are using functions from package C ?
>> >
>> >
>> > Currently, package B imports package C. This leads to a note from
>CRAN
>> > stating
>> >
>> > Namespace in Imports field not imported from: ?lubridate?
>> >    All declared Imports should be used.
>> >
>> > Doing so, I expect package B user not to worry about needed package
>B
>> > dependencies.
>> >
>> >   What is the best way to to manage package transitive
>dependencies, in
>> such
>> > a case ?
>> >
>> > Neonira.
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>

-- 
Sent from my phone. Please excuse my brevity.


From j@me@@d@|g|e|@h @end|ng |rom n|h@gov  Sun Oct 13 07:00:26 2019
From: j@me@@d@|g|e|@h @end|ng |rom n|h@gov (Dalgleish, James (NIH/NCI) [V])
Date: Sun, 13 Oct 2019 05:00:26 +0000
Subject: [R-pkg-devel] Tarball can't be unpacked
Message-ID: <BL0PR0901MB3795F1EE4D838108EAE6CA20EE910@BL0PR0901MB3795.namprd09.prod.outlook.com>

* using log directory 'd:/RCompile/CRANincoming/R-devel/CNVScope.Rcheck'
* using R Under development (unstable) (2019-10-10 r77275)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking whether tarball can be unpacked ... ERROR
cannot unpack 'CNVScope_2.7.6.tar.gz'
* DONE
Status: 1 ERROR

I've submitted my package to win-builder, but just can't get it to check it. I've checked it locally and it passes with flying colors (no notes of any kind). I have used the package on my own machine to build from source. Is win-builder down? How can my tarball be broken? It works on my machine, so I can't imagine it's a broken tarball. Is there some compression flag I should change when building the package?

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Oct 14 11:00:09 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 14 Oct 2019 11:00:09 +0200
Subject: [R-pkg-devel] Tarball can't be unpacked
In-Reply-To: <BL0PR0901MB3795F1EE4D838108EAE6CA20EE910@BL0PR0901MB3795.namprd09.prod.outlook.com>
References: <BL0PR0901MB3795F1EE4D838108EAE6CA20EE910@BL0PR0901MB3795.namprd09.prod.outlook.com>
Message-ID: <2661da0d-e2eb-1f5e-4127-e534c711f1c7@statistik.tu-dortmund.de>

Please resubmit, we had a space problem oin the check machine.

Best,
Uwe Ligges

On 13.10.2019 07:00, Dalgleish, James (NIH/NCI) [V] via R-package-devel 
wrote:
> * using log directory 'd:/RCompile/CRANincoming/R-devel/CNVScope.Rcheck'
> * using R Under development (unstable) (2019-10-10 r77275)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * checking whether tarball can be unpacked ... ERROR
> cannot unpack 'CNVScope_2.7.6.tar.gz'
> * DONE
> Status: 1 ERROR
> 
> I've submitted my package to win-builder, but just can't get it to check it. I've checked it locally and it passes with flying colors (no notes of any kind). I have used the package on my own machine to build from source. Is win-builder down? How can my tarball be broken? It works on my machine, so I can't imagine it's a broken tarball. Is there some compression flag I should change when building the package?
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Mon Oct 14 16:26:08 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 14 Oct 2019 07:26:08 -0700
Subject: [R-pkg-devel] Tarball can't be unpacked
In-Reply-To: <2661da0d-e2eb-1f5e-4127-e534c711f1c7@statistik.tu-dortmund.de>
References: <BL0PR0901MB3795F1EE4D838108EAE6CA20EE910@BL0PR0901MB3795.namprd09.prod.outlook.com>
 <2661da0d-e2eb-1f5e-4127-e534c711f1c7@statistik.tu-dortmund.de>
Message-ID: <EEAA2DF8-6C21-4BBB-A815-99887EB8BB14@noaa.gov>

I am seeing the same problems still.  I am using devtools,  and am failing on the ftp,  with both win_release() and win_devel().

Thanks,

-Roy

> On Oct 14, 2019, at 2:00 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> Please resubmit, we had a space problem oin the check machine.
> 
> Best,
> Uwe Ligges
> 
> On 13.10.2019 07:00, Dalgleish, James (NIH/NCI) [V] via R-package-devel wrote:
>> * using log directory 'd:/RCompile/CRANincoming/R-devel/CNVScope.Rcheck'
>> * using R Under development (unstable) (2019-10-10 r77275)
>> * using platform: x86_64-w64-mingw32 (64-bit)
>> * using session charset: ISO8859-1
>> * checking whether tarball can be unpacked ... ERROR
>> cannot unpack 'CNVScope_2.7.6.tar.gz'
>> * DONE
>> Status: 1 ERROR
>> I've submitted my package to win-builder, but just can't get it to check it. I've checked it locally and it passes with flying colors (no notes of any kind). I have used the package on my own machine to build from source. Is win-builder down? How can my tarball be broken? It works on my machine, so I can't imagine it's a broken tarball. Is there some compression flag I should change when building the package?
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Oct 14 20:41:42 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 14 Oct 2019 14:41:42 -0400
Subject: [R-pkg-devel] Tarball can't be unpacked
In-Reply-To: <EEAA2DF8-6C21-4BBB-A815-99887EB8BB14@noaa.gov>
References: <BL0PR0901MB3795F1EE4D838108EAE6CA20EE910@BL0PR0901MB3795.namprd09.prod.outlook.com>
 <2661da0d-e2eb-1f5e-4127-e534c711f1c7@statistik.tu-dortmund.de>
 <EEAA2DF8-6C21-4BBB-A815-99887EB8BB14@noaa.gov>
Message-ID: <00cfe4a6-089d-8b0e-2da9-faf2a5e82635@gmail.com>

On 14/10/2019 10:26 a.m., Roy Mendelssohn - NOAA Federal via 
R-package-devel wrote:
> I am seeing the same problems still.  I am using devtools,  and am failing on the ftp,  with both win_release() and win_devel().

Have you tried submitting using the instructions on the CRAN page 
https://cloud.r-project.org/web/packages/policies.html?  It's possible 
that devtools is sending your file to the wrong place.

Duncan Murdoch

> 
> Thanks,
> 
> -Roy
> 
>> On Oct 14, 2019, at 2:00 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>> Please resubmit, we had a space problem oin the check machine.
>>
>> Best,
>> Uwe Ligges
>>
>> On 13.10.2019 07:00, Dalgleish, James (NIH/NCI) [V] via R-package-devel wrote:
>>> * using log directory 'd:/RCompile/CRANincoming/R-devel/CNVScope.Rcheck'
>>> * using R Under development (unstable) (2019-10-10 r77275)
>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>> * using session charset: ISO8859-1
>>> * checking whether tarball can be unpacked ... ERROR
>>> cannot unpack 'CNVScope_2.7.6.tar.gz'
>>> * DONE
>>> Status: 1 ERROR
>>> I've submitted my package to win-builder, but just can't get it to check it. I've checked it locally and it passes with flying colors (no notes of any kind). I have used the package on my own machine to build from source. Is win-builder down? How can my tarball be broken? It works on my machine, so I can't imagine it's a broken tarball. Is there some compression flag I should change when building the package?
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Mon Oct 14 20:43:51 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 14 Oct 2019 11:43:51 -0700
Subject: [R-pkg-devel] Tarball can't be unpacked
In-Reply-To: <00cfe4a6-089d-8b0e-2da9-faf2a5e82635@gmail.com>
References: <BL0PR0901MB3795F1EE4D838108EAE6CA20EE910@BL0PR0901MB3795.namprd09.prod.outlook.com>
 <2661da0d-e2eb-1f5e-4127-e534c711f1c7@statistik.tu-dortmund.de>
 <EEAA2DF8-6C21-4BBB-A815-99887EB8BB14@noaa.gov>
 <00cfe4a6-089d-8b0e-2da9-faf2a5e82635@gmail.com>
Message-ID: <A3387B81-0569-4226-923D-CE5E66B08095@noaa.gov>

I have tried the upload page several times.  it gives the following error

ERROR: Access to the path 'C:\Inetpub\ftproot\R-release\plotdap_0.0.4.tar.gz' is denied.

Same for R-devel. Permission problems?

Thanks,

-Roy


> On Oct 14, 2019, at 11:41 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 14/10/2019 10:26 a.m., Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>> I am seeing the same problems still.  I am using devtools,  and am failing on the ftp,  with both win_release() and win_devel().
> 
> Have you tried submitting using the instructions on the CRAN page https://cloud.r-project.org/web/packages/policies.html?  It's possible that devtools is sending your file to the wrong place.
> 
> Duncan Murdoch
> 
>> Thanks,
>> -Roy
>>> On Oct 14, 2019, at 2:00 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>> 
>>> Please resubmit, we had a space problem oin the check machine.
>>> 
>>> Best,
>>> Uwe Ligges
>>> 
>>> On 13.10.2019 07:00, Dalgleish, James (NIH/NCI) [V] via R-package-devel wrote:
>>>> * using log directory 'd:/RCompile/CRANincoming/R-devel/CNVScope.Rcheck'
>>>> * using R Under development (unstable) (2019-10-10 r77275)
>>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>>> * using session charset: ISO8859-1
>>>> * checking whether tarball can be unpacked ... ERROR
>>>> cannot unpack 'CNVScope_2.7.6.tar.gz'
>>>> * DONE
>>>> Status: 1 ERROR
>>>> I've submitted my package to win-builder, but just can't get it to check it. I've checked it locally and it passes with flying colors (no notes of any kind). I have used the package on my own machine to build from source. Is win-builder down? How can my tarball be broken? It works on my machine, so I can't imagine it's a broken tarball. Is there some compression flag I should change when building the package?
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>> 
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Oct 14 21:26:13 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 14 Oct 2019 21:26:13 +0200
Subject: [R-pkg-devel] Tarball can't be unpacked
In-Reply-To: <A3387B81-0569-4226-923D-CE5E66B08095@noaa.gov>
References: <BL0PR0901MB3795F1EE4D838108EAE6CA20EE910@BL0PR0901MB3795.namprd09.prod.outlook.com>
 <2661da0d-e2eb-1f5e-4127-e534c711f1c7@statistik.tu-dortmund.de>
 <EEAA2DF8-6C21-4BBB-A815-99887EB8BB14@noaa.gov>
 <00cfe4a6-089d-8b0e-2da9-faf2a5e82635@gmail.com>
 <A3387B81-0569-4226-923D-CE5E66B08095@noaa.gov>
Message-ID: <ad0c1f2c-ebda-863c-a750-99ad729cf819@statistik.tu-dortmund.de>



On 14.10.2019 20:43, Roy Mendelssohn - NOAA Federal wrote:
> I have tried the upload page several times.  it gives the following error
> 
> ERROR: Access to the path 'C:\Inetpub\ftproot\R-release\plotdap_0.0.4.tar.gz' is denied.

Ah, reason is that there is already a version that you uploaded before. 
Nobody reported this so far. Apparently my cron service died and no on 
demand checks have been performed since saturday.
I restarted cron now, but it will take a while to process the queues.


Best,
Uwe Ligges



> Same for R-devel. Permission problems?
> 
> Thanks,
> 
> -Roy
> 
> 
>> On Oct 14, 2019, at 11:41 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 14/10/2019 10:26 a.m., Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>>> I am seeing the same problems still.  I am using devtools,  and am failing on the ftp,  with both win_release() and win_devel().
>>
>> Have you tried submitting using the instructions on the CRAN page https://cloud.r-project.org/web/packages/policies.html?  It's possible that devtools is sending your file to the wrong place.
>>
>> Duncan Murdoch
>>
>>> Thanks,
>>> -Roy
>>>> On Oct 14, 2019, at 2:00 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>>>
>>>> Please resubmit, we had a space problem oin the check machine.
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>> On 13.10.2019 07:00, Dalgleish, James (NIH/NCI) [V] via R-package-devel wrote:
>>>>> * using log directory 'd:/RCompile/CRANincoming/R-devel/CNVScope.Rcheck'
>>>>> * using R Under development (unstable) (2019-10-10 r77275)
>>>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>>>> * using session charset: ISO8859-1
>>>>> * checking whether tarball can be unpacked ... ERROR
>>>>> cannot unpack 'CNVScope_2.7.6.tar.gz'
>>>>> * DONE
>>>>> Status: 1 ERROR
>>>>> I've submitted my package to win-builder, but just can't get it to check it. I've checked it locally and it passes with flying colors (no notes of any kind). I have used the package on my own machine to build from source. Is win-builder down? How can my tarball be broken? It works on my machine, so I can't imagine it's a broken tarball. Is there some compression flag I should change when building the package?
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected"
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Mon Oct 14 21:32:39 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 14 Oct 2019 12:32:39 -0700
Subject: [R-pkg-devel] Tarball can't be unpacked
In-Reply-To: <ad0c1f2c-ebda-863c-a750-99ad729cf819@statistik.tu-dortmund.de>
References: <BL0PR0901MB3795F1EE4D838108EAE6CA20EE910@BL0PR0901MB3795.namprd09.prod.outlook.com>
 <2661da0d-e2eb-1f5e-4127-e534c711f1c7@statistik.tu-dortmund.de>
 <EEAA2DF8-6C21-4BBB-A815-99887EB8BB14@noaa.gov>
 <00cfe4a6-089d-8b0e-2da9-faf2a5e82635@gmail.com>
 <A3387B81-0569-4226-923D-CE5E66B08095@noaa.gov>
 <ad0c1f2c-ebda-863c-a750-99ad729cf819@statistik.tu-dortmund.de>
Message-ID: <009DD4BF-7AB1-4784-8445-3DCACA5A99B2@noaa.gov>

Thanks!

Yes,  have had to do more than one download because unfortunately was still getting Notes,  which based on rHub I think I have cleared up.  But I find I don't always get the same results from win-builder as rHub  (the former closer to what I get from CRAN submission).  And just for the record,  and I have previously reported this directly to rHub,  many of the rHub Linux machines can not properly build and load any package using rgdal-rgeos, because they can't properly access the underlying libraries.

-Roy


> On Oct 14, 2019, at 12:26 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 14.10.2019 20:43, Roy Mendelssohn - NOAA Federal wrote:
>> I have tried the upload page several times.  it gives the following error
>> ERROR: Access to the path 'C:\Inetpub\ftproot\R-release\plotdap_0.0.4.tar.gz' is denied.
> 
> Ah, reason is that there is already a version that you uploaded before. Nobody reported this so far. Apparently my cron service died and no on demand checks have been performed since saturday.
> I restarted cron now, but it will take a while to process the queues.
> 
> 
> Best,
> Uwe Ligges
> 
> 
> 
>> Same for R-devel. Permission problems?
>> Thanks,
>> -Roy
>>> On Oct 14, 2019, at 11:41 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> 
>>> On 14/10/2019 10:26 a.m., Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>>>> I am seeing the same problems still.  I am using devtools,  and am failing on the ftp,  with both win_release() and win_devel().
>>> 
>>> Have you tried submitting using the instructions on the CRAN page https://cloud.r-project.org/web/packages/policies.html?  It's possible that devtools is sending your file to the wrong place.
>>> 
>>> Duncan Murdoch
>>> 
>>>> Thanks,
>>>> -Roy
>>>>> On Oct 14, 2019, at 2:00 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>>>> 
>>>>> Please resubmit, we had a space problem oin the check machine.
>>>>> 
>>>>> Best,
>>>>> Uwe Ligges
>>>>> 
>>>>> On 13.10.2019 07:00, Dalgleish, James (NIH/NCI) [V] via R-package-devel wrote:
>>>>>> * using log directory 'd:/RCompile/CRANincoming/R-devel/CNVScope.Rcheck'
>>>>>> * using R Under development (unstable) (2019-10-10 r77275)
>>>>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>>>>> * using session charset: ISO8859-1
>>>>>> * checking whether tarball can be unpacked ... ERROR
>>>>>> cannot unpack 'CNVScope_2.7.6.tar.gz'
>>>>>> * DONE
>>>>>> Status: 1 ERROR
>>>>>> I've submitted my package to win-builder, but just can't get it to check it. I've checked it locally and it passes with flying colors (no notes of any kind). I have used the package on my own machine to build from source. Is win-builder down? How can my tarball be broken? It works on my machine, so I can't imagine it's a broken tarball. Is there some compression flag I should change when building the package?
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>> 
>>>>> 
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>> **********************
>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>> **********************
>>>> Roy Mendelssohn
>>>> Supervisory Operations Research Analyst
>>>> NOAA/NMFS
>>>> Environmental Research Division
>>>> Southwest Fisheries Science Center
>>>> ***Note new street address***
>>>> 110 McAllister Way
>>>> Santa Cruz, CA 95060
>>>> Phone: (831)-420-3666
>>>> Fax: (831) 420-3980
>>>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>>>> "Old age and treachery will overcome youth and skill."
>>>> "From those who have been given much, much will be expected"
>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From j@me@@d@|g|e|@h @end|ng |rom n|h@gov  Tue Oct 15 18:46:19 2019
From: j@me@@d@|g|e|@h @end|ng |rom n|h@gov (Dalgleish, James (NIH/NCI) [V])
Date: Tue, 15 Oct 2019 16:46:19 +0000
Subject: [R-pkg-devel] Solaris package installed size
Message-ID: <BL0PR0901MB379593773253B025630CB95BEE930@BL0PR0901MB3795.namprd09.prod.outlook.com>

On Solaris, I'm finding that my package, only on Solaris, is slightly above 5MB. Is there a difference in install sizes for Solaris? I don't have a Solaris machine, so it's difficult to know what the size differences are and why.
https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/CNVScope-00check.html
"checking installed package size ... NOTE
  installed size is 5.2Mb
  sub-directories of 1Mb or more:
    doc 3.1Mb
    extdata 1.8Mb"

If so, why might that be?
I've looked at R solaris documentation (https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Solaris), but it says nothing other than suggesting that it will require more stack space (memory) to build the package... but this doesn't say anything about disk space or installation directory cleanup differences.

"At least when compiling with Oracle compilers, Solaris uses far more stack space than other platforms."  Perhaps there are additional files that are generated for Solaris that are not generated for other platforms?

Thanks,
James Dalgleish

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Oct 15 18:49:13 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 15 Oct 2019 18:49:13 +0200
Subject: [R-pkg-devel] Solaris package installed size
In-Reply-To: <BL0PR0901MB379593773253B025630CB95BEE930@BL0PR0901MB3795.namprd09.prod.outlook.com>
References: <BL0PR0901MB379593773253B025630CB95BEE930@BL0PR0901MB3795.namprd09.prod.outlook.com>
Message-ID: <ed25b21b-7917-6365-df3b-8711a57c653f@statistik.tu-dortmund.de>

Well, binaries may well have different sizes on different platforms, 
aslo when statically linkd vs dynamically linked etc.
In this case, you should not worry.

Best,
Uwe Ligges


On 15.10.2019 18:46, Dalgleish, James (NIH/NCI) [V] via R-package-devel 
wrote:
> On Solaris, I'm finding that my package, only on Solaris, is slightly above 5MB. Is there a difference in install sizes for Solaris? I don't have a Solaris machine, so it's difficult to know what the size differences are and why.
> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/CNVScope-00check.html
> "checking installed package size ... NOTE
>    installed size is 5.2Mb
>    sub-directories of 1Mb or more:
>      doc 3.1Mb
>      extdata 1.8Mb"
> 
> If so, why might that be?
> I've looked at R solaris documentation (https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Solaris), but it says nothing other than suggesting that it will require more stack space (memory) to build the package... but this doesn't say anything about disk space or installation directory cleanup differences.
> 
> "At least when compiling with Oracle compilers, Solaris uses far more stack space than other platforms."  Perhaps there are additional files that are generated for Solaris that are not generated for other platforms?
> 
> Thanks,
> James Dalgleish
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From md @end|ng |rom @und@ku@dk  Wed Oct 16 13:04:41 2019
From: md @end|ng |rom @und@ku@dk (Matt Denwood)
Date: Wed, 16 Oct 2019 11:04:41 +0000
Subject: [R-pkg-devel] Copyright of code "borrowed" from the stats package
Message-ID: <5B8EBBB1-FFB8-4B86-83BA-DF7121ADD801@sund.ku.dk>

I needed a basic optimisation routine in some C-level code within an R package I am developing, and the Brent_fmin function from R/src/library/stats/src/optimize.c was a good starting point for me to modify.  The original file contains:

	/*
	 *  R : A Computer Language for Statistical Data Analysis
	 *  Copyright (C) 1995, 1996  Robert Gentleman and Ross Ihaka
	 *  Copyright (C) 2003-2004  The R Foundation
	 *  Copyright (C) 1998--2014  The R Core Team
	 *
	 *  This program is free software; you can redistribute it and/or modify
	 *  it under the terms of the GNU General Public License as published by
	 *  the Free Software Foundation; either version 2 of the License, or
	 *  (at your option) any later version.
	 *
	<SNIP>

	/* Formerly in src/appl/fmim.c */
	/* fmin.f -- translated by f2c (version 19990503).*/
	/* R's  optimize() :   function	fmin(ax,bx,f,tol)
	   =    ==========		~~~~~~~~~~~~~~~~~

	<SNIP>

	        This function subprogram is a slightly modified  version  of  the
	    Algol  60 procedure  localmin  given in Richard Brent, Algorithms for
	    Minimization without Derivatives, Prentice-Hall, Inc. (1973).
	*/

	static
	double Brent_fmin(double ax, double bx, double (*f)(double, void *),
			  void *info, double tol)

I just use this Brent_fmin function within my package - nothing else from stats.  Obviously I want to make sure that my package attributes copyright correctly, which I do by licensing my package as GPL-3, and retaining the preamble from stat?s optimize.c along with a more detailed description of where it came from and what has been modified.  I will also include in my DESCRIPTION file:

	author(given=??, family=??, role=?cph?, comment="Original copyright holder of the code in /src/optimize.cc?)

But which of the following is the actual copyright holder:

	a)  Richard Brent
	b)  Robert Gentleman and Ross Ihaka
	c)  The R Foundation
	d)  R Core Team
	e)  All (or some other combination) of the above

I am leaning towards just (d) as the author/copyright holder of the stats package, but am not sure if it should (also?) be (a)?  I would appreciate any opinions on this.

Thanks in advance,

Matt


-----

Matthew Denwood
Associate Professor in Quantitative Veterinary Epidemiology and Biostatistics
Faculty of Health and Medical Sciences
University of Copenhagen


From b@yzb @end|ng |rom hotm@||@com  Wed Oct 16 20:21:12 2019
From: b@yzb @end|ng |rom hotm@||@com (=?utf-8?B?QmFoYWTEsXIgWcOcWkJBxZ5J?=)
Date: Wed, 16 Oct 2019 18:21:12 +0000
Subject: [R-pkg-devel] Please help
Message-ID: <AM6PR09MB2568027442C1E29D5A884863E2920@AM6PR09MB2568.eurprd09.prod.outlook.com>

Hi,

I am getting the following error. I could not figure it out since this is my first package. Would you mind if one helps me?

package rbridge_1.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/rbridge_1.0.0_20191016_162205/Windows/00check.log>
Status: 2 NOTEs
Debian: <https://win-builder.r-project.org/incoming_pretest/rbridge_1.0.0_20191016_162205/Debian/00check.log>
Status: 1 ERROR, 1 NOTE

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/rbridge_1.0.0_20191016_162205/>

Best



?????????????????????????
Assoc. Prof. Bahadir Yuzbasi, PhD
Department of Econometrics, Faculty of Economics and Administrative Sciences
Inonu University, Malatya, Turkey

http://inonu.edu.tr/en/bahadir.yuzbasi


	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Wed Oct 16 21:12:52 2019
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Wed, 16 Oct 2019 19:12:52 +0000
Subject: [R-pkg-devel] Please help
In-Reply-To: <AM6PR09MB2568027442C1E29D5A884863E2920@AM6PR09MB2568.eurprd09.prod.outlook.com>
References: <AM6PR09MB2568027442C1E29D5A884863E2920@AM6PR09MB2568.eurprd09.prod.outlook.com>
Message-ID: <42753a3fd53e40a4a6e3dd1a369410a5@umanitoba.ca>

Hi Bahadir,


The issue seems to be your Makevars/Makevars.win files. The error message "undefined symbol: dpotrf_" suggests that you may not be properly linking with Lapack. Incidentally, one of the NOTEs you get on Windows is also related to a potential issue with Makevars.win (the other NOTE can be ignored).


It may help to look at what other packages linking to RcppArmadillo have done and try to reproduce it/adapt it to your setting.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Bahad?r Y?ZBA?I <b.yzb at hotmail.com>
Sent: October 16, 2019 1:21:12 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Please help

Hi,

I am getting the following error. I could not figure it out since this is my first package. Would you mind if one helps me?

package rbridge_1.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/rbridge_1.0.0_20191016_162205/Windows/00check.log>
Status: 2 NOTEs
Debian: <https://win-builder.r-project.org/incoming_pretest/rbridge_1.0.0_20191016_162205/Debian/00check.log>
Status: 1 ERROR, 1 NOTE

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/rbridge_1.0.0_20191016_162205/>

Best



?????????????????????????
Assoc. Prof. Bahadir Yuzbasi, PhD
Department of Econometrics, Faculty of Economics and Administrative Sciences
Inonu University, Malatya, Turkey

http://inonu.edu.tr/en/bahadir.yuzbasi


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Wed Oct 16 21:33:10 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 16 Oct 2019 14:33:10 -0500
Subject: [R-pkg-devel] Please help
In-Reply-To: <42753a3fd53e40a4a6e3dd1a369410a5@umanitoba.ca>
References: <AM6PR09MB2568027442C1E29D5A884863E2920@AM6PR09MB2568.eurprd09.prod.outlook.com>
 <42753a3fd53e40a4a6e3dd1a369410a5@umanitoba.ca>
Message-ID: <23975.28790.894808.538880@rob.eddelbuettel.com>


Bahadir,

On 16 October 2019 at 19:12, Max Turgeon wrote:
| It may help to look at what other packages linking to RcppArmadillo have done and try to reproduce it/adapt it to your setting.

Packages using the package generator RcppArmadillo.package.skeleton() get
these two templates via the skeleton/ directory of the installed package:

  https://github.com/RcppCore/RcppArmadillo/blob/master/inst/skeleton/Makevars
  https://github.com/RcppCore/RcppArmadillo/blob/master/inst/skeleton/Makevars.win

They haven't changed in years, but are needed as Max correctly identified.

Best,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tdhock5 @end|ng |rom gm@||@com  Wed Oct 16 21:50:20 2019
From: tdhock5 @end|ng |rom gm@||@com (Toby Hocking)
Date: Wed, 16 Oct 2019 12:50:20 -0700
Subject: [R-pkg-devel] unicode WARNING on solaris?
In-Reply-To: <15a3fc5e-8cb5-7a44-9fb6-1d99ba06c0cb@gmail.com>
References: <CALK03d2u57jz2FgTmW_=poVy27rYXKFxQXa2ssp+e5QSdYwZoQ@mail.gmail.com>
 <a95fe0a8-24bc-7575-ddfa-0604bad8261b@gmail.com>
 <CALK03d1w4YgghRzJF=OSVCDWVnSfi8gdr7VyeF=O9b2gAACumA@mail.gmail.com>
 <15a3fc5e-8cb5-7a44-9fb6-1d99ba06c0cb@gmail.com>
Message-ID: <CALK03d2FU0HFaGGZ+skuz7+dzQJwizrKLoMzRbh7EKNDqRYEfA@mail.gmail.com>

Right, thanks for the tip.

For future reference: if you want to avoid this warning, but still use
examples with unicode, you can put the unicode text data in
inst/extdata/file_with_unicode.txt and then in your example code you can
read it via

readLines(system.file("extdata", "file_with_unicode.txt",
package="yourPkg"))

On Wed, Sep 25, 2019 at 11:45 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> On 9/25/19 7:59 PM, Toby Hocking wrote:
>
> Hi Tomas thanks for the explanation. Does that mean that there is no known
> fix? i.e. it is OK to re-submit a new version of my package without fixing
> these WARNINGS?
>
> One way to fix would be to remove non-ASCII characters from the examples.
> I see \u4e8c \u4e09 \U0001F60E.
> Tomas
>
>
> On Tue, Sep 24, 2019 at 1:38 AM Tomas Kalibera <tomas.kalibera at gmail.com>
> wrote:
>
>> On 9/24/19 1:57 AM, Toby Hocking wrote:
>> > Hi all,
>> >
>> > is there a known fix for this WARNING which I am getting on solaris for
>> my
>> > newly submitted nc package?
>> >
>> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/nc-00check.html
>>
>> It seems that deparse() came across some non-printable characters. Such
>> characters would be replaced by \U or \u escapes. This is implemented
>> using wide characters in R, but on that platform __STDC_ISO_10646__ is
>> not defined, so wchar_t has unknown representation (not known to be
>> Unicode), hence the warning.
>>
>> Best
>> Tomas
>>
>> >
>> > A quick google search for "it is not known that wchar_t is Unicode on
>> this
>> > platform cran" shows that many other packages have this WARNING as well.
>> >
>> > I searched r-devel and r-pkg-devel for the warning text but I did not
>> find
>> > any messages discussing a fix.
>> >
>> > Thanks for any help
>> > Toby
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>>
>

	[[alternative HTML version deleted]]


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Thu Oct 17 14:29:54 2019
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Thu, 17 Oct 2019 14:29:54 +0200
Subject: [R-pkg-devel] R package which creates a directory in the user home
 dir
Message-ID: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>

Hi,

I'am developing a package that circumvents the R package size limitation 
for data sets. For this I store the data set in the internet (currently 
GitHub) and download if it is requested.

To avoid unnecessary downloads and internet connections I create a 
directory in the users home directory to store the data there. However, 
this violates the "CRAN Repository Policy" which says

- Packages should not write in the user?s home filespace (including 
clipboards), nor anywhere else on the file system apart from the R 
session?s temporary directory (or during installation in the location 
pointed to by TMPDIR: and such usage should be cleaned up).

Do I have any chance to get the package to CRAN, if I submit it?

Best Sigbert

-- 
https://hu.berlin/sk
https://hu.berlin/mmstat3


From br|@n @end|ng |rom br@verock@com  Thu Oct 17 14:34:15 2019
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Thu, 17 Oct 2019 07:34:15 -0500
Subject: [R-pkg-devel] 
 R package which creates a directory in the user home dir
In-Reply-To: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>
References: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>
Message-ID: <8de654596d620af2d15b415f9813be0d411f83f4.camel@braverock.com>

On Thu, 2019-10-17 at 14:29 +0200, Sigbert Klinke wrote:
> Hi,
> 
> I'am developing a package that circumvents the R package size
> limitation 
> for data sets. For this I store the data set in the internet
> (currently 
> GitHub) and download if it is requested.
> 
> To avoid unnecessary downloads and internet connections I create a 
> directory in the users home directory to store the data there.
> However, 
> this violates the "CRAN Repository Policy" which says
> 
> - Packages should not write in the user?s home filespace (including 
> clipboards), nor anywhere else on the file system apart from the R 
> session?s temporary directory (or during installation in the
> location 
> pointed to by TMPDIR: and such usage should be cleaned up).
> 
> Do I have any chance to get the package to CRAN, if I submit it?

To be sure, you'd need to ask the CRAN staff, but probably not.

You could probably add an option that defaults to FALSE to persist the
data.  Then wrap that in a check.  if persist=TRUE, check to see if the
file exists.  if it exists in the subdirectory of the working
directory, then load it.  otherwise create the subdirectory of the
current working directory, load from the internet, and save the data
locally.

In this way you've had the user explicitly direct the function to save
data to disk, which is (usually) OK.

Regards,

Brian


-- 
Brian G. Peterson
ph: +1.773.459.4973
im: bgpbraverock


From e@ @end|ng |rom enr|co@chum@nn@net  Thu Oct 17 14:35:43 2019
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Thu, 17 Oct 2019 14:35:43 +0200
Subject: [R-pkg-devel] 
 R package which creates a directory in the user home dir
In-Reply-To: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>
Message-ID: <20191017143543.Horde.CZO4us3gjVdVsNJiugq4w_Z@webmail.your-server.de>


Quoting Sigbert Klinke <sigbert at wiwi.hu-berlin.de>:

> Hi,
>
> I'am developing a package that circumvents the R package size  
> limitation for data sets. For this I store the data set in the  
> internet (currently GitHub) and download if it is requested.
>
> To avoid unnecessary downloads and internet connections I create a  
> directory in the users home directory to store the data there.  
> However, this violates the "CRAN Repository Policy" which says
>
> - Packages should not write in the user?s home filespace (including  
> clipboards), nor anywhere else on the file system apart from the R  
> session?s temporary directory (or during installation in the  
> location pointed to by TMPDIR: and such usage should be cleaned up).
>
> Do I have any chance to get the package to CRAN, if I submit it?
>
> Best Sigbert
>
> -- 
> https://hu.berlin/sk
> https://hu.berlin/mmstat3
>

Hi Sigbert,

there are many packages on CRAN that download data from somewhere
for their users.  They simply ask the user (or rather let the
user specify) if and where to store the data.

kind regards
     Enrico

-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Oct 17 14:44:26 2019
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 17 Oct 2019 14:44:26 +0200
Subject: [R-pkg-devel] 
 R package which creates a directory in the user home dir
In-Reply-To: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>
References: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>
Message-ID: <23976.25130.804458.111342@stat.math.ethz.ch>

>>>>> Sigbert Klinke 
>>>>>     on Thu, 17 Oct 2019 14:29:54 +0200 writes:

    > Hi,
    > I'am developing a package that circumvents the R package size limitation 
    > for data sets. For this I store the data set in the internet (currently 
    > GitHub) and download if it is requested.

    > To avoid unnecessary downloads and internet connections I create a 
    > directory in the users home directory to store the data there. However, 
    > this violates the "CRAN Repository Policy" which says

    > - Packages should not write in the user?s home filespace (including 
    > clipboards), nor anywhere else on the file system apart from the R 
    > session?s temporary directory (or during installation in the location 
    > pointed to by TMPDIR: and such usage should be cleaned up).

    > Do I have any chance to get the package to CRAN, if I submit it?

    > Best Sigbert

    > https://hu.berlin/sk
    > https://hu.berlin/mmstat3


I you *prompt* the user about writing, i.e., ask them explicitly
if <directory> is fine and only if "yes", you write there,
otherwise try to write to tempdir()  then your package is fine,
otherwise it is not, i.e,
"not okay" according to many, even if *not* on CRAN..

Best,
Martin


From |uc@r @end|ng |rom |edor@project@org  Thu Oct 17 14:49:51 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 17 Oct 2019 14:49:51 +0200
Subject: [R-pkg-devel] 
 R package which creates a directory in the user home dir
In-Reply-To: <23976.25130.804458.111342@stat.math.ethz.ch>
References: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>
 <23976.25130.804458.111342@stat.math.ethz.ch>
Message-ID: <CALEXWq0wr5zH6tpAmL54nsYPdXk=CkGNunAOz=9ayPNOK9Eykg@mail.gmail.com>

And if the user hits "yes", the package rappdirs may be useful to get
an appropriate place to save that data.

I?aki

On Thu, 17 Oct 2019 at 14:45, Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>
> >>>>> Sigbert Klinke
> >>>>>     on Thu, 17 Oct 2019 14:29:54 +0200 writes:
>
>     > Hi,
>     > I'am developing a package that circumvents the R package size limitation
>     > for data sets. For this I store the data set in the internet (currently
>     > GitHub) and download if it is requested.
>
>     > To avoid unnecessary downloads and internet connections I create a
>     > directory in the users home directory to store the data there. However,
>     > this violates the "CRAN Repository Policy" which says
>
>     > - Packages should not write in the user?s home filespace (including
>     > clipboards), nor anywhere else on the file system apart from the R
>     > session?s temporary directory (or during installation in the location
>     > pointed to by TMPDIR: and such usage should be cleaned up).
>
>     > Do I have any chance to get the package to CRAN, if I submit it?
>
>     > Best Sigbert
>
>     > https://hu.berlin/sk
>     > https://hu.berlin/mmstat3
>
>
> I you *prompt* the user about writing, i.e., ask them explicitly
> if <directory> is fine and only if "yes", you write there,
> otherwise try to write to tempdir()  then your package is fine,
> otherwise it is not, i.e,
> "not okay" according to many, even if *not* on CRAN..
>
> Best,
> Martin
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From hongoo| @end|ng |rom m|cro@o|t@com  Thu Oct 17 15:11:34 2019
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Thu, 17 Oct 2019 13:11:34 +0000
Subject: [R-pkg-devel] 
 R package which creates a directory in the user home dir
In-Reply-To: <23976.25130.804458.111342@stat.math.ethz.ch>
References: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>
 <23976.25130.804458.111342@stat.math.ethz.ch>
Message-ID: <KL1P15301MB0055A1173F5A22BF332D80B3A66D0@KL1P15301MB0055.APCP153.PROD.OUTLOOK.COM>

Also, consider using the rappdirs package to write to a location that follows standard practice on each platform.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Martin Maechler
Sent: Thursday, 17 October 2019 11:44 PM
To: Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R package which creates a directory in the user home dir

>>>>> Sigbert Klinke 
>>>>>     on Thu, 17 Oct 2019 14:29:54 +0200 writes:

    > Hi,
    > I'am developing a package that circumvents the R package size limitation 
    > for data sets. For this I store the data set in the internet (currently 
    > GitHub) and download if it is requested.

    > To avoid unnecessary downloads and internet connections I create a 
    > directory in the users home directory to store the data there. However, 
    > this violates the "CRAN Repository Policy" which says

    > - Packages should not write in the user?s home filespace (including 
    > clipboards), nor anywhere else on the file system apart from the R 
    > session?s temporary directory (or during installation in the location 
    > pointed to by TMPDIR: and such usage should be cleaned up).

    > Do I have any chance to get the package to CRAN, if I submit it?

    > Best Sigbert

    > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fhu.berlin%2Fsk&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cb0df7ca628c34c80856d08d752ffd245%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637069131007127544&amp;sdata=1AVL8mEcu40nIo5XsWpAMooftEGX8V4W5armhNaFsGM%3D&amp;reserved=0
    > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fhu.berlin%2Fmmstat3&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cb0df7ca628c34c80856d08d752ffd245%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637069131007127544&amp;sdata=sUfd89zI27LMfqUps7Hfhv%2BCvreUX4ZQJhTW1%2FGkcaY%3D&amp;reserved=0


I you *prompt* the user about writing, i.e., ask them explicitly if <directory> is fine and only if "yes", you write there, otherwise try to write to tempdir()  then your package is fine, otherwise it is not, i.e, "not okay" according to many, even if *not* on CRAN..

Best,
Martin

______________________________________________
R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cb0df7ca628c34c80856d08d752ffd245%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637069131007127544&amp;sdata=UwCk8xz15BVi1OCwKpyZ7usO4nYnT4KtCZm7bHEP9Kc%3D&amp;reserved=0

From edd @end|ng |rom deb|@n@org  Thu Oct 17 16:31:20 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 17 Oct 2019 09:31:20 -0500
Subject: [R-pkg-devel] 
 R package which creates a directory in the user home dir
In-Reply-To: <KL1P15301MB0055A1173F5A22BF332D80B3A66D0@KL1P15301MB0055.APCP153.PROD.OUTLOOK.COM>
References: <04d1ee97-fd61-ada2-a8f0-49c388c50189@wiwi.hu-berlin.de>
 <23976.25130.804458.111342@stat.math.ethz.ch>
 <KL1P15301MB0055A1173F5A22BF332D80B3A66D0@KL1P15301MB0055.APCP153.PROD.OUTLOOK.COM>
Message-ID: <23976.31544.243076.219288@rob.eddelbuettel.com>


Sigbert,

One approach you could consider is to _package_ the data in a (standard R)
package upon which you can have a Suggests: relationship using a
Additional_repositories: entry in DESCRIPTION.  That is fully compliant and
compatible with the CRAN Policy, and has been done before -- in fact there is
a detailed writeup for just this case ("additional data packages") here in
the 9:1 issue of the R Journal.

   https://journal.r-project.org/archive/2017/RJ-2017-026/index.html

The paper details how to use the drat package to manage that repository but
it is worth stressing that drat is entirely optional -- everything can be
done the same way with base R functions. 

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From d@nny @end|ng |rom gorch@@org  Fri Oct 18 01:18:18 2019
From: d@nny @end|ng |rom gorch@@org (Danny Smith)
Date: Fri, 18 Oct 2019 10:18:18 +1100
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
Message-ID: <CAOgn7ikAC=GNuFVK5d+0f0qn0O0D3xskxzgnHRwhNv2bEjdzgQ@mail.gmail.com>

Hi all,

I'm trying to ready a package update for CRAN, but it's failing 32 bit
Windows checks because of rJava:
```
* installing *source* package 'dialrjars' ...
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
*** arch - i386
Error: package or namespace load failed for 'dialrjars':
 .onLoad failed in loadNamespace() for 'rJava', details:
  call: inDL(x, as.logical(local), as.logical(now), ...)
  error: unable to load shared object
'd:/temp/RtmpO22QHg/RLIBS_1d954576818a2/rJava/libs/i386/rJava.dll':
  LoadLibrary failure:  %1 ist keine zul?ssige Win32-Anwendung.

Error: loading failed
Execution halted
*** arch - x64
ERROR: loading failed for 'i386'
* removing 'd:/RCompile/CRANguest/R-devel/lib/dialrjars'
```
https://win-builder.r-project.org/KpYqdgLqaPgI/00install.out

Has something changed in the winbuilder/CRAN windows testing
environment recently, and if so does anyone have any suggestions for
resolving this error?

I've submitted this and a related package and they've passed fine in
the past, but the published versions on CRAN appear to currently be
failing the Windows CRAN checks with the same error:
https://cran.r-project.org/web/checks/check_results_dialr.html
https://cran.r-project.org/web/checks/check_results_dialrjars.html

rJava itself appears to be passing fine:
https://cran.r-project.org/web/checks/check_results_rJava.html

Thanks in Advance,
Danny


From @@@@k|evt@ov @end|ng |rom gm@||@com  Fri Oct 18 09:46:15 2019
From: @@@@k|evt@ov @end|ng |rom gm@||@com (=?utf-8?B?0JDRgNGC0ZHQvCDQmtC70LXQstGG0L7Qsg==?=)
Date: Fri, 18 Oct 2019 14:46:15 +0700
Subject: [R-pkg-devel] Can't submit uchardet package on CRAN
Message-ID: <2664720.cT7erYuVqD@unikum-desktop>

Hi,

I faced problem to submit package uchardet.

This package requires external library (uchardet).   Configure script tries to find it with the pkg-config tool.

Install uchardet on various systems:
- debian: apt-get install libuchardet-dev
- fedora: dnf install uchardet-devel
- arch: pacman -S uchardet
- osx: brew install uchardet
- windows  (msys2): pacman -S mingw-w64-{i686,x86_64}-uchardet

Installation instructions proved in the README.md.

Also I am considering an option to build uchardet durin package installation, but it requires cmake tool.

Now package pass the R CMD check with rocket/r-ver:{latest,devel}.

CRAN auto check rejects package. What can I do to submit the package on CRAN?

----
Additional info
CRAN install log on Debian: https://win-builder.r-project.org/incoming_pretest/uchardet_0.1.0_20191018_091600/Debian/00install.out
Package source repo: https://gitlab.com/artemklevtsov/uchardet
CI config: https://gitlab.com/artemklevtsov/uchardet/blob/master/.gitlab-ci.yml
Pipelines logs (artifacts available):
- R-release: https://gitlab.com/artemklevtsov/uchardet/-/jobs/324567492
- R-devel: https://gitlab.com/artemklevtsov/uchardet/-/jobs/324567491

-- 
Artem Klevtsov


From b@yzb @end|ng |rom hotm@||@com  Fri Oct 18 20:56:58 2019
From: b@yzb @end|ng |rom hotm@||@com (=?utf-8?B?QmFoYWTEsXIgWcOcWkJBxZ5J?=)
Date: Fri, 18 Oct 2019 18:56:58 +0000
Subject: [R-pkg-devel] Please help
In-Reply-To: <23975.28790.894808.538880@rob.eddelbuettel.com>
References: <AM6PR09MB2568027442C1E29D5A884863E2920@AM6PR09MB2568.eurprd09.prod.outlook.com>
 <42753a3fd53e40a4a6e3dd1a369410a5@umanitoba.ca>
 <23975.28790.894808.538880@rob.eddelbuettel.com>
Message-ID: <AM6PR09MB25683B771C216B4FFEA3E23EE26C0@AM6PR09MB2568.eurprd09.prod.outlook.com>

Dear Dirk and Max,

I would like to thank you both since your fast response to me. I revised my src/Makevars and src/Makevars.win<http://Makevars.win> by following your suggestions.
Finally, it passed first auto check by CRAN by using the following flags.
?? ???????????????????????
CXX_STD = CXX11
PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
?????????????????????????

Warmest Regards,
Bahadir





On 16 Oct 2019, at 22:33, Dirk Eddelbuettel <edd at debian.org<mailto:edd at debian.org>> wrote:


Bahadir,

On 16 October 2019 at 19:12, Max Turgeon wrote:
| It may help to look at what other packages linking to RcppArmadillo have done and try to reproduce it/adapt it to your setting.

Packages using the package generator RcppArmadillo.package.skeleton() get
these two templates via the skeleton/ directory of the installed package:

 https://github.com/RcppCore/RcppArmadillo/blob/master/inst/skeleton/Makevars
 https://github.com/RcppCore/RcppArmadillo/blob/master/inst/skeleton/Makevars.win

They haven't changed in years, but are needed as Max correctly identified.

Best,  Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org<mailto:edd at debian.org>


	[[alternative HTML version deleted]]


From j@_cdo @end|ng |rom hotm@||@com  Sat Oct 19 23:19:41 2019
From: j@_cdo @end|ng |rom hotm@||@com (=?utf-8?B?U8OpcmdpbyBPbGl2ZWlyYQ==?=)
Date: Sat, 19 Oct 2019 21:19:41 +0000
Subject: [R-pkg-devel] Help!
Message-ID: <MN2PR01MB5614FFB87D619E8360E26B6BE16F0@MN2PR01MB5614.prod.exchangelabs.com>

Hello,

I am trying to create a simple package for R using R 3.6.1, devtools, Rtools and roxegen2 on windows 8.1.

After generating the documentation, I use check (), which returns me the following error:
___________________________________________________

-     checking whether package 'leontief' can be installed ...|-     checking whether package 'leontief' can be installed ... |  E  checking whether package 'leontief' can be installed (345ms)
   Installation failed.
   See 'C:/Users/S?rgio/AppData/Local/Temp/RtmpGGGNop/leontief.Rcheck/00install.out' for details.
-
   See
     'C:/Users/S?rgio/AppData/Local/Temp/RtmpGGGNop/leontief.Rcheck/00check.log'
   for details.

|- -- R CMD check results -------------------------------------------------------------------------------------------------------------------------- leontief 0.0.0.3 ----
Duration: 2.8s

> checking whether package 'leontief' can be installed ... ERROR
  See below...

-- Install failure ----------------------------------------------------------------------------------------------------------------------------------------------------

* installing *source* package 'leontief' ...
** using staged installation
Warning in file(file, if (append) "a" else "w") :
  cannot open file 'C:/Users/Sirgio/AppData/Local/Temp/RtmpGGGNop/leontief.Rcheck/00LOCK-leontief/00new/leontief/DESCRIPTION': No such file or directory
Error in file(file, if (append) "a" else "w") :
  n??o ?? poss??vel abrir a conex??o
ERROR: installing package DESCRIPTION failed for package 'leontief'
* removing 'C:/Users/S?rgio/AppData/Local/Temp/RtmpGGGNop/leontief.Rcheck/leontief'

1 error x | 0 warnings ? | 0 notes ?
>
____________________________________________________


Can anybody help me?

S?rgio.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Oct 20 01:20:15 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 19 Oct 2019 19:20:15 -0400
Subject: [R-pkg-devel] Help!
In-Reply-To: <MN2PR01MB5614FFB87D619E8360E26B6BE16F0@MN2PR01MB5614.prod.exchangelabs.com>
References: <MN2PR01MB5614FFB87D619E8360E26B6BE16F0@MN2PR01MB5614.prod.exchangelabs.com>
Message-ID: <6116ff3e-1497-b808-42d5-3f1e91131519@gmail.com>

The first error said your package couldn't be installed, so look in 
00install.out.

That file said it couldn't find your DESCRIPTION file.  That file should 
be in the top level directory of your package.  I don't know if Roxygen2 
can create it or not.  I always write mine by editing the file produced 
by package.skeleton, I don't use Roxygen2 or devtools at this point.

So fix that, and work on the next error.

Duncan Murdoch

On 19/10/2019 5:19 p.m., S?rgio Oliveira wrote:
> Hello,
> 
> I am trying to create a simple package for R using R 3.6.1, devtools, Rtools and roxegen2 on windows 8.1.
> 
> After generating the documentation, I use check (), which returns me the following error:
> ___________________________________________________
> 
> -     checking whether package 'leontief' can be installed ...|-     checking whether package 'leontief' can be installed ... |  E  checking whether package 'leontief' can be installed (345ms)
>     Installation failed.
>     See 'C:/Users/S?rgio/AppData/Local/Temp/RtmpGGGNop/leontief.Rcheck/00install.out' for details.
> -
>     See
>       'C:/Users/S?rgio/AppData/Local/Temp/RtmpGGGNop/leontief.Rcheck/00check.log'
>     for details.
> 
> |- -- R CMD check results -------------------------------------------------------------------------------------------------------------------------- leontief 0.0.0.3 ----
> Duration: 2.8s
> 
>> checking whether package 'leontief' can be installed ... ERROR
>    See below...
> 
> -- Install failure ----------------------------------------------------------------------------------------------------------------------------------------------------
> 
> * installing *source* package 'leontief' ...
> ** using staged installation
> Warning in file(file, if (append) "a" else "w") :
>    cannot open file 'C:/Users/Sirgio/AppData/Local/Temp/RtmpGGGNop/leontief.Rcheck/00LOCK-leontief/00new/leontief/DESCRIPTION': No such file or directory
> Error in file(file, if (append) "a" else "w") :
>    n??o ?? poss??vel abrir a conex??o
> ERROR: installing package DESCRIPTION failed for package 'leontief'
> * removing 'C:/Users/S?rgio/AppData/Local/Temp/RtmpGGGNop/leontief.Rcheck/leontief'
> 
> 1 error x | 0 warnings ? | 0 notes ?
>>
> ____________________________________________________
> 
> 
> Can anybody help me?
> 
> S?rgio.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@v|d@dueber @end|ng |rom uky@edu  Mon Oct 21 13:30:49 2019
From: d@v|d@dueber @end|ng |rom uky@edu (Dueber, David)
Date: Mon, 21 Oct 2019 11:30:49 +0000
Subject: [R-pkg-devel] Advice about non-replicable error in CRAN R CMD check
Message-ID: <SN6PR03MB42706D333B154717CF9974BC96690@SN6PR03MB4270.namprd03.prod.outlook.com>

When I submitted my package (BifactorIndicesCalculator: https://github.com/ddueber/BifactorIndicesCalculator) to CRAN, the automated checks returned an error for the development release of R in Windows. The log file is (https://win-builder.r-project.org/incoming_pretest/BifactorIndicesCalculator_0.1.0_20191020_051536/Windows/00check.log), and the error message is pasted at the bottom of this e-mail. I tried to replicate this error locally, on R-hub, and winbuilder, but to no avail. The log file from winbuilder is (https://win-builder.r-project.org/OJ4O68aeF9OG/00check.log)

I am not 100% sure what the error means, other than that some package (either MplusAutomation or a package it uses, or a package used by a package MplusAutomation uses) seems to be referring to a package named "scales" which does not exist. But I have no idea why I can't replicate the error, and certainly have no idea how to fix it. Any help/advice would be appreciated. Thanks!

-David Dueber

Running the tests in 'tests/testthat.R' failed.
Complete output:
  > library(testthat)
  > library(BifactorIndicesCalculator)
  >
  > test_check("BifactorIndicesCalculator")
  -- 1. Error: bifactorIndicesMplus Works (@test-BifactorIndicesCalculator.R#413)
  there is no package called 'scales'
  1: MplusAutomation::readModels at testthat/test-BifactorIndicesCalculator.R:413
  2: getExportedValue(pkg, name)
  3: asNamespace(ns)
  4: getNamespace(ns)
  5: loadNamespace(name)
  6: namespaceImport(ns, loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]),
         from = package)
  7: loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
  8: namespaceImport(ns, loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]),
         from = package)
  9: loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]])
  10: withRestarts(stop(cond), retry_loadNamespace = function() NULL)
  11: withOneRestart(expr, restarts[[1L]])
  12: doWithOneRestart(return(expr), restart)

  == testthat results  ===========================================================
  [ OK: 30 | SKIPPED: 0 | WARNINGS: 0 | FAILED: 1 ]


	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Oct 21 13:59:34 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 21 Oct 2019 06:59:34 -0500
Subject: [R-pkg-devel] 
 Advice about non-replicable error in CRAN R CMD check
In-Reply-To: <SN6PR03MB42706D333B154717CF9974BC96690@SN6PR03MB4270.namprd03.prod.outlook.com>
References: <SN6PR03MB42706D333B154717CF9974BC96690@SN6PR03MB4270.namprd03.prod.outlook.com>
Message-ID: <23981.40358.256166.705240@rob.eddelbuettel.com>


David,

On 21 October 2019 at 11:30, Dueber, David wrote:
| When I submitted my package (BifactorIndicesCalculator: https://github.com/ddueber/BifactorIndicesCalculator) to CRAN, the automated checks returned an error for the development release of R in Windows. The log file is (https://win-builder.r-project.org/incoming_pretest/BifactorIndicesCalculator_0.1.0_20191020_051536/Windows/00check.log), and the error message is pasted at the bottom of this e-mail. I tried to replicate this error locally, on R-hub, and winbuilder, but to no avail. The log file from winbuilder is (https://win-builder.r-project.org/OJ4O68aeF9OG/00check.log)
| 
| I am not 100% sure what the error means, other than that some package (either MplusAutomation or a package it uses, or a package used by a package MplusAutomation uses) seems to be referring to a package named "scales" which does not exist. But I have no idea why I can't replicate the error, and certainly have no idea how to fix it. Any help/advice would be appreciated. Thanks!
| 
| -David Dueber
| 
| Running the tests in 'tests/testthat.R' failed.
| Complete output:
|   > library(testthat)
|   > library(BifactorIndicesCalculator)
|   >
|   > test_check("BifactorIndicesCalculator")
|   -- 1. Error: bifactorIndicesMplus Works (@test-BifactorIndicesCalculator.R#413)
|   there is no package called 'scales'
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Someone depends on package 'scales', either you, or one of your dependencies.

I said more about that in the past [1], but in short

 - if it is a dependency, you need to depend on on it via Imports:;
 
 - if it is not meant to be one then you need to condition on it via eg code
   of the form 'if (RequireNamespace(pkgName), quietly=TRUE))'

Dirk

[1] http://dirk.eddelbuettel.com/blog/2017/03/22#suggests_is_not_depends

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |uc@r @end|ng |rom |edor@project@org  Mon Oct 21 14:39:33 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 21 Oct 2019 14:39:33 +0200
Subject: [R-pkg-devel] 
 Advice about non-replicable error in CRAN R CMD check
In-Reply-To: <SN6PR03MB42706D333B154717CF9974BC96690@SN6PR03MB4270.namprd03.prod.outlook.com>
References: <SN6PR03MB42706D333B154717CF9974BC96690@SN6PR03MB4270.namprd03.prod.outlook.com>
Message-ID: <CALEXWq0DN5pjg0U9=hZvGo5HbHaHuzF6u7hB-jO5dgqLqNsDDQ@mail.gmail.com>

On Mon, 21 Oct 2019 at 13:34, Dueber, David <david.dueber at uky.edu> wrote:
>
> When I submitted my package (BifactorIndicesCalculator: https://github.com/ddueber/BifactorIndicesCalculator) to CRAN, the automated checks returned an error for the development release of R in Windows. The log file is (https://win-builder.r-project.org/incoming_pretest/BifactorIndicesCalculator_0.1.0_20191020_051536/Windows/00check.log), and the error message is pasted at the bottom of this e-mail. I tried to replicate this error locally, on R-hub, and winbuilder, but to no avail. The log file from winbuilder is (https://win-builder.r-project.org/OJ4O68aeF9OG/00check.log)
>
> I am not 100% sure what the error means, other than that some package (either MplusAutomation or a package it uses, or a package used by a package MplusAutomation uses) seems to be referring to a package named "scales" which does not exist. But I have no idea why I can't replicate the error, and certainly have no idea how to fix it. Any help/advice would be appreciated. Thanks!

This is probably some race condition in that particular builder. Try
submitting again.

I?aki


From d@v|d@dueber @end|ng |rom uky@edu  Mon Oct 21 14:58:55 2019
From: d@v|d@dueber @end|ng |rom uky@edu (Dueber, David)
Date: Mon, 21 Oct 2019 12:58:55 +0000
Subject: [R-pkg-devel] 
 Advice about non-replicable error in CRAN R CMD check
In-Reply-To: <CALEXWq0DN5pjg0U9=hZvGo5HbHaHuzF6u7hB-jO5dgqLqNsDDQ@mail.gmail.com>
References: <SN6PR03MB42706D333B154717CF9974BC96690@SN6PR03MB4270.namprd03.prod.outlook.com>,
 <CALEXWq0DN5pjg0U9=hZvGo5HbHaHuzF6u7hB-jO5dgqLqNsDDQ@mail.gmail.com>
Message-ID: <SN6PR03MB427056C590D949A69015F80496690@SN6PR03MB4270.namprd03.prod.outlook.com>

Thanks I?aki,

I will try that, and report back if it does not work.

-David
________________________________
From: I?aki Ucar <iucar at fedoraproject.org>
Sent: Monday, October 21, 2019 8:39 AM
To: Dueber, David <david.dueber at uky.edu>
Cc: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Advice about non-replicable error in CRAN R CMD check

On Mon, 21 Oct 2019 at 13:34, Dueber, David <david.dueber at uky.edu> wrote:
>
> When I submitted my package (BifactorIndicesCalculator: https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fddueber%2FBifactorIndicesCalculator&amp;data=02%7C01%7Cdavid.dueber%40uky.edu%7Cb273417105e3441d6f9208d75623c1a4%7C2b30530b69b64457b818481cb53d42ae%7C0%7C1%7C637072583883111749&amp;sdata=gGoqCOnHFAVId5APXHpxJWP9AFxn3o9QgLIaDjvfDDU%3D&amp;reserved=0) to CRAN, the automated checks returned an error for the development release of R in Windows. The log file is (https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FBifactorIndicesCalculator_0.1.0_20191020_051536%2FWindows%2F00check.log&amp;data=02%7C01%7Cdavid.dueber%40uky.edu%7Cb273417105e3441d6f9208d75623c1a4%7C2b30530b69b64457b818481cb53d42ae%7C0%7C1%7C637072583883111749&amp;sdata=AhL4ssK4LXOuOstGOtrOcaLaEHgTlNXuT7IvmD3NEpI%3D&amp;reserved=0), and the error message is pasted at the bottom of this e-mail. I tried to replicate this error locally, on R-hub, and winbuilder, but to no avail. The log file from winbuilder is (https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2FOJ4O68aeF9OG%2F00check.log&amp;data=02%7C01%7Cdavid.dueber%40uky.edu%7Cb273417105e3441d6f9208d75623c1a4%7C2b30530b69b64457b818481cb53d42ae%7C0%7C1%7C637072583883111749&amp;sdata=EFBatCeSnLhRL56lWbnUg%2FM%2B%2FrBl6PafcHOMoJ4%2FkxM%3D&amp;reserved=0)
>
> I am not 100% sure what the error means, other than that some package (either MplusAutomation or a package it uses, or a package used by a package MplusAutomation uses) seems to be referring to a package named "scales" which does not exist. But I have no idea why I can't replicate the error, and certainly have no idea how to fix it. Any help/advice would be appreciated. Thanks!

This is probably some race condition in that particular builder. Try
submitting again.

I?aki

	[[alternative HTML version deleted]]


From @nto|ne@pe||et|er @end|ng |rom |r@te@@|r  Tue Oct 22 16:40:27 2019
From: @nto|ne@pe||et|er @end|ng |rom |r@te@@|r (Pelletier Antoine)
Date: Tue, 22 Oct 2019 16:40:27 +0200 (CEST)
Subject: [R-pkg-devel] cargo not installed on Windows auto-check server
Message-ID: <000101d588e6$a5433b40$efc9b1c0$@irstea.fr>

Dear all,

I am triying to upload to CRAN a package which relies on a Rust library.
Rust compiler rustc and Rust package manager cargo are system requirements
to the package. Source code of the package is available at
https://gitlab.irstea.fr/HYCAR-Hydro/baseflow

The CRAN auto-check gave no error on Debian, but cargo and rustc seem not
to be installed on the Windows check server. This is the install.out file:

* installing *source* package 'baseflow' ...
** using staged installation
** libs

*** arch - i386
d:/Compiler/gcc-4.9.3/mingw_32/bin/gcc  -I"D:/RCompile/recent/R/include"
-DNDEBUG     -I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2
-Wall  -std=gnu99 -mtune=core2 -c REXPORT.c -o REXPORT.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/gcc  -I"D:/RCompile/recent/R/include"
-DNDEBUG     -I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2
-Wall  -std=gnu99 -mtune=core2 -c packagename_init.c -o packagename_init.o
cd rustlib && cargo build --release --target i686-pc-windows-gnu
cargo: not found
make: *** [rustlib/target/i686-pc-windows-gnu/release/librustlib.rlib]
Error 127
ERROR: compilation failed for package 'baseflow'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/baseflow'

What should I do? Is it possible to upload a partially-compiled package
(providing only DLL for instance) for Windows?

Thank you in advance

Antoine Pelletier


From edd @end|ng |rom deb|@n@org  Tue Oct 22 17:13:11 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 22 Oct 2019 10:13:11 -0500
Subject: [R-pkg-devel] cargo not installed on Windows auto-check server
In-Reply-To: <000101d588e6$a5433b40$efc9b1c0$@irstea.fr>
References: <000101d588e6$a5433b40$efc9b1c0$@irstea.fr>
Message-ID: <23983.7303.264240.338044@rob.eddelbuettel.com>


Hi Antoine,

On 22 October 2019 at 16:40, Pelletier Antoine wrote:
| I am triying to upload to CRAN a package which relies on a Rust library.
| Rust compiler rustc and Rust package manager cargo are system requirements
| to the package. Source code of the package is available at
| https://gitlab.irstea.fr/HYCAR-Hydro/baseflow
| 
| The CRAN auto-check gave no error on Debian, but cargo and rustc seem not
| to be installed on the Windows check server. This is the install.out file:
[...]
| What should I do? Is it possible to upload a partially-compiled package
| (providing only DLL for instance) for Windows?

That has been done before---see David Dahl's salso package (here mirrored at
GH for easy viewing):

  https://github.com/cran/salso

and specifically to the pivot on Windows to pull in a prebuilt library:

  https://github.com/cran/salso/blob/master/src/Makevars.win

Longer term "we all" have to come up with a better solution but for now this
approach appears to be tolerated (and I do something similar with downloads
at CRAN-build-time in at least two packages).

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From he|mut@@chuetz @end|ng |rom beb@c@@t  Thu Oct 24 14:57:46 2019
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Thu, 24 Oct 2019 14:57:46 +0200
Subject: [R-pkg-devel] License of pre-built vignettes
Message-ID: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>

Dear all, since we have many examples in our vignettes (rendering takes 
about 7 minutes) we provide them in /inst/doc Another reason is to have 
HTML5 instead of XHTML1.0 produced by pandoc (which contains deprecated 
attributes). To prevent building we have BuildVignettes: no in the 
DESCRIPTION Building the source, and installation from the local zip 
works as intended (vignettes are listed by 
browseVignettes(package="ourpackage"), linked in the main man-page, and 
all internal links are fine. However, CHECK throws a WARNING FOSS 
licence with BuildVignettes: false If I understand that correctly, it 
means that license(s) could not retrieved. In the DESCRIPTION we have 
License: GPL (>=2) Furthermore, all vignettes have a license section We 
tried adding License_is_FOSS: yes and License_restricts_use: no to the 
DESCRIPTION without success. Any ideas? Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
W https://bebac.at/
F https://forum.bebac.at/


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 24 21:51:22 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 24 Oct 2019 15:51:22 -0400
Subject: [R-pkg-devel] License of pre-built vignettes
In-Reply-To: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>
References: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>
Message-ID: <79c56c71-536f-6103-433b-df855ead3c51@gmail.com>

On 24/10/2019 8:57 a.m., Helmut Sch?tz wrote:
> Dear all, since we have many examples in our vignettes (rendering takes
> about 7 minutes) we provide them in /inst/doc Another reason is to have
> HTML5 instead of XHTML1.0 produced by pandoc (which contains deprecated
> attributes). To prevent building we have BuildVignettes: no in the
> DESCRIPTION Building the source, and installation from the local zip
> works as intended (vignettes are listed by
> browseVignettes(package="ourpackage"), linked in the main man-page, and
> all internal links are fine. However, CHECK throws a WARNING FOSS
> licence with BuildVignettes: false If I understand that correctly, it
> means that license(s) could not retrieved. In the DESCRIPTION we have
> License: GPL (>=2) Furthermore, all vignettes have a license section We
> tried adding License_is_FOSS: yes and License_restricts_use: no to the
> DESCRIPTION without success. Any ideas? Helmut
> 

Writing R Extensions says that "BuildVignettes: false" should only be 
used in packages which do not have an open source license.

The CRAN Repository Policy says "If the package needs special treatment 
(for example if vignettes can only be run or re-built on the 
maintainer?s machine or take a very long time), say so on the submission 
form."

So it seems clear what to do:  remove the BuildVignettes: false 
statement, and explain why CRAN should avoid building them in your 
submission message.  This will likely make it take longer for the 
package to be handled; if that's a problem for you, you probably need to 
simplify the examples (or remove them).

Duncan Murdoch


From he|mut@@chuetz @end|ng |rom beb@c@@t  Fri Oct 25 01:16:59 2019
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Fri, 25 Oct 2019 01:16:59 +0200
Subject: [R-pkg-devel] License of pre-built vignettes
In-Reply-To: <79c56c71-536f-6103-433b-df855ead3c51@gmail.com>
References: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>
 <79c56c71-536f-6103-433b-df855ead3c51@gmail.com>
Message-ID: <f09f77d7-b733-a77c-1c99-ad5117a03c50@bebac.at>

Dear Duncan,

Duncan Murdoch wrote on 2019-10-24 21:51:
> So it seems clear what to do:? remove the BuildVignettes: false 
> statement, and explain why CRAN should avoid building them in your 
> submission message.? This will likely make it take longer for the 
> package to be handled; if that's a problem for you, you probably need 
> to simplify the examples (or remove them).

THX, I got the idea. However, if we remove BuildVignettes: false, in the 
tarball the HTML5 vignettes in inst/doc are overwritten with pandoc's 
XHTML1.0 (with a warning, of course). That's the opposite of what we want.

The vignettes contain code for simulations which causes the long 
runtime. In examples of the man-pages we have -- much simpler ones -- in 
\donttest{}. I think that one of the purposes of vignettes is to give 
the user a more exhaustive description what can be done with certain 
functions. The only way out would to have instead of the R-code plain 
text. Runtimes close to zero but all -- rather useful -- formats lost.

We will try to keep them and start a discussion with the team.

Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
W https://bebac.at/
F https://forum.bebac.at/


From th|erry@onke||nx @end|ng |rom |nbo@be  Fri Oct 25 09:56:57 2019
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Fri, 25 Oct 2019 09:56:57 +0200
Subject: [R-pkg-devel] License of pre-built vignettes
In-Reply-To: <f09f77d7-b733-a77c-1c99-ad5117a03c50@bebac.at>
References: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>
 <79c56c71-536f-6103-433b-df855ead3c51@gmail.com>
 <f09f77d7-b733-a77c-1c99-ad5117a03c50@bebac.at>
Message-ID: <CAJuCY5ykre-_goZhJyLsJmdarLmPumxX6ULFFkDOoiUnvaRaRA@mail.gmail.com>

Dear Helmut,

Maybe you can move your vignettes (source and rendered version) to the inst
folder. I think that this makes the files available to the user without
being recompiled. Downside it that they are no longer recognised as
vignettes. Therefore I would also add a short overview vignette describing
and linking to the precompiled vignettes. Something like
browseURL(system.file("precompiled.html", package = "yourpackage"))

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op vr 25 okt. 2019 om 01:17 schreef Helmut Sch?tz <helmut.schuetz at bebac.at>:

> Dear Duncan,
>
> Duncan Murdoch wrote on 2019-10-24 21:51:
> > So it seems clear what to do:  remove the BuildVignettes: false
> > statement, and explain why CRAN should avoid building them in your
> > submission message.  This will likely make it take longer for the
> > package to be handled; if that's a problem for you, you probably need
> > to simplify the examples (or remove them).
>
> THX, I got the idea. However, if we remove BuildVignettes: false, in the
> tarball the HTML5 vignettes in inst/doc are overwritten with pandoc's
> XHTML1.0 (with a warning, of course). That's the opposite of what we want.
>
> The vignettes contain code for simulations which causes the long
> runtime. In examples of the man-pages we have -- much simpler ones -- in
> \donttest{}. I think that one of the purposes of vignettes is to give
> the user a more exhaustive description what can be done with certain
> functions. The only way out would to have instead of the R-code plain
> text. Runtimes close to zero but all -- rather useful -- formats lost.
>
> We will try to keep them and start a discussion with the team.
>
> Helmut
>
> --
> Ing. Helmut Sch?tz
> BEBAC ? Consultancy Services for
> Bioequivalence and Bioavailability Studies
> Neubaugasse 36/11
> 1070 Vienna, Austria
> W https://bebac.at/
> F https://forum.bebac.at/
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Oct 25 12:38:43 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 25 Oct 2019 06:38:43 -0400
Subject: [R-pkg-devel] License of pre-built vignettes
In-Reply-To: <f09f77d7-b733-a77c-1c99-ad5117a03c50@bebac.at>
References: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>
 <79c56c71-536f-6103-433b-df855ead3c51@gmail.com>
 <f09f77d7-b733-a77c-1c99-ad5117a03c50@bebac.at>
Message-ID: <0212ed04-5ed3-8368-fe77-ca6bb76215f3@gmail.com>

On 24/10/2019 7:16 p.m., Helmut Sch?tz wrote:
> Dear Duncan,
> 
> Duncan Murdoch wrote on 2019-10-24 21:51:
>> So it seems clear what to do:? remove the BuildVignettes: false
>> statement, and explain why CRAN should avoid building them in your
>> submission message.? This will likely make it take longer for the
>> package to be handled; if that's a problem for you, you probably need
>> to simplify the examples (or remove them).
> 
> THX, I got the idea. However, if we remove BuildVignettes: false, in the
> tarball the HTML5 vignettes in inst/doc are overwritten with pandoc's
> XHTML1.0 (with a warning, of course). That's the opposite of what we want.

Base R doesn't use pandoc, so you are presumably using rmarkdown or some 
other contributed package.  You should either get that package to modify 
the way it produces the vignette, or write your own vignette building 
code (which would encapsulate whatever process you are currently using). 
  I think the former would be easier:  rmarkdown is very flexible.  You 
may just need to modify the pandoc template that it is using and you'll 
get the format you want.

Duncan Murdoch

> 
> The vignettes contain code for simulations which causes the long
> runtime. In examples of the man-pages we have -- much simpler ones -- in
> \donttest{}. I think that one of the purposes of vignettes is to give
> the user a more exhaustive description what can be done with certain
> functions. The only way out would to have instead of the R-code plain
> text. Runtimes close to zero but all -- rather useful -- formats lost.
> 
> We will try to keep them and start a discussion with the team.
> 
> Helmut
>


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Fri Oct 25 18:22:21 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Fri, 25 Oct 2019 16:22:21 +0000
Subject: [R-pkg-devel] License of pre-built vignettes
In-Reply-To: <0212ed04-5ed3-8368-fe77-ca6bb76215f3@gmail.com>
References: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>
 <79c56c71-536f-6103-433b-df855ead3c51@gmail.com>
 <f09f77d7-b733-a77c-1c99-ad5117a03c50@bebac.at>,
 <0212ed04-5ed3-8368-fe77-ca6bb76215f3@gmail.com>
Message-ID: <DB8P191MB070010F2835C22328E50AE93D5650@DB8P191MB0700.EURP191.PROD.OUTLOOK.COM>


You could also consider a static vignette withh R.rsp:
https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf

Berry


________________________________

> The vignettes contain code for simulations which causes the long
> runtime. In examples of the man-pages we have -- much simpler ones -- in
> \donttest{}. I think that one of the purposes of vignettes is to give
> the user a more exhaustive description what can be done with certain
> functions. The only way out would to have instead of the R-code plain
> text. Runtimes close to zero but all -- rather useful -- formats lost.
>
> We will try to keep them and start a discussion with the team.
>
> Helmut
>


	[[alternative HTML version deleted]]


From m@rk@v@nder|oo @end|ng |rom gm@||@com  Sat Oct 26 03:45:08 2019
From: m@rk@v@nder|oo @end|ng |rom gm@||@com (Mark van der Loo)
Date: Fri, 25 Oct 2019 22:45:08 -0300
Subject: [R-pkg-devel] License of pre-built vignettes
In-Reply-To: <DB8P191MB070010F2835C22328E50AE93D5650@DB8P191MB0700.EURP191.PROD.OUTLOOK.COM>
References: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>
 <79c56c71-536f-6103-433b-df855ead3c51@gmail.com>
 <f09f77d7-b733-a77c-1c99-ad5117a03c50@bebac.at>
 <0212ed04-5ed3-8368-fe77-ca6bb76215f3@gmail.com>
 <DB8P191MB070010F2835C22328E50AE93D5650@DB8P191MB0700.EURP191.PROD.OUTLOOK.COM>
Message-ID: <CAOKDuOhSerP2fbah9eqbwyEAf7M2bCYyQxBzgOfG8fEfC94_hg@mail.gmail.com>

Adding a static PDF vignette is very easy. I have written about it here:
http://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/

Best,
Mark

Op vr 25 okt. 2019 13:22 schreef Berry Boessenkool <
berryboessenkool at hotmail.com>:

>
> You could also consider a static vignette withh R.rsp:
>
> https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf
>
> Berry
>
>
> ________________________________
>
> > The vignettes contain code for simulations which causes the long
> > runtime. In examples of the man-pages we have -- much simpler ones -- in
> > \donttest{}. I think that one of the purposes of vignettes is to give
> > the user a more exhaustive description what can be done with certain
> > functions. The only way out would to have instead of the R-code plain
> > text. Runtimes close to zero but all -- rather useful -- formats lost.
> >
> > We will try to keep them and start a discussion with the team.
> >
> > Helmut
> >
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |mrodr|guezr @end|ng |rom gm@||@com  Sat Oct 26 17:39:35 2019
From: |mrodr|guezr @end|ng |rom gm@||@com (=?UTF-8?Q?Luis=2DMiguel_Rodr=C3=ADguez_Rojas?=)
Date: Sat, 26 Oct 2019 11:39:35 -0400
Subject: [R-pkg-devel] Data docs
Message-ID: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>

Dear all,

I maintain a package that has data fields, and didn't have any problems
with this before. However, in my latest update, I'm getting the following
error message from the CRAN tests:

Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: for code/documentation mismatches, Result: WARNING
  Variables with usage in documentation object 'growth.curves' but not in
code:
    'growth.curves'

  Variables with usage in documentation object 'phyla.counts' but not in
code:
    'phyla.counts'

The variables are indeed NOT in the code, because they're only to be used
in the examples. In this version I moved my documentation from the old (now
defunct) inlinedocs to ROxygen2. In the previous form, I had to define a
structure in the code including both the function and the example, so
technically the code was using the variables. In the new form, I simply
define the examples with the @examples tag (that ends up in the .rd file
within an \examples{} block).

Does anyone have any idea on how I should define data in the code to avoid
this issue? I could simply add the example lines after the return (so
they're never reached), but that sounds like a horrible hack.

Just in case it's useful:
GitHub repository (inside the enveomics.R folder):
https://github.com/lmrodriguezr/enveomics/
Full test output:
https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log

Thanks!
Miguel.


--
Luis M. Rodriguez-R, Ph.D.
[ https://rodriguez-r.com ]
---------------------------------
Research Engineer
Georgia Institute of Technology
311 Ferst Drive, ES&T, Room 3324
Atlanta, GA 30332, USA
[ http://enve-omics.gatech.edu/ ]

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Oct 26 19:39:45 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 26 Oct 2019 13:39:45 -0400
Subject: [R-pkg-devel] Data docs
In-Reply-To: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
Message-ID: <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>

On 26/10/2019 11:39 a.m., Luis-Miguel Rodr?guez Rojas wrote:
> Dear all,
> 
> I maintain a package that has data fields, and didn't have any problems
> with this before. However, in my latest update, I'm getting the following
> error message from the CRAN tests:
> 
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> Check: for code/documentation mismatches, Result: WARNING
>    Variables with usage in documentation object 'growth.curves' but not in
> code:
>      'growth.curves'
> 
>    Variables with usage in documentation object 'phyla.counts' but not in
> code:
>      'phyla.counts'

I'm not seeing those messages when testing your package in the same R 
version as win-builder used, so it could be a transient issue, or a 
problem with the tarball that you submitted.  In either case, I'd 
suggest just trying again:  rebuild and submit.

Duncan Murdoch

> 
> The variables are indeed NOT in the code, because they're only to be used
> in the examples. In this version I moved my documentation from the old (now
> defunct) inlinedocs to ROxygen2. In the previous form, I had to define a
> structure in the code including both the function and the example, so
> technically the code was using the variables. In the new form, I simply
> define the examples with the @examples tag (that ends up in the .rd file
> within an \examples{} block).
> 
> Does anyone have any idea on how I should define data in the code to avoid
> this issue? I could simply add the example lines after the return (so
> they're never reached), but that sounds like a horrible hack.
> 
> Just in case it's useful:
> GitHub repository (inside the enveomics.R folder):
> https://github.com/lmrodriguezr/enveomics/
> Full test output:
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log
> 
> Thanks!
> Miguel.
> 
> 
> --
> Luis M. Rodriguez-R, Ph.D.
> [ https://rodriguez-r.com ]
> ---------------------------------
> Research Engineer
> Georgia Institute of Technology
> 311 Ferst Drive, ES&T, Room 3324
> Atlanta, GA 30332, USA
> [ http://enve-omics.gatech.edu/ ]
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |mrodr|guezr @end|ng |rom gm@||@com  Sat Oct 26 22:54:39 2019
From: |mrodr|guezr @end|ng |rom gm@||@com (=?UTF-8?Q?Luis=2DMiguel_Rodr=C3=ADguez_Rojas?=)
Date: Sat, 26 Oct 2019 16:54:39 -0400
Subject: [R-pkg-devel] Data docs
In-Reply-To: <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
 <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
Message-ID: <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>

Hello Duncan,

Thanks for your quick response!

I tried re-building and re-submitting and I'm still getting the same error:
https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Windows/00check.log
https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Debian/00check.log

I've made the tarball temporarily available directly in the repository in
case that helps at all:
https://github.com/lmrodriguezr/enveomics/blob/master/enveomics.R_1.5.0.tar.gz

Thanks a lot!
Miguel.

--
Luis M. Rodriguez-R, Ph.D.
[ https://rodriguez-r.com ]
---------------------------------
Research Engineer
Georgia Institute of Technology
311 Ferst Drive, ES&T, Room 3324
Atlanta, GA 30332, USA
[ http://enve-omics.gatech.edu/ ]



On Sat, Oct 26, 2019 at 1:39 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 26/10/2019 11:39 a.m., Luis-Miguel Rodr?guez Rojas wrote:
> > Dear all,
> >
> > I maintain a package that has data fields, and didn't have any problems
> > with this before. However, in my latest update, I'm getting the following
> > error message from the CRAN tests:
> >
> > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> > Check: for code/documentation mismatches, Result: WARNING
> >    Variables with usage in documentation object 'growth.curves' but not
> in
> > code:
> >      'growth.curves'
> >
> >    Variables with usage in documentation object 'phyla.counts' but not in
> > code:
> >      'phyla.counts'
>
> I'm not seeing those messages when testing your package in the same R
> version as win-builder used, so it could be a transient issue, or a
> problem with the tarball that you submitted.  In either case, I'd
> suggest just trying again:  rebuild and submit.
>
> Duncan Murdoch
>
> >
> > The variables are indeed NOT in the code, because they're only to be used
> > in the examples. In this version I moved my documentation from the old
> (now
> > defunct) inlinedocs to ROxygen2. In the previous form, I had to define a
> > structure in the code including both the function and the example, so
> > technically the code was using the variables. In the new form, I simply
> > define the examples with the @examples tag (that ends up in the .rd file
> > within an \examples{} block).
> >
> > Does anyone have any idea on how I should define data in the code to
> avoid
> > this issue? I could simply add the example lines after the return (so
> > they're never reached), but that sounds like a horrible hack.
> >
> > Just in case it's useful:
> > GitHub repository (inside the enveomics.R folder):
> > https://github.com/lmrodriguezr/enveomics/
> > Full test output:
> >
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log
> >
> > Thanks!
> > Miguel.
> >
> >
> > --
> > Luis M. Rodriguez-R, Ph.D.
> > [ https://rodriguez-r.com ]
> > ---------------------------------
> > Research Engineer
> > Georgia Institute of Technology
> > 311 Ferst Drive, ES&T, Room 3324
> > Atlanta, GA 30332, USA
> > [ http://enve-omics.gatech.edu/ ]
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Oct 27 00:54:53 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 26 Oct 2019 18:54:53 -0400
Subject: [R-pkg-devel] Data docs
In-Reply-To: <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
 <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
 <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
Message-ID: <17aaf6c8-d5f6-a21c-362a-62bc6b7aac28@gmail.com>

On 26/10/2019 4:54 p.m., Luis-Miguel Rodr?guez Rojas wrote:
> Hello Duncan,
> 
> Thanks for your quick response!
> 
> I tried re-building and re-submitting and I'm still getting the?same error:
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Windows/00check.log
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Debian/00check.log
> 
> I've made the tarball temporarily available directly in the repository 
> in case that helps at all:
> https://github.com/lmrodriguezr/enveomics/blob/master/enveomics.R_1.5.0.tar.gz
>

Sorry, I was wrong.  I'm now seeing the error, even on the code I tried 
before.  I think I forget --as-cran last time.

I think this is a bug in R-devel; I'll see if I can confirm that.

Duncan Murdoch


From edd @end|ng |rom deb|@n@org  Sun Oct 27 02:16:10 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 26 Oct 2019 19:16:10 -0500
Subject: [R-pkg-devel] License of pre-built vignettes
In-Reply-To: <CAOKDuOhSerP2fbah9eqbwyEAf7M2bCYyQxBzgOfG8fEfC94_hg@mail.gmail.com>
References: <e94c00c5-f220-72bc-6812-ac93ea59ad2e@bebac.at>
 <79c56c71-536f-6103-433b-df855ead3c51@gmail.com>
 <f09f77d7-b733-a77c-1c99-ad5117a03c50@bebac.at>
 <0212ed04-5ed3-8368-fe77-ca6bb76215f3@gmail.com>
 <DB8P191MB070010F2835C22328E50AE93D5650@DB8P191MB0700.EURP191.PROD.OUTLOOK.COM>
 <CAOKDuOhSerP2fbah9eqbwyEAf7M2bCYyQxBzgOfG8fEfC94_hg@mail.gmail.com>
Message-ID: <23988.57802.728700.368628@rob.eddelbuettel.com>


On 25 October 2019 at 22:45, Mark van der Loo wrote:
| Adding a static PDF vignette is very easy. I have written about it here:
| http://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/

And I am doing just that for more and more packages of mine.

It is "wrong" in the sense Mark also alluded elsewhere but also "right"
as it removes variability we sometimes cannot control (changes in
vignette-processing packages fundamentally unrelated to your package,
continued absence of e.g. latex style files on various build machines
such as different rhub flavours) and generally speeds up builds.

As with other things: a trade-off the package maintainer can decide.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Oct 27 02:14:17 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 26 Oct 2019 21:14:17 -0400
Subject: [R-pkg-devel] Data docs
In-Reply-To: <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
 <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
 <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
Message-ID: <60bd61a7-e93e-d667-eceb-42aeb73f8c60@gmail.com>

I think this is a bug.  It starts to appear in R-devel revision 76780,

------------------------------------------------------------------------
r76780 | hornik | 2019-07-04 14:55:52 -0400 (Thu, 04 Jul 2019) | 1 line

Tweaks for c76774.
------------------------------------------------------------------------

where the default for a new test is set to TRUE.  The new test was 
introduced in 76774,

------------------------------------------------------------------------
r76774 | hornik | 2019-07-03 05:02:40 -0400 (Wed, 03 Jul 2019) | 2 lines

Have codoc() report variables in usages not in the code.
(Optionally for now).
------------------------------------------------------------------------

Duncan Murdoch


On 26/10/2019 4:54 p.m., Luis-Miguel Rodr?guez Rojas wrote:
> Hello Duncan,
> 
> Thanks for your quick response!
> 
> I tried re-building and re-submitting and I'm still getting the?same error:
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Windows/00check.log
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Debian/00check.log
> 
> I've made the tarball temporarily available directly in the repository 
> in case that helps at all:
> https://github.com/lmrodriguezr/enveomics/blob/master/enveomics.R_1.5.0.tar.gz
> 
> Thanks a lot!
> Miguel.
> 
> --
> Luis M. Rodriguez-R, Ph.D.
> [ https://rodriguez-r.com <https://rodriguez-r.com/>?]
> ---------------------------------
> Research Engineer
> Georgia Institute of Technology
> 311 Ferst Drive, ES&T, Room 3324
> Atlanta, GA 30332, USA
> [ http://enve-omics.gatech.edu/?]
> 
> 
> 
> On Sat, Oct 26, 2019 at 1:39 PM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 26/10/2019 11:39 a.m., Luis-Miguel Rodr?guez Rojas wrote:
>      > Dear all,
>      >
>      > I maintain a package that has data fields, and didn't have any
>     problems
>      > with this before. However, in my latest update, I'm getting the
>     following
>      > error message from the CRAN tests:
>      >
>      > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>      > Check: for code/documentation mismatches, Result: WARNING
>      >? ? Variables with usage in documentation object 'growth.curves'
>     but not in
>      > code:
>      >? ? ? 'growth.curves'
>      >
>      >? ? Variables with usage in documentation object 'phyla.counts'
>     but not in
>      > code:
>      >? ? ? 'phyla.counts'
> 
>     I'm not seeing those messages when testing your package in the same R
>     version as win-builder used, so it could be a transient issue, or a
>     problem with the tarball that you submitted.? In either case, I'd
>     suggest just trying again:? rebuild and submit.
> 
>     Duncan Murdoch
> 
>      >
>      > The variables are indeed NOT in the code, because they're only to
>     be used
>      > in the examples. In this version I moved my documentation from
>     the old (now
>      > defunct) inlinedocs to ROxygen2. In the previous form, I had to
>     define a
>      > structure in the code including both the function and the example, so
>      > technically the code was using the variables. In the new form, I
>     simply
>      > define the examples with the @examples tag (that ends up in the
>     .rd file
>      > within an \examples{} block).
>      >
>      > Does anyone have any idea on how I should define data in the code
>     to avoid
>      > this issue? I could simply add the example lines after the return (so
>      > they're never reached), but that sounds like a horrible hack.
>      >
>      > Just in case it's useful:
>      > GitHub repository (inside the enveomics.R folder):
>      > https://github.com/lmrodriguezr/enveomics/
>      > Full test output:
>      >
>     https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log
>      >
>      > Thanks!
>      > Miguel.
>      >
>      >
>      > --
>      > Luis M. Rodriguez-R, Ph.D.
>      > [ https://rodriguez-r.com ]
>      > ---------------------------------
>      > Research Engineer
>      > Georgia Institute of Technology
>      > 311 Ferst Drive, ES&T, Room 3324
>      > Atlanta, GA 30332, USA
>      > [ http://enve-omics.gatech.edu/ ]
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>


From X@v|er@Rob|n @end|ng |rom @|b@@w|@@  Sun Oct 27 08:09:06 2019
From: X@v|er@Rob|n @end|ng |rom @|b@@w|@@ (Xavier Robin)
Date: Sun, 27 Oct 2019 08:09:06 +0100
Subject: [R-pkg-devel] {Disarmed} Re:  Data docs
In-Reply-To: <60bd61a7-e93e-d667-eceb-42aeb73f8c60@gmail.com>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
 <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
 <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
 <60bd61a7-e93e-d667-eceb-42aeb73f8c60@gmail.com>
Message-ID: <34918922-6eb1-5908-ba1a-0bd4b7ee3f5a@sib.swiss>

Hi,

It seems you have LazyLoad in your DESCRIPTION:

LazyLoad: yes

I ran into the same warning a few months ago and realized that LazyLoad
has been ignored since R 2.14.0. As a consequence your dataset is not
actually loaded lazily, which triggers the warning.

Apparently the new way to lazy load a dataset is to use LazyData in the
DESCRIPTION:

LazyData: yes

I don't know in which R version LazyData was introduced, but I expect
around the same time.

https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file

I ended up making the following change, and the warning disappeared:

https://github.com/xrobin/pROC/commit/77bbb151412643628f2549868700325c8e47cad4

I hope it helps.
Xavier


On 27.10.19 02:14, Duncan Murdoch wrote:
> I think this is a bug.? It starts to appear in R-devel revision 76780,
>
> ------------------------------------------------------------------------
> r76780 | hornik | 2019-07-04 14:55:52 -0400 (Thu, 04 Jul 2019) | 1 line
>
> Tweaks for c76774.
> ------------------------------------------------------------------------
>
> where the default for a new test is set to TRUE.? The new test was
> introduced in 76774,
>
> ------------------------------------------------------------------------
> r76774 | hornik | 2019-07-03 05:02:40 -0400 (Wed, 03 Jul 2019) | 2 lines
>
> Have codoc() report variables in usages not in the code.
> (Optionally for now).
> ------------------------------------------------------------------------
>
> Duncan Murdoch
>
>
> On 26/10/2019 4:54 p.m., Luis-Miguel Rodr?guez Rojas wrote:
>> Hello Duncan,
>>
>> Thanks for your quick response!
>>
>> I tried re-building and re-submitting and I'm still getting the?same
>> error:
>> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Windows/00check.log
>>
>> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Debian/00check.log
>>
>>
>> I've made the tarball temporarily available directly in the
>> repository in case that helps at all:
>> https://github.com/lmrodriguezr/enveomics/blob/master/enveomics.R_1.5.0.tar.gz
>>
>>
>> Thanks a lot!
>> Miguel.
>>
>> -- 
>> Luis M. Rodriguez-R, Ph.D.
>> [ https://rodriguez-r.com <https://rodriguez-r.com/>?]
>> ---------------------------------
>> Research Engineer
>> Georgia Institute of Technology
>> 311 Ferst Drive, ES&T, Room 3324
>> Atlanta, GA 30332, USA
>> [ http://enve-omics.gatech.edu/?]
>>
>>
>>
>> On Sat, Oct 26, 2019 at 1:39 PM Duncan Murdoch
>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>> ??? On 26/10/2019 11:39 a.m., Luis-Miguel Rodr?guez Rojas wrote:
>> ???? > Dear all,
>> ???? >
>> ???? > I maintain a package that has data fields, and didn't have any
>> ??? problems
>> ???? > with this before. However, in my latest update, I'm getting the
>> ??? following
>> ???? > error message from the CRAN tests:
>> ???? >
>> ???? > Flavor: r-devel-linux-x86_64-debian-gcc,
>> r-devel-windows-ix86+x86_64
>> ???? > Check: for code/documentation mismatches, Result: WARNING
>> ???? >? ? Variables with usage in documentation object 'growth.curves'
>> ??? but not in
>> ???? > code:
>> ???? >? ? ? 'growth.curves'
>> ???? >
>> ???? >? ? Variables with usage in documentation object 'phyla.counts'
>> ??? but not in
>> ???? > code:
>> ???? >? ? ? 'phyla.counts'
>>
>> ??? I'm not seeing those messages when testing your package in the
>> same R
>> ??? version as win-builder used, so it could be a transient issue, or a
>> ??? problem with the tarball that you submitted.? In either case, I'd
>> ??? suggest just trying again:? rebuild and submit.
>>
>> ??? Duncan Murdoch
>>
>> ???? >
>> ???? > The variables are indeed NOT in the code, because they're only to
>> ??? be used
>> ???? > in the examples. In this version I moved my documentation from
>> ??? the old (now
>> ???? > defunct) inlinedocs to ROxygen2. In the previous form, I had to
>> ??? define a
>> ???? > structure in the code including both the function and the
>> example, so
>> ???? > technically the code was using the variables. In the new form, I
>> ??? simply
>> ???? > define the examples with the @examples tag (that ends up in the
>> ??? .rd file
>> ???? > within an \examples{} block).
>> ???? >
>> ???? > Does anyone have any idea on how I should define data in the code
>> ??? to avoid
>> ???? > this issue? I could simply add the example lines after the
>> return (so
>> ???? > they're never reached), but that sounds like a horrible hack.
>> ???? >
>> ???? > Just in case it's useful:
>> ???? > GitHub repository (inside the enveomics.R folder):
>> ???? > https://github.com/lmrodriguezr/enveomics/
>> ???? > Full test output:
>> ???? >
>> ???
>> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log
>> ???? >
>> ???? > Thanks!
>> ???? > Miguel.
>> ???? >
>> ???? >
>> ???? > --
>> ???? > Luis M. Rodriguez-R, Ph.D.
>> ???? > [ https://rodriguez-r.com ]
>> ???? > ---------------------------------
>> ???? > Research Engineer
>> ???? > Georgia Institute of Technology
>> ???? > 311 Ferst Drive, ES&T, Room 3324
>> ???? > Atlanta, GA 30332, USA
>> ???? > [ http://enve-omics.gatech.edu/ ]
>> ???? >
>> ???? >? ? ? ?[[alternative HTML version deleted]]
>> ???? >
>> ???? > ______________________________________________
>> ???? > R-package-devel at r-project.org
>> ??? <mailto:R-package-devel at r-project.org> mailing list
>> ???? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> ???? >
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Xavier Robin, PhD
University of Basel | Swiss Institute of Bioinformatics
Biozentrum - Klingelbergstrasse 50/70 - 4056 Basel
t: +41 61 207 18 77 | m: +41 78 865 09 01
Xavier.Robin at sib.swiss - http://www.sib.swiss


	[[alternative HTML version deleted]]


From |mrodr|guezr @end|ng |rom gm@||@com  Sun Oct 27 11:04:53 2019
From: |mrodr|guezr @end|ng |rom gm@||@com (=?UTF-8?Q?Luis=2DMiguel_Rodr=C3=ADguez_Rojas?=)
Date: Sun, 27 Oct 2019 06:04:53 -0400
Subject: [R-pkg-devel] {Disarmed} Re:  Data docs
In-Reply-To: <34918922-6eb1-5908-ba1a-0bd4b7ee3f5a@sib.swiss>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
 <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
 <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
 <60bd61a7-e93e-d667-eceb-42aeb73f8c60@gmail.com>
 <34918922-6eb1-5908-ba1a-0bd4b7ee3f5a@sib.swiss>
Message-ID: <CA+dyuF7v99GkHu6MQkKYnx3tsPxjstx6W6zUfrct4WHdQLyAKQ@mail.gmail.com>

Thanks a lot Xavier!
This solved my issue.

Best,
Miguel.

--
Luis M. Rodriguez-R, Ph.D.
[ https://rodriguez-r.com ]
---------------------------------
Research Engineer
Georgia Institute of Technology
311 Ferst Drive, ES&T, Room 3324
Atlanta, GA 30332, USA
[ http://enve-omics.gatech.edu/ ]



On Sun, Oct 27, 2019 at 3:09 AM Xavier Robin <Xavier.Robin at sib.swiss> wrote:

> Hi,
>
> It seems you have LazyLoad in your DESCRIPTION:
>
> LazyLoad: yes
>
> I ran into the same warning a few months ago and realized that LazyLoad
> has been ignored since R 2.14.0. As a consequence your dataset is not
> actually loaded lazily, which triggers the warning.
>
> Apparently the new way to lazy load a dataset is to use LazyData in the
> DESCRIPTION:
>
> LazyData: yes
>
> I don't know in which R version LazyData was introduced, but I expect
> around the same time.
>
>
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file
>
> I ended up making the following change, and the warning disappeared:
>
>
> https://github.com/xrobin/pROC/commit/77bbb151412643628f2549868700325c8e47cad4
>
> I hope it helps.
> Xavier
>
>
> On 27.10.19 02:14, Duncan Murdoch wrote:
>
> I think this is a bug.  It starts to appear in R-devel revision 76780,
>
> ------------------------------------------------------------------------
> r76780 | hornik | 2019-07-04 14:55:52 -0400 (Thu, 04 Jul 2019) | 1 line
>
> Tweaks for c76774.
> ------------------------------------------------------------------------
>
> where the default for a new test is set to TRUE.  The new test was
> introduced in 76774,
>
> ------------------------------------------------------------------------
> r76774 | hornik | 2019-07-03 05:02:40 -0400 (Wed, 03 Jul 2019) | 2 lines
>
> Have codoc() report variables in usages not in the code.
> (Optionally for now).
> ------------------------------------------------------------------------
>
> Duncan Murdoch
>
>
> On 26/10/2019 4:54 p.m., Luis-Miguel Rodr?guez Rojas wrote:
>
> Hello Duncan,
>
> Thanks for your quick response!
>
> I tried re-building and re-submitting and I'm still getting the same
> error:
>
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Windows/00check.log
>
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Debian/00check.log
>
> I've made the tarball temporarily available directly in the repository in
> case that helps at all:
>
> https://github.com/lmrodriguezr/enveomics/blob/master/enveomics.R_1.5.0.tar.gz
>
> Thanks a lot!
> Miguel.
>
> --
> Luis M. Rodriguez-R, Ph.D.
> [ https://rodriguez-r.com <https://rodriguez-r.com/>
> <https://rodriguez-r.com/> ]
> ---------------------------------
> Research Engineer
> Georgia Institute of Technology
> 311 Ferst Drive, ES&T, Room 3324
> Atlanta, GA 30332, USA
> [ http://enve-omics.gatech.edu/ ]
>
>
>
> On Sat, Oct 26, 2019 at 1:39 PM Duncan Murdoch <murdoch.duncan at gmail.com *MailScanner
> has detected a possible fraud attempt from "gmail.com" claiming to be*
> <mailto:murdoch.duncan at gmail.com> <murdoch.duncan at gmail.com>> wrote:
>
>     On 26/10/2019 11:39 a.m., Luis-Miguel Rodr?guez Rojas wrote:
>      > Dear all,
>      >
>      > I maintain a package that has data fields, and didn't have any
>     problems
>      > with this before. However, in my latest update, I'm getting the
>     following
>      > error message from the CRAN tests:
>      >
>      > Flavor: r-devel-linux-x86_64-debian-gcc,
> r-devel-windows-ix86+x86_64
>      > Check: for code/documentation mismatches, Result: WARNING
>      >    Variables with usage in documentation object 'growth.curves'
>     but not in
>      > code:
>      >      'growth.curves'
>      >
>      >    Variables with usage in documentation object 'phyla.counts'
>     but not in
>      > code:
>      >      'phyla.counts'
>
>     I'm not seeing those messages when testing your package in the same R
>     version as win-builder used, so it could be a transient issue, or a
>     problem with the tarball that you submitted.  In either case, I'd
>     suggest just trying again:  rebuild and submit.
>
>     Duncan Murdoch
>
>      >
>      > The variables are indeed NOT in the code, because they're only to
>     be used
>      > in the examples. In this version I moved my documentation from
>     the old (now
>      > defunct) inlinedocs to ROxygen2. In the previous form, I had to
>     define a
>      > structure in the code including both the function and the example,
> so
>      > technically the code was using the variables. In the new form, I
>     simply
>      > define the examples with the @examples tag (that ends up in the
>     .rd file
>      > within an \examples{} block).
>      >
>      > Does anyone have any idea on how I should define data in the code
>     to avoid
>      > this issue? I could simply add the example lines after the return
> (so
>      > they're never reached), but that sounds like a horrible hack.
>      >
>      > Just in case it's useful:
>      > GitHub repository (inside the enveomics.R folder):
>      > https://github.com/lmrodriguezr/enveomics/
>      > Full test output:
>      >
>
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log
>      >
>      > Thanks!
>      > Miguel.
>      >
>      >
>      > --
>      > Luis M. Rodriguez-R, Ph.D.
>      > [ https://rodriguez-r.com ]
>      > ---------------------------------
>      > Research Engineer
>      > Georgia Institute of Technology
>      > 311 Ferst Drive, ES&T, Room 3324
>      > Atlanta, GA 30332, USA
>      > [ http://enve-omics.gatech.edu/ ]
>      >
>      >       [[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     *MailScanner has detected a possible fraud attempt from
> "r-project.org" claiming to be* <mailto:R-package-devel at r-project.org>
> <R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Xavier Robin, PhD
> University of Basel | Swiss Institute of Bioinformatics
> Biozentrum - Klingelbergstrasse 50/70 - 4056 Basel
> t: +41 61 207 18 77 | m: +41 78 865 09 01Xavier.Robin at sib.swiss - http://www.sib.swiss
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Oct 27 20:34:34 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 27 Oct 2019 15:34:34 -0400
Subject: [R-pkg-devel] Bug in checks in R-devel (was: Data docs)
In-Reply-To: <CA+dyuF7v99GkHu6MQkKYnx3tsPxjstx6W6zUfrct4WHdQLyAKQ@mail.gmail.com>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
 <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
 <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
 <60bd61a7-e93e-d667-eceb-42aeb73f8c60@gmail.com>
 <34918922-6eb1-5908-ba1a-0bd4b7ee3f5a@sib.swiss>
 <CA+dyuF7v99GkHu6MQkKYnx3tsPxjstx6W6zUfrct4WHdQLyAKQ@mail.gmail.com>
Message-ID: <eb86ec3d-c7ab-9cc3-e1dc-897a95d3f16e@gmail.com>

On 27/10/2019 6:04 a.m., Luis-Miguel Rodr?guez Rojas wrote:
> Thanks a lot Xavier!
> This solved my issue.

This seems like a simple workaround for the bug.  Perhaps "LazyData: 
yes" should become the default.  I don't know what are the advantages of 
the current "LazyData: no" default.

BTW, another issue is that the environment variable controlling this 
test,  "_R_CHECK_CODOC_VARIABLES_IN_USAGES_", doesn't appear to be 
documented.  I did a fairly rough search through the sources for other 
undocumented check variables, and found this list:

  [1] "_R_CHECK_CODOC_VARIABLES_IN_USAGES_"
  [2] "_R_CHECK_CRAN_INCOMING_ASPELL_RECHECK_MAYBE_"
  [3] "_R_CHECK_CRAN_INCOMING_ASPELL_RECHECK_START_"
  [4] "_R_CHECK_CRAN_INCOMING_CHECK_FILE_URIS_"
  [5] "_R_CHECK_CRAN_INCOMING_DESCR_BAD_START_RECHECK_MAYBE_"
  [6] "_R_CHECK_CRAN_INCOMING_DESCR_BAD_START_RECHECK_START_"
  [7] "_R_CHECK_CRAN_INCOMING_GNU_MAKE_RECHECK_MAYBE_"
  [8] "_R_CHECK_CRAN_INCOMING_GNU_MAKE_RECHECK_START_"
  [9] "_R_CHECK_CRAN_INCOMING_NOTE_GNU_MAKE_"
[10] "_R_CHECK_CRAN_INCOMING_SKIP_DATES_"
[11] "_R_CHECK_CRAN_INCOMING_SKIP_DOI_CHECKS_"
[12] "_R_CHECK_CRAN_INCOMING_SKIP_URL_CHECKS_IF_REMOTE_"
[13] "_R_CHECK_CRAN_INCOMING_SKIP_VERSIONS_"
[14] "_R_CHECK_CRAN_INCOMING_TITLE_CASE_RECHECK_MAYBE_"
[15] "_R_CHECK_CRAN_INCOMING_TITLE_CASE_RECHECK_START_"
[16] "_R_CHECK_CRAN_INCOMING_TITLE_INCLUDES_NAME_RECHECK_MAYBE_"
[17] "_R_CHECK_CRAN_INCOMING_TITLE_INCLUDES_NAME_RECHECK_START_"
[18] "_R_CHECK_CRAN_INCOMING_USE_ASPELL_"
[19] "_R_CHECK_CRAN_STATUS_SUMMARY_"
[20] "_R_CHECK_FF_AS_CRAN_"
[21] "_R_CHECK_FILE_TIMES_TOL_"
[22] "_R_CHECK_FUTURE_FILE_TIMESTAMPS_LEEWAY_"
[23] "_R_CHECK_MAINTAINER_ADDRESS_"
[24] "_R_CHECK_PACKAGE_DATASETS_SUPPRESS_NOTES_"
[25] "_R_CHECK_PACKAGE_DEPENDS_IGNORE_MISSING_ENHANCES_"
[26] "_R_CHECK_PACKAGES_USED_CRAN_INCOMING_NOTES_"
[27] "_R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_"
[28] "_R_CHECK_RD_CONTENTS_KEYWORDS_"
[29] "_R_CHECK_SIZE_OF_TARBALL_"
[30] "_R_CHECK_SRC_MINUS_W_SOMETIMES_UNINITIALIZED_"
[31] "_R_CHECK_STANGLE_WARNINGS_"
[32] "_R_CHECK_SUPPRESS_RANDR_MESSAGE_"
[33] "_R_CHECK_UNLOAD_NAMESPACES_"
[34] "_R_CHECK_URLS_USE_CURL_"
[35] "_R_CHECK_VIGNETTE_TITLES_"
[36] "_R_CHECK_VIGNETTES_SKIP_RUN_MAYBE_"

Some of these (including _R_CHECK_CODOC_VARIABLES_IN_USAGES_) may be 
intended for internal use only; I'm not even certain the others are used 
in the checks.  All I was looking for were patterns in the source using

   grep -r _R_CHECK_ *

and within those lines I assumed ones with the pattern Sys.getenv("...") 
were actually environment variables being used, and ones in files in the 
doc directory were documented.  The ones listed above appear to be used 
but not documented.

Duncan Murdoch

> 
> Best,
> Miguel.
> 
> --
> Luis M. Rodriguez-R, Ph.D.
> [ https://rodriguez-r.com <https://rodriguez-r.com/>?]
> ---------------------------------
> Research Engineer
> Georgia Institute of Technology
> 311 Ferst Drive, ES&T, Room 3324
> Atlanta, GA 30332, USA
> [ http://enve-omics.gatech.edu/?]
> 
> 
> 
> On Sun, Oct 27, 2019 at 3:09 AM Xavier Robin <Xavier.Robin at sib.swiss> wrote:
> 
>     Hi,
> 
>     It seems you have LazyLoad in your DESCRIPTION:
> 
>     LazyLoad: yes
> 
>     I ran into the same warning a few months ago and realized that
>     LazyLoad has been ignored since R 2.14.0. As a consequence your
>     dataset is not actually loaded lazily, which triggers the warning.
> 
>     Apparently the new way to lazy load a dataset is to use LazyData in
>     the DESCRIPTION:
> 
>     LazyData: yes
> 
>     I don't know in which R version LazyData was introduced, but I
>     expect around the same time.
> 
>     https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file
> 
>     I ended up making the following change, and the warning disappeared:
> 
>     https://github.com/xrobin/pROC/commit/77bbb151412643628f2549868700325c8e47cad4
> 
>     I hope it helps.
>     Xavier
> 
> 
>     On 27.10.19 02:14, Duncan Murdoch wrote:
>>     I think this is a bug.? It starts to appear in R-devel revision
>>     76780,
>>
>>     ------------------------------------------------------------------------
>>
>>     r76780 | hornik | 2019-07-04 14:55:52 -0400 (Thu, 04 Jul 2019) | 1
>>     line
>>
>>     Tweaks for c76774.
>>     ------------------------------------------------------------------------
>>
>>
>>     where the default for a new test is set to TRUE.? The new test was
>>     introduced in 76774,
>>
>>     ------------------------------------------------------------------------
>>
>>     r76774 | hornik | 2019-07-03 05:02:40 -0400 (Wed, 03 Jul 2019) | 2
>>     lines
>>
>>     Have codoc() report variables in usages not in the code.
>>     (Optionally for now).
>>     ------------------------------------------------------------------------
>>
>>
>>     Duncan Murdoch
>>
>>
>>     On 26/10/2019 4:54 p.m., Luis-Miguel Rodr?guez Rojas wrote:
>>>     Hello Duncan,
>>>
>>>     Thanks for your quick response!
>>>
>>>     I tried re-building and re-submitting and I'm still getting
>>>     the?same error:
>>>     https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Windows/00check.log
>>>
>>>     https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Debian/00check.log
>>>
>>>
>>>     I've made the tarball temporarily available directly in the
>>>     repository in case that helps at all:
>>>     https://github.com/lmrodriguezr/enveomics/blob/master/enveomics.R_1.5.0.tar.gz
>>>
>>>
>>>     Thanks a lot!
>>>     Miguel.
>>>
>>>     -- 
>>>     Luis M. Rodriguez-R, Ph.D.
>>>     [ https://rodriguez-r.com <https://rodriguez-r.com/>
>>>     <https://rodriguez-r.com/>?]
>>>     ---------------------------------
>>>     Research Engineer
>>>     Georgia Institute of Technology
>>>     311 Ferst Drive, ES&T, Room 3324
>>>     Atlanta, GA 30332, USA
>>>     [ http://enve-omics.gatech.edu/?]
>>>
>>>
>>>
>>>     On Sat, Oct 26, 2019 at 1:39 PM Duncan Murdoch
>>>     <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>>>     *MailScanner has detected a possible fraud attempt from
>>>     "gmail.com" claiming to be* <mailto:murdoch.duncan at gmail.com>
>>>     <mailto:murdoch.duncan at gmail.com>> wrote:
>>>
>>>     ??? On 26/10/2019 11:39 a.m., Luis-Miguel Rodr?guez Rojas wrote:
>>>     ???? > Dear all,
>>>     ???? >
>>>     ???? > I maintain a package that has data fields, and didn't have
>>>     any
>>>     ??? problems
>>>     ???? > with this before. However, in my latest update, I'm
>>>     getting the
>>>     ??? following
>>>     ???? > error message from the CRAN tests:
>>>     ???? >
>>>     ???? > Flavor: r-devel-linux-x86_64-debian-gcc,
>>>     r-devel-windows-ix86+x86_64
>>>     ???? > Check: for code/documentation mismatches, Result: WARNING
>>>     ???? >? ? Variables with usage in documentation object
>>>     'growth.curves'
>>>     ??? but not in
>>>     ???? > code:
>>>     ???? >? ? ? 'growth.curves'
>>>     ???? >
>>>     ???? >? ? Variables with usage in documentation object
>>>     'phyla.counts'
>>>     ??? but not in
>>>     ???? > code:
>>>     ???? >? ? ? 'phyla.counts'
>>>
>>>     ??? I'm not seeing those messages when testing your package in
>>>     the same R
>>>     ??? version as win-builder used, so it could be a transient
>>>     issue, or a
>>>     ??? problem with the tarball that you submitted.? In either case,
>>>     I'd
>>>     ??? suggest just trying again:? rebuild and submit.
>>>
>>>     ??? Duncan Murdoch
>>>
>>>     ???? >
>>>     ???? > The variables are indeed NOT in the code, because they're
>>>     only to
>>>     ??? be used
>>>     ???? > in the examples. In this version I moved my documentation
>>>     from
>>>     ??? the old (now
>>>     ???? > defunct) inlinedocs to ROxygen2. In the previous form, I
>>>     had to
>>>     ??? define a
>>>     ???? > structure in the code including both the function and the
>>>     example, so
>>>     ???? > technically the code was using the variables. In the new
>>>     form, I
>>>     ??? simply
>>>     ???? > define the examples with the @examples tag (that ends up
>>>     in the
>>>     ??? .rd file
>>>     ???? > within an \examples{} block).
>>>     ???? >
>>>     ???? > Does anyone have any idea on how I should define data in
>>>     the code
>>>     ??? to avoid
>>>     ???? > this issue? I could simply add the example lines after the
>>>     return (so
>>>     ???? > they're never reached), but that sounds like a horrible hack.
>>>     ???? >
>>>     ???? > Just in case it's useful:
>>>     ???? > GitHub repository (inside the enveomics.R folder):
>>>     ???? > https://github.com/lmrodriguezr/enveomics/
>>>     ???? > Full test output:
>>>     ???? >
>>>     https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log
>>>     ???? >
>>>     ???? > Thanks!
>>>     ???? > Miguel.
>>>     ???? >
>>>     ???? >
>>>     ???? > --
>>>     ???? > Luis M. Rodriguez-R, Ph.D.
>>>     ???? > [ https://rodriguez-r.com ]
>>>     ???? > ---------------------------------
>>>     ???? > Research Engineer
>>>     ???? > Georgia Institute of Technology
>>>     ???? > 311 Ferst Drive, ES&T, Room 3324
>>>     ???? > Atlanta, GA 30332, USA
>>>     ???? > [ http://enve-omics.gatech.edu/ ]
>>>     ???? >
>>>     ???? >? ? ? ?[[alternative HTML version deleted]]
>>>     ???? >
>>>     ???? > ______________________________________________
>>>     ???? > R-package-devel at r-project.org
>>>     <mailto:R-package-devel at r-project.org>
>>>     *MailScanner has detected a possible fraud attempt from
>>>     "r-project.org" claiming to be*
>>>     <mailto:R-package-devel at r-project.org>
>>>     <mailto:R-package-devel at r-project.org> mailing list
>>>     ???? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>     ???? >
>>>
>>
>>     ______________________________________________
>>     R-package-devel at r-project.org
>>     <mailto:R-package-devel at r-project.org> mailing list
>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
>     -- 
>     Xavier Robin, PhD
>     University of Basel | Swiss Institute of Bioinformatics
>     Biozentrum - Klingelbergstrasse 50/70 - 4056 Basel
>     t: +41 61 207 18 77 | m: +41 78 865 09 01
>     Xavier.Robin at sib.swiss  <mailto:Xavier.Robin at sib.swiss>  -http://www.sib.swiss
>


From @@@@k|evt@ov @end|ng |rom gm@||@com  Mon Oct 28 09:56:33 2019
From: @@@@k|evt@ov @end|ng |rom gm@||@com (=?utf-8?B?0JDRgNGC0ZHQvCDQmtC70LXQstGG0L7Qsg==?=)
Date: Mon, 28 Oct 2019 15:56:33 +0700
Subject: [R-pkg-devel] WinBuilder Debian: GnuTLS recv error
Message-ID: <13103573.rj55DKSvM1@unikum-desktop>

Hi,

I tried to use curl in examples and get the following error:
GnuTLS recv error (-110): The TLS connection was non-properly terminated.

Can I solve this without dontrun?

Below code of example and traceback:

> # detect encoding of the web pages content
> if (require("curl")) {
+   fetch_url <- function(u) curl_fetch_memory(u)$content
+   detect_raw_enc(fetch_url("https://www.corriere.it"))
+   detect_raw_enc(fetch_url("https://www.vk.com"))
+   detect_raw_enc(fetch_url("https://www.qq.com"))
+   detect_raw_enc(fetch_url("https://kakaku.com"))
+   detect_raw_enc(fetch_url("https://www.incruit.com/"))
+ }
Loading required package: curl
Error in curl_fetch_memory(u) : 
  GnuTLS recv error (-110): The TLS connection was non-properly terminated.
Calls: detect_raw_enc -> fetch_url -> curl_fetch_memory
Execution halted

-- 
Artem Klevtsov


From wdun|@p @end|ng |rom t|bco@com  Mon Oct 28 18:01:23 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Mon, 28 Oct 2019 10:01:23 -0700
Subject: [R-pkg-devel] Bug in checks in R-devel (was: Data docs)
In-Reply-To: <eb86ec3d-c7ab-9cc3-e1dc-897a95d3f16e@gmail.com>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
 <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
 <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
 <60bd61a7-e93e-d667-eceb-42aeb73f8c60@gmail.com>
 <34918922-6eb1-5908-ba1a-0bd4b7ee3f5a@sib.swiss>
 <CA+dyuF7v99GkHu6MQkKYnx3tsPxjstx6W6zUfrct4WHdQLyAKQ@mail.gmail.com>
 <eb86ec3d-c7ab-9cc3-e1dc-897a95d3f16e@gmail.com>
Message-ID: <CAF8bMcaO5egYJ86SYEJjqeG2KYT=AQ+ApJPnN-EK++H6ZBDaiQ@mail.gmail.com>

The Matrix package explicitly sets LazyData to "no" with a note saying that
it is necessary.

LazyData: no
LazyDataNote: not possible, since we use data/*.R *and* our classes


My notes on implementing install.packages() in TERR include

When R's install.packages() processes *.R files in the package's data
directory, they may use functions defined in the package's R directory,
whether or not LazyData is yes or no.

If LazyData is no (but not if yes), then the *.R files in data can refer to
files copied from pkg/inst/blah to pkg/blah.

TERR must be able to do this to install the Matrix package from source.


Hence changing the default to "yes" may break the installation of some
packages.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Sun, Oct 27, 2019 at 12:35 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 27/10/2019 6:04 a.m., Luis-Miguel Rodr?guez Rojas wrote:
> > Thanks a lot Xavier!
> > This solved my issue.
>
> This seems like a simple workaround for the bug.  Perhaps "LazyData:
> yes" should become the default.  I don't know what are the advantages of
> the current "LazyData: no" default.
>
> BTW, another issue is that the environment variable controlling this
> test,  "_R_CHECK_CODOC_VARIABLES_IN_USAGES_", doesn't appear to be
> documented.  I did a fairly rough search through the sources for other
> undocumented check variables, and found this list:
>
>   [1] "_R_CHECK_CODOC_VARIABLES_IN_USAGES_"
>   [2] "_R_CHECK_CRAN_INCOMING_ASPELL_RECHECK_MAYBE_"
>   [3] "_R_CHECK_CRAN_INCOMING_ASPELL_RECHECK_START_"
>   [4] "_R_CHECK_CRAN_INCOMING_CHECK_FILE_URIS_"
>   [5] "_R_CHECK_CRAN_INCOMING_DESCR_BAD_START_RECHECK_MAYBE_"
>   [6] "_R_CHECK_CRAN_INCOMING_DESCR_BAD_START_RECHECK_START_"
>   [7] "_R_CHECK_CRAN_INCOMING_GNU_MAKE_RECHECK_MAYBE_"
>   [8] "_R_CHECK_CRAN_INCOMING_GNU_MAKE_RECHECK_START_"
>   [9] "_R_CHECK_CRAN_INCOMING_NOTE_GNU_MAKE_"
> [10] "_R_CHECK_CRAN_INCOMING_SKIP_DATES_"
> [11] "_R_CHECK_CRAN_INCOMING_SKIP_DOI_CHECKS_"
> [12] "_R_CHECK_CRAN_INCOMING_SKIP_URL_CHECKS_IF_REMOTE_"
> [13] "_R_CHECK_CRAN_INCOMING_SKIP_VERSIONS_"
> [14] "_R_CHECK_CRAN_INCOMING_TITLE_CASE_RECHECK_MAYBE_"
> [15] "_R_CHECK_CRAN_INCOMING_TITLE_CASE_RECHECK_START_"
> [16] "_R_CHECK_CRAN_INCOMING_TITLE_INCLUDES_NAME_RECHECK_MAYBE_"
> [17] "_R_CHECK_CRAN_INCOMING_TITLE_INCLUDES_NAME_RECHECK_START_"
> [18] "_R_CHECK_CRAN_INCOMING_USE_ASPELL_"
> [19] "_R_CHECK_CRAN_STATUS_SUMMARY_"
> [20] "_R_CHECK_FF_AS_CRAN_"
> [21] "_R_CHECK_FILE_TIMES_TOL_"
> [22] "_R_CHECK_FUTURE_FILE_TIMESTAMPS_LEEWAY_"
> [23] "_R_CHECK_MAINTAINER_ADDRESS_"
> [24] "_R_CHECK_PACKAGE_DATASETS_SUPPRESS_NOTES_"
> [25] "_R_CHECK_PACKAGE_DEPENDS_IGNORE_MISSING_ENHANCES_"
> [26] "_R_CHECK_PACKAGES_USED_CRAN_INCOMING_NOTES_"
> [27] "_R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_"
> [28] "_R_CHECK_RD_CONTENTS_KEYWORDS_"
> [29] "_R_CHECK_SIZE_OF_TARBALL_"
> [30] "_R_CHECK_SRC_MINUS_W_SOMETIMES_UNINITIALIZED_"
> [31] "_R_CHECK_STANGLE_WARNINGS_"
> [32] "_R_CHECK_SUPPRESS_RANDR_MESSAGE_"
> [33] "_R_CHECK_UNLOAD_NAMESPACES_"
> [34] "_R_CHECK_URLS_USE_CURL_"
> [35] "_R_CHECK_VIGNETTE_TITLES_"
> [36] "_R_CHECK_VIGNETTES_SKIP_RUN_MAYBE_"
>
> Some of these (including _R_CHECK_CODOC_VARIABLES_IN_USAGES_) may be
> intended for internal use only; I'm not even certain the others are used
> in the checks.  All I was looking for were patterns in the source using
>
>    grep -r _R_CHECK_ *
>
> and within those lines I assumed ones with the pattern Sys.getenv("...")
> were actually environment variables being used, and ones in files in the
> doc directory were documented.  The ones listed above appear to be used
> but not documented.
>
> Duncan Murdoch
>
> >
> > Best,
> > Miguel.
> >
> > --
> > Luis M. Rodriguez-R, Ph.D.
> > [ https://rodriguez-r.com <https://rodriguez-r.com/> ]
> > ---------------------------------
> > Research Engineer
> > Georgia Institute of Technology
> > 311 Ferst Drive, ES&T, Room 3324
> > Atlanta, GA 30332, USA
> > [ http://enve-omics.gatech.edu/ ]
> >
> >
> >
> > On Sun, Oct 27, 2019 at 3:09 AM Xavier Robin <Xavier.Robin at sib.swiss>
> wrote:
> >
> >     Hi,
> >
> >     It seems you have LazyLoad in your DESCRIPTION:
> >
> >     LazyLoad: yes
> >
> >     I ran into the same warning a few months ago and realized that
> >     LazyLoad has been ignored since R 2.14.0. As a consequence your
> >     dataset is not actually loaded lazily, which triggers the warning.
> >
> >     Apparently the new way to lazy load a dataset is to use LazyData in
> >     the DESCRIPTION:
> >
> >     LazyData: yes
> >
> >     I don't know in which R version LazyData was introduced, but I
> >     expect around the same time.
> >
> >
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file
> >
> >     I ended up making the following change, and the warning disappeared:
> >
> >
> https://github.com/xrobin/pROC/commit/77bbb151412643628f2549868700325c8e47cad4
> >
> >     I hope it helps.
> >     Xavier
> >
> >
> >     On 27.10.19 02:14, Duncan Murdoch wrote:
> >>     I think this is a bug.  It starts to appear in R-devel revision
> >>     76780,
> >>
> >>
>  ------------------------------------------------------------------------
> >>
> >>     r76780 | hornik | 2019-07-04 14:55:52 -0400 (Thu, 04 Jul 2019) | 1
> >>     line
> >>
> >>     Tweaks for c76774.
> >>
>  ------------------------------------------------------------------------
> >>
> >>
> >>     where the default for a new test is set to TRUE.  The new test was
> >>     introduced in 76774,
> >>
> >>
>  ------------------------------------------------------------------------
> >>
> >>     r76774 | hornik | 2019-07-03 05:02:40 -0400 (Wed, 03 Jul 2019) | 2
> >>     lines
> >>
> >>     Have codoc() report variables in usages not in the code.
> >>     (Optionally for now).
> >>
>  ------------------------------------------------------------------------
> >>
> >>
> >>     Duncan Murdoch
> >>
> >>
> >>     On 26/10/2019 4:54 p.m., Luis-Miguel Rodr?guez Rojas wrote:
> >>>     Hello Duncan,
> >>>
> >>>     Thanks for your quick response!
> >>>
> >>>     I tried re-building and re-submitting and I'm still getting
> >>>     the same error:
> >>>
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Windows/00check.log
> >>>
> >>>
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Debian/00check.log
> >>>
> >>>
> >>>     I've made the tarball temporarily available directly in the
> >>>     repository in case that helps at all:
> >>>
> https://github.com/lmrodriguezr/enveomics/blob/master/enveomics.R_1.5.0.tar.gz
> >>>
> >>>
> >>>     Thanks a lot!
> >>>     Miguel.
> >>>
> >>>     --
> >>>     Luis M. Rodriguez-R, Ph.D.
> >>>     [ https://rodriguez-r.com <https://rodriguez-r.com/>
> >>>     <https://rodriguez-r.com/> ]
> >>>     ---------------------------------
> >>>     Research Engineer
> >>>     Georgia Institute of Technology
> >>>     311 Ferst Drive, ES&T, Room 3324
> >>>     Atlanta, GA 30332, USA
> >>>     [ http://enve-omics.gatech.edu/ ]
> >>>
> >>>
> >>>
> >>>     On Sat, Oct 26, 2019 at 1:39 PM Duncan Murdoch
> >>>     <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
> >>>     *MailScanner has detected a possible fraud attempt from
> >>>     "gmail.com" claiming to be* <mailto:murdoch.duncan at gmail.com>
> >>>     <mailto:murdoch.duncan at gmail.com>> wrote:
> >>>
> >>>         On 26/10/2019 11:39 a.m., Luis-Miguel Rodr?guez Rojas wrote:
> >>>          > Dear all,
> >>>          >
> >>>          > I maintain a package that has data fields, and didn't have
> >>>     any
> >>>         problems
> >>>          > with this before. However, in my latest update, I'm
> >>>     getting the
> >>>         following
> >>>          > error message from the CRAN tests:
> >>>          >
> >>>          > Flavor: r-devel-linux-x86_64-debian-gcc,
> >>>     r-devel-windows-ix86+x86_64
> >>>          > Check: for code/documentation mismatches, Result: WARNING
> >>>          >    Variables with usage in documentation object
> >>>     'growth.curves'
> >>>         but not in
> >>>          > code:
> >>>          >      'growth.curves'
> >>>          >
> >>>          >    Variables with usage in documentation object
> >>>     'phyla.counts'
> >>>         but not in
> >>>          > code:
> >>>          >      'phyla.counts'
> >>>
> >>>         I'm not seeing those messages when testing your package in
> >>>     the same R
> >>>         version as win-builder used, so it could be a transient
> >>>     issue, or a
> >>>         problem with the tarball that you submitted.  In either case,
> >>>     I'd
> >>>         suggest just trying again:  rebuild and submit.
> >>>
> >>>         Duncan Murdoch
> >>>
> >>>          >
> >>>          > The variables are indeed NOT in the code, because they're
> >>>     only to
> >>>         be used
> >>>          > in the examples. In this version I moved my documentation
> >>>     from
> >>>         the old (now
> >>>          > defunct) inlinedocs to ROxygen2. In the previous form, I
> >>>     had to
> >>>         define a
> >>>          > structure in the code including both the function and the
> >>>     example, so
> >>>          > technically the code was using the variables. In the new
> >>>     form, I
> >>>         simply
> >>>          > define the examples with the @examples tag (that ends up
> >>>     in the
> >>>         .rd file
> >>>          > within an \examples{} block).
> >>>          >
> >>>          > Does anyone have any idea on how I should define data in
> >>>     the code
> >>>         to avoid
> >>>          > this issue? I could simply add the example lines after the
> >>>     return (so
> >>>          > they're never reached), but that sounds like a horrible
> hack.
> >>>          >
> >>>          > Just in case it's useful:
> >>>          > GitHub repository (inside the enveomics.R folder):
> >>>          > https://github.com/lmrodriguezr/enveomics/
> >>>          > Full test output:
> >>>          >
> >>>
> https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log
> >>>          >
> >>>          > Thanks!
> >>>          > Miguel.
> >>>          >
> >>>          >
> >>>          > --
> >>>          > Luis M. Rodriguez-R, Ph.D.
> >>>          > [ https://rodriguez-r.com ]
> >>>          > ---------------------------------
> >>>          > Research Engineer
> >>>          > Georgia Institute of Technology
> >>>          > 311 Ferst Drive, ES&T, Room 3324
> >>>          > Atlanta, GA 30332, USA
> >>>          > [ http://enve-omics.gatech.edu/ ]
> >>>          >
> >>>          >       [[alternative HTML version deleted]]
> >>>          >
> >>>          > ______________________________________________
> >>>          > R-package-devel at r-project.org
> >>>     <mailto:R-package-devel at r-project.org>
> >>>     *MailScanner has detected a possible fraud attempt from
> >>>     "r-project.org" claiming to be*
> >>>     <mailto:R-package-devel at r-project.org>
> >>>     <mailto:R-package-devel at r-project.org> mailing list
> >>>          > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>          >
> >>>
> >>
> >>     ______________________________________________
> >>     R-package-devel at r-project.org
> >>     <mailto:R-package-devel at r-project.org> mailing list
> >>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >     --
> >     Xavier Robin, PhD
> >     University of Basel | Swiss Institute of Bioinformatics
> >     Biozentrum - Klingelbergstrasse 50/70 - 4056 Basel
> >     t: +41 61 207 18 77 | m: +41 78 865 09 01
> >     Xavier.Robin at sib.swiss  <mailto:Xavier.Robin at sib.swiss>  -
> http://www.sib.swiss
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Oct 28 19:03:00 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 28 Oct 2019 14:03:00 -0400
Subject: [R-pkg-devel] Not a bug in checks in R-devel
In-Reply-To: <CAF8bMcaO5egYJ86SYEJjqeG2KYT=AQ+ApJPnN-EK++H6ZBDaiQ@mail.gmail.com>
References: <CA+dyuF65hY67YOFoKnwm90my38-9Wj5QUsgVSRnD8i1_h-10DQ@mail.gmail.com>
 <b6b35b27-1035-278e-238b-572c0eb0ba9d@gmail.com>
 <CA+dyuF7qQ0LUShpmGXzayDiCLpjW4AjhV=DLG-2SVf73MZ6gAg@mail.gmail.com>
 <60bd61a7-e93e-d667-eceb-42aeb73f8c60@gmail.com>
 <34918922-6eb1-5908-ba1a-0bd4b7ee3f5a@sib.swiss>
 <CA+dyuF7v99GkHu6MQkKYnx3tsPxjstx6W6zUfrct4WHdQLyAKQ@mail.gmail.com>
 <eb86ec3d-c7ab-9cc3-e1dc-897a95d3f16e@gmail.com>
 <CAF8bMcaO5egYJ86SYEJjqeG2KYT=AQ+ApJPnN-EK++H6ZBDaiQ@mail.gmail.com>
Message-ID: <b090a406-4b51-eb24-30d9-4df301cfbebe@gmail.com>

On 28/10/2019 1:01 p.m., William Dunlap wrote:
> The Matrix package explicitly sets LazyData to "no" with a note saying 
> that it is necessary.
> 
>     LazyData: no
>     LazyDataNote: not possible, since we use data/*.R *and* our classes
> 
> 
> My notes on implementing install.packages() in TERR include
> 
>     When R's install.packages() processes *.R files in the package's
>     data directory, they may use functions defined in the package's R
>     directory, whether or not LazyData is yes or no.
> 
>     If LazyData is no (but not if yes), then the *.R files in data can
>     refer to files copied from pkg/inst/blah to pkg/blah.
> 
>     TERR must be able to do this to install the Matrix package from source.
> 
> 
> Hence changing the default to "yes" may break the installation of some 
> packages.

Thanks!  This also shows another solution to Luis-Miguel's problem.  He had

\usage{growth.curves}

in his .Rd file, but that doesn't work unless LazyData: yes is used (as 
pointed out earlier).  In fact, it is incorrect:  running

  growth.curves

in the R console gives the error

Error: object 'growth.curves' not found

Since data is not lazy-loaded, the approach used by Matrix is needed, 
i.e. an explicit call to data():

\usage{
data(growth.curves)
}

So this isn't a bug in the checks after all, it was an error in the 
package and was being reported correctly.

Duncan Murdoch

> 
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com <http://tibco.com>
> 
> 
> On Sun, Oct 27, 2019 at 12:35 PM Duncan Murdoch 
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 27/10/2019 6:04 a.m., Luis-Miguel Rodr?guez Rojas wrote:
>      > Thanks a lot Xavier!
>      > This solved my issue.
> 
>     This seems like a simple workaround for the bug.? Perhaps "LazyData:
>     yes" should become the default.? I don't know what are the
>     advantages of
>     the current "LazyData: no" default.
> 
>     BTW, another issue is that the environment variable controlling this
>     test,? "_R_CHECK_CODOC_VARIABLES_IN_USAGES_", doesn't appear to be
>     documented.? I did a fairly rough search through the sources for other
>     undocumented check variables, and found this list:
> 
>      ? [1] "_R_CHECK_CODOC_VARIABLES_IN_USAGES_"
>      ? [2] "_R_CHECK_CRAN_INCOMING_ASPELL_RECHECK_MAYBE_"
>      ? [3] "_R_CHECK_CRAN_INCOMING_ASPELL_RECHECK_START_"
>      ? [4] "_R_CHECK_CRAN_INCOMING_CHECK_FILE_URIS_"
>      ? [5] "_R_CHECK_CRAN_INCOMING_DESCR_BAD_START_RECHECK_MAYBE_"
>      ? [6] "_R_CHECK_CRAN_INCOMING_DESCR_BAD_START_RECHECK_START_"
>      ? [7] "_R_CHECK_CRAN_INCOMING_GNU_MAKE_RECHECK_MAYBE_"
>      ? [8] "_R_CHECK_CRAN_INCOMING_GNU_MAKE_RECHECK_START_"
>      ? [9] "_R_CHECK_CRAN_INCOMING_NOTE_GNU_MAKE_"
>     [10] "_R_CHECK_CRAN_INCOMING_SKIP_DATES_"
>     [11] "_R_CHECK_CRAN_INCOMING_SKIP_DOI_CHECKS_"
>     [12] "_R_CHECK_CRAN_INCOMING_SKIP_URL_CHECKS_IF_REMOTE_"
>     [13] "_R_CHECK_CRAN_INCOMING_SKIP_VERSIONS_"
>     [14] "_R_CHECK_CRAN_INCOMING_TITLE_CASE_RECHECK_MAYBE_"
>     [15] "_R_CHECK_CRAN_INCOMING_TITLE_CASE_RECHECK_START_"
>     [16] "_R_CHECK_CRAN_INCOMING_TITLE_INCLUDES_NAME_RECHECK_MAYBE_"
>     [17] "_R_CHECK_CRAN_INCOMING_TITLE_INCLUDES_NAME_RECHECK_START_"
>     [18] "_R_CHECK_CRAN_INCOMING_USE_ASPELL_"
>     [19] "_R_CHECK_CRAN_STATUS_SUMMARY_"
>     [20] "_R_CHECK_FF_AS_CRAN_"
>     [21] "_R_CHECK_FILE_TIMES_TOL_"
>     [22] "_R_CHECK_FUTURE_FILE_TIMESTAMPS_LEEWAY_"
>     [23] "_R_CHECK_MAINTAINER_ADDRESS_"
>     [24] "_R_CHECK_PACKAGE_DATASETS_SUPPRESS_NOTES_"
>     [25] "_R_CHECK_PACKAGE_DEPENDS_IGNORE_MISSING_ENHANCES_"
>     [26] "_R_CHECK_PACKAGES_USED_CRAN_INCOMING_NOTES_"
>     [27] "_R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_"
>     [28] "_R_CHECK_RD_CONTENTS_KEYWORDS_"
>     [29] "_R_CHECK_SIZE_OF_TARBALL_"
>     [30] "_R_CHECK_SRC_MINUS_W_SOMETIMES_UNINITIALIZED_"
>     [31] "_R_CHECK_STANGLE_WARNINGS_"
>     [32] "_R_CHECK_SUPPRESS_RANDR_MESSAGE_"
>     [33] "_R_CHECK_UNLOAD_NAMESPACES_"
>     [34] "_R_CHECK_URLS_USE_CURL_"
>     [35] "_R_CHECK_VIGNETTE_TITLES_"
>     [36] "_R_CHECK_VIGNETTES_SKIP_RUN_MAYBE_"
> 
>     Some of these (including _R_CHECK_CODOC_VARIABLES_IN_USAGES_) may be
>     intended for internal use only; I'm not even certain the others are
>     used
>     in the checks.? All I was looking for were patterns in the source using
> 
>      ? ?grep -r _R_CHECK_ *
> 
>     and within those lines I assumed ones with the pattern
>     Sys.getenv("...")
>     were actually environment variables being used, and ones in files in
>     the
>     doc directory were documented.? The ones listed above appear to be used
>     but not documented.
> 
>     Duncan Murdoch
> 
>      >
>      > Best,
>      > Miguel.
>      >
>      > --
>      > Luis M. Rodriguez-R, Ph.D.
>      > [ https://rodriguez-r.com <https://rodriguez-r.com/>?]
>      > ---------------------------------
>      > Research Engineer
>      > Georgia Institute of Technology
>      > 311 Ferst Drive, ES&T, Room 3324
>      > Atlanta, GA 30332, USA
>      > [ http://enve-omics.gatech.edu/?]
>      >
>      >
>      >
>      > On Sun, Oct 27, 2019 at 3:09 AM Xavier Robin
>     <Xavier.Robin at sib.swiss> wrote:
>      >
>      >? ? ?Hi,
>      >
>      >? ? ?It seems you have LazyLoad in your DESCRIPTION:
>      >
>      >? ? ?LazyLoad: yes
>      >
>      >? ? ?I ran into the same warning a few months ago and realized that
>      >? ? ?LazyLoad has been ignored since R 2.14.0. As a consequence your
>      >? ? ?dataset is not actually loaded lazily, which triggers the
>     warning.
>      >
>      >? ? ?Apparently the new way to lazy load a dataset is to use
>     LazyData in
>      >? ? ?the DESCRIPTION:
>      >
>      >? ? ?LazyData: yes
>      >
>      >? ? ?I don't know in which R version LazyData was introduced, but I
>      >? ? ?expect around the same time.
>      >
>      >
>     https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file
>      >
>      >? ? ?I ended up making the following change, and the warning
>     disappeared:
>      >
>      >
>     https://github.com/xrobin/pROC/commit/77bbb151412643628f2549868700325c8e47cad4
>      >
>      >? ? ?I hope it helps.
>      >? ? ?Xavier
>      >
>      >
>      >? ? ?On 27.10.19 02:14, Duncan Murdoch wrote:
>      >>? ? ?I think this is a bug.? It starts to appear in R-devel revision
>      >>? ? ?76780,
>      >>
>      >>   
>      ?------------------------------------------------------------------------
>      >>
>      >>? ? ?r76780 | hornik | 2019-07-04 14:55:52 -0400 (Thu, 04 Jul
>     2019) | 1
>      >>? ? ?line
>      >>
>      >>? ? ?Tweaks for c76774.
>      >>   
>      ?------------------------------------------------------------------------
>      >>
>      >>
>      >>? ? ?where the default for a new test is set to TRUE.? The new
>     test was
>      >>? ? ?introduced in 76774,
>      >>
>      >>   
>      ?------------------------------------------------------------------------
>      >>
>      >>? ? ?r76774 | hornik | 2019-07-03 05:02:40 -0400 (Wed, 03 Jul
>     2019) | 2
>      >>? ? ?lines
>      >>
>      >>? ? ?Have codoc() report variables in usages not in the code.
>      >>? ? ?(Optionally for now).
>      >>   
>      ?------------------------------------------------------------------------
>      >>
>      >>
>      >>? ? ?Duncan Murdoch
>      >>
>      >>
>      >>? ? ?On 26/10/2019 4:54 p.m., Luis-Miguel Rodr?guez Rojas wrote:
>      >>>? ? ?Hello Duncan,
>      >>>
>      >>>? ? ?Thanks for your quick response!
>      >>>
>      >>>? ? ?I tried re-building and re-submitting and I'm still getting
>      >>>? ? ?the?same error:
>      >>>
>     https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Windows/00check.log
>      >>>
>      >>>
>     https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_224156/Debian/00check.log
>      >>>
>      >>>
>      >>>? ? ?I've made the tarball temporarily available directly in the
>      >>>? ? ?repository in case that helps at all:
>      >>>
>     https://github.com/lmrodriguezr/enveomics/blob/master/enveomics.R_1.5.0.tar.gz
>      >>>
>      >>>
>      >>>? ? ?Thanks a lot!
>      >>>? ? ?Miguel.
>      >>>
>      >>>? ? ?--
>      >>>? ? ?Luis M. Rodriguez-R, Ph.D.
>      >>>? ? ?[ https://rodriguez-r.com <https://rodriguez-r.com/>
>      >>>? ? ?<https://rodriguez-r.com/>?]
>      >>>? ? ?---------------------------------
>      >>>? ? ?Research Engineer
>      >>>? ? ?Georgia Institute of Technology
>      >>>? ? ?311 Ferst Drive, ES&T, Room 3324
>      >>>? ? ?Atlanta, GA 30332, USA
>      >>>? ? ?[ http://enve-omics.gatech.edu/?]
>      >>>
>      >>>
>      >>>
>      >>>? ? ?On Sat, Oct 26, 2019 at 1:39 PM Duncan Murdoch
>      >>>? ? ?<murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>     <mailto:murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
>      >>>? ? ?*MailScanner has detected a possible fraud attempt from
>      >>>? ? ?"gmail.com <http://gmail.com>" claiming to be*
>     <mailto:murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
>      >>>? ? ?<mailto:murdoch.duncan at gmail.com
>     <mailto:murdoch.duncan at gmail.com>>> wrote:
>      >>>
>      >>>? ? ???? On 26/10/2019 11:39 a.m., Luis-Miguel Rodr?guez Rojas
>     wrote:
>      >>>? ? ????? > Dear all,
>      >>>? ? ????? >
>      >>>? ? ????? > I maintain a package that has data fields, and
>     didn't have
>      >>>? ? ?any
>      >>>? ? ???? problems
>      >>>? ? ????? > with this before. However, in my latest update, I'm
>      >>>? ? ?getting the
>      >>>? ? ???? following
>      >>>? ? ????? > error message from the CRAN tests:
>      >>>? ? ????? >
>      >>>? ? ????? > Flavor: r-devel-linux-x86_64-debian-gcc,
>      >>>? ? ?r-devel-windows-ix86+x86_64
>      >>>? ? ????? > Check: for code/documentation mismatches, Result:
>     WARNING
>      >>>? ? ????? >? ? Variables with usage in documentation object
>      >>>? ? ?'growth.curves'
>      >>>? ? ???? but not in
>      >>>? ? ????? > code:
>      >>>? ? ????? >? ? ? 'growth.curves'
>      >>>? ? ????? >
>      >>>? ? ????? >? ? Variables with usage in documentation object
>      >>>? ? ?'phyla.counts'
>      >>>? ? ???? but not in
>      >>>? ? ????? > code:
>      >>>? ? ????? >? ? ? 'phyla.counts'
>      >>>
>      >>>? ? ???? I'm not seeing those messages when testing your package in
>      >>>? ? ?the same R
>      >>>? ? ???? version as win-builder used, so it could be a transient
>      >>>? ? ?issue, or a
>      >>>? ? ???? problem with the tarball that you submitted.? In either
>     case,
>      >>>? ? ?I'd
>      >>>? ? ???? suggest just trying again:? rebuild and submit.
>      >>>
>      >>>? ? ???? Duncan Murdoch
>      >>>
>      >>>? ? ????? >
>      >>>? ? ????? > The variables are indeed NOT in the code, because
>     they're
>      >>>? ? ?only to
>      >>>? ? ???? be used
>      >>>? ? ????? > in the examples. In this version I moved my
>     documentation
>      >>>? ? ?from
>      >>>? ? ???? the old (now
>      >>>? ? ????? > defunct) inlinedocs to ROxygen2. In the previous form, I
>      >>>? ? ?had to
>      >>>? ? ???? define a
>      >>>? ? ????? > structure in the code including both the function
>     and the
>      >>>? ? ?example, so
>      >>>? ? ????? > technically the code was using the variables. In the new
>      >>>? ? ?form, I
>      >>>? ? ???? simply
>      >>>? ? ????? > define the examples with the @examples tag (that ends up
>      >>>? ? ?in the
>      >>>? ? ???? .rd file
>      >>>? ? ????? > within an \examples{} block).
>      >>>? ? ????? >
>      >>>? ? ????? > Does anyone have any idea on how I should define data in
>      >>>? ? ?the code
>      >>>? ? ???? to avoid
>      >>>? ? ????? > this issue? I could simply add the example lines
>     after the
>      >>>? ? ?return (so
>      >>>? ? ????? > they're never reached), but that sounds like a
>     horrible hack.
>      >>>? ? ????? >
>      >>>? ? ????? > Just in case it's useful:
>      >>>? ? ????? > GitHub repository (inside the enveomics.R folder):
>      >>>? ? ????? > https://github.com/lmrodriguezr/enveomics/
>      >>>? ? ????? > Full test output:
>      >>>? ? ????? >
>      >>>
>     https://win-builder.r-project.org/incoming_pretest/enveomics.R_1.5.0_20191026_032029/Windows/00check.log
>      >>>? ? ????? >
>      >>>? ? ????? > Thanks!
>      >>>? ? ????? > Miguel.
>      >>>? ? ????? >
>      >>>? ? ????? >
>      >>>? ? ????? > --
>      >>>? ? ????? > Luis M. Rodriguez-R, Ph.D.
>      >>>? ? ????? > [ https://rodriguez-r.com ]
>      >>>? ? ????? > ---------------------------------
>      >>>? ? ????? > Research Engineer
>      >>>? ? ????? > Georgia Institute of Technology
>      >>>? ? ????? > 311 Ferst Drive, ES&T, Room 3324
>      >>>? ? ????? > Atlanta, GA 30332, USA
>      >>>? ? ????? > [ http://enve-omics.gatech.edu/ ]
>      >>>? ? ????? >
>      >>>? ? ????? >? ? ? ?[[alternative HTML version deleted]]
>      >>>? ? ????? >
>      >>>? ? ????? > ______________________________________________
>      >>>? ? ????? > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>
>      >>>? ? ?<mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>>
>      >>>? ? ?*MailScanner has detected a possible fraud attempt from
>      >>>? ? ?"r-project.org <http://r-project.org>" claiming to be*
>      >>>? ? ?<mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>>
>      >>>? ? ?<mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>> mailing list
>      >>>? ? ????? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >>>? ? ????? >
>      >>>
>      >>
>      >>? ? ?______________________________________________
>      >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>      >>? ? ?<mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>      >? ? ?--
>      >? ? ?Xavier Robin, PhD
>      >? ? ?University of Basel | Swiss Institute of Bioinformatics
>      >? ? ?Biozentrum - Klingelbergstrasse 50/70 - 4056 Basel
>      >? ? ?t: +41 61 207 18 77 | m: +41 78 865 09 01
>      >? ? ?Xavier.Robin at sib.swiss? <mailto:Xavier.Robin at sib.swiss
>     <mailto:Xavier.Robin at sib.swiss>>? -http://www.sib.swiss
>      >
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kev|nykuo @end|ng |rom gm@||@com  Tue Oct 29 12:48:40 2019
From: kev|nykuo @end|ng |rom gm@||@com (Kevin Kuo)
Date: Tue, 29 Oct 2019 04:48:40 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
Message-ID: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>

Seems like all rev deps of rJava are failing Windows checks with the same
error. Might be a Java architecture mismatch issue?

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Oct 29 17:28:23 2019
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 29 Oct 2019 09:28:23 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
Message-ID: <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>


On 10/29/19 4:48 AM, Kevin Kuo wrote:
> Seems like all rev deps of rJava are failing Windows checks with the same
> error. Might be a Java architecture mismatch issue?

Copied from the rJava GitHub page:

==========


      Bug reports

Please userJava GitHub issues page 
<https://github.com/s-u/rJava/issues><https://github.com/s-u/rJava/issues> 
to report bugs.


(Seems likely that Simon would be aware of such a problem.)

============


I get no errors in Ubuntu 18.04 with:


|install.packages("rJava",,"http://rforge.net") |||||

You are supposed to offer your OS and other version details with a bug 
report.


-- 

David.

>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct 29 20:22:47 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 29 Oct 2019 12:22:47 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
Message-ID: <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>

I suspect David did not read the subject line. This is about winbuilder [1]. I don't know who runs that service (Uwe?), but this sounds like they need to investigate.

[1] https://win-builder.r-project.org/

On October 29, 2019 9:28:23 AM PDT, David Winsemius <dwinsemius at comcast.net> wrote:
>
>On 10/29/19 4:48 AM, Kevin Kuo wrote:
>> Seems like all rev deps of rJava are failing Windows checks with the
>same
>> error. Might be a Java architecture mismatch issue?
>
>Copied from the rJava GitHub page:
>
>==========
>
>
>      Bug reports
>
>Please userJava GitHub issues page 
><https://github.com/s-u/rJava/issues><https://github.com/s-u/rJava/issues>
>
>to report bugs.
>
>
>(Seems likely that Simon would be aware of such a problem.)
>
>============
>
>
>I get no errors in Ubuntu 18.04 with:
>
>
>|install.packages("rJava",,"http://rforge.net") |||||
>
>You are supposed to offer your OS and other version details with a bug 
>report.

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Oct 29 20:28:59 2019
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 29 Oct 2019 12:28:59 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
 <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
Message-ID: <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>


On 10/29/19 12:22 PM, Jeff Newmiller wrote:
> I suspect David did not read the subject line. This is about winbuilder [1]. I don't know who runs that service (Uwe?), but this sounds like they need to investigate.


Correct on the first point, but when I go to that page it says:


Pleasedo notupload packages of other maintainers (particularly not 
without changing the Maintainer field to your own e-mail address, if you 
have permissions to do that), because the maintainer indicated in the 
maintainer field of the DESCRIPTION file get response from us. Pleasedo 
notupload Bioconductor packages or CRAN packages.


-- 

David.

>
> [1] https://win-builder.r-project.org/
>
> On October 29, 2019 9:28:23 AM PDT, David Winsemius <dwinsemius at comcast.net> wrote:
>> On 10/29/19 4:48 AM, Kevin Kuo wrote:
>>> Seems like all rev deps of rJava are failing Windows checks with the
>> same
>>> error. Might be a Java architecture mismatch issue?
>> Copied from the rJava GitHub page:
>>
>> ==========
>>
>>
>>       Bug reports
>>
>> Please userJava GitHub issues page
>> <https://github.com/s-u/rJava/issues><https://github.com/s-u/rJava/issues>
>>
>> to report bugs.
>>
>>
>> (Seems likely that Simon would be aware of such a problem.)
>>
>> ============
>>
>>
>> I get no errors in Ubuntu 18.04 with:
>>
>>
>> |install.packages("rJava",,"http://rforge.net") |||||
>>
>> You are supposed to offer your OS and other version details with a bug
>> report.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct 29 22:12:52 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 29 Oct 2019 14:12:52 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
 <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
 <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>
Message-ID: <71F14DAC-59E0-416E-9A16-D1A2BBA9D4B5@dcn.davis.ca.us>

Once again, you can color me mystified. Are you reading logs not referred to in this email thread?

On October 29, 2019 12:28:59 PM PDT, David Winsemius <dwinsemius at comcast.net> wrote:
>
>On 10/29/19 12:22 PM, Jeff Newmiller wrote:
>> I suspect David did not read the subject line. This is about
>winbuilder [1]. I don't know who runs that service (Uwe?), but this
>sounds like they need to investigate.
>
>
>Correct on the first point, but when I go to that page it says:
>
>
>Pleasedo notupload packages of other maintainers (particularly not 
>without changing the Maintainer field to your own e-mail address, if
>you 
>have permissions to do that), because the maintainer indicated in the 
>maintainer field of the DESCRIPTION file get response from us. Pleasedo
>
>notupload Bioconductor packages or CRAN packages.

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Oct 30 00:23:24 2019
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 29 Oct 2019 16:23:24 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <71F14DAC-59E0-416E-9A16-D1A2BBA9D4B5@dcn.davis.ca.us>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
 <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
 <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>
 <71F14DAC-59E0-416E-9A16-D1A2BBA9D4B5@dcn.davis.ca.us>
Message-ID: <b397103e-692a-7fd7-c5ee-f1a1b42811f8@comcast.net>


On 10/29/19 2:12 PM, Jeff Newmiller wrote:
> Once again, you can color me mystified. Are you reading logs not referred to in this email thread?

Hi Jeff;

I suppose am reading <something> else. I ran:

maintainer("rJava")


... and the result was Simon Urbanek's name (which wasn't surprising to 
me), and did not match the name of the OP.

So I was (and am) puzzled that? Kevin was using win-builder on rJava.


-- 

David.

>
> On October 29, 2019 12:28:59 PM PDT, David Winsemius <dwinsemius at comcast.net> wrote:
>> On 10/29/19 12:22 PM, Jeff Newmiller wrote:
>>> I suspect David did not read the subject line. This is about
>> winbuilder [1]. I don't know who runs that service (Uwe?), but this
>> sounds like they need to investigate.
>>
>>
>> Correct on the first point, but when I go to that page it says:
>>
>>
>> Pleasedo notupload packages of other maintainers (particularly not
>> without changing the Maintainer field to your own e-mail address, if
>> you
>> have permissions to do that), because the maintainer indicated in the
>> maintainer field of the DESCRIPTION file get response from us. Pleasedo
>>
>> notupload Bioconductor packages or CRAN packages.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Oct 30 02:02:51 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 29 Oct 2019 18:02:51 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <b397103e-692a-7fd7-c5ee-f1a1b42811f8@comcast.net>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
 <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
 <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>
 <71F14DAC-59E0-416E-9A16-D1A2BBA9D4B5@dcn.davis.ca.us>
 <b397103e-692a-7fd7-c5ee-f1a1b42811f8@comcast.net>
Message-ID: <2EDDE59C-DCCD-4B7D-812E-3A175AEDC540@dcn.davis.ca.us>

My understanding is that the failure of rJava in the winbuilder server is likely to be a system configuration error specific to that server, and is a sysadmin issue rather than a package maintainer issue. But the sysadmin may know different.

On October 29, 2019 4:23:24 PM PDT, David Winsemius <dwinsemius at comcast.net> wrote:
>
>On 10/29/19 2:12 PM, Jeff Newmiller wrote:
>> Once again, you can color me mystified. Are you reading logs not
>referred to in this email thread?
>
>Hi Jeff;
>
>I suppose am reading <something> else. I ran:
>
>maintainer("rJava")
>
>
>... and the result was Simon Urbanek's name (which wasn't surprising to
>
>me), and did not match the name of the OP.
>
>So I was (and am) puzzled that? Kevin was using win-builder on rJava.

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct 30 11:46:22 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 30 Oct 2019 06:46:22 -0400
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <b397103e-692a-7fd7-c5ee-f1a1b42811f8@comcast.net>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
 <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
 <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>
 <71F14DAC-59E0-416E-9A16-D1A2BBA9D4B5@dcn.davis.ca.us>
 <b397103e-692a-7fd7-c5ee-f1a1b42811f8@comcast.net>
Message-ID: <cdf6e901-5c22-7cae-eada-63e6cc275500@gmail.com>

On 29/10/2019 7:23 p.m., David Winsemius wrote:
> 
> On 10/29/19 2:12 PM, Jeff Newmiller wrote:
>> Once again, you can color me mystified. Are you reading logs not referred to in this email thread?
> 
> Hi Jeff;
> 
> I suppose am reading <something> else. I ran:
> 
> maintainer("rJava")
> 
> 
> ... and the result was Simon Urbanek's name (which wasn't surprising to
> me), and did not match the name of the OP.
> 
> So I was (and am) puzzled that? Kevin was using win-builder on rJava.
> 

I think you misread his post.  He was using win-builder on packages that 
depend on rJava.  It might have helped to post the error he was seeing...

Duncan Murdoch


From p@u|john32 @end|ng |rom gm@||@com  Wed Oct 30 17:23:41 2019
From: p@u|john32 @end|ng |rom gm@||@com (Paul Johnson)
Date: Wed, 30 Oct 2019 11:23:41 -0500
Subject: [R-pkg-devel] Trouble building vignettes with R-devel,
 can't replicate locally
Message-ID: <CAErODj-6OnWPPA=4TiMsZJQ2KL7acWBtZo6Se13UuRGuEcCH8g@mail.gmail.com>

Greetings

I just tried to upload a new version of stationery, my collection of Sweave
and markdown templates.  CRAN fails to build vignettes, almost certainly a
problem in Pandoc (what version is CRAN using?). My experience with
markdown in general is that if you don't like the format they provide "out
of the box", you are in a pretty bad situation.  This is just more of the
same.

I succeed rebuilding my package with R-devel on Ubuntu Linux.

$ R --version
R Under development
  (unstable) (2019-10-26 r77334) -- "Unsuffered
  Consequences"
I see same success with any
  pandoc:

$ pandoc --version
pandoc 2.2.3.2

or

$ pandoc --version
pandoc 2.7.3
Compiled
  with pandoc-types 1.17.5.4, texmath 0.11.2.2,
  skylighting 0.8.1


However, on the systems used by CRAN, they see get errors that have no
error messages, no diagnostic information.

Last summer, Prof. Ripley notified me there was trouble upstream with
Pandoc and I thought I had that figured out, I'm unable to reproduce same
old problem about unrecognized UTF-8 character now.  Old problem was
summarized here

https://stackoverflow.com/q/54792233/1086346

The current version of Pandoc and markdown on the CRAN server does not give
same UTF warning.

Would one of you that has access to that system be willing to send me the
actual error output and latex log files so I can see what is wrong?  Can I
see output from "sessionInfo()" on the CRAN build system?

Or would somebody try to build this package and if it produces an error,
send me the logs and or working directory:

http://pj.freefaculty.org/scraps/stationery_0.98.21.tar.gz

In the CRAN build log, there's no helpful guidance

* checking re-building of vignette outputs ... [17s/18s] WARNING

Error(s) in re-building vignettes:
  ...
--- re-building ?HTML_special_features.Rmd? using rmarkdown
--- finished re-building ?HTML_special_features.Rmd?

--- re-building ?Rmarkdown.Rmd? using rmarkdown
Error: processing vignette 'Rmarkdown.Rmd' failed with diagnostics:
Failed to compile Rmarkdown.tex. See
https://yihui.name/tinytex/r/#debugging for debugging tips.
--- failed re-building ?Rmarkdown.Rmd?

--- re-building ?code_chunks.Rmd? using rmarkdown
Error: processing vignette 'code_chunks.Rmd' failed with diagnostics:
Failed to compile code_chunks.tex. See
https://yihui.name/tinytex/r/#debugging for debugging tips.
--- failed re-building ?code_chunks.Rmd?

--- re-building ?stationery.Rnw? using Sweave
Error: processing vignette 'stationery.Rnw' failed with diagnostics:
Failed to locate the ?texi2pdf? output file (by engine
?utils::Sweave?) for vignette with name ?stationery?. The following
files exist in directory ?.?: ?HTML_special_features.R?,
?HTML_special_features.Rmd?, ?HTML_special_features.html?,
?Rmarkdown.R?, ?Rmarkdown.Rmd?, ?Rmarkdown.log?, ?Rmarkdown.tex?,
?Rplots.pdf?, ?code_chunks.R?, ?code_chunks.Rmd?, ?code_chunks.log?,
?code_chunks.tex?, ?compiler.sh?, ?listings.sty?, ?rmd2html.sh?,
?rnw2pdf.sh?, ?stationery.Rnw?, ?stationery.Rout?, ?stationery.log?,
?stationery.lyx?, ?stationery.tex?, ?subfig.sty?
--- failed re-building ?stationery.Rnw?

SUMMARY: processing the following files failed:
  ?Rmarkdown.Rmd? ?code_chunks.Rmd? ?stationery.Rnw?

Error: Vignette re-building failed.
Execution halted




-- 
Paul E. Johnson   http://pj.freefaculty.org
Director, Center for Research Methods and Data Analysis http://crmda.ku.edu

To write to me directly, please address me at pauljohn at ku.edu.

	[[alternative HTML version deleted]]


From kev|nykuo @end|ng |rom gm@||@com  Wed Oct 30 22:08:49 2019
From: kev|nykuo @end|ng |rom gm@||@com (Kevin Kuo)
Date: Wed, 30 Oct 2019 14:08:49 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <cdf6e901-5c22-7cae-eada-63e6cc275500@gmail.com>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
 <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
 <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>
 <71F14DAC-59E0-416E-9A16-D1A2BBA9D4B5@dcn.davis.ca.us>
 <b397103e-692a-7fd7-c5ee-f1a1b42811f8@comcast.net>
 <cdf6e901-5c22-7cae-eada-63e6cc275500@gmail.com>
Message-ID: <CAA1+RSGnSk8VjDxZ5NJKqoc_gmTwrEGAVGYf6snPxJN+Kzh=4w@mail.gmail.com>

I was replying to the OP at
https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html. This
indeed pertains to reverse dependencies of rJava not passing checks on
Windows. I have reached out to Uwe and will report back if I hear back.
Thanks for the lively discussion :)

On Wed, Oct 30, 2019 at 3:46 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 29/10/2019 7:23 p.m., David Winsemius wrote:
> >
> > On 10/29/19 2:12 PM, Jeff Newmiller wrote:
> >> Once again, you can color me mystified. Are you reading logs not
> referred to in this email thread?
> >
> > Hi Jeff;
> >
> > I suppose am reading <something> else. I ran:
> >
> > maintainer("rJava")
> >
> >
> > ... and the result was Simon Urbanek's name (which wasn't surprising to
> > me), and did not match the name of the OP.
> >
> > So I was (and am) puzzled that  Kevin was using win-builder on rJava.
> >
>
> I think you misread his post.  He was using win-builder on packages that
> depend on rJava.  It might have helped to post the error he was seeing...
>
> Duncan Murdoch
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Oct 30 22:26:11 2019
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 30 Oct 2019 14:26:11 -0700
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <cdf6e901-5c22-7cae-eada-63e6cc275500@gmail.com>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
 <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
 <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>
 <71F14DAC-59E0-416E-9A16-D1A2BBA9D4B5@dcn.davis.ca.us>
 <b397103e-692a-7fd7-c5ee-f1a1b42811f8@comcast.net>
 <cdf6e901-5c22-7cae-eada-63e6cc275500@gmail.com>
Message-ID: <57246500-c34a-8ea4-83a1-57a4fb2388e8@comcast.net>


On 10/30/19 3:46 AM, Duncan Murdoch wrote:
> On 29/10/2019 7:23 p.m., David Winsemius wrote:
>>
>> On 10/29/19 2:12 PM, Jeff Newmiller wrote:
>>> Once again, you can color me mystified. Are you reading logs not 
>>> referred to in this email thread?
>>
>> Hi Jeff;
>>
>> I suppose am reading <something> else. I ran:
>>
>> maintainer("rJava")
>>
>>
>> ... and the result was Simon Urbanek's name (which wasn't surprising to
>> me), and did not match the name of the OP.
>>
>> So I was (and am) puzzled that? Kevin was using win-builder on rJava.
>>
>
> I think you misread his post.? He was using win-builder on packages 
> that depend on rJava.? It might have helped to post the error he was 
> seeing...


I did indeed misread the abbreviation "rev dep" as "revision 
dependencies" rather than "reverse dependencies". (So I thought he was 
submitting revised versions of rJava.) He then sent me a link to the 
original posting from a couple of weeks ago,? which had not been 
threaded correctly on my mail client, so I had no context:

https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html


Apologies for the noise.

-- 

David


>
> Duncan Murdoch


From tdhock5 @end|ng |rom gm@||@com  Thu Oct 31 00:58:54 2019
From: tdhock5 @end|ng |rom gm@||@com (Toby Hocking)
Date: Wed, 30 Oct 2019 16:58:54 -0700
Subject: [R-pkg-devel] invalid multibyte string on solaris?
Message-ID: <CALK03d3vKoioBhTV7x_pTmq2sN9ViQEK=JJ2NdMKOeJkmr9CHQ@mail.gmail.com>

Hi all, I am getting an "invalid multibyte string" error from one of my
examples when it is run on solaris, which results in check FAILURE:
https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/nc-00check.html

To fix this I guess I could just delete this example, but is there any
easy/known fix? I searched the r-devel and r-package-devel lists and I did
not find any relevant threads.

I also see that the same package on r-hub solaris is a check PASS:
https://builder.r-hub.io/status/nc_2019.10.19.tar.gz-8b46d2a02a6340bcb313eeec96e404f3

I was expecting that CRAN and r-hub solaris builds should report the same
results. What could be the difference? is this a bug in CRAN or in r-hub?

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 31 01:30:19 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 30 Oct 2019 20:30:19 -0400
Subject: [R-pkg-devel] invalid multibyte string on solaris?
In-Reply-To: <CALK03d3vKoioBhTV7x_pTmq2sN9ViQEK=JJ2NdMKOeJkmr9CHQ@mail.gmail.com>
References: <CALK03d3vKoioBhTV7x_pTmq2sN9ViQEK=JJ2NdMKOeJkmr9CHQ@mail.gmail.com>
Message-ID: <30c38e6b-1b5c-2583-61b0-39a5458e0d9f@gmail.com>

On 30/10/2019 7:58 p.m., Toby Hocking wrote:
> Hi all, I am getting an "invalid multibyte string" error from one of my
> examples when it is run on solaris, which results in check FAILURE:
> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/nc-00check.html
> 
> To fix this I guess I could just delete this example, but is there any
> easy/known fix? I searched the r-devel and r-package-devel lists and I did
> not find any relevant threads.

I don't know the cause or a fix, but a way to avoid the error would be 
to make the example conditional on not being on Solaris.  I would guess 
this test would do it:

if (!grepl("solaris", R.version$platform)) {
     emoji.txt.gz <- system.file("extdata", 
"wikipedia-emoji-text.txt.gz", package="nc")
     ETC.

I'd add a comment explaining why you have this test...

Duncan Murdoch

> 
> I also see that the same package on r-hub solaris is a check PASS:
> https://builder.r-hub.io/status/nc_2019.10.19.tar.gz-8b46d2a02a6340bcb313eeec96e404f3
> 
> I was expecting that CRAN and r-hub solaris builds should report the same
> results. What could be the difference? is this a bug in CRAN or in r-hub?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@nny @end|ng |rom gorch@@org  Thu Oct 31 07:25:47 2019
From: d@nny @end|ng |rom gorch@@org (Danny Smith)
Date: Thu, 31 Oct 2019 17:25:47 +1100
Subject: [R-pkg-devel] winbuilder fails for package depending on rJava
In-Reply-To: <CAA1+RSGnSk8VjDxZ5NJKqoc_gmTwrEGAVGYf6snPxJN+Kzh=4w@mail.gmail.com>
References: <CAA1+RSEWGKvtnQZ+2HqDViEK_RtchF-JzUYsbFTqzOhKEGcMPw@mail.gmail.com>
 <ad37c544-4326-8b04-f7ee-f0258d642d4d@comcast.net>
 <204C6CE7-CBBC-40A5-8617-331D739FF6ED@dcn.davis.ca.us>
 <fbae96d5-2a82-8106-f3c6-c4b0ec478ab3@comcast.net>
 <71F14DAC-59E0-416E-9A16-D1A2BBA9D4B5@dcn.davis.ca.us>
 <b397103e-692a-7fd7-c5ee-f1a1b42811f8@comcast.net>
 <cdf6e901-5c22-7cae-eada-63e6cc275500@gmail.com>
 <CAA1+RSGnSk8VjDxZ5NJKqoc_gmTwrEGAVGYf6snPxJN+Kzh=4w@mail.gmail.com>
Message-ID: <CAOgn7im6My+W5fJ0qd7NMM_W67M6yJ+bOnbm8LRRXfEoQvLHJg@mail.gmail.com>

Hi all,

Confirming that I'm having issues building a package that depends on
rJava (dialrjars: https://cran.r-project.org/package=dialrjars) with
winbuilder so I can't submit updates to CRAN.

The winbuilder error from my original post that Kevin linked to below is:
```
* installing *source* package 'dialrjars' ...
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
*** arch - i386
Error: package or namespace load failed for 'dialrjars':
 .onLoad failed in loadNamespace() for 'rJava', details:
  call: inDL(x, as.logical(local), as.logical(now), ...)
  error: unable to load shared object
'd:/temp/RtmpO22QHg/RLIBS_1d954576818a2/rJava/libs/i386/rJava.dll':
  LoadLibrary failure:  %1 ist keine zul?ssige Win32-Anwendung.

Error: loading failed
Execution halted
*** arch - x64
ERROR: loading failed for 'i386'
* removing 'd:/RCompile/CRANguest/R-devel/lib/dialrjars'
```
You can also see details of the error in the current CRAN check
results (which it passed successfully when I last submitted a package
update):
https://cran.r-project.org/web/checks/check_results_dialr.html


Thanks for the feedback everyone, and thanks for checking with Uwe, Kevin!

Cheers,
Danny

On Thu, Oct 31, 2019 at 8:09 AM Kevin Kuo <kevinykuo at gmail.com> wrote:
>
> I was replying to the OP at
> https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html. This
> indeed pertains to reverse dependencies of rJava not passing checks on
> Windows. I have reached out to Uwe and will report back if I hear back.
> Thanks for the lively discussion :)
>
> On Wed, Oct 30, 2019 at 3:46 AM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
> > On 29/10/2019 7:23 p.m., David Winsemius wrote:
> > >
> > > On 10/29/19 2:12 PM, Jeff Newmiller wrote:
> > >> Once again, you can color me mystified. Are you reading logs not
> > referred to in this email thread?
> > >
> > > Hi Jeff;
> > >
> > > I suppose am reading <something> else. I ran:
> > >
> > > maintainer("rJava")
> > >
> > >
> > > ... and the result was Simon Urbanek's name (which wasn't surprising to
> > > me), and did not match the name of the OP.
> > >
> > > So I was (and am) puzzled that  Kevin was using win-builder on rJava.
> > >
> >
> > I think you misread his post.  He was using win-builder on packages that
> > depend on rJava.  It might have helped to post the error he was seeing...
> >
> > Duncan Murdoch
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Oct 31 22:08:26 2019
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 31 Oct 2019 16:08:26 -0500
Subject: [R-pkg-devel] devtools::build_win()?
Message-ID: <f166d6e1-204f-b54c-3392-6d26ebcc6a5f@effectivedefense.org>

Hello:


 ????? Hadley Wickham's otherwise wonderful "R packages" book recommends 
using "devtools::build_win()" in the "Test environments" section of his 
chapter on "Releasing a package".? However, devtools 2.2.1, which seems 
to be the current version, contains no such "build_win" function.


 ????? This section of "R packages" also says, says that 
"devtools::revdep_check()" "Runs R CMD check on each [reverse 
dependency] and Summarises the results in a single file."? However, the 
current version of "devtools::revdep_check()" seems only to identify the 
reverse dependencies without testing them.


 ????? That do you suggest?
 ????? Thanks,
 ????? Spencer Graves


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Oct 31 22:10:50 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 31 Oct 2019 17:10:50 -0400
Subject: [R-pkg-devel] devtools::build_win()?
In-Reply-To: <f166d6e1-204f-b54c-3392-6d26ebcc6a5f@effectivedefense.org>
References: <f166d6e1-204f-b54c-3392-6d26ebcc6a5f@effectivedefense.org>
Message-ID: <CABtg=Km_XwbDqgDVkxzrbwHFGHp2Z3BvBi2X3pT=CigqkL6OJg@mail.gmail.com>

Hi,

see devtools::check_win_devel and https://github.com/r-lib/revdepcheck

for the current implementations for these.

Gabor

On Thu, Oct 31, 2019 at 5:09 PM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello:
>
>
>        Hadley Wickham's otherwise wonderful "R packages" book recommends
> using "devtools::build_win()" in the "Test environments" section of his
> chapter on "Releasing a package".  However, devtools 2.2.1, which seems
> to be the current version, contains no such "build_win" function.
>
>
>        This section of "R packages" also says, says that
> "devtools::revdep_check()" "Runs R CMD check on each [reverse
> dependency] and Summarises the results in a single file."  However, the
> current version of "devtools::revdep_check()" seems only to identify the
> reverse dependencies without testing them.
>
>
>        That do you suggest?
>        Thanks,
>        Spencer Graves
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Thu Oct 31 22:14:50 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 31 Oct 2019 17:14:50 -0400
Subject: [R-pkg-devel] devtools::build_win()?
In-Reply-To: <f166d6e1-204f-b54c-3392-6d26ebcc6a5f@effectivedefense.org>
References: <f166d6e1-204f-b54c-3392-6d26ebcc6a5f@effectivedefense.org>
Message-ID: <e79734bb-83d0-38f0-546b-7165e902d19b@gmail.com>


   There's a revdepcheck package (seems to be only on GitHub?):
https://github.com/r-lib/revdepcheck

  It's pretty robust and feature-ful (I'm currently 4 hours into a
6-hour batch job checking the lme4 reverse dependencies on 6 cores in
parallel ... I think the RStudio folks use it for even bigger problems
like ggplot2 reverse-dependency checking)

On 2019-10-31 5:08 p.m., Spencer Graves wrote:
> Hello:
> 
> 
> ????? Hadley Wickham's otherwise wonderful "R packages" book recommends
> using "devtools::build_win()" in the "Test environments" section of his
> chapter on "Releasing a package".? However, devtools 2.2.1, which seems
> to be the current version, contains no such "build_win" function.
> 
> 
> ????? This section of "R packages" also says, says that
> "devtools::revdep_check()" "Runs R CMD check on each [reverse
> dependency] and Summarises the results in a single file."? However, the
> current version of "devtools::revdep_check()" seems only to identify the
> reverse dependencies without testing them.
> 
> 
> ????? That do you suggest?
> ????? Thanks,
> ????? Spencer Graves
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Nov  1 09:36:50 2019
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 1 Nov 2019 09:36:50 +0100
Subject: [R-pkg-devel] invalid multibyte string on solaris?
In-Reply-To: <CALK03d3vKoioBhTV7x_pTmq2sN9ViQEK=JJ2NdMKOeJkmr9CHQ@mail.gmail.com>
References: <CALK03d3vKoioBhTV7x_pTmq2sN9ViQEK=JJ2NdMKOeJkmr9CHQ@mail.gmail.com>
Message-ID: <b03bc9c3-62b6-a10a-7716-f9c5399eda4a@gmail.com>

On 10/31/19 12:58 AM, Toby Hocking wrote:
> Hi all, I am getting an "invalid multibyte string" error from one of my
> examples when it is run on solaris, which results in check FAILURE:
> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/nc-00check.html
>
> To fix this I guess I could just delete this example, but is there any
> easy/known fix? I searched the r-devel and r-package-devel lists and I did
> not find any relevant threads.
>
> I also see that the same package on r-hub solaris is a check PASS:
> https://builder.r-hub.io/status/nc_2019.10.19.tar.gz-8b46d2a02a6340bcb313eeec96e404f3
>
> I was expecting that CRAN and r-hub solaris builds should report the same
> results. What could be the difference? is this a bug in CRAN or in r-hub?

The configuration of the CRAN check machine is given at 
https://cran.r-project.org/web/checks/check_flavors.html#r-patched-solaris-x86 
(see the Details section). I cannot reproduce the problem on a Solaris 
machine I have access to (but it is yet a different configuration, so I 
am not surprised). The problem is that during substring(), the C library 
function mbrtowc() fails to convert a multi-byte coded string to a wide 
character, which is needed to know how many bytes are used. I am not 
sure why it fails without being able to reproduce, maybe the runtime 
library does not support Emoji, but of course there can be a bug in R, 
too. From the previous issue you have run into with Emoji, we know that 
the machine (compiler runtime) does not declare that wchar_t is Unicode.

Clearly, by using Emoji you are stress-testing R, packages, external 
libraries and the OS libraries, because these characters need surrogate 
pairs in UTF-16 but a lot of old code was written before they even 
existed, with all the problems of wchar_t.

Pragmatically, I would avoid using Emoji for these reasons in production 
systems. If you, instead, wanted to stress test R or libraries to find 
out where surrogate pairs were still not handled properly, it would be 
better to look for reproducible examples on systems you have access to 
and you can debug on your end. Some of these problems could be found 
simply by code inspection as well, though. We could then fix at places 
where it is easy or at least document in the code.

Best
Tomas

> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From w|k|ng @end|ng |rom m@eth@com  Sat Nov  2 18:09:51 2019
From: w|k|ng @end|ng |rom m@eth@com (Viktor Gal)
Date: Sat, 2 Nov 2019 13:09:51 -0400
Subject: [R-pkg-devel] install.R running out of memory
Message-ID: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>

Hi,

I?m developing an ML library that has R bindings? when installing the library with R CMD INSTALL the R process is running out of memory (50G+ ram) when doing:
** byte-compile and prepare package for lazy loading

any ideas how i could debug this part of code, to figure out what is actually happening and why is there a memory leak?

cheers,
viktor

From edd @end|ng |rom deb|@n@org  Sat Nov  2 18:52:36 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 2 Nov 2019 12:52:36 -0500
Subject: [R-pkg-devel] install.R running out of memory
In-Reply-To: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>
References: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>
Message-ID: <23997.49764.434525.740884@rob.eddelbuettel.com>


Hi Viktor,

On 2 November 2019 at 13:09, Viktor Gal wrote:
| I?m developing an ML library that has R bindings? when installing the library with R CMD INSTALL the R process is running out of memory (50G+ ram) when doing:
| ** byte-compile and prepare package for lazy loading
| 
| any ideas how i could debug this part of code, to figure out what is actually happening and why is there a memory leak?

Easiest for us to help if we can see code -- so if you have a public repo
somewhere please the link. 

I suspect you have some sort of recursion or circular dependency
somewhere. It would be very hard for R to run out of 50gb. But we cannot say
more.

So maybe triage. In a situation like this when a (supposedly complete)
package draft of mine fails "top-down" I often re-validate the toolchain
"bottom-up" with a minimal package. If that works, keep adding pieces step by
step from the 'not-working large package' to the 'small working' package
while continuously ensuring that it still builds.

Hope this helps, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From w|k|ng @end|ng |rom m@eth@com  Sat Nov  2 18:58:36 2019
From: w|k|ng @end|ng |rom m@eth@com (Viktor Gal)
Date: Sat, 2 Nov 2019 13:58:36 -0400
Subject: [R-pkg-devel] install.R running out of memory
In-Reply-To: <23997.49764.434525.740884@rob.eddelbuettel.com>
References: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>
 <23997.49764.434525.740884@rob.eddelbuettel.com>
Message-ID: <D48D8D85-1D80-4A87-9F06-8ECEA2FA390B@maeth.com>

Hi Dirk,

so the project is open source, you can reproduce the error yourself (but note it?ll take a long time to actually compile it). steps for reproducing:
git clone https://github.com/shogun-toolbox/shogun.git
cd shogun
git checkout feature/shared_ptr
mkdir build
cd build
cmake -DINTERFACE_R=ON ..
make
make install

(it requires tons of dependencies? if you have docker you can docker pull shogun/shogun-dev and run things inside the container)

the make install part runs the R CMD INSTALL so that?ll cause the problem.

but i?ve just uploaded the generated R code that causes the problem here, note the script is 7Mb i.e. 175k LoC, so you better wget/curl it:
http://maeth.com/shogun.R

cheers,
viktor

> On 2 Nov 2019, at 13:52, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> Hi Viktor,
> 
> On 2 November 2019 at 13:09, Viktor Gal wrote:
> | I?m developing an ML library that has R bindings? when installing the library with R CMD INSTALL the R process is running out of memory (50G+ ram) when doing:
> | ** byte-compile and prepare package for lazy loading
> | 
> | any ideas how i could debug this part of code, to figure out what is actually happening and why is there a memory leak?
> 
> Easiest for us to help if we can see code -- so if you have a public repo
> somewhere please the link. 
> 
> I suspect you have some sort of recursion or circular dependency
> somewhere. It would be very hard for R to run out of 50gb. But we cannot say
> more.
> 
> So maybe triage. In a situation like this when a (supposedly complete)
> package draft of mine fails "top-down" I often re-validate the toolchain
> "bottom-up" with a minimal package. If that works, keep adding pieces step by
> step from the 'not-working large package' to the 'small working' package
> while continuously ensuring that it still builds.
> 
> Hope this helps, Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Sat Nov  2 19:34:55 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 2 Nov 2019 13:34:55 -0500
Subject: [R-pkg-devel] install.R running out of memory
In-Reply-To: <D48D8D85-1D80-4A87-9F06-8ECEA2FA390B@maeth.com>
References: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>
 <23997.49764.434525.740884@rob.eddelbuettel.com>
 <D48D8D85-1D80-4A87-9F06-8ECEA2FA390B@maeth.com>
Message-ID: <23997.52303.629186.467994@rob.eddelbuettel.com>


Hi Victor,

On 2 November 2019 at 13:58, Viktor Gal wrote:
| so the project is open source, you can reproduce the error yourself (but note it?ll take a long time to actually compile it). steps for reproducing:
| git clone https://github.com/shogun-toolbox/shogun.git
| cd shogun
| git checkout feature/shared_ptr
| mkdir build
| cd build
| cmake -DINTERFACE_R=ON ..
| make
| make install
| 
| (it requires tons of dependencies? if you have docker you can docker pull shogun/shogun-dev and run things inside the container)
| 
| the make install part runs the R CMD INSTALL so that?ll cause the problem.
| 
| but i?ve just uploaded the generated R code that causes the problem here, note the script is 7Mb i.e. 175k LoC, so you better wget/curl it:
| http://maeth.com/shogun.R

Ok, I am of course aware of Shogun, and with a large codebases that may even
have even has auto-generated interfaces (e.g. Swig, not sure if Shogun has,
it's been a while since I looked at) then something like this can happen.

No easier answer from me, and I won't have time to dig into this. Sorry.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From w|k|ng @end|ng |rom m@eth@com  Sat Nov  2 19:37:12 2019
From: w|k|ng @end|ng |rom m@eth@com (Viktor Gal)
Date: Sat, 2 Nov 2019 14:37:12 -0400
Subject: [R-pkg-devel] install.R running out of memory
In-Reply-To: <D48D8D85-1D80-4A87-9F06-8ECEA2FA390B@maeth.com>
References: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>
 <23997.49764.434525.740884@rob.eddelbuettel.com>
 <D48D8D85-1D80-4A87-9F06-8ECEA2FA390B@maeth.com>
Message-ID: <364821EC-9E96-47A0-BF7B-738706254ADB@maeth.com>

Hi Dirk,

no worries, thnx for the feedback!

cheers,
viktor

> On 2 Nov 2019, at 13:58, Viktor Gal <wiking at maeth.com> wrote:
> 
> Hi Dirk,
> 
> so the project is open source, you can reproduce the error yourself (but note it?ll take a long time to actually compile it). steps for reproducing:
> git clone https://github.com/shogun-toolbox/shogun.git
> cd shogun
> git checkout feature/shared_ptr
> mkdir build
> cd build
> cmake -DINTERFACE_R=ON ..
> make
> make install
> 
> (it requires tons of dependencies? if you have docker you can docker pull shogun/shogun-dev and run things inside the container)
> 
> the make install part runs the R CMD INSTALL so that?ll cause the problem.
> 
> but i?ve just uploaded the generated R code that causes the problem here, note the script is 7Mb i.e. 175k LoC, so you better wget/curl it:
> http://maeth.com/shogun.R
> 
> cheers,
> viktor
> 
>> On 2 Nov 2019, at 13:52, Dirk Eddelbuettel <edd at debian.org> wrote:
>> 
>> 
>> Hi Viktor,
>> 
>> On 2 November 2019 at 13:09, Viktor Gal wrote:
>> | I?m developing an ML library that has R bindings? when installing the library with R CMD INSTALL the R process is running out of memory (50G+ ram) when doing:
>> | ** byte-compile and prepare package for lazy loading
>> | 
>> | any ideas how i could debug this part of code, to figure out what is actually happening and why is there a memory leak?
>> 
>> Easiest for us to help if we can see code -- so if you have a public repo
>> somewhere please the link. 
>> 
>> I suspect you have some sort of recursion or circular dependency
>> somewhere. It would be very hard for R to run out of 50gb. But we cannot say
>> more.
>> 
>> So maybe triage. In a situation like this when a (supposedly complete)
>> package draft of mine fails "top-down" I often re-validate the toolchain
>> "bottom-up" with a minimal package. If that works, keep adding pieces step by
>> step from the 'not-working large package' to the 'small working' package
>> while continuously ensuring that it still builds.
>> 
>> Hope this helps, Dirk
>> 
>> -- 
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Nov  3 12:53:12 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 3 Nov 2019 12:53:12 +0100
Subject: [R-pkg-devel] install.R running out of memory
In-Reply-To: <364821EC-9E96-47A0-BF7B-738706254ADB@maeth.com>
References: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>
 <23997.49764.434525.740884@rob.eddelbuettel.com>
 <D48D8D85-1D80-4A87-9F06-8ECEA2FA390B@maeth.com>
 <364821EC-9E96-47A0-BF7B-738706254ADB@maeth.com>
Message-ID: <372d378f-0f20-23a0-a83e-a604a1ab8327@statistik.tu-dortmund.de>

What happens if you disable byte code compilation?

Best,
Uwe Ligges

On 02.11.2019 19:37, Viktor Gal wrote:
> Hi Dirk,
> 
> no worries, thnx for the feedback!
> 
> cheers,
> viktor
> 
>> On 2 Nov 2019, at 13:58, Viktor Gal <wiking at maeth.com> wrote:
>>
>> Hi Dirk,
>>
>> so the project is open source, you can reproduce the error yourself (but note it?ll take a long time to actually compile it). steps for reproducing:
>> git clone https://github.com/shogun-toolbox/shogun.git
>> cd shogun
>> git checkout feature/shared_ptr
>> mkdir build
>> cd build
>> cmake -DINTERFACE_R=ON ..
>> make
>> make install
>>
>> (it requires tons of dependencies? if you have docker you can docker pull shogun/shogun-dev and run things inside the container)
>>
>> the make install part runs the R CMD INSTALL so that?ll cause the problem.
>>
>> but i?ve just uploaded the generated R code that causes the problem here, note the script is 7Mb i.e. 175k LoC, so you better wget/curl it:
>> http://maeth.com/shogun.R
>>
>> cheers,
>> viktor
>>
>>> On 2 Nov 2019, at 13:52, Dirk Eddelbuettel <edd at debian.org> wrote:
>>>
>>>
>>> Hi Viktor,
>>>
>>> On 2 November 2019 at 13:09, Viktor Gal wrote:
>>> | I?m developing an ML library that has R bindings? when installing the library with R CMD INSTALL the R process is running out of memory (50G+ ram) when doing:
>>> | ** byte-compile and prepare package for lazy loading
>>> |
>>> | any ideas how i could debug this part of code, to figure out what is actually happening and why is there a memory leak?
>>>
>>> Easiest for us to help if we can see code -- so if you have a public repo
>>> somewhere please the link.
>>>
>>> I suspect you have some sort of recursion or circular dependency
>>> somewhere. It would be very hard for R to run out of 50gb. But we cannot say
>>> more.
>>>
>>> So maybe triage. In a situation like this when a (supposedly complete)
>>> package draft of mine fails "top-down" I often re-validate the toolchain
>>> "bottom-up" with a minimal package. If that works, keep adding pieces step by
>>> step from the 'not-working large package' to the 'small working' package
>>> while continuously ensuring that it still builds.
>>>
>>> Hope this helps, Dirk
>>>
>>> -- 
>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From w|k|ng @end|ng |rom m@eth@com  Sun Nov  3 13:05:48 2019
From: w|k|ng @end|ng |rom m@eth@com (Viktor Gal)
Date: Sun, 3 Nov 2019 07:05:48 -0500
Subject: [R-pkg-devel] install.R running out of memory
In-Reply-To: <372d378f-0f20-23a0-a83e-a604a1ab8327@statistik.tu-dortmund.de>
References: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>
 <23997.49764.434525.740884@rob.eddelbuettel.com>
 <D48D8D85-1D80-4A87-9F06-8ECEA2FA390B@maeth.com>
 <364821EC-9E96-47A0-BF7B-738706254ADB@maeth.com>
 <372d378f-0f20-23a0-a83e-a604a1ab8327@statistik.tu-dortmund.de>
Message-ID: <D491F509-9BC3-43EF-832F-F3D0622C398B@maeth.com>

ah yeah i forgot to mention. it?s the same, i.e. it?s not the byte code compilation that causes this behaviour but the preparation for lazy loading.

cheers,
viktor

> On 3 Nov 2019, at 06:53, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> What happens if you disable byte code compilation?
> 
> Best,
> Uwe Ligges
> 
> On 02.11.2019 19:37, Viktor Gal wrote:
>> Hi Dirk,
>> no worries, thnx for the feedback!
>> cheers,
>> viktor
>>> On 2 Nov 2019, at 13:58, Viktor Gal <wiking at maeth.com> wrote:
>>> 
>>> Hi Dirk,
>>> 
>>> so the project is open source, you can reproduce the error yourself (but note it?ll take a long time to actually compile it). steps for reproducing:
>>> git clone https://github.com/shogun-toolbox/shogun.git
>>> cd shogun
>>> git checkout feature/shared_ptr
>>> mkdir build
>>> cd build
>>> cmake -DINTERFACE_R=ON ..
>>> make
>>> make install
>>> 
>>> (it requires tons of dependencies? if you have docker you can docker pull shogun/shogun-dev and run things inside the container)
>>> 
>>> the make install part runs the R CMD INSTALL so that?ll cause the problem.
>>> 
>>> but i?ve just uploaded the generated R code that causes the problem here, note the script is 7Mb i.e. 175k LoC, so you better wget/curl it:
>>> http://maeth.com/shogun.R
>>> 
>>> cheers,
>>> viktor
>>> 
>>>> On 2 Nov 2019, at 13:52, Dirk Eddelbuettel <edd at debian.org> wrote:
>>>> 
>>>> 
>>>> Hi Viktor,
>>>> 
>>>> On 2 November 2019 at 13:09, Viktor Gal wrote:
>>>> | I?m developing an ML library that has R bindings? when installing the library with R CMD INSTALL the R process is running out of memory (50G+ ram) when doing:
>>>> | ** byte-compile and prepare package for lazy loading
>>>> |
>>>> | any ideas how i could debug this part of code, to figure out what is actually happening and why is there a memory leak?
>>>> 
>>>> Easiest for us to help if we can see code -- so if you have a public repo
>>>> somewhere please the link.
>>>> 
>>>> I suspect you have some sort of recursion or circular dependency
>>>> somewhere. It would be very hard for R to run out of 50gb. But we cannot say
>>>> more.
>>>> 
>>>> So maybe triage. In a situation like this when a (supposedly complete)
>>>> package draft of mine fails "top-down" I often re-validate the toolchain
>>>> "bottom-up" with a minimal package. If that works, keep adding pieces step by
>>>> step from the 'not-working large package' to the 'small working' package
>>>> while continuously ensuring that it still builds.
>>>> 
>>>> Hope this helps, Dirk
>>>> 
>>>> -- 
>>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Nov  4 10:15:59 2019
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 4 Nov 2019 10:15:59 +0100
Subject: [R-pkg-devel] install.R running out of memory
In-Reply-To: <D491F509-9BC3-43EF-832F-F3D0622C398B@maeth.com>
References: <368BFEF0-E5E0-4FA7-AA69-E9FF776E1D91@maeth.com>
 <23997.49764.434525.740884@rob.eddelbuettel.com>
 <D48D8D85-1D80-4A87-9F06-8ECEA2FA390B@maeth.com>
 <364821EC-9E96-47A0-BF7B-738706254ADB@maeth.com>
 <372d378f-0f20-23a0-a83e-a604a1ab8327@statistik.tu-dortmund.de>
 <D491F509-9BC3-43EF-832F-F3D0622C398B@maeth.com>
Message-ID: <23516d0d-68d3-6314-01f3-80da1881b79e@gmail.com>

On 11/3/19 1:05 PM, Viktor Gal wrote:
> ah yeah i forgot to mention. it?s the same, i.e. it?s not the byte code compilation that causes this behaviour but the preparation for lazy loading.

R is not optimized for these cases (generated code, source file with 
 >100,000 lines of code), but R has bindings for a large number of 
external libraries - it should be possible to make the bindings several 
orders of magnitude smaller and then they'd likely work well.

Making R work well on files like shogun.R would probably require a large 
amount of non-trivial work on R internals. I would be surprised if it 
were just say a memory leak we could fix and solve the issue quickly, it 
may well be that some data structures and algorithms simply won't scale 
to this extent. If you want to find out, you can debug using the usual R 
means (R profiler ?Rprof, run the script using ?source, perhaps 
disabling source references), but to interpret the results you may have 
to go deep into the implementation of R and in this case of S4.

Preparation for lazy loading starts by sourcing the file - with some 
details you can find out in the source code of installation and the 
documentation. I tried quickly and saw a lot of time spent in S4, which 
is not surprising as the generated file stresses S4 well beyond what is 
normally the case with R. But I would not be surprised if there were 
other bottlenecks to be seen later and even if you managed to prepare 
the package for lazy loading, there would probably be significant 
overheads at runtime. Still you could experiment with modifying the code 
generator to avoid the bottlenecks you identify.

If your primary goal is to create R bindings for an external library, 
I'd recommend having a look at how other packages do it to see what is 
scalable (there should be a way to make the code way smaller, and easily 
written by hand in most cases, even though some interfaces are 
generated, too).

Best
Tomas
> cheers,
> viktor
>
>> On 3 Nov 2019, at 06:53, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>> What happens if you disable byte code compilation?
>>
>> Best,
>> Uwe Ligges
>>
>> On 02.11.2019 19:37, Viktor Gal wrote:
>>> Hi Dirk,
>>> no worries, thnx for the feedback!
>>> cheers,
>>> viktor
>>>> On 2 Nov 2019, at 13:58, Viktor Gal <wiking at maeth.com> wrote:
>>>>
>>>> Hi Dirk,
>>>>
>>>> so the project is open source, you can reproduce the error yourself (but note it?ll take a long time to actually compile it). steps for reproducing:
>>>> git clone https://github.com/shogun-toolbox/shogun.git
>>>> cd shogun
>>>> git checkout feature/shared_ptr
>>>> mkdir build
>>>> cd build
>>>> cmake -DINTERFACE_R=ON ..
>>>> make
>>>> make install
>>>>
>>>> (it requires tons of dependencies? if you have docker you can docker pull shogun/shogun-dev and run things inside the container)
>>>>
>>>> the make install part runs the R CMD INSTALL so that?ll cause the problem.
>>>>
>>>> but i?ve just uploaded the generated R code that causes the problem here, note the script is 7Mb i.e. 175k LoC, so you better wget/curl it:
>>>> http://maeth.com/shogun.R
>>>>
>>>> cheers,
>>>> viktor
>>>>
>>>>> On 2 Nov 2019, at 13:52, Dirk Eddelbuettel <edd at debian.org> wrote:
>>>>>
>>>>>
>>>>> Hi Viktor,
>>>>>
>>>>> On 2 November 2019 at 13:09, Viktor Gal wrote:
>>>>> | I?m developing an ML library that has R bindings? when installing the library with R CMD INSTALL the R process is running out of memory (50G+ ram) when doing:
>>>>> | ** byte-compile and prepare package for lazy loading
>>>>> |
>>>>> | any ideas how i could debug this part of code, to figure out what is actually happening and why is there a memory leak?
>>>>>
>>>>> Easiest for us to help if we can see code -- so if you have a public repo
>>>>> somewhere please the link.
>>>>>
>>>>> I suspect you have some sort of recursion or circular dependency
>>>>> somewhere. It would be very hard for R to run out of 50gb. But we cannot say
>>>>> more.
>>>>>
>>>>> So maybe triage. In a situation like this when a (supposedly complete)
>>>>> package draft of mine fails "top-down" I often re-validate the toolchain
>>>>> "bottom-up" with a minimal package. If that works, keep adding pieces step by
>>>>> step from the 'not-working large package' to the 'small working' package
>>>>> while continuously ensuring that it still builds.
>>>>>
>>>>> Hope this helps, Dirk
>>>>>
>>>>> -- 
>>>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From roy@mende|@@ohn @end|ng |rom no@@@gov  Mon Nov  4 20:40:15 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 4 Nov 2019 14:40:15 -0500
Subject: [R-pkg-devel] netcdf question
Message-ID: <3A2ACE73-E6FD-4B71-9A5B-B6299820379C@noaa.gov>

Hi All:

I am wondering if it is possible to find out when packages that use the netcdf libraries are built on the CRAN machines (such as ncdf4) what versions of the netcdf library are being used on at least Mac and Windows?

If this is the wrong place to ask,  please point me to where I should ask.

Thanks,

-Roy

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Nov  5 00:37:05 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 5 Nov 2019 12:37:05 +1300
Subject: [R-pkg-devel] Problem loading package on Windoze.
Message-ID: <3643471e-6fda-090e-1154-903105eeb2a9@auckland.ac.nz>


I am developing a package ("ldEst" --- lethal dose estimation) for a 
group of consulting clients.  (The package may in the future be released 
upon the unsuspecting public, but for the moment it has to stay 
confidential, sad to say.)

The clients run Windoze (sad to say).  In the past I have sent them the 
source of the package, which they have the facilities to install.  The 
latest release of the package however threw an error:

>> install.packages("C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz", repos = NULL, type = "source")
> 
> Error in rawToChar(block[seq_len(ns)]) : 
>   embedded nul in string: '\037?\b\0\0\0\0\0\0\003?}\a`\024??0?\200,HG?N??\033&???\001a?\220???\022\b\201\020p?;I\006??-)T\021P\024\005, \002?" E??\024\001)?"*J\023?&\210R\024\vE??=?L????????~x????'
> Warning in install.packages :
>   installation of package ?C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz? had non-zero exit status

Flummoxed by this I thought I'd just get Uwe Ligges' win-builder to 
build a Windoze binary, and sent that to the clients.  The win-build 
went without problem, but when I sent the binary to one of the clients 
he got the error:

> Error: package or namespace load failed for ?ldEst? in get(method, envir = home):
>  lazy-load database 'C:/Users/abel122/Documents/R/win-library/3.6/ldEst/R/ldEst.rdb' is corrupt
> In addition: Warning messages:
> 1: In .registerS3method(fin[i, 1], fin[i, 2], fin[i, 3], fin[i, 4],  :
>   restarting interrupted promise evaluation
> 2: In get(method, envir = home) :
>   restarting interrupted promise evaluation
> 3: In get(method, envir = home) : internal error -3 in R_decompress1

I (sad to say) have no idea what any of this really means.

The package installs, loads, and  runs just fine on my Ubuntu system,
and builds without error on win-builder.

Can any suggest a way that I might track down what's causing the error(s).

I realise this is a big ask without your having the package to 
experiment on, but I thought that someone clever out there might be able 
to offer some insight.  E.g. what might I do to find out what is 
triggering that "embedded nul in string" business?

Thanks for any tips.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Nov  5 01:53:37 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 5 Nov 2019 13:53:37 +1300
Subject: [R-pkg-devel] Problem loading package on Windoze --- update.
In-Reply-To: <3643471e-6fda-090e-1154-903105eeb2a9@auckland.ac.nz>
References: <3643471e-6fda-090e-1154-903105eeb2a9@auckland.ac.nz>
Message-ID: <1ec08156-7e8f-df5a-46b4-c7af4f1b3a24@auckland.ac.nz>


I've just heard from another member of the client group and he cannot 
reproduce the problem.  I.e. he can install both the source package and 
the binary that I sent out, without error.

So the problem seems to be in the system used by that first member of 
the client group who contacted me.

Sorry for the noise.

cheers,

Rolf

On 5/11/19 12:37 PM, Rolf Turner wrote:
> 
> I am developing a package ("ldEst" --- lethal dose estimation) for a 
> group of consulting clients.? (The package may in the future be released 
> upon the unsuspecting public, but for the moment it has to stay 
> confidential, sad to say.)
> 
> The clients run Windoze (sad to say).? In the past I have sent them the 
> source of the package, which they have the facilities to install.? The 
> latest release of the package however threw an error:
> 
>>> install.packages("C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz", 
>>> repos = NULL, type = "source")
>>
>> Error in rawToChar(block[seq_len(ns)]) : ? embedded nul in string: 
>> '\037?\b\0\0\0\0\0\0\003?}\a`\024??0?\200,HG?N??\033&???\001a?\220???\022\b\201\020p?;I\006??-)T\021P\024\005, 
>> \002?" E??\024\001)?"*J\023?&\210R\024\vE??=?L????????~x????'
>> Warning in install.packages :
>> ? installation of package 
>> ?C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz? had non-zero exit 
>> status
> 
> Flummoxed by this I thought I'd just get Uwe Ligges' win-builder to 
> build a Windoze binary, and sent that to the clients.? The win-build 
> went without problem, but when I sent the binary to one of the clients 
> he got the error:
> 
>> Error: package or namespace load failed for ?ldEst? in get(method, 
>> envir = home):
>> ?lazy-load database 
>> 'C:/Users/abel122/Documents/R/win-library/3.6/ldEst/R/ldEst.rdb' is 
>> corrupt
>> In addition: Warning messages:
>> 1: In .registerS3method(fin[i, 1], fin[i, 2], fin[i, 3], fin[i, 4],? :
>> ? restarting interrupted promise evaluation
>> 2: In get(method, envir = home) :
>> ? restarting interrupted promise evaluation
>> 3: In get(method, envir = home) : internal error -3 in R_decompress1
> 
> I (sad to say) have no idea what any of this really means.
> 
> The package installs, loads, and? runs just fine on my Ubuntu system,
> and builds without error on win-builder.
> 
> Can any suggest a way that I might track down what's causing the error(s).
> 
> I realise this is a big ask without your having the package to 
> experiment on, but I thought that someone clever out there might be able 
> to offer some insight.? E.g. what might I do to find out what is 
> triggering that "embedded nul in string" business?
> 
> Thanks for any tips.


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Nov  5 07:59:54 2019
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 5 Nov 2019 07:59:54 +0100
Subject: [R-pkg-devel] netcdf question
In-Reply-To: <3A2ACE73-E6FD-4B71-9A5B-B6299820379C@noaa.gov>
References: <3A2ACE73-E6FD-4B71-9A5B-B6299820379C@noaa.gov>
Message-ID: <3a0d8ec7-63b3-0d3c-eb40-1ee4468eb9a0@gmail.com>

On 11/4/19 8:40 PM, Roy Mendelssohn - NOAA Federal via R-package-devel 
wrote:
> Hi All:
>
> I am wondering if it is possible to find out when packages that use the netcdf libraries are built on the CRAN machines (such as ncdf4) what versions of the netcdf library are being used on at least Mac and Windows?

Some libraries have that information included and available via their 
API and then the package API, e.g. ncdf4::nc_version()

Best
Tomas

> If this is the wrong place to ask,  please point me to where I should ask.
>
> Thanks,
>
> -Roy
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Nov  5 09:46:12 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 5 Nov 2019 08:46:12 +0000
Subject: [R-pkg-devel] Problem loading package on Windoze --- update.
In-Reply-To: <1ec08156-7e8f-df5a-46b4-c7af4f1b3a24@auckland.ac.nz>
References: <3643471e-6fda-090e-1154-903105eeb2a9@auckland.ac.nz>
 <1ec08156-7e8f-df5a-46b4-c7af4f1b3a24@auckland.ac.nz>
Message-ID: <CABtg=KnW-E+1HeFDCOiwT8OAhbXD4Bp2CX0UqOxqHa_gdtQ5_A@mail.gmail.com>

I am not sure what the first issue was, but the second is an old R
issue. It happens when you update a package while its package (or
help) database, the rdb file mentioned in the error message, is open
in the current R session, i.e. when the package is loaded. The
database keeps an index to the objects within the database on the
disk. And when the package is updated, this index will be invalid,
which R detects as a corrupt rdb file. Restarting R solves the
problem.

Btw. would R core be interested in a patch for this? I am not sure if
the situation is fixable, because the package is already loaded, and
we can't just reload it, but R could give a better error message. For
the help database, it might make sense to just re-open the database?

Gabor

On Tue, Nov 5, 2019 at 12:53 AM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> I've just heard from another member of the client group and he cannot
> reproduce the problem.  I.e. he can install both the source package and
> the binary that I sent out, without error.
>
> So the problem seems to be in the system used by that first member of
> the client group who contacted me.
>
> Sorry for the noise.
>
> cheers,
>
> Rolf
>
> On 5/11/19 12:37 PM, Rolf Turner wrote:
> >
> > I am developing a package ("ldEst" --- lethal dose estimation) for a
> > group of consulting clients.  (The package may in the future be released
> > upon the unsuspecting public, but for the moment it has to stay
> > confidential, sad to say.)
> >
> > The clients run Windoze (sad to say).  In the past I have sent them the
> > source of the package, which they have the facilities to install.  The
> > latest release of the package however threw an error:
> >
> >>> install.packages("C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz",
> >>> repos = NULL, type = "source")
> >>
> >> Error in rawToChar(block[seq_len(ns)]) :   embedded nul in string:
> >> '\037?\b\0\0\0\0\0\0\003?}\a`\024??0?\200,HG?N??\033&???\001a?\220???\022\b\201\020p?;I\006??-)T\021P\024\005,
> >> \002?" E??\024\001)?"*J\023?&\210R\024\vE??=?L????????~x????'
> >> Warning in install.packages :
> >>   installation of package
> >> ?C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz? had non-zero exit
> >> status
> >
> > Flummoxed by this I thought I'd just get Uwe Ligges' win-builder to
> > build a Windoze binary, and sent that to the clients.  The win-build
> > went without problem, but when I sent the binary to one of the clients
> > he got the error:
> >
> >> Error: package or namespace load failed for ?ldEst? in get(method,
> >> envir = home):
> >>  lazy-load database
> >> 'C:/Users/abel122/Documents/R/win-library/3.6/ldEst/R/ldEst.rdb' is
> >> corrupt
> >> In addition: Warning messages:
> >> 1: In .registerS3method(fin[i, 1], fin[i, 2], fin[i, 3], fin[i, 4],  :
> >>   restarting interrupted promise evaluation
> >> 2: In get(method, envir = home) :
> >>   restarting interrupted promise evaluation
> >> 3: In get(method, envir = home) : internal error -3 in R_decompress1
> >
> > I (sad to say) have no idea what any of this really means.
> >
> > The package installs, loads, and  runs just fine on my Ubuntu system,
> > and builds without error on win-builder.
> >
> > Can any suggest a way that I might track down what's causing the error(s).
> >
> > I realise this is a big ask without your having the package to
> > experiment on, but I thought that someone clever out there might be able
> > to offer some insight.  E.g. what might I do to find out what is
> > triggering that "embedded nul in string" business?
> >
> > Thanks for any tips.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Tue Nov  5 10:01:54 2019
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Tue, 5 Nov 2019 20:01:54 +1100
Subject: [R-pkg-devel] Problem loading package on Windoze --- update.
In-Reply-To: <CABtg=KnW-E+1HeFDCOiwT8OAhbXD4Bp2CX0UqOxqHa_gdtQ5_A@mail.gmail.com>
References: <3643471e-6fda-090e-1154-903105eeb2a9@auckland.ac.nz>
 <1ec08156-7e8f-df5a-46b4-c7af4f1b3a24@auckland.ac.nz>
 <CABtg=KnW-E+1HeFDCOiwT8OAhbXD4Bp2CX0UqOxqHa_gdtQ5_A@mail.gmail.com>
Message-ID: <CAJmOi+NLCK4jsGHW2ugxxVtggabd3rCTPkeL49=9To77v4V6fA@mail.gmail.com>

I wonder if Dropbox ?smartsync? is the culprit here. I?ve noticed this
feature can create confusion between programs when Dropbox provides (a link
to) the file when it is opened but only when it recognizes the file is
being opened.

On Tue, 5 Nov 2019 at 7:46 pm, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> I am not sure what the first issue was, but the second is an old R
> issue. It happens when you update a package while its package (or
> help) database, the rdb file mentioned in the error message, is open
> in the current R session, i.e. when the package is loaded. The
> database keeps an index to the objects within the database on the
> disk. And when the package is updated, this index will be invalid,
> which R detects as a corrupt rdb file. Restarting R solves the
> problem.
>
> Btw. would R core be interested in a patch for this? I am not sure if
> the situation is fixable, because the package is already loaded, and
> we can't just reload it, but R could give a better error message. For
> the help database, it might make sense to just re-open the database?
>
> Gabor
>
> On Tue, Nov 5, 2019 at 12:53 AM Rolf Turner <r.turner at auckland.ac.nz>
> wrote:
> >
> >
> > I've just heard from another member of the client group and he cannot
> > reproduce the problem.  I.e. he can install both the source package and
> > the binary that I sent out, without error.
> >
> > So the problem seems to be in the system used by that first member of
> > the client group who contacted me.
> >
> > Sorry for the noise.
> >
> > cheers,
> >
> > Rolf
> >
> > On 5/11/19 12:37 PM, Rolf Turner wrote:
> > >
> > > I am developing a package ("ldEst" --- lethal dose estimation) for a
> > > group of consulting clients.  (The package may in the future be
> released
> > > upon the unsuspecting public, but for the moment it has to stay
> > > confidential, sad to say.)
> > >
> > > The clients run Windoze (sad to say).  In the past I have sent them the
> > > source of the package, which they have the facilities to install.  The
> > > latest release of the package however threw an error:
> > >
> > >>> install.packages("C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz",
> > >>> repos = NULL, type = "source")
> > >>
> > >> Error in rawToChar(block[seq_len(ns)]) :   embedded nul in string:
> > >>
> '\037?\b\0\0\0\0\0\0\003?}\a`\024??0?\200,HG?N??\033&???\001a?\220???\022\b\201\020p?;I\006??-)T\021P\024\005,
> > >> \002?" E??\024\001)?"*J\023?&\210R\024\vE??=?L????????~x????'
> > >> Warning in install.packages :
> > >>   installation of package
> > >> ?C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz? had non-zero exit
> > >> status
> > >
> > > Flummoxed by this I thought I'd just get Uwe Ligges' win-builder to
> > > build a Windoze binary, and sent that to the clients.  The win-build
> > > went without problem, but when I sent the binary to one of the clients
> > > he got the error:
> > >
> > >> Error: package or namespace load failed for ?ldEst? in get(method,
> > >> envir = home):
> > >>  lazy-load database
> > >> 'C:/Users/abel122/Documents/R/win-library/3.6/ldEst/R/ldEst.rdb' is
> > >> corrupt
> > >> In addition: Warning messages:
> > >> 1: In .registerS3method(fin[i, 1], fin[i, 2], fin[i, 3], fin[i, 4],  :
> > >>   restarting interrupted promise evaluation
> > >> 2: In get(method, envir = home) :
> > >>   restarting interrupted promise evaluation
> > >> 3: In get(method, envir = home) : internal error -3 in R_decompress1
> > >
> > > I (sad to say) have no idea what any of this really means.
> > >
> > > The package installs, loads, and  runs just fine on my Ubuntu system,
> > > and builds without error on win-builder.
> > >
> > > Can any suggest a way that I might track down what's causing the
> error(s).
> > >
> > > I realise this is a big ask without your having the package to
> > > experiment on, but I thought that someone clever out there might be
> able
> > > to offer some insight.  E.g. what might I do to find out what is
> > > triggering that "embedded nul in string" business?
> > >
> > > Thanks for any tips.
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Nov  5 10:04:24 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 5 Nov 2019 09:04:24 +0000
Subject: [R-pkg-devel] Problem loading package on Windoze --- update.
In-Reply-To: <CAJmOi+NLCK4jsGHW2ugxxVtggabd3rCTPkeL49=9To77v4V6fA@mail.gmail.com>
References: <3643471e-6fda-090e-1154-903105eeb2a9@auckland.ac.nz>
 <1ec08156-7e8f-df5a-46b4-c7af4f1b3a24@auckland.ac.nz>
 <CABtg=KnW-E+1HeFDCOiwT8OAhbXD4Bp2CX0UqOxqHa_gdtQ5_A@mail.gmail.com>
 <CAJmOi+NLCK4jsGHW2ugxxVtggabd3rCTPkeL49=9To77v4V6fA@mail.gmail.com>
Message-ID: <CABtg=K=wUwzcpwhgjDMdAjO12DQX2-ukjeZ2PQ-TTm8nJzfddg@mail.gmail.com>

Maybe dropbox can make things worse, if your package library happens
to be in Dropbox. (I would think this is not a good idea.)

But it does happen without Dropbox, and if you install packages
frequently, e.g. if you develop a bunch of packages, then it is a
familiar error, it does happen all the time.

Gabor

On Tue, Nov 5, 2019 at 9:02 AM Hugh Parsonage <hugh.parsonage at gmail.com> wrote:
>
> I wonder if Dropbox ?smartsync? is the culprit here. I?ve noticed this feature can create confusion between programs when Dropbox provides (a link to) the file when it is opened but only when it recognizes the file is being opened.
>
> On Tue, 5 Nov 2019 at 7:46 pm, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>
>> I am not sure what the first issue was, but the second is an old R
>> issue. It happens when you update a package while its package (or
>> help) database, the rdb file mentioned in the error message, is open
>> in the current R session, i.e. when the package is loaded. The
>> database keeps an index to the objects within the database on the
>> disk. And when the package is updated, this index will be invalid,
>> which R detects as a corrupt rdb file. Restarting R solves the
>> problem.
>>
>> Btw. would R core be interested in a patch for this? I am not sure if
>> the situation is fixable, because the package is already loaded, and
>> we can't just reload it, but R could give a better error message. For
>> the help database, it might make sense to just re-open the database?
>>
>> Gabor
>>
>> On Tue, Nov 5, 2019 at 12:53 AM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>> >
>> >
>> > I've just heard from another member of the client group and he cannot
>> > reproduce the problem.  I.e. he can install both the source package and
>> > the binary that I sent out, without error.
>> >
>> > So the problem seems to be in the system used by that first member of
>> > the client group who contacted me.
>> >
>> > Sorry for the noise.
>> >
>> > cheers,
>> >
>> > Rolf
>> >
>> > On 5/11/19 12:37 PM, Rolf Turner wrote:
>> > >
>> > > I am developing a package ("ldEst" --- lethal dose estimation) for a
>> > > group of consulting clients.  (The package may in the future be released
>> > > upon the unsuspecting public, but for the moment it has to stay
>> > > confidential, sad to say.)
>> > >
>> > > The clients run Windoze (sad to say).  In the past I have sent them the
>> > > source of the package, which they have the facilities to install.  The
>> > > latest release of the package however threw an error:
>> > >
>> > >>> install.packages("C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz",
>> > >>> repos = NULL, type = "source")
>> > >>
>> > >> Error in rawToChar(block[seq_len(ns)]) :   embedded nul in string:
>> > >> '\037?\b\0\0\0\0\0\0\003?}\a`\024??0?\200,HG?N??\033&???\001a?\220???\022\b\201\020p?;I\006??-)T\021P\024\005,
>> > >> \002?" E??\024\001)?"*J\023?&\210R\024\vE??=?L????????~x????'
>> > >> Warning in install.packages :
>> > >>   installation of package
>> > >> ?C:/Users/abel122/Dropbox/PFR/ldEst_3.0-12.tar.gz? had non-zero exit
>> > >> status
>> > >
>> > > Flummoxed by this I thought I'd just get Uwe Ligges' win-builder to
>> > > build a Windoze binary, and sent that to the clients.  The win-build
>> > > went without problem, but when I sent the binary to one of the clients
>> > > he got the error:
>> > >
>> > >> Error: package or namespace load failed for ?ldEst? in get(method,
>> > >> envir = home):
>> > >>  lazy-load database
>> > >> 'C:/Users/abel122/Documents/R/win-library/3.6/ldEst/R/ldEst.rdb' is
>> > >> corrupt
>> > >> In addition: Warning messages:
>> > >> 1: In .registerS3method(fin[i, 1], fin[i, 2], fin[i, 3], fin[i, 4],  :
>> > >>   restarting interrupted promise evaluation
>> > >> 2: In get(method, envir = home) :
>> > >>   restarting interrupted promise evaluation
>> > >> 3: In get(method, envir = home) : internal error -3 in R_decompress1
>> > >
>> > > I (sad to say) have no idea what any of this really means.
>> > >
>> > > The package installs, loads, and  runs just fine on my Ubuntu system,
>> > > and builds without error on win-builder.
>> > >
>> > > Can any suggest a way that I might track down what's causing the error(s).
>> > >
>> > > I realise this is a big ask without your having the package to
>> > > experiment on, but I thought that someone clever out there might be able
>> > > to offer some insight.  E.g. what might I do to find out what is
>> > > triggering that "embedded nul in string" business?
>> > >
>> > > Thanks for any tips.
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Tue Nov  5 10:10:36 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Tue, 5 Nov 2019 09:10:36 +0000
Subject: [R-pkg-devel] Use LAPACK, BLAS and CBLAS paths in configure file
Message-ID: <F1A9B064-7AB2-4262-92AF-BF34DCEFE7D4@kaust.edu.sa>

 Hi,

I would like to

1- Use LAPACK, BLAS, and CBLAS paths in my configure file. What is the command to use or what are the environment variables to read?
2- Check if OpenBLAS is installed on the system or not. I tried to use pkg-config but it doesn't work with CRAN servers, any alternatives?


Thanks,
--Sameh




From r@||@@tubner @end|ng |rom gm@||@com  Tue Nov  5 11:08:54 2019
From: r@||@@tubner @end|ng |rom gm@||@com (Ralf Stubner)
Date: Tue, 5 Nov 2019 11:08:54 +0100
Subject: [R-pkg-devel] 
 Use LAPACK, BLAS and CBLAS paths in configure file
In-Reply-To: <F1A9B064-7AB2-4262-92AF-BF34DCEFE7D4@kaust.edu.sa>
References: <F1A9B064-7AB2-4262-92AF-BF34DCEFE7D4@kaust.edu.sa>
Message-ID: <CAFQwRQxstKGKQ3TnAWyTUt86Pg-xBsC=PJ7+pwTsVPnqVFnrzQ@mail.gmail.com>

On Tue, Nov 5, 2019 at 10:12 AM Sameh M. Abdulah
<sameh.abdulah at kaust.edu.sa> wrote:
> 1- Use LAPACK, BLAS, and CBLAS paths in my configure file. What is the command to use or what are the environment variables to read?

According to WRE [1] you should include "$(LAPACK_LIBS) $(BLAS_LIBS)
$(FLIBS)" in PKG_LIBS via src/Makevars. You can access these values
also via

R CMD config LAPACK_LIBS

etc. You cannot assume to have CBLAS installed.

[1] https://cran.r-project.org/doc/manuals/R-exts.html#Using-Makevars

> 2- Check if OpenBLAS is installed on the system or not. I tried to use pkg-config but it doesn't work with CRAN servers, any alternatives?

You mean pkg-config does not work or does not find OpenBLAS? The
latter would be hardly surprising, since the CRAN machines most likely
use the (partial) reference BLAS/LAPACK that is included with R. Why
should they have OpenBLAS installed as well?

cheerio
ralf


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Tue Nov  5 11:16:52 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Tue, 5 Nov 2019 10:16:52 +0000
Subject: [R-pkg-devel] 
 Use LAPACK, BLAS and CBLAS paths in configure file
In-Reply-To: <CAFQwRQxstKGKQ3TnAWyTUt86Pg-xBsC=PJ7+pwTsVPnqVFnrzQ@mail.gmail.com>
References: <F1A9B064-7AB2-4262-92AF-BF34DCEFE7D4@kaust.edu.sa>
 <CAFQwRQxstKGKQ3TnAWyTUt86Pg-xBsC=PJ7+pwTsVPnqVFnrzQ@mail.gmail.com>
Message-ID: <4C72CFED-51BD-42BD-85C7-7B2E6F6547B8@kaust.edu.sa>

My package requires LAPACK, LAPACKE, BLAS, and CBLAS, this why I think OpenBLAS should be available to support all these libraries.

--Sameh

?On 11/5/19, 1:09 PM, "Ralf Stubner" <ralf.stubner at gmail.com> wrote:

    On Tue, Nov 5, 2019 at 10:12 AM Sameh M. Abdulah
    <sameh.abdulah at kaust.edu.sa> wrote:
    > 1- Use LAPACK, BLAS, and CBLAS paths in my configure file. What is the command to use or what are the environment variables to read?
    
    According to WRE [1] you should include "$(LAPACK_LIBS) $(BLAS_LIBS)
    $(FLIBS)" in PKG_LIBS via src/Makevars. You can access these values
    also via
    
    R CMD config LAPACK_LIBS
    
    etc. You cannot assume to have CBLAS installed.
    
    [1] https://cran.r-project.org/doc/manuals/R-exts.html#Using-Makevars
    
    > 2- Check if OpenBLAS is installed on the system or not. I tried to use pkg-config but it doesn't work with CRAN servers, any alternatives?
    
    You mean pkg-config does not work or does not find OpenBLAS? The
    latter would be hardly surprising, since the CRAN machines most likely
    use the (partial) reference BLAS/LAPACK that is included with R. Why
    should they have OpenBLAS installed as well?
    
    cheerio
    ralf
    


From ||one| @end|ng |rom r@tud|o@com  Tue Nov  5 14:38:56 2019
From: ||one| @end|ng |rom r@tud|o@com (Lionel Henry)
Date: Tue, 5 Nov 2019 14:38:56 +0100
Subject: [R-pkg-devel] Status of macOS binaries
Message-ID: <CAJf4E3qJVdCnJyMSv-zjELg=5P6axF=SCMbwHbMoN9ESJbsE+A@mail.gmail.com>

Hello,

rlang 0.4.1 was released on 24th of October, but the macOS binaries
haven't been distributed yet. Is the binary service down?

I also see the check results for macOS haven't been published yet,
which could be related?

Best,
Lionel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Nov  5 14:59:18 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 5 Nov 2019 14:59:18 +0100
Subject: [R-pkg-devel] Status of macOS binaries
In-Reply-To: <CAJf4E3qJVdCnJyMSv-zjELg=5P6axF=SCMbwHbMoN9ESJbsE+A@mail.gmail.com>
References: <CAJf4E3qJVdCnJyMSv-zjELg=5P6axF=SCMbwHbMoN9ESJbsE+A@mail.gmail.com>
Message-ID: <3ef55f17-5fb2-7d85-2a29-5f4aa4b5ef43@statistik.tu-dortmund.de>

Can you pls send a message to Simon?

Best,
Uwe Ligges


On 05.11.2019 14:38, Lionel Henry wrote:
> Hello,
> 
> rlang 0.4.1 was released on 24th of October, but the macOS binaries
> haven't been distributed yet. Is the binary service down?
> 
> I also see the check results for macOS haven't been published yet,
> which could be related?
> 
> Best,
> Lionel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||one| @end|ng |rom r@tud|o@com  Tue Nov  5 16:25:02 2019
From: ||one| @end|ng |rom r@tud|o@com (Lionel Henry)
Date: Tue, 5 Nov 2019 16:25:02 +0100
Subject: [R-pkg-devel] Status of macOS binaries
In-Reply-To: <3ef55f17-5fb2-7d85-2a29-5f4aa4b5ef43@statistik.tu-dortmund.de>
References: <CAJf4E3qJVdCnJyMSv-zjELg=5P6axF=SCMbwHbMoN9ESJbsE+A@mail.gmail.com>
 <3ef55f17-5fb2-7d85-2a29-5f4aa4b5ef43@statistik.tu-dortmund.de>
Message-ID: <CAJf4E3qoeBNWSQCrMxY4PH6fDTRLcx80kdFEzVdPDK0GEqPV=g@mail.gmail.com>

>From Simon:

> thanks, there were issues with the machine after a power failure.
> The builds are back up and currently running, but catching up takes a while.

Best,
Lionel

On Tue, Nov 5, 2019 at 2:59 PM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
> Can you pls send a message to Simon?
>
> Best,
> Uwe Ligges
>
>
> On 05.11.2019 14:38, Lionel Henry wrote:
> > Hello,
> >
> > rlang 0.4.1 was released on 24th of October, but the macOS binaries
> > haven't been distributed yet. Is the binary service down?
> >
> > I also see the check results for macOS haven't been published yet,
> > which could be related?
> >
> > Best,
> > Lionel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >


From m@rc|njurek1988 @end|ng |rom gm@||@com  Wed Nov  6 15:43:50 2019
From: m@rc|njurek1988 @end|ng |rom gm@||@com (Marcin Jurek)
Date: Wed, 6 Nov 2019 08:43:50 -0600
Subject: [R-pkg-devel] debugging memory errors
Message-ID: <CAKpFkB1PKVGT-YyGX3Lh-dwEhqi7YwvF+=cj-s3rf73EJWNfbQ@mail.gmail.com>

Hello, I'm trying to submit my package to CRAN and received the following
error message:

Error(s) in re-building vignettes:
--- re-building ?GPvecchia_vignette.Rmd? using rmarkdown
.../RcppArmadillo/include/armadillo_bits/subview_meat.hpp:1223:54:
runtime error: reference binding to null pointer of type 'const unsigned
int'
...//RcppArmadillo/include/armadillo_bits/access.hpp:26:100: runtime
error: reference binding to null pointer of type 'unsigned int'
=================================================================
==40666==ERROR: AddressSanitizer: heap-buffer-overflow on address
0x615000445e48 at pc 0x7faebceeaa54 bp 0x7ffd4d87a980 sp 0x7ffd4d87a970
READ of size 8 at 0x615000445e48 thread T0
     #0 0x7faebceeaa53 in createUcpp(Rcpp::Vector<14,
Rcpp::PreserveStorage>, Rcpp::Vector<14, Rcpp::PreserveStorage>,
arma::Mat<double>, arma::Col<double>)
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/U_NZentries.cpp:366
     #1 0x7faebce84b2d in _GPvecchia_createUcpp
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/RcppExports.cpp:118

I have very little clue what to do, above all because I don't know how to
reproduce the error. Here is what I tried:
1. Using the r-devel-san container from rocker. When I'm building the
package using
> RD CMD build GPvecchia
it tells me:

Error: package or namespace load failed for ?GPvecchia? in dyn.load(file,
DLLpath = DLLpath, ...):
 unable to load shared object
'/tmp/RtmpRfO4Ad/Rinst96f4db205fe/00LOCK-GPvecchia/00new/GPvecchia/libs/GPvecchia.so':

/tmp/RtmpRfO4Ad/Rinst96f4db205fe/00LOCK-GPvecchia/00new/GPvecchia/libs/GPvecchia.so:
undefined symbol: __asan_option_detect_stack_use_after_return

Here is the package Makevars (following the specification from
https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt):
## optional
CXX_STD = CXX11

#PKG_CFLAGS = $(SHLIB_OPENMP_CFLAGS)
PKG_LIBS = $(SHLIB_OPENMP_CFLAGS) -lasan
PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS) -fsanitize=address,undefined
-fno-omit-frame-pointer -fno-sanitize=vptr
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)

MAIN_LDFLAGS=-fsanitize=address,undefined -pthread

F77 = gfortran -fsanitize=address
FC = gfortran -fsanitize=address
FCFLAGS = -g -O2 -mtune=native
FFLAGS = -g -O2 -mtune=native

2. I also tried using r-hub and their platform with R compiled with the
appropriate flags. However, their configuration does not support openMP.

Please help, thanks!

Marcin

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov  6 21:40:44 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 6 Nov 2019 23:40:44 +0300
Subject: [R-pkg-devel] debugging memory errors
In-Reply-To: <CAKpFkB1PKVGT-YyGX3Lh-dwEhqi7YwvF+=cj-s3rf73EJWNfbQ@mail.gmail.com>
References: <CAKpFkB1PKVGT-YyGX3Lh-dwEhqi7YwvF+=cj-s3rf73EJWNfbQ@mail.gmail.com>
Message-ID: <20191106234044.49997fec@Tarkus>

On Wed, 6 Nov 2019 08:43:50 -0600
Marcin Jurek <marcinjurek1988 at gmail.com> wrote:

> I have very little clue what to do, above all because I don't know
> how to reproduce the error.

Using AddressSanitizer to find memory errors in R packages requires the
R installation to be built with AddressSanitizer, too.

I found it useful to build the package with -g (and maybe -Og), then
run the checks using `R -d valgrind CMD check ...`. Sometimes the
errors found by Valgrind are different from errors found by
AddressSanitizer, though (not to mention the differences in hardware).

-- 
Best regards,
Ivan


From henr|k@bengt@@on @end|ng |rom gm@||@com  Wed Nov  6 21:59:39 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Wed, 6 Nov 2019 12:59:39 -0800
Subject: [R-pkg-devel] debugging memory errors
In-Reply-To: <20191106234044.49997fec@Tarkus>
References: <CAKpFkB1PKVGT-YyGX3Lh-dwEhqi7YwvF+=cj-s3rf73EJWNfbQ@mail.gmail.com>
 <20191106234044.49997fec@Tarkus>
Message-ID: <CAFDcVCQMoByyMLwYXzZJHvHDn_c5qwYo9s4GLaUyU7v8pm8i9g@mail.gmail.com>

There's also R Hub by G?bor Cs?rdi:

  https://builder.r-hub.io/advanced

It provides a win-builder-like service where you can test your package
with different R setups, including 'Debian Linux, R-devel, GCC
ASAN/UBSAN'.  There's also an 'rhub' package that allows you to run
all this from the R prompt.

It's simply great.

/Henrik


On Wed, Nov 6, 2019 at 12:41 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Wed, 6 Nov 2019 08:43:50 -0600
> Marcin Jurek <marcinjurek1988 at gmail.com> wrote:
>
> > I have very little clue what to do, above all because I don't know
> > how to reproduce the error.
>
> Using AddressSanitizer to find memory errors in R packages requires the
> R installation to be built with AddressSanitizer, too.
>
> I found it useful to build the package with -g (and maybe -Og), then
> run the checks using `R -d valgrind CMD check ...`. Sometimes the
> errors found by Valgrind are different from errors found by
> AddressSanitizer, though (not to mention the differences in hardware).
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Wed Nov  6 22:37:58 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 6 Nov 2019 15:37:58 -0600
Subject: [R-pkg-devel] debugging memory errors
In-Reply-To: <CAKpFkB1PKVGT-YyGX3Lh-dwEhqi7YwvF+=cj-s3rf73EJWNfbQ@mail.gmail.com>
References: <CAKpFkB1PKVGT-YyGX3Lh-dwEhqi7YwvF+=cj-s3rf73EJWNfbQ@mail.gmail.com>
Message-ID: <24003.15670.328165.740564@rob.eddelbuettel.com>


On 6 November 2019 at 08:43, Marcin Jurek wrote:
| Hello, I'm trying to submit my package to CRAN and received the following
| error message:
| 
| Error(s) in re-building vignettes:
| --- re-building ?GPvecchia_vignette.Rmd? using rmarkdown
| .../RcppArmadillo/include/armadillo_bits/subview_meat.hpp:1223:54:
| runtime error: reference binding to null pointer of type 'const unsigned
| int'
| ...//RcppArmadillo/include/armadillo_bits/access.hpp:26:100: runtime
| error: reference binding to null pointer of type 'unsigned int'
| =================================================================
| ==40666==ERROR: AddressSanitizer: heap-buffer-overflow on address
| 0x615000445e48 at pc 0x7faebceeaa54 bp 0x7ffd4d87a980 sp 0x7ffd4d87a970
| READ of size 8 at 0x615000445e48 thread T0
|      #0 0x7faebceeaa53 in createUcpp(Rcpp::Vector<14,
| Rcpp::PreserveStorage>, Rcpp::Vector<14, Rcpp::PreserveStorage>,
| arma::Mat<double>, arma::Col<double>)
| /data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/U_NZentries.cpp:366
|      #1 0x7faebce84b2d in _GPvecchia_createUcpp
| /data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/RcppExports.cpp:118
| 
| I have very little clue what to do, above all because I don't know how to
| reproduce the error. Here is what I tried:
| 1. Using the r-devel-san container from rocker. When I'm building the
| package using
| > RD CMD build GPvecchia
| it tells me:
| 
| Error: package or namespace load failed for ?GPvecchia? in dyn.load(file,
| DLLpath = DLLpath, ...):
|  unable to load shared object
| '/tmp/RtmpRfO4Ad/Rinst96f4db205fe/00LOCK-GPvecchia/00new/GPvecchia/libs/GPvecchia.so':
| 
| /tmp/RtmpRfO4Ad/Rinst96f4db205fe/00LOCK-GPvecchia/00new/GPvecchia/libs/GPvecchia.so:
| undefined symbol: __asan_option_detect_stack_use_after_return

That is strange.

| Here is the package Makevars (following the specification from
| https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt):
| ## optional
| CXX_STD = CXX11
| 
| #PKG_CFLAGS = $(SHLIB_OPENMP_CFLAGS)
| PKG_LIBS = $(SHLIB_OPENMP_CFLAGS) -lasan
| PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS) -fsanitize=address,undefined
| -fno-omit-frame-pointer -fno-sanitize=vptr
| PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
| 
| MAIN_LDFLAGS=-fsanitize=address,undefined -pthread
| 
| F77 = gfortran -fsanitize=address
| FC = gfortran -fsanitize=address
| FCFLAGS = -g -O2 -mtune=native
| FFLAGS = -g -O2 -mtune=native

Because the r-devel-san Rocker container is already instrumented for (A)SAN
at the r-devel level, you do not have say it again in your src/Makevars.
This could be the source of you error here.  Then again, it could be
something else.

Generally, SAN/ASAN/UBSAN debugging can be tedious. I built the Rocker
container to reproduce a bug report I had at the time. The containers can
then slip behind in their config -- but there are alternative ones as has
been pointed out here: rhub is one, and I believe Winston et al also have one
in the rstudio container stack.  I used all of them, but at time still failed
to reproduce errors at CRAN.

In a world with more resources, someone somewhere could help CRAN to publish
their containers. Then we would have reproducibility.  Until then it is at
times more like poking with a stick ...

Dirk
 
| 2. I also tried using r-hub and their platform with R compiled with the
| appropriate flags. However, their configuration does not support openMP.
| 
| Please help, thanks!
| 
| Marcin
| 
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Bernd@Gruber @end|ng |rom c@nberr@@edu@@u  Thu Nov  7 00:50:42 2019
From: Bernd@Gruber @end|ng |rom c@nberr@@edu@@u (Bernd.Gruber)
Date: Wed, 6 Nov 2019 23:50:42 +0000
Subject: [R-pkg-devel] two functions with the same name when importing
Message-ID: <ME1PR01MB133193985D27612F317AEE53D4790@ME1PR01MB1331.ausprd01.prod.outlook.com>

Hi,

I have a problem regarding the name of two functions and I know the "correct" way is to use importFrom to make sure only specified functions are imported. But my problem is that my package really depends on another package
adegenet as I basically use 90% of the say >100 functions.

So when I import all of adegenet I get:

2: replacing previous import 'adegenet::plot' by 'graphics::plot' when loading 'dartR'


So in essence I think adegenet is importing a plot function which collides with the basic plot function. Is there anything I can do, without going through 100 functions and using importFrom

In addition I actually need the plot function from adegenet, so I would need to rename it as well somehow.

Any hint how to solve this would be highly appreciated.

Regards, Bernd





==============================================================================
Dr Bernd Gruber                                              )/_
                                                         _.--..---"-,--c_
Associate Professor                                 \|..'           ._O__)_
Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
Institute for Applied Ecology                  `'''       `\__   /\
Faculty of Science and Technology                          ')
University of Canberra   ACT 2601 AUSTRALIA
Email: bernd.gruber at canberra.edu.au
WWW: bernd-gruber

Australian Government Higher Education Provider Number CRICOS #00212K
NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
confidential or copyright material and are for the attention of the addressee
only. If you have received this email in error please notify us by email
reply and delete it from your system. The University of Canberra accepts
no liability for any damage caused by any virus transmitted by this email.
==============================================================================

[UC Logo]<http://www.canberra.edu.au>

[Number 1 in the ACT for graduate employment and starting salaries]


[UC Facebook]<https://www.facebook.com/UniversityOfCanberra>[UC Twitter]<https://twitter.com/UniCanberra>[UC Instagram]<https://www.instagram.com/unicanberra/>[UC Linkedin]<https://au.linkedin.com/school/university-of-canberra/>[UC Youtube]<https://www.youtube.com/user/uniofcanberra>    [University of Canberra] <http://www.canberra.edu.au>
Australian Government Higher Education Registered Provider (CRICOS) #00212K
The University of Canberra acknowledges the Ngunnawal people, traditional custodians of the lands where Bruce Campus is situated. We wish to acknowledge and respect their continuing culture and the contribution they make to the life of Canberra and the region. We also acknowledge all other First Nations Peoples on whose lands we gather.

NOTICE AND DISCLAIMER: This email and any files transmitted with it may contain confidential or copyright materials and are for the attention of the addressee only. If you have received this email in error please notify us by email reply and delete it from your system. The University of Canberra accepts no liability for any damage caused by any virus transmitted by this email.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Nov  7 02:30:45 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 6 Nov 2019 20:30:45 -0500
Subject: [R-pkg-devel] two functions with the same name when importing
In-Reply-To: <ME1PR01MB133193985D27612F317AEE53D4790@ME1PR01MB1331.ausprd01.prod.outlook.com>
References: <ME1PR01MB133193985D27612F317AEE53D4790@ME1PR01MB1331.ausprd01.prod.outlook.com>
Message-ID: <3575080f-d240-1ae8-c2e1-0e20a6994651@gmail.com>

On 06/11/2019 6:50 p.m., Bernd.Gruber wrote:
> Hi,
> 
> I have a problem regarding the name of two functions and I know the "correct" way is to use importFrom to make sure only specified functions are imported. But my problem is that my package really depends on another package
> adegenet as I basically use 90% of the say >100 functions.
> 
> So when I import all of adegenet I get:
> 
> 2: replacing previous import 'adegenet::plot' by 'graphics::plot' when loading 'dartR'
> 
> 
> So in essence I think adegenet is importing a plot function which collides with the basic plot function. Is there anything I can do, without going through 100 functions and using importFrom
> 
> In addition I actually need the plot function from adegenet, so I would need to rename it as well somehow.
> 
> Any hint how to solve this would be highly appreciated.

Just get a copy of the adegenet NAMESPACE file to get all of its 
exports.  Edit the list down to the ones you use, and use a text editor 
to change the export directives to importFrom directives.  It's not 
really that hard.

The path to the NAMESPACE file is given by

system.file("NAMESPACE", package="adegenet")

Duncan Murdoch


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Thu Nov  7 10:34:10 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Thu, 7 Nov 2019 09:34:10 +0000
Subject: [R-pkg-devel] two functions with the same name when importing
In-Reply-To: <3575080f-d240-1ae8-c2e1-0e20a6994651@gmail.com>
References: <ME1PR01MB133193985D27612F317AEE53D4790@ME1PR01MB1331.ausprd01.prod.outlook.com>
 <3575080f-d240-1ae8-c2e1-0e20a6994651@gmail.com>
Message-ID: <DM6PR04MB42357490D5286F5845E13172F9780@DM6PR04MB4235.namprd04.prod.outlook.com>

RShowDoc("R-exts") setion 1.5.1 Specifying imports and exports indicates that imports() has an except= argument, so

import(adegenet, except = plot)

might do the trick. Use it in your package as `adegenet::plot()`. 

Martin Morgan

?On 11/6/19, 8:31 PM, "R-package-devel on behalf of Duncan Murdoch" <r-package-devel-bounces at r-project.org on behalf of murdoch.duncan at gmail.com> wrote:

    On 06/11/2019 6:50 p.m., Bernd.Gruber wrote:
    > Hi,
    > 
    > I have a problem regarding the name of two functions and I know the "correct" way is to use importFrom to make sure only specified functions are imported. But my problem is that my package really depends on another package
    > adegenet as I basically use 90% of the say >100 functions.
    > 
    > So when I import all of adegenet I get:
    > 
    > 2: replacing previous import 'adegenet::plot' by 'graphics::plot' when loading 'dartR'
    > 
    > 
    > So in essence I think adegenet is importing a plot function which collides with the basic plot function. Is there anything I can do, without going through 100 functions and using importFrom
    > 
    > In addition I actually need the plot function from adegenet, so I would need to rename it as well somehow.
    > 
    > Any hint how to solve this would be highly appreciated.
    
    Just get a copy of the adegenet NAMESPACE file to get all of its 
    exports.  Edit the list down to the ones you use, and use a text editor 
    to change the export directives to importFrom directives.  It's not 
    really that hard.
    
    The path to the NAMESPACE file is given by
    
    system.file("NAMESPACE", package="adegenet")
    
    Duncan Murdoch
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From Bernd@Gruber @end|ng |rom c@nberr@@edu@@u  Thu Nov  7 10:51:21 2019
From: Bernd@Gruber @end|ng |rom c@nberr@@edu@@u (Bernd.Gruber)
Date: Thu, 7 Nov 2019 09:51:21 +0000
Subject: [R-pkg-devel] two functions with the same name when importing
In-Reply-To: <DM6PR04MB42357490D5286F5845E13172F9780@DM6PR04MB4235.namprd04.prod.outlook.com>
References: <ME1PR01MB133193985D27612F317AEE53D4790@ME1PR01MB1331.ausprd01.prod.outlook.com>
 <3575080f-d240-1ae8-c2e1-0e20a6994651@gmail.com>
 <DM6PR04MB42357490D5286F5845E13172F9780@DM6PR04MB4235.namprd04.prod.outlook.com>
Message-ID: <ME1PR01MB1331E6CB65BBB998D4D31AE8D4780@ME1PR01MB1331.ausprd01.prod.outlook.com>

@Martin Morgan<mailto:mtmorgan.bioc at gmail.com>

Thanks to your hint if found this:

@rawNamespace import(adegenet, except = plot)

which works beautifully  and no need to go through each Namespace function.

Thanks again to everyone.




From: Martin Morgan <mtmorgan.bioc at gmail.com>
Sent: Thursday, 7 November 2019 8:34 PM
To: Duncan Murdoch <murdoch.duncan at gmail.com>; Bernd.Gruber <Bernd.Gruber at canberra.edu.au>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] two functions with the same name when importing

RShowDoc("R-exts") setion 1.5.1 Specifying imports and exports indicates that imports() has an except= argument, so

import(adegenet, except = plot)

might do the trick. Use it in your package as `adegenet::plot()`.

Martin Morgan

?On 11/6/19, 8:31 PM, "R-package-devel on behalf of Duncan Murdoch" <r-package-devel-bounces at r-project.org on behalf of murdoch.duncan at gmail.com<mailto:r-package-devel-bounces at r-project.org%20on%20behalf%20of%20murdoch.duncan at gmail.com>> wrote:

On 06/11/2019 6:50 p.m., Bernd.Gruber wrote:
> Hi,
>
> I have a problem regarding the name of two functions and I know the "correct" way is to use importFrom to make sure only specified functions are imported. But my problem is that my package really depends on another package
> adegenet as I basically use 90% of the say >100 functions.
>
> So when I import all of adegenet I get:
>
> 2: replacing previous import 'adegenet::plot' by 'graphics::plot' when loading 'dartR'
>
>
> So in essence I think adegenet is importing a plot function which collides with the basic plot function. Is there anything I can do, without going through 100 functions and using importFrom
>
> In addition I actually need the plot function from adegenet, so I would need to rename it as well somehow.
>
> Any hint how to solve this would be highly appreciated.

Just get a copy of the adegenet NAMESPACE file to get all of its
exports. Edit the list down to the ones you use, and use a text editor
to change the export directives to importFrom directives. It's not
really that hard.

The path to the NAMESPACE file is given by

system.file("NAMESPACE", package="adegenet")

Duncan Murdoch

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From biii m@iii@g oii de@@ey@ws  Thu Nov  7 15:35:49 2019
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Thu, 7 Nov 2019 09:35:49 -0500
Subject: [R-pkg-devel] How to Document and S3 Method for the Parenthesis
 Class?
Message-ID: <001d01d59578$a71a23e0$f54e6ba0$@denney.ws>

Hi,

 

Short version of the question:  How does one document a method for the "("
class in a .Rd file?

 

Details:

I recently contributed to the digest package functions to assist with
generating sha1 hashes for formula objects.  Sometimes within formula, the
parenthesis ("(") class is used, for example [1]:

 

> class((a~(b+c))[[3]])

[1] "("

 

So, I wrote a method to handle that class, too.  When trying to document it
in the .Rd file, I tried the following code, but when checking the
documentation, it gets an error:

 

\method{sha1}{"("}(x, digits = 14, zapsmall = 7, ..., algo = "sha1")

 

The error when checking the documentation is:

 

> checking Rd \usage sections ... WARNING

  Bad \usage lines found in documentation object 'sha1':

    <unescaped bksl>method{sha1}{"("}(x, digits = 14, zapsmall = 7, ...,
algo = "sha1")

  

  Functions with \usage entries need to have the appropriate \alias

  entries, and all their arguments documented.

  The \usage entries must correspond to syntactically valid R code.

  See chapter 'Writing R documentation files' in the 'Writing R

  Extensions' manual.

 

I have tried variants of escaping the parenthesis like "\(" and "\\(" and
the unescaped variant "(", too.

 

Thanks,

 

Bill

 

[1] In case the first thought is, "don't write formula which have a full
side within redundant parentheses", something equivalent to this was created
by update.formula().


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Nov  7 16:27:00 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 7 Nov 2019 10:27:00 -0500
Subject: [R-pkg-devel] How to Document and S3 Method for the Parenthesis
 Class?
In-Reply-To: <001d01d59578$a71a23e0$f54e6ba0$@denney.ws>
References: <001d01d59578$a71a23e0$f54e6ba0$@denney.ws>
Message-ID: <71a23dbe-d9f1-904b-f2b4-0f694c729bc6@gmail.com>

On 07/11/2019 9:35 a.m., bill at denney.ws wrote:
> Hi,
> 
>   
> 
> Short version of the question:  How does one document a method for the "("
> class in a .Rd file?
> 
>   
> 
> Details:
> 
> I recently contributed to the digest package functions to assist with
> generating sha1 hashes for formula objects.  Sometimes within formula, the
> parenthesis ("(") class is used, for example [1]:
> 
>   
> 
>> class((a~(b+c))[[3]])
> 
> [1] "("
> 
>   
> 
> So, I wrote a method to handle that class, too.  When trying to document it
> in the .Rd file, I tried the following code, but when checking the
> documentation, it gets an error:
> 
>   
> 
> \method{sha1}{"("}(x, digits = 14, zapsmall = 7, ..., algo = "sha1")

I think this should work:

   \method{sha1}{`(`}(x, digits = 14, zapsmall = 7, ..., algo = "sha1")

A quick test case gave me errors from not documenting the args, but not 
the bad \usage line error described below.

Duncan Murdoch

> 
>   
> 
> The error when checking the documentation is:
> 
>   
> 
>> checking Rd \usage sections ... WARNING
> 
>    Bad \usage lines found in documentation object 'sha1':
> 
>      <unescaped bksl>method{sha1}{"("}(x, digits = 14, zapsmall = 7, ...,
> algo = "sha1")
> 
>    
> 
>    Functions with \usage entries need to have the appropriate \alias
> 
>    entries, and all their arguments documented.
> 
>    The \usage entries must correspond to syntactically valid R code.
> 
>    See chapter 'Writing R documentation files' in the 'Writing R
> 
>    Extensions' manual.
> 
>   
> 
> I have tried variants of escaping the parenthesis like "\(" and "\\(" and
> the unescaped variant "(", too.
> 
>   
> 
> Thanks,
> 
>   
> 
> Bill
> 
>   
> 
> [1] In case the first thought is, "don't write formula which have a full
> side within redundant parentheses", something equivalent to this was created
> by update.formula().
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Nov  7 16:42:42 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 07 Nov 2019 07:42:42 -0800
Subject: [R-pkg-devel] How to Document and S3 Method for the Parenthesis
 Class?
In-Reply-To: <001d01d59578$a71a23e0$f54e6ba0$@denney.ws>
References: <001d01d59578$a71a23e0$f54e6ba0$@denney.ws>
Message-ID: <A094D307-B267-4E11-A4E6-CB341416F3BD@dcn.davis.ca.us>

There are three types of quoting in R... " and ' are for strings, and ` (backtick) is for symbols.

On November 7, 2019 6:35:49 AM PST, bill at denney.ws wrote:
>Hi,
>
> 
>
>Short version of the question:  How does one document a method for the
>"("
>class in a .Rd file?
>
> 
>
>Details:
>
>I recently contributed to the digest package functions to assist with
>generating sha1 hashes for formula objects.  Sometimes within formula,
>the
>parenthesis ("(") class is used, for example [1]:
>
> 
>
>> class((a~(b+c))[[3]])
>
>[1] "("
>
> 
>
>So, I wrote a method to handle that class, too.  When trying to
>document it
>in the .Rd file, I tried the following code, but when checking the
>documentation, it gets an error:
>
> 
>
>\method{sha1}{"("}(x, digits = 14, zapsmall = 7, ..., algo = "sha1")
>
> 
>
>The error when checking the documentation is:
>
> 
>
>> checking Rd \usage sections ... WARNING
>
>  Bad \usage lines found in documentation object 'sha1':
>
>   <unescaped bksl>method{sha1}{"("}(x, digits = 14, zapsmall = 7, ...,
>algo = "sha1")
>
>  
>
>  Functions with \usage entries need to have the appropriate \alias
>
>  entries, and all their arguments documented.
>
>  The \usage entries must correspond to syntactically valid R code.
>
>  See chapter 'Writing R documentation files' in the 'Writing R
>
>  Extensions' manual.
>
> 
>
>I have tried variants of escaping the parenthesis like "\(" and "\\("
>and
>the unescaped variant "(", too.
>
> 
>
>Thanks,
>
> 
>
>Bill
>
> 
>
>[1] In case the first thought is, "don't write formula which have a
>full
>side within redundant parentheses", something equivalent to this was
>created
>by update.formula().
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From biii m@iii@g oii de@@ey@ws  Thu Nov  7 16:44:47 2019
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Thu, 7 Nov 2019 10:44:47 -0500
Subject: [R-pkg-devel] How to Document and S3 Method for the Parenthesis
 Class?
In-Reply-To: <71a23dbe-d9f1-904b-f2b4-0f694c729bc6@gmail.com>
References: <001d01d59578$a71a23e0$f54e6ba0$@denney.ws>
 <71a23dbe-d9f1-904b-f2b4-0f694c729bc6@gmail.com>
Message-ID: <006201d59582$496f5da0$dc4e18e0$@denney.ws>

Thank you, Duncan, that fixed it!

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Thursday, November 7, 2019 10:27 AM
To: bill at denney.ws; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] How to Document and S3 Method for the Parenthesis Class?

On 07/11/2019 9:35 a.m., bill at denney.ws wrote:
> Hi,
> 
>   
> 
> Short version of the question:  How does one document a method for the "("
> class in a .Rd file?
> 
>   
> 
> Details:
> 
> I recently contributed to the digest package functions to assist with 
> generating sha1 hashes for formula objects.  Sometimes within formula, 
> the parenthesis ("(") class is used, for example [1]:
> 
>   
> 
>> class((a~(b+c))[[3]])
> 
> [1] "("
> 
>   
> 
> So, I wrote a method to handle that class, too.  When trying to 
> document it in the .Rd file, I tried the following code, but when 
> checking the documentation, it gets an error:
> 
>   
> 
> \method{sha1}{"("}(x, digits = 14, zapsmall = 7, ..., algo = "sha1")

I think this should work:

   \method{sha1}{`(`}(x, digits = 14, zapsmall = 7, ..., algo = "sha1")

A quick test case gave me errors from not documenting the args, but not the bad \usage line error described below.

Duncan Murdoch

> 
>   
> 
> The error when checking the documentation is:
> 
>   
> 
>> checking Rd \usage sections ... WARNING
> 
>    Bad \usage lines found in documentation object 'sha1':
> 
>      <unescaped bksl>method{sha1}{"("}(x, digits = 14, zapsmall = 7, 
> ..., algo = "sha1")
> 
>    
> 
>    Functions with \usage entries need to have the appropriate \alias
> 
>    entries, and all their arguments documented.
> 
>    The \usage entries must correspond to syntactically valid R code.
> 
>    See chapter 'Writing R documentation files' in the 'Writing R
> 
>    Extensions' manual.
> 
>   
> 
> I have tried variants of escaping the parenthesis like "\(" and "\\(" 
> and the unescaped variant "(", too.
> 
>   
> 
> Thanks,
> 
>   
> 
> Bill
> 
>   
> 
> [1] In case the first thought is, "don't write formula which have a 
> full side within redundant parentheses", something equivalent to this 
> was created by update.formula().
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From biii m@iii@g oii de@@ey@ws  Thu Nov  7 16:47:57 2019
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Thu, 7 Nov 2019 10:47:57 -0500
Subject: [R-pkg-devel] How to Document and S3 Method for the Parenthesis
 Class?
In-Reply-To: <A094D307-B267-4E11-A4E6-CB341416F3BD@dcn.davis.ca.us>
References: <001d01d59578$a71a23e0$f54e6ba0$@denney.ws>
 <A094D307-B267-4E11-A4E6-CB341416F3BD@dcn.davis.ca.us>
Message-ID: <006601d59582$ba306ac0$2e914040$@denney.ws>

That's fair, though it's not 100% consistent because code like the following works for symbols, too:

"(\\@" <- 1

(This is selected to show how bad things can be done-- not as an example to advocate.)

-----Original Message-----
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us> 
Sent: Thursday, November 7, 2019 10:43 AM
To: r-package-devel at r-project.org; bill at denney.ws
Subject: Re: [R-pkg-devel] How to Document and S3 Method for the Parenthesis Class?

There are three types of quoting in R... " and ' are for strings, and ` (backtick) is for symbols.

On November 7, 2019 6:35:49 AM PST, bill at denney.ws wrote:
>Hi,
>
> 
>
>Short version of the question:  How does one document a method for the 
>"("
>class in a .Rd file?
>
> 
>
>Details:
>
>I recently contributed to the digest package functions to assist with 
>generating sha1 hashes for formula objects.  Sometimes within formula, 
>the parenthesis ("(") class is used, for example [1]:
>
> 
>
>> class((a~(b+c))[[3]])
>
>[1] "("
>
> 
>
>So, I wrote a method to handle that class, too.  When trying to 
>document it in the .Rd file, I tried the following code, but when 
>checking the documentation, it gets an error:
>
> 
>
>\method{sha1}{"("}(x, digits = 14, zapsmall = 7, ..., algo = "sha1")
>
> 
>
>The error when checking the documentation is:
>
> 
>
>> checking Rd \usage sections ... WARNING
>
>  Bad \usage lines found in documentation object 'sha1':
>
>   <unescaped bksl>method{sha1}{"("}(x, digits = 14, zapsmall = 7, ..., 
>algo = "sha1")
>
>  
>
>  Functions with \usage entries need to have the appropriate \alias
>
>  entries, and all their arguments documented.
>
>  The \usage entries must correspond to syntactically valid R code.
>
>  See chapter 'Writing R documentation files' in the 'Writing R
>
>  Extensions' manual.
>
> 
>
>I have tried variants of escaping the parenthesis like "\(" and "\\("
>and
>the unescaped variant "(", too.
>
> 
>
>Thanks,
>
> 
>
>Bill
>
> 
>
>[1] In case the first thought is, "don't write formula which have a 
>full side within redundant parentheses", something equivalent to this 
>was created by update.formula().
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list 
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Nov  7 18:05:25 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 07 Nov 2019 09:05:25 -0800
Subject: [R-pkg-devel] How to Document and S3 Method for the Parenthesis
 Class?
In-Reply-To: <006601d59582$ba306ac0$2e914040$@denney.ws>
References: <001d01d59578$a71a23e0$f54e6ba0$@denney.ws>
 <A094D307-B267-4E11-A4E6-CB341416F3BD@dcn.davis.ca.us>
 <006601d59582$ba306ac0$2e914040$@denney.ws>
Message-ID: <47DE1E5C-8A88-4EF9-A4A3-D77AE93DBB67@dcn.davis.ca.us>

That works not because of how the language works but because that is how the `<-` function works.

On November 7, 2019 7:47:57 AM PST, bill at denney.ws wrote:
>That's fair, though it's not 100% consistent because code like the
>following works for symbols, too:
>
>"(\\@" <- 1
>
>(This is selected to show how bad things can be done-- not as an
>example to advocate.)
>
>-----Original Message-----
>From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us> 
>Sent: Thursday, November 7, 2019 10:43 AM
>To: r-package-devel at r-project.org; bill at denney.ws
>Subject: Re: [R-pkg-devel] How to Document and S3 Method for the
>Parenthesis Class?
>
>There are three types of quoting in R... " and ' are for strings, and `
>(backtick) is for symbols.
>
>On November 7, 2019 6:35:49 AM PST, bill at denney.ws wrote:
>>Hi,
>>
>> 
>>
>>Short version of the question:  How does one document a method for the
>
>>"("
>>class in a .Rd file?
>>
>> 
>>
>>Details:
>>
>>I recently contributed to the digest package functions to assist with 
>>generating sha1 hashes for formula objects.  Sometimes within formula,
>
>>the parenthesis ("(") class is used, for example [1]:
>>
>> 
>>
>>> class((a~(b+c))[[3]])
>>
>>[1] "("
>>
>> 
>>
>>So, I wrote a method to handle that class, too.  When trying to 
>>document it in the .Rd file, I tried the following code, but when 
>>checking the documentation, it gets an error:
>>
>> 
>>
>>\method{sha1}{"("}(x, digits = 14, zapsmall = 7, ..., algo = "sha1")
>>
>> 
>>
>>The error when checking the documentation is:
>>
>> 
>>
>>> checking Rd \usage sections ... WARNING
>>
>>  Bad \usage lines found in documentation object 'sha1':
>>
>>   <unescaped bksl>method{sha1}{"("}(x, digits = 14, zapsmall = 7,
>..., 
>>algo = "sha1")
>>
>>  
>>
>>  Functions with \usage entries need to have the appropriate \alias
>>
>>  entries, and all their arguments documented.
>>
>>  The \usage entries must correspond to syntactically valid R code.
>>
>>  See chapter 'Writing R documentation files' in the 'Writing R
>>
>>  Extensions' manual.
>>
>> 
>>
>>I have tried variants of escaping the parenthesis like "\(" and "\\("
>>and
>>the unescaped variant "(", too.
>>
>> 
>>
>>Thanks,
>>
>> 
>>
>>Bill
>>
>> 
>>
>>[1] In case the first thought is, "don't write formula which have a 
>>full side within redundant parentheses", something equivalent to this 
>>was created by update.formula().
>>
>>
>>	[[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-package-devel at r-project.org mailing list 
>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>--
>Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Fri Nov  8 08:25:31 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Fri, 8 Nov 2019 07:25:31 +0000
Subject: [R-pkg-devel] Set env variables for cmake
Message-ID: <2C7C956B-88AC-415D-9877-D7ED05A6E613@kaust.edu.sa>

I am using CMake command inside the configure file to install some dependencies for my package. These CMake commands require setting an environment variable. When I set it inside the configure file, it does not work!. Thus, I have used .Renviron file to set my env variables. This solution works on my machine but it does not work with CRAN and I do not know why. What is the best way to set environment variables for my configure file?


--Sameh

	[[alternative HTML version deleted]]


From rm@h@rp @end|ng |rom me@com  Fri Nov  8 17:14:13 2019
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Fri, 8 Nov 2019 10:14:13 -0600
Subject: [R-pkg-devel] R-hub PREPERROR on Ubuntu Linux 16.04 LTS, R-release,
 GCC not on other platforms
Message-ID: <3209D760-A474-4B97-8377-0FB354B25273@me.com>

Should I ignore this problem with regard to going forward with a submission to CRAN?

It looks like some CRAN packages that I am dependent on are not available on the Ubuntu Linux 16.04 LTS platform.

#> Failed with error: ?there is no package called ?shiny??
#> ERROR: dependency ?openssl? is not available for package ?httr?
#> ERROR: dependency ?httr? is not available for package ?covr?
#> ERROR: dependency ?httr? is not available for package ?Rlabkey?
#> ERROR: dependencies ?httr?, ?openssl? are not available for package ?pkgdown?
#> ERROR: dependency ?Rlabkey? is not available for package ?nprcmanager?

The following platforms have no errors or warnings and have only the ?New submission? note.

Windows Server 2008 R2 SP1, R-devel, 32/64 bit
Fedora Linux, R-devel, clang, gfortran

Mark

R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com


From edd @end|ng |rom deb|@n@org  Fri Nov  8 17:38:23 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 8 Nov 2019 10:38:23 -0600
Subject: [R-pkg-devel] 
 R-hub PREPERROR on Ubuntu Linux 16.04 LTS, R-release,
 GCC not on other platforms
In-Reply-To: <3209D760-A474-4B97-8377-0FB354B25273@me.com>
References: <3209D760-A474-4B97-8377-0FB354B25273@me.com>
Message-ID: <24005.39423.158277.816975@rob.eddelbuettel.com>


On 8 November 2019 at 10:14, R. Mark Sharp wrote:
| Should I ignore this problem with regard to going forward with a submission to CRAN?
| 
| It looks like some CRAN packages that I am dependent on are not available on the Ubuntu Linux 16.04 LTS platform.
| 
| #> Failed with error: ?there is no package called ?shiny??
| #> ERROR: dependency ?openssl? is not available for package ?httr?
| #> ERROR: dependency ?httr? is not available for package ?covr?
| #> ERROR: dependency ?httr? is not available for package ?Rlabkey?
| #> ERROR: dependencies ?httr?, ?openssl? are not available for package ?pkgdown?
| #> ERROR: dependency ?Rlabkey? is not available for package ?nprcmanager?
| 
| The following platforms have no errors or warnings and have only the ?New submission? note.
| 
| Windows Server 2008 R2 SP1, R-devel, 32/64 bit
| Fedora Linux, R-devel, clang, gfortran

Are you running this at rhub?

Rhub is a "contributed service" so as the CRAN Checklist [1] says, "results
may differ".  You can file bug reports for rhub; I have done in the past and
it (at times) has lead to changes.

As for your package, it looks like it passes on fully set-up test beds so
it looks like you may be ready for submission.  Only CRAN can tell, and only
will if you actually submit ;-)

Dirk

https://cran.r-project.org/web/packages/submission_checklist.html

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kev|nu@hey @end|ng |rom gm@||@com  Fri Nov  8 19:38:14 2019
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Fri, 8 Nov 2019 10:38:14 -0800
Subject: [R-pkg-devel] Set env variables for cmake
In-Reply-To: <2C7C956B-88AC-415D-9877-D7ED05A6E613@kaust.edu.sa>
References: <2C7C956B-88AC-415D-9877-D7ED05A6E613@kaust.edu.sa>
Message-ID: <CAJXgQP2tT1kZ_4YoXnXozepKA+Fa4sesbCBmb==q-2+rgVuxcA@mail.gmail.com>

It would help if you shared your source code, so we know what you've tried.

Presumably, you need to either export the variables you're setting, or
just pass them along when invoking CMake. For example:

    ENVVAR=1
    export ENVVAR
    cmake <...>

or

    ENVVAR=1 cmake <...>

Best,
Kevin

On Thu, Nov 7, 2019 at 11:25 PM Sameh M. Abdulah
<sameh.abdulah at kaust.edu.sa> wrote:
>
> I am using CMake command inside the configure file to install some dependencies for my package. These CMake commands require setting an environment variable. When I set it inside the configure file, it does not work!. Thus, I have used .Renviron file to set my env variables. This solution works on my machine but it does not work with CRAN and I do not know why. What is the best way to set environment variables for my configure file?
>
>
> --Sameh
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |n|o @end|ng |rom @c|encegr@ph@org  Sun Nov 10 11:31:19 2019
From: |n|o @end|ng |rom @c|encegr@ph@org (Pere Millan Martinez)
Date: Sun, 10 Nov 2019 11:31:19 +0100
Subject: [R-pkg-devel] checking for detritus finds unfamiliar files
In-Reply-To: <eee3cb67-4591-0202-ef21-2a1b1d4ca429@sciencegraph.org>
References: <eee3cb67-4591-0202-ef21-2a1b1d4ca429@sciencegraph.org>
Message-ID: <f3e8e7be-3a28-8538-ce0a-d4ef998d6d9e@sciencegraph.org>

Hello,

I'm trying to submit a first version of the brinton package but the 
CRAN-pretest on Debian produces the following NOTE:

Check: for detritus in the temp directory, Result: NOTE
   Found the following files/directories:
     ?calibre_4.2.0_tmp_BPGKxL? ?calibre_4.2.0_tmp_D8BXMj?
     ?calibre_4.2.0_tmp_M8RU75? ?calibre_4.2.0_tmp_TipWj0?
     ?calibre_4.2.0_tmp_f0mVQS? ?calibre_4.2.0_tmp_fHEPce?
     ?runtime-hornik?

The 'brinton' package stores files in the temporary folder (which I 
think is ok) but I can not figure out
the relationship between the files that are stored with 'calibre_4.2.0'. 
Is this note a false positive or this
is something that I should fix prior to submit?

Thank you,
Pere Mill?n-Mart?nez

	[[alternative HTML version deleted]]


From d@n|e|d@@joberg @end|ng |rom gm@||@com  Sun Nov 10 21:39:25 2019
From: d@n|e|d@@joberg @end|ng |rom gm@||@com (Daniel Sjoberg)
Date: Sun, 10 Nov 2019 15:39:25 -0500
Subject: [R-pkg-devel] Install Package from GitHub in Vignette
Message-ID: <CAG5xu56Mm+2jKpiDjnrVKtnZJY5f3w1-q7xt3JF2aM50DkphaQ@mail.gmail.com>

There is a package only available on GitHub that prints beautiful tables.
I list this package in the `Enhances:` section of my package's DESCRIPTION
file.  I would like to show the use of this enhancement in a vignette.  I
use the code below in a vignette to install the package to a temporary
folder and add that folder to `.libPaths`.

I run checks locally, Travis CI, Appveyor, win-devel, RHub, and everything
looks fine.  The updated package was accepted earlier today, but a few hour
later I received the email below.  It appears on the Solaris build a
package dependency of the RStudio {gt} package is attempting to install
(the sass package), although the package is already available on the
machine.  I suspect it is related to installing the {gt} package to a
temporary folder?

Any tips how to install the package from GitHub without violating any CRAN
policies?

Thank you!

Email received from CRAN:
See https://cran.r-project.org/web/checks/check_results_gtsummary.html .

This attempts to install a package, and fails because it does not
respect that package's SystemRequirements.  Here:

if (curl::has_internet()) {
   # adding tmpdir to libPath
   temp_path <- file.path(tempdir(), "gt_folder")
   dir.create(temp_path)
   lib_path <-.libPaths()
   .libPaths(c(lib_path, temp_path))

   # installing gt
   remotes::install_github("rstudio/gt", lib = temp_path)
}

which apparently also attempts to install sass.

Why?  Packages should be making use of already installed packages (sass
is installed on that system, but may need to be declared).

Please correct ASAP and before Nov 17 to retain the package on CRAN.

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Nov 10 23:30:35 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 10 Nov 2019 23:30:35 +0100
Subject: [R-pkg-devel] checking for detritus finds unfamiliar files
In-Reply-To: <f3e8e7be-3a28-8538-ce0a-d4ef998d6d9e@sciencegraph.org>
References: <eee3cb67-4591-0202-ef21-2a1b1d4ca429@sciencegraph.org>
 <f3e8e7be-3a28-8538-ce0a-d4ef998d6d9e@sciencegraph.org>
Message-ID: <0b8b85af-92a9-cf87-1676-a7d74875091e@statistik.tu-dortmund.de>



On 10.11.2019 11:31, Pere Millan Martinez wrote:
> Hello,
> 
> I'm trying to submit a first version of the brinton package but the
> CRAN-pretest on Debian produces the following NOTE:
> 
> Check: for detritus in the temp directory, Result: NOTE
>     Found the following files/directories:
>       ?calibre_4.2.0_tmp_BPGKxL? ?calibre_4.2.0_tmp_D8BXMj?
>       ?calibre_4.2.0_tmp_M8RU75? ?calibre_4.2.0_tmp_TipWj0?
>       ?calibre_4.2.0_tmp_f0mVQS? ?calibre_4.2.0_tmp_fHEPce?
>       ?runtime-hornik?
> 
> The 'brinton' package stores files in the temporary folder (which I
> think is ok) but I can not figure out
> the relationship between the files that are stored with 'calibre_4.2.0'.
> Is this note a false positive or this
> is something that I should fix prior to submit?

It is from a package you depend on, so the fault of the other package 
and not yours.
You can reply-all and tell the CRAN mainatiners this is likely a false 
positive.

Best,
Uwe Ligges

> 
> Thank you,
> Pere Mill?n-Mart?nez
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From bbo|ker @end|ng |rom gm@||@com  Sun Nov 10 23:32:25 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 10 Nov 2019 17:32:25 -0500
Subject: [R-pkg-devel] Install Package from GitHub in Vignette
In-Reply-To: <CAG5xu56Mm+2jKpiDjnrVKtnZJY5f3w1-q7xt3JF2aM50DkphaQ@mail.gmail.com>
References: <CAG5xu56Mm+2jKpiDjnrVKtnZJY5f3w1-q7xt3JF2aM50DkphaQ@mail.gmail.com>
Message-ID: <112acdcd-9638-4261-006b-89b866975938@gmail.com>


 I don't know the particular answer to your question, but perhaps an
alternative way to go about this is to wrap the code in your vignette
that depends on this package in an if (requireNamespace("gt")) {} clause
(and perhaps supply pre-compiled versions of the vignette in the doc/
directory)? (And supply clear directions in the text of your vignette
for how users can install the package if they want it.)

  Ben Bolker

On 2019-11-10 3:39 p.m., Daniel Sjoberg wrote:
> There is a package only available on GitHub that prints beautiful tables.
> I list this package in the `Enhances:` section of my package's DESCRIPTION
> file.  I would like to show the use of this enhancement in a vignette.  I
> use the code below in a vignette to install the package to a temporary
> folder and add that folder to `.libPaths`.
> 
> I run checks locally, Travis CI, Appveyor, win-devel, RHub, and everything
> looks fine.  The updated package was accepted earlier today, but a few hour
> later I received the email below.  It appears on the Solaris build a
> package dependency of the RStudio {gt} package is attempting to install
> (the sass package), although the package is already available on the
> machine.  I suspect it is related to installing the {gt} package to a
> temporary folder?
> 
> Any tips how to install the package from GitHub without violating any CRAN
> policies?
> 
> Thank you!
> 
> Email received from CRAN:
> See https://cran.r-project.org/web/checks/check_results_gtsummary.html .
> 
> This attempts to install a package, and fails because it does not
> respect that package's SystemRequirements.  Here:
> 
> if (curl::has_internet()) {
>    # adding tmpdir to libPath
>    temp_path <- file.path(tempdir(), "gt_folder")
>    dir.create(temp_path)
>    lib_path <-.libPaths()
>    .libPaths(c(lib_path, temp_path))
> 
>    # installing gt
>    remotes::install_github("rstudio/gt", lib = temp_path)
> }
> 
> which apparently also attempts to install sass.
> 
> Why?  Packages should be making use of already installed packages (sass
> is installed on that system, but may need to be declared).
> 
> Please correct ASAP and before Nov 17 to retain the package on CRAN.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tom@@@k||egr @end|ng |rom v@e@cz  Mon Nov 11 11:09:07 2019
From: tom@@@k||egr @end|ng |rom v@e@cz (=?utf-8?B?VG9tw6HFoSBLbGllZ3I=?=)
Date: Mon, 11 Nov 2019 10:09:07 +0000
Subject: [R-pkg-devel] Updating package with a dependency (rJava) that
 doesn't build on all flavours
Message-ID: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>

Hi,

I maintain a package in CRAN, for which I am struggling to push the latest updates.

The problem is as follows:
My package passes tests without error or notice on all flavors but one, where the install fails due to an installation error of a dependency package (package rJava on r-devel-windows-ix86+x86_64). This installation error was already there in the past submissions of my package to CRAN, and was not previously considered as a blocker to the package (or its updates) being accepted (Current CRAN status: ERROR: 1, OK: 10)

Now, the package updates are automatically rejected:

xxxx

package qCBA_0.4.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Windows/00check.log>
Status: 1 ERROR
Debian: <https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Debian/00check.log>
Status: OK

xxxx

I cannot fix the problem with the dependency (rJava), and I also cannot remove rJava from my package.

More details:
Installation of  rJava package fails on 32-bit Windows, as can be seen here:
https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191106_094406/Windows/00install.out ("keine zul?ssige Win32-Anwendung" error)
This problem seems to apply generally to the rJava package, not just to its use in my package: https://cran.r-project.org/web/checks/check_results_rJava.html.

I've also described this in the "Optional comment" field.

Any help is appreciated,

Tomas



	[[alternative HTML version deleted]]


From r@mp@|et|enne @end|ng |rom gm@||@com  Mon Nov 11 17:40:28 2019
From: r@mp@|et|enne @end|ng |rom gm@||@com (Rampal S. Etienne)
Date: Mon, 11 Nov 2019 17:40:28 +0100
Subject: [R-pkg-devel] Using FORTRAN libraries and compiler options
Message-ID: <e8e035fa-1ae8-0227-627c-29b7ba8655ab@gmail.com>

Hello,

I am using FORTRAN code with the deSolve package. However, the code
still runs slowly. Googling tells me that there are two options to speed
up my code:

1. Compile with option -O3

2. Use the library dgemm.

I understand that this can be set in makevars. However, as I have
limited experience with FORTRAN (never loaded libraries or set compiling
options), I was wondering whether anyone can give me a hint on how to
set this. I have just a single FORTRAN file (with multiple subroutines).

Cheers, Rampal


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Mon Nov 11 17:44:53 2019
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Mon, 11 Nov 2019 08:44:53 -0800
Subject: [R-pkg-devel] Using FORTRAN libraries and compiler options
In-Reply-To: <e8e035fa-1ae8-0227-627c-29b7ba8655ab@gmail.com>
References: <e8e035fa-1ae8-0227-627c-29b7ba8655ab@gmail.com>
Message-ID: <CAL6gwnLxAQ51kSTzXNS38_1d0gcBZKMa0dm8gdDXhrqoUwUM1w@mail.gmail.com>

If I?m not mistaken, dgemm is a BLAS call. That should be accessible from
Fortran via an external call. I think the mvtnorm package calls BLAS/LAPACK
from Fortran if that helps.

Avi

On Mon, Nov 11, 2019 at 6:40 AM Rampal S. Etienne <rampaletienne at gmail.com>
wrote:

> Hello,
>
> I am using FORTRAN code with the deSolve package. However, the code
> still runs slowly. Googling tells me that there are two options to speed
> up my code:
>
> 1. Compile with option -O3
>
> 2. Use the library dgemm.
>
> I understand that this can be set in makevars. However, as I have
> limited experience with FORTRAN (never loaded libraries or set compiling
> options), I was wondering whether anyone can give me a hint on how to
> set this. I have just a single FORTRAN file (with multiple subroutines).
>
> Cheers, Rampal
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Mon Nov 11 17:49:44 2019
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Mon, 11 Nov 2019 09:49:44 -0700
Subject: [R-pkg-devel] Using FORTRAN libraries and compiler options
In-Reply-To: <e8e035fa-1ae8-0227-627c-29b7ba8655ab@gmail.com>
References: <e8e035fa-1ae8-0227-627c-29b7ba8655ab@gmail.com>
Message-ID: <CACxE24=ziDwH5MsyekfCeBZqed3Y_o646v9W46XxS+3PFqcCoQ@mail.gmail.com>

Hello!

Have you tried compiling with the -lblas -llapack options, please?  Then
you can use the appropriate subroutine.

Thanks,
Erin


On Mon, Nov 11, 2019 at 9:40 AM Rampal S. Etienne <rampaletienne at gmail.com>
wrote:

> Hello,
>
> I am using FORTRAN code with the deSolve package. However, the code
> still runs slowly. Googling tells me that there are two options to speed
> up my code:
>
> 1. Compile with option -O3
>
> 2. Use the library dgemm.
>
> I understand that this can be set in makevars. However, as I have
> limited experience with FORTRAN (never loaded libraries or set compiling
> options), I was wondering whether anyone can give me a hint on how to
> set this. I have just a single FORTRAN file (with multiple subroutines).
>
> Cheers, Rampal
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From d@n|e|d@@joberg @end|ng |rom gm@||@com  Mon Nov 11 18:44:19 2019
From: d@n|e|d@@joberg @end|ng |rom gm@||@com (Daniel Sjoberg)
Date: Mon, 11 Nov 2019 12:44:19 -0500
Subject: [R-pkg-devel] Install Package from GitHub in Vignette
In-Reply-To: <112acdcd-9638-4261-006b-89b866975938@gmail.com>
References: <CAG5xu56Mm+2jKpiDjnrVKtnZJY5f3w1-q7xt3JF2aM50DkphaQ@mail.gmail.com>
 <112acdcd-9638-4261-006b-89b866975938@gmail.com>
Message-ID: <CAG5xu548nQ2Wq8JRiR+-W_cP=V7HbCUbuS47=d_ubVjq7xR1Cw@mail.gmail.com>

Thank you Ben. That is a great suggestion.  While searching for
instructions on using pre-compiled vignettes, I came across a few posts
recommending the dependency package be stored in a drat repository on
GitHub and using the DESCRIPTION `Additional_repositories:` tag to point to
it.  This solution seems easier in my current workflow, so I am going to
give that a try first.  But if the same problems persist, I am absolutely
moving to pre-complied vignettes.

Thank you,
Daniel Sjoberg

On Sun, Nov 10, 2019 at 5:40 PM Ben Bolker <bbolker at gmail.com> wrote:

>
>  I don't know the particular answer to your question, but perhaps an
> alternative way to go about this is to wrap the code in your vignette
> that depends on this package in an if (requireNamespace("gt")) {} clause
> (and perhaps supply pre-compiled versions of the vignette in the doc/
> directory)? (And supply clear directions in the text of your vignette
> for how users can install the package if they want it.)
>
>   Ben Bolker
>
> On 2019-11-10 3:39 p.m., Daniel Sjoberg wrote:
> > There is a package only available on GitHub that prints beautiful tables.
> > I list this package in the `Enhances:` section of my package's
> DESCRIPTION
> > file.  I would like to show the use of this enhancement in a vignette.  I
> > use the code below in a vignette to install the package to a temporary
> > folder and add that folder to `.libPaths`.
> >
> > I run checks locally, Travis CI, Appveyor, win-devel, RHub, and
> everything
> > looks fine.  The updated package was accepted earlier today, but a few
> hour
> > later I received the email below.  It appears on the Solaris build a
> > package dependency of the RStudio {gt} package is attempting to install
> > (the sass package), although the package is already available on the
> > machine.  I suspect it is related to installing the {gt} package to a
> > temporary folder?
> >
> > Any tips how to install the package from GitHub without violating any
> CRAN
> > policies?
> >
> > Thank you!
> >
> > Email received from CRAN:
> > See https://cran.r-project.org/web/checks/check_results_gtsummary.html .
> >
> > This attempts to install a package, and fails because it does not
> > respect that package's SystemRequirements.  Here:
> >
> > if (curl::has_internet()) {
> >    # adding tmpdir to libPath
> >    temp_path <- file.path(tempdir(), "gt_folder")
> >    dir.create(temp_path)
> >    lib_path <-.libPaths()
> >    .libPaths(c(lib_path, temp_path))
> >
> >    # installing gt
> >    remotes::install_github("rstudio/gt", lib = temp_path)
> > }
> >
> > which apparently also attempts to install sass.
> >
> > Why?  Packages should be making use of already installed packages (sass
> > is installed on that system, but may need to be declared).
> >
> > Please correct ASAP and before Nov 17 to retain the package on CRAN.
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Nov 11 18:52:18 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Nov 2019 11:52:18 -0600
Subject: [R-pkg-devel] Install Package from GitHub in Vignette
In-Reply-To: <CAG5xu548nQ2Wq8JRiR+-W_cP=V7HbCUbuS47=d_ubVjq7xR1Cw@mail.gmail.com>
References: <CAG5xu56Mm+2jKpiDjnrVKtnZJY5f3w1-q7xt3JF2aM50DkphaQ@mail.gmail.com>
 <112acdcd-9638-4261-006b-89b866975938@gmail.com>
 <CAG5xu548nQ2Wq8JRiR+-W_cP=V7HbCUbuS47=d_ubVjq7xR1Cw@mail.gmail.com>
Message-ID: <24009.40914.181836.907645@rob.eddelbuettel.com>


On 11 November 2019 at 12:44, Daniel Sjoberg wrote:
| Thank you Ben. That is a great suggestion.  While searching for
| instructions on using pre-compiled vignettes, I came across a few posts
| recommending the dependency package be stored in a drat repository on
| GitHub and using the DESCRIPTION `Additional_repositories:` tag to point to
| it.  This solution seems easier in my current workflow, so I am going to
| give that a try first.  But if the same problems persist, I am absolutely
| moving to pre-complied vignettes.

It depends on _how_ you compute your vignette but for pdf vignettes a very
simple solution is offered by Mark here:

   https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/

I have switched a few packages of mine to this scheme.

Of course, if you are after html vignettes then this does apply directly, but
maybe you could still precompute a fancy gt table, take a screenshot and just
include it as an image...

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From d@n|e|d@@joberg @end|ng |rom gm@||@com  Mon Nov 11 22:17:27 2019
From: d@n|e|d@@joberg @end|ng |rom gm@||@com (Daniel Sjoberg)
Date: Mon, 11 Nov 2019 16:17:27 -0500
Subject: [R-pkg-devel] Install Package from GitHub in Vignette
In-Reply-To: <24009.40914.181836.907645@rob.eddelbuettel.com>
References: <CAG5xu56Mm+2jKpiDjnrVKtnZJY5f3w1-q7xt3JF2aM50DkphaQ@mail.gmail.com>
 <112acdcd-9638-4261-006b-89b866975938@gmail.com>
 <CAG5xu548nQ2Wq8JRiR+-W_cP=V7HbCUbuS47=d_ubVjq7xR1Cw@mail.gmail.com>
 <24009.40914.181836.907645@rob.eddelbuettel.com>
Message-ID: <CAG5xu55r4LJqMZQqQGvAAJQaJWOXHFNmaAdgwrRYB_3wSd9MQw@mail.gmail.com>

Awesome, I'll check it out.  I do like the HTML vignettes, so I am hoping I
can get it working in that format!

On Mon, Nov 11, 2019 at 1:23 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 11 November 2019 at 12:44, Daniel Sjoberg wrote:
> | Thank you Ben. That is a great suggestion.  While searching for
> | instructions on using pre-compiled vignettes, I came across a few posts
> | recommending the dependency package be stored in a drat repository on
> | GitHub and using the DESCRIPTION `Additional_repositories:` tag to point
> to
> | it.  This solution seems easier in my current workflow, so I am going to
> | give that a try first.  But if the same problems persist, I am absolutely
> | moving to pre-complied vignettes.
>
> It depends on _how_ you compute your vignette but for pdf vignettes a very
> simple solution is offered by Mark here:
>
>
> https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/
>
> I have switched a few packages of mine to this scheme.
>
> Of course, if you are after html vignettes then this does apply directly,
> but
> maybe you could still precompute a fancy gt table, take a screenshot and
> just
> include it as an image...
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Nov 11 22:35:54 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Nov 2019 15:35:54 -0600
Subject: [R-pkg-devel] Install Package from GitHub in Vignette
In-Reply-To: <CAG5xu55r4LJqMZQqQGvAAJQaJWOXHFNmaAdgwrRYB_3wSd9MQw@mail.gmail.com>
References: <CAG5xu56Mm+2jKpiDjnrVKtnZJY5f3w1-q7xt3JF2aM50DkphaQ@mail.gmail.com>
 <112acdcd-9638-4261-006b-89b866975938@gmail.com>
 <CAG5xu548nQ2Wq8JRiR+-W_cP=V7HbCUbuS47=d_ubVjq7xR1Cw@mail.gmail.com>
 <24009.40914.181836.907645@rob.eddelbuettel.com>
 <CAG5xu55r4LJqMZQqQGvAAJQaJWOXHFNmaAdgwrRYB_3wSd9MQw@mail.gmail.com>
Message-ID: <24009.54330.539944.147212@rob.eddelbuettel.com>


On 11 November 2019 at 16:17, Daniel Sjoberg wrote:
| Awesome, I'll check it out.  I do like the HTML vignettes, so I am hoping I
| can get it working in that format!

Well, as I said (but wrote poorly, dropping a "non"): Mark's approach is for
pdf. I like as you then get by with Sweave only, hence not depending on
anything that could change or break.

For html, there is also a solution by Henrik involving his R.rsp package. See
eg https://stackoverflow.com/a/24111191/143305

Dirk
 
| On Mon, Nov 11, 2019 at 1:23 PM Dirk Eddelbuettel <edd at debian.org> wrote:
| 
| >
| > On 11 November 2019 at 12:44, Daniel Sjoberg wrote:
| > | Thank you Ben. That is a great suggestion.  While searching for
| > | instructions on using pre-compiled vignettes, I came across a few posts
| > | recommending the dependency package be stored in a drat repository on
| > | GitHub and using the DESCRIPTION `Additional_repositories:` tag to point
| > to
| > | it.  This solution seems easier in my current workflow, so I am going to
| > | give that a try first.  But if the same problems persist, I am absolutely
| > | moving to pre-complied vignettes.
| >
| > It depends on _how_ you compute your vignette but for pdf vignettes a very
| > simple solution is offered by Mark here:
| >
| >
| > https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/
| >
| > I have switched a few packages of mine to this scheme.
| >
| > Of course, if you are after html vignettes then this does apply directly,
| > but
| > maybe you could still precompute a fancy gt table, take a screenshot and
| > just
| > include it as an image...
| >
| > Dirk
| >
| > --
| > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| >

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tom@@@k||egr @end|ng |rom v@e@cz  Wed Nov 13 10:19:53 2019
From: tom@@@k||egr @end|ng |rom v@e@cz (=?utf-8?B?VG9tw6HFoSBLbGllZ3I=?=)
Date: Wed, 13 Nov 2019 09:19:53 +0000
Subject: [R-pkg-devel] Updating package with a dependency (rJava) that
 doesn't build on all flavours
In-Reply-To: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>
References: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>
Message-ID: <HE1PR0602MB36272F96177E059BD295AEC7F9760@HE1PR0602MB3627.eurprd06.prod.outlook.com>

Hello,

This question has not stirred much discussion ... If this is the wrong place to ask,  I was wondering if some one point me to where I should ask, or who to approach?  If I understand this issue correctly, it does not affect only my package, but also the maintainers of 50+ other packages that depend on rJava when they will try to update the package.

So far I tried putting the explanation to the comment field when submitting the update, and I also tried emailing CRAN-submissions at r-project.org, but that was also without response so far.

Thanks for any pointers,

Tomas
________________________________
Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
Odesl?no: pond?l? 11. listopadu 2019 11:09
Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
P?edm?t: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours

Hi,

I maintain a package in CRAN, for which I am struggling to push the latest updates.

The problem is as follows:
My package passes tests without error or notice on all flavors but one, where the install fails due to an installation error of a dependency package (package rJava on r-devel-windows-ix86+x86_64). This installation error was already there in the past submissions of my package to CRAN, and was not previously considered as a blocker to the package (or its updates) being accepted (Current CRAN status: ERROR: 1, OK: 10)

Now, the package updates are automatically rejected:

xxxx

package qCBA_0.4.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Windows/00check.log>
Status: 1 ERROR
Debian: <https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Debian/00check.log>
Status: OK

xxxx

I cannot fix the problem with the dependency (rJava), and I also cannot remove rJava from my package.

More details:
Installation of  rJava package fails on 32-bit Windows, as can be seen here:
https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191106_094406/Windows/00install.out ("keine zul?ssige Win32-Anwendung" error)
This problem seems to apply generally to the rJava package, not just to its use in my package: https://cran.r-project.org/web/checks/check_results_rJava.html.

I've also described this in the "Optional comment" field.

Any help is appreciated,

Tomas



        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Wed Nov 13 11:03:56 2019
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Wed, 13 Nov 2019 11:03:56 +0100
Subject: [R-pkg-devel] Updating package with a dependency (rJava) that
 doesn't build on all flavours
In-Reply-To: <HE1PR0602MB36272F96177E059BD295AEC7F9760@HE1PR0602MB3627.eurprd06.prod.outlook.com>
References: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <HE1PR0602MB36272F96177E059BD295AEC7F9760@HE1PR0602MB3627.eurprd06.prod.outlook.com>
Message-ID: <265e9e7d-a720-41ce-915d-3232533ac592@gmail.com>

On 11/13/19 10:19 AM, Tom?? Kliegr wrote:
> Hello,
>
> This question has not stirred much discussion ... If this is the wrong place to ask,  I was wondering if some one point me to where I should ask, or who to approach?  If I understand this issue correctly, it does not affect only my package, but also the maintainers of 50+ other packages that depend on rJava when they will try to update the package.
>
> So far I tried putting the explanation to the comment field when submitting the update, and I also tried emailing CRAN-submissions at r-project.org, but that was also without response so far.

This is probably a temporary Java installation problem on a CRAN Windows 
machine, CRAN-submissions at r-project.org is the right place to report 
this, please be patient.

Thanks
Tomas

>
> Thanks for any pointers,
>
> Tomas
> ________________________________
> Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
> Odesl?no: pond?l? 11. listopadu 2019 11:09
> Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
> P?edm?t: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours
>
> Hi,
>
> I maintain a package in CRAN, for which I am struggling to push the latest updates.
>
> The problem is as follows:
> My package passes tests without error or notice on all flavors but one, where the install fails due to an installation error of a dependency package (package rJava on r-devel-windows-ix86+x86_64). This installation error was already there in the past submissions of my package to CRAN, and was not previously considered as a blocker to the package (or its updates) being accepted (Current CRAN status: ERROR: 1, OK: 10)
>
> Now, the package updates are automatically rejected:
>
> xxxx
>
> package qCBA_0.4.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Windows/00check.log>
> Status: 1 ERROR
> Debian: <https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Debian/00check.log>
> Status: OK
>
> xxxx
>
> I cannot fix the problem with the dependency (rJava), and I also cannot remove rJava from my package.
>
> More details:
> Installation of  rJava package fails on 32-bit Windows, as can be seen here:
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191106_094406/Windows/00install.out ("keine zul?ssige Win32-Anwendung" error)
> This problem seems to apply generally to the rJava package, not just to its use in my package: https://cran.r-project.org/web/checks/check_results_rJava.html.
>
> I've also described this in the "Optional comment" field.
>
> Any help is appreciated,
>
> Tomas
>
>
>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tom@@@k||egr @end|ng |rom v@e@cz  Wed Nov 13 19:52:24 2019
From: tom@@@k||egr @end|ng |rom v@e@cz (=?utf-8?B?VG9tw6HFoSBLbGllZ3I=?=)
Date: Wed, 13 Nov 2019 18:52:24 +0000
Subject: [R-pkg-devel] Updating package with a dependency (rJava) that
 doesn't build on all flavours
In-Reply-To: <265e9e7d-a720-41ce-915d-3232533ac592@gmail.com>
References: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <HE1PR0602MB36272F96177E059BD295AEC7F9760@HE1PR0602MB3627.eurprd06.prod.outlook.com>,
 <265e9e7d-a720-41ce-915d-3232533ac592@gmail.com>
Message-ID: <AM6PR0602MB36214637ED42613B53FB21E8F9760@AM6PR0602MB3621.eurprd06.prod.outlook.com>

Hi,

>This is probably a temporary Java installation problem on a CRAN Windows
machine, CRAN-submissions at r-project.org is the right place to report
this, please be patient.

I am  not sure this is the case, to me it looks like a recent policy change. The rJava builds were not going through on this particular machine for quite some time, and this had no effect on the updates of packages depending on rJava being accepted. Now, they seem to get automatically rejected. Regarding the email to CRAN-submissions at r-project.org, I sent it a week ago, but maybe this just takes longer than I though.. will wait,

It is also possible that I am overlooking something important...

Best,

Tomas

________________________________
Od: Tomas Kalibera <tomas.kalibera at gmail.com>
Odesl?no: st?eda 13. listopadu 2019 11:03
Komu: Tom?? Kliegr <tomas.kliegr at vse.cz>; r-package-devel at r-project.org <r-package-devel at r-project.org>
P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours

On 11/13/19 10:19 AM, Tom?? Kliegr wrote:
> Hello,
>
> This question has not stirred much discussion ... If this is the wrong place to ask,  I was wondering if some one point me to where I should ask, or who to approach?  If I understand this issue correctly, it does not affect only my package, but also the maintainers of 50+ other packages that depend on rJava when they will try to update the package.
>
> So far I tried putting the explanation to the comment field when submitting the update, and I also tried emailing CRAN-submissions at r-project.org, but that was also without response so far.

This is probably a temporary Java installation problem on a CRAN Windows
machine, CRAN-submissions at r-project.org is the right place to report
this, please be patient.

Thanks
Tomas

>
> Thanks for any pointers,
>
> Tomas
> ________________________________
> Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
> Odesl?no: pond?l? 11. listopadu 2019 11:09
> Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
> P?edm?t: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours
>
> Hi,
>
> I maintain a package in CRAN, for which I am struggling to push the latest updates.
>
> The problem is as follows:
> My package passes tests without error or notice on all flavors but one, where the install fails due to an installation error of a dependency package (package rJava on r-devel-windows-ix86+x86_64). This installation error was already there in the past submissions of my package to CRAN, and was not previously considered as a blocker to the package (or its updates) being accepted (Current CRAN status: ERROR: 1, OK: 10)
>
> Now, the package updates are automatically rejected:
>
> xxxx
>
> package qCBA_0.4.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Windows/00check.log>
> Status: 1 ERROR
> Debian: <https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Debian/00check.log>
> Status: OK
>
> xxxx
>
> I cannot fix the problem with the dependency (rJava), and I also cannot remove rJava from my package.
>
> More details:
> Installation of  rJava package fails on 32-bit Windows, as can be seen here:
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191106_094406/Windows/00install.out ("keine zul?ssige Win32-Anwendung" error)
> This problem seems to apply generally to the rJava package, not just to its use in my package: https://cran.r-project.org/web/checks/check_results_rJava.html.
>
> I've also described this in the "Optional comment" field.
>
> Any help is appreciated,
>
> Tomas
>
>
>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



	[[alternative HTML version deleted]]


From kev|nykuo @end|ng |rom gm@||@com  Wed Nov 13 19:54:43 2019
From: kev|nykuo @end|ng |rom gm@||@com (Kevin Kuo)
Date: Wed, 13 Nov 2019 10:54:43 -0800
Subject: [R-pkg-devel] Updating package with a dependency (rJava) that
 doesn't build on all flavours
In-Reply-To: <AM6PR0602MB36214637ED42613B53FB21E8F9760@AM6PR0602MB3621.eurprd06.prod.outlook.com>
References: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <HE1PR0602MB36272F96177E059BD295AEC7F9760@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <265e9e7d-a720-41ce-915d-3232533ac592@gmail.com>
 <AM6PR0602MB36214637ED42613B53FB21E8F9760@AM6PR0602MB3621.eurprd06.prod.outlook.com>
Message-ID: <CAA1+RSFga=CrnAU64kr9n01LofxSfF7xZUruL3ir+yr4aSecWQ@mail.gmail.com>

FYI see also
https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html

On Wed, Nov 13, 2019 at 10:52 AM Tom?? Kliegr <tomas.kliegr at vse.cz> wrote:

> Hi,
>
> >This is probably a temporary Java installation problem on a CRAN Windows
> machine, CRAN-submissions at r-project.org is the right place to report
> this, please be patient.
>
> I am  not sure this is the case, to me it looks like a recent policy
> change. The rJava builds were not going through on this particular machine
> for quite some time, and this had no effect on the updates of packages
> depending on rJava being accepted. Now, they seem to get automatically
> rejected. Regarding the email to CRAN-submissions at r-project.org, I sent
> it a week ago, but maybe this just takes longer than I though.. will wait,
>
> It is also possible that I am overlooking something important...
>
> Best,
>
> Tomas
>
> ________________________________
> Od: Tomas Kalibera <tomas.kalibera at gmail.com>
> Odesl?no: st?eda 13. listopadu 2019 11:03
> Komu: Tom?? Kliegr <tomas.kliegr at vse.cz>; r-package-devel at r-project.org <
> r-package-devel at r-project.org>
> P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that
> doesn't build on all flavours
>
> On 11/13/19 10:19 AM, Tom?? Kliegr wrote:
> > Hello,
> >
> > This question has not stirred much discussion ... If this is the wrong
> place to ask,  I was wondering if some one point me to where I should ask,
> or who to approach?  If I understand this issue correctly, it does not
> affect only my package, but also the maintainers of 50+ other packages that
> depend on rJava when they will try to update the package.
> >
> > So far I tried putting the explanation to the comment field when
> submitting the update, and I also tried emailing
> CRAN-submissions at r-project.org, but that was also without response so far.
>
> This is probably a temporary Java installation problem on a CRAN Windows
> machine, CRAN-submissions at r-project.org is the right place to report
> this, please be patient.
>
> Thanks
> Tomas
>
> >
> > Thanks for any pointers,
> >
> > Tomas
> > ________________________________
> > Od: R-package-devel <r-package-devel-bounces at r-project.org> za
> u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
> > Odesl?no: pond?l? 11. listopadu 2019 11:09
> > Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
> > P?edm?t: [R-pkg-devel] Updating package with a dependency (rJava) that
> doesn't build on all flavours
> >
> > Hi,
> >
> > I maintain a package in CRAN, for which I am struggling to push the
> latest updates.
> >
> > The problem is as follows:
> > My package passes tests without error or notice on all flavors but one,
> where the install fails due to an installation error of a dependency
> package (package rJava on r-devel-windows-ix86+x86_64). This installation
> error was already there in the past submissions of my package to CRAN, and
> was not previously considered as a blocker to the package (or its updates)
> being accepted (Current CRAN status: ERROR: 1, OK: 10)
> >
> > Now, the package updates are automatically rejected:
> >
> > xxxx
> >
> > package qCBA_0.4.tar.gz does not pass the incoming checks automatically,
> please see the following pre-tests:
> > Windows: <
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Windows/00check.log
> >
> > Status: 1 ERROR
> > Debian: <
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Debian/00check.log
> >
> > Status: OK
> >
> > xxxx
> >
> > I cannot fix the problem with the dependency (rJava), and I also cannot
> remove rJava from my package.
> >
> > More details:
> > Installation of  rJava package fails on 32-bit Windows, as can be seen
> here:
> >
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191106_094406/Windows/00install.out
> ("keine zul?ssige Win32-Anwendung" error)
> > This problem seems to apply generally to the rJava package, not just to
> its use in my package:
> https://cran.r-project.org/web/checks/check_results_rJava.html.
> >
> > I've also described this in the "Optional comment" field.
> >
> > Any help is appreciated,
> >
> > Tomas
> >
> >
> >
> >          [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@mp@|et|enne @end|ng |rom gm@||@com  Thu Nov 14 16:42:56 2019
From: r@mp@|et|enne @end|ng |rom gm@||@com (Rampal S. Etienne)
Date: Thu, 14 Nov 2019 16:42:56 +0100
Subject: [R-pkg-devel] Using FORTRAN libraries and compiler options
In-Reply-To: <CAL6gwnLxAQ51kSTzXNS38_1d0gcBZKMa0dm8gdDXhrqoUwUM1w@mail.gmail.com>
References: <e8e035fa-1ae8-0227-627c-29b7ba8655ab@gmail.com>
 <CAL6gwnLxAQ51kSTzXNS38_1d0gcBZKMa0dm8gdDXhrqoUwUM1w@mail.gmail.com>
Message-ID: <c7a49950-82c9-67cf-4693-1b202dbe416f@gmail.com>

I couldn't find a call to dgemm in the mvtnorm package. Do you have
other suggestions for packages that may be calling this?

Rampal


On 11-11-2019 17:44, Avraham Adler wrote:
> If I?m not mistaken, dgemm is a BLAS call. That should be accessible
> from Fortran via an external call. I think the mvtnorm package calls
> BLAS/LAPACK from Fortran if that helps. 
>
> Avi
>
> On Mon, Nov 11, 2019 at 6:40 AM Rampal S. Etienne
> <rampaletienne at gmail.com <mailto:rampaletienne at gmail.com>> wrote:
>
>     Hello,
>
>     I am using FORTRAN code with the deSolve package. However, the code
>     still runs slowly. Googling tells me that there are two options to
>     speed
>     up my code:
>
>     1. Compile with option -O3
>
>     2. Use the library dgemm.
>
>     I understand that this can be set in makevars. However, as I have
>     limited experience with FORTRAN (never loaded libraries or set
>     compiling
>     options), I was wondering whether anyone can give me a hint on how to
>     set this. I have just a single FORTRAN file (with multiple
>     subroutines).
>
>     Cheers, Rampal
>
>     ______________________________________________
>     R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> -- 
> Sent from Gmail Mobile


	[[alternative HTML version deleted]]


From tom@@@k||egr @end|ng |rom v@e@cz  Thu Nov 14 16:52:21 2019
From: tom@@@k||egr @end|ng |rom v@e@cz (=?utf-8?B?VG9tw6HFoSBLbGllZ3I=?=)
Date: Thu, 14 Nov 2019 15:52:21 +0000
Subject: [R-pkg-devel] Updating package with a dependency (rJava) that
 doesn't build on all flavours
In-Reply-To: <CAA1+RSFga=CrnAU64kr9n01LofxSfF7xZUruL3ir+yr4aSecWQ@mail.gmail.com>
References: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <HE1PR0602MB36272F96177E059BD295AEC7F9760@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <265e9e7d-a720-41ce-915d-3232533ac592@gmail.com>
 <AM6PR0602MB36214637ED42613B53FB21E8F9760@AM6PR0602MB3621.eurprd06.prod.outlook.com>,
 <CAA1+RSFga=CrnAU64kr9n01LofxSfF7xZUruL3ir+yr4aSecWQ@mail.gmail.com>
Message-ID: <HE1PR0602MB36274F8E7092E89E4109A93FF9710@HE1PR0602MB3627.eurprd06.prod.outlook.com>

Hi,

>https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html

Yes, it is almost certainly the same issue as this one reported in October 2019. It seems that the policy must have changed sometime around September. As follows from "Reverse depends" of rJava, packages depending on rJava were successfully updated in mid-2019. The most recently updated package was apparently Crossover in May 2019.

Tomas
________________________________
Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Kevin Kuo <kevinykuo at gmail.com>
Odesl?no: st?eda 13. listopadu 2019 19:54
Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours

FYI see also
https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html

On Wed, Nov 13, 2019 at 10:52 AM Tom?? Kliegr <tomas.kliegr at vse.cz> wrote:

> Hi,
>
> >This is probably a temporary Java installation problem on a CRAN Windows
> machine, CRAN-submissions at r-project.org is the right place to report
> this, please be patient.
>
> I am  not sure this is the case, to me it looks like a recent policy
> change. The rJava builds were not going through on this particular machine
> for quite some time, and this had no effect on the updates of packages
> depending on rJava being accepted. Now, they seem to get automatically
> rejected. Regarding the email to CRAN-submissions at r-project.org, I sent
> it a week ago, but maybe this just takes longer than I though.. will wait,
>
> It is also possible that I am overlooking something important...
>
> Best,
>
> Tomas
>
> ________________________________
> Od: Tomas Kalibera <tomas.kalibera at gmail.com>
> Odesl?no: st?eda 13. listopadu 2019 11:03
> Komu: Tom?? Kliegr <tomas.kliegr at vse.cz>; r-package-devel at r-project.org <
> r-package-devel at r-project.org>
> P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that
> doesn't build on all flavours
>
> On 11/13/19 10:19 AM, Tom?? Kliegr wrote:
> > Hello,
> >
> > This question has not stirred much discussion ... If this is the wrong
> place to ask,  I was wondering if some one point me to where I should ask,
> or who to approach?  If I understand this issue correctly, it does not
> affect only my package, but also the maintainers of 50+ other packages that
> depend on rJava when they will try to update the package.
> >
> > So far I tried putting the explanation to the comment field when
> submitting the update, and I also tried emailing
> CRAN-submissions at r-project.org, but that was also without response so far.
>
> This is probably a temporary Java installation problem on a CRAN Windows
> machine, CRAN-submissions at r-project.org is the right place to report
> this, please be patient.
>
> Thanks
> Tomas
>
> >
> > Thanks for any pointers,
> >
> > Tomas
> > ________________________________
> > Od: R-package-devel <r-package-devel-bounces at r-project.org> za
> u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
> > Odesl?no: pond?l? 11. listopadu 2019 11:09
> > Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
> > P?edm?t: [R-pkg-devel] Updating package with a dependency (rJava) that
> doesn't build on all flavours
> >
> > Hi,
> >
> > I maintain a package in CRAN, for which I am struggling to push the
> latest updates.
> >
> > The problem is as follows:
> > My package passes tests without error or notice on all flavors but one,
> where the install fails due to an installation error of a dependency
> package (package rJava on r-devel-windows-ix86+x86_64). This installation
> error was already there in the past submissions of my package to CRAN, and
> was not previously considered as a blocker to the package (or its updates)
> being accepted (Current CRAN status: ERROR: 1, OK: 10)
> >
> > Now, the package updates are automatically rejected:
> >
> > xxxx
> >
> > package qCBA_0.4.tar.gz does not pass the incoming checks automatically,
> please see the following pre-tests:
> > Windows: <
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Windows/00check.log
> >
> > Status: 1 ERROR
> > Debian: <
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Debian/00check.log
> >
> > Status: OK
> >
> > xxxx
> >
> > I cannot fix the problem with the dependency (rJava), and I also cannot
> remove rJava from my package.
> >
> > More details:
> > Installation of  rJava package fails on 32-bit Windows, as can be seen
> here:
> >
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191106_094406/Windows/00install.out
> ("keine zul?ssige Win32-Anwendung" error)
> > This problem seems to apply generally to the rJava package, not just to
> its use in my package:
> https://cran.r-project.org/web/checks/check_results_rJava.html.
> >
> > I've also described this in the "Optional comment" field.
> >
> > Any help is appreciated,
> >
> > Tomas
> >
> >
> >
> >          [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Nov 14 16:53:14 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 14 Nov 2019 09:53:14 -0600
Subject: [R-pkg-devel] Using FORTRAN libraries and compiler options
In-Reply-To: <c7a49950-82c9-67cf-4693-1b202dbe416f@gmail.com>
References: <e8e035fa-1ae8-0227-627c-29b7ba8655ab@gmail.com>
 <CAL6gwnLxAQ51kSTzXNS38_1d0gcBZKMa0dm8gdDXhrqoUwUM1w@mail.gmail.com>
 <c7a49950-82c9-67cf-4693-1b202dbe416f@gmail.com>
Message-ID: <24013.30826.46831.621311@rob.eddelbuettel.com>


On 14 November 2019 at 16:42, Rampal S. Etienne wrote:
| I couldn't find a call to dgemm in the mvtnorm package. Do you have
| other suggestions for packages that may be calling this?

The mirror of CRAN at GitHub allows convenient search. Looking for 'user:cran
dgemm' give 620+ code hits; the page allows you to click on Fortran to
further strict leading to this URL for i) user:cran ii) dgemm iii) type=code
and iv) l=Fortran:

https://github.com/search?l=Fortran&q=user%3Acran+dgemm&type=Code

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m@rc|njurek1988 @end|ng |rom gm@||@com  Fri Nov 15 17:49:25 2019
From: m@rc|njurek1988 @end|ng |rom gm@||@com (Marcin Jurek)
Date: Fri, 15 Nov 2019 10:49:25 -0600
Subject: [R-pkg-devel] potential memory leak using openMP
Message-ID: <CAKpFkB3gokUabpUfrYEn1aEtRGrR1mm6ho5BLzA13Qzth-XJdQ@mail.gmail.com>

Hello everyone, so my package was rejected from CRAN because of the
following error:

==29416== 640 bytes in 2 blocks are possibly lost in loss record 162 of
2,089
==29416==    at 0x4837B65: calloc
(coregrind/m_replacemalloc/vg_replace_malloc.c:762)
==29416==    by 0x40118B1: allocate_dtv
(/build/glibc-suXNNi/glibc-2.29/elf/../elf/dl-tls.c:286)
==29416==    by 0x40121FD: _dl_allocate_tls
(/build/glibc-suXNNi/glibc-2.29/elf/../elf/dl-tls.c:532)
==29416==    by 0x5684BDD: allocate_stack
(/build/glibc-suXNNi/glibc-2.29/nptl/allocatestack.c:621)
==29416==    by 0x5684BDD: pthread_create@@GLIBC_2.2.5
(/build/glibc-suXNNi/glibc-2.29/nptl/pthread_create.c:669)
==29416==    by 0x565DF65: ??? (in
/usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==29416==    by 0x5654A3C: GOMP_parallel (in
/usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
==29416==    by 0x1DBACEBA: U_NZentries(int, int, arma::Mat<double> const&,
arma::Mat<unsigned int> const&, arma::Mat<double> const&, arma::Col<double>
const&, arma::Col<double> const&, std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,  arma::Col<double>)
(/home/Hornik/tmp/CRAN/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/U_NZentries.cpp:225)
==29416==    by 0x1DBA3B90: _GPvecchia_U_NZentries
(/home/Hornik/tmp/CRAN/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/RcppExports.cpp:78)

First, I don't know how to reproduce it because running
R CMD check <package_name> --use-valgrind
does not produce any errors on my machine.

Second, see below the relevant part of the U_NZentries function (with the
offending line marked with (***).

*** #pragma omp parallel for
shared(locs,revNNarray,revCondOnLatent,nuggets, nnp,m,Lentries,COV)
private(k,dist,onevec,covmat,nug,n0,inds,revCon_row,inds00)
 schedule(static)

  for (k = 0; k < nnp; k++) {
    inds=revNNarray.row(k).t();
    revCon_row=revCondOnLatent.row(k).t();
    n0 = get_nonzero_count_general(inds); // for general case
    inds00 = get_idx_vals_general(n0, inds);
    nug=nuggets.elem(inds00) % (ones(n0)-revCon_row(span(m+1-n0,m))); //
vec is vec, cannot convert to mat
    dist = calcPWD(locs.rows(inds00));
    #pragma omp critical
    {
      if( COV=="matern"){
        covmat= MaternFun(dist,covparms) + diagmat(nug) ; // summation from
arma
      } else if(COV=="esqe") {
        covmat= EsqeFun(dist,covparms) + diagmat(nug) ; // summation from
arma
      }
    }
    onevec.resize(n0);
    onevec = zeros(n0);
    onevec[n0-1] = 1;
    arma::vec M=solve(chol(covmat,"upper"),onevec);
    // save the entries to matrix
    Lentries(k,span(0,n0-1)) = M.t();
  }

I have googled around and some people are saying that what valgrind reports
is an unavoidable consequence of using openMP (for example here:
https://gcc.gnu.org/bugzilla/show_bug.cgi?id=36298 and here:
https://stackoverflow.com/questions/6973489/valgrind-and-openmp-still-reachable-and-possibly-lost-is-that-bad
).

Three questions: 1) what should I do to reproduce the error? 2) is it worth
trying to do so? 3) why does it come up?

Thanks a lot everyone!

Marcin

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Nov 15 19:01:47 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 15 Nov 2019 21:01:47 +0300
Subject: [R-pkg-devel] potential memory leak using openMP
In-Reply-To: <CAKpFkB3gokUabpUfrYEn1aEtRGrR1mm6ho5BLzA13Qzth-XJdQ@mail.gmail.com>
References: <CAKpFkB3gokUabpUfrYEn1aEtRGrR1mm6ho5BLzA13Qzth-XJdQ@mail.gmail.com>
Message-ID: <20191115210147.65298643@trisector>

On Fri, 15 Nov 2019 10:49:25 -0600
Marcin Jurek <marcinjurek1988 at gmail.com> wrote:

> 1) what should I do to reproduce the error?

The following is a quick, unchecked suggestion, but:

`R CMD check <package_name> --use-valgrind` just adds `-d valgrind` to
the command line, while the report you are seeing can only be obtained
with `--leak-check=full --show-reachable=yes` added to valgrind options.

What happens if you run `VALGRIND_OPTS='--leak-check=full
--show-reachable=yes' R CMD check <package_name> --use-valgrind` ?

-- 
Best regards,
Ivan


From m@rc|njurek1988 @end|ng |rom gm@||@com  Fri Nov 15 19:33:04 2019
From: m@rc|njurek1988 @end|ng |rom gm@||@com (Marcin Jurek)
Date: Fri, 15 Nov 2019 12:33:04 -0600
Subject: [R-pkg-devel] potential memory leak using openMP
In-Reply-To: <20191115210147.65298643@trisector>
References: <CAKpFkB3gokUabpUfrYEn1aEtRGrR1mm6ho5BLzA13Qzth-XJdQ@mail.gmail.com>
 <20191115210147.65298643@trisector>
Message-ID: <CAKpFkB0-heMtrmHOH-nbTJ6fVei0s9hto=ajGggcdsv6O-d6EQ@mail.gmail.com>

Thanks for the suggestion! I tried but to the same effect: no errors.

On Fri, Nov 15, 2019 at 12:01 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Fri, 15 Nov 2019 10:49:25 -0600
> Marcin Jurek <marcinjurek1988 at gmail.com> wrote:
>
> > 1) what should I do to reproduce the error?
>
> The following is a quick, unchecked suggestion, but:
>
> `R CMD check <package_name> --use-valgrind` just adds `-d valgrind` to
> the command line, while the report you are seeing can only be obtained
> with `--leak-check=full --show-reachable=yes` added to valgrind options.
>
> What happens if you run `VALGRIND_OPTS='--leak-check=full
> --show-reachable=yes' R CMD check <package_name> --use-valgrind` ?
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From zk@mv@r @end|ng |rom gm@||@com  Fri Nov 15 18:08:51 2019
From: zk@mv@r @end|ng |rom gm@||@com (Zhian Kamvar)
Date: Fri, 15 Nov 2019 17:08:51 +0000
Subject: [R-pkg-devel] potential memory leak using openMP
In-Reply-To: <CAKpFkB3gokUabpUfrYEn1aEtRGrR1mm6ho5BLzA13Qzth-XJdQ@mail.gmail.com>
References: <CAKpFkB3gokUabpUfrYEn1aEtRGrR1mm6ho5BLzA13Qzth-XJdQ@mail.gmail.com>
Message-ID: <CAPsXks+agPYaBm+ecXLrhnXEgnV7-_C3aUPat1pVTLXun2Pp+Q-6895@mail.gmail.com>

I've had a problem like this before and I also thought that it was due to
some weird magic in OpenMP, but it turned out to be a fence-post error on
my part [1]. Unfortunately, the valgrind output is not as helpful as
something like ASAN. My suggestion would be to go through that section of
the code with a debugger and manually check for any weird behaviors (full
disclosure: I haven't done this with parallel code). My blog [1] has a
short version of Kevin Ushey's post on debugging with lldb [2], so those
might be good starting points.

[1]: https://zkamvar.netlify.com/post/2018-01-14-i-c-bugs/i-c-bugs/
[2]: http://kevinushey.github.io/blog/2015/04/13/debugging-with-lldb/

Hope that helps.

Best,
Zhian

On Fri, Nov 15, 2019 at 4:50 PM Marcin Jurek <marcinjurek1988 at gmail.com>
wrote:

> Hello everyone, so my package was rejected from CRAN because of the
> following error:
>
> ==29416== 640 bytes in 2 blocks are possibly lost in loss record 162 of
> 2,089
> ==29416==    at 0x4837B65: calloc
> (coregrind/m_replacemalloc/vg_replace_malloc.c:762)
> ==29416==    by 0x40118B1: allocate_dtv
> (/build/glibc-suXNNi/glibc-2.29/elf/../elf/dl-tls.c:286)
> ==29416==    by 0x40121FD: _dl_allocate_tls
> (/build/glibc-suXNNi/glibc-2.29/elf/../elf/dl-tls.c:532)
> ==29416==    by 0x5684BDD: allocate_stack
> (/build/glibc-suXNNi/glibc-2.29/nptl/allocatestack.c:621)
> ==29416==    by 0x5684BDD: pthread_create@@GLIBC_2.2.5
> (/build/glibc-suXNNi/glibc-2.29/nptl/pthread_create.c:669)
> ==29416==    by 0x565DF65: ??? (in
> /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
> ==29416==    by 0x5654A3C: GOMP_parallel (in
> /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)
> ==29416==    by 0x1DBACEBA: U_NZentries(int, int, arma::Mat<double> const&,
> arma::Mat<unsigned int> const&, arma::Mat<double> const&, arma::Col<double>
> const&, arma::Col<double> const&, std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> >,  arma::Col<double>)
>
> (/home/Hornik/tmp/CRAN/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/U_NZentries.cpp:225)
> ==29416==    by 0x1DBA3B90: _GPvecchia_U_NZentries
>
> (/home/Hornik/tmp/CRAN/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/RcppExports.cpp:78)
>
> First, I don't know how to reproduce it because running
> R CMD check <package_name> --use-valgrind
> does not produce any errors on my machine.
>
> Second, see below the relevant part of the U_NZentries function (with the
> offending line marked with (***).
>
> *** #pragma omp parallel for
> shared(locs,revNNarray,revCondOnLatent,nuggets, nnp,m,Lentries,COV)
> private(k,dist,onevec,covmat,nug,n0,inds,revCon_row,inds00)
>  schedule(static)
>
>   for (k = 0; k < nnp; k++) {
>     inds=revNNarray.row(k).t();
>     revCon_row=revCondOnLatent.row(k).t();
>     n0 = get_nonzero_count_general(inds); // for general case
>     inds00 = get_idx_vals_general(n0, inds);
>     nug=nuggets.elem(inds00) % (ones(n0)-revCon_row(span(m+1-n0,m))); //
> vec is vec, cannot convert to mat
>     dist = calcPWD(locs.rows(inds00));
>     #pragma omp critical
>     {
>       if( COV=="matern"){
>         covmat= MaternFun(dist,covparms) + diagmat(nug) ; // summation from
> arma
>       } else if(COV=="esqe") {
>         covmat= EsqeFun(dist,covparms) + diagmat(nug) ; // summation from
> arma
>       }
>     }
>     onevec.resize(n0);
>     onevec = zeros(n0);
>     onevec[n0-1] = 1;
>     arma::vec M=solve(chol(covmat,"upper"),onevec);
>     // save the entries to matrix
>     Lentries(k,span(0,n0-1)) = M.t();
>   }
>
> I have googled around and some people are saying that what valgrind reports
> is an unavoidable consequence of using openMP (for example here:
> https://gcc.gnu.org/bugzilla/show_bug.cgi?id=36298 and here:
>
> https://stackoverflow.com/questions/6973489/valgrind-and-openmp-still-reachable-and-possibly-lost-is-that-bad
> ).
>
> Three questions: 1) what should I do to reproduce the error? 2) is it worth
> trying to do so? 3) why does it come up?
>
> Thanks a lot everyone!
>
> Marcin
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From d@n|e|d@@joberg @end|ng |rom gm@||@com  Mon Nov 18 13:48:41 2019
From: d@n|e|d@@joberg @end|ng |rom gm@||@com (Daniel Sjoberg)
Date: Mon, 18 Nov 2019 07:48:41 -0500
Subject: [R-pkg-devel] Install Package from GitHub in Vignette
In-Reply-To: <24009.54330.539944.147212@rob.eddelbuettel.com>
References: <CAG5xu56Mm+2jKpiDjnrVKtnZJY5f3w1-q7xt3JF2aM50DkphaQ@mail.gmail.com>
 <112acdcd-9638-4261-006b-89b866975938@gmail.com>
 <CAG5xu548nQ2Wq8JRiR+-W_cP=V7HbCUbuS47=d_ubVjq7xR1Cw@mail.gmail.com>
 <24009.40914.181836.907645@rob.eddelbuettel.com>
 <CAG5xu55r4LJqMZQqQGvAAJQaJWOXHFNmaAdgwrRYB_3wSd9MQw@mail.gmail.com>
 <24009.54330.539944.147212@rob.eddelbuettel.com>
Message-ID: <CAG5xu555995RgRRXYOtR+mAs37JskkcTYtSeRuTKgMUty74dEQ@mail.gmail.com>

Thank you for all the great tips!  I ended up creating a drat package repo,
and installing the packages from there with `Additional_repositories:` tag
in the description.  With this method, I was able to keep the vignettes as
R markdown docs and the pkgdown site did not need any modifications.

Thanks!~

On Tue, Nov 12, 2019 at 12:40 AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 11 November 2019 at 16:17, Daniel Sjoberg wrote:
> | Awesome, I'll check it out.  I do like the HTML vignettes, so I am
> hoping I
> | can get it working in that format!
>
> Well, as I said (but wrote poorly, dropping a "non"): Mark's approach is
> for
> pdf. I like as you then get by with Sweave only, hence not depending on
> anything that could change or break.
>
> For html, there is also a solution by Henrik involving his R.rsp package.
> See
> eg https://stackoverflow.com/a/24111191/143305
>
> Dirk
>
> | On Mon, Nov 11, 2019 at 1:23 PM Dirk Eddelbuettel <edd at debian.org>
> wrote:
> |
> | >
> | > On 11 November 2019 at 12:44, Daniel Sjoberg wrote:
> | > | Thank you Ben. That is a great suggestion.  While searching for
> | > | instructions on using pre-compiled vignettes, I came across a few
> posts
> | > | recommending the dependency package be stored in a drat repository on
> | > | GitHub and using the DESCRIPTION `Additional_repositories:` tag to
> point
> | > to
> | > | it.  This solution seems easier in my current workflow, so I am
> going to
> | > | give that a try first.  But if the same problems persist, I am
> absolutely
> | > | moving to pre-complied vignettes.
> | >
> | > It depends on _how_ you compute your vignette but for pdf vignettes a
> very
> | > simple solution is offered by Mark here:
> | >
> | >
> | >
> https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/
> | >
> | > I have switched a few packages of mine to this scheme.
> | >
> | > Of course, if you are after html vignettes then this does apply
> directly,
> | > but
> | > maybe you could still precompute a fancy gt table, take a screenshot
> and
> | > just
> | > include it as an image...
> | >
> | > Dirk
> | >
> | > --
> | > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> | >
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From rm@h@rp @end|ng |rom me@com  Thu Nov 21 17:08:01 2019
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Thu, 21 Nov 2019 08:08:01 -0800
Subject: [R-pkg-devel] compression of vignettes
Message-ID: <0F4BB6F3-CA52-48D1-9D4F-5859880DD211@me.com>

I have been unsuccessful with all of the following attempts to have compression of dynamically generated vignettes during the build on travis-ci and within RStudio. Help is appreciated.

I have tried the following travis-ci YAML to have vignettes compressed.
script:
  - R -e 'r <- rcmdcheck::rcmdcheck(".", args = c('--no-manual'), build_args = c('--compact-vignettes=both'); devtools::test(); quit(save = "no", status = if (length(c(r$errors, r$warnings)) > 0) { 1 } else { 0 }, runLast = FALSE)'

script:
  - R -e 'r <- rcmdcheck::rcmdcheck(".", args = c('--no-manual', '--compact-vignettes=gs+qpdf'); devtools::test(); quit(save = "no", status = if (length(c(r$errors, r$warnings)) > 0) { 1 } else { 0 }, runLast = FALSE)'

script:
  - R -e 'r <- rcmdcheck::rcmdcheck(".", args = c('--no-manual', '--compact-vignettes="gs+qpdf"'); devtools::test(); quit(save = "no", status = if (length(c(r$errors, r$warnings)) > 0) { 1 } else { 0 }, runLast = FALSE)'


I have tried the following build arguments in RStudio
--as-cran --compact-vignettes=gs+qpdf
--as-cran --compact-vignettes=both


R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com


From Jor|@@Mey@ @end|ng |rom UGent@be  Thu Nov 21 17:43:55 2019
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Thu, 21 Nov 2019 16:43:55 +0000
Subject: [R-pkg-devel] compression of vignettes
In-Reply-To: <0F4BB6F3-CA52-48D1-9D4F-5859880DD211@me.com>
References: <0F4BB6F3-CA52-48D1-9D4F-5859880DD211@me.com>
Message-ID: <1574354656972.38167@UGent.be>

Dear Mark,

You rely on external packages like rcmdcheck and devtools, so if you insist on using those, you should contact the package authors.

The workflow as described in the manual :
https://cran.r-project.org/doc/manuals/R-exts.html#Checking-and-building-packages

is as follows :

R CMD build pkg --compact-vignettes
R CMD check pkg_x.y.z.tar.gz --as-cran

In a basic Travis script this can be used as:

script:
  - R CMD build . --compact-vignettes=gs+qpdf
  - R CMD check *tar.gz --as-cran

You find more information here : https://towardsdatascience.com/travis-ci-for-r-advanced-guide-719cb2d9e0e5

Cheers
Joris


--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of R. Mark Sharp <rmsharp at me.com>
Sent: Thursday, November 21, 2019 5:08 PM
To: R Package Devel
Subject: [R-pkg-devel] compression of vignettes

I have been unsuccessful with all of the following attempts to have compression of dynamically generated vignettes during the build on travis-ci and within RStudio. Help is appreciated.

I have tried the following travis-ci YAML to have vignettes compressed.
script:
  - R -e 'r <- rcmdcheck::rcmdcheck(".", args = c('--no-manual'), build_args = c('--compact-vignettes=both'); devtools::test(); quit(save = "no", status = if (length(c(r$errors, r$warnings)) > 0) { 1 } else { 0 }, runLast = FALSE)'

script:
  - R -e 'r <- rcmdcheck::rcmdcheck(".", args = c('--no-manual', '--compact-vignettes=gs+qpdf'); devtools::test(); quit(save = "no", status = if (length(c(r$errors, r$warnings)) > 0) { 1 } else { 0 }, runLast = FALSE)'

script:
  - R -e 'r <- rcmdcheck::rcmdcheck(".", args = c('--no-manual', '--compact-vignettes="gs+qpdf"'); devtools::test(); quit(save = "no", status = if (length(c(r$errors, r$warnings)) > 0) { 1 } else { 0 }, runLast = FALSE)'


I have tried the following build arguments in RStudio
--as-cran --compact-vignettes=gs+qpdf
--as-cran --compact-vignettes=both


R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Thu Nov 21 18:43:24 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 21 Nov 2019 11:43:24 -0600
Subject: [R-pkg-devel] compression of vignettes
In-Reply-To: <1574354656972.38167@UGent.be>
References: <0F4BB6F3-CA52-48D1-9D4F-5859880DD211@me.com>
 <1574354656972.38167@UGent.be>
Message-ID: <24022.52412.363159.424620@rob.eddelbuettel.com>


On 21 November 2019 at 16:43, Joris Meys wrote:
| The workflow as described in the manual :
| https://cran.r-project.org/doc/manuals/R-exts.html#Checking-and-building-packages
| 
| is as follows :
| 
| R CMD build pkg --compact-vignettes
| R CMD check pkg_x.y.z.tar.gz --as-cran
| 
| In a basic Travis script this can be used as:
| 
| script:
|   - R CMD build . --compact-vignettes=gs+qpdf
|   - R CMD check *tar.gz --as-cran
| 
| You find more information here : https://towardsdatascience.com/travis-ci-for-r-advanced-guide-719cb2d9e0e5

You can also call the base R helper functions directly.

I like having simple command-line wrapper, so I added one to `littler` which
I can call as `compactpdf.r`.  All it does (besides argument checking) is
loop over either the given pdf files (or those found in the current
directory) to then call

    tools::compactPDF(f, gs_quality="ebook")

for each of them. That way you can simply compare 'before' and 'after'.

Similarly, I made compacting an option to the rendering script `render.r` I
often call directly from my editor when working on markdown files.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From dev|n@|ncert| @end|ng |rom gm@||@com  Thu Nov 21 19:25:09 2019
From: dev|n@|ncert| @end|ng |rom gm@||@com (Devin Incerti)
Date: Thu, 21 Nov 2019 10:25:09 -0800
Subject: [R-pkg-devel] Compiler warning using C versions of base R integrate
 function
Message-ID: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>

Hi,

I'm attempting to submit a very minor update to my package where I replaced
a deprecated C++ function with an alternative. However, I'm receiving an
unrelated warning "*array subscript -1 is outside array bounds of ?double
[52]? [-Warray-bounds] *" on Debian during the CRAN pre-tests. I do not
receive this warning on my local OS X, Ubuntu 16.04 (on Travis-CI), with
Win-builder, or with R-hub builder. I also did not receive this warning on
previous submissions to CRAN, but it does now show up on the most recent CRAN
checks
<http://s.bl-1.com/h/cH9zB21r?url=https://cran.r-project.org/web/checks/check_results_hesim.html>
.

The warning is related to the header file integrate.h
<http://s.bl-1.com/h/cH9zB6Qt?url=https://github.com/hesim-dev/hesim/blob/master/inst/include/hesim/Rbase/integrate.h>,
which is just integrate.c
<http://s.bl-1.com/h/cH9zBCpw?url=https://github.com/wch/r-source/blob/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/appl/integrate.c>
from
R source with function pointers replaced by C++ functors. These integration
functions are needed so that the package can integrate at the C++ level.

I don't know how to avoid this warning. Is it perhaps related to the
particular version of GCC used during the CRAN checks. Any thoughts or
suggestions would be much appreciated.

Thank you!

Devin

	[[alternative HTML version deleted]]


From @ergue|@@oko| @end|ng |rom gm@||@com  Fri Nov 22 10:10:30 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Fri, 22 Nov 2019 10:10:30 +0100
Subject: [R-pkg-devel] 
 Compiler warning using C versions of base R integrate function
In-Reply-To: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>
References: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>
Message-ID: <4662b7f0-c097-28da-140b-522a42797772@gmail.com>

Le 21/11/2019 ? 19:25, Devin Incerti a ?crit?:
> Hi,
> 
> I'm attempting to submit a very minor update to my package where I replaced
> a deprecated C++ function with an alternative. However, I'm receiving an
> unrelated warning "*array subscript -1 is outside array bounds of ?double
> [52]? [-Warray-bounds] *" on Debian during the CRAN pre-tests. I do not
> receive this warning on my local OS X, Ubuntu 16.04 (on Travis-CI), with
> Win-builder, or with R-hub builder. I also did not receive this warning on
> previous submissions to CRAN, but it does now show up on the most recent CRAN
> checks
> <http://s.bl-1.com/h/cH9zB21r?url=https://cran.r-project.org/web/checks/check_results_hesim.html>
> .
> 
> The warning is related to the header file integrate.h
> <http://s.bl-1.com/h/cH9zB6Qt?url=https://github.com/hesim-dev/hesim/blob/master/inst/include/hesim/Rbase/integrate.h>,
> which is just integrate.c
> <http://s.bl-1.com/h/cH9zBCpw?url=https://github.com/wch/r-source/blob/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/appl/integrate.c>
> from
> R source with function pointers replaced by C++ functors. These integration
> functions are needed so that the package can integrate at the C++ level.
> 
> I don't know how to avoid this warning.
Kind of brute force solution would be to delete the line --epstab (which 
is rising the warning) and replace any reference to epstab by the same 
with an index decremented by 1, e.g. instead of epstab[*n] write 
epstab[*n - 1].

Best,
Serguei.

> Is it perhaps related to the
> particular version of GCC used during the CRAN checks. Any thoughts or
> suggestions would be much appreciated.
> 
> Thank you!
> 
> Devin
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ph|||pp@@ngerer @end|ng |rom he|mho|tz-muenchen@de  Fri Nov 22 10:44:18 2019
From: ph|||pp@@ngerer @end|ng |rom he|mho|tz-muenchen@de (Angerer, Philipp)
Date: Fri, 22 Nov 2019 10:44:18 +0100 (CET)
Subject: [R-pkg-devel] Missing SystemRequirements on the build servers
Message-ID: <1508839836.1221557.1574415858835.JavaMail.zimbra@helmholtz-muenchen.de>



Hi, 

I first submitted my package nbconvertR in 2015. It requires the command jupyter nbconvert to work. 

Since the first submission the SystemRequirements which provide that command changed, which I reflected in the SystemRequirements and lately in an INSTALL file: https://github.com/theislab/nbconvertR/blob/f30cbe03908dcf0c9301436fa9f2c06c7028baab/INSTALL 


My problem now is that since 2017, my submission only gets until the mail ?Dear maintainer, package nbconvertR_1.3.1.tar.gz does not pass the incoming checks automatically?. That mail later says ?If you are fairly certain the rejection is a false positive, please reply-all to this message and explain? which I always do. But then nobody replies and my package gets kicked out of the incoming folder after 7 days or so. 


What can I do? 


Best, Philipp 

 


Helmholtz Zentrum M?nchen


	[[alternative HTML version deleted]]


From r@||@@tubner @end|ng |rom gm@||@com  Fri Nov 22 14:57:01 2019
From: r@||@@tubner @end|ng |rom gm@||@com (Ralf Stubner)
Date: Fri, 22 Nov 2019 14:57:01 +0100
Subject: [R-pkg-devel] 
 Compiler warning using C versions of base R integrate function
In-Reply-To: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>
References: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>
Message-ID: <CAFQwRQxm=CJcVzVt87fZFYS9SBGwqAHe+wvWj3qbt1ky9aYBAg@mail.gmail.com>

On Thu, Nov 21, 2019 at 7:25 PM Devin Incerti <devin.incerti at gmail.com> wrote:
> I'm attempting to submit a very minor update to my package where I replaced
> a deprecated C++ function with an alternative. However, I'm receiving an
> unrelated warning "*array subscript -1 is outside array bounds of ?double
> [52]? [-Warray-bounds] *" on Debian during the CRAN pre-tests. I do not
> receive this warning on my local OS X, Ubuntu 16.04 (on Travis-CI), with
> Win-builder, or with R-hub builder. I also did not receive this warning on
> previous submissions to CRAN, but it does now show up on the most recent CRAN
> checks
> <http://s.bl-1.com/h/cH9zB21r?url=https://cran.r-project.org/web/checks/check_results_hesim.html>

I cannot reproduce the warning with R 3.6.1 and GCC 9.2. It seems to
be an R-devel + new(ish) GCC issue since it also appears on the rather
new Windows + GCC 8 tests.

[...] .
> R source with function pointers replaced by C++ functors. These integration
> functions are needed so that the package can integrate at the C++ level.

Calling the integration functions from R's C API is no fun, indeed.
Have you considered using RcppNumerical
(https://github.com/yixuan/RcppNumerical) instead of copying code from
R?

cheerio
ralf


From @eb@meyer @end|ng |rom |@u@de  Fri Nov 22 15:24:45 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 22 Nov 2019 15:24:45 +0100
Subject: [R-pkg-devel] Missing SystemRequirements on the build servers
In-Reply-To: <1508839836.1221557.1574415858835.JavaMail.zimbra@helmholtz-muenchen.de>
References: <1508839836.1221557.1574415858835.JavaMail.zimbra@helmholtz-muenchen.de>
Message-ID: <19fe3ec4-e750-2147-9239-4689c5c55a27@fau.de>

Dear Philipp,

What kind of problems does the incoming check report?

If they are related to your package's vignette, a simple solution would
be to transform this toy example into a package test using
tools::buildVignette in the test script, which can be run conditionally
on specific system requirements being fulfilled (so probably not on CRAN
test machines).

Cheers,

	Sebastian


Am 22.11.19 um 10:44 schrieb Angerer, Philipp:
> 
> 
> Hi, 
> 
> I first submitted my package nbconvertR in 2015. It requires the command jupyter nbconvert to work. 
> 
> Since the first submission the SystemRequirements which provide that command changed, which I reflected in the SystemRequirements and lately in an INSTALL file: https://github.com/theislab/nbconvertR/blob/f30cbe03908dcf0c9301436fa9f2c06c7028baab/INSTALL 
> 
> 
> My problem now is that since 2017, my submission only gets until the mail ?Dear maintainer, package nbconvertR_1.3.1.tar.gz does not pass the incoming checks automatically?. That mail later says ?If you are fairly certain the rejection is a false positive, please reply-all to this message and explain? which I always do. But then nobody replies and my package gets kicked out of the incoming folder after 7 days or so. 
> 
> 
> What can I do? 
> 
> 
> Best, Philipp 
> 
>  
> 
> 
> Helmholtz Zentrum M?nchen
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From dev|n@|ncert| @end|ng |rom gm@||@com  Fri Nov 22 23:57:37 2019
From: dev|n@|ncert| @end|ng |rom gm@||@com (Devin Incerti)
Date: Fri, 22 Nov 2019 14:57:37 -0800
Subject: [R-pkg-devel] 
 Compiler warning using C versions of base R integrate function
In-Reply-To: <CAFQwRQxm=CJcVzVt87fZFYS9SBGwqAHe+wvWj3qbt1ky9aYBAg@mail.gmail.com>
References: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>
 <CAFQwRQxm=CJcVzVt87fZFYS9SBGwqAHe+wvWj3qbt1ky9aYBAg@mail.gmail.com>
Message-ID: <CADzXBeifQD-dcAavjerOc_V42Co82t3xdfFh0Mp17ucCO8WyQw@mail.gmail.com>

Hi Serguei and Ralf, the thoughts and suggestions are much appreciated.

Ironically, I used to use RcppNumerical to do the integration but switched
over to integrate.c because I was receiving a compiler warning and to
eliminate the dependency on RcppEigen. Do you think I should switch back to
RcppNumerical (CRAN checks make it seem like that warning has been fixed)
or use the brute force solution suggested by Serguei.

Cheers,

Devin




On Fri, Nov 22, 2019 at 5:57 AM Ralf Stubner <ralf.stubner at gmail.com> wrote:

> On Thu, Nov 21, 2019 at 7:25 PM Devin Incerti <devin.incerti at gmail.com>
> wrote:
> > I'm attempting to submit a very minor update to my package where I
> replaced
> > a deprecated C++ function with an alternative. However, I'm receiving an
> > unrelated warning "*array subscript -1 is outside array bounds of ?double
> > [52]? [-Warray-bounds] *" on Debian during the CRAN pre-tests. I do not
> > receive this warning on my local OS X, Ubuntu 16.04 (on Travis-CI), with
> > Win-builder, or with R-hub builder. I also did not receive this warning
> on
> > previous submissions to CRAN, but it does now show up on the most recent
> CRAN
> > checks
> > <
> http://s.bl-1.com/h/cH9zB21r?url=https://cran.r-project.org/web/checks/check_results_hesim.html
> >
>
> I cannot reproduce the warning with R 3.6.1 and GCC 9.2. It seems to
> be an R-devel + new(ish) GCC issue since it also appears on the rather
> new Windows + GCC 8 tests.
>
> [...] .
> > R source with function pointers replaced by C++ functors. These
> integration
> > functions are needed so that the package can integrate at the C++ level.
>
> Calling the integration functions from R's C API is no fun, indeed.
> Have you considered using RcppNumerical
> (https://github.com/yixuan/RcppNumerical) instead of copying code from
> R?
>
> cheerio
> ralf
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Nov 25 00:45:52 2019
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sun, 24 Nov 2019 17:45:52 -0600
Subject: [R-pkg-devel] compression of vignettes
In-Reply-To: <24022.52412.363159.424620@rob.eddelbuettel.com>
References: <0F4BB6F3-CA52-48D1-9D4F-5859880DD211@me.com>
 <1574354656972.38167@UGent.be>
 <24022.52412.363159.424620@rob.eddelbuettel.com>
Message-ID: <542be061-b8b4-7960-62a9-821153edd988@effectivedefense.org>

 ????? I encountered this or a similar problem with 
"https://github.com/sbgraves237/Ecfun/blob/master/vignettes/time2nextNuclearWeaponState.Rmd". 
I tried both "R CMD build Ecfun" and R CMD build Ecfun 
--compact-vignettes".? With both, "R CMD check Ecfun_0.2-2.tar.gz" 
included the following:


* checking installed package size ... NOTE
 ? installed size is? 7.2Mb
 ? sub-directories of 1Mb or more:
 ??? doc?? 6.6Mb


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer Graves


On 2019-11-21 11:43, Dirk Eddelbuettel wrote:
> On 21 November 2019 at 16:43, Joris Meys wrote:
> | The workflow as described in the manual :
> | 
> https://cran.r-project.org/doc/manuals/R-exts.html#Checking-and-building-packages
> |
> | is as follows :
> |
> | R CMD build pkg --compact-vignettes
> | R CMD check pkg_x.y.z.tar.gz --as-cran
> |
> | In a basic Travis script this can be used as:
> |
> | script:
> | - R CMD build . --compact-vignettes=gs+qpdf
> | - R CMD check *tar.gz --as-cran
> |
> | You find more information here : 
> https://towardsdatascience.com/travis-ci-for-r-advanced-guide-719cb2d9e0e5
>
> You can also call the base R helper functions directly.
>
> I like having simple command-line wrapper, so I added one to `littler` 
> which
> I can call as `compactpdf.r`. All it does (besides argument checking) is
> loop over either the given pdf files (or those found in the current
> directory) to then call
>
> tools::compactPDF(f, gs_quality="ebook")
>
> for each of them. That way you can simply compare 'before' and 'after'.
>
> Similarly, I made compacting an option to the rendering script 
> `render.r` I
> often call directly from my editor when working on markdown files.
>
> Dirk
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Nov 25 11:15:48 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 25 Nov 2019 11:15:48 +0100
Subject: [R-pkg-devel] compression of vignettes
In-Reply-To: <542be061-b8b4-7960-62a9-821153edd988@effectivedefense.org>
References: <0F4BB6F3-CA52-48D1-9D4F-5859880DD211@me.com>
 <1574354656972.38167@UGent.be>
 <24022.52412.363159.424620@rob.eddelbuettel.com>
 <542be061-b8b4-7960-62a9-821153edd988@effectivedefense.org>
Message-ID: <1ef3a053-2a43-631b-4438-02ba20aaef93@statistik.tu-dortmund.de>



On 25.11.2019 00:45, Spencer Graves wrote:
>  ????? I encountered this or a similar problem with 
> "https://github.com/sbgraves237/Ecfun/blob/master/vignettes/time2nextNuclearWeaponState.Rmd". 
> I tried both "R CMD build Ecfun" and R CMD build Ecfun 
> --compact-vignettes".? With both, "R CMD check Ecfun_0.2-2.tar.gz" 
> included the following:
> 
> 
> * checking installed package size ... NOTE
>  ? installed size is? 7.2Mb
>  ? sub-directories of 1Mb or more:
>  ??? doc?? 6.6Mb


It is nice to have packages that are as small as possible, but we would 
not object to publish a package with the above size of (uncompressed) 
directories.

Best,
Uwe Ligges


> 
> 
>  ????? Suggestions?
>  ????? Thanks,
>  ????? Spencer Graves
> 
> 
> On 2019-11-21 11:43, Dirk Eddelbuettel wrote:
>> On 21 November 2019 at 16:43, Joris Meys wrote:
>> | The workflow as described in the manual :
>> | 
>> https://cran.r-project.org/doc/manuals/R-exts.html#Checking-and-building-packages 
>>
>> |
>> | is as follows :
>> |
>> | R CMD build pkg --compact-vignettes
>> | R CMD check pkg_x.y.z.tar.gz --as-cran
>> |
>> | In a basic Travis script this can be used as:
>> |
>> | script:
>> | - R CMD build . --compact-vignettes=gs+qpdf
>> | - R CMD check *tar.gz --as-cran
>> |
>> | You find more information here : 
>> https://towardsdatascience.com/travis-ci-for-r-advanced-guide-719cb2d9e0e5 
>>
>>
>> You can also call the base R helper functions directly.
>>
>> I like having simple command-line wrapper, so I added one to `littler` 
>> which
>> I can call as `compactpdf.r`. All it does (besides argument checking) is
>> loop over either the given pdf files (or those found in the current
>> directory) to then call
>>
>> tools::compactPDF(f, gs_quality="ebook")
>>
>> for each of them. That way you can simply compare 'before' and 'after'.
>>
>> Similarly, I made compacting an option to the rendering script 
>> `render.r` I
>> often call directly from my editor when working on markdown files.
>>
>> Dirk
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From nur|@@perez @end|ng |rom b@c@e@  Tue Nov 26 11:31:34 2019
From: nur|@@perez @end|ng |rom b@c@e@ (NURIA PEREZ ZANON)
Date: Tue, 26 Nov 2019 11:31:34 +0100
Subject: [R-pkg-devel] No answer from win-builder R-devel. Is it down?
Message-ID: <867dcfb8-6441-3153-bd8c-3934356f4350@bsc.es>

Dear,

Before submitting my package to CRAN, yesterday I sent it (25th
November) to win-builder R-devel version.

Almost 19 hours later, I haven't received any email from win-builder
with the link to the binaries and the log files. (The email address
specified in the 'Maintainer' field is correct).

Checking the index R-devel in the ftp server, it seems that packages
stoped being tested around?11/25/19, 1:44:00 PM (the oldest package in
the index).

By trying to resubmit the package, I get the error
ERROR: Access to the path
'C:\Inetpub\ftproot\R-devel\CSTools_2.0.0.tar.gz' is denied.

because the package is already in the queue.

Does anyone know how to proceed? Should I contact somebody or this is a
frequent and well-known issue?

Thanks in advance,

-- 
Nuria P?rez-Zan?n
POSTDOCTORAL RESEARCHER
Earth Sciences - Computational Earth Sciences Group
Barcelona Supercomputing Center
email: nuria.perez at bsc.es
Location: Nexus II - Planta 1 
          C/ Jordi Girona, 29 Barcelona 08034



http://bsc.es/disclaimer
	[[alternative HTML version deleted]]


From @ergue|@@oko| @end|ng |rom gm@||@com  Tue Nov 26 14:33:53 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Tue, 26 Nov 2019 14:33:53 +0100
Subject: [R-pkg-devel] No answer from win-builder R-devel. Is it down?
In-Reply-To: <867dcfb8-6441-3153-bd8c-3934356f4350@bsc.es>
References: <867dcfb8-6441-3153-bd8c-3934356f4350@bsc.es>
Message-ID: <3ac5e78d-8d77-e1ad-f217-a8d7e63a7db9@gmail.com>

Le 26/11/2019 ? 11:31, NURIA PEREZ ZANON a ?crit?:
> Dear,
> 
> Before submitting my package to CRAN, yesterday I sent it (25th
> November) to win-builder R-devel version.
> 
> Almost 19 hours later, I haven't received any email from win-builder
> with the link to the binaries and the log files. (The email address
> specified in the 'Maintainer' field is correct).
> 
> Checking the index R-devel in the ftp server, it seems that packages
> stoped being tested around?11/25/19, 1:44:00 PM (the oldest package in
> the index).
> 
> By trying to resubmit the package, I get the error
> ERROR: Access to the path
> 'C:\Inetpub\ftproot\R-devel\CSTools_2.0.0.tar.gz' is denied.
> 
> because the package is already in the queue.
> 
> Does anyone know how to proceed? Should I contact somebody or this is a
> frequent and well-known issue?
We are used to get a response from winbuilder in around 30 minutes but 
these days it seems to be congested. Recently I had to wait 3 days 
before my tarball was proceeded.

So my advice: be patient.
Serguei.


From nur|@@perez @end|ng |rom b@c@e@  Tue Nov 26 15:00:21 2019
From: nur|@@perez @end|ng |rom b@c@e@ (NURIA PEREZ ZANON)
Date: Tue, 26 Nov 2019 15:00:21 +0100
Subject: [R-pkg-devel] No answer from win-builder R-devel. Is it down?
In-Reply-To: <3ac5e78d-8d77-e1ad-f217-a8d7e63a7db9@gmail.com>
References: <867dcfb8-6441-3153-bd8c-3934356f4350@bsc.es>
 <3ac5e78d-8d77-e1ad-f217-a8d7e63a7db9@gmail.com>
Message-ID: <3093a646-b04b-aec9-7358-1a0b6b91d441@bsc.es>

Thanks for the information!

N?ria


On 11/26/2019 02:33 PM, Serguei Sokol wrote:
> Le 26/11/2019 ? 11:31, NURIA PEREZ ZANON a ?crit?:
>> Dear,
>>
>> Before submitting my package to CRAN, yesterday I sent it (25th
>> November) to win-builder R-devel version.
>>
>> Almost 19 hours later, I haven't received any email from win-builder
>> with the link to the binaries and the log files. (The email address
>> specified in the 'Maintainer' field is correct).
>>
>> Checking the index R-devel in the ftp server, it seems that packages
>> stoped being tested around?11/25/19, 1:44:00 PM (the oldest package in
>> the index).
>>
>> By trying to resubmit the package, I get the error
>> ERROR: Access to the path
>> 'C:\Inetpub\ftproot\R-devel\CSTools_2.0.0.tar.gz' is denied.
>>
>> because the package is already in the queue.
>>
>> Does anyone know how to proceed? Should I contact somebody or this is a
>> frequent and well-known issue?
> We are used to get a response from winbuilder in around 30 minutes but
> these days it seems to be congested. Recently I had to wait 3 days
> before my tarball was proceeded.
>
> So my advice: be patient.
> Serguei.

-- 
Nuria P?rez-Zan?n
POSTDOCTORAL RESEARCHER
Earth Sciences - Computational Earth Sciences Group
Barcelona Supercomputing Center
email: nuria.perez at bsc.es
Location: Nexus II - Planta 1 
          C/ Jordi Girona, 29 Barcelona 08034


http://bsc.es/disclaimer


From ph|||pp@@ngerer @end|ng |rom he|mho|tz-muenchen@de  Tue Nov 26 21:23:11 2019
From: ph|||pp@@ngerer @end|ng |rom he|mho|tz-muenchen@de (Angerer, Philipp)
Date: Tue, 26 Nov 2019 21:23:11 +0100 (CET)
Subject: [R-pkg-devel] Missing SystemRequirements on the build servers
In-Reply-To: <19fe3ec4-e750-2147-9239-4689c5c55a27@fau.de>
References: <1508839836.1221557.1574415858835.JavaMail.zimbra@helmholtz-muenchen.de>
 <19fe3ec4-e750-2147-9239-4689c5c55a27@fau.de>
Message-ID: <1608681888.2940353.1574799791643.JavaMail.zimbra@helmholtz-muenchen.de>



Dear Sebastian, 


Yes, since the package is a vignette builder it would make sense for it not to have a ?real vignette?. 


I?ll try this, thank you! 


Best, Philipp 

Von: "Sebastian Meyer" <seb.meyer at fau.de> 
An: "r-package-devel" <r-package-devel at r-project.org> 
Gesendet: Freitag, 22. November 2019 15:24:45 
Betreff: Re: [R-pkg-devel] Missing SystemRequirements on the build servers 

Dear Philipp, 

What kind of problems does the incoming check report? 

If they are related to your package's vignette, a simple solution would 
be to transform this toy example into a package test using 
tools::buildVignette in the test script, which can be run conditionally 
on specific system requirements being fulfilled (so probably not on CRAN 
test machines). 

Cheers, 

Sebastian 


Am 22.11.19 um 10:44 schrieb Angerer, Philipp: 
> 
> 
> Hi, 
> 
> I first submitted my package nbconvertR in 2015. It requires the command jupyter nbconvert to work. 
> 
> Since the first submission the SystemRequirements which provide that command changed, which I reflected in the SystemRequirements and lately in an INSTALL file: https://github.com/theislab/nbconvertR/blob/f30cbe03908dcf0c9301436fa9f2c06c7028baab/INSTALL 
> 
> 
> My problem now is that since 2017, my submission only gets until the mail ?Dear maintainer, package nbconvertR_1.3.1.tar.gz does not pass the incoming checks automatically?. That mail later says ?If you are fairly certain the rejection is a false positive, please reply-all to this message and explain? which I always do. But then nobody replies and my package gets kicked out of the incoming folder after 7 days or so. 
> 
> 
> What can I do? 
> 
> 
> Best, Philipp 
> 
> 
> 
> 
> Helmholtz Zentrum M?nchen 
> 
> 
> [[alternative HTML version deleted]] 
> 
> ______________________________________________ 
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel 
> 

______________________________________________ 
R-package-devel at r-project.org mailing list 
https://stat.ethz.ch/mailman/listinfo/r-package-devel 

Helmholtz Zentrum M?nchen


Helmholtz Zentrum M?nchen


	[[alternative HTML version deleted]]


From |ro@o @end|ng |rom un@|@edu@co  Wed Nov 27 00:22:20 2019
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Tue, 26 Nov 2019 18:22:20 -0500
Subject: [R-pkg-devel] vignette error in debian
Message-ID: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>

I got a warning only in debian after submitting package to CRAN.
I want to replicate the vignette warning of debian in the following link to
solve it:

Debian:
https://win-builder.r-project.org/incoming_pretest/idiogramFISH_1.9.1_20191126_012524/Debian/00check.log
1 WARNING

Warning summary:
"checking re-building of vignette outputs ... [15s/17s] WARNING
Error(s) in re-building vignettes:
'list' object cannot be coerced to type 'double'" several times
--

- I used a guest debian 10 in vmware in my system, and couldn't replicate
the error installing with R CMD INSTALL ....

- In R of host, I installed rhub and run
rhub::check_with_sanitizers() # success
rhub::check_on_debian() # does not work because of vignette dependencies
not installed
rhub::check(platform = "debian-gcc-devel") # does not work because of
vignette dependencies not installed

https://pastebin.com/wwhbqcSw

Grateful for any guidance


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From rub@k @end|ng |rom m@th@@@u@dk  Wed Nov 27 14:34:05 2019
From: rub@k @end|ng |rom m@th@@@u@dk (Ege Rubak)
Date: Wed, 27 Nov 2019 14:34:05 +0100
Subject: [R-pkg-devel] vignette error in debian
In-Reply-To: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>
References: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>
Message-ID: <556264a8-b45b-6996-4a42-f43c4e5ca62e@math.aau.dk>

On 27/11/2019 00.22, Fernando Roa wrote:
> - I used a guest debian 10 in vmware in my system, and couldn't replicate
> the error installing with R CMD INSTALL ....

I guess you should rather run "R CMD check ..." on the tar.gz file to 
reproduce the error.

Hope that helps.

/Ege


From krzb@r @end|ng |rom protonm@||@ch  Wed Nov 27 20:00:17 2019
From: krzb@r @end|ng |rom protonm@||@ch (Krzysztof Bartoszek)
Date: Wed, 27 Nov 2019 19:00:17 +0000
Subject: [R-pkg-devel] Has something changed regarding chol()?
Message-ID: <z3U5RA7XYZ0HODf-598KvwRKIdVVlrVUZ_2GvcXJeFegGabSRm2nZF0OyzYnv_B77SCNXB1Fiwwg2fzvCg_ZVCcYLg9slzLc6yDRmbur6Zw=@protonmail.ch>

Hello!
I am trying to update my mvSLOUCH R package and am getting it rejected due to failures on r-devel-linux-x86_64-debian-clang and r-devel-linux-x86_64-debian-gcc . The error is thrown when running the examples : Error in chol.default( Some matrix) :  the leading minor of order 1 is not positive definite.
The same error can be seen in the current version of mvSLOUCH on CRAN: https://cran.r-project.org/web/checks/check_results_mvSLOUCH.html but only for the two Debian flavors not the other ones. I understand what the error means and in principle can get around it by using chol()'s pivot option, i.e. I did this the first time the submission failed, but then it fails with same error on the next call to chol(). But before I go and set pivot=TRUE in all calls to chol() I wanted to ask whether you know what change has taken place regarding chol() and the Debian flavor? All these examples previously ran without error  (set.seed() is run first-so everything should be the same) and moreover the problem is only on the Debian flavor, not on the others. In the new, being rejection submission, I have also used in set.seed(..., kind = "Mersenne-Twister", normal.kind = "Inversion") and ran RNGversion("3.6.1") just in case there were differences here between flavors.

I would be grateful for some pointers.
Best wishes
Krzysztof Bartoszek

Sent with ProtonMail Secure Email.
	[[alternative HTML version deleted]]


From ton|ght@then|ght @end|ng |rom gm@||@com  Wed Nov 27 22:19:48 2019
From: ton|ght@then|ght @end|ng |rom gm@||@com (Sam Albers)
Date: Wed, 27 Nov 2019 13:19:48 -0800
Subject: [R-pkg-devel] R CMD check: Titles in README
Message-ID: <CADkXsV1xFX=YQQ1_u+Di-nsxn=6jdGuxuLU0ftT8-+pWCC-4mg@mail.gmail.com>

HI all,

Submission of a new version of the tidyhydat package to CRAN, I get
this warning on the pre-test checks for Debian:

* checking top-level files ... WARNING
Conversion of ?README.md? failed:
[WARNING] This document format requires a nonempty <title> element.
  Defaulting to ?README? as the title.
  To specify a title, use ?title? in metadata or --metadata title="...".

Here is the actual log:
https://win-builder.r-project.org/incoming_pretest/tidyhydat_0.5.0_20191127_215625/Debian/00check.log

The .yaml header for the README has not changed since the last
successful submission. Looking at the changes to R 3.6.1 patched,
nothing has changed in README requirement AFAIK.

Is this a false positive? If not, any thoughts on how to make it go away?

Best,

Sam


From bbo|ker @end|ng |rom gm@||@com  Wed Nov 27 22:33:02 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 27 Nov 2019 16:33:02 -0500
Subject: [R-pkg-devel] R CMD check: Titles in README
In-Reply-To: <CADkXsV1xFX=YQQ1_u+Di-nsxn=6jdGuxuLU0ftT8-+pWCC-4mg@mail.gmail.com>
References: <CADkXsV1xFX=YQQ1_u+Di-nsxn=6jdGuxuLU0ftT8-+pWCC-4mg@mail.gmail.com>
Message-ID: <77fc8f50-6a9f-4ae0-3334-8b36b370ea84@gmail.com>


  Maybe already obvious to you, but this seems to be coming from pandoc,
not from R machinery.  There are a few extra lines in the log that seem
to be relevant ...

[WARNING] This document format requires a nonempty <title> element.
  Defaulting to ?README? as the title.
  To specify a title, use ?title? in metadata or --metadata title="...".
pandoc: Stack space overflow: current size 33624 bytes.
pandoc: Use `+RTS -Ksize -RTS' to increase it.

  I think you'd have to figure out what's happened to the pandoc
version/configuration in the most recent Debian setup on CRAN ... I
don't know if there's a canonical place (or anywhere, for that matter)
where one can find a complete list of library/tool versions for the
various platforms on CRAN ...

  cheers
   Ben Bolker



On 2019-11-27 4:19 p.m., Sam Albers wrote:
> HI all,
> 
> Submission of a new version of the tidyhydat package to CRAN, I get
> this warning on the pre-test checks for Debian:
> 
> * checking top-level files ... WARNING
> Conversion of ?README.md? failed:
> [WARNING] This document format requires a nonempty <title> element.
>   Defaulting to ?README? as the title.
>   To specify a title, use ?title? in metadata or --metadata title="...".
> 
> Here is the actual log:
> https://win-builder.r-project.org/incoming_pretest/tidyhydat_0.5.0_20191127_215625/Debian/00check.log
> 
> The .yaml header for the README has not changed since the last
> successful submission. Looking at the changes to R 3.6.1 patched,
> nothing has changed in README requirement AFAIK.
> 
> Is this a false positive? If not, any thoughts on how to make it go away?
> 
> Best,
> 
> Sam
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |ro@o @end|ng |rom un@|@edu@co  Wed Nov 27 23:16:55 2019
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Wed, 27 Nov 2019 17:16:55 -0500
Subject: [R-pkg-devel] vignette error in debian
In-Reply-To: <556264a8-b45b-6996-4a42-f43c4e5ca62e@math.aau.dk>
References: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>
 <556264a8-b45b-6996-4a42-f43c4e5ca62e@math.aau.dk>
Message-ID: <CA+fi=+m-gGhLqzCvzEtGg1+bVmCyx1GVhGCiBTtxrSyU+fQ-iw@mail.gmail.com>

After Ege answer, I could replicate the error(s): list' object cannot be
coerced to type 'double'
with CMD check: bash R-devel.sh CMD check --as-cran
idiogramFISH_1.9.1.tar.gz  in a vmware
debian guest with the r-devel (4.0) version of R installed after:
http://singmann.org/installing-r-devel-on-linux/

Error does not occur in a R-devel console session installed
in /usr/local/lib/R-devel/bin

After adding debug prints to the code, problem points to a mapply

Here are the values I got with debug printing

labelytoplot<-list(c(0.654545454545455, 0.654545454545455,
0.763636363636364, 0.763636363636364), c(0.872727272727273,
0.872727272727273, 0.981818181818182, 0.981818181818182),
c(1.09090909090909, 1.09090909090909, 1.2, 1.2), c(1.30909090909091,
1.30909090909091, 1.41818181818182, 1.41818181818182))
labelxtoplot<-list(c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75,
42.5), c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75, 42.5))
borders<-marks<-c("green","blue","yellow","black")

CODE producing the error in R CMD check only:
# plot(1:50)
mapply(function(x,y,z,w) graphics::polygon(x=x,
                                           y=y,
                                           col=z,
                                           lwd=rep(.5,length(marks) )
                                           ,border=w
),
x = labelxtoplot,
y = labelytoplot
,z = marks
,w = borders
)

Grateful for any guidance ,






On Wed, Nov 27, 2019 at 8:34 AM Ege Rubak <rubak at math.aau.dk> wrote:

> On 27/11/2019 00.22, Fernando Roa wrote:
> > - I used a guest debian 10 in vmware in my system, and couldn't replicate
> > the error installing with R CMD INSTALL ....
>
> I guess you should rather run "R CMD check ..." on the tar.gz file to
> reproduce the error.
>
> Hope that helps.
>
> /Ege
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


Original message:
I got a warning only in debian after submitting package to CRAN.
I want to replicate the vignette warning of debian in the following link to
solve it:

Debian:
https://win-builder.r-project.org/incoming_pretest/idiogramFISH_1.9.1_20191126_012524/Debian/00check.log
1 WARNING

Warning summary:
"checking re-building of vignette outputs ... [15s/17s] WARNING
Error(s) in re-building vignettes:
'list' object cannot be coerced to type 'double'" several times
--

- I used a guest debian 10 in vmware in my system, and couldn't replicate
the error installing with R CMD INSTALL ....

- In R of host, I installed rhub and run
rhub::check_with_sanitizers() # success
rhub::check_on_debian() # does not work because of vignette dependencies
not installed
rhub::check(platform = "debian-gcc-devel") # does not work because of
vignette dependencies not installed

https://pastebin.com/wwhbqcSw

Grateful for any guidance


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Thu Nov 28 08:59:53 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 28 Nov 2019 08:59:53 +0100
Subject: [R-pkg-devel] vignette error in debian
In-Reply-To: <CA+fi=+m-gGhLqzCvzEtGg1+bVmCyx1GVhGCiBTtxrSyU+fQ-iw@mail.gmail.com>
References: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>
 <556264a8-b45b-6996-4a42-f43c4e5ca62e@math.aau.dk>
 <CA+fi=+m-gGhLqzCvzEtGg1+bVmCyx1GVhGCiBTtxrSyU+fQ-iw@mail.gmail.com>
Message-ID: <b55457b1-3830-241a-187d-f0caef98d5a6@fau.de>

This is most likely related to the recently changed class of matrices.

R> class(matrix(1))

returned "matrix" but will return c("matrix", "array") in future
versions of R. See the corresponding item in the R-devel NEWS

https://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html

To reproduce the error, you need a fairly recent R-devel and set the
environment variable

_R_CLASS_MATRIX_ARRAY_=true

On CRAN, this configuration is currently only used in the two R-devel
flavors which give warnings for your package.

Happy debugging!

	Sebastian


Am 27.11.19 um 23:16 schrieb Fernando Roa:
> After Ege answer, I could replicate the error(s): list' object cannot be
> coerced to type 'double'
> with CMD check: bash R-devel.sh CMD check --as-cran
> idiogramFISH_1.9.1.tar.gz  in a vmware
> debian guest with the r-devel (4.0) version of R installed after:
> http://singmann.org/installing-r-devel-on-linux/
> 
> Error does not occur in a R-devel console session installed
> in /usr/local/lib/R-devel/bin
> 
> After adding debug prints to the code, problem points to a mapply
> 
> Here are the values I got with debug printing
> 
> labelytoplot<-list(c(0.654545454545455, 0.654545454545455,
> 0.763636363636364, 0.763636363636364), c(0.872727272727273,
> 0.872727272727273, 0.981818181818182, 0.981818181818182),
> c(1.09090909090909, 1.09090909090909, 1.2, 1.2), c(1.30909090909091,
> 1.30909090909091, 1.41818181818182, 1.41818181818182))
> labelxtoplot<-list(c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75,
> 42.5), c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75, 42.5))
> borders<-marks<-c("green","blue","yellow","black")
> 
> CODE producing the error in R CMD check only:
> # plot(1:50)
> mapply(function(x,y,z,w) graphics::polygon(x=x,
>                                            y=y,
>                                            col=z,
>                                            lwd=rep(.5,length(marks) )
>                                            ,border=w
> ),
> x = labelxtoplot,
> y = labelytoplot
> ,z = marks
> ,w = borders
> )
> 
> Grateful for any guidance ,
> 
> 
> 
> 
> 
> 
> On Wed, Nov 27, 2019 at 8:34 AM Ege Rubak <rubak at math.aau.dk> wrote:
> 
>> On 27/11/2019 00.22, Fernando Roa wrote:
>>> - I used a guest debian 10 in vmware in my system, and couldn't replicate
>>> the error installing with R CMD INSTALL ....
>>
>> I guess you should rather run "R CMD check ..." on the tar.gz file to
>> reproduce the error.
>>
>> Hope that helps.
>>
>> /Ege
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> Original message:
> I got a warning only in debian after submitting package to CRAN.
> I want to replicate the vignette warning of debian in the following link to
> solve it:
> 
> Debian:
> https://win-builder.r-project.org/incoming_pretest/idiogramFISH_1.9.1_20191126_012524/Debian/00check.log
> 1 WARNING
> 
> Warning summary:
> "checking re-building of vignette outputs ... [15s/17s] WARNING
> Error(s) in re-building vignettes:
> 'list' object cannot be coerced to type 'double'" several times
> --
> 
> - I used a guest debian 10 in vmware in my system, and couldn't replicate
> the error installing with R CMD INSTALL ....
> 
> - In R of host, I installed rhub and run
> rhub::check_with_sanitizers() # success
> rhub::check_on_debian() # does not work because of vignette dependencies
> not installed
> rhub::check(platform = "debian-gcc-devel") # does not work because of
> vignette dependencies not installed
> 
> https://pastebin.com/wwhbqcSw
> 
> Grateful for any guidance
> 
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Nov 28 11:59:28 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 28 Nov 2019 11:59:28 +0100
Subject: [R-pkg-devel] R CMD check: Titles in README
In-Reply-To: <77fc8f50-6a9f-4ae0-3334-8b36b370ea84@gmail.com>
References: <CADkXsV1xFX=YQQ1_u+Di-nsxn=6jdGuxuLU0ftT8-+pWCC-4mg@mail.gmail.com>
 <77fc8f50-6a9f-4ae0-3334-8b36b370ea84@gmail.com>
Message-ID: <703e878a-0cfb-d0f0-9c97-2dbc0cd9ba4a@statistik.tu-dortmund.de>

We had to install the most recent pandoc release as the old failed for 
the recent texlive release with rmarkdown.

Apparently pandoc gives a different error message for empty titles now. 
The simplest solution would be to provide a proper title anyway.

Best,
Uwe Ligges



On 27.11.2019 22:33, Ben Bolker wrote:
> 
>    Maybe already obvious to you, but this seems to be coming from pandoc,
> not from R machinery.  There are a few extra lines in the log that seem
> to be relevant ...
> 
> [WARNING] This document format requires a nonempty <title> element.
>    Defaulting to ?README? as the title.
>    To specify a title, use ?title? in metadata or --metadata title="...".
> pandoc: Stack space overflow: current size 33624 bytes.
> pandoc: Use `+RTS -Ksize -RTS' to increase it.
> 
>    I think you'd have to figure out what's happened to the pandoc
> version/configuration in the most recent Debian setup on CRAN ... I
> don't know if there's a canonical place (or anywhere, for that matter)
> where one can find a complete list of library/tool versions for the
> various platforms on CRAN ...
> 
>    cheers
>     Ben Bolker
> 
> 
> 
> On 2019-11-27 4:19 p.m., Sam Albers wrote:
>> HI all,
>>
>> Submission of a new version of the tidyhydat package to CRAN, I get
>> this warning on the pre-test checks for Debian:
>>
>> * checking top-level files ... WARNING
>> Conversion of ?README.md? failed:
>> [WARNING] This document format requires a nonempty <title> element.
>>    Defaulting to ?README? as the title.
>>    To specify a title, use ?title? in metadata or --metadata title="...".
>>
>> Here is the actual log:
>> https://win-builder.r-project.org/incoming_pretest/tidyhydat_0.5.0_20191127_215625/Debian/00check.log
>>
>> The .yaml header for the README has not changed since the last
>> successful submission. Looking at the changes to R 3.6.1 patched,
>> nothing has changed in README requirement AFAIK.
>>
>> Is this a false positive? If not, any thoughts on how to make it go away?
>>
>> Best,
>>
>> Sam
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu Nov 28 13:41:01 2019
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 28 Nov 2019 13:41:01 +0100
Subject: [R-pkg-devel] 
 Compiler warning using C versions of base R integrate function
In-Reply-To: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>
References: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>
Message-ID: <100625b3-e209-6ec8-68e0-5770c9f890df@gmail.com>

On 11/21/19 7:25 PM, Devin Incerti wrote:
> Hi,
>
> I'm attempting to submit a very minor update to my package where I replaced
> a deprecated C++ function with an alternative. However, I'm receiving an
> unrelated warning "*array subscript -1 is outside array bounds of ?double
> [52]? [-Warray-bounds] *" on Debian during the CRAN pre-tests. I do not
> receive this warning on my local OS X, Ubuntu 16.04 (on Travis-CI), with
> Win-builder, or with R-hub builder. I also did not receive this warning on
> previous submissions to CRAN, but it does now show up on the most recent CRAN
> checks
> <http://s.bl-1.com/h/cH9zB21r?url=https://cran.r-project.org/web/checks/check_results_hesim.html>
> .
>
> The warning is related to the header file integrate.h
> <http://s.bl-1.com/h/cH9zB6Qt?url=https://github.com/hesim-dev/hesim/blob/master/inst/include/hesim/Rbase/integrate.h>,
> which is just integrate.c
> <http://s.bl-1.com/h/cH9zBCpw?url=https://github.com/wch/r-source/blob/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/appl/integrate.c>
> from
> R source with function pointers replaced by C++ functors. These integration
> functions are needed so that the package can integrate at the C++ level.
>
> I don't know how to avoid this warning. Is it perhaps related to the
> particular version of GCC used during the CRAN checks. Any thoughts or
> suggestions would be much appreciated.
>
> Thank you!

The warning is generated by GCC when inlining the function rdqelg(), I 
can reproduce it with the integrate.c we have in R, but only if I add 
"inline" to rdqelg() definition (GCC 6 and newer - on Ubuntu but that 
should not matter). The inliner knows the callsite, so it knows that 
what is being passed is an array (and not an arbitrary pointer), and 
hence it emits the warning. It is not smart enough to know that the 
first element of the new "array" will (unless there is a bug) never be 
used. When not inlining and the function is compiled independently from 
its callsites, it assumes it is a pointer, and hence there is no warning.

The code is automatically converted from Fortran, maybe these pointer 
decrements in function prologues are to adjust to Fortran 1-based array 
indexing. If you must use this modified copy of integrate.c from R, 
perhaps a quick hack to get rid of the warning would be to avoid the 
"inline" keywords in declarations of functions like rdqelg(). In a 
perfect world, the code would be rewritten to more idiomatic C (not just 
to avoid these decrements). Or perhaps the Fortran original could be used.

Tomas

> ()
>
> Devin
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |ro@o @end|ng |rom un@|@edu@co  Thu Nov 28 14:56:37 2019
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Thu, 28 Nov 2019 08:56:37 -0500
Subject: [R-pkg-devel] vignette error in debian
In-Reply-To: <b55457b1-3830-241a-187d-f0caef98d5a6@fau.de>
References: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>
 <556264a8-b45b-6996-4a42-f43c4e5ca62e@math.aau.dk>
 <CA+fi=+m-gGhLqzCvzEtGg1+bVmCyx1GVhGCiBTtxrSyU+fQ-iw@mail.gmail.com>
 <b55457b1-3830-241a-187d-f0caef98d5a6@fau.de>
Message-ID: <CA+fi=+ktiKtwBMbSjOE71KhLTigaaJ6bGfPwFUwH6Y_tE1zt4w@mail.gmail.com>

Thx Sebastian
I set _R_CLASS_MATRIX_ARRAY_ to true in console and also in onLoad, but
could not replicate the error in console.
In addition, setting _R_CLASS_MATRIX_ARRAY_ to "" in onLoad did not
solve the problem while checking as cran.

I do not understand how the values I got from the debug print when checking
as cran could result in the error.

Any ideas?

On Thu, Nov 28, 2019 at 3:00 AM Sebastian Meyer <seb.meyer at fau.de> wrote:

> This is most likely related to the recently changed class of matrices.
>
> R> class(matrix(1))
>
> returned "matrix" but will return c("matrix", "array") in future
> versions of R. See the corresponding item in the R-devel NEWS
>
> https://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html
>
> To reproduce the error, you need a fairly recent R-devel and set the
> environment variable
>
> _R_CLASS_MATRIX_ARRAY_=true
>
> On CRAN, this configuration is currently only used in the two R-devel
> flavors which give warnings for your package.
>
> Happy debugging!
>
>         Sebastian
>
>
> Am 27.11.19 um 23:16 schrieb Fernando Roa:
> > After Ege answer, I could replicate the error(s): list' object cannot be
> > coerced to type 'double'
> > with CMD check: bash R-devel.sh CMD check --as-cran
> > idiogramFISH_1.9.1.tar.gz  in a vmware
> > debian guest with the r-devel (4.0) version of R installed after:
> > http://singmann.org/installing-r-devel-on-linux/
> >
> > Error does not occur in a R-devel console session installed
> > in /usr/local/lib/R-devel/bin
> >
> > After adding debug prints to the code, problem points to a mapply
> >
> > Here are the values I got with debug printing
> >
> > labelytoplot<-list(c(0.654545454545455, 0.654545454545455,
> > 0.763636363636364, 0.763636363636364), c(0.872727272727273,
> > 0.872727272727273, 0.981818181818182, 0.981818181818182),
> > c(1.09090909090909, 1.09090909090909, 1.2, 1.2), c(1.30909090909091,
> > 1.30909090909091, 1.41818181818182, 1.41818181818182))
> > labelxtoplot<-list(c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75,
> > 42.5), c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75, 42.5))
> > borders<-marks<-c("green","blue","yellow","black")
> >
> > CODE producing the error in R CMD check only:
> > # plot(1:50)
> > mapply(function(x,y,z,w) graphics::polygon(x=x,
> >                                            y=y,
> >                                            col=z,
> >                                            lwd=rep(.5,length(marks) )
> >                                            ,border=w
> > ),
> > x = labelxtoplot,
> > y = labelytoplot
> > ,z = marks
> > ,w = borders
> > )
> >
> > Grateful for any guidance ,
> >
> >
> >
> >
> >
> >
> > On Wed, Nov 27, 2019 at 8:34 AM Ege Rubak <rubak at math.aau.dk> wrote:
> >
> >> On 27/11/2019 00.22, Fernando Roa wrote:
> >>> - I used a guest debian 10 in vmware in my system, and couldn't
> replicate
> >>> the error installing with R CMD INSTALL ....
> >>
> >> I guess you should rather run "R CMD check ..." on the tar.gz file to
> >> reproduce the error.
> >>
> >> Hope that helps.
> >>
> >> /Ege
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> > Original message:
> > I got a warning only in debian after submitting package to CRAN.
> > I want to replicate the vignette warning of debian in the following link
> to
> > solve it:
> >
> > Debian:
> >
> https://win-builder.r-project.org/incoming_pretest/idiogramFISH_1.9.1_20191126_012524/Debian/00check.log
> > 1 WARNING
> >
> > Warning summary:
> > "checking re-building of vignette outputs ... [15s/17s] WARNING
> > Error(s) in re-building vignettes:
> > 'list' object cannot be coerced to type 'double'" several times
> > --
> >
> > - I used a guest debian 10 in vmware in my system, and couldn't replicate
> > the error installing with R CMD INSTALL ....
> >
> > - In R of host, I installed rhub and run
> > rhub::check_with_sanitizers() # success
> > rhub::check_on_debian() # does not work because of vignette dependencies
> > not installed
> > rhub::check(platform = "debian-gcc-devel") # does not work because of
> > vignette dependencies not installed
> >
> > https://pastebin.com/wwhbqcSw
> >
> > Grateful for any guidance
> >
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Thu Nov 28 18:16:12 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 28 Nov 2019 18:16:12 +0100
Subject: [R-pkg-devel] vignette error in debian
In-Reply-To: <CA+fi=+ktiKtwBMbSjOE71KhLTigaaJ6bGfPwFUwH6Y_tE1zt4w@mail.gmail.com>
References: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>
 <556264a8-b45b-6996-4a42-f43c4e5ca62e@math.aau.dk>
 <CA+fi=+m-gGhLqzCvzEtGg1+bVmCyx1GVhGCiBTtxrSyU+fQ-iw@mail.gmail.com>
 <b55457b1-3830-241a-187d-f0caef98d5a6@fau.de>
 <CA+fi=+ktiKtwBMbSjOE71KhLTigaaJ6bGfPwFUwH6Y_tE1zt4w@mail.gmail.com>
Message-ID: <5CE391A9-7204-4428-A388-BD0461CECA61@fau.de>

I was able to reproduce the vignette error in an R-devel session with this environment variable set. It came from a strange polygon() call with x and y arguments being matrices with list elements.

I cannot test at the moment. Maybe you condition on
class(something) == "matrix"
somewhere in your code? This should be replaced by 
inherits(something, "matrix")
since in future R, matrix objects also formally belong to the array class, so the class vector has length two. See the corresponding blog post by Martin M?chler for further details:
https://developer.r-project.org/Blog/public/2019/11/09/when-you-think-class.-think-again/index.html

Cheers, Sebastian

Am 28. November 2019 14:56:37 MEZ schrieb Fernando Roa <froao at unal.edu.co>:
>Thx Sebastian
>I set _R_CLASS_MATRIX_ARRAY_ to true in console and also in onLoad, but
>could not replicate the error in console.
>In addition, setting _R_CLASS_MATRIX_ARRAY_ to "" in onLoad did not
>solve the problem while checking as cran.
>
>I do not understand how the values I got from the debug print when
>checking
>as cran could result in the error.
>
>Any ideas?
>
>On Thu, Nov 28, 2019 at 3:00 AM Sebastian Meyer <seb.meyer at fau.de>
>wrote:
>
>> This is most likely related to the recently changed class of
>matrices.
>>
>> R> class(matrix(1))
>>
>> returned "matrix" but will return c("matrix", "array") in future
>> versions of R. See the corresponding item in the R-devel NEWS
>>
>> https://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html
>>
>> To reproduce the error, you need a fairly recent R-devel and set the
>> environment variable
>>
>> _R_CLASS_MATRIX_ARRAY_=true
>>
>> On CRAN, this configuration is currently only used in the two R-devel
>> flavors which give warnings for your package.
>>
>> Happy debugging!
>>
>>         Sebastian
>>
>>
>> Am 27.11.19 um 23:16 schrieb Fernando Roa:
>> > After Ege answer, I could replicate the error(s): list' object
>cannot be
>> > coerced to type 'double'
>> > with CMD check: bash R-devel.sh CMD check --as-cran
>> > idiogramFISH_1.9.1.tar.gz  in a vmware
>> > debian guest with the r-devel (4.0) version of R installed after:
>> > http://singmann.org/installing-r-devel-on-linux/
>> >
>> > Error does not occur in a R-devel console session installed
>> > in /usr/local/lib/R-devel/bin
>> >
>> > After adding debug prints to the code, problem points to a mapply
>> >
>> > Here are the values I got with debug printing
>> >
>> > labelytoplot<-list(c(0.654545454545455, 0.654545454545455,
>> > 0.763636363636364, 0.763636363636364), c(0.872727272727273,
>> > 0.872727272727273, 0.981818181818182, 0.981818181818182),
>> > c(1.09090909090909, 1.09090909090909, 1.2, 1.2),
>c(1.30909090909091,
>> > 1.30909090909091, 1.41818181818182, 1.41818181818182))
>> > labelxtoplot<-list(c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75,
>44.75,
>> > 42.5), c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75, 42.5))
>> > borders<-marks<-c("green","blue","yellow","black")
>> >
>> > CODE producing the error in R CMD check only:
>> > # plot(1:50)
>> > mapply(function(x,y,z,w) graphics::polygon(x=x,
>> >                                            y=y,
>> >                                            col=z,
>> >                                            lwd=rep(.5,length(marks)
>)
>> >                                            ,border=w
>> > ),
>> > x = labelxtoplot,
>> > y = labelytoplot
>> > ,z = marks
>> > ,w = borders
>> > )
>> >
>> > Grateful for any guidance ,
>> >
>> >
>> >
>> >
>> >
>> >
>> > On Wed, Nov 27, 2019 at 8:34 AM Ege Rubak <rubak at math.aau.dk>
>wrote:
>> >
>> >> On 27/11/2019 00.22, Fernando Roa wrote:
>> >>> - I used a guest debian 10 in vmware in my system, and couldn't
>> replicate
>> >>> the error installing with R CMD INSTALL ....
>> >>
>> >> I guess you should rather run "R CMD check ..." on the tar.gz file
>to
>> >> reproduce the error.
>> >>
>> >> Hope that helps.
>> >>
>> >> /Ege
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>> >
>> > Original message:
>> > I got a warning only in debian after submitting package to CRAN.
>> > I want to replicate the vignette warning of debian in the following
>link
>> to
>> > solve it:
>> >
>> > Debian:
>> >
>>
>https://win-builder.r-project.org/incoming_pretest/idiogramFISH_1.9.1_20191126_012524/Debian/00check.log
>> > 1 WARNING
>> >
>> > Warning summary:
>> > "checking re-building of vignette outputs ... [15s/17s] WARNING
>> > Error(s) in re-building vignettes:
>> > 'list' object cannot be coerced to type 'double'" several times
>> > --
>> >
>> > - I used a guest debian 10 in vmware in my system, and couldn't
>replicate
>> > the error installing with R CMD INSTALL ....
>> >
>> > - In R of host, I installed rhub and run
>> > rhub::check_with_sanitizers() # success
>> > rhub::check_on_debian() # does not work because of vignette
>dependencies
>> > not installed
>> > rhub::check(platform = "debian-gcc-devel") # does not work because
>of
>> > vignette dependencies not installed
>> >
>> > https://pastebin.com/wwhbqcSw
>> >
>> > Grateful for any guidance
>> >
>> >
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>


From @eb@meyer @end|ng |rom |@u@de  Thu Nov 28 18:21:32 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 28 Nov 2019 18:21:32 +0100
Subject: [R-pkg-devel] vignette error in debian
In-Reply-To: <5CE391A9-7204-4428-A388-BD0461CECA61@fau.de>
References: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>
 <556264a8-b45b-6996-4a42-f43c4e5ca62e@math.aau.dk>
 <CA+fi=+m-gGhLqzCvzEtGg1+bVmCyx1GVhGCiBTtxrSyU+fQ-iw@mail.gmail.com>
 <b55457b1-3830-241a-187d-f0caef98d5a6@fau.de>
 <CA+fi=+ktiKtwBMbSjOE71KhLTigaaJ6bGfPwFUwH6Y_tE1zt4w@mail.gmail.com>
 <5CE391A9-7204-4428-A388-BD0461CECA61@fau.de>
Message-ID: <8957FB23-0935-424C-AF61-5D99BFAE31A5@fau.de>

I forgot to mention: the code that you pasted in the email does not reproduce the error. The vignette actually runs different code. You need to run the code from the vignette to see the error (with the environment variable set).

Cheers, Sebastian

Am 28. November 2019 18:16:12 MEZ schrieb Sebastian Meyer <seb.meyer at fau.de>:
>I was able to reproduce the vignette error in an R-devel session with
>this environment variable set. It came from a strange polygon() call
>with x and y arguments being matrices with list elements.
>
>I cannot test at the moment. Maybe you condition on
>class(something) == "matrix"
>somewhere in your code? This should be replaced by 
>inherits(something, "matrix")
>since in future R, matrix objects also formally belong to the array
>class, so the class vector has length two. See the corresponding blog
>post by Martin M?chler for further details:
>https://developer.r-project.org/Blog/public/2019/11/09/when-you-think-class.-think-again/index.html
>
>Cheers, Sebastian
>
>Am 28. November 2019 14:56:37 MEZ schrieb Fernando Roa
><froao at unal.edu.co>:
>>Thx Sebastian
>>I set _R_CLASS_MATRIX_ARRAY_ to true in console and also in onLoad,
>but
>>could not replicate the error in console.
>>In addition, setting _R_CLASS_MATRIX_ARRAY_ to "" in onLoad did not
>>solve the problem while checking as cran.
>>
>>I do not understand how the values I got from the debug print when
>>checking
>>as cran could result in the error.
>>
>>Any ideas?
>>
>>On Thu, Nov 28, 2019 at 3:00 AM Sebastian Meyer <seb.meyer at fau.de>
>>wrote:
>>
>>> This is most likely related to the recently changed class of
>>matrices.
>>>
>>> R> class(matrix(1))
>>>
>>> returned "matrix" but will return c("matrix", "array") in future
>>> versions of R. See the corresponding item in the R-devel NEWS
>>>
>>> https://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html
>>>
>>> To reproduce the error, you need a fairly recent R-devel and set the
>>> environment variable
>>>
>>> _R_CLASS_MATRIX_ARRAY_=true
>>>
>>> On CRAN, this configuration is currently only used in the two
>R-devel
>>> flavors which give warnings for your package.
>>>
>>> Happy debugging!
>>>
>>>         Sebastian
>>>
>>>
>>> Am 27.11.19 um 23:16 schrieb Fernando Roa:
>>> > After Ege answer, I could replicate the error(s): list' object
>>cannot be
>>> > coerced to type 'double'
>>> > with CMD check: bash R-devel.sh CMD check --as-cran
>>> > idiogramFISH_1.9.1.tar.gz  in a vmware
>>> > debian guest with the r-devel (4.0) version of R installed after:
>>> > http://singmann.org/installing-r-devel-on-linux/
>>> >
>>> > Error does not occur in a R-devel console session installed
>>> > in /usr/local/lib/R-devel/bin
>>> >
>>> > After adding debug prints to the code, problem points to a mapply
>>> >
>>> > Here are the values I got with debug printing
>>> >
>>> > labelytoplot<-list(c(0.654545454545455, 0.654545454545455,
>>> > 0.763636363636364, 0.763636363636364), c(0.872727272727273,
>>> > 0.872727272727273, 0.981818181818182, 0.981818181818182),
>>> > c(1.09090909090909, 1.09090909090909, 1.2, 1.2),
>>c(1.30909090909091,
>>> > 1.30909090909091, 1.41818181818182, 1.41818181818182))
>>> > labelxtoplot<-list(c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75,
>>44.75,
>>> > 42.5), c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75, 42.5))
>>> > borders<-marks<-c("green","blue","yellow","black")
>>> >
>>> > CODE producing the error in R CMD check only:
>>> > # plot(1:50)
>>> > mapply(function(x,y,z,w) graphics::polygon(x=x,
>>> >                                            y=y,
>>> >                                            col=z,
>>> >                                           
>lwd=rep(.5,length(marks)
>>)
>>> >                                            ,border=w
>>> > ),
>>> > x = labelxtoplot,
>>> > y = labelytoplot
>>> > ,z = marks
>>> > ,w = borders
>>> > )
>>> >
>>> > Grateful for any guidance ,
>>> >
>>> >
>>> >
>>> >
>>> >
>>> >
>>> > On Wed, Nov 27, 2019 at 8:34 AM Ege Rubak <rubak at math.aau.dk>
>>wrote:
>>> >
>>> >> On 27/11/2019 00.22, Fernando Roa wrote:
>>> >>> - I used a guest debian 10 in vmware in my system, and couldn't
>>> replicate
>>> >>> the error installing with R CMD INSTALL ....
>>> >>
>>> >> I guess you should rather run "R CMD check ..." on the tar.gz
>file
>>to
>>> >> reproduce the error.
>>> >>
>>> >> Hope that helps.
>>> >>
>>> >> /Ege
>>> >>
>>> >> ______________________________________________
>>> >> R-package-devel at r-project.org mailing list
>>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >
>>> >
>>> > Original message:
>>> > I got a warning only in debian after submitting package to CRAN.
>>> > I want to replicate the vignette warning of debian in the
>following
>>link
>>> to
>>> > solve it:
>>> >
>>> > Debian:
>>> >
>>>
>>https://win-builder.r-project.org/incoming_pretest/idiogramFISH_1.9.1_20191126_012524/Debian/00check.log
>>> > 1 WARNING
>>> >
>>> > Warning summary:
>>> > "checking re-building of vignette outputs ... [15s/17s] WARNING
>>> > Error(s) in re-building vignettes:
>>> > 'list' object cannot be coerced to type 'double'" several times
>>> > --
>>> >
>>> > - I used a guest debian 10 in vmware in my system, and couldn't
>>replicate
>>> > the error installing with R CMD INSTALL ....
>>> >
>>> > - In R of host, I installed rhub and run
>>> > rhub::check_with_sanitizers() # success
>>> > rhub::check_on_debian() # does not work because of vignette
>>dependencies
>>> > not installed
>>> > rhub::check(platform = "debian-gcc-devel") # does not work because
>>of
>>> > vignette dependencies not installed
>>> >
>>> > https://pastebin.com/wwhbqcSw
>>> >
>>> > Grateful for any guidance
>>> >
>>> >
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>

-- 
Dr. Sebastian Meyer
Friedrich-Alexander-Universit?t Erlangen-N?rnberg (FAU)
Institut f?r Medizininformatik, Biometrie und Epidemiologie (IMBE)

Tel. +49 9131 85-22707


From |ro@o @end|ng |rom un@|@edu@co  Thu Nov 28 19:48:25 2019
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Thu, 28 Nov 2019 13:48:25 -0500
Subject: [R-pkg-devel] vignette error in debian
In-Reply-To: <5CE391A9-7204-4428-A388-BD0461CECA61@fau.de>
References: <CA+fi=+mq25JswXR__=83sbAQPU12_B83OVAzGN89euD8D=s2dQ@mail.gmail.com>
 <556264a8-b45b-6996-4a42-f43c4e5ca62e@math.aau.dk>
 <CA+fi=+m-gGhLqzCvzEtGg1+bVmCyx1GVhGCiBTtxrSyU+fQ-iw@mail.gmail.com>
 <b55457b1-3830-241a-187d-f0caef98d5a6@fau.de>
 <CA+fi=+ktiKtwBMbSjOE71KhLTigaaJ6bGfPwFUwH6Y_tE1zt4w@mail.gmail.com>
 <5CE391A9-7204-4428-A388-BD0461CECA61@fau.de>
Message-ID: <CA+fi=+ka4=noBa372Pq5eq6Dq-upZC1nrEitUu1kcVUGds6JrQ@mail.gmail.com>

This was exactly what needed to be done. (inherits in conditional)
Thank you ,

Issue Closed.
Best,

On Thu, Nov 28, 2019 at 12:16 PM Sebastian Meyer <seb.meyer at fau.de> wrote:

> I was able to reproduce the vignette error in an R-devel session with this
> environment variable set. It came from a strange polygon() call with x and
> y arguments being matrices with list elements.
>
> I cannot test at the moment. Maybe you condition on
> class(something) == "matrix"
> somewhere in your code? This should be replaced by
> inherits(something, "matrix")
> since in future R, matrix objects also formally belong to the array class,
> so the class vector has length two. See the corresponding blog post by
> Martin M?chler for further details:
>
> https://developer.r-project.org/Blog/public/2019/11/09/when-you-think-class.-think-again/index.html
>
> Cheers, Sebastian
>
> Am 28. November 2019 14:56:37 MEZ schrieb Fernando Roa <froao at unal.edu.co
> >:
> >Thx Sebastian
> >I set _R_CLASS_MATRIX_ARRAY_ to true in console and also in onLoad, but
> >could not replicate the error in console.
> >In addition, setting _R_CLASS_MATRIX_ARRAY_ to "" in onLoad did not
> >solve the problem while checking as cran.
> >
> >I do not understand how the values I got from the debug print when
> >checking
> >as cran could result in the error.
> >
> >Any ideas?
> >
> >On Thu, Nov 28, 2019 at 3:00 AM Sebastian Meyer <seb.meyer at fau.de>
> >wrote:
> >
> >> This is most likely related to the recently changed class of
> >matrices.
> >>
> >> R> class(matrix(1))
> >>
> >> returned "matrix" but will return c("matrix", "array") in future
> >> versions of R. See the corresponding item in the R-devel NEWS
> >>
> >> https://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html
> >>
> >> To reproduce the error, you need a fairly recent R-devel and set the
> >> environment variable
> >>
> >> _R_CLASS_MATRIX_ARRAY_=true
> >>
> >> On CRAN, this configuration is currently only used in the two R-devel
> >> flavors which give warnings for your package.
> >>
> >> Happy debugging!
> >>
> >>         Sebastian
> >>
> >>
> >> Am 27.11.19 um 23:16 schrieb Fernando Roa:
> >> > After Ege answer, I could replicate the error(s): list' object
> >cannot be
> >> > coerced to type 'double'
> >> > with CMD check: bash R-devel.sh CMD check --as-cran
> >> > idiogramFISH_1.9.1.tar.gz  in a vmware
> >> > debian guest with the r-devel (4.0) version of R installed after:
> >> > http://singmann.org/installing-r-devel-on-linux/
> >> >
> >> > Error does not occur in a R-devel console session installed
> >> > in /usr/local/lib/R-devel/bin
> >> >
> >> > After adding debug prints to the code, problem points to a mapply
> >> >
> >> > Here are the values I got with debug printing
> >> >
> >> > labelytoplot<-list(c(0.654545454545455, 0.654545454545455,
> >> > 0.763636363636364, 0.763636363636364), c(0.872727272727273,
> >> > 0.872727272727273, 0.981818181818182, 0.981818181818182),
> >> > c(1.09090909090909, 1.09090909090909, 1.2, 1.2),
> >c(1.30909090909091,
> >> > 1.30909090909091, 1.41818181818182, 1.41818181818182))
> >> > labelxtoplot<-list(c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75,
> >44.75,
> >> > 42.5), c(42.5, 44.75, 44.75, 42.5), c(42.5, 44.75, 44.75, 42.5))
> >> > borders<-marks<-c("green","blue","yellow","black")
> >> >
> >> > CODE producing the error in R CMD check only:
> >> > # plot(1:50)
> >> > mapply(function(x,y,z,w) graphics::polygon(x=x,
> >> >                                            y=y,
> >> >                                            col=z,
> >> >                                            lwd=rep(.5,length(marks)
> >)
> >> >                                            ,border=w
> >> > ),
> >> > x = labelxtoplot,
> >> > y = labelytoplot
> >> > ,z = marks
> >> > ,w = borders
> >> > )
> >> >
> >> > Grateful for any guidance ,
> >> >
> >> >
> >> >
> >> >
> >> >
> >> >
> >> > On Wed, Nov 27, 2019 at 8:34 AM Ege Rubak <rubak at math.aau.dk>
> >wrote:
> >> >
> >> >> On 27/11/2019 00.22, Fernando Roa wrote:
> >> >>> - I used a guest debian 10 in vmware in my system, and couldn't
> >> replicate
> >> >>> the error installing with R CMD INSTALL ....
> >> >>
> >> >> I guess you should rather run "R CMD check ..." on the tar.gz file
> >to
> >> >> reproduce the error.
> >> >>
> >> >> Hope that helps.
> >> >>
> >> >> /Ege
> >> >>
> >> >> ______________________________________________
> >> >> R-package-devel at r-project.org mailing list
> >> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> >
> >> >
> >> > Original message:
> >> > I got a warning only in debian after submitting package to CRAN.
> >> > I want to replicate the vignette warning of debian in the following
> >link
> >> to
> >> > solve it:
> >> >
> >> > Debian:
> >> >
> >>
> >
> https://win-builder.r-project.org/incoming_pretest/idiogramFISH_1.9.1_20191126_012524/Debian/00check.log
> >> > 1 WARNING
> >> >
> >> > Warning summary:
> >> > "checking re-building of vignette outputs ... [15s/17s] WARNING
> >> > Error(s) in re-building vignettes:
> >> > 'list' object cannot be coerced to type 'double'" several times
> >> > --
> >> >
> >> > - I used a guest debian 10 in vmware in my system, and couldn't
> >replicate
> >> > the error installing with R CMD INSTALL ....
> >> >
> >> > - In R of host, I installed rhub and run
> >> > rhub::check_with_sanitizers() # success
> >> > rhub::check_on_debian() # does not work because of vignette
> >dependencies
> >> > not installed
> >> > rhub::check(platform = "debian-gcc-devel") # does not work because
> >of
> >> > vignette dependencies not installed
> >> >
> >> > https://pastebin.com/wwhbqcSw
> >> >
> >> > Grateful for any guidance
> >> >
> >> >
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
>


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From tom@@@k||egr @end|ng |rom v@e@cz  Fri Nov 29 15:40:33 2019
From: tom@@@k||egr @end|ng |rom v@e@cz (=?utf-8?B?VG9tw6HFoSBLbGllZ3I=?=)
Date: Fri, 29 Nov 2019 14:40:33 +0000
Subject: [R-pkg-devel] Updating package with a dependency (rJava) that
 doesn't build on all flavours
In-Reply-To: <HE1PR0602MB36274F8E7092E89E4109A93FF9710@HE1PR0602MB3627.eurprd06.prod.outlook.com>
References: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <HE1PR0602MB36272F96177E059BD295AEC7F9760@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <265e9e7d-a720-41ce-915d-3232533ac592@gmail.com>
 <AM6PR0602MB36214637ED42613B53FB21E8F9760@AM6PR0602MB3621.eurprd06.prod.outlook.com>,
 <CAA1+RSFga=CrnAU64kr9n01LofxSfF7xZUruL3ir+yr4aSecWQ@mail.gmail.com>,
 <HE1PR0602MB36274F8E7092E89E4109A93FF9710@HE1PR0602MB3627.eurprd06.prod.outlook.com>
Message-ID: <HE1PR0602MB36277F7FB4CA70A5C3A7965CF9460@HE1PR0602MB3627.eurprd06.prod.outlook.com>

Hi,

Just a brief update: It seems that this problem still persists and indeed prevents updates of multiple packages in CRAN.
I, therefore, setup a GitHub issue for it here: https://github.com/s-u/rJava/issues/203#issuecomment-557927860

Tomas



________________________________
Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
Odesl?no: ?tvrtek 14. listopadu 2019 16:52
Komu: Kevin Kuo <kevinykuo at gmail.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours

Hi,

>https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html

Yes, it is almost certainly the same issue as this one reported in October 2019. It seems that the policy must have changed sometime around September. As follows from "Reverse depends" of rJava, packages depending on rJava were successfully updated in mid-2019. The most recently updated package was apparently Crossover in May 2019.

Tomas
________________________________
Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Kevin Kuo <kevinykuo at gmail.com>
Odesl?no: st?eda 13. listopadu 2019 19:54
Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours

FYI see also
https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html

On Wed, Nov 13, 2019 at 10:52 AM Tom?? Kliegr <tomas.kliegr at vse.cz> wrote:

> Hi,
>
> >This is probably a temporary Java installation problem on a CRAN Windows
> machine, CRAN-submissions at r-project.org is the right place to report
> this, please be patient.
>
> I am  not sure this is the case, to me it looks like a recent policy
> change. The rJava builds were not going through on this particular machine
> for quite some time, and this had no effect on the updates of packages
> depending on rJava being accepted. Now, they seem to get automatically
> rejected. Regarding the email to CRAN-submissions at r-project.org, I sent
> it a week ago, but maybe this just takes longer than I though.. will wait,
>
> It is also possible that I am overlooking something important...
>
> Best,
>
> Tomas
>
> ________________________________
> Od: Tomas Kalibera <tomas.kalibera at gmail.com>
> Odesl?no: st?eda 13. listopadu 2019 11:03
> Komu: Tom?? Kliegr <tomas.kliegr at vse.cz>; r-package-devel at r-project.org <
> r-package-devel at r-project.org>
> P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that
> doesn't build on all flavours
>
> On 11/13/19 10:19 AM, Tom?? Kliegr wrote:
> > Hello,
> >
> > This question has not stirred much discussion ... If this is the wrong
> place to ask,  I was wondering if some one point me to where I should ask,
> or who to approach?  If I understand this issue correctly, it does not
> affect only my package, but also the maintainers of 50+ other packages that
> depend on rJava when they will try to update the package.
> >
> > So far I tried putting the explanation to the comment field when
> submitting the update, and I also tried emailing
> CRAN-submissions at r-project.org, but that was also without response so far.
>
> This is probably a temporary Java installation problem on a CRAN Windows
> machine, CRAN-submissions at r-project.org is the right place to report
> this, please be patient.
>
> Thanks
> Tomas
>
> >
> > Thanks for any pointers,
> >
> > Tomas
> > ________________________________
> > Od: R-package-devel <r-package-devel-bounces at r-project.org> za
> u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
> > Odesl?no: pond?l? 11. listopadu 2019 11:09
> > Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
> > P?edm?t: [R-pkg-devel] Updating package with a dependency (rJava) that
> doesn't build on all flavours
> >
> > Hi,
> >
> > I maintain a package in CRAN, for which I am struggling to push the
> latest updates.
> >
> > The problem is as follows:
> > My package passes tests without error or notice on all flavors but one,
> where the install fails due to an installation error of a dependency
> package (package rJava on r-devel-windows-ix86+x86_64). This installation
> error was already there in the past submissions of my package to CRAN, and
> was not previously considered as a blocker to the package (or its updates)
> being accepted (Current CRAN status: ERROR: 1, OK: 10)
> >
> > Now, the package updates are automatically rejected:
> >
> > xxxx
> >
> > package qCBA_0.4.tar.gz does not pass the incoming checks automatically,
> please see the following pre-tests:
> > Windows: <
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Windows/00check.log
> >
> > Status: 1 ERROR
> > Debian: <
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Debian/00check.log
> >
> > Status: OK
> >
> > xxxx
> >
> > I cannot fix the problem with the dependency (rJava), and I also cannot
> remove rJava from my package.
> >
> > More details:
> > Installation of  rJava package fails on 32-bit Windows, as can be seen
> here:
> >
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191106_094406/Windows/00install.out
> ("keine zul?ssige Win32-Anwendung" error)
> > This problem seems to apply generally to the rJava package, not just to
> its use in my package:
> https://cran.r-project.org/web/checks/check_results_rJava.html.
> >
> > I've also described this in the "Optional comment" field.
> >
> > Any help is appreciated,
> >
> > Tomas
> >
> >
> >
> >          [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From youy||ong @end|ng |rom gm@||@com  Fri Nov 29 17:58:03 2019
From: youy||ong @end|ng |rom gm@||@com (Youyi Fong)
Date: Fri, 29 Nov 2019 08:58:03 -0800
Subject: [R-pkg-devel] how to change from -fsanitize=undefined to
 -fsanitize=address
Message-ID: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>

Hello, I would like to reproduce this error locally:
https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-ASAN/chngpt/00check.log

I followed the tutorial at http://dirk.eddelbuettel.com/code/sanitizers.html,
but what happened to me was not
g++-4.9 -fsanitize=address -I/usr/local/lib/R/include -DNDEBUG
 -I/usr/local/include    -fpic  -pipe -Wall -pedantic -O3  -c
heap_address.cpp -o heap_address.o
but
g++-4.9 -fsanitize=undefined -I/usr/local/lib/R/include -DNDEBUG
 -I/usr/local/include    -fpic  -pipe -Wall -pedantic -O3  -c
heap_address.cpp -o heap_address.o

And when I test my package, chngpt, I was not able to reproduce the
error on CRAN. I am guessing that if change the compiler option from
-fsanitize=undefined to -fsanitize=address, I might be able to reproduce
the error. My question is how. Thanks!

Youyi Fong

--------------------------------------------------------------
Fred Hutchinson Cancer Research Center
Seattle, WA

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Nov 29 18:49:00 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 29 Nov 2019 18:49:00 +0100
Subject: [R-pkg-devel] how to change from -fsanitize=undefined to
 -fsanitize=address
In-Reply-To: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>
References: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>
Message-ID: <d388ec7f-23aa-242d-06cc-c624a3fa0a9f@statistik.tu-dortmund.de>

See section 4.3.3 "Using the Address Sanitizer" in Writing R Extensions.

Best,
Uwe Ligges

On 29.11.2019 17:58, Youyi Fong wrote:
> Hello, I would like to reproduce this error locally:
> https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-ASAN/chngpt/00check.log
> 
> I followed the tutorial at http://dirk.eddelbuettel.com/code/sanitizers.html,
> but what happened to me was not
> g++-4.9 -fsanitize=address -I/usr/local/lib/R/include -DNDEBUG
>   -I/usr/local/include    -fpic  -pipe -Wall -pedantic -O3  -c
> heap_address.cpp -o heap_address.o
> but
> g++-4.9 -fsanitize=undefined -I/usr/local/lib/R/include -DNDEBUG
>   -I/usr/local/include    -fpic  -pipe -Wall -pedantic -O3  -c
> heap_address.cpp -o heap_address.o
> 
> And when I test my package, chngpt, I was not able to reproduce the
> error on CRAN. I am guessing that if change the compiler option from
> -fsanitize=undefined to -fsanitize=address, I might be able to reproduce
> the error. My question is how. Thanks!
> 
> Youyi Fong
> 
> --------------------------------------------------------------
> Fred Hutchinson Cancer Research Center
> Seattle, WA
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From youy||ong @end|ng |rom gm@||@com  Fri Nov 29 18:58:01 2019
From: youy||ong @end|ng |rom gm@||@com (Youyi Fong)
Date: Fri, 29 Nov 2019 09:58:01 -0800
Subject: [R-pkg-devel] how to change from -fsanitize=undefined to
 -fsanitize=address
In-Reply-To: <d388ec7f-23aa-242d-06cc-c624a3fa0a9f@statistik.tu-dortmund.de>
References: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>
 <d388ec7f-23aa-242d-06cc-c624a3fa0a9f@statistik.tu-dortmund.de>
Message-ID: <CAA4m0GayOpdH11z8bXM50M_vFZzS7Ss_KiKZyKERNY7M-rRBcw@mail.gmail.com>

Thanks. I was wondering how to do that within the context of docker
containers. In the tutorial
http://dirk.eddelbuettel.com/code/sanitizers.html, one calls the prebuilt
Rdevel:

# Rdevel CMD INSTALL sanitizers_0.1.0.tar.gz

and get

* installing to library '/usr/local/lib/R/site-library'
* installing *source* package 'sanitizers' ...
** package 'sanitizers' successfully unpacked and MD5 sums checked
** libs
g++-4.9 -fsanitize=address -I/usr/local/lib/R/include -DNDEBUG
-I/usr/local/include    -fpic  -pipe -Wall -pedantic -O3  -c
heap_address.cpp -o heap_address.o
g++-4.9 -fsanitize=address -I/usr/local/lib/R/include -DNDEBUG
-I/usr/local/include    -fpic  -pipe -Wall -pedantic -O3  -c
stack_address.cpp -o stack_address.o
g++-4.9 -fsanitize=address -shared -L/usr/local/lib/R/lib
-L/usr/local/lib -o sanitizers.so heap_address.o stack_address.o
-L/usr/local/lib/R/lib -lR
installing to /usr/local/lib/R/site-library/sanitizers/libs
** R
** inst


But the same thing does not happen to me. I got -fsanitize=undefined
instead. I did try modifying Makevars, but it did not seem to have an
effect.





On Fri, Nov 29, 2019 at 9:48 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> See section 4.3.3 "Using the Address Sanitizer" in Writing R Extensions.
>
> Best,
> Uwe Ligges
>
> On 29.11.2019 17:58, Youyi Fong wrote:
> > Hello, I would like to reproduce this error locally:
> >
> https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-ASAN/chngpt/00check.log
> >
> > I followed the tutorial at
> http://dirk.eddelbuettel.com/code/sanitizers.html,
> > but what happened to me was not
> > g++-4.9 -fsanitize=address -I/usr/local/lib/R/include -DNDEBUG
> >   -I/usr/local/include    -fpic  -pipe -Wall -pedantic -O3  -c
> > heap_address.cpp -o heap_address.o
> > but
> > g++-4.9 -fsanitize=undefined -I/usr/local/lib/R/include -DNDEBUG
> >   -I/usr/local/include    -fpic  -pipe -Wall -pedantic -O3  -c
> > heap_address.cpp -o heap_address.o
> >
> > And when I test my package, chngpt, I was not able to reproduce the
> > error on CRAN. I am guessing that if change the compiler option from
> > -fsanitize=undefined to -fsanitize=address, I might be able to reproduce
> > the error. My question is how. Thanks!
> >
> > Youyi Fong
> >
> > --------------------------------------------------------------
> > Fred Hutchinson Cancer Research Center
> > Seattle, WA
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Nov 29 19:46:32 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 29 Nov 2019 12:46:32 -0600
Subject: [R-pkg-devel] how to change from -fsanitize=undefined to
 -fsanitize=address
In-Reply-To: <CAA4m0GayOpdH11z8bXM50M_vFZzS7Ss_KiKZyKERNY7M-rRBcw@mail.gmail.com>
References: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>
 <d388ec7f-23aa-242d-06cc-c624a3fa0a9f@statistik.tu-dortmund.de>
 <CAA4m0GayOpdH11z8bXM50M_vFZzS7Ss_KiKZyKERNY7M-rRBcw@mail.gmail.com>
Message-ID: <24033.26504.11840.421163@rob.eddelbuettel.com>


Youyi,

It looks like you are trying to debug a _current_ SAN / ASAN / UBSAN error
against your package by leaning on documentation I wrote five years ago
specifically for another package (called "sanitizers") used to validate the
initial Docker container builds I made (and to ensure the error these
SAN/ASAN/UBSAN containers were supposed to trigger were triggered).

Today, your quickest bet to launch a sanitizer run may be via the rhub
platforms.  Clearly the easiest to launch ("no download"), but at times a
little inconsistent.  An alternative is the suite of containers maintained by
Winston described at their repo at https://github.com/wch/r-debug at
available from the Docker Hub.

All that said, exact configurations matters and the fact remains that we all
still haven't managed to automatically provide the configurations used by
CRAN. There are possible "gaps" between what CRAN uses and what may be
available pre-built: compiler versions, builds, sanitizer options, ... and
these can be enough to not replicate an issue.  I think I would try Winston's
r-debug next.

Hope this helps, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From youy||ong @end|ng |rom gm@||@com  Fri Nov 29 22:48:50 2019
From: youy||ong @end|ng |rom gm@||@com (Youyi Fong)
Date: Fri, 29 Nov 2019 13:48:50 -0800
Subject: [R-pkg-devel] how to change from -fsanitize=undefined to
 -fsanitize=address
In-Reply-To: <24033.26504.11840.421163@rob.eddelbuettel.com>
References: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>
 <d388ec7f-23aa-242d-06cc-c624a3fa0a9f@statistik.tu-dortmund.de>
 <CAA4m0GayOpdH11z8bXM50M_vFZzS7Ss_KiKZyKERNY7M-rRBcw@mail.gmail.com>
 <24033.26504.11840.421163@rob.eddelbuettel.com>
Message-ID: <CAA4m0GaAB=6NoXu3VcMyx-j2K+Sj8gQefD4yMxPF9w=NGV-bzg@mail.gmail.com>

Hi Dirk,

Thanks very much. Following your suggestion, I tried r-debug, following the
readme on https://github.com/wch/r-debug. After starting docker as
recommended,

docker run --rm -ti --security-opt seccomp=unconfined wch1/r-debug

I was able to call RD. But calling RDsan or RDcsan resulted in errors:

root at 258bfdfcce6c:/# RDsan
==17==ERROR: AddressSanitizer failed to allocate 0xdfff0001000
(15392894357504) bytes at address 2008fff7000 (errno: 12)
==17==ReserveShadowMemoryRange failed while trying to map 0xdfff0001000
bytes. Perhaps you're using ulimit -v
Aborted (core dumped)


I have also tried rhub before, following this article:
https://cran.r-project.org/web/packages/rhub/vignettes/local-debugging.html As
you indicated, it may have worked for others, but got the following error:

>>>>>==================== Installing system requirements
3b3a65d751c026b7629d2038242c92290cf97853525978381b6e59f41c8500d3

>>>>>==================== Starting Docker container
04d6065323ef732bf89c26df7d547efff40774206a0ac6a24b3d9cdb021cb08e
ls: cannot access '/opt/R-*': No such file or directory
> source('https://bioconductor.org/biocLite.R')
Error: With R version 3.5 or greater, install Bioconductor packages using
BiocManager; see https://bioconductor.org/install
Execution halted
Error in run(bash, c(file.path(wd, "rhub-linux.sh"), args), echo = TRUE,  :
  System command error



This is where I am stuck at right now.

Thanks,
Youyi


On Fri, Nov 29, 2019 at 10:46 AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Youyi,
>
> It looks like you are trying to debug a _current_ SAN / ASAN / UBSAN error
> against your package by leaning on documentation I wrote five years ago
> specifically for another package (called "sanitizers") used to validate the
> initial Docker container builds I made (and to ensure the error these
> SAN/ASAN/UBSAN containers were supposed to trigger were triggered).
>
> Today, your quickest bet to launch a sanitizer run may be via the rhub
> platforms.  Clearly the easiest to launch ("no download"), but at times a
> little inconsistent.  An alternative is the suite of containers maintained
> by
> Winston described at their repo at https://github.com/wch/r-debug at
> available from the Docker Hub.
>
> All that said, exact configurations matters and the fact remains that we
> all
> still haven't managed to automatically provide the configurations used by
> CRAN. There are possible "gaps" between what CRAN uses and what may be
> available pre-built: compiler versions, builds, sanitizer options, ... and
> these can be enough to not replicate an issue.  I think I would try
> Winston's
> r-debug next.
>
> Hope this helps, Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From yon|cd @end|ng |rom gm@||@com  Sat Nov 30 13:02:04 2019
From: yon|cd @end|ng |rom gm@||@com (Yoni)
Date: Sat, 30 Nov 2019 07:02:04 -0500
Subject: [R-pkg-devel] winOS devel failure "knitr not available" on resubmit
Message-ID: <CAAhB0MWYuJN7gX=aC+c9c0We2Pd9_ohYd0pVHo+u0ZAK9ty2Ng@mail.gmail.com>

I have recently resubmitted a package after fixing an issue with the
license. The package passed all the checks a few days prior and on this
resubmit the winOS failed with a message that I am not sure how to resolve.

* checking package dependencies ... ERROR
Package suggested but not available for checking:
'knitr'VignetteBuilder package required for checking but not
installed: 'knitr'

https://win-builder.r-project.org/incoming_pretest/ripe_0.1.0_20191130_120421/Windows/00check.log

The DESCRIPTION file seems to contain the correct Imports and Suggests
that have not raised issues up until this point on checks.Depends: R
(>= 3.5.0)

Imports: magrittrSuggests:
 testthat,
 knitr,
 rmarkdown,
 purrr,
 parallel,
 dplyr,
 covr
VignetteBuilder: knitr

Thank you

Yoni

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Nov 30 14:29:19 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 30 Nov 2019 08:29:19 -0500
Subject: [R-pkg-devel] 
 winOS devel failure "knitr not available" on resubmit
In-Reply-To: <CAAhB0MWYuJN7gX=aC+c9c0We2Pd9_ohYd0pVHo+u0ZAK9ty2Ng@mail.gmail.com>
References: <CAAhB0MWYuJN7gX=aC+c9c0We2Pd9_ohYd0pVHo+u0ZAK9ty2Ng@mail.gmail.com>
Message-ID: <68f6e26c-bf51-7552-f626-a0781f4852f8@gmail.com>

On 30/11/2019 7:02 a.m., Yoni wrote:
> I have recently resubmitted a package after fixing an issue with the
> license. The package passed all the checks a few days prior and on this
> resubmit the winOS failed with a message that I am not sure how to resolve.
> 
> * checking package dependencies ... ERROR
> Package suggested but not available for checking:
> 'knitr'VignetteBuilder package required for checking but not
> installed: 'knitr'
> 
> https://win-builder.r-project.org/incoming_pretest/ripe_0.1.0_20191130_120421/Windows/00check.log
> 
> The DESCRIPTION file seems to contain the correct Imports and Suggests
> that have not raised issues up until this point on checks.Depends: R
> (>= 3.5.0)
> 
> Imports: magrittrSuggests:
>   testthat,
>   knitr,
>   rmarkdown,
>   purrr,
>   parallel,
>   dplyr,
>   covr
> VignetteBuilder: knitr
> 

Assuming the joined lines "Imports: magrittrSuggests:" are just in your 
email, not in the DESCRIPTION file (you used HTML, which generally gets 
mangled here), that's likely a transient error on the test system.  I 
would resubmit.

Duncan Murdoch


From yon|cd @end|ng |rom gm@||@com  Sat Nov 30 15:05:06 2019
From: yon|cd @end|ng |rom gm@||@com (Yoni)
Date: Sat, 30 Nov 2019 09:05:06 -0500
Subject: [R-pkg-devel] 
 winOS devel failure "knitr not available" on resubmit
In-Reply-To: <68f6e26c-bf51-7552-f626-a0781f4852f8@gmail.com>
References: <CAAhB0MWYuJN7gX=aC+c9c0We2Pd9_ohYd0pVHo+u0ZAK9ty2Ng@mail.gmail.com>
 <68f6e26c-bf51-7552-f626-a0781f4852f8@gmail.com>
Message-ID: <CAAhB0MVVW6DqeURmUe1G5tsuNqXo1oZTKcrHGz173KGrCj5XOw@mail.gmail.com>

Thank you for the advice.

I resubmitted to win-devel 20 minutes ago (0840 EST) and that error seems
to be persisting.

https://win-builder.r-project.org/Htqi1hmm4O20/00check.log

here is the link to the full DESCRIPTION file

https://raw.githubusercontent.com/yonicd/ripe/master/DESCRIPTION

That is the same system that CRAN checks for winOS will use?

Thank you

On Sat, Nov 30, 2019 at 8:29 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 30/11/2019 7:02 a.m., Yoni wrote:
> > I have recently resubmitted a package after fixing an issue with the
> > license. The package passed all the checks a few days prior and on this
> > resubmit the winOS failed with a message that I am not sure how to
> resolve.
> >
> > * checking package dependencies ... ERROR
> > Package suggested but not available for checking:
> > 'knitr'VignetteBuilder package required for checking but not
> > installed: 'knitr'
> >
> >
> https://win-builder.r-project.org/incoming_pretest/ripe_0.1.0_20191130_120421/Windows/00check.log
> >
> > The DESCRIPTION file seems to contain the correct Imports and Suggests
> > that have not raised issues up until this point on checks.Depends: R
> > (>= 3.5.0)
> >
> > Imports: magrittrSuggests:
> >   testthat,
> >   knitr,
> >   rmarkdown,
> >   purrr,
> >   parallel,
> >   dplyr,
> >   covr
> > VignetteBuilder: knitr
> >
>
> Assuming the joined lines "Imports: magrittrSuggests:" are just in your
> email, not in the DESCRIPTION file (you used HTML, which generally gets
> mangled here), that's likely a transient error on the test system.  I
> would resubmit.
>
> Duncan Murdoch
>


-- 
Yoni

You do not learn to swim from books and lectures on the theory of buoyancy
(Box 1990)

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Nov 30 15:12:39 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 30 Nov 2019 09:12:39 -0500
Subject: [R-pkg-devel] 
 winOS devel failure "knitr not available" on resubmit
In-Reply-To: <CAAhB0MVVW6DqeURmUe1G5tsuNqXo1oZTKcrHGz173KGrCj5XOw@mail.gmail.com>
References: <CAAhB0MWYuJN7gX=aC+c9c0We2Pd9_ohYd0pVHo+u0ZAK9ty2Ng@mail.gmail.com>
 <68f6e26c-bf51-7552-f626-a0781f4852f8@gmail.com>
 <CAAhB0MVVW6DqeURmUe1G5tsuNqXo1oZTKcrHGz173KGrCj5XOw@mail.gmail.com>
Message-ID: <f2f38ec0-9faa-327a-e03b-002f3db6c64e@gmail.com>

On 30/11/2019 9:05 a.m., Yoni wrote:
> Thank you for the advice.
> 
> I resubmitted to win-devel 20 minutes ago (0840 EST) and that error 
> seems to be persisting.
> 
> https://win-builder.r-project.org/Htqi1hmm4O20/00check.log
> 
> here is the link to the full DESCRIPTION file
> 
> https://raw.githubusercontent.com/yonicd/ripe/master/DESCRIPTION

It looks like a problem on win-builder.  I don't think there's anything 
you can do but wait for it to be fixed.

> 
> That is the same system that CRAN checks for winOS will use?

I don't know, but I'd expect so.

Duncan Murdoch

> 
> Thank you
> 
> On Sat, Nov 30, 2019 at 8:29 AM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 30/11/2019 7:02 a.m., Yoni wrote:
>      > I have recently resubmitted a package after fixing an issue with the
>      > license. The package passed all the checks a few days prior and
>     on this
>      > resubmit the winOS failed with a message that I am not sure how
>     to resolve.
>      >
>      > * checking package dependencies ... ERROR
>      > Package suggested but not available for checking:
>      > 'knitr'VignetteBuilder package required for checking but not
>      > installed: 'knitr'
>      >
>      >
>     https://win-builder.r-project.org/incoming_pretest/ripe_0.1.0_20191130_120421/Windows/00check.log
>      >
>      > The DESCRIPTION file seems to contain the correct Imports and
>     Suggests
>      > that have not raised issues up until this point on checks.Depends: R
>      > (>= 3.5.0)
>      >
>      > Imports: magrittrSuggests:
>      >? ?testthat,
>      >? ?knitr,
>      >? ?rmarkdown,
>      >? ?purrr,
>      >? ?parallel,
>      >? ?dplyr,
>      >? ?covr
>      > VignetteBuilder: knitr
>      >
> 
>     Assuming the joined lines "Imports: magrittrSuggests:" are just in your
>     email, not in the DESCRIPTION file (you used HTML, which generally gets
>     mangled here), that's likely a transient error on the test system.? I
>     would resubmit.
> 
>     Duncan Murdoch
> 
> 
> 
> -- 
> Yoni
> 
> You do not learn to swim from books and lectures on the theory of 
> buoyancy (Box 1990)


From yon|cd @end|ng |rom gm@||@com  Sat Nov 30 15:21:14 2019
From: yon|cd @end|ng |rom gm@||@com (Yoni)
Date: Sat, 30 Nov 2019 09:21:14 -0500
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
Message-ID: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>

I received a message from CRAN yesterday stating my package is erroring on
all the systems all of a sudden.

https://cran.r-project.org/web/checks/check_results_texPreview.html

After some investigation the root of the errors looks like it came from the
new release of roxygen2 (7.0.1).

https://github.com/r-lib/roxygen2/issues/990

Is there anything I can do in the interim to fix this problem since I do
not know when this apparent bug fix will be pushed to CRAN, relieving my
errors in the documentation builds, which could be beyond the warning
period (2019-12-13), which the package will be removed from CRAN.

Thank you

	[[alternative HTML version deleted]]


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Sat Nov 30 15:42:04 2019
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Sun, 1 Dec 2019 01:42:04 +1100
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
In-Reply-To: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
References: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
Message-ID: <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>

You could (a) install the updated roxygen from github and rebuild the man/
files ; (b) manually edit the Rd files without using roxygen ; or (c)
remove the examples until you can apply the fix.

On Sun, 1 Dec 2019 at 1:26 am, Yoni <yonicd at gmail.com> wrote:

> I received a message from CRAN yesterday stating my package is erroring on
> all the systems all of a sudden.
>
> https://cran.r-project.org/web/checks/check_results_texPreview.html
>
> After some investigation the root of the errors looks like it came from the
> new release of roxygen2 (7.0.1).
>
> https://github.com/r-lib/roxygen2/issues/990
>
> Is there anything I can do in the interim to fix this problem since I do
> not know when this apparent bug fix will be pushed to CRAN, relieving my
> errors in the documentation builds, which could be beyond the warning
> period (2019-12-13), which the package will be removed from CRAN.
>
> Thank you
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From yon|cd @end|ng |rom gm@||@com  Sat Nov 30 15:59:17 2019
From: yon|cd @end|ng |rom gm@||@com (Yoni)
Date: Sat, 30 Nov 2019 09:59:17 -0500
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
In-Reply-To: <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>
References: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
 <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>
Message-ID: <CAAhB0MUVMzXszXdgkwk_+pazw73DsSs5su1U9MdXQJCbt2sKpA@mail.gmail.com>

Thank you for the advice.

I think that (a) is a problem to implement since the new roxygen2 is on the
CRAN systems and I can not control which version they are using to build
the package in the checks.

I have gone with option (c), which is unfortunate since I will need to
change my examples twice to accommodate a problem that another package,
that has such a high degree of reverse dependency, has created.


On Sat, Nov 30, 2019 at 9:42 AM Hugh Parsonage <hugh.parsonage at gmail.com>
wrote:

> You could (a) install the updated roxygen from github and rebuild the man/
> files ; (b) manually edit the Rd files without using roxygen ; or (c)
> remove the examples until you can apply the fix.
>
> On Sun, 1 Dec 2019 at 1:26 am, Yoni <yonicd at gmail.com> wrote:
>
>> I received a message from CRAN yesterday stating my package is erroring on
>> all the systems all of a sudden.
>>
>> https://cran.r-project.org/web/checks/check_results_texPreview.html
>>
>> After some investigation the root of the errors looks like it came from
>> the
>> new release of roxygen2 (7.0.1).
>>
>> https://github.com/r-lib/roxygen2/issues/990
>>
>> Is there anything I can do in the interim to fix this problem since I do
>> not know when this apparent bug fix will be pushed to CRAN, relieving my
>> errors in the documentation builds, which could be beyond the warning
>> period (2019-12-13), which the package will be removed from CRAN.
>>
>> Thank you
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

-- 
Yoni

You do not learn to swim from books and lectures on the theory of buoyancy
(Box 1990)

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Nov 30 16:09:47 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 30 Nov 2019 10:09:47 -0500
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
In-Reply-To: <CAAhB0MUVMzXszXdgkwk_+pazw73DsSs5su1U9MdXQJCbt2sKpA@mail.gmail.com>
References: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
 <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>
 <CAAhB0MUVMzXszXdgkwk_+pazw73DsSs5su1U9MdXQJCbt2sKpA@mail.gmail.com>
Message-ID: <e169de87-5b32-0d22-aebe-40e0c0489d1a@gmail.com>

On 30/11/2019 9:59 a.m., Yoni wrote:
> Thank you for the advice.
> 
> I think that (a) is a problem to implement since the new roxygen2 is on the
> CRAN systems and I can not control which version they are using to build
> the package in the checks.

I don't think CRAN runs roxygen2 at all.  It tests based on the 
description of documentation in Writing R Extensions.

Duncan Murdoch

> 
> I have gone with option (c), which is unfortunate since I will need to
> change my examples twice to accommodate a problem that another package,
> that has such a high degree of reverse dependency, has created.
> 
> 
> On Sat, Nov 30, 2019 at 9:42 AM Hugh Parsonage <hugh.parsonage at gmail.com>
> wrote:
> 
>> You could (a) install the updated roxygen from github and rebuild the man/
>> files ; (b) manually edit the Rd files without using roxygen ; or (c)
>> remove the examples until you can apply the fix.
>>
>> On Sun, 1 Dec 2019 at 1:26 am, Yoni <yonicd at gmail.com> wrote:
>>
>>> I received a message from CRAN yesterday stating my package is erroring on
>>> all the systems all of a sudden.
>>>
>>> https://cran.r-project.org/web/checks/check_results_texPreview.html
>>>
>>> After some investigation the root of the errors looks like it came from
>>> the
>>> new release of roxygen2 (7.0.1).
>>>
>>> https://github.com/r-lib/roxygen2/issues/990
>>>
>>> Is there anything I can do in the interim to fix this problem since I do
>>> not know when this apparent bug fix will be pushed to CRAN, relieving my
>>> errors in the documentation builds, which could be beyond the warning
>>> period (2019-12-13), which the package will be removed from CRAN.
>>>
>>> Thank you
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>


From yon|cd @end|ng |rom gm@||@com  Sat Nov 30 16:21:27 2019
From: yon|cd @end|ng |rom gm@||@com (Yoni)
Date: Sat, 30 Nov 2019 10:21:27 -0500
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
In-Reply-To: <e169de87-5b32-0d22-aebe-40e0c0489d1a@gmail.com>
References: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
 <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>
 <CAAhB0MUVMzXszXdgkwk_+pazw73DsSs5su1U9MdXQJCbt2sKpA@mail.gmail.com>
 <e169de87-5b32-0d22-aebe-40e0c0489d1a@gmail.com>
Message-ID: <CAAhB0MUAkL7myAnskh=WdfAzSkR=Oz-f_HG8L_VcURW7KpkQwg@mail.gmail.com>

Thank you for the clarification.

I am then more confused.

The CRAN version of the package (texPreview) has been unchanged since Oct
23, at which point it was passing the checks with no errors.

Here is the CRAN mirror on GitHub with the example that is now erroring.

https://github.com/cran/texPreview/blob/master/R/kable.R

The examples section seems to have valid R code in them.

Last week (after roxygen2 was updated on CRAN to 7.0.1) the same
documentation is throwing errors.

Here is the CRAN checks link:
https://cran.r-project.org/web/checks/check_results_texPreview.html

Has the method of checking documentation changed in the past week that
would cause these previously working examples to start to fail?

Thank you for the help

On Sat, Nov 30, 2019 at 10:09 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 30/11/2019 9:59 a.m., Yoni wrote:
> > Thank you for the advice.
> >
> > I think that (a) is a problem to implement since the new roxygen2 is on
> the
> > CRAN systems and I can not control which version they are using to build
> > the package in the checks.
>
> I don't think CRAN runs roxygen2 at all.  It tests based on the
> description of documentation in Writing R Extensions.
>
> Duncan Murdoch
>
> >
> > I have gone with option (c), which is unfortunate since I will need to
> > change my examples twice to accommodate a problem that another package,
> > that has such a high degree of reverse dependency, has created.
> >
> >
> > On Sat, Nov 30, 2019 at 9:42 AM Hugh Parsonage <hugh.parsonage at gmail.com
> >
> > wrote:
> >
> >> You could (a) install the updated roxygen from github and rebuild the
> man/
> >> files ; (b) manually edit the Rd files without using roxygen ; or (c)
> >> remove the examples until you can apply the fix.
> >>
> >> On Sun, 1 Dec 2019 at 1:26 am, Yoni <yonicd at gmail.com> wrote:
> >>
> >>> I received a message from CRAN yesterday stating my package is
> erroring on
> >>> all the systems all of a sudden.
> >>>
> >>> https://cran.r-project.org/web/checks/check_results_texPreview.html
> >>>
> >>> After some investigation the root of the errors looks like it came from
> >>> the
> >>> new release of roxygen2 (7.0.1).
> >>>
> >>> https://github.com/r-lib/roxygen2/issues/990
> >>>
> >>> Is there anything I can do in the interim to fix this problem since I
> do
> >>> not know when this apparent bug fix will be pushed to CRAN, relieving
> my
> >>> errors in the documentation builds, which could be beyond the warning
> >>> period (2019-12-13), which the package will be removed from CRAN.
> >>>
> >>> Thank you
> >>>
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >
>
>

-- 
Yoni

You do not learn to swim from books and lectures on the theory of buoyancy
(Box 1990)

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Nov 30 17:29:17 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 30 Nov 2019 11:29:17 -0500
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
In-Reply-To: <CAAhB0MUAkL7myAnskh=WdfAzSkR=Oz-f_HG8L_VcURW7KpkQwg@mail.gmail.com>
References: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
 <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>
 <CAAhB0MUVMzXszXdgkwk_+pazw73DsSs5su1U9MdXQJCbt2sKpA@mail.gmail.com>
 <e169de87-5b32-0d22-aebe-40e0c0489d1a@gmail.com>
 <CAAhB0MUAkL7myAnskh=WdfAzSkR=Oz-f_HG8L_VcURW7KpkQwg@mail.gmail.com>
Message-ID: <9cd8479c-b25e-4b12-6fca-ae5ea2c0624c@gmail.com>

On 30/11/2019 10:21 a.m., Yoni wrote:
> Thank you for the clarification.
> 
> I am then more confused.
> 
> The CRAN version of the package (texPreview) has been unchanged since 
> Oct 23, at which point it was passing the checks with no errors.
> 
> Here is the CRAN mirror on GitHub with the example that is now erroring.
> 
> https://github.com/cran/texPreview/blob/master/R/kable.R
> 
> The examples section seems to have valid R code in them.
> 
> Last week (after roxygen2 was updated on CRAN to 7.0.1) the same 
> documentation is throwing errors.
> 
> Here is the CRAN checks link: 
> https://cran.r-project.org/web/checks/check_results_texPreview.html
> 
> Has the method of checking documentation changed in the past week that 
> would cause these previously working examples to start to fail?

I don't really know what the cause is, but I suspect the roxygen2 update 
is a coincidence. In your CRAN log you show this error:

     > x <- tex_preview(tex,returnType = 'input')
     Error in tex_preview.default(obj, tex_lines, stem, overwrite, 
keep_pdf, :

     ! LaTeX Error: File `/tmp/Rtmp6V8kds/tex_temp.tex ' not found.

     Type X to quit or <RETURN> to proceed,
     or enter new name. (Default extension: tex )

     Enter file name:
     ! Emergency stop.
     <read *>

     l.17 \input{ /tmp/Rtmp6V8kds/tex_temp.tex }


If I look really closely at the LaTeX error message, I see that the 
filename has a space at the end.  Your \input macro had spaces both 
before and after.  Perhaps a LaTeX update makes the trailing space 
significant, and that's the issue?  I couldn't spot where those spaces 
came from; maybe if you just remove them the problem will go away.

Duncan Murdoch


From |uc@r @end|ng |rom |edor@project@org  Sat Nov 30 17:38:50 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sat, 30 Nov 2019 17:38:50 +0100
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
In-Reply-To: <CAAhB0MUAkL7myAnskh=WdfAzSkR=Oz-f_HG8L_VcURW7KpkQwg@mail.gmail.com>
References: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
 <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>
 <CAAhB0MUVMzXszXdgkwk_+pazw73DsSs5su1U9MdXQJCbt2sKpA@mail.gmail.com>
 <e169de87-5b32-0d22-aebe-40e0c0489d1a@gmail.com>
 <CAAhB0MUAkL7myAnskh=WdfAzSkR=Oz-f_HG8L_VcURW7KpkQwg@mail.gmail.com>
Message-ID: <CALEXWq2R4DqsBoBFY4yrWr63cV+5XDJLK2HT74xJvwMn1CQ=KA@mail.gmail.com>

El s?b., 30 nov. 2019 16:22, Yoni <yonicd at gmail.com> escribi?:

> Thank you for the clarification.
>
> I am then more confused.
>
> The CRAN version of the package (texPreview) has been unchanged since Oct
> 23, at which point it was passing the checks with no errors.
>

If your package is sitting on CRAN since then, and in fact I see in your
DESCRIPTION that you generated the docs with roxygen2 6.1.1, then the
roxygen2 update has nothing to do with your check error. You run roxygen2;
CRAN doesn't.

I?aki

	[[alternative HTML version deleted]]


From yon|cd @end|ng |rom gm@||@com  Sat Nov 30 17:45:20 2019
From: yon|cd @end|ng |rom gm@||@com (Yoni)
Date: Sat, 30 Nov 2019 11:45:20 -0500
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
In-Reply-To: <CALEXWq2R4DqsBoBFY4yrWr63cV+5XDJLK2HT74xJvwMn1CQ=KA@mail.gmail.com>
References: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
 <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>
 <CAAhB0MUVMzXszXdgkwk_+pazw73DsSs5su1U9MdXQJCbt2sKpA@mail.gmail.com>
 <e169de87-5b32-0d22-aebe-40e0c0489d1a@gmail.com>
 <CAAhB0MUAkL7myAnskh=WdfAzSkR=Oz-f_HG8L_VcURW7KpkQwg@mail.gmail.com>
 <CALEXWq2R4DqsBoBFY4yrWr63cV+5XDJLK2HT74xJvwMn1CQ=KA@mail.gmail.com>
Message-ID: <CAAhB0MVLrqpK7UxewiZ2Wz8-zupj3G0eutkkQx8TQM+LhaEKuQ@mail.gmail.com>

Thank you for the clarification regarding roxygen2, it does look like a
confounding issue.

I will try to resolve the paths in the tex.

Thank you for the help.

On Sat, Nov 30, 2019 at 11:39 AM I?aki Ucar <iucar at fedoraproject.org> wrote:

>
>
> El s?b., 30 nov. 2019 16:22, Yoni <yonicd at gmail.com> escribi?:
>
>> Thank you for the clarification.
>>
>> I am then more confused.
>>
>> The CRAN version of the package (texPreview) has been unchanged since Oct
>> 23, at which point it was passing the checks with no errors.
>>
>
> If your package is sitting on CRAN since then, and in fact I see in your
> DESCRIPTION that you generated the docs with roxygen2 6.1.1, then the
> roxygen2 update has nothing to do with your check error. You run roxygen2;
> CRAN doesn't.
>
> I?aki
>


-- 
Yoni

You do not learn to swim from books and lectures on the theory of buoyancy
(Box 1990)

	[[alternative HTML version deleted]]


From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Sat Nov 30 20:55:43 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Sat, 30 Nov 2019 19:55:43 +0000
Subject: [R-pkg-devel] bioRxiv Preprint as Vignette
Message-ID: <9795ff41d7d94463a867a4cd2fa03def@sfu.ca>

Hi,


I am just wondering about how I can include a bioRxiv preprint as the vignette of my R package. It's a pdf file already in bioRxiv. Could you please let me know how I can include that file as vignette?


Thank you in advance!


Charith.



	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Sat Nov 30 21:18:50 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Sat, 30 Nov 2019 12:18:50 -0800
Subject: [R-pkg-devel] bioRxiv Preprint as Vignette
In-Reply-To: <9795ff41d7d94463a867a4cd2fa03def@sfu.ca>
References: <9795ff41d7d94463a867a4cd2fa03def@sfu.ca>
Message-ID: <CAFDcVCRAQ_W6r_6zYHGr4W_mh+Jj7woNS8hKr3DLaWEeik4gxA@mail.gmail.com>

Disclaimer, I'm the author: You can include a static PDF using the
R.rsp::asis vignette engine:

  https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf

Better is if you've got the LaTeX source (with figures etc.), then use
the R.rsp::tex vignette engine:

  https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-LaTeX_vignettes.pdf

/Henrik

PS. On a side, should LaTeX-to-PDF (as in R.rsp::tex) be part of base
R?  That seems non-controversial to me.  In contrast, including static
PDFs and HTMLs requires a debate whether this is a good thing or not,
e.g. the risk of decoupling/losing the original source artifact and
it's only the final PDF/HTML artifact that is archived on CRAN.

On Sat, Nov 30, 2019 at 11:56 AM Charith Karunarathna
<charith_karunarathna at sfu.ca> wrote:
>
> Hi,
>
>
> I am just wondering about how I can include a bioRxiv preprint as the vignette of my R package. It's a pdf file already in bioRxiv. Could you please let me know how I can include that file as vignette?
>
>
> Thank you in advance!
>
>
> Charith.
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Sat Nov 30 21:24:04 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 30 Nov 2019 14:24:04 -0600
Subject: [R-pkg-devel] bioRxiv Preprint as Vignette
In-Reply-To: <9795ff41d7d94463a867a4cd2fa03def@sfu.ca>
References: <9795ff41d7d94463a867a4cd2fa03def@sfu.ca>
Message-ID: <24034.53220.426441.465066@rob.eddelbuettel.com>


On 30 November 2019 at 19:55, Charith Karunarathna wrote:
| I am just wondering about how I can include a bioRxiv preprint as the vignette of my R package. It's a pdf file already in bioRxiv. Could you please let me know how I can include that file as vignette?

Sure. "Just do it" -- in the sense that you can create five-line Sweave
vignette wrappers around existing pdf files.  See

  https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/

I do the same now in a number of packages, for example my anytime repo

  https://github.com/eddelbuettel/anytime/tree/master/vignettes

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From mv@rg@@ @end|ng |rom dcc@uch||e@c|  Sat Nov 30 22:29:15 2019
From: mv@rg@@ @end|ng |rom dcc@uch||e@c| (Mauricio Vargas)
Date: Sat, 30 Nov 2019 18:29:15 -0300
Subject: [R-pkg-devel] casen 0.1: strange pre-test results
Message-ID: <CAM8u9RQa5ZHWSD_uA4nOJwfLPzcbG+ErD_+pUauh7J9Js=dcHA@mail.gmail.com>

Hi!

This is the 1st time that the pre-checks shows strange errors for me. The
results are here
https://win-builder.r-project.org/incoming_pretest/casen_0.1.0.9000_20191130_185019/

It says, that knitr and tidyr are not available, etc. After testing on
windows, ubuntu and mac, I only have 1 note about a function that reads rar
files.

Here are my test results
https://github.com/pachamaltese/casen/commit/bc4c2c35a1c310dde99d612599da6c72feff5d42/checks?check_suite_id=335739582
so I'm not sure about these pre-test errors.

How would you fix them? so far, my biggest expertise is stackoverflow and
it's not helping at the present time

Best,


?????

*Mauricio Vargas Sep?lveda ??*
Do you like Data Science? visit pacha.hk
???????????pacha.hk

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sun Dec  1 00:06:50 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 30 Nov 2019 17:06:50 -0600
Subject: [R-pkg-devel] casen 0.1: strange pre-test results
In-Reply-To: <CAM8u9RQa5ZHWSD_uA4nOJwfLPzcbG+ErD_+pUauh7J9Js=dcHA@mail.gmail.com>
References: <CAM8u9RQa5ZHWSD_uA4nOJwfLPzcbG+ErD_+pUauh7J9Js=dcHA@mail.gmail.com>
Message-ID: <24034.62986.677172.12060@rob.eddelbuettel.com>


On 30 November 2019 at 18:29, Mauricio Vargas wrote:
| This is the 1st time that the pre-checks shows strange errors for me. The
| results are here
| https://win-builder.r-project.org/incoming_pretest/casen_0.1.0.9000_20191130_185019/

Following that URL to

  https://win-builder.r-project.org/incoming_pretest/casen_0.1.0.9000_20191130_185019/Debian/00install.out

we see a different, and fatal, error:

  * installing *source* package ?casen? ...
  ** using staged installation
  'config' variable 'CXXCPP' is deprecated
  PKG_CFLAGS=
  PKG_LIBS=-larchive
  <stdin>:1:10: fatal error: archive.h: No such file or directory
  compilation terminated.

You are depending on an external library that appears to NOT be installed.

Your package is unlikely to succeed in the build, whether or not knitr and
tidyr are present.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Dec  1 07:54:53 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 1 Dec 2019 07:54:53 +0100
Subject: [R-pkg-devel] casen 0.1: strange pre-test results
In-Reply-To: <24034.62986.677172.12060@rob.eddelbuettel.com>
References: <CAM8u9RQa5ZHWSD_uA4nOJwfLPzcbG+ErD_+pUauh7J9Js=dcHA@mail.gmail.com>
 <24034.62986.677172.12060@rob.eddelbuettel.com>
Message-ID: <49dfbed0-17fb-d9ee-f311-649927ea9e94@statistik.tu-dortmund.de>

Pls ignore the knitr et all missings for now, some hicc up on the check 
machine caused an inconsistent setup. We will fix this shortly.

Best,
Uwe Ligges

On 01.12.2019 00:06, Dirk Eddelbuettel wrote:
> 
> On 30 November 2019 at 18:29, Mauricio Vargas wrote:
> | This is the 1st time that the pre-checks shows strange errors for me. The
> | results are here
> | https://win-builder.r-project.org/incoming_pretest/casen_0.1.0.9000_20191130_185019/
> 
> Following that URL to
> 
>    https://win-builder.r-project.org/incoming_pretest/casen_0.1.0.9000_20191130_185019/Debian/00install.out
> 
> we see a different, and fatal, error:
> 
>    * installing *source* package ?casen? ...
>    ** using staged installation
>    'config' variable 'CXXCPP' is deprecated
>    PKG_CFLAGS=
>    PKG_LIBS=-larchive
>    <stdin>:1:10: fatal error: archive.h: No such file or directory
>    compilation terminated.
> 
> You are depending on an external library that appears to NOT be installed.
> 
> Your package is unlikely to succeed in the build, whether or not knitr and
> tidyr are present.
> 
> Dirk
>


From youy||ong @end|ng |rom gm@||@com  Sun Dec  1 08:24:31 2019
From: youy||ong @end|ng |rom gm@||@com (Youyi Fong)
Date: Sat, 30 Nov 2019 23:24:31 -0800
Subject: [R-pkg-devel] how to change from -fsanitize=undefined to
 -fsanitize=address
In-Reply-To: <CAA4m0GaAB=6NoXu3VcMyx-j2K+Sj8gQefD4yMxPF9w=NGV-bzg@mail.gmail.com>
References: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>
 <d388ec7f-23aa-242d-06cc-c624a3fa0a9f@statistik.tu-dortmund.de>
 <CAA4m0GayOpdH11z8bXM50M_vFZzS7Ss_KiKZyKERNY7M-rRBcw@mail.gmail.com>
 <24033.26504.11840.421163@rob.eddelbuettel.com>
 <CAA4m0GaAB=6NoXu3VcMyx-j2K+Sj8gQefD4yMxPF9w=NGV-bzg@mail.gmail.com>
Message-ID: <CAA4m0GaCEnm1MEG_O9t4iUuZ99YYmu-MSe36==m692b1V3Yuhw@mail.gmail.com>

Here is a solution worked out by the wonderful staff from our scientific
computing support team at the Fred Hutchinson Cancer Research Center. I
really don't know how Dan did it, but the way he explained to me was that
he came across this github repository by Dirk:
https://github.com/rocker-org/r-devel-san-clang. There was the Docker file
which built the clang-san image, but he did not find the image itself in
Docker Hub. So he built it himself and pushed it as
dtenenba/r-devel-san-clang.

The issue I encountered with r-debug was related to ulimit. It turns out
that it be specific to the machine I was working on. Dan used a different
machine and that went away.

Using the docker image dtenenba/r-devel-san-clang on that new machine, I
was able to install my package, and upon running the test code, to
reproduce the memory issue reported by the CRAN team.

I then tested whether r-debug might also work on that machine. It sort of
did as it returned a memory-related error when I tried

RDsan CMD INSTALL mypkg

But it is not as helpful as the behavior by  dtenenba/r-devel-san-clang.




On Fri, Nov 29, 2019 at 1:48 PM Youyi Fong <youyifong at gmail.com> wrote:

> Hi Dirk,
>
> Thanks very much. Following your suggestion, I tried r-debug, following
> the readme on https://github.com/wch/r-debug. After starting docker as
> recommended,
>
> docker run --rm -ti --security-opt seccomp=unconfined wch1/r-debug
>
> I was able to call RD. But calling RDsan or RDcsan resulted in errors:
>
> root at 258bfdfcce6c:/# RDsan
> ==17==ERROR: AddressSanitizer failed to allocate 0xdfff0001000
> (15392894357504) bytes at address 2008fff7000 (errno: 12)
> ==17==ReserveShadowMemoryRange failed while trying to map 0xdfff0001000
> bytes. Perhaps you're using ulimit -v
> Aborted (core dumped)
>
>
> I have also tried rhub before, following this article:
> https://cran.r-project.org/web/packages/rhub/vignettes/local-debugging.html As
> you indicated, it may have worked for others, but got the following error:
>
> >>>>>==================== Installing system requirements
> 3b3a65d751c026b7629d2038242c92290cf97853525978381b6e59f41c8500d3
>
> >>>>>==================== Starting Docker container
> 04d6065323ef732bf89c26df7d547efff40774206a0ac6a24b3d9cdb021cb08e
> ls: cannot access '/opt/R-*': No such file or directory
> > source('https://bioconductor.org/biocLite.R')
> Error: With R version 3.5 or greater, install Bioconductor packages using
> BiocManager; see https://bioconductor.org/install
> Execution halted
> Error in run(bash, c(file.path(wd, "rhub-linux.sh"), args), echo = TRUE,  :
>   System command error
>
>
>
> This is where I am stuck at right now.
>
> Thanks,
> Youyi
>
>
> On Fri, Nov 29, 2019 at 10:46 AM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>>
>> Youyi,
>>
>> It looks like you are trying to debug a _current_ SAN / ASAN / UBSAN error
>> against your package by leaning on documentation I wrote five years ago
>> specifically for another package (called "sanitizers") used to validate
>> the
>> initial Docker container builds I made (and to ensure the error these
>> SAN/ASAN/UBSAN containers were supposed to trigger were triggered).
>>
>> Today, your quickest bet to launch a sanitizer run may be via the rhub
>> platforms.  Clearly the easiest to launch ("no download"), but at times a
>> little inconsistent.  An alternative is the suite of containers
>> maintained by
>> Winston described at their repo at https://github.com/wch/r-debug at
>> available from the Docker Hub.
>>
>> All that said, exact configurations matters and the fact remains that we
>> all
>> still haven't managed to automatically provide the configurations used by
>> CRAN. There are possible "gaps" between what CRAN uses and what may be
>> available pre-built: compiler versions, builds, sanitizer options, ... and
>> these can be enough to not replicate an issue.  I think I would try
>> Winston's
>> r-debug next.
>>
>> Hope this helps, Dirk
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>

	[[alternative HTML version deleted]]


From yon|cd @end|ng |rom gm@||@com  Sun Dec  1 14:39:42 2019
From: yon|cd @end|ng |rom gm@||@com (Yoni)
Date: Sun, 1 Dec 2019 08:39:42 -0500
Subject: [R-pkg-devel] roxygen2 7.0.1 backslash escape error
In-Reply-To: <CAAhB0MVLrqpK7UxewiZ2Wz8-zupj3G0eutkkQx8TQM+LhaEKuQ@mail.gmail.com>
References: <CAAhB0MUPT3Y6Cy4=hZ9UN-hun0-uQygf2NV3WjkgQO092dtUYw@mail.gmail.com>
 <CAJmOi+P8=Z=OnxKaVjA02g3kP18qnr4M7T+8vP7m=XJ+oJDuig@mail.gmail.com>
 <CAAhB0MUVMzXszXdgkwk_+pazw73DsSs5su1U9MdXQJCbt2sKpA@mail.gmail.com>
 <e169de87-5b32-0d22-aebe-40e0c0489d1a@gmail.com>
 <CAAhB0MUAkL7myAnskh=WdfAzSkR=Oz-f_HG8L_VcURW7KpkQwg@mail.gmail.com>
 <CALEXWq2R4DqsBoBFY4yrWr63cV+5XDJLK2HT74xJvwMn1CQ=KA@mail.gmail.com>
 <CAAhB0MVLrqpK7UxewiZ2Wz8-zupj3G0eutkkQx8TQM+LhaEKuQ@mail.gmail.com>
Message-ID: <CAAhB0MVKeud_EXMEkw2B5gC4GpAhqj7XjwggnvLeOYdQ4vT2Bg@mail.gmail.com>

Where can I find the current tex compiler / pandocs setup on CRAN check
systems so I can adjust my CI, to replicate the failure?

On Sat, Nov 30, 2019 at 11:45 AM Yoni <yonicd at gmail.com> wrote:

> Thank you for the clarification regarding roxygen2, it does look like a
> confounding issue.
>
> I will try to resolve the paths in the tex.
>
> Thank you for the help.
>
> On Sat, Nov 30, 2019 at 11:39 AM I?aki Ucar <iucar at fedoraproject.org>
> wrote:
>
>>
>>
>> El s?b., 30 nov. 2019 16:22, Yoni <yonicd at gmail.com> escribi?:
>>
>>> Thank you for the clarification.
>>>
>>> I am then more confused.
>>>
>>> The CRAN version of the package (texPreview) has been unchanged since Oct
>>> 23, at which point it was passing the checks with no errors.
>>>
>>
>> If your package is sitting on CRAN since then, and in fact I see in your
>> DESCRIPTION that you generated the docs with roxygen2 6.1.1, then the
>> roxygen2 update has nothing to do with your check error. You run roxygen2;
>> CRAN doesn't.
>>
>> I?aki
>>
>
>
> --
> Yoni
>
> You do not learn to swim from books and lectures on the theory of buoyancy
> (Box 1990)
>


-- 
Yoni

You do not learn to swim from books and lectures on the theory of buoyancy
(Box 1990)

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sun Dec  1 15:01:30 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 1 Dec 2019 08:01:30 -0600
Subject: [R-pkg-devel] how to change from -fsanitize=undefined to
 -fsanitize=address
In-Reply-To: <CAA4m0GaCEnm1MEG_O9t4iUuZ99YYmu-MSe36==m692b1V3Yuhw@mail.gmail.com>
References: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>
 <d388ec7f-23aa-242d-06cc-c624a3fa0a9f@statistik.tu-dortmund.de>
 <CAA4m0GayOpdH11z8bXM50M_vFZzS7Ss_KiKZyKERNY7M-rRBcw@mail.gmail.com>
 <24033.26504.11840.421163@rob.eddelbuettel.com>
 <CAA4m0GaAB=6NoXu3VcMyx-j2K+Sj8gQefD4yMxPF9w=NGV-bzg@mail.gmail.com>
 <CAA4m0GaCEnm1MEG_O9t4iUuZ99YYmu-MSe36==m692b1V3Yuhw@mail.gmail.com>
Message-ID: <24035.51130.829907.715496@rob.eddelbuettel.com>


On 30 November 2019 at 23:24, Youyi Fong wrote:
| Here is a solution worked out by the wonderful staff from our scientific
| computing support team at the Fred Hutchinson Cancer Research Center. I
| really don't know how Dan did it, but the way he explained to me was that
| he came across this github repository by Dirk:
| https://github.com/rocker-org/r-devel-san-clang. There was the Docker file
| which built the clang-san image, but he did not find the image itself in
| Docker Hub. So he built it himself and pushed it as

It lives with all the other Rocker containers here:

  https://hub.docker.com/repository/docker/rocker/r-devel-ubsan-clang

There is a minor 'san at GitHub, ubsan at Docker' labeling issue but you or
Dan could have asked, and the Docker tag clearly links back to

  https://github.com/rocker-org/r-devel-san-clang

which is where you started from. Anyway, glad to know it helped!

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From youy||ong @end|ng |rom gm@||@com  Sun Dec  1 18:03:53 2019
From: youy||ong @end|ng |rom gm@||@com (Youyi Fong)
Date: Sun, 1 Dec 2019 09:03:53 -0800
Subject: [R-pkg-devel] how to change from -fsanitize=undefined to
 -fsanitize=address
In-Reply-To: <24035.51130.829907.715496@rob.eddelbuettel.com>
References: <CAA4m0GYxdhV9NzW7P9PC2AtHJaBEa0r4gGPtwYdmEP89=gh=Sg@mail.gmail.com>
 <d388ec7f-23aa-242d-06cc-c624a3fa0a9f@statistik.tu-dortmund.de>
 <CAA4m0GayOpdH11z8bXM50M_vFZzS7Ss_KiKZyKERNY7M-rRBcw@mail.gmail.com>
 <24033.26504.11840.421163@rob.eddelbuettel.com>
 <CAA4m0GaAB=6NoXu3VcMyx-j2K+Sj8gQefD4yMxPF9w=NGV-bzg@mail.gmail.com>
 <CAA4m0GaCEnm1MEG_O9t4iUuZ99YYmu-MSe36==m692b1V3Yuhw@mail.gmail.com>
 <24035.51130.829907.715496@rob.eddelbuettel.com>
Message-ID: <CAA4m0GZ4=FsheVTu=RBE+Was=vphdAZvsWeXk=frao+ThZDbpg@mail.gmail.com>

Good to know. I will pass it on to Dan. He said a few times that he wasn't
an expert on this :).

Thanks!
Youyi


On Sun, Dec 1, 2019 at 6:01 AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 30 November 2019 at 23:24, Youyi Fong wrote:
> | Here is a solution worked out by the wonderful staff from our scientific
> | computing support team at the Fred Hutchinson Cancer Research Center. I
> | really don't know how Dan did it, but the way he explained to me was that
> | he came across this github repository by Dirk:
> | https://github.com/rocker-org/r-devel-san-clang. There was the Docker
> file
> | which built the clang-san image, but he did not find the image itself in
> | Docker Hub. So he built it himself and pushed it as
>
> It lives with all the other Rocker containers here:
>
>   https://hub.docker.com/repository/docker/rocker/r-devel-ubsan-clang
>
> There is a minor 'san at GitHub, ubsan at Docker' labeling issue but you or
> Dan could have asked, and the Docker tag clearly links back to
>
>   https://github.com/rocker-org/r-devel-san-clang
>
> which is where you started from. Anyway, glad to know it helped!
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From g@rre@@|berto @end|ng |rom gm@||@com  Sun Dec  1 12:29:10 2019
From: g@rre@@|berto @end|ng |rom gm@||@com (Alberto Garre)
Date: Sun, 1 Dec 2019 12:29:10 +0100
Subject: [R-pkg-devel] check_win_release cannot find tidyr and other common
 packages?
Message-ID: <CAMo5YQauUO2akB-JJFcB4EpJ1yf6i3sbnV4gQJiwG1gw1af8Ug@mail.gmail.com>

Hi!

I am preparing an R package to be uploaded to CRAN. I have already checked
using rhub and every check passed. I have also checked using winbuilder for
the release version of R (devtools:check_win_release) and there were no
ERRORs or WARNINGs. However, for the devel version
(devtools:check_win_devel) I got the following error:

checking package dependencies ... ERROR
Packages required but not available:
  'tidyr', 'googlesheets', 'stringr', 'readtext'

Package suggested but not available for checking: 'knitr'

VignetteBuilder package required for checking but not installed: 'knitr'

See section 'The DESCRIPTION file' in the 'Writing R Extensions'
manual.

I would really appreciate some help to figure out what's going on. This is
the relevant part of my DESCRIPTION file:

Imports:
    XML (>= 3.98),
    purrr (>= 0.2.4),
    dplyr (>= 0.7.8),
    tibble (>= 2.0.0),
    tidyr (>= 0.7.2),
    rlang (>= 0.3.0.1),
    googlesheets (>= 0.3.0),
    stringr (>= 1.4.0),
    readxl (>= 1.3.1),
    readtext (>= 0.7.1),
    zip (>= 2.0.4),
    xml2 (>= 1.2.0),
    rjson (>= 0.2.20),
    shiny (>= 1.3.2),
    tools (>= 3.5.3),
    utils (>= 3.5.3),
    R.utils (>= 2.9.0)
Suggests:
    knitr (>= 1.9),
    rmarkdown (>= 1.12),
    testthat
VignetteBuilder: knitr


Report from win_builder:
https://win-builder.r-project.org/EYkQRkLpS8oa/00check.log

Thanks!
Alberto

	[[alternative HTML version deleted]]


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Mon Dec  2 14:57:51 2019
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael Pereira)
Date: Mon, 2 Dec 2019 10:57:51 -0300
Subject: [R-pkg-devel] Fix non-ASCII characters in R packages
Message-ID: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>

Hi all,

I am trying to update my R package on CRAN but I am being requested to fix
this NOTE:

checking data for non-ASCII characters ... NOTE Note: found 58 marked
Latin-1 strings

I have used to code below to identify my scripts that have strings using
non-ASCII characters. The problem is that in most cases these non-ASCII
characters are used in the documentation of functions, so I cannot simply
convert their encoding using iconv() for example

# Find scripts using non-ASCII characters
  f <- list.files(pattern = "*.R", recursive = T)
  r <- lapply(f, tools::showNonASCIIfile)

I've tried (1) reopening and (2) resaving those scripts with UTF-8
encoding, (3) setting UTF-8 as the default encoding of the project, but
nothing seems to fix this issue. Any suggestions?

obs. I've posted this question on SO
https://stackoverflow.com/questions/59139923/fix-non-ascii-characters-in-r-packages

best,

Rafael Pereira

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Mon Dec  2 15:29:29 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 2 Dec 2019 15:29:29 +0100
Subject: [R-pkg-devel] Fix non-ASCII characters in R packages
In-Reply-To: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>
References: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>
Message-ID: <3FA61301-E5CD-4BA7-AC73-16C2D12D1043@gmail.com>

Dunno if it helps, but the NOTE is about "checking data", which, as far as I can decipher the code, means that it is looking at datasets in the data/ directory. So I suspect that looking at *.R files is not going to be the right thing to do.

-pd

> On 2 Dec 2019, at 14:57 , Rafael Pereira <rafa.pereira.br at gmail.com> wrote:
> 
> Hi all,
> 
> I am trying to update my R package on CRAN but I am being requested to fix
> this NOTE:
> 
> checking data for non-ASCII characters ... NOTE Note: found 58 marked
> Latin-1 strings
> 
> I have used to code below to identify my scripts that have strings using
> non-ASCII characters. The problem is that in most cases these non-ASCII
> characters are used in the documentation of functions, so I cannot simply
> convert their encoding using iconv() for example
> 
> # Find scripts using non-ASCII characters
>  f <- list.files(pattern = "*.R", recursive = T)
>  r <- lapply(f, tools::showNonASCIIfile)
> 
> I've tried (1) reopening and (2) resaving those scripts with UTF-8
> encoding, (3) setting UTF-8 as the default encoding of the project, but
> nothing seems to fix this issue. Any suggestions?
> 
> obs. I've posted this question on SO
> https://stackoverflow.com/questions/59139923/fix-non-ascii-characters-in-r-packages
> 
> best,
> 
> Rafael Pereira
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Dec  2 15:40:39 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 2 Dec 2019 17:40:39 +0300
Subject: [R-pkg-devel] Fix non-ASCII characters in R packages
In-Reply-To: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>
References: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>
Message-ID: <20191202174039.4991fa0c@trisector>

On Mon, 2 Dec 2019 10:57:51 -0300
Rafael Pereira <rafa.pereira.br at gmail.com> wrote:

> checking data for non-ASCII characters ... NOTE Note: found 58 marked
> Latin-1 strings
> 
> I have used to code below to identify my scripts that have strings
> using non-ASCII characters. 

I don't think it's about non-ASCII in source code; it's about Latin-1
strings in the package data:

git clone https://github.com/ipeaGIT/geobr
cd geobr/data
R
load('grid_state_correspondence_table.RData')
sum(
 unlist(
  lapply(grid_state_correspondence_table, Encoding)
 ) == 'latin1'
)
# [1] 58

What I'm not sure of is *how* this NOTE should be fixed. "Writing R
extensions" ?1.6.3 provides advice on UTF-8 strings in the R code, not
data; ?5.15 only says that strings *could* be marked as Latin-1 or
UTF-8 (but doesn't say what *should* be done); finally,
tools:::.check_package_datasets seems to produce NOTEs about Latin-1,
UTF-8 and strings marked as bytes.

-- 
Best regards,
Ivan


From dev|n@|ncert| @end|ng |rom gm@||@com  Mon Dec  2 17:20:16 2019
From: dev|n@|ncert| @end|ng |rom gm@||@com (Devin Incerti)
Date: Mon, 2 Dec 2019 08:20:16 -0800
Subject: [R-pkg-devel] 
 Compiler warning using C versions of base R integrate function
In-Reply-To: <100625b3-e209-6ec8-68e0-5770c9f890df@gmail.com>
References: <CADzXBehqYWsUoCWyrtRDFBf13pXyHcpRZRRd4-d49HG33rUaOg@mail.gmail.com>
 <100625b3-e209-6ec8-68e0-5770c9f890df@gmail.com>
Message-ID: <CADzXBejyad3gdA277wt_bbwHduuE6vFXvdbR3zbSUV=L8YBgzg@mail.gmail.com>

Thank you, Tomas, that is very helpful.

On Thu, Nov 28, 2019 at 4:41 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> On 11/21/19 7:25 PM, Devin Incerti wrote:
> > Hi,
> >
> > I'm attempting to submit a very minor update to my package where I
> replaced
> > a deprecated C++ function with an alternative. However, I'm receiving an
> > unrelated warning "*array subscript -1 is outside array bounds of ?double
> > [52]? [-Warray-bounds] *" on Debian during the CRAN pre-tests. I do not
> > receive this warning on my local OS X, Ubuntu 16.04 (on Travis-CI), with
> > Win-builder, or with R-hub builder. I also did not receive this warning
> on
> > previous submissions to CRAN, but it does now show up on the most recent
> CRAN
> > checks
> > <
> http://s.bl-1.com/h/cH9zB21r?url=https://cran.r-project.org/web/checks/check_results_hesim.html
> >
> > .
> >
> > The warning is related to the header file integrate.h
> > <
> http://s.bl-1.com/h/cH9zB6Qt?url=https://github.com/hesim-dev/hesim/blob/master/inst/include/hesim/Rbase/integrate.h
> >,
> > which is just integrate.c
> > <
> http://s.bl-1.com/h/cH9zBCpw?url=https://github.com/wch/r-source/blob/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/appl/integrate.c
> >
> > from
> > R source with function pointers replaced by C++ functors. These
> integration
> > functions are needed so that the package can integrate at the C++ level.
> >
> > I don't know how to avoid this warning. Is it perhaps related to the
> > particular version of GCC used during the CRAN checks. Any thoughts or
> > suggestions would be much appreciated.
> >
> > Thank you!
>
> The warning is generated by GCC when inlining the function rdqelg(), I
> can reproduce it with the integrate.c we have in R, but only if I add
> "inline" to rdqelg() definition (GCC 6 and newer - on Ubuntu but that
> should not matter). The inliner knows the callsite, so it knows that
> what is being passed is an array (and not an arbitrary pointer), and
> hence it emits the warning. It is not smart enough to know that the
> first element of the new "array" will (unless there is a bug) never be
> used. When not inlining and the function is compiled independently from
> its callsites, it assumes it is a pointer, and hence there is no warning.
>
> The code is automatically converted from Fortran, maybe these pointer
> decrements in function prologues are to adjust to Fortran 1-based array
> indexing. If you must use this modified copy of integrate.c from R,
> perhaps a quick hack to get rid of the warning would be to avoid the
> "inline" keywords in declarations of functions like rdqelg(). In a
> perfect world, the code would be rewritten to more idiomatic C (not just
> to avoid these decrements). Or perhaps the Fortran original could be used.
>
> Tomas
>
> > ()
> >
> > Devin
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Dec  2 17:39:17 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 2 Dec 2019 17:39:17 +0100
Subject: [R-pkg-devel] Fix non-ASCII characters in R packages
In-Reply-To: <3FA61301-E5CD-4BA7-AC73-16C2D12D1043@gmail.com>
References: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>
 <3FA61301-E5CD-4BA7-AC73-16C2D12D1043@gmail.com>
Message-ID: <6c29a8f8-a2ac-6d41-4376-2c90f9fdbc71@statistik.tu-dortmund.de>



On 02.12.2019 15:29, peter dalgaard wrote:
> Dunno if it helps, but the NOTE is about "checking data", which, as far as I can decipher the code, means that it is looking at datasets in the data/ directory. So I suspect that looking at *.R files is not going to be the right thing to do.
> 
> -pd
> 
>> On 2 Dec 2019, at 14:57 , Rafael Pereira <rafa.pereira.br at gmail.com> wrote:
>>
>> Hi all,
>>
>> I am trying to update my R package on CRAN but I am being requested to fix
>> this NOTE:
>>
>> checking data for non-ASCII characters ... NOTE Note: found 58 marked
>> Latin-1 strings

Have we really asked you to fix these?
Which packages is this?

Best,
Uwe Ligges


>
>> I have used to code below to identify my scripts that have strings using
>> non-ASCII characters. The problem is that in most cases these non-ASCII
>> characters are used in the documentation of functions, so I cannot simply
>> convert their encoding using iconv() for example
>>
>> # Find scripts using non-ASCII characters
>>   f <- list.files(pattern = "*.R", recursive = T)
>>   r <- lapply(f, tools::showNonASCIIfile)
>>
>> I've tried (1) reopening and (2) resaving those scripts with UTF-8
>> encoding, (3) setting UTF-8 as the default encoding of the project, but
>> nothing seems to fix this issue. Any suggestions?
>>
>> obs. I've posted this question on SO
>> https://stackoverflow.com/questions/59139923/fix-non-ascii-characters-in-r-packages
>>
>> best,
>>
>> Rafael Pereira
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Mon Dec  2 18:46:47 2019
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael Pereira)
Date: Mon, 2 Dec 2019 14:46:47 -0300
Subject: [R-pkg-devel] Fix non-ASCII characters in R packages
In-Reply-To: <6c29a8f8-a2ac-6d41-4376-2c90f9fdbc71@statistik.tu-dortmund.de>
References: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>
 <3FA61301-E5CD-4BA7-AC73-16C2D12D1043@gmail.com>
 <6c29a8f8-a2ac-6d41-4376-2c90f9fdbc71@statistik.tu-dortmund.de>
Message-ID: <6F73B92E-155E-46BC-B597-7ABCD0DF04A9@gmail.com>

Thanks for the heads up, Ivan. In any case, I?ll change the encoding of the database. 

Uwe, I?m faxing this issue in the geobr package 

Rafael H.M. Pereira


> On 2 Dec 2019, at 13:39, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
>> On 02.12.2019 15:29, peter dalgaard wrote:
>> Dunno if it helps, but the NOTE is about "checking data", which, as far as I can decipher the code, means that it is looking at datasets in the data/ directory. So I suspect that looking at *.R files is not going to be the right thing to do.
>> -pd
>>> On 2 Dec 2019, at 14:57 , Rafael Pereira <rafa.pereira.br at gmail.com> wrote:
>>> 
>>> Hi all,
>>> 
>>> I am trying to update my R package on CRAN but I am being requested to fix
>>> this NOTE:
>>> 
>>> checking data for non-ASCII characters ... NOTE Note: found 58 marked
>>> Latin-1 strings
> 
> Have we really asked you to fix these?
> Which packages is this?
> 
> Best,
> Uwe Ligges
> 
> 
>> 
>>> I have used to code below to identify my scripts that have strings using
>>> non-ASCII characters. The problem is that in most cases these non-ASCII
>>> characters are used in the documentation of functions, so I cannot simply
>>> convert their encoding using iconv() for example
>>> 
>>> # Find scripts using non-ASCII characters
>>>  f <- list.files(pattern = "*.R", recursive = T)
>>>  r <- lapply(f, tools::showNonASCIIfile)
>>> 
>>> I've tried (1) reopening and (2) resaving those scripts with UTF-8
>>> encoding, (3) setting UTF-8 as the default encoding of the project, but
>>> nothing seems to fix this issue. Any suggestions?
>>> 
>>> obs. I've posted this question on SO
>>> https://stackoverflow.com/questions/59139923/fix-non-ascii-characters-in-r-packages
>>> 
>>> best,
>>> 
>>> Rafael Pereira
>>> 
>>>    [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Dec  2 20:36:57 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 2 Dec 2019 20:36:57 +0100
Subject: [R-pkg-devel] Fix non-ASCII characters in R packages
In-Reply-To: <6F73B92E-155E-46BC-B597-7ABCD0DF04A9@gmail.com>
References: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>
 <3FA61301-E5CD-4BA7-AC73-16C2D12D1043@gmail.com>
 <6c29a8f8-a2ac-6d41-4376-2c90f9fdbc71@statistik.tu-dortmund.de>
 <6F73B92E-155E-46BC-B597-7ABCD0DF04A9@gmail.com>
Message-ID: <c56444b2-da1b-a533-4885-b37467109083@statistik.tu-dortmund.de>

OK, but this note did not lead to a rejection (and the mail we sent did 
not even include the Note you apparently cited from the check.log)

The actual issues are:


   Found the following (possibly) invalid URLs:
     URL: https://cran.r-project.org/web/packages/geobr/index.html
       From: README.md
             NEWS.md
       Status: 200
       Message: OK
       CRAN URL not in canonical form

     URL: 
https://cran.r-project.org/web/packages/geobr/vignettes/intro_to_geobr.html
       From: README.md
       Status: 200
       Message: OK
       CRAN URL not in canonical form

     The canonical URL of the CRAN page for a package is
       https://CRAN.R-project.org/package=pkgname


Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: for hidden files and directories, Result: NOTE
   Found the following hidden files and directories:
     .travis.yml
   These were most likely included in error. See section 'Package
   structure' in the 'Writing R Extensions' manual.



Best,
Uwe Ligges




On 02.12.2019 18:46, Rafael Pereira wrote:
> Thanks for the heads up, Ivan. In any case, I?ll change the encoding of the database.
> 
> Uwe, I?m faxing this issue in the geobr package
> 
> Rafael H.M. Pereira
> 
> 
>> On 2 Dec 2019, at 13:39, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>>
>>
>>> On 02.12.2019 15:29, peter dalgaard wrote:
>>> Dunno if it helps, but the NOTE is about "checking data", which, as far as I can decipher the code, means that it is looking at datasets in the data/ directory. So I suspect that looking at *.R files is not going to be the right thing to do.
>>> -pd
>>>> On 2 Dec 2019, at 14:57 , Rafael Pereira <rafa.pereira.br at gmail.com> wrote:
>>>>
>>>> Hi all,
>>>>
>>>> I am trying to update my R package on CRAN but I am being requested to fix
>>>> this NOTE:
>>>>
>>>> checking data for non-ASCII characters ... NOTE Note: found 58 marked
>>>> Latin-1 strings
>>
>> Have we really asked you to fix these?
>> Which packages is this?
>>
>> Best,
>> Uwe Ligges
>>
>>
>>>
>>>> I have used to code below to identify my scripts that have strings using
>>>> non-ASCII characters. The problem is that in most cases these non-ASCII
>>>> characters are used in the documentation of functions, so I cannot simply
>>>> convert their encoding using iconv() for example
>>>>
>>>> # Find scripts using non-ASCII characters
>>>>   f <- list.files(pattern = "*.R", recursive = T)
>>>>   r <- lapply(f, tools::showNonASCIIfile)
>>>>
>>>> I've tried (1) reopening and (2) resaving those scripts with UTF-8
>>>> encoding, (3) setting UTF-8 as the default encoding of the project, but
>>>> nothing seems to fix this issue. Any suggestions?
>>>>
>>>> obs. I've posted this question on SO
>>>> https://stackoverflow.com/questions/59139923/fix-non-ascii-characters-in-r-packages
>>>>
>>>> best,
>>>>
>>>> Rafael Pereira
>>>>
>>>>     [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@|@@pere|r@@br @end|ng |rom gm@||@com  Tue Dec  3 02:33:27 2019
From: r@|@@pere|r@@br @end|ng |rom gm@||@com (Rafael Pereira)
Date: Mon, 2 Dec 2019 22:33:27 -0300
Subject: [R-pkg-devel] Fix non-ASCII characters in R packages
In-Reply-To: <c56444b2-da1b-a533-4885-b37467109083@statistik.tu-dortmund.de>
References: <CAA42DG=FjrqssEwnPJ+RdrG=yYFA1zGFSJ6ES2fa8B-B_-zAKg@mail.gmail.com>
 <3FA61301-E5CD-4BA7-AC73-16C2D12D1043@gmail.com>
 <6c29a8f8-a2ac-6d41-4376-2c90f9fdbc71@statistik.tu-dortmund.de>
 <6F73B92E-155E-46BC-B597-7ABCD0DF04A9@gmail.com>
 <c56444b2-da1b-a533-4885-b37467109083@statistik.tu-dortmund.de>
Message-ID: <CAA42DGm2fiwSbshZBg0p=Wwxf1zA22uPdNTC2L0aH4QTQAAAnQ@mail.gmail.com>

Thank you for the clarification,  Uwe Ligges.

best,

Rafael Pereira

On Mon, Dec 2, 2019 at 4:36 PM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> OK, but this note did not lead to a rejection (and the mail we sent did
> not even include the Note you apparently cited from the check.log)
>
> The actual issues are:
>
>
>    Found the following (possibly) invalid URLs:
>      URL: https://cran.r-project.org/web/packages/geobr/index.html
>        From: README.md
>              NEWS.md
>        Status: 200
>        Message: OK
>        CRAN URL not in canonical form
>
>      URL:
> https://cran.r-project.org/web/packages/geobr/vignettes/intro_to_geobr.html
>        From: README.md
>        Status: 200
>        Message: OK
>        CRAN URL not in canonical form
>
>      The canonical URL of the CRAN page for a package is
>        https://CRAN.R-project.org/package=pkgname
>
>
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> Check: for hidden files and directories, Result: NOTE
>    Found the following hidden files and directories:
>      .travis.yml
>    These were most likely included in error. See section 'Package
>    structure' in the 'Writing R Extensions' manual.
>
>
>
> Best,
> Uwe Ligges
>
>
>
>
> On 02.12.2019 18:46, Rafael Pereira wrote:
> > Thanks for the heads up, Ivan. In any case, I?ll change the encoding of
> the database.
> >
> > Uwe, I?m faxing this issue in the geobr package
> >
> > Rafael H.M. Pereira
> >
> >
> >> On 2 Dec 2019, at 13:39, Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
> >>
> >>
> >>
> >>> On 02.12.2019 15:29, peter dalgaard wrote:
> >>> Dunno if it helps, but the NOTE is about "checking data", which, as
> far as I can decipher the code, means that it is looking at datasets in the
> data/ directory. So I suspect that looking at *.R files is not going to be
> the right thing to do.
> >>> -pd
> >>>> On 2 Dec 2019, at 14:57 , Rafael Pereira <rafa.pereira.br at gmail.com>
> wrote:
> >>>>
> >>>> Hi all,
> >>>>
> >>>> I am trying to update my R package on CRAN but I am being requested
> to fix
> >>>> this NOTE:
> >>>>
> >>>> checking data for non-ASCII characters ... NOTE Note: found 58 marked
> >>>> Latin-1 strings
> >>
> >> Have we really asked you to fix these?
> >> Which packages is this?
> >>
> >> Best,
> >> Uwe Ligges
> >>
> >>
> >>>
> >>>> I have used to code below to identify my scripts that have strings
> using
> >>>> non-ASCII characters. The problem is that in most cases these
> non-ASCII
> >>>> characters are used in the documentation of functions, so I cannot
> simply
> >>>> convert their encoding using iconv() for example
> >>>>
> >>>> # Find scripts using non-ASCII characters
> >>>>   f <- list.files(pattern = "*.R", recursive = T)
> >>>>   r <- lapply(f, tools::showNonASCIIfile)
> >>>>
> >>>> I've tried (1) reopening and (2) resaving those scripts with UTF-8
> >>>> encoding, (3) setting UTF-8 as the default encoding of the project,
> but
> >>>> nothing seems to fix this issue. Any suggestions?
> >>>>
> >>>> obs. I've posted this question on SO
> >>>>
> https://stackoverflow.com/questions/59139923/fix-non-ascii-characters-in-r-packages
> >>>>
> >>>> best,
> >>>>
> >>>> Rafael Pereira
> >>>>
> >>>>     [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-package-devel at r-project.org mailing list
> >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Tue Dec  3 16:36:19 2019
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Tue, 3 Dec 2019 15:36:19 +0000
Subject: [R-pkg-devel] Including in my vignette a figure drawn outside R
Message-ID: <c182bcf8-6da4-5110-1322-b5b75cfe44dc@dewey.myzen.co.uk>

I am planning to include a flow-chart in the vignette of one of my 
packages (metap). I am planning to draw it using dot from Graphviz. I 
know that there is Rgraphviz which would do the whole thing in R but I 
do this sort of thing rarely and I suspect the overhead of learning how 
to do it in Rgraphviz would outweigh the benefit.

So my question is: if I wish to be a good Open Source citizen should I 
just bundle the .pdf file resulting from dot with the vignette or should 
I provide the .gv file which generated it? I think from reading Writing 
R Extensions that in either case I just put them in the directory along 
with my .Rnw file but please disabuse me of that impression if false.

The package will need to live on CRAN if that makes a difference.

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Dec  3 16:47:45 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 03 Dec 2019 07:47:45 -0800
Subject: [R-pkg-devel] Including in my vignette a figure drawn outside R
In-Reply-To: <c182bcf8-6da4-5110-1322-b5b75cfe44dc@dewey.myzen.co.uk>
References: <c182bcf8-6da4-5110-1322-b5b75cfe44dc@dewey.myzen.co.uk>
Message-ID: <067D6E17-9895-4EFA-8FB7-4897D12B84C3@dcn.davis.ca.us>

You could use DiagrammeR.

On December 3, 2019 7:36:19 AM PST, Michael Dewey <lists at dewey.myzen.co.uk> wrote:
>I am planning to include a flow-chart in the vignette of one of my 
>packages (metap). I am planning to draw it using dot from Graphviz. I 
>know that there is Rgraphviz which would do the whole thing in R but I 
>do this sort of thing rarely and I suspect the overhead of learning how
>
>to do it in Rgraphviz would outweigh the benefit.
>
>So my question is: if I wish to be a good Open Source citizen should I 
>just bundle the .pdf file resulting from dot with the vignette or
>should 
>I provide the .gv file which generated it? I think from reading Writing
>
>R Extensions that in either case I just put them in the directory along
>
>with my .Rnw file but please disabuse me of that impression if false.
>
>The package will need to live on CRAN if that makes a difference.

-- 
Sent from my phone. Please excuse my brevity.


From edd @end|ng |rom deb|@n@org  Tue Dec  3 17:17:19 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 3 Dec 2019 10:17:19 -0600
Subject: [R-pkg-devel] Including in my vignette a figure drawn outside R
In-Reply-To: <c182bcf8-6da4-5110-1322-b5b75cfe44dc@dewey.myzen.co.uk>
References: <c182bcf8-6da4-5110-1322-b5b75cfe44dc@dewey.myzen.co.uk>
Message-ID: <24038.35471.804746.680331@rob.eddelbuettel.com>


On 3 December 2019 at 15:36, Michael Dewey wrote:
| I am planning to include a flow-chart in the vignette of one of my 
| packages (metap). I am planning to draw it using dot from Graphviz. I 
| know that there is Rgraphviz which would do the whole thing in R but I 
| do this sort of thing rarely and I suspect the overhead of learning how 
| to do it in Rgraphviz would outweigh the benefit.
| 
| So my question is: if I wish to be a good Open Source citizen should I 
| just bundle the .pdf file resulting from dot with the vignette or should 

That seems like it is the appropriate move.

| I provide the .gv file which generated it? I think from reading Writing 
| R Extensions that in either case I just put them in the directory along 
| with my .Rnw file but please disabuse me of that impression if false.

You can use subdirectories in the source repository such that the sources are
present in the .tar.gz but are not necessarily installed with the package.
 
Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From qu|k@||ver67213 @end|ng |rom y@hoo@com  Wed Dec  4 19:02:30 2019
From: qu|k@||ver67213 @end|ng |rom y@hoo@com (Mat Fok)
Date: Wed, 4 Dec 2019 18:02:30 +0000 (UTC)
Subject: [R-pkg-devel] New Package olr 4 NOTES
References: <1968887037.5809414.1575482550388.ref@mail.yahoo.com>
Message-ID: <1968887037.5809414.1575482550388@mail.yahoo.com>

Hi All,
This is the first time I am trying to upload a package. It is fun learning this stuff.
Thank you all for kindly looking at the NOTES.
This is the log I recevied from CRAN volunteers:?https://win-builder.r-project.org/incoming_pretest/olr_1.0.0.2000_20191129_024844/Windows/00check.log
(I was wondering how to reproduce that log. I have run other things like devtools::check())

The package is here:?https://github.com/MatHatter/olr_r/tree/master/Rstuff

I will address every problem below:
1. OK. Not misspelled:
Possibly mis-spelled words in DESCRIPTION:
  olr (8:18, 9:20)
2. FIXED thisThe Description field should not start with the package name,
  'This package' or similar.
3.?FIXED thisThe Description field contains
  https://pypi.org/project/olr/.
Please enclose URLs in angle brackets (<...>).
4. Don't know how to fix this, unless it is not anything.
The build time stamp is missing.
5. First I took these files out of the folder completely, but then I thought that it might be needed for something and .Rhistory probably will be there no matter what so I used the function
> usethis::use_build_ignore(c(".Rproj.user", ".gitignore", ".Rhistory"))? Setting active project to 'C:/Rstuff/olr'? Adding '^\\.gitignore$', '^\\.Rhistory$' to '.Rbuildignore'
but as you see?.Rproj.user was already in my?.Rbuildignore so I don't know if this is going to work.* checking for hidden files and directories ... NOTE
Found the following hidden files and directories:
  .Rhistory
  .gitignore
  .Rproj.user
These were most likely included in error. See section 'Package
structure' in the 'Writing R Extensions' manual.

6. Lastly, I do not know how to fix this. I used the use_gpl3_license() I believe.
* checking top-level files ... NOTE
Non-standard files/directories found at top level:
  'LICENSE.md' 'olr.Rproj'
FYI,This is what my .Rbuildignore file looks like^olr\.Rproj$^\.Rproj\.user$^LICENSE\.md$^\.gitignore$^\.Rhistory$
Thank you all so much.
From,
Mathew Fok





	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec  4 20:11:12 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 4 Dec 2019 14:11:12 -0500
Subject: [R-pkg-devel] New Package olr 4 NOTES
In-Reply-To: <1968887037.5809414.1575482550388@mail.yahoo.com>
References: <1968887037.5809414.1575482550388.ref@mail.yahoo.com>
 <1968887037.5809414.1575482550388@mail.yahoo.com>
Message-ID: <ff859f45-9d37-1268-dd93-70256d5ef730@gmail.com>

On 04/12/2019 1:02 p.m., Mat Fok via R-package-devel wrote:
> Hi All,
> This is the first time I am trying to upload a package. It is fun learning this stuff.
> Thank you all for kindly looking at the NOTES.
> This is the log I recevied from CRAN volunteers:?https://win-builder.r-project.org/incoming_pretest/olr_1.0.0.2000_20191129_024844/Windows/00check.log
> (I was wondering how to reproduce that log. I have run other things like devtools::check())
> 
> The package is here:?https://github.com/MatHatter/olr_r/tree/master/Rstuff
> 
> I will address every problem below:
> 1. OK. Not misspelled:
> Possibly mis-spelled words in DESCRIPTION:
>    olr (8:18, 9:20)
> 2. FIXED thisThe Description field should not start with the package name,
>    'This package' or similar.
> 3.?FIXED thisThe Description field contains
>    https://pypi.org/project/olr/.
> Please enclose URLs in angle brackets (<...>).
> 4. Don't know how to fix this, unless it is not anything.
> The build time stamp is missing.

That's a sign that you didn't build the package using "R CMD build" at 
the command line (or one of the R functions that calls it).  Don't use 
tar directly to create it, let R do it (because adding a timestamp is 
not the only thing it does).

If you used a devtools function to build the tarball, then you probably 
did something wrong, but it's hard to say what without seeing the 
command you used.  Or maybe devtools has a bug, but it's pretty widely 
used, so I doubt that.

> 5. First I took these files out of the folder completely, but then I thought that it might be needed for something and .Rhistory probably will be there no matter what so I used the function
>> usethis::use_build_ignore(c(".Rproj.user", ".gitignore", ".Rhistory"))? Setting active project to 'C:/Rstuff/olr'? Adding '^\\.gitignore$', '^\\.Rhistory$' to '.Rbuildignore'
> but as you see?.Rproj.user was already in my?.Rbuildignore so I don't know if this is going to work.* checking for hidden files and directories ... NOTE
> Found the following hidden files and directories:
>    .Rhistory
>    .gitignore
>    .Rproj.user
> These were most likely included in error. See section 'Package
> structure' in the 'Writing R Extensions' manual.

If you had .Rbuildignore set to ignore them, then R would not put them 
in the tarball.

Duncan Murdoch

> 
> 6. Lastly, I do not know how to fix this. I used the use_gpl3_license() I believe.
> * checking top-level files ... NOTE
> Non-standard files/directories found at top level:
>    'LICENSE.md' 'olr.Rproj'
> FYI,This is what my .Rbuildignore file looks like^olr\.Rproj$^\.Rproj\.user$^LICENSE\.md$^\.gitignore$^\.Rhistory$
> Thank you all so much.
> From,
> Mathew Fok


From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Wed Dec  4 22:53:55 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Wed, 4 Dec 2019 21:53:55 +0000
Subject: [R-pkg-devel] Static PDF Vignette
Message-ID: <0e3eb50c2d9c427c97dcab777232aa2a@sfu.ca>

Hi,


I followed these instructions, (https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/), to add a pdf (perfectphyloR.pdf) as the vignette of my package (perfectphyloR). However, I am getting the following Warning message and  NOTE from the win-builder:


Warning messge:


* checking files in 'vignettes' ... WARNING
Files in the 'vignettes' directory but no files in 'inst/doc':
  'perfectphyloR.pdf'


NOTE:


* checking for hidden files and directories ... NOTE
Found the following hidden files and directories:
  vignettes/.Rnw
These were most likely included in error. See section 'Package
structure' in the 'Writing R Extensions' manual.

CRAN-pack does not know about
  vignettes/.Rnw


I am having a hardship to fix those two. Could someone direct me to fix those issue?


Thank you!


Charith.

	[[alternative HTML version deleted]]


From qu|k@||ver67213 @end|ng |rom y@hoo@com  Wed Dec  4 23:25:47 2019
From: qu|k@||ver67213 @end|ng |rom y@hoo@com (Mat Fok)
Date: Wed, 4 Dec 2019 22:25:47 +0000 (UTC)
Subject: [R-pkg-devel] New Package olr 4 NOTES
In-Reply-To: <ff859f45-9d37-1268-dd93-70256d5ef730@gmail.com>
References: <1968887037.5809414.1575482550388.ref@mail.yahoo.com>
 <1968887037.5809414.1575482550388@mail.yahoo.com>
 <ff859f45-9d37-1268-dd93-70256d5ef730@gmail.com>
Message-ID: <696279279.2402885.1575498347040@mail.yahoo.com>

Hi,
Thank you. I am wondering why the log would output .Rproj.user when it was already in the .Rignorefile. Hope the .Rignore file is correct anyways as I have mentioned below.
Thanks,
Mathew


Sent from Yahoo Mail for iPhone


On Wednesday, December 4, 2019, 2:11 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

On 04/12/2019 1:02 p.m., Mat Fok via R-package-devel wrote:
> Hi All,
> This is the first time I am trying to upload a package. It is fun learning this stuff.
> Thank you all for kindly looking at the NOTES.
> This is the log I recevied from CRAN volunteers:?https://win-builder.r-project.org/incoming_pretest/olr_1.0.0.2000_20191129_024844/Windows/00check.log
> (I was wondering how to reproduce that log. I have run other things like devtools::check())
> 
> The package is here:?https://github.com/MatHatter/olr_r/tree/master/Rstuff
> 
> I will address every problem below:
> 1. OK. Not misspelled:
> Possibly mis-spelled words in DESCRIPTION:
>? ? olr (8:18, 9:20)
> 2. FIXED thisThe Description field should not start with the package name,
>? ? 'This package' or similar.
> 3.?FIXED thisThe Description field contains
>? ? https://pypi.org/project/olr/.
> Please enclose URLs in angle brackets (<...>).
> 4. Don't know how to fix this, unless it is not anything.
> The build time stamp is missing.

That's a sign that you didn't build the package using "R CMD build" at 
the command line (or one of the R functions that calls it).? Don't use 
tar directly to create it, let R do it (because adding a timestamp is 
not the only thing it does).

If you used a devtools function to build the tarball, then you probably 
did something wrong, but it's hard to say what without seeing the 
command you used.? Or maybe devtools has a bug, but it's pretty widely 
used, so I doubt that.

> 5. First I took these files out of the folder completely, but then I thought that it might be needed for something and .Rhistory probably will be there no matter what so I used the function
>> usethis::use_build_ignore(c(".Rproj.user", ".gitignore", ".Rhistory"))? Setting active project to 'C:/Rstuff/olr'? Adding '^\\.gitignore$', '^\\.Rhistory$' to '.Rbuildignore'
> but as you see?.Rproj.user was already in my?.Rbuildignore so I don't know if this is going to work.* checking for hidden files and directories ... NOTE
> Found the following hidden files and directories:
>? ? .Rhistory
>? ? .gitignore
>? ? .Rproj.user
> These were most likely included in error. See section 'Package
> structure' in the 'Writing R Extensions' manual.

If you had .Rbuildignore set to ignore them, then R would not put them 
in the tarball.

Duncan Murdoch

> 
> 6. Lastly, I do not know how to fix this. I used the use_gpl3_license() I believe.
> * checking top-level files ... NOTE
> Non-standard files/directories found at top level:
>? ? 'LICENSE.md' 'olr.Rproj'
> FYI,This is what my .Rbuildignore file looks like^olr\.Rproj$^\.Rproj\.user$^LICENSE\.md$^\.gitignore$^\.Rhistory$
> Thank you all so much.
> From,
> Mathew Fok




	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Wed Dec  4 23:46:25 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 4 Dec 2019 23:46:25 +0100
Subject: [R-pkg-devel] Static PDF Vignette
In-Reply-To: <0e3eb50c2d9c427c97dcab777232aa2a@sfu.ca>
References: <0e3eb50c2d9c427c97dcab777232aa2a@sfu.ca>
Message-ID: <CALEXWq3AZp_-W=VWrJrF0WvOvZTqr+zbX+SojzA59GmrNbLkag@mail.gmail.com>

On Wed, 4 Dec 2019 at 22:54, Charith Karunarathna
<charith_karunarathna at sfu.ca> wrote:
>
> Hi,
>
> I followed these instructions, (https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/), to add a pdf (perfectphyloR.pdf) as the vignette of my package (perfectphyloR). However, I am getting the following Warning message and  NOTE from the win-builder:
>
> Warning messge:
>
> * checking files in 'vignettes' ... WARNING
> Files in the 'vignettes' directory but no files in 'inst/doc':
>   'perfectphyloR.pdf'
>
> NOTE:
>
> * checking for hidden files and directories ... NOTE
> Found the following hidden files and directories:
>   vignettes/.Rnw
> These were most likely included in error. See section 'Package
> structure' in the 'Writing R Extensions' manual.
>
> CRAN-pack does not know about
>   vignettes/.Rnw
>
> I am having a hardship to fix those two. Could someone direct me to fix those issue?

The post doesn't mean ".Rnw" literally. Give it a filename instead of
just .Rnw: perfectphyloR.Rnw seems appropriate.

I?aki


From j@me@@d@|g|e|@h @end|ng |rom n|h@gov  Thu Dec  5 04:48:03 2019
From: j@me@@d@|g|e|@h @end|ng |rom n|h@gov (Dalgleish, James (NIH/NCI) [V])
Date: Thu, 5 Dec 2019 03:48:03 +0000
Subject: [R-pkg-devel] Issue with Biostrings-- can't find the base rgb
 function on r-devel
Message-ID: <BL0PR0901MB3795971DF5AA9E3E28A28AB4EE5C0@BL0PR0901MB3795.namprd09.prod.outlook.com>

Question:

NIPTeR is experiencing new warnings when loading Biostrings. I have the exact same warnings with my package, CNVScope.

It seems a little odd that the base function rgb cannot be found. What can cause a base package to not be found? I can't replicate this issue on either of my linux or windows machines or on winbuilder.

I have already asked the Bioconductor community, but didn't get a response (https://support.bioconductor.org/p/126878/).

Thanks,
James Dalgleish
Maintainer, CNVScope
NIH/NCI
Source: https://cran.r-project.org/web/checks/check_results_NIPTeR.html
Check Details
Version: 1.0.2
Check: whether the package can be unloaded cleanly
Result: WARN
    Error: package or namespace load failed for 'NIPTeR':
     .onLoad failed in loadNamespace() for 'Biostrings', details:
     call: rgb(1, 1, 1)
     error: could not find function "rgb"
    Execution halted
Flavor: r-devel-linux-x86_64-debian-clang

Version: 1.0.2
Check: whether the namespace can be loaded with stated dependencies
Result: WARN
    Error: .onLoad failed in loadNamespace() for 'Biostrings', details:
     call: rgb(1, 1, 1)
     error: could not find function "rgb"
    Execution halted

    A namespace must be able to be loaded with just the base namespace
    loaded: otherwise if the namespace gets loaded by a saved object, the
    session will be unable to start.

    Probably some imports need to be declared in the NAMESPACE file.
Flavor: r-devel-linux-x86_64-debian-clang

Version: 1.0.2
Check: dependencies in R code
Result: NOTE
    Error: package or namespace load failed for 'NIPTeR':
     .onLoad failed in loadNamespace() for 'Biostrings', details:
     call: rgb(1, 1, 1)
     error: could not find function "rgb"
    Call sequence:
    6: stop(msg, call. = FALSE, domain = NA)
    5: value[[3L]](cond)
    4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
    3: tryCatchList(expr, classes, parentenv, handlers)
    2: tryCatch({
     attr(package, "LibPath") <- which.lib.loc
     ns <- loadNamespace(package, lib.loc)
     env <- attachNamespace(ns, pos = pos, deps, exclude, include.only)
     }, error = function(e) {
     P <- if (!is.null(cc <- conditionCall(e)))
     paste(" in", deparse(cc)[1L])
     else ""
     msg <- gettextf("package or namespace load failed for %s%s:\n %s",
     sQuote(package), P, conditionMessage(e))
     if (logical.return)
     message(paste("Error:", msg), domain = NA)
     else stop(msg, call. = FALSE, domain = NA)
     })
    1: library(package, lib.loc = lib.loc, character.only = T
    Execution halted
Flavor: r-devel-linux-x86_64-debian-clang

Version: 1.0.2
Check: R code for possible problems
Result: NOTE
    Error: .onLoad failed in loadNamespace() for 'Biostrings', details:
     call: rgb(1, 1, 1)
     error: could not find function "rgb"
    Execution halted
Flavor: r-devel-linux-x86_64-debian-clang


	[[alternative HTML version deleted]]


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Thu Dec  5 05:19:47 2019
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Thu, 5 Dec 2019 15:19:47 +1100
Subject: [R-pkg-devel] Issue with Biostrings-- can't find the base rgb
 function on r-devel
In-Reply-To: <BL0PR0901MB3795971DF5AA9E3E28A28AB4EE5C0@BL0PR0901MB3795.namprd09.prod.outlook.com>
References: <BL0PR0901MB3795971DF5AA9E3E28A28AB4EE5C0@BL0PR0901MB3795.namprd09.prod.outlook.com>
Message-ID: <CAJmOi+O7Ra09fS2MUZH2T-DMGMuHLDjgs1_8XzfuUES+J+x71w@mail.gmail.com>

rgb is from package grDevices not package base.

On Thu, 5 Dec 2019 at 2:48 pm, Dalgleish, James (NIH/NCI) [V] via
R-package-devel <r-package-devel at r-project.org> wrote:

> Question:
>
> NIPTeR is experiencing new warnings when loading Biostrings. I have the
> exact same warnings with my package, CNVScope.
>
> It seems a little odd that the base function rgb cannot be found. What can
> cause a base package to not be found? I can't replicate this issue on
> either of my linux or windows machines or on winbuilder.
>
> I have already asked the Bioconductor community, but didn't get a response
> (https://support.bioconductor.org/p/126878/).
>
> Thanks,
> James Dalgleish
> Maintainer, CNVScope
> NIH/NCI
> Source: https://cran.r-project.org/web/checks/check_results_NIPTeR.html
> Check Details
> Version: 1.0.2
> Check: whether the package can be unloaded cleanly
> Result: WARN
>     Error: package or namespace load failed for 'NIPTeR':
>      .onLoad failed in loadNamespace() for 'Biostrings', details:
>      call: rgb(1, 1, 1)
>      error: could not find function "rgb"
>     Execution halted
> Flavor: r-devel-linux-x86_64-debian-clang
>
> Version: 1.0.2
> Check: whether the namespace can be loaded with stated dependencies
> Result: WARN
>     Error: .onLoad failed in loadNamespace() for 'Biostrings', details:
>      call: rgb(1, 1, 1)
>      error: could not find function "rgb"
>     Execution halted
>
>     A namespace must be able to be loaded with just the base namespace
>     loaded: otherwise if the namespace gets loaded by a saved object, the
>     session will be unable to start.
>
>     Probably some imports need to be declared in the NAMESPACE file.
> Flavor: r-devel-linux-x86_64-debian-clang
>
> Version: 1.0.2
> Check: dependencies in R code
> Result: NOTE
>     Error: package or namespace load failed for 'NIPTeR':
>      .onLoad failed in loadNamespace() for 'Biostrings', details:
>      call: rgb(1, 1, 1)
>      error: could not find function "rgb"
>     Call sequence:
>     6: stop(msg, call. = FALSE, domain = NA)
>     5: value[[3L]](cond)
>     4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>     3: tryCatchList(expr, classes, parentenv, handlers)
>     2: tryCatch({
>      attr(package, "LibPath") <- which.lib.loc
>      ns <- loadNamespace(package, lib.loc)
>      env <- attachNamespace(ns, pos = pos, deps, exclude, include.only)
>      }, error = function(e) {
>      P <- if (!is.null(cc <- conditionCall(e)))
>      paste(" in", deparse(cc)[1L])
>      else ""
>      msg <- gettextf("package or namespace load failed for %s%s:\n %s",
>      sQuote(package), P, conditionMessage(e))
>      if (logical.return)
>      message(paste("Error:", msg), domain = NA)
>      else stop(msg, call. = FALSE, domain = NA)
>      })
>     1: library(package, lib.loc = lib.loc, character.only = T
>     Execution halted
> Flavor: r-devel-linux-x86_64-debian-clang
>
> Version: 1.0.2
> Check: R code for possible problems
> Result: NOTE
>     Error: .onLoad failed in loadNamespace() for 'Biostrings', details:
>      call: rgb(1, 1, 1)
>      error: could not find function "rgb"
>     Execution halted
> Flavor: r-devel-linux-x86_64-debian-clang
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Dec  5 09:19:46 2019
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 5 Dec 2019 09:19:46 +0100
Subject: [R-pkg-devel] New Package olr 4 NOTES
In-Reply-To: <696279279.2402885.1575498347040@mail.yahoo.com>
References: <1968887037.5809414.1575482550388.ref@mail.yahoo.com>
 <1968887037.5809414.1575482550388@mail.yahoo.com>
 <ff859f45-9d37-1268-dd93-70256d5ef730@gmail.com>
 <696279279.2402885.1575498347040@mail.yahoo.com>
Message-ID: <24040.48546.301797.469324@stat.math.ethz.ch>

>>>>> Mat Fok via R-package-devel 
>>>>>     on Wed, 4 Dec 2019 22:25:47 +0000 writes:

    > Hi,
    > Thank you. I am wondering why the log would output .Rproj.user when it was already in the .Rignorefile. Hope the .Rignore file is correct anyways as I have mentioned below.

If you really use .Rignore then no wonder you have problems.
The correct file name is  .Rbuildignore

Martin

    > Thanks,
    > Mathew


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Dec  5 09:32:22 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 5 Dec 2019 09:32:22 +0100
Subject: [R-pkg-devel] Issue with Biostrings-- can't find the base rgb
 function on r-devel
In-Reply-To: <CAJmOi+O7Ra09fS2MUZH2T-DMGMuHLDjgs1_8XzfuUES+J+x71w@mail.gmail.com>
References: <BL0PR0901MB3795971DF5AA9E3E28A28AB4EE5C0@BL0PR0901MB3795.namprd09.prod.outlook.com>
 <CAJmOi+O7Ra09fS2MUZH2T-DMGMuHLDjgs1_8XzfuUES+J+x71w@mail.gmail.com>
Message-ID: <559a2d44-1525-6a4c-b31d-6cf3b7567550@statistik.tu-dortmund.de>

That was a bug in Biostrings that has been fixed in the meantime.

Best,
Uwe Ligges

On 05.12.2019 05:19, Hugh Parsonage wrote:
> rgb is from package grDevices not package base.
> 
> On Thu, 5 Dec 2019 at 2:48 pm, Dalgleish, James (NIH/NCI) [V] via
> R-package-devel <r-package-devel at r-project.org> wrote:
> 
>> Question:
>>
>> NIPTeR is experiencing new warnings when loading Biostrings. I have the
>> exact same warnings with my package, CNVScope.
>>
>> It seems a little odd that the base function rgb cannot be found. What can
>> cause a base package to not be found? I can't replicate this issue on
>> either of my linux or windows machines or on winbuilder.
>>
>> I have already asked the Bioconductor community, but didn't get a response
>> (https://support.bioconductor.org/p/126878/).
>>
>> Thanks,
>> James Dalgleish
>> Maintainer, CNVScope
>> NIH/NCI
>> Source: https://cran.r-project.org/web/checks/check_results_NIPTeR.html
>> Check Details
>> Version: 1.0.2
>> Check: whether the package can be unloaded cleanly
>> Result: WARN
>>      Error: package or namespace load failed for 'NIPTeR':
>>       .onLoad failed in loadNamespace() for 'Biostrings', details:
>>       call: rgb(1, 1, 1)
>>       error: could not find function "rgb"
>>      Execution halted
>> Flavor: r-devel-linux-x86_64-debian-clang
>>
>> Version: 1.0.2
>> Check: whether the namespace can be loaded with stated dependencies
>> Result: WARN
>>      Error: .onLoad failed in loadNamespace() for 'Biostrings', details:
>>       call: rgb(1, 1, 1)
>>       error: could not find function "rgb"
>>      Execution halted
>>
>>      A namespace must be able to be loaded with just the base namespace
>>      loaded: otherwise if the namespace gets loaded by a saved object, the
>>      session will be unable to start.
>>
>>      Probably some imports need to be declared in the NAMESPACE file.
>> Flavor: r-devel-linux-x86_64-debian-clang
>>
>> Version: 1.0.2
>> Check: dependencies in R code
>> Result: NOTE
>>      Error: package or namespace load failed for 'NIPTeR':
>>       .onLoad failed in loadNamespace() for 'Biostrings', details:
>>       call: rgb(1, 1, 1)
>>       error: could not find function "rgb"
>>      Call sequence:
>>      6: stop(msg, call. = FALSE, domain = NA)
>>      5: value[[3L]](cond)
>>      4: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>>      3: tryCatchList(expr, classes, parentenv, handlers)
>>      2: tryCatch({
>>       attr(package, "LibPath") <- which.lib.loc
>>       ns <- loadNamespace(package, lib.loc)
>>       env <- attachNamespace(ns, pos = pos, deps, exclude, include.only)
>>       }, error = function(e) {
>>       P <- if (!is.null(cc <- conditionCall(e)))
>>       paste(" in", deparse(cc)[1L])
>>       else ""
>>       msg <- gettextf("package or namespace load failed for %s%s:\n %s",
>>       sQuote(package), P, conditionMessage(e))
>>       if (logical.return)
>>       message(paste("Error:", msg), domain = NA)
>>       else stop(msg, call. = FALSE, domain = NA)
>>       })
>>      1: library(package, lib.loc = lib.loc, character.only = T
>>      Execution halted
>> Flavor: r-devel-linux-x86_64-debian-clang
>>
>> Version: 1.0.2
>> Check: R code for possible problems
>> Result: NOTE
>>      Error: .onLoad failed in loadNamespace() for 'Biostrings', details:
>>       call: rgb(1, 1, 1)
>>       error: could not find function "rgb"
>>      Execution halted
>> Flavor: r-devel-linux-x86_64-debian-clang
>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From qu|k@||ver67213 @end|ng |rom y@hoo@com  Thu Dec  5 15:17:22 2019
From: qu|k@||ver67213 @end|ng |rom y@hoo@com (Mat Fok)
Date: Thu, 5 Dec 2019 14:17:22 +0000 (UTC)
Subject: [R-pkg-devel] New Package olr 4 NOTES
In-Reply-To: <24040.48546.301797.469324@stat.math.ethz.ch>
References: <1968887037.5809414.1575482550388.ref@mail.yahoo.com>
 <1968887037.5809414.1575482550388@mail.yahoo.com>
 <ff859f45-9d37-1268-dd93-70256d5ef730@gmail.com>
 <696279279.2402885.1575498347040@mail.yahoo.com>
 <24040.48546.301797.469324@stat.math.ethz.ch>
Message-ID: <397041645.6076935.1575555442514@mail.yahoo.com>

I meant .Rbuildignore.


Sent from Yahoo Mail for iPhone


On Thursday, December 5, 2019, 3:19 AM, Martin Maechler <maechler at stat.math.ethz.ch> wrote:

>>>>> Mat Fok via R-package-devel 
>>>>>? ? on Wed, 4 Dec 2019 22:25:47 +0000 writes:

? ? > Hi,
? ? > Thank you. I am wondering why the log would output .Rproj.user when it was already in the .Rignorefile. Hope the .Rignore file is correct anyways as I have mentioned below.

If you really use .Rignore then no wonder you have problems.
The correct file name is? .Rbuildignore

Martin

? ? > Thanks,
? ? > Mathew




	[[alternative HTML version deleted]]


From qu|k@||ver67213 @end|ng |rom y@hoo@com  Thu Dec  5 16:40:46 2019
From: qu|k@||ver67213 @end|ng |rom y@hoo@com (Mat Fok)
Date: Thu, 5 Dec 2019 15:40:46 +0000 (UTC)
Subject: [R-pkg-devel] New Package olr 4 NOTES
In-Reply-To: <26a3472cfb654678b9150df101d784a8@umanitoba.ca>
References: <1968887037.5809414.1575482550388.ref@mail.yahoo.com>
 <1968887037.5809414.1575482550388@mail.yahoo.com>
 <ff859f45-9d37-1268-dd93-70256d5ef730@gmail.com>
 <696279279.2402885.1575498347040@mail.yahoo.com>
 <24040.48546.301797.469324@stat.math.ethz.ch>
 <397041645.6076935.1575555442514@mail.yahoo.com>
 <26a3472cfb654678b9150df101d784a8@umanitoba.ca>
Message-ID: <400569961.6084919.1575560446509@mail.yahoo.com>

Hi Max,
Following your comment about, ".Rbuildignore is used by R CMD build to exclude some files from the bundled package. If you created the tar.gz file manually, then .Rbuildignore was, well, ignored. And .Rproj.user would then have been included in the tarball."
I assume that if I create the tar.gz file "automatically" through R and not 7zip, then the .Rbuildignore is not ignored and I won't have the problem of?.Rproj.user being included in the tarball:

devtools::build(pkg = "C:/Rstuff/olr", path = NULL, binary = FALSE, vignettes = TRUE, manual = FALSE, args = NULL, quiet = FALSE)

?? checking for file 'C:\Rstuff\olr/DESCRIPTION' ...-? preparing 'olr':?? checking DESCRIPTION meta-information ...-? checking for LF line-endings in source and make files and shell scripts-? checking for empty or unneeded directories-? building 'olr_1.0.0.2000.tar.gz'? ?[1] "C:/Rstuff/olr_1.0.0.2000.tar.gz"
Thank you very much!





On Thursday, December 5, 2019, 9:25 AM, Max Turgeon <Max.Turgeon at umanitoba.ca> wrote:

#yiv7416260906 -- P {margin-top:0;margin-bottom:0;}#yiv7416260906 
.Rbuildignore is used by R CMD build to exclude some files from the bundled package. If you created the tar.gz file manually, then .Rbuildignore was, well, ignored. And .Rproj.user would then have been included in the tarball.





Max Turgeon
Assistant ProfessorDepartment of Statistics
Department of Computer Science
University of Manitobamaxturgeon.ca





From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Mat Fok via R-package-devel <r-package-devel at r-project.org>
Sent: December 5, 2019 8:17 AM
To: Martin Maechler
Cc: R-package-devel
Subject: Re: [R-pkg-devel] New Package olr 4 NOTES?I meant .Rbuildignore.


Sent from Yahoo Mail for iPhone


On Thursday, December 5, 2019, 3:19 AM, Martin Maechler <maechler at stat.math.ethz.ch> wrote:

>>>>> Mat Fok via R-package-devel 
>>>>>? ? on Wed, 4 Dec 2019 22:25:47 +0000 writes:

? ? > Hi,
? ? > Thank you. I am wondering why the log would output .Rproj.user when it was already in the .Rignorefile. Hope the .Rignore file is correct anyways as I have mentioned below.

If you really use .Rignore then no wonder you have problems.
The correct file name is? .Rbuildignore

Martin

? ? > Thanks,
? ? > Mathew




??????? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel




	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Dec  5 21:59:37 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 05 Dec 2019 12:59:37 -0800
Subject: [R-pkg-devel] New Package olr 4 NOTES
In-Reply-To: <400569961.6084919.1575560446509@mail.yahoo.com>
References: <1968887037.5809414.1575482550388.ref@mail.yahoo.com>
 <1968887037.5809414.1575482550388@mail.yahoo.com>
 <ff859f45-9d37-1268-dd93-70256d5ef730@gmail.com>
 <696279279.2402885.1575498347040@mail.yahoo.com>
 <24040.48546.301797.469324@stat.math.ethz.ch>
 <397041645.6076935.1575555442514@mail.yahoo.com>
 <26a3472cfb654678b9150df101d784a8@umanitoba.ca>
 <400569961.6084919.1575560446509@mail.yahoo.com>
Message-ID: <F45368D7-4AFE-4E90-8424-C05A756031DE@dcn.davis.ca.us>

I have not had good luck building packages for final delivery using devtools... use the command line, Luke!

On December 5, 2019 7:40:46 AM PST, Mat Fok via R-package-devel <r-package-devel at r-project.org> wrote:
>Hi Max,
>Following your comment about, ".Rbuildignore is used by R CMD build to
>exclude some files from the bundled package. If you created the tar.gz
>file manually, then .Rbuildignore was, well, ignored. And .Rproj.user
>would then have been included in the tarball."
>I assume that if I create the tar.gz file "automatically" through R and
>not 7zip, then the .Rbuildignore is not ignored and I won't have the
>problem of?.Rproj.user being included in the tarball:
>
>devtools::build(pkg = "C:/Rstuff/olr", path = NULL, binary = FALSE,
>vignettes = TRUE, manual = FALSE, args = NULL, quiet = FALSE)
>
>?? checking for file 'C:\Rstuff\olr/DESCRIPTION' ...-? preparing
>'olr':?? checking DESCRIPTION meta-information ...-? checking for LF
>line-endings in source and make files and shell scripts-? checking for
>empty or unneeded directories-? building 'olr_1.0.0.2000.tar.gz'? ?[1]
>"C:/Rstuff/olr_1.0.0.2000.tar.gz"
>Thank you very much!
>
>
>
>
>
>On Thursday, December 5, 2019, 9:25 AM, Max Turgeon
><Max.Turgeon at umanitoba.ca> wrote:
>
>#yiv7416260906 -- P {margin-top:0;margin-bottom:0;}#yiv7416260906 
>.Rbuildignore is used by R CMD build to exclude some files from the
>bundled package. If you created the tar.gz file manually, then
>.Rbuildignore was, well, ignored. And .Rproj.user would then have been
>included in the tarball.
>
>
>
>
>
>Max Turgeon
>Assistant ProfessorDepartment of Statistics
>Department of Computer Science
>University of Manitobamaxturgeon.ca
>
>
>
>
>
>From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
>of Mat Fok via R-package-devel <r-package-devel at r-project.org>
>Sent: December 5, 2019 8:17 AM
>To: Martin Maechler
>Cc: R-package-devel
>Subject: Re: [R-pkg-devel] New Package olr 4 NOTES?I meant
>.Rbuildignore.
>
>
>Sent from Yahoo Mail for iPhone
>
>
>On Thursday, December 5, 2019, 3:19 AM, Martin Maechler
><maechler at stat.math.ethz.ch> wrote:
>
>>>>>> Mat Fok via R-package-devel 
>>>>>>? ? on Wed, 4 Dec 2019 22:25:47 +0000 writes:
>
>? ? > Hi,
>? ? > Thank you. I am wondering why the log would output .Rproj.user
>when it was already in the .Rignorefile. Hope the .Rignore file is
>correct anyways as I have mentioned below.
>
>If you really use .Rignore then no wonder you have problems.
>The correct file name is? .Rbuildignore
>
>Martin
>
>? ? > Thanks,
>? ? > Mathew
>
>
>
>
>??????? [[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Fri Dec  6 03:13:47 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Fri, 6 Dec 2019 02:13:47 +0000
Subject: [R-pkg-devel] Static PDF Vignette
In-Reply-To: <CALEXWq3AZp_-W=VWrJrF0WvOvZTqr+zbX+SojzA59GmrNbLkag@mail.gmail.com>
References: <0e3eb50c2d9c427c97dcab777232aa2a@sfu.ca>,
 <CALEXWq3AZp_-W=VWrJrF0WvOvZTqr+zbX+SojzA59GmrNbLkag@mail.gmail.com>
Message-ID: <e11bc55f11f84ea9a7512af65fbe3038@sfu.ca>

Hi,


I am trying to add a PDF file (perfectphyloR.pdf) as the vignette of my R package (perfectphyloR). When I check my package using win-builder, I am getting the following warning message:


* checking re-building of vignette outputs ... [2s] WARNING
Error in re-building vignettes:
  ...
Warning in system(paste(shQuote(texi2dvi), if (quiet) "--quiet" else "",  :
  running command '"D:\compiler\texmf\miktex\bin\texify.exe" --quiet --pdf "perfectphyloR.tex" --max-iterations=20 -I "D:/RCompile/recent/R-3.5.3/share/texmf/tex/latex" -I "D:/RCompile/recent/R-3.5.3/share/texmf/bibtex/bst"' had status 1
Error: running 'texi2dvi' on 'perfectphyloR.tex' failed

LaTeX errors:
!pdfTeX error: pdflatex.EXE (file ./perfectphyloR.pdf): reading image file fail
ed
 ==> Fatal error occurred, no output PDF file produced!
Execution halted


Could someone help me fix this issue?


Thank you!


Charith.

________________________________
From: I?aki Ucar <iucar at fedoraproject.org>
Sent: Wednesday, December 4, 2019 2:46:25 PM
To: Charith Karunarathna
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Static PDF Vignette

On Wed, 4 Dec 2019 at 22:54, Charith Karunarathna
<charith_karunarathna at sfu.ca> wrote:
>
> Hi,
>
> I followed these instructions, (https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/), to add a pdf (perfectphyloR.pdf) as the vignette of my package (perfectphyloR). However, I am getting the following Warning message and  NOTE from the win-builder:
>
> Warning messge:
>
> * checking files in 'vignettes' ... WARNING
> Files in the 'vignettes' directory but no files in 'inst/doc':
>   'perfectphyloR.pdf'
>
> NOTE:
>
> * checking for hidden files and directories ... NOTE
> Found the following hidden files and directories:
>   vignettes/.Rnw
> These were most likely included in error. See section 'Package
> structure' in the 'Writing R Extensions' manual.
>
> CRAN-pack does not know about
>   vignettes/.Rnw
>
> I am having a hardship to fix those two. Could someone direct me to fix those issue?

The post doesn't mean ".Rnw" literally. Give it a filename instead of
just .Rnw: perfectphyloR.Rnw seems appropriate.

I?aki

	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Fri Dec  6 09:43:48 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Fri, 6 Dec 2019 09:43:48 +0100
Subject: [R-pkg-devel] Package write access for storing new files
Message-ID: <E36081F8-06C4-4CE6-B1F7-DC7DEB8D3290@krugs.de>

Hi

I am writing a package which downloads files which become part of the package (only useful for functions in the package and independent of the working directory) into

	system.file("installedSchemes", package = "dmdScheme")

(See https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/b97e7b5ef116476e065aeec1da1050eecbd6adf7/R/scheme_install.R#L71-L75 for the function).

I know that is regulated for R packages, but I can?t find it.

Is this allowed for R packages? Will this be allowed for CRAN?

I would prefer not to allow custom paths here, as it would complicate things.

Thanks,

Rainer


--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982


From R@|ner @end|ng |rom krug@@de  Fri Dec  6 10:05:20 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Fri, 6 Dec 2019 10:05:20 +0100
Subject: [R-pkg-devel] CRAN submission with "possibly unsafe calls" or
 alternative approach?
Message-ID: <6EBEC12A-4D6B-449E-9D66-EABD2261E24A@krugs.de>

Hi

In my package `dmdScheme` I define three variables. Depending on a state in the package (a selected metadata schemes) these are set as followed from within the package:

```
  unlockBinding("dmdScheme_example", as.environment("package:dmdScheme"))
  assign("dmdScheme_example", scheme_example, "package:dmdScheme")
  lockBinding("dmdScheme_example", as.environment("package:dmdScheme"))


  scheme_raw <- as_dmdScheme_raw(scheme_example)
  unlockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))
  assign("dmdScheme_raw", scheme_raw, "package:dmdScheme")
  lockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))


  scheme <- as_dmdScheme(scheme_raw, keepData = FALSE, checkVersion = FALSE)
  unlockBinding("dmdScheme", as.environment("package:dmdScheme"))
  assign("dmdScheme", scheme, "package:dmdScheme")
  lockBinding("dmdScheme", as.environment("package:dmdScheme?))
```

( See https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/b97e7b5ef116476e065aeec1da1050eecbd6adf7/R/scheme_use.R#L37-L49 )

My reasoning is that I want to lock these variables, as they are essential to the functioning of the package.

But I get, probably not surprising, the following NOTE:


```
* checking R code for possible problems ... NOTE
Found the following possibly unsafe calls:
File ?dmdScheme/R/scheme_use.R?:
  unlockBinding("dmdScheme_example", as.environment("package:dmdScheme"))
  unlockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))
  unlockBinding("dmdScheme", as.environment("package:dmdScheme"))
```

For the submission to CRAN, Can I disregard this note and explain it during the submission?

My second question concerns the values itself. I set the variables to NULL in the /data folder in the package, but even after they are set as above, the valuee in `dmdScheme::dmdScheme` is still NULL:

```
> names(dmdScheme)
[1] "Experiment"       "Genus"            "Treatments"       "Measurement"
[5] "DataExtraction"   "DataFileMetaData"
> names(dmdScheme::dmdScheme)
NULL
>
```

Is there a way, that I can change the value of dmdScheme::? variables during runtime?

Thanks,

Rainer


--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982


From je||er|@ @end|ng |rom mrc-|mb@c@m@@c@uk  Fri Dec  6 10:12:43 2019
From: je||er|@ @end|ng |rom mrc-|mb@c@m@@c@uk (Gregory Jefferis)
Date: Fri, 6 Dec 2019 09:12:43 +0000
Subject: [R-pkg-devel] Package write access for storing new files
In-Reply-To: <E36081F8-06C4-4CE6-B1F7-DC7DEB8D3290@krugs.de>
References: <E36081F8-06C4-4CE6-B1F7-DC7DEB8D3290@krugs.de>
Message-ID: <D5D3E500-60A9-451A-A1FE-D8406542039C@mrc-lmb.cam.ac.uk>

I use rappdirs to construct a platform appropriate consistent package download directory. But for CRAN I believe you will need to obtain some kind of user confirmation at least once to allow this behaviour. Best, Greg. 

Sent from my iPhone

> On 6 Dec 2019, at 08:43, Rainer M Krug <Rainer at krugs.de> wrote:
> 
> Hi
> 
> I am writing a package which downloads files which become part of the package (only useful for functions in the package and independent of the working directory) into
> 
>    system.file("installedSchemes", package = "dmdScheme")
> 
> (See https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/b97e7b5ef116476e065aeec1da1050eecbd6adf7/R/scheme_install.R#L71-L75 for the function).
> 
> I know that is regulated for R packages, but I can?t find it.
> 
> Is this allowed for R packages? Will this be allowed for CRAN?
> 
> I would prefer not to allow custom paths here, as it would complicate things.
> 
> Thanks,
> 
> Rainer
> 
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:    +41 (0)44 635 47 64
> Cell:           +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
>        Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From R@|ner @end|ng |rom krug@@de  Fri Dec  6 11:45:30 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Fri, 6 Dec 2019 11:45:30 +0100
Subject: [R-pkg-devel] Package write access for storing new files
In-Reply-To: <D5D3E500-60A9-451A-A1FE-D8406542039C@mrc-lmb.cam.ac.uk>
References: <E36081F8-06C4-4CE6-B1F7-DC7DEB8D3290@krugs.de>
 <D5D3E500-60A9-451A-A1FE-D8406542039C@mrc-lmb.cam.ac.uk>
Message-ID: <B8D46AC4-2A04-4A4A-8F4F-4FFC47CFFCC6@krugs.de>

Thanks for the tip with rappdirs.

I am just not sure, how I should handle the questions, as it should also run in a shiny application?



> On 6 Dec 2019, at 10:12, Gregory Jefferis <jefferis at mrc-lmb.cam.ac.uk> wrote:
> 
> I use rappdirs to construct a platform appropriate consistent package download directory. But for CRAN I believe you will need to obtain some kind of user confirmation at least once to allow this behaviour. Best, Greg. 
> 
> Sent from my iPhone
> 
>> On 6 Dec 2019, at 08:43, Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> Hi
>> 
>> I am writing a package which downloads files which become part of the package (only useful for functions in the package and independent of the working directory) into
>> 
>>   system.file("installedSchemes", package = "dmdScheme")
>> 
>> (See https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/b97e7b5ef116476e065aeec1da1050eecbd6adf7/R/scheme_install.R#L71-L75 for the function).
>> 
>> I know that is regulated for R packages, but I can?t find it.
>> 
>> Is this allowed for R packages? Will this be allowed for CRAN?
>> 
>> I would prefer not to allow custom paths here, as it would complicate things.
>> 
>> Thanks,
>> 
>> Rainer
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office:    +41 (0)44 635 47 64
>> Cell:           +41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>>       Rainer at krugs.de
>> Skype:     RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From S@So@@ @end|ng |rom LIVE@FR  Fri Dec  6 11:48:43 2019
From: S@So@@ @end|ng |rom LIVE@FR (Sebastian SOSA)
Date: Fri, 6 Dec 2019 10:48:43 +0000
Subject: [R-pkg-devel] Rcpp specific Linux warning related to sprint function
Message-ID: <PR2PR03MB5178F37A8DA28E73506F9C4D855F0@PR2PR03MB5178.eurprd03.prod.outlook.com>

Dear all,

I am trying to submit my R package on CRAN however I have a specific Linux warning message related to a Rcpp function I found online and included in my package:
https://gallery.rcpp.org/articles/faster-data-frame-creation/

More specifically, the issue is related to sprint (lines 7 and 14) and is the following:
list_to_df.cpp:40:28: warning: '%d' directive writing between 1 and 10 bytes into a region of size 4 [-Wformat-overflow=]

I don't know what this is about and it will be difficult to me to try to solve it as I am on a Windows machine. Thanks in advance for your help.

Sebastian Sosa

------------------------------------------------------------------------------------
Sebastian Sosa, Ph.D.
USIAS Postdoctor fellow
Department of Ecology, Physiology and Ethology (DEPE)
Institut Pluridisciplinaire Hubert CURIEN (IPHC)
Strasbourg, France
s.sosa at live.fr


From je||er|@ @end|ng |rom mrc-|mb@c@m@@c@uk  Fri Dec  6 11:50:37 2019
From: je||er|@ @end|ng |rom mrc-|mb@c@m@@c@uk (Dr Gregory Jefferis)
Date: Fri, 06 Dec 2019 10:50:37 +0000
Subject: [R-pkg-devel] Package write access for storing new files
In-Reply-To: <B8D46AC4-2A04-4A4A-8F4F-4FFC47CFFCC6@krugs.de>
References: <E36081F8-06C4-4CE6-B1F7-DC7DEB8D3290@krugs.de>
 <D5D3E500-60A9-451A-A1FE-D8406542039C@mrc-lmb.cam.ac.uk>
 <B8D46AC4-2A04-4A4A-8F4F-4FFC47CFFCC6@krugs.de>
Message-ID: <BC487B3E-1841-41AF-BD63-6CC1DDF261FA@mrc-lmb.cam.ac.uk>

Possibly you can use the rappdirs location *if it exists* and tempdir() 
otherwise. You could make the rappdirs location when running the shiny 
app. Since the user has to do something to run the app, this is probably 
ok. I think the problem is that loading the package itself cannot result 
in a data download outside tempdir().

Best,

Greg.

On 6 Dec 2019, at 10:45, Rainer M Krug wrote:

> Thanks for the tip with rappdirs.
>
> I am just not sure, how I should handle the questions, as it should 
> also run in a shiny application?
>
>
>
>> On 6 Dec 2019, at 10:12, Gregory Jefferis 
>> <jefferis at mrc-lmb.cam.ac.uk> wrote:
>>
>> I use rappdirs to construct a platform appropriate consistent package 
>> download directory. But for CRAN I believe you will need to obtain 
>> some kind of user confirmation at least once to allow this behaviour. 
>> Best, Greg.
>>
>> Sent from my iPhone
>>
>>> On 6 Dec 2019, at 08:43, Rainer M Krug <Rainer at krugs.de> wrote:
>>>
>>> Hi
>>>
>>> I am writing a package which downloads files which become part of 
>>> the package (only useful for functions in the package and 
>>> independent of the working directory) into
>>>
>>>   system.file("installedSchemes", package = "dmdScheme")
>>>
>>> (See 
>>> https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/b97e7b5ef116476e065aeec1da1050eecbd6adf7/R/scheme_install.R#L71-L75 
>>> for the function).
>>>
>>> I know that is regulated for R packages, but I can?t find it.
>>>
>>> Is this allowed for R packages? Will this be allowed for CRAN?
>>>
>>> I would prefer not to allow custom paths here, as it would 
>>> complicate things.
>>>
>>> Thanks,
>>>
>>> Rainer
>>>
>>>
>>> --
>>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation 
>>> Biology, UCT), Dipl. Phys. (Germany)
>>>
>>> Orcid ID: 0000-0002-7490-0066
>>>
>>> Department of Evolutionary Biology and Environmental Studies
>>> University of Z?rich
>>> Office Y34-J-74
>>> Winterthurerstrasse 190
>>> 8075 Z?rich
>>> Switzerland
>>>
>>> Office:    +41 (0)44 635 47 64
>>> Cell:           +41 (0)78 630 66 57
>>> email:      Rainer.Krug at uzh.ch
>>>       Rainer at krugs.de
>>> Skype:     RMkrug
>>>
>>> PGP: 0x0F52F982
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation 
> Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> 		Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982


--
Gregory Jefferis, PhD                   Tel: +44 1223 267048
Division of Neurobiology
MRC Laboratory of Molecular Biology
Francis Crick Avenue
Cambridge Biomedical Campus
Cambridge, CB2 OQH, UK

http://www2.mrc-lmb.cam.ac.uk/group-leaders/h-to-m/g-jefferis
http://jefferislab.org
http://www.zoo.cam.ac.uk/research/groups/connectomics


From pd@|gd @end|ng |rom gm@||@com  Fri Dec  6 12:03:42 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Fri, 6 Dec 2019 12:03:42 +0100
Subject: [R-pkg-devel] CRAN submission with "possibly unsafe calls" or
 alternative approach?
In-Reply-To: <6EBEC12A-4D6B-449E-9D66-EABD2261E24A@krugs.de>
References: <6EBEC12A-4D6B-449E-9D66-EABD2261E24A@krugs.de>
Message-ID: <66ADA961-11FE-432D-897F-168E6E05F98C@gmail.com>

I think you may want to rethink the mechanism. 

Locked bindings are generally there to allow the compiler to make assumptions about the type, etc., of objects (or rather: not make assumptions because it will know what the type is). Unlocking invalidates this and may trigger recompilation or introduce errors. (There are people who know the details much better than I do).

I seem to recall that people have come up with ways to set up an environment which can contain mutable objects of this sort.

-pd

> On 6 Dec 2019, at 10:05 , Rainer M Krug <Rainer at krugs.de> wrote:
> 
> Hi
> 
> In my package `dmdScheme` I define three variables. Depending on a state in the package (a selected metadata schemes) these are set as followed from within the package:
> 
> ```
>  unlockBinding("dmdScheme_example", as.environment("package:dmdScheme"))
>  assign("dmdScheme_example", scheme_example, "package:dmdScheme")
>  lockBinding("dmdScheme_example", as.environment("package:dmdScheme"))
> 
> 
>  scheme_raw <- as_dmdScheme_raw(scheme_example)
>  unlockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))
>  assign("dmdScheme_raw", scheme_raw, "package:dmdScheme")
>  lockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))
> 
> 
>  scheme <- as_dmdScheme(scheme_raw, keepData = FALSE, checkVersion = FALSE)
>  unlockBinding("dmdScheme", as.environment("package:dmdScheme"))
>  assign("dmdScheme", scheme, "package:dmdScheme")
>  lockBinding("dmdScheme", as.environment("package:dmdScheme?))
> ```
> 
> ( See https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/b97e7b5ef116476e065aeec1da1050eecbd6adf7/R/scheme_use.R#L37-L49 )
> 
> My reasoning is that I want to lock these variables, as they are essential to the functioning of the package.
> 
> But I get, probably not surprising, the following NOTE:
> 
> 
> ```
> * checking R code for possible problems ... NOTE
> Found the following possibly unsafe calls:
> File ?dmdScheme/R/scheme_use.R?:
>  unlockBinding("dmdScheme_example", as.environment("package:dmdScheme"))
>  unlockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))
>  unlockBinding("dmdScheme", as.environment("package:dmdScheme"))
> ```
> 
> For the submission to CRAN, Can I disregard this note and explain it during the submission?
> 
> My second question concerns the values itself. I set the variables to NULL in the /data folder in the package, but even after they are set as above, the valuee in `dmdScheme::dmdScheme` is still NULL:
> 
> ```
>> names(dmdScheme)
> [1] "Experiment"       "Genus"            "Treatments"       "Measurement"
> [5] "DataExtraction"   "DataFileMetaData"
>> names(dmdScheme::dmdScheme)
> NULL
>> 
> ```
> 
> Is there a way, that I can change the value of dmdScheme::? variables during runtime?
> 
> Thanks,
> 
> Rainer
> 
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> 		Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Dec  6 12:06:54 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 6 Dec 2019 06:06:54 -0500
Subject: [R-pkg-devel] Rcpp specific Linux warning related to sprint
 function
In-Reply-To: <PR2PR03MB5178F37A8DA28E73506F9C4D855F0@PR2PR03MB5178.eurprd03.prod.outlook.com>
References: <PR2PR03MB5178F37A8DA28E73506F9C4D855F0@PR2PR03MB5178.eurprd03.prod.outlook.com>
Message-ID: <6b680e8a-7e58-202b-5581-d649df31b0e6@gmail.com>

On 06/12/2019 5:48 a.m., Sebastian SOSA wrote:
> Dear all,
> 
> I am trying to submit my R package on CRAN however I have a specific Linux warning message related to a Rcpp function I found online and included in my package:
> https://gallery.rcpp.org/articles/faster-data-frame-creation/
> 
> More specifically, the issue is related to sprint (lines 7 and 14) and is the following:
> list_to_df.cpp:40:28: warning: '%d' directive writing between 1 and 10 bytes into a region of size 4 [-Wformat-overflow=]
> 
> I don't know what this is about and it will be difficult to me to try to solve it as I am on a Windows machine. Thanks in advance for your help.

The message says that the value being written could be as long as 10 
bytes:  probably because int could be 64 bits.  You have declared the 
space to hold the result to be 5 bytes long (including the terminating 
null byte).  That assumes that the integer is less than 9999.

One solution would probably be to declare the name to be "char 
name[11]".  Even though you'll never see a dataframe big enough to need 
that, it will make the compiler happy.

Another solution might be to tell the compiler that you only handle 
values up to 9999; I don't know how to do that.

Duncan Murdoch


From R@|ner @end|ng |rom krug@@de  Fri Dec  6 12:30:19 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Fri, 6 Dec 2019 12:30:19 +0100
Subject: [R-pkg-devel] CRAN submission with "possibly unsafe calls" or
 alternative approach?
In-Reply-To: <66ADA961-11FE-432D-897F-168E6E05F98C@gmail.com>
References: <6EBEC12A-4D6B-449E-9D66-EABD2261E24A@krugs.de>
 <66ADA961-11FE-432D-897F-168E6E05F98C@gmail.com>
Message-ID: <26122437-3974-4630-ADF2-56ACD5F20C8A@krugs.de>

Thanks for the clarification - I was not aware of that. I will put the variables in an environment and call them via a function before submission to CRAN..

Thanks,

Rainer


> On 6 Dec 2019, at 12:03, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> I think you may want to rethink the mechanism. 
> 
> Locked bindings are generally there to allow the compiler to make assumptions about the type, etc., of objects (or rather: not make assumptions because it will know what the type is). Unlocking invalidates this and may trigger recompilation or introduce errors. (There are people who know the details much better than I do).
> 
> I seem to recall that people have come up with ways to set up an environment which can contain mutable objects of this sort.
> 
> -pd
> 
>> On 6 Dec 2019, at 10:05 , Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> Hi
>> 
>> In my package `dmdScheme` I define three variables. Depending on a state in the package (a selected metadata schemes) these are set as followed from within the package:
>> 
>> ```
>> unlockBinding("dmdScheme_example", as.environment("package:dmdScheme"))
>> assign("dmdScheme_example", scheme_example, "package:dmdScheme")
>> lockBinding("dmdScheme_example", as.environment("package:dmdScheme"))
>> 
>> 
>> scheme_raw <- as_dmdScheme_raw(scheme_example)
>> unlockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))
>> assign("dmdScheme_raw", scheme_raw, "package:dmdScheme")
>> lockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))
>> 
>> 
>> scheme <- as_dmdScheme(scheme_raw, keepData = FALSE, checkVersion = FALSE)
>> unlockBinding("dmdScheme", as.environment("package:dmdScheme"))
>> assign("dmdScheme", scheme, "package:dmdScheme")
>> lockBinding("dmdScheme", as.environment("package:dmdScheme?))
>> ```
>> 
>> ( See https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/b97e7b5ef116476e065aeec1da1050eecbd6adf7/R/scheme_use.R#L37-L49 )
>> 
>> My reasoning is that I want to lock these variables, as they are essential to the functioning of the package.
>> 
>> But I get, probably not surprising, the following NOTE:
>> 
>> 
>> ```
>> * checking R code for possible problems ... NOTE
>> Found the following possibly unsafe calls:
>> File ?dmdScheme/R/scheme_use.R?:
>> unlockBinding("dmdScheme_example", as.environment("package:dmdScheme"))
>> unlockBinding("dmdScheme_raw", as.environment("package:dmdScheme"))
>> unlockBinding("dmdScheme", as.environment("package:dmdScheme"))
>> ```
>> 
>> For the submission to CRAN, Can I disregard this note and explain it during the submission?
>> 
>> My second question concerns the values itself. I set the variables to NULL in the /data folder in the package, but even after they are set as above, the valuee in `dmdScheme::dmdScheme` is still NULL:
>> 
>> ```
>>> names(dmdScheme)
>> [1] "Experiment"       "Genus"            "Treatments"       "Measurement"
>> [5] "DataExtraction"   "DataFileMetaData"
>>> names(dmdScheme::dmdScheme)
>> NULL
>>> 
>> ```
>> 
>> Is there a way, that I can change the value of dmdScheme::? variables during runtime?
>> 
>> Thanks,
>> 
>> Rainer
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office:	+41 (0)44 635 47 64
>> Cell:       	+41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> 		Rainer at krugs.de
>> Skype:     RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From |n|o @end|ng |rom @c|encegr@ph@org  Fri Dec  6 13:07:25 2019
From: |n|o @end|ng |rom @c|encegr@ph@org (Pere Millan Martinez)
Date: Fri, 6 Dec 2019 13:07:25 +0100
Subject: [R-pkg-devel] Error while checking if Pandoc is available
In-Reply-To: <f3e8e7be-3a28-8538-ce0a-d4ef998d6d9e@sciencegraph.org>
References: <eee3cb67-4591-0202-ef21-2a1b1d4ca429@sciencegraph.org>
 <f3e8e7be-3a28-8538-ce0a-d4ef998d6d9e@sciencegraph.org>
Message-ID: <e1eadc0d-c022-770d-e1a2-1b7a7f67c990@sciencegraph.org>

Yesterday the publication of the new brinton package war archived 
(https://cran.r-project.org/web/packages/brinton/index.html) because the 
following line produces the following error:

if(rmarkdown::pandoc_available() == FALSE | rmarkdown::pandoc_version() 
< "1.12.3") {stop("'brinton' requires Pandoc v < 1.12.3 
(https://pandoc.org/)")}

Error in if (rmarkdown::pandoc_available() == FALSE | 
rmarkdown::pandoc_version() <:
argument is of length zero

The checks of the knitr package produce similar errors 
(https://cran.r-hub.io/web/checks/check_results_knitr.html) but knitr is 
available in CRAN (furtunatelly).
Also, I have been punished by prof. Brian Ripley so I can not resubmit 
the package until January.

Do you have any clue about how to fix this? Does to punish rookies have 
sense in this case?

Thanks in advance,
-Pere Mill?n



On 10/11/2019 11:31, Pere Millan Martinez wrote:
> Hello,
>
> I'm trying to submit a first version of the brinton package but the 
> CRAN-pretest on Debian produces the following NOTE:
>
> Check: for detritus in the temp directory, Result: NOTE
>    Found the following files/directories	:
>      ?calibre_4.2.0_tmp_BPGKxL? ?calibre_4.2.0_tmp_D8BXMj?
>      ?calibre_4.2.0_tmp_M8RU75? ?calibre_4.2.0_tmp_TipWj0?
>      ?calibre_4.2.0_tmp_f0mVQS? ?calibre_4.2.0_tmp_fHEPce?
>      ?runtime-hornik?
>
> The 'brinton' package stores files in the temporary folder (which I 
> think is ok) but I can not figure out
> the relationship between the files that are stored with 
> 'calibre_4.2.0'. Is this note a false positive or this
> is something that I should fix prior to submit?
>
> Thank you,
> Pere Mill?n-Mart?nez

	[[alternative HTML version deleted]]


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Fri Dec  6 13:10:52 2019
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Fri, 6 Dec 2019 23:10:52 +1100
Subject: [R-pkg-devel] Error while checking if Pandoc is available
In-Reply-To: <e1eadc0d-c022-770d-e1a2-1b7a7f67c990@sciencegraph.org>
References: <eee3cb67-4591-0202-ef21-2a1b1d4ca429@sciencegraph.org>
 <f3e8e7be-3a28-8538-ce0a-d4ef998d6d9e@sciencegraph.org>
 <e1eadc0d-c022-770d-e1a2-1b7a7f67c990@sciencegraph.org>
Message-ID: <CAJmOi+O1z5yuoQ+1R-tXewEBxe9_HNjAKj9upW_SGAM2ews59w@mail.gmail.com>

Change | to ||

On Fri, 6 Dec 2019 at 11:08 pm, Pere Millan Martinez <info at sciencegraph.org>
wrote:

> Yesterday the publication of the new brinton package war archived
> (https://cran.r-project.org/web/packages/brinton/index.html) because the
> following line produces the following error:
>
> if(rmarkdown::pandoc_available() == FALSE | rmarkdown::pandoc_version()
> < "1.12.3") {stop("'brinton' requires Pandoc v < 1.12.3
> (https://pandoc.org/)")}
>
> Error in if (rmarkdown::pandoc_available() == FALSE |
> rmarkdown::pandoc_version() <:
> argument is of length zero
>
> The checks of the knitr package produce similar errors
> (https://cran.r-hub.io/web/checks/check_results_knitr.html) but knitr is
> available in CRAN (furtunatelly).
> Also, I have been punished by prof. Brian Ripley so I can not resubmit
> the package until January.
>
> Do you have any clue about how to fix this? Does to punish rookies have
> sense in this case?
>
> Thanks in advance,
> -Pere Mill?n
>
>
>
> On 10/11/2019 11:31, Pere Millan Martinez wrote:
> > Hello,
> >
> > I'm trying to submit a first version of the brinton package but the
> > CRAN-pretest on Debian produces the following NOTE:
> >
> > Check: for detritus in the temp directory, Result: NOTE
> >    Found the following files/directories      :
> >      ?calibre_4.2.0_tmp_BPGKxL? ?calibre_4.2.0_tmp_D8BXMj?
> >      ?calibre_4.2.0_tmp_M8RU75? ?calibre_4.2.0_tmp_TipWj0?
> >      ?calibre_4.2.0_tmp_f0mVQS? ?calibre_4.2.0_tmp_fHEPce?
> >      ?runtime-hornik?
> >
> > The 'brinton' package stores files in the temporary folder (which I
> > think is ok) but I can not figure out
> > the relationship between the files that are stored with
> > 'calibre_4.2.0'. Is this note a false positive or this
> > is something that I should fix prior to submit?
> >
> > Thank you,
> > Pere Mill?n-Mart?nez
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri Dec  6 14:39:28 2019
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 6 Dec 2019 13:39:28 +0000
Subject: [R-pkg-devel] Including in my vignette a figure drawn outside R
In-Reply-To: <24038.35471.804746.680331@rob.eddelbuettel.com>
References: <c182bcf8-6da4-5110-1322-b5b75cfe44dc@dewey.myzen.co.uk>
 <24038.35471.804746.680331@rob.eddelbuettel.com>
Message-ID: <23234dd1-40ec-a9b1-0cf8-13556b75cfd6@dewey.myzen.co.uk>

Thank you Dirk for the last point which has helped my grasp the 
implications of something in WRE which will help me go forward.

Michael

On 03/12/2019 16:17, Dirk Eddelbuettel wrote:
> 
> On 3 December 2019 at 15:36, Michael Dewey wrote:
> | I am planning to include a flow-chart in the vignette of one of my
> | packages (metap). I am planning to draw it using dot from Graphviz. I
> | know that there is Rgraphviz which would do the whole thing in R but I
> | do this sort of thing rarely and I suspect the overhead of learning how
> | to do it in Rgraphviz would outweigh the benefit.
> |
> | So my question is: if I wish to be a good Open Source citizen should I
> | just bundle the .pdf file resulting from dot with the vignette or should
> 
> That seems like it is the appropriate move.
> 
> | I provide the .gv file which generated it? I think from reading Writing
> | R Extensions that in either case I just put them in the directory along
> | with my .Rnw file but please disabuse me of that impression if false.
> 
> You can use subdirectories in the source repository such that the sources are
> present in the .tar.gz but are not necessarily installed with the package.
>   
> Dirk
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Dec  6 17:29:41 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Fri, 6 Dec 2019 08:29:41 -0800
Subject: [R-pkg-devel] Error while checking if Pandoc is available
In-Reply-To: <CAJmOi+O1z5yuoQ+1R-tXewEBxe9_HNjAKj9upW_SGAM2ews59w@mail.gmail.com>
References: <eee3cb67-4591-0202-ef21-2a1b1d4ca429@sciencegraph.org>
 <f3e8e7be-3a28-8538-ce0a-d4ef998d6d9e@sciencegraph.org>
 <e1eadc0d-c022-770d-e1a2-1b7a7f67c990@sciencegraph.org>
 <CAJmOi+O1z5yuoQ+1R-tXewEBxe9_HNjAKj9upW_SGAM2ews59w@mail.gmail.com>
Message-ID: <CAFDcVCQ7TCSnq=NVNCbCYRSOGP5aSD6oZ+S9DgUAqRzgMWNTGA@mail.gmail.com>

Hugh is correct. To clarify, update

if (!rmarkdown::pandoc_available() || rmarkdown::pandoc_version() < "1.12.3") {
  stop("'brinton' requires Pandoc v < 1.12.3 (https://pandoc.org/)")
}

The reason is that when using 'a || b', expression 'b' will NOT be
evaluated if 'a' is not TRUE.  In contrast, when you use 'a | b',
expression 'b' will be evaluated regardless of outcome of 'a'.

A good rule of thumb is: If you expect your OR or AND statements to
give a single/scalar TRUE of FALSE, use || or &&.  This is commonly
used in if(), and while() conditions.

/Henrik

On Fri, Dec 6, 2019 at 4:18 AM Hugh Parsonage <hugh.parsonage at gmail.com> wrote:
>
> Change | to ||
>
> On Fri, 6 Dec 2019 at 11:08 pm, Pere Millan Martinez <info at sciencegraph.org>
> wrote:
>
> > Yesterday the publication of the new brinton package war archived
> > (https://cran.r-project.org/web/packages/brinton/index.html) because the
> > following line produces the following error:
> >
> > if(rmarkdown::pandoc_available() == FALSE | rmarkdown::pandoc_version()
> > < "1.12.3") {stop("'brinton' requires Pandoc v < 1.12.3
> > (https://pandoc.org/)")}
> >
> > Error in if (rmarkdown::pandoc_available() == FALSE |
> > rmarkdown::pandoc_version() <:
> > argument is of length zero
> >
> > The checks of the knitr package produce similar errors
> > (https://cran.r-hub.io/web/checks/check_results_knitr.html) but knitr is
> > available in CRAN (furtunatelly).
> > Also, I have been punished by prof. Brian Ripley so I can not resubmit
> > the package until January.
> >
> > Do you have any clue about how to fix this? Does to punish rookies have
> > sense in this case?
> >
> > Thanks in advance,
> > -Pere Mill?n
> >
> >
> >
> > On 10/11/2019 11:31, Pere Millan Martinez wrote:
> > > Hello,
> > >
> > > I'm trying to submit a first version of the brinton package but the
> > > CRAN-pretest on Debian produces the following NOTE:
> > >
> > > Check: for detritus in the temp directory, Result: NOTE
> > >    Found the following files/directories      :
> > >      ?calibre_4.2.0_tmp_BPGKxL? ?calibre_4.2.0_tmp_D8BXMj?
> > >      ?calibre_4.2.0_tmp_M8RU75? ?calibre_4.2.0_tmp_TipWj0?
> > >      ?calibre_4.2.0_tmp_f0mVQS? ?calibre_4.2.0_tmp_fHEPce?
> > >      ?runtime-hornik?
> > >
> > > The 'brinton' package stores files in the temporary folder (which I
> > > think is ok) but I can not figure out
> > > the relationship between the files that are stored with
> > > 'calibre_4.2.0'. Is this note a false positive or this
> > > is something that I should fix prior to submit?
> > >
> > > Thank you,
> > > Pere Mill?n-Mart?nez
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Fri Dec  6 21:06:22 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Fri, 6 Dec 2019 20:06:22 +0000
Subject: [R-pkg-devel] PDF Vignette
Message-ID: <f9b14a608c4e40cd85b6883e1ef3d0e6@sfu.ca>

Dear All,


I am trying to add a PDF file (perfectphyloR.pdf) for vignette of my R package (perfectphyloR). When I check my package using win-builder, I am getting the following warning message:


* checking re-building of vignette outputs ... [2s] WARNING
Error in re-building vignettes:
  ...
Warning in system(paste(shQuote(texi2dvi), if (quiet) "--quiet" else "",  :
  running command '"D:\compiler\texmf\miktex\bin\texify.exe" --quiet --pdf "perfectphyloR.tex" --max-iterations=20 -I "D:/RCompile/recent/R-3.5.3/share/texmf/tex/latex" -I "D:/RCompile/recent/R-3.5.3/share/texmf/bibtex/bst"' had status 1
Error: running 'texi2dvi' on 'perfectphyloR.tex' failed

LaTeX errors:
!pdfTeX error: pdflatex.EXE (file ./perfectphyloR.pdf): reading image file fail
ed
 ==> Fatal error occurred, no output PDF file produced!
Execution halted


Could someone help me fix this issue?


Thank you!


Charith.

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Sun Dec  8 21:14:59 2019
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sun, 8 Dec 2019 15:14:59 -0500
Subject: [R-pkg-devel] inconsistent behavior between R CMD check and
 interactive use
Message-ID: <CAGx1TMByBvhVjdm5Zo2gVtybHq4Y9iBFFvs3kuPCy837yeH3NA@mail.gmail.com>

I am seeing this in
> version
               _
platform       x86_64-w64-mingw32
arch           x86_64
os             mingw32
system         x86_64, mingw32
status         Under development (unstable)
major          4
minor          0.0
year           2019
month          12
day            05
svn rev        77528
language       R
version.string R Under development (unstable) (2019-12-05 r77528)
nickname       Unsuffered Consequences

I also saw this in 2019-12-03 r77513


In my interactive use I set
> Sys.setenv("_R_CLASS_MATRIX_ARRAY_"="true")
to match what --as-cran does for class(matrix(1))

There are two problems, unrelated I think.

1. I have an example which works correctly in interactive use and which
shows an error under R CMD check.  The error message is the one we now expect
when class(matrix(1)) is just "matrix".  The error should not be
triggered when the class
is c("matrix","array")


2. I export many functions.  Several are not handled correctly during
R CMD check testing.
They appear in the NAMESPACE in the source, and also in both the
Rcheck 00_pkg_src and the Rcheck built package.
Yet, when those functions are called during the testing of the
examples, they aren't visible.
An ls() call inserted into the \examples{} section does not include them.
The functions are visible and work correctly during interactive use.


I am running a WIndows 10 system inside a Parallels Virtual Machine on
a Macintosh.

Has anyone else seen similar misbehavior?
Or can suggest a repair?

Rich


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Dec  8 22:57:58 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 8 Dec 2019 16:57:58 -0500
Subject: [R-pkg-devel] inconsistent behavior between R CMD check and
 interactive use
In-Reply-To: <CAGx1TMByBvhVjdm5Zo2gVtybHq4Y9iBFFvs3kuPCy837yeH3NA@mail.gmail.com>
References: <CAGx1TMByBvhVjdm5Zo2gVtybHq4Y9iBFFvs3kuPCy837yeH3NA@mail.gmail.com>
Message-ID: <30269478-21df-63ce-2473-ecd288a470de@gmail.com>

On 08/12/2019 3:14 p.m., Richard M. Heiberger wrote:
> I am seeing this in
>> version
>                 _
> platform       x86_64-w64-mingw32
> arch           x86_64
> os             mingw32
> system         x86_64, mingw32
> status         Under development (unstable)
> major          4
> minor          0.0
> year           2019
> month          12
> day            05
> svn rev        77528
> language       R
> version.string R Under development (unstable) (2019-12-05 r77528)
> nickname       Unsuffered Consequences
> 
> I also saw this in 2019-12-03 r77513
> 
> 
> In my interactive use I set
>> Sys.setenv("_R_CLASS_MATRIX_ARRAY_"="true")
> to match what --as-cran does for class(matrix(1))
> 
> There are two problems, unrelated I think.
> 
> 1. I have an example which works correctly in interactive use and which
> shows an error under R CMD check.  The error message is the one we now expect
> when class(matrix(1)) is just "matrix".  The error should not be
> triggered when the class
> is c("matrix","array") >
> 
> 2. I export many functions.  Several are not handled correctly during
> R CMD check testing.
> They appear in the NAMESPACE in the source, and also in both the
> Rcheck 00_pkg_src and the Rcheck built package.
> Yet, when those functions are called during the testing of the
> examples, they aren't visible.
> An ls() call inserted into the \examples{} section does not include them.

ls() wouldn't normally see functions exported from packages.  You'd need
ls("package:foo") to see the exports from package foo, and that only 
works after attaching the package.  But examples should be running with 
your package attached during testing, so if that's what you really 
meant, then you do have a problem.

> The functions are visible and work correctly during interactive use.
> 
> 
> I am running a WIndows 10 system inside a Parallels Virtual Machine on
> a Macintosh.
> 
> Has anyone else seen similar misbehavior?
> Or can suggest a repair?

Not seen this, and can't suggest a repair without seeing a reproducible 
example.

Duncan


From rmh @end|ng |rom temp|e@edu  Mon Dec  9 04:33:29 2019
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sun, 8 Dec 2019 22:33:29 -0500
Subject: [R-pkg-devel] inconsistent behavior between R CMD check and
 interactive use
In-Reply-To: <30269478-21df-63ce-2473-ecd288a470de@gmail.com>
References: <CAGx1TMByBvhVjdm5Zo2gVtybHq4Y9iBFFvs3kuPCy837yeH3NA@mail.gmail.com>
 <30269478-21df-63ce-2473-ecd288a470de@gmail.com>
Message-ID: <CAGx1TMBZx0S62KuLzErweOzDc0dZhDPFfyJGnjRcWeV5QTdMYw@mail.gmail.com>

Duncan,

Thank you offering to look.
I have tried all the obvious things that I could think of.  None helped.
Perhaps you will think of something I haven't tried

The reproducible example (not minimal) I can suggest is to use the
submitted file.

ftp://CRAN.R-project.org/incoming/archive/HH_3.1-38.tar.gz

On my windows machine

R CMD check --as-cran HH_3.1-38.tar.gz
halts with
> BB <- likert(tmp[2:6,], box.width=unit(.4,"cm"), positive.order=TRUE)
Error in apply(x, 3:ldx, function(x) list(x)) :
  'MARGIN' does not match dim(X)
Calls: likert ... as.MatrixList -> as.MatrixList.array -> lapply -> apply
Execution halted

This is wrong.  That problem was in 3.1-37 and is why I needed a new version.
I repaired that problem. Running interactively, that command succeeds
on my machine.

R CMD check --as-cran --run-dontrun     HH_3.1-38.tar.gz
halts with
> tmp.data <- confintervaldata()
Error in confintervaldata() : could not find function "confintervaldata"
Execution halted

That is wrong.  confintervaldata is in the NAMESPACE.
Running interactively, that command succeeds.
I added an ls("package:HH") ## yes I spelled it correctly
and the confinervaldata is missing from the list.  Again, it is in the
NAMESPACE for the generated executable package.


On the CRAN machines, neither of these problems appeared.  Instead
they found a different error
from code analysis, not from an execution failure.  I don't understand
why I didn't get that issue on
my machine when I used --as-cran.  The repair is in 3.1-39, which I
haven't sent in yet.
The repair is to replace
class(xxx) == "try-error"
with
"try-error" %in% class(xxx)

Please let me know if you see these same problems, or if you can think
of something else to try.

Rich


On Sun, Dec 8, 2019 at 4:58 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 08/12/2019 3:14 p.m., Richard M. Heiberger wrote:
> > I am seeing this in
> >> version
> >                 _
> > platform       x86_64-w64-mingw32
> > arch           x86_64
> > os             mingw32
> > system         x86_64, mingw32
> > status         Under development (unstable)
> > major          4
> > minor          0.0
> > year           2019
> > month          12
> > day            05
> > svn rev        77528
> > language       R
> > version.string R Under development (unstable) (2019-12-05 r77528)
> > nickname       Unsuffered Consequences
> >
> > I also saw this in 2019-12-03 r77513
> >
> >
> > In my interactive use I set
> >> Sys.setenv("_R_CLASS_MATRIX_ARRAY_"="true")
> > to match what --as-cran does for class(matrix(1))
> >
> > There are two problems, unrelated I think.
> >
> > 1. I have an example which works correctly in interactive use and which
> > shows an error under R CMD check.  The error message is the one we now expect
> > when class(matrix(1)) is just "matrix".  The error should not be
> > triggered when the class
> > is c("matrix","array") >
> >
> > 2. I export many functions.  Several are not handled correctly during
> > R CMD check testing.
> > They appear in the NAMESPACE in the source, and also in both the
> > Rcheck 00_pkg_src and the Rcheck built package.
> > Yet, when those functions are called during the testing of the
> > examples, they aren't visible.
> > An ls() call inserted into the \examples{} section does not include them.
>
> ls() wouldn't normally see functions exported from packages.  You'd need
> ls("package:foo") to see the exports from package foo, and that only
> works after attaching the package.  But examples should be running with
> your package attached during testing, so if that's what you really
> meant, then you do have a problem.
>
> > The functions are visible and work correctly during interactive use.
> >
> >
> > I am running a WIndows 10 system inside a Parallels Virtual Machine on
> > a Macintosh.
> >
> > Has anyone else seen similar misbehavior?
> > Or can suggest a repair?
>
> Not seen this, and can't suggest a repair without seeing a reproducible
> example.
>
> Duncan


From qu|k@||ver67213 @end|ng |rom y@hoo@com  Mon Dec  9 06:50:32 2019
From: qu|k@||ver67213 @end|ng |rom y@hoo@com (Mat Fok)
Date: Mon, 9 Dec 2019 05:50:32 +0000 (UTC)
Subject: [R-pkg-devel] Update on olr package
References: <677981748.3496223.1575870632076.ref@mail.yahoo.com>
Message-ID: <677981748.3496223.1575870632076@mail.yahoo.com>

Hi,
MatHatter/olr_r
Thank you all for helping! It has lead me in the right direction. I have resolved a lot of the previous .Rbuildignore problems, because I have been using R CMD to build the tarball or in other words, I have been using the batch files to run the build and checks.
R CMD -as--cran
These are the two problems I am seeing now:
The Description field contains? https://pypi.org/project/olr/.Please enclose URLs in angle brackets (<...>).
However, I have already put the brackets there.
Second issue:
* checking PDF version of manual ... WARNINGLaTeX errors when creating PDF version.This typically indicates Rd problems.* checking PDF version of manual without hyperrefs or index ... ERRORRe-running with no redirection of stdout/stderr.* DONEStatus: 1 ERROR, 1 WARNING, 1 NOTE
HOWEVER, when I do R CMD -no--manual I don't have any issues.
Can I make an override to CRAN or how do I address these issues?
Thank you!
	[[alternative HTML version deleted]]


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Mon Dec  9 09:25:14 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Mon, 9 Dec 2019 08:25:14 +0000
Subject: [R-pkg-devel] Cannot find -ludev
Message-ID: <D164D809-9B3A-4760-8ADA-4609B0454D8A@kaust.edu.sa>

I am getting this error on CRAN,


/usr/bin/ld: cannot find -ludev





--Sameh



	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Mon Dec  9 10:30:25 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Mon, 9 Dec 2019 22:30:25 +1300
Subject: [R-pkg-devel] Cannot find -ludev
In-Reply-To: <D164D809-9B3A-4760-8ADA-4609B0454D8A@kaust.edu.sa>
References: <D164D809-9B3A-4760-8ADA-4609B0454D8A@kaust.edu.sa>
Message-ID: <01a51406-eca8-7a41-0e3d-f48f86670a77@auckland.ac.nz>


On 9/12/19 9:25 pm, Sameh M. Abdulah wrote:

> I am getting this error on CRAN,
> 
> 
> /usr/bin/ld: cannot find -ludev

This is about as cryptic as I can recall ever seeing in the way of 
requests for help.   I think you will need to supply just a *little* 
more detail (!!! :-) ) in order to have any hope of getting a useful 
response.  I, at least, have no idea what you are talking about.  It is 
possible, of course, that other, more enlightened, readers of this list 
may understand immediately.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Mon Dec  9 10:34:19 2019
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Mon, 9 Dec 2019 09:34:19 +0000
Subject: [R-pkg-devel] Cannot find -ludev
In-Reply-To: <01a51406-eca8-7a41-0e3d-f48f86670a77@auckland.ac.nz>
References: <D164D809-9B3A-4760-8ADA-4609B0454D8A@kaust.edu.sa>,
 <01a51406-eca8-7a41-0e3d-f48f86670a77@auckland.ac.nz>
Message-ID: <DM6PR04MB4539EB327E1FA7647FCB7DF3AA580@DM6PR04MB4539.namprd04.prod.outlook.com>

Sorry for the short question :).

My package requires libudev.so library which exists on Fedora Linux be default and I think it is not provided by Debian. My question is, did anyone use it before on CRAN it I need to ask the CRAN team to install it for me.

Note: my package is running only on Unix systems.


?Sameh


Get Outlook for iOS<https://aka.ms/o0ukef>

________________________________
From: Rolf Turner <r.turner at auckland.ac.nz>
Sent: Monday, December 9, 2019 12:30 PM
To: Sameh M. Abdulah; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot find -ludev


On 9/12/19 9:25 pm, Sameh M. Abdulah wrote:

> I am getting this error on CRAN,
>
>
> /usr/bin/ld: cannot find -ludev

This is about as cryptic as I can recall ever seeing in the way of
requests for help. I think you will need to supply just a *little*
more detail (!!! :-) ) in order to have any hope of getting a useful
response. I, at least, have no idea what you are talking about. It is
possible, of course, that other, more enlightened, readers of this list
may understand immediately.

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Dec 10 09:55:24 2019
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 10 Dec 2019 02:55:24 -0600
Subject: [R-pkg-devel] default col.names from data.frame not the same as
 as.data.frame
Message-ID: <0b0be814-271f-36c1-7d2f-1425cce76fda@effectivedefense.org>




Hello, All:


 ????? What names should be given a matrix or data.frame that does not 
have names for use in "glm.fit"?


 ????? I ask for two reasons:


 ??? ??????? * "base" R is inconsistent:? "data.frame(matrix(1:2, 1))" 
defaults to "X1", "X2" but "as.data.frame(matrix(1:2, 1))" defaults to 
"V1", "V2".


 ??? ??????? * I want to use a toy example like this in the 
documentation for "BMA:::bic.glm.matrix" and "BMA:::bic.glm.data.frame", 
and since "base" R is inconsistent, I felt a need to ask a group like 
this for their preferences.


 ????? Thanks,
 ????? Spencer Graves


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Tue Dec 10 14:28:55 2019
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Tue, 10 Dec 2019 13:28:55 +0000 (UTC)
Subject: [R-pkg-devel] Error while checking if Pandoc is available
In-Reply-To: <CAFDcVCQ7TCSnq=NVNCbCYRSOGP5aSD6oZ+S9DgUAqRzgMWNTGA@mail.gmail.com>
References: <eee3cb67-4591-0202-ef21-2a1b1d4ca429@sciencegraph.org>
 <f3e8e7be-3a28-8538-ce0a-d4ef998d6d9e@sciencegraph.org>
 <e1eadc0d-c022-770d-e1a2-1b7a7f67c990@sciencegraph.org>
 <CAJmOi+O1z5yuoQ+1R-tXewEBxe9_HNjAKj9upW_SGAM2ews59w@mail.gmail.com>
 <CAFDcVCQ7TCSnq=NVNCbCYRSOGP5aSD6oZ+S9DgUAqRzgMWNTGA@mail.gmail.com>
Message-ID: <949663786.10141998.1575984535163@mail.yahoo.com>

Furthermore, I think you can simply use 
rmarkdown::pandoc_available("1.12.3") to answer both questions (is pandoc available, is the particular version or a later version available).

Ma?lle.


Den fredag 6 december 2019 17:30:28 CET, Henrik Bengtsson <henrik.bengtsson at gmail.com> skrev: 





Hugh is correct. To clarify, update

if (!rmarkdown::pandoc_available() || rmarkdown::pandoc_version() < "1.12.3") {
? stop("'brinton' requires Pandoc v < 1.12.3 (https://pandoc.org/)")
}

The reason is that when using 'a || b', expression 'b' will NOT be
evaluated if 'a' is not TRUE.? In contrast, when you use 'a | b',
expression 'b' will be evaluated regardless of outcome of 'a'.

A good rule of thumb is: If you expect your OR or AND statements to
give a single/scalar TRUE of FALSE, use || or &&.? This is commonly
used in if(), and while() conditions.

/Henrik

On Fri, Dec 6, 2019 at 4:18 AM Hugh Parsonage <hugh.parsonage at gmail.com> wrote:
>
> Change | to ||
>
> On Fri, 6 Dec 2019 at 11:08 pm, Pere Millan Martinez <info at sciencegraph.org>
> wrote:
>
> > Yesterday the publication of the new brinton package war archived
> > (https://cran.r-project.org/web/packages/brinton/index.html) because the
> > following line produces the following error:
> >
> > if(rmarkdown::pandoc_available() == FALSE | rmarkdown::pandoc_version()
> > < "1.12.3") {stop("'brinton' requires Pandoc v < 1.12.3
> > (https://pandoc.org/)")}
> >
> > Error in if (rmarkdown::pandoc_available() == FALSE |
> > rmarkdown::pandoc_version() <:
> > argument is of length zero
> >
> > The checks of the knitr package produce similar errors
> > (https://cran.r-hub.io/web/checks/check_results_knitr.html) but knitr is
> > available in CRAN (furtunatelly).
> > Also, I have been punished by prof. Brian Ripley so I can not resubmit
> > the package until January.
> >
> > Do you have any clue about how to fix this? Does to punish rookies have
> > sense in this case?
> >
> > Thanks in advance,
> > -Pere Mill?n
> >
> >
> >
> > On 10/11/2019 11:31, Pere Millan Martinez wrote:
> > > Hello,
> > >
> > > I'm trying to submit a first version of the brinton package but the
> > > CRAN-pretest on Debian produces the following NOTE:
> > >
> > > Check: for detritus in the temp directory, Result: NOTE
> > >? ? Found the following files/directories? ? ? :
> > >? ? ? ?calibre_4.2.0_tmp_BPGKxL? ?calibre_4.2.0_tmp_D8BXMj?
> > >? ? ? ?calibre_4.2.0_tmp_M8RU75? ?calibre_4.2.0_tmp_TipWj0?
> > >? ? ? ?calibre_4.2.0_tmp_f0mVQS? ?calibre_4.2.0_tmp_fHEPce?
> > >? ? ? ?runtime-hornik?
> > >
> > > The 'brinton' package stores files in the temporary folder (which I
> > > think is ok) but I can not figure out
> > > the relationship between the files that are stored with
> > > 'calibre_4.2.0'. Is this note a false positive or this
> > > is something that I should fix prior to submit?
> > >
> > > Thank you,
> > > Pere Mill?n-Mart?nez
> >
> >? ? ? ? [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel

> >
>
>? ? ? ? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @eb@@t|@n@@nk@rgren @end|ng |rom @t@t|@t|k@uu@@e  Tue Dec 10 20:26:46 2019
From: @eb@@t|@n@@nk@rgren @end|ng |rom @t@t|@t|k@uu@@e (Sebastian Ankargren)
Date: Tue, 10 Dec 2019 19:26:46 +0000
Subject: [R-pkg-devel] Additional issues: OpenBLAS
Message-ID: <8569ef41e2f149d69b74b0551e5b2128@statistik.uu.se>

Dear package developers,


I have an 'additional issue' listed on CRAN for my package mfbvar (https://cran.r-project.org/web/checks/check_results_mfbvar.html). The issue exists for the following configuration:

* using R Under development (unstable) (2019-11-19 r77437)

* using platform: x86_64-pc-linux-gnu (64-bit)

and OpenBLAS. The re-building of the vignette output fails for a function that uses RcppArmadillo. The failure occurs because of a column index being out of bounds, but this is an effect of the problem and not the cause (e.g. due to NAs).


I have not experienced this failure on win builder, r-hub or Travis where I have used various versions of R and Windows, Linux, OS X (although not OpenBLAS). I am a little bit at a loss how to handle the situation as I cannot debug, I want to keep the vignette, and I want the package to be retained on CRAN. Any ideas as to how I should go about solving the issue?


Best,


Sebastian








N?r du har kontakt med oss p? Uppsala universitet med e-post s? inneb?r det att vi behandlar dina personuppgifter. F?r att l?sa mer om hur vi g?r det kan du l?sa h?r: http://www.uu.se/om-uu/dataskydd-personuppgifter/

E-mailing Uppsala University means that we will process your personal data. For more information on how this is performed, please read here: http://www.uu.se/en/about-uu/data-protection-policy

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Dec 10 20:27:51 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 10 Dec 2019 14:27:51 -0500
Subject: [R-pkg-devel] inconsistent behavior between R CMD check and
 interactive use
In-Reply-To: <CAGx1TMBZx0S62KuLzErweOzDc0dZhDPFfyJGnjRcWeV5QTdMYw@mail.gmail.com>
References: <CAGx1TMByBvhVjdm5Zo2gVtybHq4Y9iBFFvs3kuPCy837yeH3NA@mail.gmail.com>
 <30269478-21df-63ce-2473-ecd288a470de@gmail.com>
 <CAGx1TMBZx0S62KuLzErweOzDc0dZhDPFfyJGnjRcWeV5QTdMYw@mail.gmail.com>
Message-ID: <ee994cd3-4916-fdd7-4785-dbe756e72421@gmail.com>

(Rich, you've heard this already, this message is for others:)

I think I've found the cause of this, and it might be a bug in the check 
code in R.

Rich's package HH "Suggests" microplot, and microplot "Imports" HH. 
When running checks on the new version 3.1-38 of HH it appears the tests 
from the new version are run but the code being run is from the previous 
version 3.1-37 which is on CRAN.   I installed the old version 
indirectly when I installed microplot before running check.

I've only seen this on Windows in R-devel when running --as-cran.  It 
doesn't happen in R-devel on MacOS with or without --as-cran, and I 
don't think it happens on Windows without --as-cran (but it might just 
be that there are no symptoms of testing the wrong version in that case).

A workaround is to explicitly remove HH, then install the new version 
before running the check code.

Duncan Murdoch





On 08/12/2019 10:33 p.m., Richard M. Heiberger wrote:
> Duncan,
> 
> Thank you offering to look.
> I have tried all the obvious things that I could think of.  None helped.
> Perhaps you will think of something I haven't tried
> 
> The reproducible example (not minimal) I can suggest is to use the
> submitted file.
> 
> ftp://CRAN.R-project.org/incoming/archive/HH_3.1-38.tar.gz
> 
> On my windows machine
> 
> R CMD check --as-cran HH_3.1-38.tar.gz
> halts with
>> BB <- likert(tmp[2:6,], box.width=unit(.4,"cm"), positive.order=TRUE)
> Error in apply(x, 3:ldx, function(x) list(x)) :
>    'MARGIN' does not match dim(X)
> Calls: likert ... as.MatrixList -> as.MatrixList.array -> lapply -> apply
> Execution halted
> 
> This is wrong.  That problem was in 3.1-37 and is why I needed a new version.
> I repaired that problem. Running interactively, that command succeeds
> on my machine.
> 
> R CMD check --as-cran --run-dontrun     HH_3.1-38.tar.gz
> halts with
>> tmp.data <- confintervaldata()
> Error in confintervaldata() : could not find function "confintervaldata"
> Execution halted
> 
> That is wrong.  confintervaldata is in the NAMESPACE.
> Running interactively, that command succeeds.
> I added an ls("package:HH") ## yes I spelled it correctly
> and the confinervaldata is missing from the list.  Again, it is in the
> NAMESPACE for the generated executable package.
> 
> 
> On the CRAN machines, neither of these problems appeared.  Instead
> they found a different error
> from code analysis, not from an execution failure.  I don't understand
> why I didn't get that issue on
> my machine when I used --as-cran.  The repair is in 3.1-39, which I
> haven't sent in yet.
> The repair is to replace
> class(xxx) == "try-error"
> with
> "try-error" %in% class(xxx)
> 
> Please let me know if you see these same problems, or if you can think
> of something else to try.
> 
> Rich
> 
> 
> On Sun, Dec 8, 2019 at 4:58 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 08/12/2019 3:14 p.m., Richard M. Heiberger wrote:
>>> I am seeing this in
>>>> version
>>>                  _
>>> platform       x86_64-w64-mingw32
>>> arch           x86_64
>>> os             mingw32
>>> system         x86_64, mingw32
>>> status         Under development (unstable)
>>> major          4
>>> minor          0.0
>>> year           2019
>>> month          12
>>> day            05
>>> svn rev        77528
>>> language       R
>>> version.string R Under development (unstable) (2019-12-05 r77528)
>>> nickname       Unsuffered Consequences
>>>
>>> I also saw this in 2019-12-03 r77513
>>>
>>>
>>> In my interactive use I set
>>>> Sys.setenv("_R_CLASS_MATRIX_ARRAY_"="true")
>>> to match what --as-cran does for class(matrix(1))
>>>
>>> There are two problems, unrelated I think.
>>>
>>> 1. I have an example which works correctly in interactive use and which
>>> shows an error under R CMD check.  The error message is the one we now expect
>>> when class(matrix(1)) is just "matrix".  The error should not be
>>> triggered when the class
>>> is c("matrix","array") >
>>>
>>> 2. I export many functions.  Several are not handled correctly during
>>> R CMD check testing.
>>> They appear in the NAMESPACE in the source, and also in both the
>>> Rcheck 00_pkg_src and the Rcheck built package.
>>> Yet, when those functions are called during the testing of the
>>> examples, they aren't visible.
>>> An ls() call inserted into the \examples{} section does not include them.
>>
>> ls() wouldn't normally see functions exported from packages.  You'd need
>> ls("package:foo") to see the exports from package foo, and that only
>> works after attaching the package.  But examples should be running with
>> your package attached during testing, so if that's what you really
>> meant, then you do have a problem.
>>
>>> The functions are visible and work correctly during interactive use.
>>>
>>>
>>> I am running a WIndows 10 system inside a Parallels Virtual Machine on
>>> a Macintosh.
>>>
>>> Has anyone else seen similar misbehavior?
>>> Or can suggest a repair?
>>
>> Not seen this, and can't suggest a repair without seeing a reproducible
>> example.
>>
>> Duncan


From rmh @end|ng |rom temp|e@edu  Tue Dec 10 21:29:33 2019
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 10 Dec 2019 15:29:33 -0500
Subject: [R-pkg-devel] inconsistent behavior between R CMD check and
 interactive use
In-Reply-To: <ee994cd3-4916-fdd7-4785-dbe756e72421@gmail.com>
References: <CAGx1TMByBvhVjdm5Zo2gVtybHq4Y9iBFFvs3kuPCy837yeH3NA@mail.gmail.com>
 <30269478-21df-63ce-2473-ecd288a470de@gmail.com>
 <CAGx1TMBZx0S62KuLzErweOzDc0dZhDPFfyJGnjRcWeV5QTdMYw@mail.gmail.com>
 <ee994cd3-4916-fdd7-4785-dbe756e72421@gmail.com>
Message-ID: <CAGx1TMCp1KCSDEnOJv5TnwQx8CMCD0zqUF3bvn4CjQX6=h1rOg@mail.gmail.com>

So I am looking.  and it is even worse than what you suggest.
library()
shows that both HH and microplot are in both the system and personal libraries
Packages in library 'C:/Program Files/R/R-devel/library':
HH Version: 3.1-34
microplot Version: 1.0-15
Everything else in the system library belongs there.
Neither of these is the current CRAN version.

Packages in library 'C:/Users/rmh.DESKTOP-60G4CCO/R/win-library/4.0':
HH Version: 3.1-39 ## 3.1-37 is the current CRAN version
microplot Version: 1.0-42  ## this is the current CRAN version

I removed the ancient HH and microplot from c:/Program Files/R/R-devel/library
I left the correct current versions of both in
c:/Users/rmh.DESKTOP-60G4CCO/R/win-library/4.0

Then I ran the R CMD check again.
R CMD check --run-dontrun --as-cran HH_3.1-39.tar.gz

Very strange results:
"
* checking examples ... ERROR
Running examples in 'HH-Ex.R' failed
The error occurred in:


R Under development (unstable) (2019-12-05 r77528) -- "Unsuffered Consequences"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> pkgname <- "HH"
> source(file.path(R.home("share"), "R", "examples-header.R"))
> options(warn = 1)
> options(pager = "console")
> base::assign(".ExTimings", "HH-Ex.timings", pos = 'CheckExEnv')
> base::cat("name\tuser\tsystem\telapsed\n", file=base::get(".ExTimings", pos = 'CheckExEnv'))
> base::assign(".format_ptime",
+ function(x) {
+   if(!is.na(x[4L])) x[1L] <- x[1L] + x[4L]
+   if(!is.na(x[5L])) x[2L] <- x[2L] + x[5L]
+   options(OutDec = '.')
+   format(x[1L:3L], digits = 7L)
+ },
+ pos = 'CheckExEnv')
>
> ### * </HEADER>
> library('HH')
Error in library("HH") : there is no package called 'HH'
Execution halted
* checking PDF version of manual ... OK
* checking for non-standard things in the check directory ... OK
* checking for detritus in the temp directory ... OK
* DONE

Status: 1 ERROR
See
  'x:/HOME/rmh/HH-R.package/HH.Rcheck/00check.log'
for details.
"

it tested the new version until it got to examples.  Then it wanted to
run the examples
from the system library version.


Next try.
I will copy the current version (3.1-39, the one I am testing) of just
HH to the system library and run the check again.
That works!  It did a proper check of the correct version of the package.

R-devel seems to have a new check.  it is detecting files written not
in the temp directory.
I was doing so in several \dontrun{} examples, but I will fix them
before actually submitting to CRAN.

Thank you Duncan.

Rich


On Tue, Dec 10, 2019 at 2:27 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> (Rich, you've heard this already, this message is for others:)
>
> I think I've found the cause of this, and it might be a bug in the check
> code in R.
>
> Rich's package HH "Suggests" microplot, and microplot "Imports" HH.
> When running checks on the new version 3.1-38 of HH it appears the tests
> from the new version are run but the code being run is from the previous
> version 3.1-37 which is on CRAN.   I installed the old version
> indirectly when I installed microplot before running check.
>
> I've only seen this on Windows in R-devel when running --as-cran.  It
> doesn't happen in R-devel on MacOS with or without --as-cran, and I
> don't think it happens on Windows without --as-cran (but it might just
> be that there are no symptoms of testing the wrong version in that case).
>
> A workaround is to explicitly remove HH, then install the new version
> before running the check code.
>
> Duncan Murdoch
>
>
>
>
>
> On 08/12/2019 10:33 p.m., Richard M. Heiberger wrote:
> > Duncan,
> >
> > Thank you offering to look.
> > I have tried all the obvious things that I could think of.  None helped.
> > Perhaps you will think of something I haven't tried
> >
> > The reproducible example (not minimal) I can suggest is to use the
> > submitted file.
> >
> > ftp://CRAN.R-project.org/incoming/archive/HH_3.1-38.tar.gz
> >
> > On my windows machine
> >
> > R CMD check --as-cran HH_3.1-38.tar.gz
> > halts with
> >> BB <- likert(tmp[2:6,], box.width=unit(.4,"cm"), positive.order=TRUE)
> > Error in apply(x, 3:ldx, function(x) list(x)) :
> >    'MARGIN' does not match dim(X)
> > Calls: likert ... as.MatrixList -> as.MatrixList.array -> lapply -> apply
> > Execution halted
> >
> > This is wrong.  That problem was in 3.1-37 and is why I needed a new version.
> > I repaired that problem. Running interactively, that command succeeds
> > on my machine.
> >
> > R CMD check --as-cran --run-dontrun     HH_3.1-38.tar.gz
> > halts with
> >> tmp.data <- confintervaldata()
> > Error in confintervaldata() : could not find function "confintervaldata"
> > Execution halted
> >
> > That is wrong.  confintervaldata is in the NAMESPACE.
> > Running interactively, that command succeeds.
> > I added an ls("package:HH") ## yes I spelled it correctly
> > and the confinervaldata is missing from the list.  Again, it is in the
> > NAMESPACE for the generated executable package.
> >
> >
> > On the CRAN machines, neither of these problems appeared.  Instead
> > they found a different error
> > from code analysis, not from an execution failure.  I don't understand
> > why I didn't get that issue on
> > my machine when I used --as-cran.  The repair is in 3.1-39, which I
> > haven't sent in yet.
> > The repair is to replace
> > class(xxx) == "try-error"
> > with
> > "try-error" %in% class(xxx)
> >
> > Please let me know if you see these same problems, or if you can think
> > of something else to try.
> >
> > Rich
> >
> >
> > On Sun, Dec 8, 2019 at 4:58 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >>
> >> On 08/12/2019 3:14 p.m., Richard M. Heiberger wrote:
> >>> I am seeing this in
> >>>> version
> >>>                  _
> >>> platform       x86_64-w64-mingw32
> >>> arch           x86_64
> >>> os             mingw32
> >>> system         x86_64, mingw32
> >>> status         Under development (unstable)
> >>> major          4
> >>> minor          0.0
> >>> year           2019
> >>> month          12
> >>> day            05
> >>> svn rev        77528
> >>> language       R
> >>> version.string R Under development (unstable) (2019-12-05 r77528)
> >>> nickname       Unsuffered Consequences
> >>>
> >>> I also saw this in 2019-12-03 r77513
> >>>
> >>>
> >>> In my interactive use I set
> >>>> Sys.setenv("_R_CLASS_MATRIX_ARRAY_"="true")
> >>> to match what --as-cran does for class(matrix(1))
> >>>
> >>> There are two problems, unrelated I think.
> >>>
> >>> 1. I have an example which works correctly in interactive use and which
> >>> shows an error under R CMD check.  The error message is the one we now expect
> >>> when class(matrix(1)) is just "matrix".  The error should not be
> >>> triggered when the class
> >>> is c("matrix","array") >
> >>>
> >>> 2. I export many functions.  Several are not handled correctly during
> >>> R CMD check testing.
> >>> They appear in the NAMESPACE in the source, and also in both the
> >>> Rcheck 00_pkg_src and the Rcheck built package.
> >>> Yet, when those functions are called during the testing of the
> >>> examples, they aren't visible.
> >>> An ls() call inserted into the \examples{} section does not include them.
> >>
> >> ls() wouldn't normally see functions exported from packages.  You'd need
> >> ls("package:foo") to see the exports from package foo, and that only
> >> works after attaching the package.  But examples should be running with
> >> your package attached during testing, so if that's what you really
> >> meant, then you do have a problem.
> >>
> >>> The functions are visible and work correctly during interactive use.
> >>>
> >>>
> >>> I am running a WIndows 10 system inside a Parallels Virtual Machine on
> >>> a Macintosh.
> >>>
> >>> Has anyone else seen similar misbehavior?
> >>> Or can suggest a repair?
> >>
> >> Not seen this, and can't suggest a repair without seeing a reproducible
> >> example.
> >>
> >> Duncan
>


From n@r@@ @end|ng |rom @t@n|ord@edu  Wed Dec 11 02:22:51 2019
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Tue, 10 Dec 2019 17:22:51 -0800
Subject: [R-pkg-devel] How to account for optional packages not necessarily
 on CRAN
Message-ID: <cef8b72e-f950-e345-47b3-5658afd7cae3@stanford.edu>

We've run into the following problem in integrating commercial and open 
source solvers in to our package CVXR. We have "Suggests" dependency on 
some packages that may not be available to CRAN.

There are two main scenarios.

1. A suggested meta-package is on CRAN, e.g. Rmosek, but the user must 
further take action to ensure the binary is installed.? The recommended 
requireNamespace("Rmosek", quietly = TRUE) is insufficient to guarantee 
the functionality desired even if it succeeds.

2. A suggested package is on github or a commercial vendor site only. 
The package code has references to such packages in the code, causing 
problems while checking on CRAN.

It would seem, at least for 2 above, that separating the suggested 
functionality into other packages can ensure that birds of the same 
feather can flock together. But the shared internals make this 
impossible to do at the moment.

The only thing I can think of is to ask CRAN to consider 
_R_FORCE_CHECK_SUGGESTS_= 0 for such a package. Am I missing anything?

Thank you.

-Naras


From edd @end|ng |rom deb|@n@org  Wed Dec 11 02:52:32 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 10 Dec 2019 19:52:32 -0600
Subject: [R-pkg-devel] 
 How to account for optional packages not necessarily on CRAN
In-Reply-To: <cef8b72e-f950-e345-47b3-5658afd7cae3@stanford.edu>
References: <cef8b72e-f950-e345-47b3-5658afd7cae3@stanford.edu>
Message-ID: <24048.19424.825259.939753@rob.eddelbuettel.com>


On 10 December 2019 at 17:22, Balasubramanian Narasimhan wrote:
| We've run into the following problem in integrating commercial and open 
| source solvers in to our package CVXR. We have "Suggests" dependency on 
| some packages that may not be available to CRAN.
| 
| There are two main scenarios.
| 
| 1. A suggested meta-package is on CRAN, e.g. Rmosek, but the user must 
| further take action to ensure the binary is installed.? The recommended 
| requireNamespace("Rmosek", quietly = TRUE) is insufficient to guarantee 
| the functionality desired even if it succeeds.
| 
| 2. A suggested package is on github or a commercial vendor site only. 
| The package code has references to such packages in the code, causing 
| problems while checking on CRAN.
| 
| It would seem, at least for 2 above, that separating the suggested 
| functionality into other packages can ensure that birds of the same 
| feather can flock together. But the shared internals make this 
| impossible to do at the moment.
| 
| The only thing I can think of is to ask CRAN to consider 
| _R_FORCE_CHECK_SUGGESTS_= 0 for such a package. Am I missing anything?

You could use drat (or, if you prefer, roll a CRAN repo by hand) to host a
"CRAN-alike" repo on, say, GitHub or any other http(s)-accessible site, and
then use Additional_repository: with it.

Brooke and I have a fully worked in example for the case of large data
packages in the R Journal:

   https://journal.r-project.org/archive/2017/RJ-2017-026/index.html

   Hosting Data Packages via drat: A Case Study with Hurricane Exposure Data

   G. Brooke Anderson and Dirk Eddelbuettel , The R Journal (2017) 9:1, pages
   486-497.

   Abstract Data-only packages offer a way to provide extended functionality
   for other R users. However, such packages can be large enough to exceed
   the package size limit (5 megabytes) for the Comprehen sive R Archive
   Network (CRAN). As an alternative, large data packages can be posted to
   additional repostiories beyond CRAN itself in a way that allows smaller
   code packages on CRAN to access and use the data. The drat package
   facilitates creation and use of such alternative repositories and makes it
   particularly simple to host them via GitHub. CRAN packages can draw on
   packages posted to drat repositories through the use of the
   ?Additonal_repositories? field in the DESCRIPTION file. This paper
   describes how R users can create a suite of coordinated packages, in which
   larger data packages are hosted in an alternative repository created with
   drat, while a smaller code package that interacts with this data is
   created that can be submitted to CRAN.

Don't be misled by 'data' here--it works the same way with code. And it is
the _one_ option you have because Suggests: are not required to be on a
primary repo like CRAN or BioC.  Naturally, you then need to condition your
code on "is it here yet?" but you likely already do.

Hope this helps,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From n@r@@ @end|ng |rom @t@n|ord@edu  Wed Dec 11 02:58:40 2019
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Tue, 10 Dec 2019 17:58:40 -0800
Subject: [R-pkg-devel] 
 How to account for optional packages not necessarily on CRAN
In-Reply-To: <24048.19424.825259.939753@rob.eddelbuettel.com>
References: <cef8b72e-f950-e345-47b3-5658afd7cae3@stanford.edu>
 <24048.19424.825259.939753@rob.eddelbuettel.com>
Message-ID: <042f9e05-9fab-4825-2483-9a8fd4d8665e@stanford.edu>

Thanks Dirk!? I did not realize that suggested packages are not required 
to be on primary repos like CRAN, BioC.? We do indeed condition our code 
to check that. So I guess, we are good to go, as is.

I will, in due time, read the paper too...

-N

On 12/10/19 5:52 PM, Dirk Eddelbuettel wrote:
> On 10 December 2019 at 17:22, Balasubramanian Narasimhan wrote:
> | We've run into the following problem in integrating commercial and open
> | source solvers in to our package CVXR. We have "Suggests" dependency on
> | some packages that may not be available to CRAN.
> |
> | There are two main scenarios.
> |
> | 1. A suggested meta-package is on CRAN, e.g. Rmosek, but the user must
> | further take action to ensure the binary is installed.? The recommended
> | requireNamespace("Rmosek", quietly = TRUE) is insufficient to guarantee
> | the functionality desired even if it succeeds.
> |
> | 2. A suggested package is on github or a commercial vendor site only.
> | The package code has references to such packages in the code, causing
> | problems while checking on CRAN.
> |
> | It would seem, at least for 2 above, that separating the suggested
> | functionality into other packages can ensure that birds of the same
> | feather can flock together. But the shared internals make this
> | impossible to do at the moment.
> |
> | The only thing I can think of is to ask CRAN to consider
> | _R_FORCE_CHECK_SUGGESTS_= 0 for such a package. Am I missing anything?
>
> You could use drat (or, if you prefer, roll a CRAN repo by hand) to host a
> "CRAN-alike" repo on, say, GitHub or any other http(s)-accessible site, and
> then use Additional_repository: with it.
>
> Brooke and I have a fully worked in example for the case of large data
> packages in the R Journal:
>
>     https://journal.r-project.org/archive/2017/RJ-2017-026/index.html
>
>     Hosting Data Packages via drat: A Case Study with Hurricane Exposure Data
>
>     G. Brooke Anderson and Dirk Eddelbuettel , The R Journal (2017) 9:1, pages
>     486-497.
>
>     Abstract Data-only packages offer a way to provide extended functionality
>     for other R users. However, such packages can be large enough to exceed
>     the package size limit (5 megabytes) for the Comprehen sive R Archive
>     Network (CRAN). As an alternative, large data packages can be posted to
>     additional repostiories beyond CRAN itself in a way that allows smaller
>     code packages on CRAN to access and use the data. The drat package
>     facilitates creation and use of such alternative repositories and makes it
>     particularly simple to host them via GitHub. CRAN packages can draw on
>     packages posted to drat repositories through the use of the
>     ?Additonal_repositories? field in the DESCRIPTION file. This paper
>     describes how R users can create a suite of coordinated packages, in which
>     larger data packages are hosted in an alternative repository created with
>     drat, while a smaller code package that interacts with this data is
>     created that can be submitted to CRAN.
>
> Don't be misled by 'data' here--it works the same way with code. And it is
> the _one_ option you have because Suggests: are not required to be on a
> primary repo like CRAN or BioC.  Naturally, you then need to condition your
> code on "is it here yet?" but you likely already do.
>
> Hope this helps,  Dirk
>


From @ergue|@@oko| @end|ng |rom gm@||@com  Wed Dec 11 10:39:53 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Wed, 11 Dec 2019 10:39:53 +0100
Subject: [R-pkg-devel] r2sundials submission failure
In-Reply-To: <7a0ebb84-5de9-1298-23be-a4b53e99e169@gmail.com>
References: <18799183-2647-badc-e051-f303a49dca59@gmail.com>
 <CAFQwRQzzTzDhm7_sgp2rJOVpomYvvcLyd7sHLQeKk5DaF5DX=Q@mail.gmail.com>
 <7a0ebb84-5de9-1298-23be-a4b53e99e169@gmail.com>
Message-ID: <e15a9291-76d6-c705-b921-97da08aeb621@gmail.com>

Hi,

I have tried to submit my new package 
https://github.com/sgsokol/r2sundials to CRAN but submission seems to be 
dismissed.
The package needs a third part software 
https://computing.llnl.gov/projects/sundials/cvodes so it cannot be 
built on CRAN automatically. I explained this (and how the package was 
tested by myself) in the submitter's comment (cf. hereafter) and second 
time in the reply to all (as was requested) to automatic message from 
CRAN announcing the building failure but to no avail. The submission was 
done on November 25, more than two weeks later I still don't have any 
response and the package is no more in incoming/ dir on cran ftp site. I 
conclude that this submission is dismissed.

My question is: what can be reasonably done to make a package like this 
(i.e. depending on third part software not available on CRAN) to be 
accepted? Or may be the current policy: all new package must 
automatically build. Period. In my case it can imply ~20 MB additional 
space (source code + libs).

Thanks in advance for any hint.
Serguei.

Submitter's comment: Dear CRAN team,

I submit package r2sundials which
   depends on a third part software
   from
https://computing.llnl.gov/projects/sundials/cvodes
This
   is the reason for which it will not automatically
   build on your test systems. But on my side, I could
   successfully run 'R CMD check --as-cran' on Linux
   (R-3.6.1, gcc8), MacOS Catalina (R-3.6.1, Apple
   clang-1100.0.33.12) and Windows 10 (R-devel r77430,
   gcc-4.9.3). If you wish, I can send you reports from
   these runs. Even if it is improbable, but if you
   decide to run such checks manually by your self,
   installation instructions are available
   on
https://github.com/sgsokol/r2sundials

Moreover,
   winbuilder signals:
Possibly mis-spelled words in
   DESCRIPTION:
   CVODES (3:34)
   Hindmarsh (9:803)
   
   Rcpp (3:8, 9:285)
   al (9:816)
   cvodes (9:47)
   
   et (9:813)
   rmumps (9:501)
These all are false
   positives designating software, R packages and
   bibliographic reference.


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Wed Dec 11 14:07:07 2019
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Wed, 11 Dec 2019 14:07:07 +0100
Subject: [R-pkg-devel] reduce size of shared objects
Message-ID: <6f268366-a7c5-7e00-66bc-0297f71a3533@bgc-jena.mpg.de>

I am building an R package (https://github.com/gdkrmr/zarr-R) that wraps 
a couple of C++ headers and the resulting shared object is huge (>20Mb, 
see https://travis-ci.org/gdkrmr/zarr-R). I have tried to set the 
following in `./src/Makevars`:

PKG_CPPFLAGS=-I"../inst/include" -ffunction-sections -fdata-sections
PKG_LIBS=-lstdc++fs -flto -Wl,--gc-sections

but this does not reduce the size of the shared object and produces some 
warnings in `R CMD check` due to portability issues. Is there a way to 
reduce the size of the shared object or do I just have to live with it?

Cheers,

Guido


From |uc@r @end|ng |rom |edor@project@org  Wed Dec 11 14:15:46 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 11 Dec 2019 14:15:46 +0100
Subject: [R-pkg-devel] reduce size of shared objects
In-Reply-To: <6f268366-a7c5-7e00-66bc-0297f71a3533@bgc-jena.mpg.de>
References: <6f268366-a7c5-7e00-66bc-0297f71a3533@bgc-jena.mpg.de>
Message-ID: <CALEXWq0fB-p2AU5nVSSAU5Uq_KkjmLfRa1qO4s5tsGGvBDuqnw@mail.gmail.com>

On Wed, 11 Dec 2019 at 14:07, Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
>
> I am building an R package (https://github.com/gdkrmr/zarr-R) that wraps
> a couple of C++ headers and the resulting shared object is huge (>20Mb,
> see https://travis-ci.org/gdkrmr/zarr-R). I have tried to set the
> following in `./src/Makevars`:
>
> PKG_CPPFLAGS=-I"../inst/include" -ffunction-sections -fdata-sections
> PKG_LIBS=-lstdc++fs -flto -Wl,--gc-sections
>
> but this does not reduce the size of the shared object and produces some
> warnings in `R CMD check` due to portability issues. Is there a way to
> reduce the size of the shared object or do I just have to live with it?

Hi, see Dirk's http://dirk.eddelbuettel.com/blog/2019/03/27/ and
related posts (linked in the first paragraph).

I?aki


From edd @end|ng |rom deb|@n@org  Wed Dec 11 14:19:09 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 11 Dec 2019 07:19:09 -0600
Subject: [R-pkg-devel] reduce size of shared objects
In-Reply-To: <6f268366-a7c5-7e00-66bc-0297f71a3533@bgc-jena.mpg.de>
References: <6f268366-a7c5-7e00-66bc-0297f71a3533@bgc-jena.mpg.de>
Message-ID: <24048.60621.3433.350207@rob.eddelbuettel.com>


On 11 December 2019 at 14:07, Guido Kraemer wrote:
| I am building an R package (https://github.com/gdkrmr/zarr-R) that wraps 
| a couple of C++ headers and the resulting shared object is huge (>20Mb, 
| see https://travis-ci.org/gdkrmr/zarr-R). I have tried to set the 
| following in `./src/Makevars`:
| 
| PKG_CPPFLAGS=-I"../inst/include" -ffunction-sections -fdata-sections
| PKG_LIBS=-lstdc++fs -flto -Wl,--gc-sections
| 
| but this does not reduce the size of the shared object and produces some 
| warnings in `R CMD check` due to portability issues. Is there a way to 
| reduce the size of the shared object or do I just have to live with it?

Yes, a known issue with C++.  I blogged about it a few times

  http://dirk.eddelbuettel.com/blog/2019/03/27#021_stripping_take_three
  http://dirk.eddelbuettel.com/blog/2017/08/20#010_stripping_shared_libraries
  http://dirk.eddelbuettel.com/blog/2017/08/14#009_compact_shared_libraries

But CRAN does not allow stripping; just this week I updated a package at
their request removing a strip invocation.  So I think you can only add the
instructions _locally_ in ~/.R/Makevars -- I have this

  STRIP=-Wl,-S
  SHLIB_CXXLDFLAGS = $(STRIP) -shared
  SHLIB_CXX11LDFLAGS = $(STRIP) -shared
  SHLIB_CXX14LDFLAGS = $(STRIP) -shared
  SHLIB_FCLDFLAGS = $(STRIP) -shared
  SHLIB_LDFLAGS = $(STRIP) -shared

but not in shipped packages going e.g. to CRAN. 

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Wed Dec 11 14:25:02 2019
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Wed, 11 Dec 2019 14:25:02 +0100
Subject: [R-pkg-devel] reduce size of shared objects
In-Reply-To: <CALEXWq0fB-p2AU5nVSSAU5Uq_KkjmLfRa1qO4s5tsGGvBDuqnw@mail.gmail.com>
References: <6f268366-a7c5-7e00-66bc-0297f71a3533@bgc-jena.mpg.de>
 <CALEXWq0fB-p2AU5nVSSAU5Uq_KkjmLfRa1qO4s5tsGGvBDuqnw@mail.gmail.com>
Message-ID: <7b5efee3-f5a6-3f3e-6e4f-ec0ec7bc4bd9@bgc-jena.mpg.de>

Thanks, I wasn't aware about these blog posts. I have just read a little 
bit of gcc documentation and the `-flto` flag has to be provided also in 
the compile steps, doing this

PKG_CPPFLAGS=-I"../inst/include" -flto
PKG_LIBS=-lstdc++fs -flto

reduces the size of the final `.so` to under 1Mb, but gives a warning in 
`R CMD check --as-cran` because `-flto` doesn't seem to be portable.

Cheers,

Guido

On 12/11/19 2:15 PM, I?aki Ucar wrote:
> On Wed, 11 Dec 2019 at 14:07, Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
>> I am building an R package (https://github.com/gdkrmr/zarr-R) that wraps
>> a couple of C++ headers and the resulting shared object is huge (>20Mb,
>> see https://travis-ci.org/gdkrmr/zarr-R). I have tried to set the
>> following in `./src/Makevars`:
>>
>> PKG_CPPFLAGS=-I"../inst/include" -ffunction-sections -fdata-sections
>> PKG_LIBS=-lstdc++fs -flto -Wl,--gc-sections
>>
>> but this does not reduce the size of the shared object and produces some
>> warnings in `R CMD check` due to portability issues. Is there a way to
>> reduce the size of the shared object or do I just have to live with it?
> Hi, see Dirk's http://dirk.eddelbuettel.com/blog/2019/03/27/ and
> related posts (linked in the first paragraph).
>
> I?aki

-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Wed Dec 11 15:01:02 2019
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Wed, 11 Dec 2019 15:01:02 +0100
Subject: [R-pkg-devel] reduce size of shared objects
In-Reply-To: <7b5efee3-f5a6-3f3e-6e4f-ec0ec7bc4bd9@bgc-jena.mpg.de>
References: <6f268366-a7c5-7e00-66bc-0297f71a3533@bgc-jena.mpg.de>
 <CALEXWq0fB-p2AU5nVSSAU5Uq_KkjmLfRa1qO4s5tsGGvBDuqnw@mail.gmail.com>
 <7b5efee3-f5a6-3f3e-6e4f-ec0ec7bc4bd9@bgc-jena.mpg.de>
Message-ID: <d7df521e-4172-36e5-a528-3c77a776c49d@bgc-jena.mpg.de>

I have tried the suggestion from the blog post and added

|strippedLib: $(SHLIB) if test -e "/usr/bin/strip" & test -e 
"/bin/uname" & [[ `uname` == "Linux" ]] ; \ then /usr/bin/strip 
--strip-debug $(SHLIB); fi .phony: strippedLib|
||
||
|to `src/Makevars` and it works great, it gets the size of the shared 
object down to 1.3 Mb.|
|When submitting this to CRAN some day, should I apply this trick or 
ignore it and let the user|
|decide with the new ``R CMD install --strip`` option in R 3.6? Cheers, 
Guido |

||
|
|
On 12/11/19 2:25 PM, Guido Kraemer wrote:
> Thanks, I wasn't aware about these blog posts. I have just read a 
> little bit of gcc documentation and the `-flto` flag has to be 
> provided also in the compile steps, doing this
>
> PKG_CPPFLAGS=-I"../inst/include" -flto
> PKG_LIBS=-lstdc++fs -flto
>
> reduces the size of the final `.so` to under 1Mb, but gives a warning 
> in `R CMD check --as-cran` because `-flto` doesn't seem to be portable.
>
> Cheers,
>
> Guido
>
> On 12/11/19 2:15 PM, I?aki Ucar wrote:
>> On Wed, 11 Dec 2019 at 14:07, Guido Kraemer 
>> <gkraemer at bgc-jena.mpg.de> wrote:
>>> I am building an R package (https://github.com/gdkrmr/zarr-R) that 
>>> wraps
>>> a couple of C++ headers and the resulting shared object is huge (>20Mb,
>>> see https://travis-ci.org/gdkrmr/zarr-R). I have tried to set the
>>> following in `./src/Makevars`:
>>>
>>> PKG_CPPFLAGS=-I"../inst/include" -ffunction-sections -fdata-sections
>>> PKG_LIBS=-lstdc++fs -flto -Wl,--gc-sections
>>>
>>> but this does not reduce the size of the shared object and produces 
>>> some
>>> warnings in `R CMD check` due to portability issues. Is there a way to
>>> reduce the size of the shared object or do I just have to live with it?
>> Hi, see Dirk's http://dirk.eddelbuettel.com/blog/2019/03/27/ and
>> related posts (linked in the first paragraph).
>>
>> I?aki
>
-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From |uc@r @end|ng |rom |edor@project@org  Wed Dec 11 17:14:28 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 11 Dec 2019 17:14:28 +0100
Subject: [R-pkg-devel] reduce size of shared objects
In-Reply-To: <d7df521e-4172-36e5-a528-3c77a776c49d@bgc-jena.mpg.de>
References: <6f268366-a7c5-7e00-66bc-0297f71a3533@bgc-jena.mpg.de>
 <CALEXWq0fB-p2AU5nVSSAU5Uq_KkjmLfRa1qO4s5tsGGvBDuqnw@mail.gmail.com>
 <7b5efee3-f5a6-3f3e-6e4f-ec0ec7bc4bd9@bgc-jena.mpg.de>
 <d7df521e-4172-36e5-a528-3c77a776c49d@bgc-jena.mpg.de>
Message-ID: <CALEXWq0EQAwThLLeco73ww+_4izTLZHkoFuezHA48i7dfnuRkQ@mail.gmail.com>

On Wed, 11 Dec 2019 at 15:01, Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
>
> I have tried the suggestion from the blog post and added
>
> |strippedLib: $(SHLIB) if test -e "/usr/bin/strip" & test -e
> "/bin/uname" & [[ `uname` == "Linux" ]] ; \ then /usr/bin/strip
> --strip-debug $(SHLIB); fi .phony: strippedLib|
> ||
> ||
> |to `src/Makevars` and it works great, it gets the size of the shared
> object down to 1.3 Mb.|
> |When submitting this to CRAN some day, should I apply this trick or
> ignore it and let the user|
> |decide with the new ``R CMD install --strip`` option in R 3.6? Cheers,
> Guido |

Not sure if you received Dirk's reponse:
https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004763.html

>From his experience, it seems that CRAN does not allow stripping, so
follow his intructions to strip objects locally using your
~/.R/Makevars instead of the package's src/Makevars.

I?aki


From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Thu Dec 12 03:37:07 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Thu, 12 Dec 2019 02:37:07 +0000
Subject: [R-pkg-devel] No prebuilt vignette index
Message-ID: <bc4c1b6a952f4534ae81985f70d58965@sfu.ca>

Hi Everyone,


I wonder how to address the following NOTE that I am getting from the win-builder check.


"

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Charith Karunarathna <ckarunar at sfu.ca>'

Package has a VignetteBuilder field but no prebuilt vignette index.

"


I am including a static PDF vignette to my package following the instructions at  https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf


I modify the DESCRIPTION file as follows:


"

.....

Suggests: HHG,
  dendextend,
  vcfR,
  R.rsp
VignetteBuilder: R.rsp


"

Also, the .pdf.asis file (perfectphyloR.pdf.asis) is as follows:



%\VignetteIndexEntry{perfectphyloR: Reconstruct Perfect Phylogenies from DNA Sequence Data}
%\VignetteEngine{R.rsp::asis}



I have to idea how to address the above NOTE. Can somebody help me fix this issue?


Thank you!


Charith.


	[[alternative HTML version deleted]]


From biii m@iii@g oii de@@ey@ws  Thu Dec 12 20:55:31 2019
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Thu, 12 Dec 2019 14:55:31 -0500
Subject: [R-pkg-devel] Large Data Package CRAN Preferences
Message-ID: <01bb01d5b126$1cc1e380$5645aa80$@denney.ws>

Hello,

 

I have two questions about creating data packages for data that will be
updated and in total are >5 MB in size.

 

The first question is:

 

In the CRAN policy, it indicates that packages should be ?5 MB in size in
general.  Within a package that I'm working on, I need access to data that
are updated approximately quarterly, including the historical datasets
(specifically, these are the SDTM and CDASH terminologies in
https://evs.nci.nih.gov/ftp1/CDISC/SDTM/Archive/).

 

Current individual data updates are approximately 1 MB when individually
saved as .RDS, and the total current set is about 20 MB.  I think that the
preferred way to generate these packages since there will be future updates
is to generate one data package for each update and then have an umbrella
package that will depend on each of the individual data update packages.
That seems like it will minimize space requirements on CRAN since old data
will probably never need to be updated (though I will need to access it).

 

Is that an accurate summary of the best practice for creating these as a
data package?

 

And a second question is:

 

Assuming the best practice is the one I described above, the typical need
will be to combine the individual historical datasets for local use.  An
initial test of the time to combine the data indicates that it would take
about 1 minute to do, but after combination, the result could be loaded
faster.  I'd like to store the combined dataset locally with the umbrella
package.  I believe that it is considered poor form to write within the
library location for a package except during installation.

 

What is the best practice for caching the resulting large dataset which is
locally-generated?

 

Thanks,

 

Bill


	[[alternative HTML version deleted]]


From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Fri Dec 13 00:24:26 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Thu, 12 Dec 2019 23:24:26 +0000
Subject: [R-pkg-devel] No prebuilt vignette index
In-Reply-To: <bc4c1b6a952f4534ae81985f70d58965@sfu.ca>
References: <bc4c1b6a952f4534ae81985f70d58965@sfu.ca>
Message-ID: <3bb244ba18174a1d8868c904ea0b9fed@sfu.ca>

Reposting...


Hi Everyone,


I wonder how to address the following NOTE that I am getting from the win-builder check.


"

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Charith Karunarathna <ckarunar at sfu.ca>'

Package has a VignetteBuilder field but no prebuilt vignette index.

"


I am including a static PDF vignette to my package following the instructions at  https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf


I modify the DESCRIPTION file as follows:


"

.....

Suggests: HHG,
  dendextend,
  vcfR,
  R.rsp
VignetteBuilder: R.rsp


"

Also, the .pdf.asis file (perfectphyloR.pdf.asis) is as follows:



%\VignetteIndexEntry{perfectphyloR: Reconstruct Perfect Phylogenies from DNA Sequence Data}
%\VignetteEngine{R.rsp::asis}



I have to idea how to address the above NOTE. Can somebody help me fix this issue?


Thank you!


Charith.


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Fri Dec 13 08:51:27 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 13 Dec 2019 08:51:27 +0100
Subject: [R-pkg-devel] No prebuilt vignette index
In-Reply-To: <3bb244ba18174a1d8868c904ea0b9fed@sfu.ca>
References: <bc4c1b6a952f4534ae81985f70d58965@sfu.ca>
 <3bb244ba18174a1d8868c904ea0b9fed@sfu.ca>
Message-ID: <CALEXWq0YWvP8EeAuu2EmKWoXNxY0ESizYVSVDJ+bM3UgRqjv8Q@mail.gmail.com>

Charith, maybe if you provide more details (how do you build the package?,
a link to a repository, a link to the checks...) you'll have more chances
of getting help.

I?aki

El vie., 13 dic. 2019 0:24, Charith Karunarathna <
charith_karunarathna at sfu.ca> escribi?:

> Reposting...
>
>
> Hi Everyone,
>
>
> I wonder how to address the following NOTE that I am getting from the
> win-builder check.
>
>
> "
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Charith Karunarathna <ckarunar at sfu.ca>'
>
> Package has a VignetteBuilder field but no prebuilt vignette index.
>
> "
>
>
> I am including a static PDF vignette to my package following the
> instructions at
> https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf
>
>
> I modify the DESCRIPTION file as follows:
>
>
> "
>
> .....
>
> Suggests: HHG,
>   dendextend,
>   vcfR,
>   R.rsp
> VignetteBuilder: R.rsp
>
>
> "
>
> Also, the .pdf.asis file (perfectphyloR.pdf.asis) is as follows:
>
>
>
> %\VignetteIndexEntry{perfectphyloR: Reconstruct Perfect Phylogenies from
> DNA Sequence Data}
> %\VignetteEngine{R.rsp::asis}
>
>
>
> I have to idea how to address the above NOTE. Can somebody help me fix
> this issue?
>
>
> Thank you!
>
>
> Charith.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From o||v|er@m@rt|n @end|ng |rom |nr@@|r  Fri Dec 13 15:11:18 2019
From: o||v|er@m@rt|n @end|ng |rom |nr@@|r (olivier martin)
Date: Fri, 13 Dec 2019 15:11:18 +0100
Subject: [R-pkg-devel] Problem with placeholer title 'Vignette Tiitle'
Message-ID: <5ba3a554-a520-a174-c49c-e7ee5ab9c3d1@inra.fr>

Dear all,

I am trying to update the "siland" package with a new version. In this
new version, I have introduced a
vignette. By using the command R CMD check --as-cran, I have no error
message, but when I submit the
new version I get a NOTE:
Vignette package with placeholder title 'Vignette Title':
'Siland.Rmd'

So, how to avoid this NOTE ?

Here is the beginning of the vignette:

---
author : "Florence Carpentier and Olivier Martin"
date: "`r Sys.Date()`"
output:
  ?html_document:
  ??? fig_caption: false
  ??? toc: true
  ??? toc_float:
  ????? collapsed: false
  ????? smooth_scroll: false
  ??? toc_depth: 3
vignette: >
  ? %\VignetteIndexEntry{Vignette Title}
  ? %\VignetteEngine{knitr::rmarkdown}
  ? \usepackage[utf8]{inputenc}
---

```{r echo = FALSE, message = FALSE}
knitr::opts_chunk$set(collapse=T,
  ????????????????????? cache=T,
  ????????????????????? eval = F)
#knitr::opts_chunk$set(eval = FALSE)
# options(width = 120, max.print = 100)
```


Thanks for your help,
Olivier.

-- 
------------------------------------------
MARTIN Olivier
INRA Centre de recherche PACA
228 route de l'A?rodrome
Unit? Biostatistique & Processus Spatiaux
CS 40509
Domaine St Paul, Site Agroparc
84914 Avignon Cedex 9, France
Tel : 04 32 72 21 57


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Fri Dec 13 15:24:33 2019
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Fri, 13 Dec 2019 14:24:33 +0000
Subject: [R-pkg-devel] Problem with placeholer title 'Vignette Tiitle'
In-Reply-To: <5ba3a554-a520-a174-c49c-e7ee5ab9c3d1@inra.fr>
References: <5ba3a554-a520-a174-c49c-e7ee5ab9c3d1@inra.fr>
Message-ID: <14c561e1-2eca-48c5-84da-e9194bb6eff3@email.android.com>

You can fix the note by giving an actual tityto your vignette, which you can do by changing the following line in your YAML header:
 %\VignetteIndexEntry{Vignette Title}

Max

On Dec 13, 2019 8:16 AM, olivier martin <olivier.martin at inra.fr> wrote:
Dear all,

I am trying to update the "siland" package with a new version. In this
new version, I have introduced a
vignette. By using the command R CMD check --as-cran, I have no error
message, but when I submit the
new version I get a NOTE:
Vignette package with placeholder title 'Vignette Title':
'Siland.Rmd'

So, how to avoid this NOTE ?

Here is the beginning of the vignette:

---
author : "Florence Carpentier and Olivier Martin"
date: "`r Sys.Date()`"
output:
   html_document:
      fig_caption: false
      toc: true
      toc_float:
        collapsed: false
        smooth_scroll: false
      toc_depth: 3
vignette: >
    %\VignetteIndexEntry{Vignette Title}
    %\VignetteEngine{knitr::rmarkdown}
    \usepackage[utf8]{inputenc}
---

```{r echo = FALSE, message = FALSE}
knitr::opts_chunk$set(collapse=T,
                        cache=T,
                        eval = F)
#knitr::opts_chunk$set(eval = FALSE)
# options(width = 120, max.print = 100)
```


Thanks for your help,
Olivier.

--
------------------------------------------
MARTIN Olivier
INRA Centre de recherche PACA
228 route de l'A?rodrome
Unit? Biostatistique & Processus Spatiaux
CS 40509
Domaine St Paul, Site Agroparc
84914 Avignon Cedex 9, France
Tel : 04 32 72 21 57

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From |eeg|001 @end|ng |rom umn@edu  Fri Dec 13 19:22:25 2019
From: |eeg|001 @end|ng |rom umn@edu (Cathy Lee Gierke)
Date: Fri, 13 Dec 2019 12:22:25 -0600
Subject: [R-pkg-devel] =?utf-8?q?Error=3A_package_or_namespace_load_faile?=
	=?utf-8?q?d_for_=E2=80=98CATkit=E2=80=99_in_namespaceExport?=
Message-ID: <CAOeg=__cgwMHNULKW+7Xu=_D=fbTzz9imE9wUwCweV_7dNi+YA@mail.gmail.com>

I am doing the check to build my package:

R CMD check --as-cran CATkit_3.3.9.tar.gz

I get this error:

* checking whether package ?CATkit? can be installed ... ERROR

Installation failed.

See ?/Users/user/CATkit/CATkit.Rcheck/00install.out? for details.

* DONE


The log file says:
Error: package or namespace load failed for ?CATkit? in namespaceExport(ns,
exports):
 undefined exports: CatCall, CATCosinor, CATpmc, CATparam
Error: loading failed
Execution halted

R console says:
Saving functions and data ...
Error in package.skeleton(name = "CATkit", path = "~/CATkit") :
  generic functions and other S4 objects (e.g., 'CatCall') cannot be
dumped; use the 'code_files' argument

When I check my R folder, many functions from the package are missing.  So
the copy is failing.  But the 1st file not copied appears to be in the
expected location....

It has been working until just now, and suddenly I get this.
Any suggestions where I should look?  Rseek.org doesn't show me any results
with code_files, nor does R help.

Cathy Lee Gierke


?Those who cannot change their minds cannot change anything.?
*George Bernard Shaw*

?The measure of intelligence is the ability to change.?
*Albert Einstein*

<http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>

	[[alternative HTML version deleted]]


From |eeg|001 @end|ng |rom umn@edu  Sat Dec 14 01:01:04 2019
From: |eeg|001 @end|ng |rom umn@edu (Cathy Lee Gierke)
Date: Fri, 13 Dec 2019 18:01:04 -0600
Subject: [R-pkg-devel] 
	=?utf-8?q?Error=3A_package_or_namespace_load_faile?=
	=?utf-8?q?d_for_=E2=80=98CATkit=E2=80=99_in_namespaceExport?=
In-Reply-To: <CAOeg=__cgwMHNULKW+7Xu=_D=fbTzz9imE9wUwCweV_7dNi+YA@mail.gmail.com>
References: <CAOeg=__cgwMHNULKW+7Xu=_D=fbTzz9imE9wUwCweV_7dNi+YA@mail.gmail.com>
Message-ID: <CAOeg=_8_cFirDbdG5SC4hg31GYpSuEaKnvOQUUXvNHvALca-xg@mail.gmail.com>

This is now fixed.  Not sure why, but I moved a file (that had always
resided in another folder) into the folder most of the other files were in,
and now it works.

Cathy Lee Gierke


<http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>


On Fri, Dec 13, 2019 at 12:22 PM Cathy Lee Gierke <leegi001 at umn.edu> wrote:

> I am doing the check to build my package:
>
> R CMD check --as-cran CATkit_3.3.9.tar.gz
>
> I get this error:
>
> * checking whether package ?CATkit? can be installed ... ERROR
>
> Installation failed.
>
> See ?/Users/user/CATkit/CATkit.Rcheck/00install.out? for details.
>
> * DONE
>
>
> The log file says:
> Error: package or namespace load failed for ?CATkit? in
> namespaceExport(ns, exports):
>  undefined exports: CatCall, CATCosinor, CATpmc, CATparam
> Error: loading failed
> Execution halted
>
> R console says:
> Saving functions and data ...
> Error in package.skeleton(name = "CATkit", path = "~/CATkit") :
>   generic functions and other S4 objects (e.g., 'CatCall') cannot be
> dumped; use the 'code_files' argument
>
> When I check my R folder, many functions from the package are missing.  So
> the copy is failing.  But the 1st file not copied appears to be in the
> expected location....
>
> It has been working until just now, and suddenly I get this.
> Any suggestions where I should look?  Rseek.org doesn't show me any results
> with code_files, nor does R help.
>
> Cathy Lee Gierke
>
>
> ?Those who cannot change their minds cannot change anything.?
> *George Bernard Shaw*
>
> ?The measure of intelligence is the ability to change.?
> *Albert Einstein*
>
> <http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>
>

	[[alternative HTML version deleted]]


From |eeg|001 @end|ng |rom umn@edu  Sat Dec 14 01:06:47 2019
From: |eeg|001 @end|ng |rom umn@edu (Cathy Lee Gierke)
Date: Fri, 13 Dec 2019 18:06:47 -0600
Subject: [R-pkg-devel] pdflatex is not available
Message-ID: <CAOeg=_-Q2bqjL87=H9XmQVRnoWm+AGiwOrjz6t2cFkJbLEPqGQ@mail.gmail.com>

Does anyone know why I might get this error?

Hmm ... looks like a package

Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :

  pdflatex is not available

Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :

*  pdflatex is not available*

*Error in running tools::texi2pdf()*

You may want to clean up by 'rm -Rf
/var/folders/0m/41bxx35j5x9f_tks7zrd7jh00000gn/T//Rtmpuv00M5/Rd2pdf8f2a123193cb'

* checking for detritus in the temp directory ... OK

* DONE



There are no clues in the Rdlatex.log
I have attached the ...manual.tex file.  Is there a way to check it for
non-ascii or non-printing characters on a Mac?  I have had that problem
before, but I'm not finding any now.  Maybe I have the wrong command?


find /Users/user/CATkit/CATkit/man | perl -ne 'print if /[^[:ascii:]]/'

find /Users/user/CATkit/CATkit/man/CatCall.rd | perl -ne 'print if
/[^[:ascii:]]/'


Should there be a pdf file somewhere?

Thanks,
Cathy Lee Gierke


<http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>

From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Dec 14 01:28:34 2019
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 13 Dec 2019 16:28:34 -0800
Subject: [R-pkg-devel] pdflatex is not available
In-Reply-To: <CAOeg=_-Q2bqjL87=H9XmQVRnoWm+AGiwOrjz6t2cFkJbLEPqGQ@mail.gmail.com>
References: <CAOeg=_-Q2bqjL87=H9XmQVRnoWm+AGiwOrjz6t2cFkJbLEPqGQ@mail.gmail.com>
Message-ID: <99b03d67-72e2-170d-1abc-abfafec0c7bc@comcast.net>

I thought TexLive is the usual place to get pdflatex.

Appears I am not the only one who thinks that.


https://askubuntu.com/questions/1161821/pdflatex-not-found-while-installing-r-software-on-ubuntu-19-04


-- 

David.

On 12/13/19 4:06 PM, Cathy Lee Gierke wrote:
> Does anyone know why I might get this error?
>
> Hmm ... looks like a package
>
> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>
>    pdflatex is not available
>
> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>
> *  pdflatex is not available*
>
> *Error in running tools::texi2pdf()*
>
> You may want to clean up by 'rm -Rf
> /var/folders/0m/41bxx35j5x9f_tks7zrd7jh00000gn/T//Rtmpuv00M5/Rd2pdf8f2a123193cb'
>
> * checking for detritus in the temp directory ... OK
>
> * DONE
>
>
>
> There are no clues in the Rdlatex.log
> I have attached the ...manual.tex file.  Is there a way to check it for
> non-ascii or non-printing characters on a Mac?  I have had that problem
> before, but I'm not finding any now.  Maybe I have the wrong command?
>
>
> find /Users/user/CATkit/CATkit/man | perl -ne 'print if /[^[:ascii:]]/'
>
> find /Users/user/CATkit/CATkit/man/CatCall.rd | perl -ne 'print if
> /[^[:ascii:]]/'
>
>
> Should there be a pdf file somewhere?
>
> Thanks,
> Cathy Lee Gierke
>
>
> <http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |eeg|001 @end|ng |rom umn@edu  Sat Dec 14 02:19:02 2019
From: |eeg|001 @end|ng |rom umn@edu (Cathy Lee Gierke)
Date: Fri, 13 Dec 2019 19:19:02 -0600
Subject: [R-pkg-devel] pdflatex is not available
In-Reply-To: <99b03d67-72e2-170d-1abc-abfafec0c7bc@comcast.net>
References: <CAOeg=_-Q2bqjL87=H9XmQVRnoWm+AGiwOrjz6t2cFkJbLEPqGQ@mail.gmail.com>
 <99b03d67-72e2-170d-1abc-abfafec0c7bc@comcast.net>
Message-ID: <CAOeg=_-1B+2Yz2cGmuKfJKAgN1FpS+w5p2KMeFF9mJiGvvJJAw@mail.gmail.com>

I think I have pdflatex.  At least there is a PATH to textbin
> Sys.getenv("PATH")
[1]
"/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Library/TeX/texbin:/opt/X11/bin:/usr/local/git/bin"

Does this path indicate I have pdflatex?

I'm confused because asking about the pdflatex PATH returns a space:
Sys.which("pdflatex")
pdflatex
      ""
What is up with that?

Cathy Lee Gierke


?Those who cannot change their minds cannot change anything.?
*George Bernard Shaw*

?The measure of intelligence is the ability to change.?
*Albert Einstein*

<http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>


On Fri, Dec 13, 2019 at 6:28 PM David Winsemius <dwinsemius at comcast.net>
wrote:

> I thought TexLive is the usual place to get pdflatex.
>
> Appears I am not the only one who thinks that.
>
>
>
> https://askubuntu.com/questions/1161821/pdflatex-not-found-while-installing-r-software-on-ubuntu-19-04
>
>
> --
>
> David.
>
> On 12/13/19 4:06 PM, Cathy Lee Gierke wrote:
> > Does anyone know why I might get this error?
> >
> > Hmm ... looks like a package
> >
> > Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
> quiet,  :
> >
> >    pdflatex is not available
> >
> > Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet =
> quiet,  :
> >
> > *  pdflatex is not available*
> >
> > *Error in running tools::texi2pdf()*
> >
> > You may want to clean up by 'rm -Rf
> >
> /var/folders/0m/41bxx35j5x9f_tks7zrd7jh00000gn/T//Rtmpuv00M5/Rd2pdf8f2a123193cb'
> >
> > * checking for detritus in the temp directory ... OK
> >
> > * DONE
> >
> >
> >
> > There are no clues in the Rdlatex.log
> > I have attached the ...manual.tex file.  Is there a way to check it for
> > non-ascii or non-printing characters on a Mac?  I have had that problem
> > before, but I'm not finding any now.  Maybe I have the wrong command?
> >
> >
> > find /Users/user/CATkit/CATkit/man | perl -ne 'print if /[^[:ascii:]]/'
> >
> > find /Users/user/CATkit/CATkit/man/CatCall.rd | perl -ne 'print if
> > /[^[:ascii:]]/'
> >
> >
> > Should there be a pdf file somewhere?
> >
> > Thanks,
> > Cathy Lee Gierke
> >
> >
> > <http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @@r@h@go@|ee @end|ng |rom gm@||@com  Sat Dec 14 14:02:20 2019
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Sat, 14 Dec 2019 08:02:20 -0500
Subject: [R-pkg-devel] pdflatex is not available
In-Reply-To: <CAOeg=_-Q2bqjL87=H9XmQVRnoWm+AGiwOrjz6t2cFkJbLEPqGQ@mail.gmail.com>
References: <CAOeg=_-Q2bqjL87=H9XmQVRnoWm+AGiwOrjz6t2cFkJbLEPqGQ@mail.gmail.com>
Message-ID: <CAM_vjukRBAu1dLmz=m3tx1rLtYsWa_=OjyxUskivMM65FStJnw@mail.gmail.com>

It sounds like you're on a Mac? Then you need to install MacTeX,
http://www.tug.org/mactex/ to get pdflatex.

Sarah

On Fri, Dec 13, 2019 at 7:11 PM Cathy Lee Gierke <leegi001 at umn.edu> wrote:

> Does anyone know why I might get this error?
>
> Hmm ... looks like a package
>
> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>
>   pdflatex is not available
>
> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>
> *  pdflatex is not available*
>
> *Error in running tools::texi2pdf()*
>
> You may want to clean up by 'rm -Rf
>
> /var/folders/0m/41bxx35j5x9f_tks7zrd7jh00000gn/T//Rtmpuv00M5/Rd2pdf8f2a123193cb'
>
> * checking for detritus in the temp directory ... OK
>
> * DONE
>
>
>
> There are no clues in the Rdlatex.log
> I have attached the ...manual.tex file.  Is there a way to check it for
> non-ascii or non-printing characters on a Mac?  I have had that problem
> before, but I'm not finding any now.  Maybe I have the wrong command?
>
>
> find /Users/user/CATkit/CATkit/man | perl -ne 'print if /[^[:ascii:]]/'
>
> find /Users/user/CATkit/CATkit/man/CatCall.rd | perl -ne 'print if
> /[^[:ascii:]]/'
>
>
> Should there be a pdf file somewhere?
>
> Thanks,
> Cathy Lee Gierke
>
>
> <http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sarah Goslee (she/her)
http://www.sarahgoslee.com

	[[alternative HTML version deleted]]


From gor@n@bro@trom @end|ng |rom umu@@e  Sat Dec 14 22:33:30 2019
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Sat, 14 Dec 2019 22:33:30 +0100
Subject: [R-pkg-devel] pdflatex is not available
In-Reply-To: <CAM_vjukRBAu1dLmz=m3tx1rLtYsWa_=OjyxUskivMM65FStJnw@mail.gmail.com>
References: <CAOeg=_-Q2bqjL87=H9XmQVRnoWm+AGiwOrjz6t2cFkJbLEPqGQ@mail.gmail.com>
 <CAM_vjukRBAu1dLmz=m3tx1rLtYsWa_=OjyxUskivMM65FStJnw@mail.gmail.com>
Message-ID: <fcd57f4e-7551-4650-2b4e-69739bcfd2dc@umu.se>



On 2019-12-14 14:02, Sarah Goslee wrote:
> It sounds like you're on a Mac? Then you need to install MacTeX,
> http://www.tug.org/mactex/ to get pdflatex.

Or maybe tinytex will do? https://yihui.org/tinytex/

G?ran

> 
> Sarah
> 
> On Fri, Dec 13, 2019 at 7:11 PM Cathy Lee Gierke <leegi001 at umn.edu> wrote:
> 
>> Does anyone know why I might get this error?
>>
>> Hmm ... looks like a package
>>
>> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>>
>>    pdflatex is not available
>>
>> Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,  :
>>
>> *  pdflatex is not available*
>>
>> *Error in running tools::texi2pdf()*
>>
>> You may want to clean up by 'rm -Rf
>>
>> /var/folders/0m/41bxx35j5x9f_tks7zrd7jh00000gn/T//Rtmpuv00M5/Rd2pdf8f2a123193cb'
>>
>> * checking for detritus in the temp directory ... OK
>>
>> * DONE
>>
>>
>>
>> There are no clues in the Rdlatex.log
>> I have attached the ...manual.tex file.  Is there a way to check it for
>> non-ascii or non-printing characters on a Mac?  I have had that problem
>> before, but I'm not finding any now.  Maybe I have the wrong command?
>>
>>
>> find /Users/user/CATkit/CATkit/man | perl -ne 'print if /[^[:ascii:]]/'
>>
>> find /Users/user/CATkit/CATkit/man/CatCall.rd | perl -ne 'print if
>> /[^[:ascii:]]/'
>>
>>
>> Should there be a pdf file somewhere?
>>
>> Thanks,
>> Cathy Lee Gierke
>>
>>
>> <http://www.goodreads.com/author/show/23924.Martin_Luther_King_Jr_>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Dec 15 17:54:11 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 15 Dec 2019 17:54:11 +0100
Subject: [R-pkg-devel] Large Data Package CRAN Preferences
In-Reply-To: <01bb01d5b126$1cc1e380$5645aa80$@denney.ws>
References: <01bb01d5b126$1cc1e380$5645aa80$@denney.ws>
Message-ID: <15a15f6d-bc97-2891-a159-29e10e2006ae@statistik.tu-dortmund.de>

Ideally yoiu wpuld host the data elsewhere and submit a CRAN package 
that allows users to easily get/merge/aggregate the data.

Best,
Uwe Ligges



On 12.12.2019 20:55, bill at denney.ws wrote:
> Hello,
> 
>   
> 
> I have two questions about creating data packages for data that will be
> updated and in total are >5 MB in size.
> 
>   
> 
> The first question is:
> 
>   
> 
> In the CRAN policy, it indicates that packages should be ?5 MB in size in
> general.  Within a package that I'm working on, I need access to data that
> are updated approximately quarterly, including the historical datasets
> (specifically, these are the SDTM and CDASH terminologies in
> https://evs.nci.nih.gov/ftp1/CDISC/SDTM/Archive/).
> 
>   
> 
> Current individual data updates are approximately 1 MB when individually
> saved as .RDS, and the total current set is about 20 MB.  I think that the
> preferred way to generate these packages since there will be future updates
> is to generate one data package for each update and then have an umbrella
> package that will depend on each of the individual data update packages.
> That seems like it will minimize space requirements on CRAN since old data
> will probably never need to be updated (though I will need to access it).
> 
>   
> 
> Is that an accurate summary of the best practice for creating these as a
> data package?
> 
>   
> 
> And a second question is:
> 
>   
> 
> Assuming the best practice is the one I described above, the typical need
> will be to combine the individual historical datasets for local use.  An
> initial test of the time to combine the data indicates that it would take
> about 1 minute to do, but after combination, the result could be loaded
> faster.  I'd like to store the combined dataset locally with the umbrella
> package.  I believe that it is considered poor form to write within the
> library location for a package except during installation.
> 
>   
> 
> What is the best practice for caching the resulting large dataset which is
> locally-generated?
> 
>   
> 
> Thanks,
> 
>   
> 
> Bill
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Dec 15 17:59:40 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 15 Dec 2019 17:59:40 +0100
Subject: [R-pkg-devel] r2sundials submission failure
In-Reply-To: <e15a9291-76d6-c705-b921-97da08aeb621@gmail.com>
References: <18799183-2647-badc-e051-f303a49dca59@gmail.com>
 <CAFQwRQzzTzDhm7_sgp2rJOVpomYvvcLyd7sHLQeKk5DaF5DX=Q@mail.gmail.com>
 <7a0ebb84-5de9-1298-23be-a4b53e99e169@gmail.com>
 <e15a9291-76d6-c705-b921-97da08aeb621@gmail.com>
Message-ID: <e1d1b4e0-015a-844e-e6d0-228b16f65449@statistik.tu-dortmund.de>

Have you tried to write to CRAN at ... and ask if thirs party software can 
be installed on CRAN?

Best,
Uwe Ligges

On 11.12.2019 10:39, Serguei Sokol wrote:
> Hi,
> 
> I have tried to submit my new package 
> https://github.com/sgsokol/r2sundials to CRAN but submission seems to be 
> dismissed.
> The package needs a third part software 
> https://computing.llnl.gov/projects/sundials/cvodes so it cannot be 
> built on CRAN automatically. I explained this (and how the package was 
> tested by myself) in the submitter's comment (cf. hereafter) and second 
> time in the reply to all (as was requested) to automatic message from 
> CRAN announcing the building failure but to no avail. The submission was 
> done on November 25, more than two weeks later I still don't have any 
> response and the package is no more in incoming/ dir on cran ftp site. I 
> conclude that this submission is dismissed.
> 
> My question is: what can be reasonably done to make a package like this 
> (i.e. depending on third part software not available on CRAN) to be 
> accepted? Or may be the current policy: all new package must 
> automatically build. Period. In my case it can imply ~20 MB additional 
> space (source code + libs).
> 
> Thanks in advance for any hint.
> Serguei.
> 
> Submitter's comment: Dear CRAN team,
> 
> I submit package r2sundials which
>  ? depends on a third part software
>  ? from
> https://computing.llnl.gov/projects/sundials/cvodes
> This
>  ? is the reason for which it will not automatically
>  ? build on your test systems. But on my side, I could
>  ? successfully run 'R CMD check --as-cran' on Linux
>  ? (R-3.6.1, gcc8), MacOS Catalina (R-3.6.1, Apple
>  ? clang-1100.0.33.12) and Windows 10 (R-devel r77430,
>  ? gcc-4.9.3). If you wish, I can send you reports from
>  ? these runs. Even if it is improbable, but if you
>  ? decide to run such checks manually by your self,
>  ? installation instructions are available
>  ? on
> https://github.com/sgsokol/r2sundials
> 
> Moreover,
>  ? winbuilder signals:
> Possibly mis-spelled words in
>  ? DESCRIPTION:
>  ? CVODES (3:34)
>  ? Hindmarsh (9:803)
>  ? Rcpp (3:8, 9:285)
>  ? al (9:816)
>  ? cvodes (9:47)
>  ? et (9:813)
>  ? rmumps (9:501)
> These all are false
>  ? positives designating software, R packages and
>  ? bibliographic reference.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From biii m@iii@g oii de@@ey@ws  Sun Dec 15 18:27:09 2019
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Sun, 15 Dec 2019 12:27:09 -0500
Subject: [R-pkg-devel] Large Data Package CRAN Preferences
In-Reply-To: <15a15f6d-bc97-2891-a159-29e10e2006ae@statistik.tu-dortmund.de>
References: <01bb01d5b126$1cc1e380$5645aa80$@denney.ws>
 <15a15f6d-bc97-2891-a159-29e10e2006ae@statistik.tu-dortmund.de>
Message-ID: <006301d5b36c$e1f86550$a5e92ff0$@denney.ws>

Hi Uwe,

Thanks for this information, and it makes sense to me.  Is there a preferred way to cache the data locally?

None of the ways that I can think to cache the data sound particularly good, and I wonder if I'm missing something.  The ideas that occur to me are:

1. Download them into the package directory `path.package("datapkg")`, but that would require an action to be performed on package installation, and I'm unaware of any way to trigger an action on installation.
2. Have a user-specified cache directory (e.g. `options("datapkg_cache"="/my/cache/location")`), but that would require interaction with every use.  (Not horrible, but it will likely significantly increase the number of user issues with the package.)
3. Have a user-specified cache directory like #2, but have it default to somewhere in their home directory like `file.path(Sys.getenv("HOME"), "datapkg_cache")` if they have not set the option.

To me #3 sounds best, but I'd like to be sure that I'm not missing something.

Thanks,

Bill

-----Original Message-----
From: Uwe Ligges <ligges at statistik.tu-dortmund.de> 
Sent: Sunday, December 15, 2019 11:54 AM
To: bill at denney.ws; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Large Data Package CRAN Preferences

Ideally yoiu wpuld host the data elsewhere and submit a CRAN package that allows users to easily get/merge/aggregate the data.

Best,
Uwe Ligges



On 12.12.2019 20:55, bill at denney.ws wrote:
> Hello,
> 
>   
> 
> I have two questions about creating data packages for data that will 
> be updated and in total are >5 MB in size.
> 
>   
> 
> The first question is:
> 
>   
> 
> In the CRAN policy, it indicates that packages should be ?5 MB in size 
> in general.  Within a package that I'm working on, I need access to 
> data that are updated approximately quarterly, including the 
> historical datasets (specifically, these are the SDTM and CDASH 
> terminologies in https://evs.nci.nih.gov/ftp1/CDISC/SDTM/Archive/).
> 
>   
> 
> Current individual data updates are approximately 1 MB when 
> individually saved as .RDS, and the total current set is about 20 MB.  
> I think that the preferred way to generate these packages since there 
> will be future updates is to generate one data package for each update 
> and then have an umbrella package that will depend on each of the individual data update packages.
> That seems like it will minimize space requirements on CRAN since old 
> data will probably never need to be updated (though I will need to access it).
> 
>   
> 
> Is that an accurate summary of the best practice for creating these as 
> a data package?
> 
>   
> 
> And a second question is:
> 
>   
> 
> Assuming the best practice is the one I described above, the typical 
> need will be to combine the individual historical datasets for local 
> use.  An initial test of the time to combine the data indicates that 
> it would take about 1 minute to do, but after combination, the result 
> could be loaded faster.  I'd like to store the combined dataset 
> locally with the umbrella package.  I believe that it is considered 
> poor form to write within the library location for a package except during installation.
> 
>   
> 
> What is the best practice for caching the resulting large dataset 
> which is locally-generated?
> 
>   
> 
> Thanks,
> 
>   
> 
> Bill
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From henr|k@bengt@@on @end|ng |rom gm@||@com  Sun Dec 15 18:57:36 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Sun, 15 Dec 2019 09:57:36 -0800
Subject: [R-pkg-devel] Large Data Package CRAN Preferences
In-Reply-To: <006301d5b36c$e1f86550$a5e92ff0$@denney.ws>
References: <01bb01d5b126$1cc1e380$5645aa80$@denney.ws>
 <15a15f6d-bc97-2891-a159-29e10e2006ae@statistik.tu-dortmund.de>
 <006301d5b36c$e1f86550$a5e92ff0$@denney.ws>
Message-ID: <CAFDcVCTf1-6=d7jxgZu-mjH9Gh_DURDZ6i3i-QwjM-uAZN3yqQ@mail.gmail.com>

The R.cache package on CRAN provides can be used for this purpose. It
works on all platforms.  Per CRAN Policies, it will prompt the user
(in an interactive session) whether they wish to use a persistent
cache folder, or to fall back to temporary one.  For example,

> path <- R.cache::getCachePath(dirs = "MyDataPkg")
The R.cache package needs to create a directory that will hold cache
files. It is convenient to use  '/home/hb/.cache/R/R.cache' because it
follows the standard on your operating system and it remains also
after restarting R. Do you wish to create the
'/home/hb/.cache/R/R.cache' directory? If not, a temporary directory
(/tmp/hb/RtmpvEgWIr/.Rcache) that is specific to this R session will
be used. [Y/n]:
> path
[1] "/home/hb/.cache/R/R.cache/MyDataPkg"
>

Once the user have accepted this, this folder is created and will be
available in all future R session. That is, next time they start R
there will be no prompt:

> path <- R.cache::getCachePath(dirs = "MyDataPkg")
> path
[1] "/home/hb/.cache/R/R.cache/MyDataPkg"

This will also be the case in non-interactive session.  If that folder
does not exists in non-interactive session, then a temporary folder
will be used (= effectively making the cache lifetime equal to the
session lifetime).   'R CMD check' will always use a temporary cache
such that there is no memory between checks.

/Henrik
(disclaimer: I'm the author)

On Sun, Dec 15, 2019 at 9:27 AM <bill at denney.ws> wrote:
>
> Hi Uwe,
>
> Thanks for this information, and it makes sense to me.  Is there a preferred way to cache the data locally?
>
> None of the ways that I can think to cache the data sound particularly good, and I wonder if I'm missing something.  The ideas that occur to me are:
>
> 1. Download them into the package directory `path.package("datapkg")`, but that would require an action to be performed on package installation, and I'm unaware of any way to trigger an action on installation.
> 2. Have a user-specified cache directory (e.g. `options("datapkg_cache"="/my/cache/location")`), but that would require interaction with every use.  (Not horrible, but it will likely significantly increase the number of user issues with the package.)
> 3. Have a user-specified cache directory like #2, but have it default to somewhere in their home directory like `file.path(Sys.getenv("HOME"), "datapkg_cache")` if they have not set the option.
>
> To me #3 sounds best, but I'd like to be sure that I'm not missing something.
>
> Thanks,
>
> Bill
>
> -----Original Message-----
> From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
> Sent: Sunday, December 15, 2019 11:54 AM
> To: bill at denney.ws; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Large Data Package CRAN Preferences
>
> Ideally yoiu wpuld host the data elsewhere and submit a CRAN package that allows users to easily get/merge/aggregate the data.
>
> Best,
> Uwe Ligges
>
>
>
> On 12.12.2019 20:55, bill at denney.ws wrote:
> > Hello,
> >
> >
> >
> > I have two questions about creating data packages for data that will
> > be updated and in total are >5 MB in size.
> >
> >
> >
> > The first question is:
> >
> >
> >
> > In the CRAN policy, it indicates that packages should be ?5 MB in size
> > in general.  Within a package that I'm working on, I need access to
> > data that are updated approximately quarterly, including the
> > historical datasets (specifically, these are the SDTM and CDASH
> > terminologies in https://evs.nci.nih.gov/ftp1/CDISC/SDTM/Archive/).
> >
> >
> >
> > Current individual data updates are approximately 1 MB when
> > individually saved as .RDS, and the total current set is about 20 MB.
> > I think that the preferred way to generate these packages since there
> > will be future updates is to generate one data package for each update
> > and then have an umbrella package that will depend on each of the individual data update packages.
> > That seems like it will minimize space requirements on CRAN since old
> > data will probably never need to be updated (though I will need to access it).
> >
> >
> >
> > Is that an accurate summary of the best practice for creating these as
> > a data package?
> >
> >
> >
> > And a second question is:
> >
> >
> >
> > Assuming the best practice is the one I described above, the typical
> > need will be to combine the individual historical datasets for local
> > use.  An initial test of the time to combine the data indicates that
> > it would take about 1 minute to do, but after combination, the result
> > could be loaded faster.  I'd like to store the combined dataset
> > locally with the umbrella package.  I believe that it is considered
> > poor form to write within the library location for a package except during installation.
> >
> >
> >
> > What is the best practice for caching the resulting large dataset
> > which is locally-generated?
> >
> >
> >
> > Thanks,
> >
> >
> >
> > Bill
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@||@@tubner @end|ng |rom gm@||@com  Sun Dec 15 18:58:35 2019
From: r@||@@tubner @end|ng |rom gm@||@com (Ralf Stubner)
Date: Sun, 15 Dec 2019 18:58:35 +0100
Subject: [R-pkg-devel] Large Data Package CRAN Preferences
In-Reply-To: <006301d5b36c$e1f86550$a5e92ff0$@denney.ws>
References: <01bb01d5b126$1cc1e380$5645aa80$@denney.ws>
 <15a15f6d-bc97-2891-a159-29e10e2006ae@statistik.tu-dortmund.de>
 <006301d5b36c$e1f86550$a5e92ff0$@denney.ws>
Message-ID: <CAFQwRQzyKKECATR2tqr4iPedx+GbV7LZDojpHbkX+28Ditbfsg@mail.gmail.com>

On Sun, Dec 15, 2019 at 6:27 PM <bill at denney.ws> wrote:
> Thanks for this information, and it makes sense to me.  Is there a preferred way to cache the data locally?

Personally I like making an R package out of the data and hosting it
in an "AdditionalRepository". This is quite easy with the help of the
drat package. See
https://journal.r-project.org/archive/2017/RJ-2017-026/RJ-2017-026.pdf
for details of this approach.

cheerio
ralf


From t|@goo||voto @end|ng |rom gm@||@com  Sun Dec 15 19:29:12 2019
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Sun, 15 Dec 2019 15:29:12 -0300
Subject: [R-pkg-devel] Time for CRAN response
Message-ID: <000001d5b375$8e1b5880$aa520980$@gmail.com>

Dear all,

I've submitted my package 'metan' to CRAN for the first time a few weeks ago
and received some suggestions to improve the code. After fixing some bugs,
I've resubmitted it on November 25, but I still don't have any response and
the package was not found in incoming/ dir on CRAN cran ftp site. Since it
is my first experience, I would like to have an idea about how long the CRAN
team usually decides about a package submission.

Best,

Tiago Olivoto


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Dec 15 21:35:16 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 15 Dec 2019 15:35:16 -0500
Subject: [R-pkg-devel] Time for CRAN response
In-Reply-To: <000001d5b375$8e1b5880$aa520980$@gmail.com>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
Message-ID: <b39e3693-5861-3de2-2b0c-b7ab64eee6aa@gmail.com>

On 15/12/2019 1:29 p.m., Tiago Olivoto wrote:
> Dear all,
> 
> I've submitted my package 'metan' to CRAN for the first time a few weeks ago
> and received some suggestions to improve the code. After fixing some bugs,
> I've resubmitted it on November 25, but I still don't have any response and
> the package was not found in incoming/ dir on CRAN cran ftp site. Since it
> is my first experience, I would like to have an idea about how long the CRAN
> team usually decides about a package submission.
> 

If it is not in incoming/, something went wrong.  The most common thing 
to go wrong is that the maintainer didn't respond to the confirmation 
message. That message looks like this for a resubmission.  I assume 
first time submissions have a similar message:

> Dear Duncan Murdoch
> Someone has submitted the package rgl to CRAN.
> You are receiving this email to confirm the submission as the maintainer of
> this package.
> To confirm the submission to CRAN, follow or copy & paste the following
> link into your browser:
> ...


When you confirm submission, you'll get another message that looks like 
this:

> [This was generated from CRAN.R-project.org/submit.html]
> 
> The following package was uploaded to CRAN:
> ===========================================
> 
> Package Information:
> Package: rgl 
> Version: 0.100.26 
 > ...

After that, it goes into a queue for checking, and usually within a few 
days you'll be told about problems with it or it will be accepted to 
CRAN.  (Sometimes you'll be told very quickly, if the automated checks 
find a problem.)

Duncan Murdoch


From ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@  Sun Dec 15 21:39:55 2019
From: ch@r|th_k@run@r@thn@ @end|ng |rom @|u@c@ (Charith Karunarathna)
Date: Sun, 15 Dec 2019 20:39:55 +0000
Subject: [R-pkg-devel] No prebuilt vignette index
In-Reply-To: <3bb244ba18174a1d8868c904ea0b9fed@sfu.ca>
References: <bc4c1b6a952f4534ae81985f70d58965@sfu.ca>,
 <3bb244ba18174a1d8868c904ea0b9fed@sfu.ca>
Message-ID: <e6d0a8b203804cbfafd9e0ddfb7fff84@sfu.ca>



Hi Everyone,


I wonder how to address the following NOTE that I am getting from the win-builder check.


"

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Charith Karunarathna <ckarunar at sfu.ca>'

Package has a VignetteBuilder field but no prebuilt vignette index.

"



I am including a static PDF vignette to my package following the instructions at  https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf



The .pdf.asis file (perfectphyloR.pdf.asis) is as follows:


"

%\VignetteIndexEntry{perfectphyloR: Reconstruct Perfect Phylogenies from DNA Sequence Data}
%\VignetteEngine{R.rsp::asis}

"
For more details, these are the links for the repository and win-builder check:

- Link for the package's github repository: https://github.com/cbhagya/perfectphyloR
- Link for win-builder checks: https://win-builder.r-project.org/7d6SEV4IwMNL/00check.log

I have no idea how to address the above NOTE. Can somebody help me fix this issue?


Thank you!


Charith.


	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Sun Dec 15 22:10:31 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 15 Dec 2019 22:10:31 +0100
Subject: [R-pkg-devel] No prebuilt vignette index
In-Reply-To: <e6d0a8b203804cbfafd9e0ddfb7fff84@sfu.ca>
References: <bc4c1b6a952f4534ae81985f70d58965@sfu.ca>
 <3bb244ba18174a1d8868c904ea0b9fed@sfu.ca>
 <e6d0a8b203804cbfafd9e0ddfb7fff84@sfu.ca>
Message-ID: <CALEXWq0=B+phEBUX_xZ=WSy6sw=XJCDAwkKz+xPpdyX+i2cmog@mail.gmail.com>

Remove the "inst" directory and don't use "--no-build-vignettes" in your
build command.

I?aki

On Sun, 15 Dec 2019 at 21:45, Charith Karunarathna <
charith_karunarathna at sfu.ca> wrote:

>
>
> Hi Everyone,
>
>
> I wonder how to address the following NOTE that I am getting from the
> win-builder check.
>
>
> "
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Charith Karunarathna <ckarunar at sfu.ca>'
>
> Package has a VignetteBuilder field but no prebuilt vignette index.
>
> "
>
>
>
> I am including a static PDF vignette to my package following the
> instructions at
> https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf
>
>
>
> The .pdf.asis file (perfectphyloR.pdf.asis) is as follows:
>
>
> "
>
> %\VignetteIndexEntry{perfectphyloR: Reconstruct Perfect Phylogenies from
> DNA Sequence Data}
> %\VignetteEngine{R.rsp::asis}
>
> "
> For more details, these are the links for the repository and win-builder
> check:
>
> - Link for the package's github repository:
> https://github.com/cbhagya/perfectphyloR
> - Link for win-builder checks:
> https://win-builder.r-project.org/7d6SEV4IwMNL/00check.log
>
> I have no idea how to address the above NOTE. Can somebody help me fix
> this issue?
>
>
> Thank you!
>
>
> Charith.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
I?aki ?car

	[[alternative HTML version deleted]]


From t|@goo||voto @end|ng |rom gm@||@com  Sun Dec 15 22:57:09 2019
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Sun, 15 Dec 2019 18:57:09 -0300
Subject: [R-pkg-devel] RES:  Time for CRAN response
In-Reply-To: <b39e3693-5861-3de2-2b0c-b7ab64eee6aa@gmail.com>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
 <b39e3693-5861-3de2-2b0c-b7ab64eee6aa@gmail.com>
Message-ID: <000001d5b392$9b0e9940$d12bcbc0$@gmail.com>

Thank you for the response.
As far I remember, I've responded that message by following the link and selecting "I have read the CRAN policies and would like to submit this package to CRAN" and " I have checked the submission using R CMD check --as-cran and a current version of r-devel, as mandated by the CRAN Repository Policy. (You could do so using the win-builder service at https://win-builder.r-project.org)", and then clicking on "upload package to CRAN"
These same steps were followed in the first submission, but at that time I received the following message that was not received in the last submission.

> Dear maintainer,
> 
> package metan_1.0.0.tar.gz has been auto-processed and is pending a manual inspection of this new CRAN submission. A CRAN team member will typically respond to you within the next 10 working days.

Should I try to re-submit it again?
Best,
Tiago Olivoto


-----Mensagem original-----
De: Duncan Murdoch <murdoch.duncan at gmail.com> 
Enviada em: domingo, 15 de dezembro de 2019 17:35
Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: Re: [R-pkg-devel] Time for CRAN response

On 15/12/2019 1:29 p.m., Tiago Olivoto wrote:
> Dear all,
> 
> I've submitted my package 'metan' to CRAN for the first time a few 
> weeks ago and received some suggestions to improve the code. After 
> fixing some bugs, I've resubmitted it on November 25, but I still 
> don't have any response and the package was not found in incoming/ dir 
> on CRAN cran ftp site. Since it is my first experience, I would like 
> to have an idea about how long the CRAN team usually decides about a package submission.
> 

If it is not in incoming/, something went wrong.  The most common thing to go wrong is that the maintainer didn't respond to the confirmation message. That message looks like this for a resubmission.  I assume first time submissions have a similar message:

> Dear Duncan Murdoch
> Someone has submitted the package rgl to CRAN.
> You are receiving this email to confirm the submission as the 
> maintainer of this package.
> To confirm the submission to CRAN, follow or copy & paste the 
> following link into your browser:
> ...


When you confirm submission, you'll get another message that looks like
this:

> [This was generated from CRAN.R-project.org/submit.html]
> 
> The following package was uploaded to CRAN:
> ===========================================
> 
> Package Information:
> Package: rgl
> Version: 0.100.26
 > ...

After that, it goes into a queue for checking, and usually within a few days you'll be told about problems with it or it will be accepted to CRAN.  (Sometimes you'll be told very quickly, if the automated checks find a problem.)

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Dec 15 23:39:28 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 15 Dec 2019 17:39:28 -0500
Subject: [R-pkg-devel] RES:  Time for CRAN response
In-Reply-To: <000001d5b392$9b0e9940$d12bcbc0$@gmail.com>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
 <b39e3693-5861-3de2-2b0c-b7ab64eee6aa@gmail.com>
 <000001d5b392$9b0e9940$d12bcbc0$@gmail.com>
Message-ID: <29bd2004-31a5-6734-b38b-71a8fd404c4b@gmail.com>

On 15/12/2019 4:57 p.m., Tiago Olivoto wrote:
> Thank you for the response.
> As far I remember, I've responded that message by following the link and selecting "I have read the CRAN policies and would like to submit this package to CRAN" and " I have checked the submission using R CMD check --as-cran and a current version of r-devel, as mandated by the CRAN Repository Policy. (You could do so using the win-builder service at https://win-builder.r-project.org)", and then clicking on "upload package to CRAN"
> These same steps were followed in the first submission, but at that time I received the following message that was not received in the last submission.
> 
>> Dear maintainer,
>>
>> package metan_1.0.0.tar.gz has been auto-processed and is pending a manual inspection of this new CRAN submission. A CRAN team member will typically respond to you within the next 10 working days.
> 
> Should I try to re-submit it again?

Probably.  I'd wait 24 hours, to see if someone from CRAN replies with 
more information.

Duncan Murdoch

> Best,
> Tiago Olivoto
> 
> 
> -----Mensagem original-----
> De: Duncan Murdoch <murdoch.duncan at gmail.com>
> Enviada em: domingo, 15 de dezembro de 2019 17:35
> Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
> Assunto: Re: [R-pkg-devel] Time for CRAN response
> 
> On 15/12/2019 1:29 p.m., Tiago Olivoto wrote:
>> Dear all,
>>
>> I've submitted my package 'metan' to CRAN for the first time a few
>> weeks ago and received some suggestions to improve the code. After
>> fixing some bugs, I've resubmitted it on November 25, but I still
>> don't have any response and the package was not found in incoming/ dir
>> on CRAN cran ftp site. Since it is my first experience, I would like
>> to have an idea about how long the CRAN team usually decides about a package submission.
>>
> 
> If it is not in incoming/, something went wrong.  The most common thing to go wrong is that the maintainer didn't respond to the confirmation message. That message looks like this for a resubmission.  I assume first time submissions have a similar message:
> 
>> Dear Duncan Murdoch
>> Someone has submitted the package rgl to CRAN.
>> You are receiving this email to confirm the submission as the
>> maintainer of this package.
>> To confirm the submission to CRAN, follow or copy & paste the
>> following link into your browser:
>> ...
> 
> 
> When you confirm submission, you'll get another message that looks like
> this:
> 
>> [This was generated from CRAN.R-project.org/submit.html]
>>
>> The following package was uploaded to CRAN:
>> ===========================================
>>
>> Package Information:
>> Package: rgl
>> Version: 0.100.26
>   > ...
> 
> After that, it goes into a queue for checking, and usually within a few days you'll be told about problems with it or it will be accepted to CRAN.  (Sometimes you'll be told very quickly, if the automated checks find a problem.)
> 
> Duncan Murdoch
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Dec 16 02:26:37 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 16 Dec 2019 02:26:37 +0100
Subject: [R-pkg-devel] RES: Time for CRAN response
In-Reply-To: <29bd2004-31a5-6734-b38b-71a8fd404c4b@gmail.com>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
 <b39e3693-5861-3de2-2b0c-b7ab64eee6aa@gmail.com>
 <000001d5b392$9b0e9940$d12bcbc0$@gmail.com>
 <29bd2004-31a5-6734-b38b-71a8fd404c4b@gmail.com>
Message-ID: <613c6b57-1621-0e2f-30df-a1e1d95e8c59@statistik.tu-dortmund.de>



On 15.12.2019 23:39, Duncan Murdoch wrote:
> On 15/12/2019 4:57 p.m., Tiago Olivoto wrote:
>> Thank you for the response.
>> As far I remember, I've responded that message by following the link 
>> and selecting "I have read the CRAN policies and would like to submit 
>> this package to CRAN" and " I have checked the submission using R CMD 
>> check --as-cran and a current version of r-devel, as mandated by the 
>> CRAN Repository Policy. (You could do so using the win-builder service 
>> at https://win-builder.r-project.org)", and then clicking on "upload 
>> package to CRAN"
>> These same steps were followed in the first submission, but at that 
>> time I received the following message that was not received in the 
>> last submission.
>>
>>> Dear maintainer,
>>>
>>> package metan_1.0.0.tar.gz has been auto-processed and is pending a 
>>> manual inspection of this new CRAN submission. A CRAN team member 
>>> will typically respond to you within the next 10 working days.
>>
>> Should I try to re-submit it again?
> 
> Probably.? I'd wait 24 hours, to see if someone from CRAN replies with 
> more information.
> 


Thanks, Duncan, here we got:

1. I did not spot a request for help from Nov 25 in the many messsages 
we receive. That one has now been answered.
2. I do not see a submission fom Nov 25. Can you simply resubmit and 
make sure you click on the confirmation link?

Best,
Uwe Ligges



> Duncan Murdoch
> 
>> Best,
>> Tiago Olivoto
>>
>>
>> -----Mensagem original-----
>> De: Duncan Murdoch <murdoch.duncan at gmail.com>
>> Enviada em: domingo, 15 de dezembro de 2019 17:35
>> Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
>> Assunto: Re: [R-pkg-devel] Time for CRAN response
>>
>> On 15/12/2019 1:29 p.m., Tiago Olivoto wrote:
>>> Dear all,
>>>
>>> I've submitted my package 'metan' to CRAN for the first time a few
>>> weeks ago and received some suggestions to improve the code. After
>>> fixing some bugs, I've resubmitted it on November 25, but I still
>>> don't have any response and the package was not found in incoming/ dir
>>> on CRAN cran ftp site. Since it is my first experience, I would like
>>> to have an idea about how long the CRAN team usually decides about a 
>>> package submission.
>>>
>>
>> If it is not in incoming/, something went wrong.? The most common 
>> thing to go wrong is that the maintainer didn't respond to the 
>> confirmation message. That message looks like this for a 
>> resubmission.? I assume first time submissions have a similar message:
>>
>>> Dear Duncan Murdoch
>>> Someone has submitted the package rgl to CRAN.
>>> You are receiving this email to confirm the submission as the
>>> maintainer of this package.
>>> To confirm the submission to CRAN, follow or copy & paste the
>>> following link into your browser:
>>> ...
>>
>>
>> When you confirm submission, you'll get another message that looks like
>> this:
>>
>>> [This was generated from CRAN.R-project.org/submit.html]
>>>
>>> The following package was uploaded to CRAN:
>>> ===========================================
>>>
>>> Package Information:
>>> Package: rgl
>>> Version: 0.100.26
>> ? > ...
>>
>> After that, it goes into a queue for checking, and usually within a 
>> few days you'll be told about problems with it or it will be accepted 
>> to CRAN.? (Sometimes you'll be told very quickly, if the automated 
>> checks find a problem.)
>>
>> Duncan Murdoch
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From t|@goo||voto @end|ng |rom gm@||@com  Mon Dec 16 03:41:01 2019
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Sun, 15 Dec 2019 23:41:01 -0300
Subject: [R-pkg-devel] RES:  RES: Time for CRAN response
In-Reply-To: <613c6b57-1621-0e2f-30df-a1e1d95e8c59@statistik.tu-dortmund.de>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
 <b39e3693-5861-3de2-2b0c-b7ab64eee6aa@gmail.com>
 <000001d5b392$9b0e9940$d12bcbc0$@gmail.com>
 <29bd2004-31a5-6734-b38b-71a8fd404c4b@gmail.com>
 <613c6b57-1621-0e2f-30df-a1e1d95e8c59@statistik.tu-dortmund.de>
Message-ID: <000701d5b3ba$433abeb0$c9b03c10$@gmail.com>

Thanks, Duncan and Uwe, for the answers!
I'll resubmit it as soon as possible.
Best regards,
Tiago Olivoto

--
M.Sc. Tiago Olivoto
Doutorando em Agronomia
Departamento de Fitotecnia
Universidade Federal de Santa Maria
Av. Roraima, 1000, Camobi
Santa Maria, RS, 97105-340
E-mail: tiagoolivoto at gmail.com
Cel: +55 54 999187863
Research Gate
Curr?culo Lattes

-----Mensagem original-----
De: Uwe Ligges <ligges at statistik.tu-dortmund.de> 
Enviada em: domingo, 15 de dezembro de 2019 22:27
Para: Duncan Murdoch <murdoch.duncan at gmail.com>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: Re: [R-pkg-devel] RES: Time for CRAN response



On 15.12.2019 23:39, Duncan Murdoch wrote:
> On 15/12/2019 4:57 p.m., Tiago Olivoto wrote:
>> Thank you for the response.
>> As far I remember, I've responded that message by following the link 
>> and selecting "I have read the CRAN policies and would like to submit 
>> this package to CRAN" and " I have checked the submission using R CMD 
>> check --as-cran and a current version of r-devel, as mandated by the 
>> CRAN Repository Policy. (You could do so using the win-builder 
>> service at https://win-builder.r-project.org)", and then clicking on 
>> "upload package to CRAN"
>> These same steps were followed in the first submission, but at that 
>> time I received the following message that was not received in the 
>> last submission.
>>
>>> Dear maintainer,
>>>
>>> package metan_1.0.0.tar.gz has been auto-processed and is pending a 
>>> manual inspection of this new CRAN submission. A CRAN team member 
>>> will typically respond to you within the next 10 working days.
>>
>> Should I try to re-submit it again?
> 
> Probably.  I'd wait 24 hours, to see if someone from CRAN replies with 
> more information.
> 


Thanks, Duncan, here we got:

1. I did not spot a request for help from Nov 25 in the many messsages we receive. That one has now been answered.
2. I do not see a submission fom Nov 25. Can you simply resubmit and make sure you click on the confirmation link?

Best,
Uwe Ligges



> Duncan Murdoch
> 
>> Best,
>> Tiago Olivoto
>>
>>
>> -----Mensagem original-----
>> De: Duncan Murdoch <murdoch.duncan at gmail.com> Enviada em: domingo, 15 
>> de dezembro de 2019 17:35
>> Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
>> Assunto: Re: [R-pkg-devel] Time for CRAN response
>>
>> On 15/12/2019 1:29 p.m., Tiago Olivoto wrote:
>>> Dear all,
>>>
>>> I've submitted my package 'metan' to CRAN for the first time a few 
>>> weeks ago and received some suggestions to improve the code. After 
>>> fixing some bugs, I've resubmitted it on November 25, but I still 
>>> don't have any response and the package was not found in incoming/ 
>>> dir on CRAN cran ftp site. Since it is my first experience, I would 
>>> like to have an idea about how long the CRAN team usually decides 
>>> about a package submission.
>>>
>>
>> If it is not in incoming/, something went wrong.  The most common 
>> thing to go wrong is that the maintainer didn't respond to the 
>> confirmation message. That message looks like this for a 
>> resubmission.  I assume first time submissions have a similar message:
>>
>>> Dear Duncan Murdoch
>>> Someone has submitted the package rgl to CRAN.
>>> You are receiving this email to confirm the submission as the 
>>> maintainer of this package.
>>> To confirm the submission to CRAN, follow or copy & paste the 
>>> following link into your browser:
>>> ...
>>
>>
>> When you confirm submission, you'll get another message that looks 
>> like
>> this:
>>
>>> [This was generated from CRAN.R-project.org/submit.html]
>>>
>>> The following package was uploaded to CRAN:
>>> ===========================================
>>>
>>> Package Information:
>>> Package: rgl
>>> Version: 0.100.26
>>   > ...
>>
>> After that, it goes into a queue for checking, and usually within a 
>> few days you'll be told about problems with it or it will be accepted 
>> to CRAN.  (Sometimes you'll be told very quickly, if the automated 
>> checks find a problem.)
>>
>> Duncan Murdoch
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @ergue|@@oko| @end|ng |rom gm@||@com  Mon Dec 16 09:54:10 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Mon, 16 Dec 2019 09:54:10 +0100
Subject: [R-pkg-devel] r2sundials submission failure
In-Reply-To: <e1d1b4e0-015a-844e-e6d0-228b16f65449@statistik.tu-dortmund.de>
References: <18799183-2647-badc-e051-f303a49dca59@gmail.com>
 <CAFQwRQzzTzDhm7_sgp2rJOVpomYvvcLyd7sHLQeKk5DaF5DX=Q@mail.gmail.com>
 <7a0ebb84-5de9-1298-23be-a4b53e99e169@gmail.com>
 <e15a9291-76d6-c705-b921-97da08aeb621@gmail.com>
 <e1d1b4e0-015a-844e-e6d0-228b16f65449@statistik.tu-dortmund.de>
Message-ID: <d2305135-3a3d-6a8d-9b29-ef1b9a0acd01@gmail.com>

Le 15/12/2019 ? 17:59, Uwe Ligges a ?crit?:
> Have you tried to write to CRAN at ... and ask if thirs party software can 
> be installed on CRAN?
No, I didn't. I presumed that CRAN team had other things to do than to 
install any soft that package authors could need. But if this is an 
option, I will try this approach next time. For this one, I integrated a 
subset of sundials soft in the package and it turned out to be far less 
then 20 MB (which is the size I had on my system for the whole set of 
cvodes library and its dependencies). The tarball is only 270 KB and 
compiled libraries on some systems can be up to 7 MB and far less on 
others (e.g. on my linux, compiled without "-g" flag, the whole size of 
$RHOME/library/r2sundial is under 2 MB). Just now, it is pending a 
manual inspection. I hope that library size will not be a problem.

Anyway, I appreciate the hint. Thanks.
Best,
Serguei.

> 
> Best,
> Uwe Ligges
> 
> On 11.12.2019 10:39, Serguei Sokol wrote:
>> Hi,
>>
>> I have tried to submit my new package 
>> https://github.com/sgsokol/r2sundials to CRAN but submission seems to 
>> be dismissed.
>> The package needs a third part software 
>> https://computing.llnl.gov/projects/sundials/cvodes so it cannot be 
>> built on CRAN automatically. I explained this (and how the package was 
>> tested by myself) in the submitter's comment (cf. hereafter) and 
>> second time in the reply to all (as was requested) to automatic 
>> message from CRAN announcing the building failure but to no avail. The 
>> submission was done on November 25, more than two weeks later I still 
>> don't have any response and the package is no more in incoming/ dir on 
>> cran ftp site. I conclude that this submission is dismissed.
>>
>> My question is: what can be reasonably done to make a package like 
>> this (i.e. depending on third part software not available on CRAN) to 
>> be accepted? Or may be the current policy: all new package must 
>> automatically build. Period. In my case it can imply ~20 MB additional 
>> space (source code + libs).
>>
>> Thanks in advance for any hint.
>> Serguei.
>>
>> Submitter's comment: Dear CRAN team,
>>
>> I submit package r2sundials which
>> ?? depends on a third part software
>> ?? from
>> https://computing.llnl.gov/projects/sundials/cvodes
>> This
>> ?? is the reason for which it will not automatically
>> ?? build on your test systems. But on my side, I could
>> ?? successfully run 'R CMD check --as-cran' on Linux
>> ?? (R-3.6.1, gcc8), MacOS Catalina (R-3.6.1, Apple
>> ?? clang-1100.0.33.12) and Windows 10 (R-devel r77430,
>> ?? gcc-4.9.3). If you wish, I can send you reports from
>> ?? these runs. Even if it is improbable, but if you
>> ?? decide to run such checks manually by your self,
>> ?? installation instructions are available
>> ?? on
>> https://github.com/sgsokol/r2sundials
>>
>> Moreover,
>> ?? winbuilder signals:
>> Possibly mis-spelled words in
>> ?? DESCRIPTION:
>> ?? CVODES (3:34)
>> ?? Hindmarsh (9:803)
>> ?? Rcpp (3:8, 9:285)
>> ?? al (9:816)
>> ?? cvodes (9:47)
>> ?? et (9:813)
>> ?? rmumps (9:501)
>> These all are false
>> ?? positives designating software, R packages and
>> ?? bibliographic reference.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @ergue|@@oko| @end|ng |rom gm@||@com  Mon Dec 16 15:20:17 2019
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Mon, 16 Dec 2019 15:20:17 +0100
Subject: [R-pkg-devel] r2sundials submission failure
In-Reply-To: <CAM3Cqv+zHAnU8iiNkch-JnxSngJYpqthAPx6=o7AtdjMnkVn0A@mail.gmail.com>
References: <18799183-2647-badc-e051-f303a49dca59@gmail.com>
 <CAFQwRQzzTzDhm7_sgp2rJOVpomYvvcLyd7sHLQeKk5DaF5DX=Q@mail.gmail.com>
 <7a0ebb84-5de9-1298-23be-a4b53e99e169@gmail.com>
 <e15a9291-76d6-c705-b921-97da08aeb621@gmail.com>
 <e1d1b4e0-015a-844e-e6d0-228b16f65449@statistik.tu-dortmund.de>
 <d2305135-3a3d-6a8d-9b29-ef1b9a0acd01@gmail.com>
 <CAM3Cqv+zHAnU8iiNkch-JnxSngJYpqthAPx6=o7AtdjMnkVn0A@mail.gmail.com>
Message-ID: <cf61d8a6-a4e1-ac28-011f-cc5745154fb9@gmail.com>

Hi Satya,

Le 16/12/2019 ? 14:52, Satyaprakash Nayak a ?crit?:
> Hi Serguei
> 
> I apply a similar approach to include the Sundials source code as a part 
> of my package (sundialr, on CRAN) which provides an interface for Cvode 
> and Cvodes. I didn?t have an issue with the files sizes while submitting 
> to CRAN
Good to hear :)

> and you can take a look to see if the code would be helpful to you.
> 
> https://github.com/sn248/sundialr
I see that you include v4.0.1 of sundials while I included a more recent 
release 5.0.0:
https://github.com/sgsokol/r2sundials

But I think, in the end, the library size must be close to each other.

> 
> Although, it would be great if sundials is installed on CRAN machines 
> and static libraries for Windows are provided in rtools 4.0
It could be a good thing in general but the end user on other platforms 
will have to install it anyway. Moreover, I see you kept the default 
size for index type:

SUNDIALS_INDEX_TYPE int64_t

while I defined it to int32_t.
It shows that it's hard to satisfy all the tastes in the wild with only 
one library distrubution ;)

Best,
Serguei.

> 
> Satya
> 
> 
> On Mon, 16 Dec 2019 at 03:54, Serguei Sokol <serguei.sokol at gmail.com 
> <mailto:serguei.sokol at gmail.com>> wrote:
> 
>     Le 15/12/2019 ? 17:59, Uwe Ligges a ?crit?:
>      > Have you tried to write to CRAN at ... and ask if thirs party
>     software can
>      > be installed on CRAN?
>     No, I didn't. I presumed that CRAN team had other things to do than to
>     install any soft that package authors could need. But if this is an
>     option, I will try this approach next time. For this one, I
>     integrated a
>     subset of sundials soft in the package and it turned out to be far less
>     then 20 MB (which is the size I had on my system for the whole set of
>     cvodes library and its dependencies). The tarball is only 270 KB and
>     compiled libraries on some systems can be up to 7 MB and far less on
>     others (e.g. on my linux, compiled without "-g" flag, the whole size of
>     $RHOME/library/r2sundial is under 2 MB). Just now, it is pending a
>     manual inspection. I hope that library size will not be a problem.
> 
>     Anyway, I appreciate the hint. Thanks.
>     Best,
>     Serguei.
> 
>      >
>      > Best,
>      > Uwe Ligges
>      >
>      > On 11.12.2019 10:39, Serguei Sokol wrote:
>      >> Hi,
>      >>
>      >> I have tried to submit my new package
>      >> https://github.com/sgsokol/r2sundials to CRAN but submission
>     seems to
>      >> be dismissed.
>      >> The package needs a third part software
>      >> https://computing.llnl.gov/projects/sundials/cvodes so it cannot be
>      >> built on CRAN automatically. I explained this (and how the
>     package was
>      >> tested by myself) in the submitter's comment (cf. hereafter) and
>      >> second time in the reply to all (as was requested) to automatic
>      >> message from CRAN announcing the building failure but to no
>     avail. The
>      >> submission was done on November 25, more than two weeks later I
>     still
>      >> don't have any response and the package is no more in incoming/
>     dir on
>      >> cran ftp site. I conclude that this submission is dismissed.
>      >>
>      >> My question is: what can be reasonably done to make a package like
>      >> this (i.e. depending on third part software not available on
>     CRAN) to
>      >> be accepted? Or may be the current policy: all new package must
>      >> automatically build. Period. In my case it can imply ~20 MB
>     additional
>      >> space (source code + libs).
>      >>
>      >> Thanks in advance for any hint.
>      >> Serguei.
>      >>
>      >> Submitter's comment: Dear CRAN team,
>      >>
>      >> I submit package r2sundials which
>      >> ?? depends on a third part software
>      >> ?? from
>      >> https://computing.llnl.gov/projects/sundials/cvodes
>      >> This
>      >> ?? is the reason for which it will not automatically
>      >> ?? build on your test systems. But on my side, I could
>      >> ?? successfully run 'R CMD check --as-cran' on Linux
>      >> ?? (R-3.6.1, gcc8), MacOS Catalina (R-3.6.1, Apple
>      >> ?? clang-1100.0.33.12) and Windows 10 (R-devel r77430,
>      >> ?? gcc-4.9.3). If you wish, I can send you reports from
>      >> ?? these runs. Even if it is improbable, but if you
>      >> ?? decide to run such checks manually by your self,
>      >> ?? installation instructions are available
>      >> ?? on
>      >> https://github.com/sgsokol/r2sundials
>      >>
>      >> Moreover,
>      >> ?? winbuilder signals:
>      >> Possibly mis-spelled words in
>      >> ?? DESCRIPTION:
>      >> ?? CVODES (3:34)
>      >> ?? Hindmarsh (9:803)
>      >> ?? Rcpp (3:8, 9:285)
>      >> ?? al (9:816)
>      >> ?? cvodes (9:47)
>      >> ?? et (9:813)
>      >> ?? rmumps (9:501)
>      >> These all are false
>      >> ?? positives designating software, R packages and
>      >> ?? bibliographic reference.
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From R@|ner @end|ng |rom krug@@de  Mon Dec 16 15:34:57 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Mon, 16 Dec 2019 15:34:57 +0100
Subject: [R-pkg-devel] DOI in of package in DESCRIPTION file
Message-ID: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>

Hi

UI am preparing my package for CRAN. I have a DOI for my package, and would like to add Ito the DESCRIPTION file.

At the moment, I am adding

	DOI: https://zenodo.org/record/3229615

To the DESCRIPTION file. This raises not an error during check, but tells me, that DOI is a unknown field.

Is there a recommended way, of adding the DOI of a package to the DESCRIPTION file? I did not find anything when googling.

Thanks,

Rainer



--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982


From r|||ght79 @end|ng |rom gm@||@com  Mon Dec 16 15:52:37 2019
From: r|||ght79 @end|ng |rom gm@||@com (Robert M. Flight)
Date: Mon, 16 Dec 2019 09:52:37 -0500
Subject: [R-pkg-devel] DOI in of package in DESCRIPTION file
In-Reply-To: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>
References: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>
Message-ID: <CAJLyBTUWORDq=kUVvdFYX1ziPUU-1Ui2XPQ0AskaN1XFjyxrZg@mail.gmail.com>

Are you wanting to provide the DOI for citation purposes? Then I would
recommend making sure you have a valid citation file
https://r-pkgs.org/inst.html#inst-citation (which should be fine having a
DOI field), and add it to the README as well.

-Robert

Robert M Flight, PhD
Bioinformatics Research Associate
Puller of Rabbits from Hats
Research Parasite
Resource Center for Stable Isotope Resolved Metabolomics
Manager, Systems Biology and Omics Integration Journal Club
Markey Cancer Center
CC434 Roach Building
University of Kentucky
Lexington, KY

Twitter: @rmflight
Web: rmflight.github.io
ORCID: http://orcid.org/0000-0001-8141-7788
EM rflight79 at gmail.com
PH 502-509-1827 <(502)%20509-1827>

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. - Ronald Fisher

On Mon, Dec 16, 2019 at 9:43 AM Rainer M Krug <Rainer at krugs.de> wrote:

> Hi
>
> UI am preparing my package for CRAN. I have a DOI for my package, and
> would like to add Ito the DESCRIPTION file.
>
> At the moment, I am adding
>
>         DOI: https://zenodo.org/record/3229615
>
> To the DESCRIPTION file. This raises not an error during check, but tells
> me, that DOI is a unknown field.
>
> Is there a recommended way, of adding the DOI of a package to the
> DESCRIPTION file? I did not find anything when googling.
>
> Thanks,
>
> Rainer
>
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office: +41 (0)44 635 47 64
> Cell:           +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
>                 Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Mon Dec 16 15:53:39 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 16 Dec 2019 14:53:39 +0000
Subject: [R-pkg-devel] DOI in of package in DESCRIPTION file
In-Reply-To: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>
References: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E01CC7A5188@MBXP01.ds.man.ac.uk>

Something like the following should do:  

     <doi:10.5281/zenodo.3229615>

Note that https://zenodo.org/record/3229615 is an URL. Not doi.


Georgi Boshnakov

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Rainer M Krug
Sent: 16 December 2019 14:35
To: List r-package-devel
Subject: [R-pkg-devel] DOI in of package in DESCRIPTION file

Hi

UI am preparing my package for CRAN. I have a DOI for my package, and would like to add Ito the DESCRIPTION file.

At the moment, I am adding

	DOI: https://zenodo.org/record/3229615

To the DESCRIPTION file. This raises not an error during check, but tells me, that DOI is a unknown field.

Is there a recommended way, of adding the DOI of a package to the DESCRIPTION file? I did not find anything when googling.

Thanks,

Rainer



--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From R@|ner @end|ng |rom krug@@de  Mon Dec 16 15:57:15 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Mon, 16 Dec 2019 15:57:15 +0100
Subject: [R-pkg-devel] DOI in of package in DESCRIPTION file
In-Reply-To: <844523a2-6a16-0e81-9ce3-19bf1c6ad438@statistik.tu-dortmund.de>
References: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>
 <844523a2-6a16-0e81-9ce3-19bf1c6ad438@statistik.tu-dortmund.de>
Message-ID: <741CC219-602E-4A03-9B4F-785C76F92E2E@krugs.de>

Thanks Uwe, I will do so.

Rainer


> On 16 Dec 2019, at 15:56, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 16.12.2019 15:34, Rainer M Krug wrote:
>> Hi
>> UI am preparing my package for CRAN. I have a DOI for my package, and would like to add Ito the DESCRIPTION file.
>> At the moment, I am adding
>> 	DOI: https://zenodo.org/record/3229615
> 
> This is not a DOI, the DOI is actually
> 
> 10.5281/zenodo.3229615
> 
> and we do not have a field fo it, but you can cite it within the Description field and link to it via a sentence and DOI such as:
> 
> "See R.M. Krug and O. Petchey (2019) <DOI:10.5281/zenodo.3229615>."
> 
> Best,
> Uwe Ligges
> 
> 
>> To the DESCRIPTION file. This raises not an error during check, but tells me, that DOI is a unknown field.
>> Is there a recommended way, of adding the DOI of a package to the DESCRIPTION file? I did not find anything when googling.
>> Thanks,
>> Rainer
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> Orcid ID: 0000-0002-7490-0066
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> Office:	+41 (0)44 635 47 64
>> Cell:       	+41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> 		Rainer at krugs.de
>> Skype:     RMkrug
>> PGP: 0x0F52F982
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Mon Dec 16 15:57:49 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Mon, 16 Dec 2019 15:57:49 +0100
Subject: [R-pkg-devel] DOI in of package in DESCRIPTION file
In-Reply-To: <CAJLyBTUWORDq=kUVvdFYX1ziPUU-1Ui2XPQ0AskaN1XFjyxrZg@mail.gmail.com>
References: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>
 <CAJLyBTUWORDq=kUVvdFYX1ziPUU-1Ui2XPQ0AskaN1XFjyxrZg@mail.gmail.com>
Message-ID: <2B95C98A-E1B0-47AE-AD9D-A8D68C9E2140@krugs.de>

Thanks Robert,

I will add this as well as in the Description field.

Rainer


> On 16 Dec 2019, at 15:52, Robert M. Flight <rflight79 at gmail.com> wrote:
> 
> Are you wanting to provide the DOI for citation purposes? Then I would recommend making sure you have a valid citation file https://r-pkgs.org/inst.html#inst-citation <https://r-pkgs.org/inst.html#inst-citation> (which should be fine having a DOI field), and add it to the README as well.
> 
> -Robert
> 
> Robert M Flight, PhD
> Bioinformatics Research Associate
> Puller of Rabbits from Hats
> Research Parasite
> Resource Center for Stable Isotope Resolved Metabolomics
> Manager, Systems Biology and Omics Integration Journal Club
> Markey Cancer Center
> CC434 Roach Building
> University of Kentucky
> Lexington, KY
> 
> Twitter: @rmflight
> Web: rmflight.github.io <http://rmflight.github.io/>
> ORCID: http://orcid.org/0000-0001-8141-7788 <http://orcid.org/0000-0001-8141-7788>
> EM rflight79 at gmail.com <mailto:rflight79 at gmail.com>
> PH 502-509-1827 <tel:(502)%20509-1827>
> 
> To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of. - Ronald Fisher
> 
> On Mon, Dec 16, 2019 at 9:43 AM Rainer M Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>> wrote:
> Hi
> 
> UI am preparing my package for CRAN. I have a DOI for my package, and would like to add Ito the DESCRIPTION file.
> 
> At the moment, I am adding
> 
>         DOI: https://zenodo.org/record/3229615 <https://zenodo.org/record/3229615>
> 
> To the DESCRIPTION file. This raises not an error during check, but tells me, that DOI is a unknown field.
> 
> Is there a recommended way, of adding the DOI of a package to the DESCRIPTION file? I did not find anything when googling.
> 
> Thanks,
> 
> Rainer
> 
> 
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office: +41 (0)44 635 47 64
> Cell:           +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>                 Rainer at krugs.de <mailto:Rainer at krugs.de>
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Dec 16 15:56:41 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 16 Dec 2019 15:56:41 +0100
Subject: [R-pkg-devel] DOI in of package in DESCRIPTION file
In-Reply-To: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>
References: <98599315-694B-48CE-AA32-708868567DC0@krugs.de>
Message-ID: <844523a2-6a16-0e81-9ce3-19bf1c6ad438@statistik.tu-dortmund.de>



On 16.12.2019 15:34, Rainer M Krug wrote:
> Hi
> 
> UI am preparing my package for CRAN. I have a DOI for my package, and would like to add Ito the DESCRIPTION file.
> 
> At the moment, I am adding
> 
> 	DOI: https://zenodo.org/record/3229615

This is not a DOI, the DOI is actually

10.5281/zenodo.3229615

and we do not have a field fo it, but you can cite it within the 
Description field and link to it via a sentence and DOI such as:

"See R.M. Krug and O. Petchey (2019) <DOI:10.5281/zenodo.3229615>."

Best,
Uwe Ligges


> 
> To the DESCRIPTION file. This raises not an error during check, but tells me, that DOI is a unknown field.
> 
> Is there a recommended way, of adding the DOI of a package to the DESCRIPTION file? I did not find anything when googling.
> 
> Thanks,
> 
> Rainer
> 
> 
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> 		Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From Jor|@@Mey@ @end|ng |rom UGent@be  Tue Dec 17 10:30:24 2019
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Tue, 17 Dec 2019 09:30:24 +0000
Subject: [R-pkg-devel] Possibly invalid URL note about canonical form of
 link to cran package
Message-ID: <1576575057232.71168@UGent.be>

Dear all,


I link in a vignette to the CRAN page of another package using the following form:


https://cloud.r-project.org/package=kernlab<https://cloud.r-project.org/package=pkgname>


I believed this was the correct way to do it, but I get following note in R CMD check --as-cran :


Found the following (possibly) invalid URLs:
  URL: https://cloud.r-project.org/package=kernlab (moved to https://cloud.r-project.org/web/packages/kernlab/index.html)
    From: inst/doc/xnet_ShortIntroduction.html
    Status: 200
    Message: OK
    CRAN URL not in canonical form
  Canonical CRAN.R-project.org URLs use https.


So now I'm a bit confused. Aren't we supposed to use the canonical form as mentioned on every CRAN package page, or should I use cran.r-project.org specifically? I wanted to use cloud.r-project.org to limit traffic to the CRAN repo directly.


Advice is appreciated, I'd like to submit this package before the holidays.


Cheers

Joris


--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Dec 17 10:34:40 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 17 Dec 2019 09:34:40 +0000
Subject: [R-pkg-devel] Possibly invalid URL note about canonical form of
 link to cran package
In-Reply-To: <1576575057232.71168@UGent.be>
References: <1576575057232.71168@UGent.be>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E01CC7A527E@MBXP01.ds.man.ac.uk>

I believe that the canonical form is without 'cloud':

https://cran.r-project.org/package=kernlab


Georgi Boshnakov

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Joris Meys
Sent: 17 December 2019 09:30
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Possibly invalid URL note about canonical form of link to cran package

Dear all,


I link in a vignette to the CRAN page of another package using the following form:


https://cloud.r-project.org/package=kernlab<https://cloud.r-project.org/package=pkgname>


I believed this was the correct way to do it, but I get following note in R CMD check --as-cran :


Found the following (possibly) invalid URLs:
  URL: https://cloud.r-project.org/package=kernlab (moved to https://cloud.r-project.org/web/packages/kernlab/index.html)
    From: inst/doc/xnet_ShortIntroduction.html
    Status: 200
    Message: OK
    CRAN URL not in canonical form
  Canonical CRAN.R-project.org URLs use https.


So now I'm a bit confused. Aren't we supposed to use the canonical form as mentioned on every CRAN package page, or should I use cran.r-project.org specifically? I wanted to use cloud.r-project.org to limit traffic to the CRAN repo directly.


Advice is appreciated, I'd like to submit this package before the holidays.


Cheers

Joris


--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@rk@hogue@chp @end|ng |rom gm@||@com  Wed Dec 18 00:22:44 2019
From: m@rk@hogue@chp @end|ng |rom gm@||@com (Mark Hogue)
Date: Tue, 17 Dec 2019 18:22:44 -0500
Subject: [R-pkg-devel] Fwd: CRAN submission radsafer 2.1.0
In-Reply-To: <20191217225542.5872D161EF3@xmpalantir.wu.ac.at>
References: <20191217225542.5872D161EF3@xmpalantir.wu.ac.at>
Message-ID: <CAHPRF8d-DH3imHt0yQuKsFSpoOeK+LTgqmSe4L6sG6Ny4zMrkA@mail.gmail.com>

This package is ready to submit, except I am concerned about one thing. The
package version listed on the check result page is 2.0.1, whereas this
version is 2.1.0. Should I go ahead and submit it, or is there some problem
I need to fix?


---------- Forwarded message ---------
From: Package Submission <cran-sysadmin at xmpalantir.wu.ac.at>
Date: Tue, Dec 17, 2019 at 5:55 PM
Subject: CRAN submission radsafer 2.1.0
To: Mark Hogue <mark.hogue.chp at gmail.com>


Dear Mark Hogue
Someone has submitted the package radsafer to CRAN.
You are receiving this email to confirm the submission as the maintainer of
this package.
To confirm the submission to CRAN, follow or copy & paste the following
link into your browser:

https://xmpalantir.wu.ac.at/cransubmit/conf_mail.php?code=c9a3cccd75150cf5bf6235645d8bee6b

If you did not submit the package or do not wish for it to be submitted to
CRAN, simply ignore this email

Submission Information:
Submitter: Mark Hogue <mark.hogue.chp at gmail.com>
Package: radsafer
Version: 2.1.0
Title: Radiation Safety
Author(s): Mark Hogue <mark.hogue.chp at gmail.com>
Maintainer: Mark Hogue <mark.hogue.chp at gmail.com>
Depends: R (>= 3.5.0)
Suggests: testthat, scatterplot3d, beepr, knitr, rmarkdown
Description: Provides functions for radiation safety, also known as
  "radiation protection" and "radiological control". The
  science of radiation protection is called "health physics"
  and its engineering functions are called "radiological
  engineering". Functions in this package cover many of the
  computations needed by radiation safety professionals.
  Examples include: obtaining updated calibration and source
  check values for radiation monitors to account for
  radioactive decay in a reference source, simulating
  instrument readings to better understand measurement
  uncertainty, correcting instrument readings for geometry and
  ambient atmospheric conditions. Many of these functions are
  described in Johnson and Kirby (2011, ISBN-13:
  978-1609134198). Utilities are also included for developing
  inputs and processing outputs with radiation transport codes,
  such as MCNP, a general-purpose Monte Carlo N-Particle code
  that can be used for neutron, photon, electron, or coupled
  neutron/photon/electron transport (Werner et. al. (2018)
  <doi:10.2172/1419730>).
License: GPL-3
Imports: ggplot2, readr, stats, graphics, RadData, stringr, magrittr,
  dplyr, rlang


Submitter's comment: ## Test environments
* local Windows 10 home version
  1809, R 3.6.2
* ubuntu 16.04 and Fedora Linux (on
  R-hub builder), R 3.6.2

## R CMD check results
There
  were no ERRORs or WARNINGs. There was one NOTE,
  referring to non-standard files in the check
  directory. These are output files resulting from
  functions that provide text files to the user's
  working or specified other directory.

	[[alternative HTML version deleted]]


From m@rk@v@nder|oo @end|ng |rom gm@||@com  Wed Dec 18 08:54:51 2019
From: m@rk@v@nder|oo @end|ng |rom gm@||@com (Mark van der Loo)
Date: Wed, 18 Dec 2019 08:54:51 +0100
Subject: [R-pkg-devel] Fwd: CRAN submission radsafer 2.1.0
In-Reply-To: <CAHPRF8d-DH3imHt0yQuKsFSpoOeK+LTgqmSe4L6sG6Ny4zMrkA@mail.gmail.com>
References: <20191217225542.5872D161EF3@xmpalantir.wu.ac.at>
 <CAHPRF8d-DH3imHt0yQuKsFSpoOeK+LTgqmSe4L6sG6Ny4zMrkA@mail.gmail.com>
Message-ID: <CAOKDuOintcHvuZ-ja4M2Bh1TDHW8KiOqcBPPHYrvpRbeCfuuww@mail.gmail.com>

I am not sure which 'check result page' you mean, but presumably you mean
this one: https://cran.r-project.org/web/checks/check_results_radsafer.html

The e-mail you got asks you to confirm that you are the author of the
submitted package. After confirmation (and checking the boxes on the
confirmation page) the package will be staged for build and check at CRAN.
Once your package passes this stage, it is released on CRAN. After that it
takes some days before your package has been built and checked at the
different architectures listed on the CRAN check results page.


HTH,
Mark

On Wed, Dec 18, 2019 at 12:23 AM Mark Hogue <mark.hogue.chp at gmail.com>
wrote:

> This package is ready to submit, except I am concerned about one thing. The
> package version listed on the check result page is 2.0.1, whereas this
> version is 2.1.0. Should I go ahead and submit it, or is there some problem
> I need to fix?
>
>
> ---------- Forwarded message ---------
> From: Package Submission <cran-sysadmin at xmpalantir.wu.ac.at>
> Date: Tue, Dec 17, 2019 at 5:55 PM
> Subject: CRAN submission radsafer 2.1.0
> To: Mark Hogue <mark.hogue.chp at gmail.com>
>
>
> Dear Mark Hogue
> Someone has submitted the package radsafer to CRAN.
> You are receiving this email to confirm the submission as the maintainer of
> this package.
> To confirm the submission to CRAN, follow or copy & paste the following
> link into your browser:
>
>
> https://xmpalantir.wu.ac.at/cransubmit/conf_mail.php?code=c9a3cccd75150cf5bf6235645d8bee6b
>
> If you did not submit the package or do not wish for it to be submitted to
> CRAN, simply ignore this email
>
> Submission Information:
> Submitter: Mark Hogue <mark.hogue.chp at gmail.com>
> Package: radsafer
> Version: 2.1.0
> Title: Radiation Safety
> Author(s): Mark Hogue <mark.hogue.chp at gmail.com>
> Maintainer: Mark Hogue <mark.hogue.chp at gmail.com>
> Depends: R (>= 3.5.0)
> Suggests: testthat, scatterplot3d, beepr, knitr, rmarkdown
> Description: Provides functions for radiation safety, also known as
>   "radiation protection" and "radiological control". The
>   science of radiation protection is called "health physics"
>   and its engineering functions are called "radiological
>   engineering". Functions in this package cover many of the
>   computations needed by radiation safety professionals.
>   Examples include: obtaining updated calibration and source
>   check values for radiation monitors to account for
>   radioactive decay in a reference source, simulating
>   instrument readings to better understand measurement
>   uncertainty, correcting instrument readings for geometry and
>   ambient atmospheric conditions. Many of these functions are
>   described in Johnson and Kirby (2011, ISBN-13:
>   978-1609134198). Utilities are also included for developing
>   inputs and processing outputs with radiation transport codes,
>   such as MCNP, a general-purpose Monte Carlo N-Particle code
>   that can be used for neutron, photon, electron, or coupled
>   neutron/photon/electron transport (Werner et. al. (2018)
>   <doi:10.2172/1419730>).
> License: GPL-3
> Imports: ggplot2, readr, stats, graphics, RadData, stringr, magrittr,
>   dplyr, rlang
>
>
> Submitter's comment: ## Test environments
> * local Windows 10 home version
>   1809, R 3.6.2
> * ubuntu 16.04 and Fedora Linux (on
>   R-hub builder), R 3.6.2
>
> ## R CMD check results
> There
>   were no ERRORs or WARNINGs. There was one NOTE,
>   referring to non-standard files in the check
>   directory. These are output files resulting from
>   functions that provide text files to the user's
>   working or specified other directory.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c|  Wed Dec 18 23:01:55 2019
From: m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c| (Mauricio Zambrano-Bigiarini)
Date: Wed, 18 Dec 2019 19:01:55 -0300
Subject: [R-pkg-devel] Manual inspection of a new CRAN submission
In-Reply-To: <000001d5b375$8e1b5880$aa520980$@gmail.com>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
Message-ID: <CAP6VarsLEL_iUx-Do1eLAJEZMxo3oKZa=vR3Q+JMRHofMqHwiA@mail.gmail.com>

Dear List,

Today I submitted a package to CRAN, and after correcting some NOTEs,
I got the following automatic message:

"package mypackage_0.1-2.tar.gz has been auto-processed and is pending
a manual inspection of this new CRAN submission. A CRAN team member
will typically respond to you within the next 10 working days. For
technical reasons you may receive a second copy of this message when a
team member triggers a new check."


Could somebody give a short explanation about what type of checkings
are made in this "manual inspection" ?

Thak in advance for your help,

Mauricio



Mauricio Zambrano-Bigiarini, PhD

=====================================
Department of Civil Engineering
Faculty of Engineering and Sciences
Universidad de La Frontera, Temuco, Chile
http://hzambran.github.io/
=====================================
mailto : mauricio.zambrano at ufrontera.cl
work-phone : +56 45 259 2812
=====================================
"Success is not final, failure is not fatal.
It is the courage to continue that counts.
(Winston Churchill)
=====================================
Linux user #454569 -- Linux Mint user

-- 
La informaci?n contenida en este correo electr?nico y cualquier anexo o 
respuesta relacionada, puede contener datos e informaci?n confidencial y no 
puede ser usada o difundida por personas distintas a su(s) destinatario(s). 
Si usted no es el destinatario de esta comunicaci?n, le informamos que 
cualquier divulgaci?n, distribuci?n o copia de esta informaci?n constituye 
un delito conforme a la ley chilena. Si lo ha recibido por error, por favor 
borre el mensaje y todos sus anexos y notifique al remitente.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec 18 23:50:27 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 18 Dec 2019 17:50:27 -0500
Subject: [R-pkg-devel] Manual inspection of a new CRAN submission
In-Reply-To: <CAP6VarsLEL_iUx-Do1eLAJEZMxo3oKZa=vR3Q+JMRHofMqHwiA@mail.gmail.com>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
 <CAP6VarsLEL_iUx-Do1eLAJEZMxo3oKZa=vR3Q+JMRHofMqHwiA@mail.gmail.com>
Message-ID: <95900521-bda5-9305-7f2c-25bbc46d7571@gmail.com>

On 18/12/2019 5:01 p.m., Mauricio Zambrano-Bigiarini wrote:
> Dear List,
> 
> Today I submitted a package to CRAN, and after correcting some NOTEs,
> I got the following automatic message:
> 
> "package mypackage_0.1-2.tar.gz has been auto-processed and is pending
> a manual inspection of this new CRAN submission. A CRAN team member
> will typically respond to you within the next 10 working days. For
> technical reasons you may receive a second copy of this message when a
> team member triggers a new check."
> 
> 
> Could somebody give a short explanation about what type of checkings
> are made in this "manual inspection" ?
> 

Basically they're checking whether you are following the guidelines at 
https://cran.r-project.org/web/packages/policies.html.  Not all of those 
things can be checked automatically, and many people claim to be 
following them when they actually are not.

Duncan Murdoch


From m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c|  Thu Dec 19 02:26:52 2019
From: m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c| (Mauricio Zambrano-Bigiarini)
Date: Wed, 18 Dec 2019 22:26:52 -0300
Subject: [R-pkg-devel] Manual inspection of a new CRAN submission
In-Reply-To: <95900521-bda5-9305-7f2c-25bbc46d7571@gmail.com>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
 <CAP6VarsLEL_iUx-Do1eLAJEZMxo3oKZa=vR3Q+JMRHofMqHwiA@mail.gmail.com>
 <95900521-bda5-9305-7f2c-25bbc46d7571@gmail.com>
Message-ID: <CAP6Varucj=u6U9eDdeU90-mU44DkV6-quiYgURb6Tg+VvXBiMQ@mail.gmail.com>

Thank you very much Duncan for the information.

BTW, it is incredible to me how the quality control of packages
submitted to CRAN  has improved in the last decade. Now the automatic
procedures are able to identify even "little" things (e.g., broken
links, misspelled words, size of vignettes, etc).

Thank you very much for all the effort and dedication of the CRAN
Repository Maintainers.

Kind regards,

Mauricio

=====================================
"Success is not final, failure is not fatal.
It is the courage to continue that counts.
(Winston Churchill)
=====================================
Linux user #454569 -- Linux Mint user

On Wed, 18 Dec 2019 at 19:50, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 18/12/2019 5:01 p.m., Mauricio Zambrano-Bigiarini wrote:
> > Dear List,
> >
> > Today I submitted a package to CRAN, and after correcting some NOTEs,
> > I got the following automatic message:
> >
> > "package mypackage_0.1-2.tar.gz has been auto-processed and is pending
> > a manual inspection of this new CRAN submission. A CRAN team member
> > will typically respond to you within the next 10 working days. For
> > technical reasons you may receive a second copy of this message when a
> > team member triggers a new check."
> >
> >
> > Could somebody give a short explanation about what type of checkings
> > are made in this "manual inspection" ?
> >
>
> Basically they're checking whether you are following the guidelines at
> https://cran.r-project.org/web/packages/policies.html.  Not all of those
> things can be checked automatically, and many people claim to be
> following them when they actually are not.
>
> Duncan Murdoch

-- 
La informaci?n contenida en este correo electr?nico y cualquier anexo o 
respuesta relacionada, puede contener datos e informaci?n confidencial y no 
puede ser usada o difundida por personas distintas a su(s) destinatario(s). 
Si usted no es el destinatario de esta comunicaci?n, le informamos que 
cualquier divulgaci?n, distribuci?n o copia de esta informaci?n constituye 
un delito conforme a la ley chilena. Si lo ha recibido por error, por favor 
borre el mensaje y todos sus anexos y notifique al remitente.


From rm@h@rp @end|ng |rom me@com  Thu Dec 19 03:53:51 2019
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Wed, 18 Dec 2019 20:53:51 -0600
Subject: [R-pkg-devel] Manual inspection of a new CRAN submission
In-Reply-To: <CAP6Varucj=u6U9eDdeU90-mU44DkV6-quiYgURb6Tg+VvXBiMQ@mail.gmail.com>
References: <000001d5b375$8e1b5880$aa520980$@gmail.com>
 <CAP6VarsLEL_iUx-Do1eLAJEZMxo3oKZa=vR3Q+JMRHofMqHwiA@mail.gmail.com>
 <95900521-bda5-9305-7f2c-25bbc46d7571@gmail.com>
 <CAP6Varucj=u6U9eDdeU90-mU44DkV6-quiYgURb6Tg+VvXBiMQ@mail.gmail.com>
Message-ID: <9981F865-2923-450C-A189-8F58E54FFF53@me.com>

Mauricio,

I appreciate the manual inspection.

I am waiting for the second time on a manual inspection. The first inspection found a fairly severe error of mine where I was writting out an error file to the user?s home directory space. It was code I had written over two years ago and long before I considered submission to CRAN. The code is only exercised with an specific data error when manually exercising the API of the Shiny application included in the package.

I was certainly embarrashed by my error but I am more grateful for the work of Kurt Hornik and Uwe Ligges who found the mistake.

Mark
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com











> On Dec 18, 2019, at 7:26 PM, Mauricio Zambrano-Bigiarini <mauricio.zambrano at ufrontera.cl> wrote:
> 
> Thank you very much Duncan for the information.
> 
> BTW, it is incredible to me how the quality control of packages
> submitted to CRAN  has improved in the last decade. Now the automatic
> procedures are able to identify even "little" things (e.g., broken
> links, misspelled words, size of vignettes, etc).
> 
> Thank you very much for all the effort and dedication of the CRAN
> Repository Maintainers.
> 
> Kind regards,
> 
> Mauricio
> 
> =====================================
> "Success is not final, failure is not fatal.
> It is the courage to continue that counts.
> (Winston Churchill)
> =====================================
> Linux user #454569 -- Linux Mint user
> 
> On Wed, 18 Dec 2019 at 19:50, Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>> 
>> On 18/12/2019 5:01 p.m., Mauricio Zambrano-Bigiarini wrote:
>>> Dear List,
>>> 
>>> Today I submitted a package to CRAN, and after correcting some NOTEs,
>>> I got the following automatic message:
>>> 
>>> "package mypackage_0.1-2.tar.gz has been auto-processed and is pending
>>> a manual inspection of this new CRAN submission. A CRAN team member
>>> will typically respond to you within the next 10 working days. For
>>> technical reasons you may receive a second copy of this message when a
>>> team member triggers a new check."
>>> 
>>> 
>>> Could somebody give a short explanation about what type of checkings
>>> are made in this "manual inspection" ?
>>> 
>> 
>> Basically they're checking whether you are following the guidelines at
>> https://cran.r-project.org/web/packages/policies.html.  Not all of those
>> things can be checked automatically, and many people claim to be
>> following them when they actually are not.
>> 
>> Duncan Murdoch
> 
> -- 
> La informaci?n contenida en este correo electr?nico y cualquier anexo o 
> respuesta relacionada, puede contener datos e informaci?n confidencial y no 
> puede ser usada o difundida por personas distintas a su(s) destinatario(s). 
> Si usted no es el destinatario de esta comunicaci?n, le informamos que 
> cualquier divulgaci?n, distribuci?n o copia de esta informaci?n constituye 
> un delito conforme a la ley chilena. Si lo ha recibido por error, por favor 
> borre el mensaje y todos sus anexos y notifique al remitente.
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From @@@@k|evt@ov @end|ng |rom gm@||@com  Sun Dec 29 05:30:21 2019
From: @@@@k|evt@ov @end|ng |rom gm@||@com (Artem Klevtsov)
Date: Sun, 29 Dec 2019 11:30:21 +0700
Subject: [R-pkg-devel] R package fails examples and tests on Windows i386
Message-ID: <5313031.DvuYhMxLoT@unikum-desktop>

Hello,

The package is R bindings of the uap-cpp library using Rcpp. Package also includes re2 and yaml-cpp libs (included in the source tree and built with Makevars).

I tried test the package on Linux and Windows. I faced with errors on i386 on the AppVeyor. The same with rhub and win-builder. I don't understand what going on because output of the failed and success examples/test are the same. How can I found the reason and fix it?

R code to test package:

remotes::install_gitlab("artemklevtsov/uaparser")
library(uaparser)
# user agent strings
ua <- c(
  "Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:47.0) Gecko/20100101 Firefox/47.0",
  "Mozilla/5.0 (Macintosh; Intel Mac OS X x.y; rv:42.0) Gecko/20100101 Firefox/42.0",
  "Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0)",
  "curl/7.10.6 (i386-redhat-linux-gnu) libcurl/7.10.6 OpenSSL/0.9.7a ipv6 zlib/1.1.4",
  "Googlebot/2.1 (+http://www.google.com/bot.html)"
)
# parse all fields
parse_user_agent(ua)
# parse os information
parse_os(ua)
# get device information
parse_device(ua)
# parse browser information
parse_browser(ua)
# get device type
parse_device_type(ua)

References:

- Package source code: https://gitlab.com/artemklevtsov/uaparser
- Latest AppVeyor build log: https://ci.appveyor.com/project/artemklevtsov/uaparser/build/job/ajofdjiy5exvocq7
- Latest AppVeyor build artifacts: https://ci.appveyor.com/api/buildjobs/ajofdjiy5exvocq7/artifacts/failure.zip

-- 
regards,
Artem Klevtsov


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Dec 30 13:58:24 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 30 Dec 2019 13:58:24 +0100
Subject: [R-pkg-devel] 
 R package fails examples and tests on Windows i386
In-Reply-To: <5313031.DvuYhMxLoT@unikum-desktop>
References: <5313031.DvuYhMxLoT@unikum-desktop>
Message-ID: <000ad3ec-ada9-a35a-e746-08f8e049ef41@statistik.tu-dortmund.de>

My guess is that you have nmot properly closed open connections?

Best,
Uwe Ligges



On 29.12.2019 05:30, Artem Klevtsov wrote:
> Hello,
> 
> The package is R bindings of the uap-cpp library using Rcpp. Package also includes re2 and yaml-cpp libs (included in the source tree and built with Makevars).
> 
> I tried test the package on Linux and Windows. I faced with errors on i386 on the AppVeyor. The same with rhub and win-builder. I don't understand what going on because output of the failed and success examples/test are the same. How can I found the reason and fix it?
> 
> R code to test package:
> 
> remotes::install_gitlab("artemklevtsov/uaparser")
> library(uaparser)
> # user agent strings
> ua <- c(
>    "Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:47.0) Gecko/20100101 Firefox/47.0",
>    "Mozilla/5.0 (Macintosh; Intel Mac OS X x.y; rv:42.0) Gecko/20100101 Firefox/42.0",
>    "Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0)",
>    "curl/7.10.6 (i386-redhat-linux-gnu) libcurl/7.10.6 OpenSSL/0.9.7a ipv6 zlib/1.1.4",
>    "Googlebot/2.1 (+http://www.google.com/bot.html)"
> )
> # parse all fields
> parse_user_agent(ua)
> # parse os information
> parse_os(ua)
> # get device information
> parse_device(ua)
> # parse browser information
> parse_browser(ua)
> # get device type
> parse_device_type(ua)
> 
> References:
> 
> - Package source code: https://gitlab.com/artemklevtsov/uaparser
> - Latest AppVeyor build log: https://ci.appveyor.com/project/artemklevtsov/uaparser/build/job/ajofdjiy5exvocq7
> - Latest AppVeyor build artifacts: https://ci.appveyor.com/api/buildjobs/ajofdjiy5exvocq7/artifacts/failure.zip
>


